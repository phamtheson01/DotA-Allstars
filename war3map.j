globals
  string EXTRADLLNAME="DotAAllstarsHelper688a.dll"
  integer array Ascii__Ints
  string array Ascii__Chars
  code l__Code
  integer l__Int
  string l__Str
  boolean l__Bool
  integer array l__Array
  string array HexNumber__Chars
  integer array l__bytecode
  integer array Memory
  integer bytecodedata
  integer GameState
  integer pointers
  integer pUnitData
  integer pAbilityData
  integer array H
  rect SentSecretShopBuyRect=null
  rect ScrgSecretShopBuyRect=null
  rect TopSideShopBuyRect=null
  rect BotSideShopBuyRect=null
  integer integer007=0
  effect array fx1
  unit unit001=null
  integer integer008=0
  real array reals001
  integer array integers006
  integer array integers007
  ubersplat ubersplat001=null
  boolean boolean002=false
  constant real real001=20
  constant real real002=40
  integer integer009
  integer integer010
  integer integer011
  integer integer012
  integer integer013
  integer integer014
  boolean boolean003=false
  boolean RuneCanSpawn=false
  boolean boolean005=false
  unit array units001
  boolean array booleans001
  integer integer015=0
  integer integer016=0
  integer aResourceBarGoldText=0
  integer integer018
  integer integer019
  real real003=0.1
  integer integer020=0
  string string002=""
  real real004=0
  boolean array booleans002
  integer array integers008
  lightning array lightnings001
  integer integer021=0
  boolean boolean006=true
  rect rect005
  rect rect006
  rect rect007=null
  effect effect001=null
  boolean boolean007=false
  group group001=null
  boolean boolean008=false
  boolean array booleans003
  integer integer022=0
  integer integer023=-1
  real real005=0
  integer integer024=0
  integer integer025=0
  unit unit002=null
  integer integer026=0
  timer timer001=null
  boolean boolean009=false
  integer array integers009
  integer array integers010
  hashtable AbilitiesVariousFlags=InitHashtable()
  hashtable ObjectDataPointersTable=InitHashtable()
  timer array timers001
  timer timer002=null
  hashtable AbilitiesHashtable=InitHashtable()
  integer array integers011
  integer array integers012
  real array reals002
  real array reals003
  real array reals004
  integer integer027=0
  boolean boolean010=false
  constant real real006=1./0.3
  trigger trigger001=null
  trigger trigger002=null
  real real007
  real real008
  real real009
  real real010
  string SentinelPlayer=""
  string ScourgePlayer=""
  sound sound001
  group AHGroup=CreateGroup()
  player LocalPlayer=null
  integer PlayerId=0
  boolean PlayerObserver=false
  boolean array booleans004
  timer array timers002
  boolean boolean012=false
  integer integer029=0
  group group003=CreateGroup()
  group group004=CreateGroup()
  boolean boolean013=false
  unit array units002
  unit unit003=null
  unit unit004=null
  boolean boolean014=false
  group group005
  boolean boolean015=false
  multiboard multiboard001
  integer integer030
  integer integer031=15
  boolean boolean016=false
  boolean IsNotItemAbility=false
  boolean boolean018=true
  code code002=null
  trigger trigger003=null
  trigger trigger004=null
  trigger trigger005=null
  boolean boolean019=false
  boolean boolean020=false
  boolean boolean021=false
  timer  DamageBlockActiveTimer=CreateTimer()
  boolean DamageBlockActiveTrackingState=false
  integer integer032
  integer integer033
  integer integer034
  integer integer035
  integer integer036
  integer integer037
  real real011=0
  real real012=0
  constant integer integer038=-2430
  constant real real013=325
  boolean boolean023=false
  boolean boolean024=false

  boolean boolean025=false
  boolean ScourgeHaveMegaCreeps=false
  boolean SentinelHaveMegaCreeps=false
  boolean boolean028=false
  boolean DetailedSpellInfoDisplaying=false
  boolean boolean030=false
  trigger trigger006
  boolean boolean031=false
  boolean boolean032=false
  unit unit005
  boolean boolean033=false
  boolean boolean034=true
  boolean boolean035
  hashtable HY=InitHashtable()
  integer Item_Counter=0
  integer array HeroID
  integer array Item_Real
  player array Sentinels
  player array Scourges
  integer integer040=0
  unit array udg_Hero
  texttag texttag001
  texttag texttag002
  unit tt_unit1
  unit unit007=null
  unit unit008=null
  hashtable UTable=InitHashtable()
  hashtable UnitsData=InitHashtable()
  hashtable CooldownStorage=InitHashtable()
  integer array Item_Dummy
  integer array Item_SellerUnit
  integer array Item_Mute
  string array Item_Icon
  integer array Item_Cooldown
  timer GlobalTimer=null
  unit GCD_caster=null
  unit SpellTargetUnit=null
  integer GCD_id=0
  item tt_item1
  boolean boolean036=false
  integer array integers019
  hashtable AghanimsTable=InitHashtable()
  hashtable ItemsTable=InitHashtable()
  hashtable SpellsDB=InitHashtable()
  hashtable hashtable011=InitHashtable()
  hashtable TempHash=InitHashtable()
  hashtable MHT=InitHashtable()
  hashtable hashtable014=InitHashtable()
  hashtable HeroStats=InitHashtable()
  group group007=CreateGroup()
  trigger trigger007=null
  trigger trigger008=null
  group group008=CreateGroup()
  unit SecretShopSent
  unit SecretShopScrg
  boolean boolean037=false
  integer array AlchemistBonus
  group group009=CreateGroup()
  boolean boolean038=true
  integer IsMyDamage=0
  boolean boolean039=false
  unit unit013=null
  boolean boolean040=false
  integer integer043
  boolean SacrificedByMotherFucker=false
  constant integer integer044=-1179249528
  boolean boolean042=false
  boolean boolean043=false
  boolean boolean044=false
  trigger trigger009=null
  unit CastedUnit
  unit TriggeredUnit
  real real014
  timer DummyDamageTimer=null
  boolean DummyDamageState=false
  integer integer045=0
  rect FountainSentRect
  rect FountainScrgRect
  group group010=CreateGroup()
  group group011=CreateGroup()
  boolean boolean046=false
  boolean boolean047=false
  boolean boolean048=false
  boolean boolean049=false
  boolean boolean050=false
  boolean boolean051=false
  boolean boolean052=false
  integer integer046=0
  integer array integers021
  group group012
  unit unit016
  player player002
  integer integer047
  boolean boolean053
  boolean boolean054=false
  integer array integers022
  integer array integers023
  integer array integers024
  boolean boolean055=false
  boolean boolean056=false
  boolean boolean057=false
  rect rect010=null
  region EXTRABOUNDARIES=null
  region EXTRABOUNDARIESADV=null
  unit unit017=null
  boolean boolean058=false
  boolean boolean059=false
  trigger trigger010=null
  group group013=CreateGroup()
  region region003
  region region004
  integer NoReflection=0
  integer array FakeDamageType
  integer array integers026
  region region005
  boolean boolean060=false
  integer IsFakeDamage=0
  integer integer050
  timer timer006=CreateTimer()
  trigger trigger011
  unit unit018
  integer integer051
  integer integer052
  integer integer053
  integer integer054
  integer integer055
  integer integer056
  integer integer057
  integer integer058
  integer integer059
  integer integer060
  integer integer061
  integer integer062
  integer integer063
  boolean boolean061=false
  real tt_real1
  real tt_real2
  integer movespeedactive=0
  real ThirstInterval=0.015
  integer integer065
  integer integer066
  integer array NetWorths
  timer ShoppingPeriodic
  rect ShoppingSquare
  unit ShoppingUnit
  integer array NetWorthsNoGold
  boolean array NetWorthRecount
  boolean boolean062=false
  integer TestAddAbilID
  integer tt_int1=0
  real real018
  real real019
  integer integer069
  integer integer070
  integer integer071
  integer array Kills
  integer array Deaths
  integer array integers031
  integer array integers032
  integer array integers033
  integer array Assists
  integer array integers035
  integer array integers036
  integer array integers037
  integer array integers038
  integer array integers039
  integer array integers040
  integer array integers041
  integer array integers042
  integer array integers043
  integer array integers044
  integer array integers045
  integer array integers046
  integer array integers047
  integer array integers048
  real array LastTimeActivity
  real GameStartsTime=0
  boolean array b_isHeroPicked
  integer array integers049
  integer array integers050
  integer array integers051
  boolean boolean063=false
  string array udg_Colors
  boolean array booleans007
  timer array HeroRespawnTimer
  integer integer072=0
  integer integer073=0
  integer array integers052
  boolean Mode_DM=false
  boolean boolean065=false
  boolean boolean066=false
  boolean boolean067=false
  boolean boolean068=false
  multiboard MainMB=null
  unit Roshan=null
  boolean array HasUsedRandom
  integer integer074=100
  boolean boolean069=false
  boolean boolean070=false
  boolean boolean071=false
  location location001=null
  location location002=null
  location location003=null
  location location004=null
  location location005=null
  location location006=null
  location location007=null
  location location008=null
  boolean SentTopRaxRExists=true
  boolean SentMidRaxRExists=true
  boolean SentBotRaxRExists=true
  boolean SentTopRaxMExists=true
  boolean SentMidRaxMExists=true
  boolean SentBotRaxMExists=true
  boolean boolean078=true
  boolean boolean079=true
  boolean boolean080=true
  boolean boolean081=true
  boolean boolean082=true
  boolean boolean083=true
  integer integer075=0
  integer integer076=0
  location location009=null
  location location010=null
  location location011=null
  location location012=null
  location location013=null
  location location014=null
  location location015=null
  location location016=null
  integer integer077=0
  integer integer078=0
  player array Sents
  player array Scrgs
  integer array integers053
  unit array units004
  integer array integers054
  force Force_Elfs=null
  force Force_Unds=null
  player Neutrals=null
  player player004=null
  boolean boolean084=false
  integer integer079=0
  integer AllHeroes_count=0
  integer array AllHeroes_indexes
  player PlayerModeTyper=null
  unit TmpUnit376=null
  integer integer081=0
  real real021=0
  item array items001
  item array items002
  item array items003
  item array items004
  item array items005
  item array items006
  integer integer082=0
  location array locations001
  group group014
  group group015=null
  boolean udg_ObserverMode=false
  boolean boolean086=false
  boolean boolean087=false
  boolean boolean088=false
  boolean boolean089=false
  boolean boolean090=false
  string string005=""
  boolean boolean091=false
  boolean boolean092=false
  item item002=null
  player TempPlayer_OnRandom=null
  boolean boolean093=false
  boolean array booleans009
  integer array ItemsAbilities2
  integer ItemsAbilitiesMax2=0
  force AllPlayers=null
  boolean boolean094=false
  boolean boolean095=false
  boolean Repick_Allowed=false
  boolean boolean097=false
  boolean array booleans010
  boolean array booleans011
  boolean array booleans012
  boolean boolean098=false
  boolean boolean099=false
  weathereffect weathereffect001=null
  weathereffect weathereffect002=null
  location location017=null
  string string006=""
  string array LeftAt
  rect rect012=null
  rect rect013=null
  rect rect014=null
  rect gg_rct_Hero_Creation_UD=null
  rect gg_rct_Hero_Creation_NE=null
  rect rect017=null
  rect rect018=null
  rect rect019=null
  rect rect020=null
  rect rect021=null
  rect rect022=null
  rect rect023=null
  rect NeutralsSpot_ScAncients_Spawn=null
  rect rect025=null
  rect rect026=null
  rect rect027=null
  rect rect028=null
  rect rect029=null
  rect rect030=null
  rect rect031=null
  rect rect032=null
  rect rect033=null
  rect gg_rct_Allpick_Sent=null
  rect gg_rct_Allpick_Scourge=null
  rect rect036=null
  rect rect037=null
  rect rect038=null
  rect rect039=null
  rect rect040=null
  rect rect041=null
  rect rect042=null
  rect rect043=null
  rect rect044=null
  rect rect045=null
  rect SentFountainForItemsRect=null
  rect ScrgFountainForItemsRect=null
  rect rect048=null
  rect rect049=null
  rect rect050=null
  rect rect051=null
  rect rect052=null
  rect rect053=null
  rect rect054=null
  rect rect055=null
  rect rect056=null
  rect rect057=null
  rect rect058=null
  rect rect059=null
  rect rect060=null
  rect rect061=null
  rect rect062=null
  rect rect063=null
  rect rect064=null
  rect rect065=null
  rect rect066=null
  rect rect067=null
  rect rect068=null
  rect rect069=null
  rect rect070=null
  rect rect071=null
  rect rect072=null
  rect rect073=null
  rect rect074=null
  rect rect075=null
  rect rect076=null
  rect rect077=null
  rect rect078=null
  rect rect079=null
  rect rect080=null
  rect rect081=null
  rect rect082=null
  sound sound002=null
  sound sound003=null
  sound sound004=null
  sound sound005=null
  sound sound006=null
  sound sound007=null
  sound snd_Dominating=null
  sound sound009=null
  sound sound010=null
  sound sound011=null
  sound sound012=null
  sound sound013=null
  sound sound014=null
  sound sound015=null
  sound Sounds_KillingSpree=null
  sound sound017=null
  sound sound018=null
  sound sound019=null
  sound sound020=null
  sound sound021=null
  sound sound022=null
  sound sound023=null
  sound sound024=null
  sound sound025=null
  sound sound026=null
  sound sound027=null
  sound sound028=null
  sound sound029=null
  sound sound030=null
  sound sound031=null
  sound sound032=null
  sound sound033=null
  sound sound034=null
  sound sound035=null
  sound sound036=null
  sound sound037=null
  sound sound038=null
  sound sound039=null
  sound sound040=null
  sound sound041=null
  sound sound042=null
  sound sound043=null
  sound sound044=null
  sound sound045=null
  sound sound046=null
  sound sound047=null
  sound sound048=null
  sound sound049=null
  sound sound050=null
  sound sound051=null
  sound sound052=null
  sound sound053=null
  sound sound054=null
  sound sound055=null
  sound sound056=null
  sound sound057=null
  sound sound058=null
  sound sound059=null
  sound sound060=null
  trigger trigger012=null
  trigger trigger013=null
  trigger trigger014=null
  trigger trigger015=null
  trigger trigger016=null
  trigger trigger017=null
  trigger trigger018=null
  trigger trigger019=null
  trigger NeutralSpawnTrigger=null
  trigger trigger021=null
  trigger trigger022=null
  trigger trigger023=null
  trigger trigger024=null
  trigger trigger025=null
  unit AttackToLeft=null
  unit AttackToRight=null
  unit AttackToMid=null
  unit GoblinMerch_Top=null
  unit GoblinShop_Top=null
  unit FurbolgHut_Top=null
  unit GoblinShop_Bot=null
  unit GoblinMerch_Bot=null
  unit FurbolgHut_Bot=null
  string HCLstring=""
  destructable array destructables001
  destructable array destructables002
  destructable array destructables003
  integer integer084=0
  group array groups001
  boolean array booleans013
  integer integer085=0
  integer integer086=0
  boolean boolean100=false
  trigger array triggers001
  real array reals006
  integer integer087=0
  boolean array booleans014
  string TempStr
  real TempReal2
  integer TreesKilled=0
  sound sound061
  integer integer089
  integer integer090
  integer integer091
  integer integer092
  real real023
  real real024
  real real025
  unit tt_unit3=null
  unit unit032=null
  unit unit033=null
  unit tt_unit4
  trigger AddProjectileTrigger
  group group016
  group group017
  player tt_player1
  boolean boolean101
  string string009
  image image001=null
  unit unit035=null
  integer integer093
  boolean NoHeroLimitOff=true
  trigger trigger027
  trigger trigger028
  region region006
  integer integer094=1
  boolean boolean103=false
  timer timer008
  boolean boolean104=false
  integer integer095=90
  boolean AFK_Check=false
  boolean boolean106=false
  string NoHero="No Mode"
  boolean boolean107=false
  boolean SwapCommand_Enabled=true
  boolean boolean109=false
  boolean Mode_SO=false
  boolean boolean111=false
  integer integer096
  integer array integers057
  boolean array booleans015
  integer integer097=0
  integer array integers058
  integer array integers059
  integer array integers060
  integer array integers061
  integer array integers062
  integer array integers063
  integer array integers064
  integer array integers065
  integer array integers066
  integer array RollCounter
  boolean array ShowRollNumbers
  boolean array SoundsMuted
  boolean array booleans018
  unit unit036=null
  unit unit037=null
  boolean boolean112=false
  player player008=null
  player player009=null
  boolean array booleans019
  integer integer098
  player player010
  trigger trigger029=null
  boolean boolean113=false
  integer integer099
  integer integer100
  boolean boolean114=false
  boolean boolean115=false
  trigger trigger030
  boolean boolean116=false
  boolean boolean117=false
  integer array integers068
  region region007
  region region008
  integer array integers069
  integer integer101=0
  integer array Tints_R
  integer array Tints_G
  integer array Tints_B
  integer array Tints_ID
  integer Tints_C=0
  gamecache gamecache001
  integer array DamageBonusSystem
  integer array HPBonusSystem
  integer array MaxHPBonusSystem
  integer array BonusAttackSpeed
  integer array NegativeArmorSystem
  trigger trigger031
  integer array BuybackUnitId
  integer array BuybackID
  integer array BuybackUnitCost
  boolean array booleans020
  integer array integers082
  real array reals007
  weathereffect weathereffect003
  weathereffect weathereffect004
  constant playercolor playercolor001=ConvertPlayerColor(0)
  constant playercolor playercolor002=ConvertPlayerColor(12)
  real real026=-7360
  real real027=-6688
  unit SentFountain
  unit unit039
  unit unit040
  unit unit041
  unit unit042
  unit unit043
  unit unit044
  unit unit045
  unit unit046
  unit unit047
  unit unit048
  unit unit049
  unit unit050
  unit unit051
  unit unit052
  unit unit053
  unit unit054
  unit unit055
  unit unit056
  unit unit057
  unit unit058
  unit Sentinels_Tier3_Top
  unit Sentinels_Tier3_Mid
  unit Sentinels_Tier3_Bot
  unit unit062
  unit unit063
  unit unit064
  unit unit065
  unit unit066
  unit unit067
  unit unit068
  unit unit069
  unit unit070
  unit unit071
  unit unit072
  unit unit073
  unit unit074
  unit unit075
  unit unit076
  unit unit077
  unit unit078
  unit unit079
  unit unit080
  unit unit081
  unit unit082
  unit unit083
  unit unit084
  constant playercolor playercolor003=ConvertPlayerColor(12)
  real real028=6272
  real real029=5504
  unit ScourgeFountain
  unit unit086
  unit unit087
  unit unit088
  unit unit089
  unit unit090
  unit unit091
  unit unit092
  unit unit093
  unit unit094
  unit unit095
  unit unit096
  unit unit097
  unit unit098
  unit unit099
  unit unit100
  unit unit101
  unit unit102
  unit unit103
  unit unit104
  unit unit105
  unit unit106
  unit unit107
  unit unit108
  unit unit109
  unit unit110
  unit unit111
  unit unit112
  unit unit113
  unit unit114
  unit unit115
  unit unit116
  trigger trigger032
  unit unit117
  unit unit118
  unit unit119
  unit unit120
  unit unit121
  unit unit122
  unit unit123
  unit unit124
  unit unit125
  unit unit126
  unit unit127
  unit unit128
  unit unit129
  unit unit130
  unit unit131
  unit SentCircleOfPower1
  unit SentCircleOfPower2
  unit SentCircleOfPower3
  unit SentCircleOfPower4
  unit SentCircleOfPower5
  unit ScrgCircleOfPower1
  unit ScrgCircleOfPower2
  unit ScrgCircleOfPower3
  unit ScrgCircleOfPower4
  unit ScrgCircleOfPower5
  unit array CirclesOfPower
  real array ItemSpawnX
  real array ItemSpawnY
  player udg_Observer1=null
  player udg_Observer2=null
  string array PlayerNames
  string array PlayerNamesHashes
  integer array PlayerColors_R
  integer array PlayerColors_G
  integer array PlayerColors_B
  integer array integers086
  integer FirstHeroIndexid
  integer LastScourgeHeroIndexid
  integer FirstSentinelHeroIndexid
  integer LastHeroIndexid
  integer array integers087
  integer integer107=0
  integer array integers088
  integer integer108=0
  integer array integers089
  integer integer109=0
  integer array integers090
  integer integer110=0
  integer array MeleeHeroesArray
  integer MeleeHeroesAmount=0
  string array HeroIcon
  integer array integers092
  unit unit142
  unit unit143
  unit unit144
  unit unit145
  unit unit146
  unit unit147
  unit unit148
  unit unit149
  unit unit150
  unit unit151
  unit unit152
  unit unit153
  boolean array booleans021
  integer integer112=0
  integer integer113
  trigger trigger033
  trigger trigger034
  trigger trigger035
  timer array UltimateCDTimers
  integer array ReliableGold
  real array reals010
  integer array integers094
  integer array integers095
  integer integer114=1
  constant real real030=18
  player array Assists_Assisters
  unit unit154
  unit unit155
  integer integer115
  integer array integers096
  integer array integers097
  unit unit156=null
  boolean boolean118=true
  integer integer116=0
  integer integer117=600
  trigger trigger036
  integer integer118=0
  leaderboard array leaderboards001
  boolean array CourierDead
  integer array Item_SideShops
  integer integer119
  integer integer120
  integer TemporaryItem
  integer integer122
  integer integer123
  integer integer124
  integer integer125
  integer integer126
  integer integer127
  integer integer128
  integer integer129
  integer integer130
  integer integer131
  integer integer132
  integer integer133
  integer integer134
  integer integer135
  integer integer136
  integer integer137
  integer integer138
  integer integer139
  integer KelensDagger
  integer KelensDaggerDisabled
  integer integer142
  integer integer143
  integer integer144
  integer integer145
  integer integer146
  integer integer147
  integer integer148
  integer integer149
  integer integer150
  integer integer151
  integer integer152
  integer integer153
  integer integer154
  integer integer155
  integer integer156
  integer integer157
  integer integer158
  integer integer159
  integer integer160
  integer integer161
  integer integer162
  integer integer163
  integer integer164
  integer integer165
  integer integer166
  integer integer167
  integer integer168
  integer integer169
  integer integer170
  integer integer171
  integer integer172
  integer integer173
  integer integer174
  integer integer175
  integer integer176
  integer integer177
  integer TalismanOfEvasion
  integer integer179
  integer integer180
  integer integer181
  integer integer182
  integer integer183
  integer integer184
  integer integer185
  integer integer186
  integer integer187
  integer integer188
  integer integer189
  integer integer190
  integer integer191
  integer integer192
  integer integer193
  integer integer194
  integer integer195
  integer integer196
  integer integer197
  integer integer198
  integer integer199
  integer MixedWardsOrbs
  integer MixedWardsSentry
  integer integer202
  integer integer203
  integer Cheese
  integer integer205
  integer integer206
  integer integer207
  integer integer208
  integer integer209
  integer integer210
  integer integer211
  integer integer212
  integer integer213
  integer integer214
  integer integer215
  integer integer216
  integer integer217
  integer integer218
  integer integer219
  integer integer220
  integer integer221
  integer integer222
  integer integer223
  integer integer224
  integer integer225
  integer integer226
  integer integer227
  integer integer228
  integer integer229
  integer integer230
  integer integer231
  integer integer232
  integer integer233
  integer integer234
  integer integer235
  integer integer236
  integer integer237
  integer integer238
  integer integer239
  integer integer240
  integer integer241
  integer integer242
  integer integer243
  integer integer244
  integer integer245
  integer integer246
  integer integer247
  integer integer248
  integer integer249
  integer Aegis
  integer integer251
  integer integer252
  integer integer253
  integer integer254
  integer integer255
  integer integer256
  integer integer257
  integer integer258
  integer integer259
  integer integer260
  integer integer261
  integer integer262
  integer integer263
  integer integer264
  integer integer265
  integer integer266
  integer integer267
  integer integer268
  integer integer269
  integer integer270
  integer integer271
  integer HeartOfTarrasque
  integer HeartOfTarrasqueDisabled
  integer integer274
  integer integer275
  integer integer276
  integer Butterfly
  integer integer278
  integer integer279
  integer integer280
  integer integer281
  integer integer282
  integer integer283
  integer integer284
  integer integer285
  integer integer286
  integer integer287
  integer integer288
  integer integer289
  integer integer290
  integer integer291
  integer integer292
  integer integer293
  integer integer294
  integer integer295
  integer integer296
  integer integer297
  integer integer298
  integer integer299
  integer integer300
  integer integer301
  integer integer302
  integer integer303
  integer integer304
  integer integer305
  integer UrnOfShadows
  integer integer307
  integer integer308
  integer integer309
  integer integer310
  integer integer311
  integer HeavensHalberd
  integer integer313
  integer integer314
  integer integer315
  integer integer316
  integer integer317
  integer integer318
  integer integer319
  integer integer320
  integer integer321
  integer integer322
  integer integer323
  integer integer324
  integer integer325
  integer integer326
  integer integer327
  integer integer328
  integer integer329
  integer integer330
  integer integer331
  integer integer332
  integer integer333
  integer integer334
  integer integer335
  integer integer336
  integer integer337
  integer integer338
  integer integer339
  integer integer340
  integer integer341
  integer integer342
  integer integer343
  integer integer344
  integer integer345
  integer integer346
  integer RecipeFlyingCourier
  integer integer348
  integer integer349
  integer integer350
  integer integer351
  integer integer352
  integer integer353
  integer Aghanim_Scepter
  integer integer355
  integer integer356
  integer integer357
  integer integer358
  integer integer359
  integer integer360
  integer integer361
  trigger RuneSpawnTrigger
  integer integer362=-1
  integer array Rec_Comp_1
  integer array Rec_Comp_2
  integer array Rec_Comp_3
  integer array Rec_Comp_4
  integer array Rec_Comp_5
  integer array integers104
  integer Aghanim_Basic
  integer Aghanim_Furion
  integer Aghanim_KOTL
  integer Aghanim_Leshrac
  integer Aghanim_Lich
  integer Aghanim_Lina
  integer Aghanim_Lion
  integer Aghanim_Doom
  integer integer371
  integer integer372
  integer integer373
  integer integer374
  integer integer375
  integer integer376
  integer integer377
  integer integer378
  integer integer379
  integer integer380
  integer integer381
  integer integer382
  integer integer383
  integer integer384
  integer integer385
  integer integer386
  integer integer387
  integer integer388
  integer integer389
  integer integer390
  integer integer391
  integer integer392
  integer integer393
  integer integer394
  integer integer395
  integer integer396
  integer integer397
  integer integer398
  integer integer399
  integer integer400
  integer integer401
  integer integer402
  integer integer403
  integer integer404
  integer integer405
  integer integer406
  integer integer407
  integer integer408
  integer integer409
  integer integer410
  integer integer411
  integer integer412
  integer integer413
  integer integer414
  integer integer415
  integer integer416
  integer integer417
  integer integer418
  integer integer419
  integer integer420
  integer integer421
  integer integer422
  integer integer423
  integer integer424
  integer integer425
  integer integer426
  integer integer427
  integer integer428
  integer integer429
  integer integer430
  integer integer431
  integer integer432
  integer array integers105
  integer array integers106
  integer array integers107
  integer array integers108
  integer array integers109
  integer array integers110
  integer array integers111
  player player013
  unit unit157
  unit unit158
  integer integer433
  boolean boolean119=false
  unit unit159
  trigger t_manipulateitem
  integer integer434=0
  integer integer435=0
  integer integer436=0
  integer integer437=0
  integer integer438=0
  integer integer439=0
  integer integer440=0
  integer integer441=0
  integer integer442=0
  integer integer443=0
  integer integer444=0
  integer integer445=0
  integer integer446=0
  integer array integers112
  integer array integers113
  boolean boolean120=false
  trigger trigger039
  real array reals011
  item array items007
  integer integer447=0
  unit unit160=null
  integer array integers114
  integer array integers115
  integer array ArmletStrengthSystem
  unit unit161
  player array players006
  real array reals012
  real array reals013
  real array reals014
  integer integer448=-1
  constant real real031=575
  region region009
  unit unit162
  unit unit163
  integer integer449
  group group018
  unit unit164
  unit unit165
  player player014
  boolean boolean121=false
  boolean boolean122=false
  boolean boolean123=false
  player player015
  boolean boolean124=false
  boolean boolean125=false
  boolean boolean126=false
  boolean boolean127=false
  boolean boolean128=false
  boolean boolean129=false
  boolean boolean130=false
  boolean boolean131=false
  boolean boolean132=false
  integer array integers117
  integer array integers118
  integer array integers119
  integer integer450=0
  integer SentinelsIngame=0
  integer ScourgesIngame=0
  multiboard multiboard003
  integer array integers120
  integer array integers121
  player array players007
  integer integer453=0
  multiboard multiboard004
  trigger trigger040
  boolean boolean133=false
  boolean boolean134=false
  boolean boolean135=false
  boolean boolean136=false
  boolean boolean137=false
  boolean boolean138=false
  boolean boolean139=false
  boolean boolean140=false
  boolean boolean141=false
  unit unit166=null
  unit unit167=null
  group group019
  boolean boolean142=true
  boolean boolean143=false
  integer integer454=0
  string array strings009
  boolean boolean144=false
  integer integer455
  player player016
  region region010
  boolean boolean145=false
  boolean boolean146=false
  boolean boolean147=false
  unit array units006
  group group020
  unit unit168
  integer integer456
  integer integer457=0
  integer array integers122
  integer array integers123
  boolean array SelectionHelperEnabled
  boolean array HeroHasBeenUnlocked
  boolean boolean148=true
  boolean array booleans025
  real real032=-200
  boolean array booleans026
  leaderboard array leaderboards002
  boolean array booleans027
  boolean boolean149=true
  weathereffect weathereffect005
  boolean array booleans028
  boolean array booleans029
  boolean array booleans030
  boolean boolean150=true
  boolean array booleans031
  string array strings010
  integer integer458=0
  integer integer459
  integer integer460
  integer integer461
  boolean boolean151=false
  trigger trigger041
  integer array integers124
  boolean ModeCM_Manual
  boolean boolean153=false
  integer array integers125
  integer integer462
  player player017
  integer ModeCM_Order
  integer ModeCM_Current
  player player018
  player player019
  integer array integers126
  integer array integers127
  integer integer465=0
  integer integer466=0
  integer array integers128
  integer array integers129
  integer integer467=0
  integer integer468=0
  multiboard multiboard005
  image image002
  image image003
  image image004
  image image005
  unit array units007
  integer array integers130
  boolean array booleans032
  unit array units008
  real array reals015
  real array reals016
  real array reals017
  real array reals018
  constant real real033=-7030
  constant real real034=7150
  constant real real035=-7030
  constant real real036=7166
  constant real real037=-7030
  constant real real038=7166
  constant real real039=75
  constant real real040=125
  player player020=null
  player player021=null
  integer integer469
  boolean boolean154=false
  boolean array booleans033
  real real041
  real real042
  real real043
  real real044
  unit array units009
  integer integer470=0
  trigger trigger042
  unit array units010
  unit array units011
  boolean boolean155=false
  trigger trigger043
  integer array integers131
  unit array units012
  unit array units013
  integer integer471=0
  unit array units014
  integer integer472
  integer integer473
  integer array integers132
  integer integer474
  boolean array booleans034
  integer array integers133
  integer array integers134
  integer integer475=0
  integer integer476=0
  real array reals019
  real array reals020
  real array reals021
  real array reals022
  integer array integers135
  boolean boolean156=true
  image image006
  image image007
  image image008
  image image009
  image image010
  image image011
  image image012
  image image013
  image image014
  image image015
  image image016
  image image017
  image image018
  image image019
  image image020
  image image021
  constant real real045=450
  constant real real046=75
  constant real real047=140
  boolean boolean157=false
  integer array integers136
  integer array integers137
  integer array integers138
  integer array integers139
  integer array integers140
  integer array integers141
  integer integer477
  integer integer478
  integer integer479
  string string011="|c008A2BE2Option 1: |r"
  string string012="|c008A2BE2Option 2: |r"
  string string013="|c008A2BE2Option 3: |r"
  boolean boolean158=false
  boolean boolean159=false
  boolean boolean160=false
  boolean boolean161=false
  boolean boolean162=false
  boolean boolean163=true
  boolean boolean164=false
  boolean boolean165=false
  boolean boolean166=false
  boolean boolean167=false
  boolean boolean168=false
  real real048=1.0
  boolean boolean169=false
  boolean boolean170=false
  boolean boolean171=false
  camerasetup camerasetup001=null
  boolean boolean172=false
  unit unit169
  unit unit170
  unit unit171
  unit unit172
  unit unit173
  unit unit174
  boolean mode_TT=false
  real array modeTT_CD
  unit array units015
  unit array units016
  integer array integers142
  integer array modeTT_Gold2
  trigger trigger044=CreateTrigger()
  boolean array booleans035
  player player022
  boolean boolean174=false
  group group021
  unit unit175
  integer integer480
  real real049
  real real050
  real ManaVoid_Damage_Count
  unit unit176
  unit unit177
  unit unit178
  integer integer481
  real real052
  unit unit179
  integer integer482
  unit unit180
  real real053
  unit unit181
  real real054
  integer integer483
  integer integer484
  unit unit182
  real real055
  unit array units017
  integer integer485
  unit unit183
  integer integer486
  real real056
  unit unit184
  unit array units018
  real real057
  real real058
  unit unit185
  real real059
  real real060
  real real061
  unit unit186
  integer array BerserkerBloodResistCont
  unit array units019
  unit unit187
  integer integer487
  group group022
  unit unit188
  real real062
  unit unit189
  integer integer488
  unit unit190
  real real063
  real real064
  real real065
  integer integer489=0
  real real066
  real real067
  integer integer490
  real real068
  unit unit191
  unit unit192
  group group023
  group group024
  group group025
  unit unit193
  group group026
  unit unit194
  unit unit195
  unit Tree_Armour_tt_unit1
  real Tree_Armour_tt_real1
  real Tree_Armour_target_locationX
  real Tree_Armour_target_locationY
  unit Tree_Armour_tt_unit2
  unit tt_unit2
  real real072
  unit unit199
  unit unit200
  real real073
  integer array RikiPernamentInvises
  integer integer491
  integer integer492
  integer integer493
  unit unit201
  unit unit202
  real real074
  real real075
  real real076
  real real077
  group group027
  unit unit203
  real real078
  integer integer494
  integer integer495
  integer integer496
  unit array units020
  boolean boolean175=false
  boolean boolean176=false
  integer integer497
  player player023
  unit unit204
  unit unit205
  real real079
  unit unit206
  unit unit207
  unit unit208
  group group028
  integer integer498
  group group029
  unit unit209
  real real080
  destructable destructable001=null
  unit unit210=null
  real real081=0
  constant real real082=23
  constant real real083=500
  real real084
  real real085
  group group030
  unit unit211
  real real086
  integer integer499
  integer integer500
  boolean boolean177=false
  unit unit212
  integer integer501
  integer array StickyNapalm_1
  integer array StickyNapalm_2
  integer array StickyNapalm_3
  integer array StickyNapalm_4
  unit unit213
  integer integer502
  real real087
  real real088
  unit unit214
  boolean IsFireFlyDamage=false
  integer integer503
  group group031
  group group032
  unit unit215
  unit array units021
  unit array units022
  real real089
  real real090
  unit unit216
  unit unit217
  unit unit218
  real real091
  real real092
  real real093
  integer integer504
  real real094
  real real095
  unit unit219
  unit unit220
  integer integer505
  group group033
  unit unit221
  unit unit222
  integer integer506
  integer integer507
  player player024
  integer integer508
  unit array units023
  integer integer509
  integer array integers150
  trigger trigger045
  trigger trigger046
  integer integer510=0
  boolean boolean179=false
  unit unit223
  real real096
  real real097
  real real098
  unit unit224
  unit unit225
  unit unit226
  group group034
  real real099
  unit unit227
  unit unit228
  integer integer511
  unit unit229
  integer integer512
  unit unit230=null
  unit unit231
  group group035
  integer integer513
  unit unit232
  real real100
  integer array integers151
  integer array integers152
  unit unit233
  real real101
  integer integer514
  unit array units024
  unit unit234
  unit unit235
  real real102
  unit unit236
  real real103
  unit unit237
  unit unit238
  unit unit239
  real real104
  group group036
  unit unit240
  unit unit241
  real real105
  integer integer515
  unit unit242
  constant real real106=4
  unit array units025
  boolean boolean180=false
  unit unit243
  integer integer516
  real array reals024
  real array reals025
  real array reals026
  unit array units026
  integer array integers153
  integer array integers154
  integer integer517
  integer integer518
  unit unit244
  group group037
  integer integer519
  unit unit245
  unit unit246
  integer integer520
  constant real real107=1300
  constant real real108=20
  constant real real109=20
  constant real real110=20
  integer integer521
  unit unit247
  group group038
  real real111
  real real112
  unit unit248
  unit unit249
  group group039
  constant real real113=20
  unit unit250
  unit unit251
  real real114
  real real115
  real real116
  real real117
  constant real real118=340
  unit unit252
  unit unit253
  integer integer522
  real real119
  unit unit254
  boolean boolean181=false
  unit unit255
  real real120
  integer integer523
  integer integer524
  group group040
  integer integer525
  region region011
  region region012
  unit unit256
  integer integer526
  group group041
  group group042
  group group043
  unit unit257
  unit unit258
  unit unit259
  unit unit260
  integer integer527
  real real121
  real real122
  real real123
  integer integer528
  unit unit261=null
  unit unit262
  integer array integers155
  integer integer529=0
  integer array integers156
  integer array integers157
  integer integer530=0
  integer integer531
  unit unit263
  integer integer532
  integer integer533
  unit unit264
  real real124
  real real125
  real real126
  unit unit265
  integer array integers158
  integer array integers159
  integer array integers160
  integer integer534
  integer integer535
  integer integer536
  unit unit266
  integer integer537
  integer integer538
  sound sound062=null
  integer integer539
  integer integer540
  group group044
  unit unit267
  integer integer541
  unit unit268
  unit unit269
  group group045
  trigger trigger047
  unit unit270
  unit unit271=null
  unit unit272
  real real127
  real real128
  group group046
  unit unit273
  integer integer542
  real real129
  real real130
  integer integer543
  constant real real131=30
  unit unit274
  unit unit275
  group group047
  integer array integers161
  boolean boolean182
  real real132
  integer integer544
  unit unit276
  constant real real133=900
  group group048
  unit unit277
  unit unit278
  integer integer545
  real real134
  integer integer546
  unit unit279
  unit unit280
  unit unit281
  force TempForce=null
  boolexpr ReturnTrueBoolexpr=null
  boolean IsL1ch=false
  integer testFunctionCount=0
  integer integer548
  real array reals027
  integer pGlobalPlayerClass
  integer pUnitMaxSpeedConstant
  integer pUnitMaxSpeedConstantD
  real UnitMaxSpeedConstant
  integer pUnitMinSpeedConstant
  integer pUnitMinSpeedConstantD
  real UnitMinSpeedConstant
  integer pBuildingMaxSpeedConstant
  integer pBuildingMaxSpeedConstantD
  real BuildingMaxSpeedConstant
  integer pBuildingMinSpeedConstant
  integer pBuildingMinSpeedConstantD
  real BuildingMinSpeedConstant
  integer pUnitUIDefAddr
  integer pUnitDataDefAddr
  integer pAbilityUIDefAddr
  integer pAbilityDataDefAddr
  integer pAttackSpeedLimit
  real AttackSpeedLimit
  integer pAttackTimeLimit
  real AttackTimeLimit
  integer pGameClass1=0
  integer pGameClass2=0
  integer integer566=0
  integer integer567=0
  integer pCGameState=0
  integer pJassEnvAddress=0
  integer integer570=0
  integer pGetModuleHandle=0
  integer integer572=0
  integer GameDLL=0
  integer GameVersion=0
  integer integer575=0
  integer integer576=0
  integer pIgnoredUnits=0
  integer pIgnoredUnitsOffset=0
  integer pConvertUnits=0
  integer pConvertUnitsOffset=0
  integer integer581=0
  integer pSetHPBarColorForPlayer=0
  integer integer583=0
  integer integer584=0
  integer integer585=0
  integer integer586=0
  integer integer587=0
  integer pFrameDefClass=0
  integer pConvertString=0
  integer integer590=0
  integer pPacketSend=0
  integer pPingMinimapOffset=0
  integer pPingMinimapExOffset=0
  integer PingMinimapUnlocker=0
  integer PingMinimapExUnlocker=0
  boolean NotLockedPingMinimap=true
  boolean NotLockedPingMinimapEx=true
  integer pFindWindowA=0
  integer pGetAsyncKeyState=0
  integer integer598=0
  integer integer599=0
  integer pLoadLibraryA=0
  integer pGetFileAttributesA=0
  integer integer602=0
  integer pVirtualProtect=0
  integer array RJassNativesBuffer
  integer RJassNativesBufferSize=0
  integer pReservedExecutableMemory=0
  integer pReservedExecutableMemory2=0
  integer pBitwiseOR_ExecutableMemory
  boolean NeedInitBitwiseOr=true
  integer pBitwiseXOR_ExecutableMemory
  boolean NeedInitBitwiseXor=true
  integer pBitwiseAND_ExecutableMemory
  boolean NeedInitBitwiseAnd=true
  integer pReservedWritableMemory
  integer pReservedWritableMemory2
  integer integer612
  integer integer613
  integer integer614
  integer integer615
  integer integer616
  integer integer617
  integer integer618
  integer integer619
  integer pAddNewOffsetToRestore=0
  integer pReserverdIntArg1
  integer integer622
  integer integer623
  integer integer624
  integer pOrder1_offset
  integer pOrder2_offset
  integer pOrder3_offset
  integer pOrder4_offset
  integer integer629
  integer integer630
  integer integer631
  integer integer632
  integer Order1_unlockedvalue=0
  integer Order2_unlockedvalue=0
  integer Order3_unlockedvalue=0
  integer Order4_unlockedvalue=0
  integer integer637=0
  integer integer638=0
  integer integer639=0
  integer integer640=0
  integer Order1_lockedvalue
  integer Order2_lockedvalue
  integer Order3_lockedvalue
  integer Order4_lockedvalue
  integer Order5_lockedvalue
  integer Order6_lockedvalue
  integer integer647
  integer integer648
  boolean IsOrder1Locked=false
  boolean IsOrder2Locked=false
  boolean IsOrder3Locked=false
  boolean IsOrder4Locked=false
  boolean boolean193=false
  boolean boolean194=false
  boolean boolean195=false
  boolean boolean196=false
  boolean boolean197=false
  integer integer649=0
  integer integer650=0
  integer integer651=0
  integer integer652=0
  integer integer653=0
  integer integer654=0
  integer pGetLatestDownloadedString=0
  integer pGetDownloadStatus=0
  integer pSaveNewMapFromUrl=0
  integer pGetDownloadProgress=0
  integer pGetCurrentMapDir=0
  integer integer660=0
  integer integer661
  integer integer662
  integer pWindowIsActive
  integer pSendHttpGetRequest=0
  integer integer665
  integer integer666=0
  boolean EXTRADLLLOADED=false
  integer RegionEditMode=0
  real LatestMouseX=0.
  real LatestMouseY=0.
  integer LatestSelectRect=0
  integer LatestOverRect=0
  integer gl_hRectID=0
  hashtable RectData=InitHashtable()
  integer OPLimitAddress1=0
  integer OPLimitAddress2=0
  integer integer673=0
  integer integer674=0
  integer integer675=0
  integer integer676=0
  integer integer677
  integer integer678
  integer integer679
  integer integer680
  integer integer681
  integer integer682
  integer pGameTime
  integer integer684=0
  integer integer685=0
  integer integer686
  integer integer687
  integer integer688
  integer integer689
  integer integer690
  integer integer691
  integer integer692
  integer integer693
  integer pSendMessageToChat=0
  integer integer695
  integer integer696=0
  integer pDamageBlockIllusionCheck=0
  integer pItemDropOrderTriggerFix=0
  integer integer699=0
  integer integer700
  integer integer701=0
  integer pSetMainFuncWork=0
  integer integer703=0
  integer integer704=0
  boolean boolean199=false
  integer pPatchModel=0
  integer integer706=0
  integer integer707=0
  integer integer708=0
  integer integer709=0
  integer integer710=0
  integer integer711=0
  integer integer712=0
  integer integer713=0
  integer integer714=0
  integer integer715=0
  integer integer716=0
  integer pJassLog=0
endglobals
native IgnoredUnits takes integer unitid returns integer
native ConvertUnits takes integer qty,integer id returns boolean
native MergeUnits takes integer qty,integer a,integer b,integer make returns boolean

function Char2Ascii takes string s returns integer
  local integer i=Ascii__Ints[StringHash(s)/ 0x1F0748+0x3EA]
  if i==47 and s=="\\" then
    set i=92
  elseif i>=65 and i<=90 and s!=Ascii__Chars[i]then
    set i=i+32
  endif
  return i
endfunction

function Char2Hex takes string s returns integer
  local integer i=Ascii__Ints[StringHash(s)/ 0x1F0748+0x3EA]
  if i>=48 and i<=57 then
    return i-48
  elseif i>=65 and i<=70 then
    return i-55
  endif
  return-1
endfunction

function Ascii2Char takes integer i returns string
  return Ascii__Chars[i]
endfunction

function Ascii__onInit takes nothing returns nothing
  set Ascii__Ints[931]=8
  set Ascii__Ints[1075]=9
  set Ascii__Ints[1586]=10
  set Ascii__Ints[1340]=12
  set Ascii__Ints[412]=13
  set Ascii__Ints[198]=32
  set Ascii__Ints[1979]=33
  set Ascii__Ints[1313]=34
  set Ascii__Ints[1003]=35
  set Ascii__Ints[1264]=36
  set Ascii__Ints[983]=37
  set Ascii__Ints[1277]=38
  set Ascii__Ints[306]=39
  set Ascii__Ints[904]=40
  set Ascii__Ints[934]=41
  set Ascii__Ints[917]=42
  set Ascii__Ints[1972]=43
  set Ascii__Ints[1380]=44
  set Ascii__Ints[1985]=45
  set Ascii__Ints[869]=46
  set Ascii__Ints[1906]=47
  set Ascii__Ints[883]=48
  set Ascii__Ints[1558]=49
  set Ascii__Ints[684]=50
  set Ascii__Ints[582]=51
  set Ascii__Ints[668]=52
  set Ascii__Ints[538]=53
  set Ascii__Ints[672]=54
  set Ascii__Ints[1173]=55
  set Ascii__Ints[71]=56
  set Ascii__Ints[277]=57
  set Ascii__Ints[89]=58
  set Ascii__Ints[1141]=59
  set Ascii__Ints[39]=60
  set Ascii__Ints[1171]=61
  set Ascii__Ints[51]=62
  set Ascii__Ints[305]=0
  set Ascii__Ints[0]=64
  set Ascii__Ints[222]=65
  set Ascii__Ints[178]=66
  set Ascii__Ints[236]=67
  set Ascii__Ints[184]=68
  set Ascii__Ints[1295]=69
  set Ascii__Ints[1390]=70
  set Ascii__Ints[1276]=71
  set Ascii__Ints[203]=72
  set Ascii__Ints[1314]=73
  set Ascii__Ints[209]=74
  set Ascii__Ints[1315]=75
  set Ascii__Ints[170]=76
  set Ascii__Ints[1357]=77
  set Ascii__Ints[1343]=78
  set Ascii__Ints[1397]=79
  set Ascii__Ints[1420]=80
  set Ascii__Ints[1419]=81
  set Ascii__Ints[1396]=82
  set Ascii__Ints[1374]=83
  set Ascii__Ints[1407]=84
  set Ascii__Ints[499]=85
  set Ascii__Ints[1465]=86
  set Ascii__Ints[736]=87
  set Ascii__Ints[289]=88
  set Ascii__Ints[986]=89
  set Ascii__Ints[38]=90
  set Ascii__Ints[1230]=91
  set Ascii__Ints[1636]=93
  set Ascii__Ints[1416]=94
  set Ascii__Ints[1917]=95
  set Ascii__Ints[217]=96
  set Ascii__Ints[833]=123
  set Ascii__Ints[1219]=124
  set Ascii__Ints[553]=125
  set Ascii__Ints[58]=126
  set Ascii__Chars[0]="?"
  set Ascii__Chars[8]="\b"
  set Ascii__Chars[9]="\t"
  set Ascii__Chars[10]="
"
  set Ascii__Chars[12]="\f"
  set Ascii__Chars[13]="
"
  set Ascii__Chars[32]=" "
  set Ascii__Chars[33]="!"
  set Ascii__Chars[34]="\""
  set Ascii__Chars[35]="#"
  set Ascii__Chars[36]="$"
  set Ascii__Chars[37]="%"
  set Ascii__Chars[38]="&"
  set Ascii__Chars[39]="'"
  set Ascii__Chars[40]="("
  set Ascii__Chars[41]=")"
  set Ascii__Chars[42]="*"
  set Ascii__Chars[43]="+"
  set Ascii__Chars[44]=","
  set Ascii__Chars[45]="-"
  set Ascii__Chars[46]="."
  set Ascii__Chars[47]="/"
  set Ascii__Chars[48]="0"
  set Ascii__Chars[49]="1"
  set Ascii__Chars[50]="2"
  set Ascii__Chars[51]="3"
  set Ascii__Chars[52]="4"
  set Ascii__Chars[53]="5"
  set Ascii__Chars[54]="6"
  set Ascii__Chars[55]="7"
  set Ascii__Chars[56]="8"
  set Ascii__Chars[57]="9"
  set Ascii__Chars[58]=":"
  set Ascii__Chars[59]=";"
  set Ascii__Chars[60]="<"
  set Ascii__Chars[61]="="
  set Ascii__Chars[62]=">"
  set Ascii__Chars[63]="?"
  set Ascii__Chars[64]="@"
  set Ascii__Chars[65]="A"
  set Ascii__Chars[66]="B"
  set Ascii__Chars[67]="C"
  set Ascii__Chars[68]="D"
  set Ascii__Chars[69]="E"
  set Ascii__Chars[70]="F"
  set Ascii__Chars[71]="G"
  set Ascii__Chars[72]="H"
  set Ascii__Chars[73]="I"
  set Ascii__Chars[74]="J"
  set Ascii__Chars[75]="K"
  set Ascii__Chars[76]="L"
  set Ascii__Chars[77]="M"
  set Ascii__Chars[78]="N"
  set Ascii__Chars[79]="O"
  set Ascii__Chars[80]="P"
  set Ascii__Chars[81]="Q"
  set Ascii__Chars[82]="R"
  set Ascii__Chars[83]="S"
  set Ascii__Chars[84]="T"
  set Ascii__Chars[85]="U"
  set Ascii__Chars[86]="V"
  set Ascii__Chars[87]="W"
  set Ascii__Chars[88]="X"
  set Ascii__Chars[89]="Y"
  set Ascii__Chars[90]="Z"
  set Ascii__Chars[91]="["
  set Ascii__Chars[92]="\\"
  set Ascii__Chars[93]="]"
  set Ascii__Chars[94]="^"
  set Ascii__Chars[95]="_"
  set Ascii__Chars[96]="`"
  set Ascii__Chars[97]="a"
  set Ascii__Chars[98]="b"
  set Ascii__Chars[99]="c"
  set Ascii__Chars[100]="d"
  set Ascii__Chars[101]="e"
  set Ascii__Chars[102]="f"
  set Ascii__Chars[103]="g"
  set Ascii__Chars[104]="h"
  set Ascii__Chars[105]="i"
  set Ascii__Chars[106]="j"
  set Ascii__Chars[107]="k"
  set Ascii__Chars[108]="l"
  set Ascii__Chars[109]="m"
  set Ascii__Chars[110]="n"
  set Ascii__Chars[111]="o"
  set Ascii__Chars[112]="p"
  set Ascii__Chars[113]="q"
  set Ascii__Chars[114]="r"
  set Ascii__Chars[115]="s"
  set Ascii__Chars[116]="t"
  set Ascii__Chars[117]="u"
  set Ascii__Chars[118]="v"
  set Ascii__Chars[119]="w"
  set Ascii__Chars[120]="x"
  set Ascii__Chars[121]="y"
  set Ascii__Chars[122]="z"
  set Ascii__Chars[123]="{"
  set Ascii__Chars[124]="|"
  set Ascii__Chars[125]="}"
  set Ascii__Chars[126]="~"
endfunction

function InitArray takes integer vtable returns nothing
  set l__Array[4]=0
  set l__Array[1]=vtable
  set l__Array[2]=-1
  set l__Array[3]=-1
endfunction

function TypecastArray takes nothing returns nothing
  local integer l__Array
endfunction

function GetArrayAddress takes nothing returns integer
  loop
    return l__Array
  endloop
  return 0
endfunction

function setCode takes code c returns nothing
  set l__Code=c
  return
endfunction

function setInt takes integer i returns nothing
  set l__Int=i
  return
endfunction

function setStr takes string s returns nothing
  set l__Str=s
  return
endfunction

function setBool takes boolean b returns nothing
  set l__Bool=b
  return
endfunction

function Typecast1 takes nothing returns nothing
  local integer l__Code
  local code l__Int
endfunction

function C2I takes code c returns integer
  call setCode(c)
  loop
    return l__Code
  endloop
  return 0
endfunction

function I2C takes integer i returns code
  call setInt(i)
  loop
    return l__Int
  endloop
  return null
endfunction

function Typecast2 takes nothing returns nothing
  local integer l__Str
  local string l__Int
endfunction

function SH2I takes string s returns integer
  call setStr(s)
  loop
    return l__Str
  endloop
  return 0
endfunction

function I2SH takes integer i returns string
  call setInt(i)
  loop
    return l__Int
  endloop
  return null
endfunction

function Func0018 takes nothing returns nothing
  local integer l__Bool
  local boolean l__Int
endfunction

function B2I takes boolean b returns integer
  call setBool(b)
  loop
    return l__Bool
  endloop
  return 0
endfunction

function realToIndex takes real r returns integer
  loop
    return r
  endloop
  return 0
endfunction

function cleanInt takes integer i returns integer
  return i
endfunction

function indexToReal takes integer i returns real
  loop
    return i
  endloop
  return 0.0
endfunction

function cleanReal takes real r returns real
  return r
endfunction

function GetRealFromMemory takes integer i returns real
  return cleanReal(indexToReal(i))
endfunction

function SetRealIntoMemory takes real r returns integer
  return cleanInt(realToIndex(r))
endfunction

function BitwiseNot takes integer i returns integer
  return 0xFFFFFFFF-i
endfunction

function GetByteFromInteger takes integer i,integer byteid returns integer
  local integer tmpval=i
  local integer retval=0
  local integer byte1=0
  local integer byte2=0
  local integer byte3=0
  local integer byte4=0
  if(tmpval<0)then
    set tmpval=BitwiseNot(tmpval)
    set byte4=255-ModuloInteger(tmpval,256)
    set tmpval=tmpval/ 256
    set byte3=255-ModuloInteger(tmpval,256)
    set tmpval=tmpval/ 256
    set byte2=255-ModuloInteger(tmpval,256)
    set tmpval=tmpval/ 256
    set byte1=255-tmpval
  else
    set byte4=ModuloInteger(tmpval,256)
    set tmpval=tmpval/ 256
    set byte3=ModuloInteger(tmpval,256)
    set tmpval=tmpval/ 256
    set byte2=ModuloInteger(tmpval,256)
    set tmpval=tmpval/ 256
    set byte1=tmpval
  endif
  if byteid==1 then
    return byte1
  elseif byteid==2 then
    return byte2
  elseif byteid==3 then
    return byte3
  elseif byteid==4 then
    return byte4
  endif
  return retval
endfunction

function CreateInteger takes integer byte1,integer byte2,integer byte3,integer byte4 returns integer
  local integer retval=byte1
  set retval=(retval*256)+byte2
  set retval=(retval*256)+byte3
  set retval=(retval*256)+byte4
  return retval
endfunction

function Hex2Int takes string s returns integer
  local integer result=0
  local integer i=0
  local integer char
  loop
    set char=Char2Hex(SubString(s,i,i+1))
    exitwhen i==8 or char==-1
    set result=result*16+char
    set i=i+1
  endloop
  return result
endfunction

function Int2Hex_FIX takes integer i returns string
  set i=BitwiseNot(i)
  return HexNumber__Chars[255-(i/256/256/256)]+HexNumber__Chars[255-ModuloInteger(i/256/256,256)]+HexNumber__Chars[255-ModuloInteger(i/256,256)]+HexNumber__Chars[255-ModuloInteger(i,256)]
endfunction

function Int2Hex takes integer i returns string
  if(i<0)then
    return Int2Hex_FIX(i)
  endif
  return HexNumber__Chars[(i/256/256/256)]+HexNumber__Chars[ModuloInteger(i/256/256,256)]+HexNumber__Chars[ModuloInteger(i/256,256)]+HexNumber__Chars[ModuloInteger(i,256)]
endfunction

function HexNumber__onInit takes nothing returns nothing
  set HexNumber__Chars[0]="00"
  set HexNumber__Chars[1]="01"
  set HexNumber__Chars[2]="02"
  set HexNumber__Chars[3]="03"
  set HexNumber__Chars[4]="04"
  set HexNumber__Chars[5]="05"
  set HexNumber__Chars[6]="06"
  set HexNumber__Chars[7]="07"
  set HexNumber__Chars[8]="08"
  set HexNumber__Chars[9]="09"
  set HexNumber__Chars[10]="0A"
  set HexNumber__Chars[11]="0B"
  set HexNumber__Chars[12]="0C"
  set HexNumber__Chars[13]="0D"
  set HexNumber__Chars[14]="0E"
  set HexNumber__Chars[15]="0F"
  set HexNumber__Chars[16]="10"
  set HexNumber__Chars[17]="11"
  set HexNumber__Chars[18]="12"
  set HexNumber__Chars[19]="13"
  set HexNumber__Chars[20]="14"
  set HexNumber__Chars[21]="15"
  set HexNumber__Chars[22]="16"
  set HexNumber__Chars[23]="17"
  set HexNumber__Chars[24]="18"
  set HexNumber__Chars[25]="19"
  set HexNumber__Chars[26]="1A"
  set HexNumber__Chars[27]="1B"
  set HexNumber__Chars[28]="1C"
  set HexNumber__Chars[29]="1D"
  set HexNumber__Chars[30]="1E"
  set HexNumber__Chars[31]="1F"
  set HexNumber__Chars[32]="20"
  set HexNumber__Chars[33]="21"
  set HexNumber__Chars[34]="22"
  set HexNumber__Chars[35]="23"
  set HexNumber__Chars[36]="24"
  set HexNumber__Chars[37]="25"
  set HexNumber__Chars[38]="26"
  set HexNumber__Chars[39]="27"
  set HexNumber__Chars[40]="28"
  set HexNumber__Chars[41]="29"
  set HexNumber__Chars[42]="2A"
  set HexNumber__Chars[43]="2B"
  set HexNumber__Chars[44]="2C"
  set HexNumber__Chars[45]="2D"
  set HexNumber__Chars[46]="2E"
  set HexNumber__Chars[47]="2F"
  set HexNumber__Chars[48]="30"
  set HexNumber__Chars[49]="31"
  set HexNumber__Chars[50]="32"
  set HexNumber__Chars[51]="33"
  set HexNumber__Chars[52]="34"
  set HexNumber__Chars[53]="35"
  set HexNumber__Chars[54]="36"
  set HexNumber__Chars[55]="37"
  set HexNumber__Chars[56]="38"
  set HexNumber__Chars[57]="39"
  set HexNumber__Chars[58]="3A"
  set HexNumber__Chars[59]="3B"
  set HexNumber__Chars[60]="3C"
  set HexNumber__Chars[61]="3D"
  set HexNumber__Chars[62]="3E"
  set HexNumber__Chars[63]="3F"
  set HexNumber__Chars[64]="40"
  set HexNumber__Chars[65]="41"
  set HexNumber__Chars[66]="42"
  set HexNumber__Chars[67]="43"
  set HexNumber__Chars[68]="44"
  set HexNumber__Chars[69]="45"
  set HexNumber__Chars[70]="46"
  set HexNumber__Chars[71]="47"
  set HexNumber__Chars[72]="48"
  set HexNumber__Chars[73]="49"
  set HexNumber__Chars[74]="4A"
  set HexNumber__Chars[75]="4B"
  set HexNumber__Chars[76]="4C"
  set HexNumber__Chars[77]="4D"
  set HexNumber__Chars[78]="4E"
  set HexNumber__Chars[79]="4F"
  set HexNumber__Chars[80]="50"
  set HexNumber__Chars[81]="51"
  set HexNumber__Chars[82]="52"
  set HexNumber__Chars[83]="53"
  set HexNumber__Chars[84]="54"
  set HexNumber__Chars[85]="55"
  set HexNumber__Chars[86]="56"
  set HexNumber__Chars[87]="57"
  set HexNumber__Chars[88]="58"
  set HexNumber__Chars[89]="59"
  set HexNumber__Chars[90]="5A"
  set HexNumber__Chars[91]="5B"
  set HexNumber__Chars[92]="5C"
  set HexNumber__Chars[93]="5D"
  set HexNumber__Chars[94]="5E"
  set HexNumber__Chars[95]="5F"
  set HexNumber__Chars[96]="60"
  set HexNumber__Chars[97]="61"
  set HexNumber__Chars[98]="62"
  set HexNumber__Chars[99]="63"
  set HexNumber__Chars[100]="64"
  set HexNumber__Chars[101]="65"
  set HexNumber__Chars[102]="66"
  set HexNumber__Chars[103]="67"
  set HexNumber__Chars[104]="68"
  set HexNumber__Chars[105]="69"
  set HexNumber__Chars[106]="6A"
  set HexNumber__Chars[107]="6B"
  set HexNumber__Chars[108]="6C"
  set HexNumber__Chars[109]="6D"
  set HexNumber__Chars[110]="6E"
  set HexNumber__Chars[111]="6F"
  set HexNumber__Chars[112]="70"
  set HexNumber__Chars[113]="71"
  set HexNumber__Chars[114]="72"
  set HexNumber__Chars[115]="73"
  set HexNumber__Chars[116]="74"
  set HexNumber__Chars[117]="75"
  set HexNumber__Chars[118]="76"
  set HexNumber__Chars[119]="77"
  set HexNumber__Chars[120]="78"
  set HexNumber__Chars[121]="79"
  set HexNumber__Chars[122]="7A"
  set HexNumber__Chars[123]="7B"
  set HexNumber__Chars[124]="7C"
  set HexNumber__Chars[125]="7D"
  set HexNumber__Chars[126]="7E"
  set HexNumber__Chars[127]="7F"
  set HexNumber__Chars[128]="80"
  set HexNumber__Chars[129]="81"
  set HexNumber__Chars[130]="82"
  set HexNumber__Chars[131]="83"
  set HexNumber__Chars[132]="84"
  set HexNumber__Chars[133]="85"
  set HexNumber__Chars[134]="86"
  set HexNumber__Chars[135]="87"
  set HexNumber__Chars[136]="88"
  set HexNumber__Chars[137]="89"
  set HexNumber__Chars[138]="8A"
  set HexNumber__Chars[139]="8B"
  set HexNumber__Chars[140]="8C"
  set HexNumber__Chars[141]="8D"
  set HexNumber__Chars[142]="8E"
  set HexNumber__Chars[143]="8F"
  set HexNumber__Chars[144]="90"
  set HexNumber__Chars[145]="91"
  set HexNumber__Chars[146]="92"
  set HexNumber__Chars[147]="93"
  set HexNumber__Chars[148]="94"
  set HexNumber__Chars[149]="95"
  set HexNumber__Chars[150]="96"
  set HexNumber__Chars[151]="97"
  set HexNumber__Chars[152]="98"
  set HexNumber__Chars[153]="99"
  set HexNumber__Chars[154]="9A"
  set HexNumber__Chars[155]="9B"
  set HexNumber__Chars[156]="9C"
  set HexNumber__Chars[157]="9D"
  set HexNumber__Chars[158]="9E"
  set HexNumber__Chars[159]="9F"
  set HexNumber__Chars[160]="A0"
  set HexNumber__Chars[161]="A1"
  set HexNumber__Chars[162]="A2"
  set HexNumber__Chars[163]="A3"
  set HexNumber__Chars[164]="A4"
  set HexNumber__Chars[165]="A5"
  set HexNumber__Chars[166]="A6"
  set HexNumber__Chars[167]="A7"
  set HexNumber__Chars[168]="A8"
  set HexNumber__Chars[169]="A9"
  set HexNumber__Chars[170]="AA"
  set HexNumber__Chars[171]="AB"
  set HexNumber__Chars[172]="AC"
  set HexNumber__Chars[173]="AD"
  set HexNumber__Chars[174]="AE"
  set HexNumber__Chars[175]="AF"
  set HexNumber__Chars[176]="B0"
  set HexNumber__Chars[177]="B1"
  set HexNumber__Chars[178]="B2"
  set HexNumber__Chars[179]="B3"
  set HexNumber__Chars[180]="B4"
  set HexNumber__Chars[181]="B5"
  set HexNumber__Chars[182]="B6"
  set HexNumber__Chars[183]="B7"
  set HexNumber__Chars[184]="B8"
  set HexNumber__Chars[185]="B9"
  set HexNumber__Chars[186]="BA"
  set HexNumber__Chars[187]="BB"
  set HexNumber__Chars[188]="BC"
  set HexNumber__Chars[189]="BD"
  set HexNumber__Chars[190]="BE"
  set HexNumber__Chars[191]="BF"
  set HexNumber__Chars[192]="C0"
  set HexNumber__Chars[193]="C1"
  set HexNumber__Chars[194]="C2"
  set HexNumber__Chars[195]="C3"
  set HexNumber__Chars[196]="C4"
  set HexNumber__Chars[197]="C5"
  set HexNumber__Chars[198]="C6"
  set HexNumber__Chars[199]="C7"
  set HexNumber__Chars[200]="C8"
  set HexNumber__Chars[201]="C9"
  set HexNumber__Chars[202]="CA"
  set HexNumber__Chars[203]="CB"
  set HexNumber__Chars[204]="CC"
  set HexNumber__Chars[205]="CD"
  set HexNumber__Chars[206]="CE"
  set HexNumber__Chars[207]="CF"
  set HexNumber__Chars[208]="D0"
  set HexNumber__Chars[209]="D1"
  set HexNumber__Chars[210]="D2"
  set HexNumber__Chars[211]="D3"
  set HexNumber__Chars[212]="D4"
  set HexNumber__Chars[213]="D5"
  set HexNumber__Chars[214]="D6"
  set HexNumber__Chars[215]="D7"
  set HexNumber__Chars[216]="D8"
  set HexNumber__Chars[217]="D9"
  set HexNumber__Chars[218]="DA"
  set HexNumber__Chars[219]="DB"
  set HexNumber__Chars[220]="DC"
  set HexNumber__Chars[221]="DD"
  set HexNumber__Chars[222]="DE"
  set HexNumber__Chars[223]="DF"
  set HexNumber__Chars[224]="E0"
  set HexNumber__Chars[225]="E1"
  set HexNumber__Chars[226]="E2"
  set HexNumber__Chars[227]="E3"
  set HexNumber__Chars[228]="E4"
  set HexNumber__Chars[229]="E5"
  set HexNumber__Chars[230]="E6"
  set HexNumber__Chars[231]="E7"
  set HexNumber__Chars[232]="E8"
  set HexNumber__Chars[233]="E9"
  set HexNumber__Chars[234]="EA"
  set HexNumber__Chars[235]="EB"
  set HexNumber__Chars[236]="EC"
  set HexNumber__Chars[237]="ED"
  set HexNumber__Chars[238]="EE"
  set HexNumber__Chars[239]="EF"
  set HexNumber__Chars[240]="F0"
  set HexNumber__Chars[241]="F1"
  set HexNumber__Chars[242]="F2"
  set HexNumber__Chars[243]="F3"
  set HexNumber__Chars[244]="F4"
  set HexNumber__Chars[245]="F5"
  set HexNumber__Chars[246]="F6"
  set HexNumber__Chars[247]="F7"
  set HexNumber__Chars[248]="F8"
  set HexNumber__Chars[249]="F9"
  set HexNumber__Chars[250]="FA"
  set HexNumber__Chars[251]="FB"
  set HexNumber__Chars[252]="FC"
  set HexNumber__Chars[253]="FD"
  set HexNumber__Chars[254]="FE"
  set HexNumber__Chars[255]="FF"
endfunction

function ReadMemory takes integer address returns integer
  return Memory[address/4]
endfunction

function InitBytecode takes integer id,integer k returns nothing
  set l__bytecode[0]=0x0C010900
  set l__bytecode[1]=k
  set l__bytecode[2]=0x11010000
  set l__bytecode[3]=id
  set l__bytecode[4]=0x0C010400
  set l__bytecode[6]=0x27000000
  set l__bytecode[8]=0x07090000
  set l__bytecode[9]=0x0C5F
  set l__bytecode[10]=0x0E010400
  set l__bytecode[11]=id+1
  set l__bytecode[12]=0x12010100
  set l__bytecode[13]=0x0C5F
  set l__bytecode[14]=0x0E010400
  set l__bytecode[15]=0x0C5F
  set l__bytecode[16]=0x11010000
  set l__bytecode[17]=id+1
  set l__bytecode[18]=0x27000000
endfunction

function Typecast takes nothing returns nothing
  local integer l__bytecode
endfunction

function GetBytecodeAddress takes nothing returns integer
  loop
    return l__bytecode
  endloop
  return 0
endfunction

function NewGlobal takes nothing returns integer
  return-0x0C5F0704
  return 0x2700
endfunction

function SetGlobal takes nothing returns nothing
  local integer stand=0x2114D008
endfunction

function UnlockMemory takes nothing returns nothing
  local integer array stand
  call ForForce(bj_FORCE_PLAYER[0],I2C(2+C2I(function NewGlobal)))
  call ForForce(bj_FORCE_PLAYER[0],I2C(8+C2I(function SetGlobal)))
  call InitArray(0)
  call InitArray(stand[GetArrayAddress()/4])
  call InitBytecode(stand[C2I(function ReadMemory)/4+13],stand[GetArrayAddress()/4+3]+4)
  call ForForce(bj_FORCE_PLAYER[0],I2C(stand[GetBytecodeAddress()/4+3]))
endfunction

function malloc takes integer IWE returns integer
  set bytecodedata=IWE/4+4
  call ForForce(bj_FORCE_PLAYER[0],I2C(Memory[GetBytecodeAddress()/4+3]+32))
  return(Memory[bytecodedata/4+3]+4)/ 4*4
endfunction

function CreateIntegerFromTwoByOffset takes integer i1,integer i2,integer offset returns integer
  local integer array pBytes
  set pBytes[0]=GetByteFromInteger(i1,4)
  set pBytes[1]=GetByteFromInteger(i1,3)
  set pBytes[2]=GetByteFromInteger(i1,2)
  set pBytes[3]=GetByteFromInteger(i1,1)
  set pBytes[4]=GetByteFromInteger(i2,4)
  set pBytes[5]=GetByteFromInteger(i2,3)
  set pBytes[6]=GetByteFromInteger(i2,2)
  set pBytes[7]=GetByteFromInteger(i2,1)
  return CreateInteger(pBytes[offset+3],pBytes[offset+2],pBytes[offset+1],pBytes[offset+0])
endfunction

function CreateDoubleIntegerAndGetOne takes integer i1,integer i2,integer I1E,integer offset,boolean first returns integer
  local integer array pBytes
  set pBytes[0]=GetByteFromInteger(i1,4)
  set pBytes[1]=GetByteFromInteger(i1,3)
  set pBytes[2]=GetByteFromInteger(i1,2)
  set pBytes[3]=GetByteFromInteger(i1,1)
  set pBytes[4]=GetByteFromInteger(i2,4)
  set pBytes[5]=GetByteFromInteger(i2,3)
  set pBytes[6]=GetByteFromInteger(i2,2)
  set pBytes[7]=GetByteFromInteger(i2,1)
  set pBytes[offset]=GetByteFromInteger(I1E,4)
  set pBytes[offset+1]=GetByteFromInteger(I1E,3)
  set pBytes[offset+2]=GetByteFromInteger(I1E,2)
  set pBytes[offset+3]=GetByteFromInteger(I1E,1)
  if(first)then
    return CreateInteger(pBytes[3],pBytes[2],pBytes[1],pBytes[0])
  else
    return CreateInteger(pBytes[7],pBytes[6],pBytes[5],pBytes[4])
  endif
endfunction

function ReadRealMemory_FIX takes integer addr returns integer
  local integer ByteOffset=addr-(addr/ 4*4)
  local integer FirstAddr=addr-ByteOffset
  return CreateIntegerFromTwoByOffset(Memory[FirstAddr/4],Memory[FirstAddr/4+1],ByteOffset)
endfunction

function FatalErrorNote takes string s returns nothing
  call BJDebugMsg("|c00ff0000    Fatal error: "+s+". Report this replay at |c00ffff00DracoL1ch@Yandex.com|r")
endfunction

function MinorErrorNote takes string s returns nothing
  call BJDebugMsg("|c00ffff00    Minor error: "+s+". Report this replay at |c0000ff00DracoL1ch@Yandex.com|r")
endfunction

function ReadRealMemory takes integer addr returns integer
  if addr<1 then
    call FatalErrorNote("negative address read "+Int2Hex(addr))
    return 0
  endif
  if addr/4*4!=addr then
    return ReadRealMemory_FIX(addr)
  endif
  return Memory[addr/4]
endfunction

function WriteRealMemory_FIX takes integer addr,integer val returns nothing
  local integer Int_1
  local integer Int_2
  local integer ByteOffset=addr-(addr/ 4*4)
  local integer FirstAddr=addr-ByteOffset
  set Int_1=ReadRealMemory(FirstAddr)
  set Int_2=ReadRealMemory(FirstAddr+4)
  set Memory[FirstAddr/4]=CreateDoubleIntegerAndGetOne(Int_1,Int_2,val,ByteOffset,true)
  set Memory[FirstAddr/4+1]=CreateDoubleIntegerAndGetOne(Int_1,Int_2,val,ByteOffset,false)
endfunction

function WriteRealMemory takes integer addr,integer val returns nothing
  if addr<1 then
    call FatalErrorNote("negative address write "+Int2Hex(addr)+" val="+I2S(val))
    return
  endif
  if addr/4*4!=addr then
    call WriteRealMemory_FIX(addr,val)
  else
    set Memory[addr/4]=val
  endif
endfunction

function ReadOffsetUnsafe takes integer i returns integer
  return Memory[(GameDLL+i)/4]
endfunction

function ReadRealPointer1LVL takes integer addr,integer offset1 returns integer
  local integer retval=0
  if addr>0 then
    set retval=ReadRealMemory(addr)
    if addr>0 then
      set retval=ReadRealMemory(retval+offset1)
    else
      set retval=0
    endif
  endif
  return retval
endfunction

function WriteRealPointer1LVL takes integer addr,integer offset1,integer offset2 returns integer
  local integer retval=ReadRealPointer1LVL(addr,offset1)
  if retval>0 then
    set retval=ReadRealMemory(retval+offset2)
  else
    set retval=0
  endif
  return retval
endfunction

function CreateJassNativeHook takes integer oldaddress,integer newaddress returns integer
  local integer FirstAddress=WriteRealPointer1LVL(pJassEnvAddress*4,0x14,0x20)
  local integer NextAddress=FirstAddress
  local integer i=0
  if RJassNativesBufferSize>0 then
    loop
      set i=i+1
      if RJassNativesBuffer[i*3-3]==oldaddress or RJassNativesBuffer[i*3-2]==oldaddress or RJassNativesBuffer[i*3-3]==newaddress or RJassNativesBuffer[i*3-2]==newaddress then
        call WriteRealMemory(RJassNativesBuffer[i*3-1],newaddress)
        return RJassNativesBuffer[i*3-1]
      endif
      exitwhen i==RJassNativesBufferSize
    endloop
  endif
  loop
    if ReadRealMemory(NextAddress+12)<0x3000 then
      return 0
    endif
    if ReadRealMemory(NextAddress+12)==oldaddress then
      call WriteRealMemory(NextAddress+12,newaddress)
      if RJassNativesBufferSize<100 then
        set RJassNativesBufferSize=RJassNativesBufferSize+1
        set RJassNativesBuffer[RJassNativesBufferSize*3-1]=NextAddress+12
        set RJassNativesBuffer[RJassNativesBufferSize*3-2]=oldaddress
        set RJassNativesBuffer[RJassNativesBufferSize*3-3]=newaddress
      endif
      return NextAddress+12
    endif
    set NextAddress=ReadRealMemory(NextAddress)
    if NextAddress==FirstAddress or NextAddress==0 then
      return 0
    endif
  endloop
  return 0
endfunction

function Init26 takes nothing returns nothing
  local integer base
  set GameDLL=ReadRealMemory(GetBytecodeAddress())-0x951060
  set base=GameDLL/ 4
  set GameState=base+0x2AD97D
  set pGameClass1=base+0x2ADDE2
  set pGameClass2=base+0xAB4F80/ 4
  set pCGameState=base+0xAB6EA4/ 4
  set pointers=Memory[pGameClass1]/4
  set pUnitData=GameDLL+0xAB4478
  set pAbilityData=GameDLL+0xAB3E64
  set pGlobalPlayerClass=GameState
  set pUnitMaxSpeedConstant=base+0xAB4440/ 4
  set pUnitMinSpeedConstant=base+0xAB443C/ 4
  set pBuildingMaxSpeedConstant=base+0xAB4448/ 4
  set pBuildingMinSpeedConstant=base+0xAB4444/ 4
  set pUnitMaxSpeedConstantD=base+0xAB4450/ 4
  set pUnitMinSpeedConstantD=base+0xAB444C/ 4
  set pBuildingMaxSpeedConstantD=base+0xAB4458/ 4
  set pBuildingMinSpeedConstantD=base+0xAB4454/ 4
  set pUnitUIDefAddr=GameDLL+0xAB58F0
  set pUnitDataDefAddr=pUnitData
  set pAbilityUIDefAddr=GameDLL+0xAB5918
  set pAbilityDataDefAddr=pAbilityData
  set pAttackSpeedLimit=base+0xAB0074/ 4
  set pAttackTimeLimit=base+0xAAE484/ 4
  set pJassEnvAddress=base+0xADA848/ 4
  set integer570=base+0xAAE788/ 4
  set integer566=base+0xACE670/ 4
  set integer567=base+0xAB7368/ 4
  set pGetModuleHandle=base+0x86D1D0/ 4
  set integer572=base+0x86D280/ 4
  set integer602=base+0x86D0F4/ 4
  set integer575=GameDLL+0x2DD320
  set pIgnoredUnits=GameDLL+0x2DCE80
  set pConvertUnits=GameDLL+0x2DD2E0
  set integer581=base+0x3CC5B0/ 4
  set integer583=GameDLL+0x737F00
  set integer584=GameDLL+0x5FA970
  set integer585=GameDLL+0x31F530
  set integer586=GameDLL+0x61C7B0
  set integer587=GameDLL+0x60CA10
  set pFrameDefClass=GameDLL+0xACD264
  set integer590=GameDLL+0x932D2C
  set pPacketSend=GameDLL+0x54D970
  set pConvertString=GameDLL+0x3BAA20
  set integer612=base+0x86D5B8/ 4
  set integer613=GameDLL+0x2F3CF0
  set integer614=GameDLL+0x2F3CB0
  set integer615=GameDLL+0x6049B0
  set integer619=GameDLL+0x7AE910
  set integer548=base+0x93645C/ 4
  set pPingMinimapOffset=GameDLL+0x3B4650
  set pPingMinimapExOffset=GameDLL+0x3B8660
  set integer665=GameDLL+0x2FB1F0
  set pWindowIsActive=base+0xA9E7A4/ 4
  set integer661=GameDLL+0x339C60
  set integer662=base+0xAB4CD8/ 4
  set pOrder1_offset=GameDLL+0x339C60
  set pOrder2_offset=GameDLL+0x339CC0
  set pOrder3_offset=GameDLL+0x339D50
  set pOrder4_offset=GameDLL+0x339DD0
  set integer629=GameDLL+0x339E60
  set integer630=GameDLL+0x339F00
  set integer631=GameDLL+0x339F80
  set integer632=GameDLL+0x33A010
  set Order1_lockedvalue=0x900010C2
  set Order2_lockedvalue=0x900018C2
  set Order3_lockedvalue=0x900014C2
  set Order4_lockedvalue=0x90001CC2
  set Order5_lockedvalue=0x900020C2
  set Order6_lockedvalue=0x900014C2
  set integer647=0x90001CC2
  set integer648=0x900020C2
  set integer660=GameDLL+0x126990
  set integer649=GameDLL+0x4299e0
  set integer650=base+0x42fcd4/ 4
  set integer653=0x0004C200
  set integer654=0x01B89090
  set OPLimitAddress1=GameDLL+0x3A8388
  set OPLimitAddress2=GameDLL+0x3A838C
  set integer673=GameDLL+0x29C25C
  set integer675=GameDLL+0x35BB20
  set integer676=GameDLL+0x135D9C
  set integer616=GameDLL+0x787D0
  set integer617=GameDLL+0x3BDCB0
  set integer618=GameDLL+0x86D32C
  set integer677=GameDLL+0x86D3CC
  set integer678=GameDLL+0x5C8ED0
  set integer679=GameDLL+0xACD23C
  set integer680=GameDLL+0xACD214
  set integer682=GameDLL+0xCF660
  set pGameTime=GameDLL+0xAB7E98
  set integer686=GameDLL+0x2A6440
  set integer687=GameDLL+0x282B30
  set integer689=GameDLL+0x076770
  set integer690=GameDLL+0x052B60
  set integer691=GameDLL+0x052BC0
  set integer692=GameDLL+0x0767F0
  set integer693=GameDLL+0x4A73F0
  set integer695=GameDLL+0xB65F0
  set integer696=GameDLL+0x05C3A0
  set pDamageBlockIllusionCheck=GameDLL+0x1EA0F0
  set pItemDropOrderTriggerFix=GameDLL+0x29E064
  set integer700=GameDLL+0x4C1300
  set integer703=GameDLL+0x3CA0A0
  set integer708=GameDLL+0x931934
  set integer709=GameDLL+0x2A40D0
  set integer710=GameDLL+0x3C3F40
  set integer714=GameDLL+0xCF660
  set integer715=GameDLL+0xCF667
  set integer716=GameDLL+0xAB4BF4+0x10
  set GameVersion=0x26a
endfunction

function SetMaxUnitSpeed takes real r returns nothing
  set Memory[pUnitMaxSpeedConstant]=cleanInt(realToIndex(r))
  set Memory[pUnitMaxSpeedConstantD]=cleanInt(realToIndex(r))
endfunction

function GetMaxUnitSpeed takes nothing returns real
  return GetRealFromMemory(Memory[pUnitMaxSpeedConstant])
endfunction

function SetMinUnitSpeed takes real r returns nothing
  set Memory[pUnitMinSpeedConstant]=cleanInt(realToIndex(r))
  set Memory[pUnitMinSpeedConstantD]=cleanInt(realToIndex(r))
endfunction

function GetMinUnitSpeed takes nothing returns real
  return cleanReal(indexToReal(Memory[pUnitMinSpeedConstant]))
endfunction

function SetMaxBuildingSpeed takes real r returns nothing
  set Memory[pBuildingMaxSpeedConstant]=cleanInt(realToIndex(r))
  set Memory[pBuildingMaxSpeedConstantD]=cleanInt(realToIndex(r))
endfunction

function GetMaxBuildingSpeed takes nothing returns real
  return cleanReal(indexToReal(Memory[pBuildingMaxSpeedConstant]))
endfunction

function SetMinBuildingSpeed takes real r returns nothing
  set Memory[pBuildingMinSpeedConstant]=cleanInt(realToIndex(r))
  set Memory[pBuildingMinSpeedConstantD]=cleanInt(realToIndex(r))
endfunction

function GetMinBuildingSpeed takes nothing returns real
  return cleanReal(indexToReal(Memory[pBuildingMinSpeedConstant]))
endfunction

function GetAttackSpeedLimit takes nothing returns real
  return cleanReal(indexToReal(Memory[pAttackSpeedLimit]))
endfunction

function SetAttackSpeedLimit takes real r returns nothing
  set Memory[pAttackSpeedLimit]=cleanInt(realToIndex(r))
endfunction

function GetAttackTimeLimit takes nothing returns real
  return cleanReal(indexToReal(Memory[pAttackTimeLimit]))
endfunction

function SetAttackTimeLimit takes real r returns nothing
  set Memory[pAttackTimeLimit]=cleanInt(realToIndex(r))
endfunction

function SaveConstantsValues takes nothing returns nothing
  set UnitMaxSpeedConstant=(GetRealFromMemory(Memory[pUnitMaxSpeedConstant]))
  set UnitMinSpeedConstant=(cleanReal(indexToReal(Memory[pUnitMinSpeedConstant])))
  set BuildingMaxSpeedConstant=(cleanReal(indexToReal(Memory[pBuildingMaxSpeedConstant])))
  set BuildingMinSpeedConstant=(cleanReal(indexToReal(Memory[pBuildingMinSpeedConstant])))
  set AttackSpeedLimit=(cleanReal(indexToReal(Memory[pAttackSpeedLimit])))
  set AttackTimeLimit=(cleanReal(indexToReal(Memory[pAttackTimeLimit])))
endfunction

function ResetConstantsValues takes nothing returns nothing
  call SetMaxUnitSpeed(UnitMaxSpeedConstant)
  call SetMinUnitSpeed(UnitMinSpeedConstant)
  call SetMaxBuildingSpeed(BuildingMaxSpeedConstant)
  call SetMinBuildingSpeed(BuildingMinSpeedConstant)
  call SetAttackSpeedLimit(AttackSpeedLimit)
  call SetAttackTimeLimit(AttackTimeLimit)
  call ExecuteFunc("RestoreCameraOffsets")
endfunction

function GetGameTypeSupported takes nothing returns integer
  return WriteRealPointer1LVL(GameState*4,48,48)
endfunction

function BitwiseOr takes integer arg1,integer arg2 returns integer
  local integer retval
  if NeedInitBitwiseOr==true then
    set NeedInitBitwiseOr=false
    set Memory[pBitwiseOR_ExecutableMemory/4]=0x0424448B
    set Memory[pBitwiseOR_ExecutableMemory/4+1]=0x0824548B
    set Memory[pBitwiseOR_ExecutableMemory/4+2]=0xCCC3D009
  endif
  if pConvertUnitsOffset==0 then
    set pConvertUnitsOffset=CreateJassNativeHook(pConvertUnits,pBitwiseOR_ExecutableMemory)
  else
    call WriteRealMemory(pConvertUnitsOffset,pBitwiseOR_ExecutableMemory)
  endif
  if pConvertUnitsOffset!=0 then
    set retval=B2I(ConvertUnits(arg1,arg2))
    call WriteRealMemory(pConvertUnitsOffset,pConvertUnits)
    return retval
  endif
  return 0
endfunction

function BitwiseXor takes integer arg1,integer arg2 returns integer
  local integer retval
  if NeedInitBitwiseXor==true then
    set NeedInitBitwiseXor=false
    set Memory[pBitwiseXOR_ExecutableMemory/4]=0x0424448B
    set Memory[pBitwiseXOR_ExecutableMemory/4+1]=0x0824548B
    set Memory[pBitwiseXOR_ExecutableMemory/4+2]=0xCCC3D031
  endif
  if pConvertUnitsOffset==0 then
    set pConvertUnitsOffset=CreateJassNativeHook(pConvertUnits,pBitwiseXOR_ExecutableMemory)
  else
    call WriteRealMemory(pConvertUnitsOffset,pBitwiseXOR_ExecutableMemory)
  endif
  if pConvertUnitsOffset!=0 then
    set retval=B2I(ConvertUnits(arg1,arg2))
    call WriteRealMemory(pConvertUnitsOffset,pConvertUnits)
    return retval
  endif
  return 0
endfunction

function BitwiseAnd takes integer arg1,integer arg2 returns integer
  local integer retval
  if NeedInitBitwiseAnd==true then
    set NeedInitBitwiseAnd=false
    set Memory[pBitwiseAND_ExecutableMemory/4]=0x0424448B
    set Memory[pBitwiseAND_ExecutableMemory/4+1]=0x0824548B
    set Memory[pBitwiseAND_ExecutableMemory/4+2]=0xCCC3D021
  endif
  if pConvertUnitsOffset==0 then
    set pConvertUnitsOffset=CreateJassNativeHook(pConvertUnits,pBitwiseAND_ExecutableMemory)
  else
    call WriteRealMemory(pConvertUnitsOffset,pBitwiseAND_ExecutableMemory)
  endif
  if pConvertUnitsOffset!=0 then
    set retval=B2I(ConvertUnits(arg1,arg2))
    call WriteRealMemory(pConvertUnitsOffset,pConvertUnits)
    return retval
  endif
  return 0
endfunction

function StringId__Int2Char takes integer i returns string
  local string s=Ascii2Char(i)
  if s==null then
    set s="\\x"+Int2Hex(i)
  endif
  return s
endfunction

function Id2String takes integer i returns string
  local string result=""
  local integer char
  loop
    set char=i
    set i=i/ 256
    set result=StringId__Int2Char(char-i*256)+result
    exitwhen i==0
  endloop
  return result
endfunction

function String2Id takes string s returns integer
  local integer result=0
  local integer i=0
  loop
    set result=result*256+Char2Ascii(SubString(s,i,i+1))
    set i=i+1
    exitwhen i==4
  endloop
  return result
endfunction

function IntegerHash takes integer i returns integer
  local integer a=0x7FED7FED
  local integer b=0xEEEEEEEE
  local integer byte
  loop
    set byte=i*16777216/ 16777216
    set a=BitwiseXor(a+b,H[byte])
    set i=i/ 256
    exitwhen i==0
    set b=b*32+a+b+byte+3
  endloop
  return a
endfunction

function GetObjectData takes integer pData,integer rawcode returns integer
  local integer hash=IntegerHash(rawcode)
  local integer list=ReadRealMemory(pData)/ 4+ModuloInteger(hash,ReadRealMemory(pData+8)+1)*3
  local integer i=Memory[list+2]/ 4
  loop
    exitwhen i<=0
    if Memory[i]==hash and Memory[i+5]==rawcode then
      return i
    endif
    set i=Memory[Memory[list]/ 4+i+1]/ 4
  endloop
  return 0
endfunction

function GetObjectDataCaching takes integer pData,integer rawcode returns integer
  local integer k
  if HaveSavedInteger(ObjectDataPointersTable,pData,rawcode)then
    return LoadInteger(ObjectDataPointersTable,pData,rawcode)
  endif
  set k=GetObjectData(pData,rawcode)
  call SaveInteger(ObjectDataPointersTable,pData,rawcode,k)
  return k
endfunction

function ConvertHandle takes handle h returns integer
  if GetHandleId(h)>0 then
    return Memory[Memory[Memory[Memory[GameState]/ 4+7]/ 4+103]/ 4+GetHandleId(h)*3-0x2FFFFF]
  endif
  return 0
endfunction

function IsFlagBitSet takes integer flags,integer bit returns boolean
  return flags/bit*2147483648!=0
endfunction

function SetUnitArmor takes unit u,real r returns nothing
  set Memory[ConvertHandle(u)/ 4+56]=cleanInt(realToIndex(r))
endfunction

function SetUnitPhased takes unit u returns nothing
  local integer data=GetObjectDataCaching(pUnitData,GetUnitTypeId(u))+107
  local integer p1=Memory[data]
  local integer p2=Memory[data+1]
  set Memory[data]=8
  set Memory[data+1]=16
  call SetUnitPathing(u,true)
  set Memory[data]=p1
  set Memory[data+1]=p2
endfunction

function GetRealPlayerById takes integer i returns integer
  local integer pladdr=Memory[pGlobalPlayerClass]+(i*4)+0x58
  return Memory[pladdr/4]
endfunction

function GetLocalPlayerIdReal takes nothing returns integer
  return Memory[Memory[pGlobalPlayerClass]/4+0xA]
endfunction

function GetLocalPlayerReal takes nothing returns integer
  return GetRealPlayerById((Memory[Memory[pGlobalPlayerClass]/4+0xA]))
endfunction

function echo takes string s returns nothing
  if IsL1ch then
    call DisplayTimedTextToPlayer(LocalPlayer,0,0,30,s)
  endif
endfunction

function GetJassContext takes integer id returns integer
  return Memory[Memory[Memory[Memory[pJassEnvAddress]/4+5]/4+36]/4+id]
endfunction

function GetStringAddress takes string s returns integer
  return Memory[Memory[Memory[Memory[GetJassContext(1)/4+2589]/4+2]/4+SH2I(s)*4+2]/4+7]
endfunction

function WriteNullTerminatedString takes string s,integer i_address returns nothing
  set Memory[i_address/4]=GetStringAddress(s)
endfunction

function GetDefAddr takes integer id,integer class,integer first,integer currentOffset returns integer
  local integer FirstDataDefEntry
  local integer CurrentDefAddr=0
  local integer FirstDefAddr
  local integer CurrentDefId=0
  local integer CurrentDefId2=0
  if first<1 then
    return 0
  endif
  set FirstDataDefEntry=ReadRealMemory(first)
  if FirstDataDefEntry>0 then
    set CurrentDefAddr=Memory[FirstDataDefEntry/4+2]+currentOffset
  endif
  set FirstDefAddr=CurrentDefAddr
  if FirstDataDefEntry<1 then
    return 0
  endif
  loop
    set CurrentDefId=Memory[CurrentDefAddr/4+2]
    if HaveSavedInteger(ObjectDataPointersTable,class,CurrentDefId)==false and CurrentDefAddr>0xC then
      call SaveInteger(ObjectDataPointersTable,class,CurrentDefId,CurrentDefAddr-0xC)
    endif
    exitwhen CurrentDefId==id or CurrentDefAddr<1
    set CurrentDefAddr=Memory[CurrentDefAddr/4]
    if CurrentDefAddr<1 or CurrentDefAddr==FirstDefAddr then
      return 0
    endif
  endloop
  if CurrentDefAddr<1 then
    return 0
  endif
  return CurrentDefAddr-0xC
endfunction

function GetDefAddrCaching takes integer id,integer class,integer first,integer currentOffset returns integer
  if HaveSavedInteger(ObjectDataPointersTable,class,id)then
    return LoadInteger(ObjectDataPointersTable,class,id)
  endif
  return GetDefAddr(id,class,first,currentOffset)
endfunction

function GetUnitDataDefAddr takes integer id returns integer
  return GetDefAddrCaching(id,2,pUnitDataDefAddr,0xC)
endfunction

function GetUnitUIDefAddr takes integer id returns integer
  return GetDefAddrCaching(id,3,pUnitUIDefAddr,0x10)
endfunction

function GetAbilityDataDefAddr takes integer id returns integer
  return GetDefAddrCaching(id,0,pAbilityDataDefAddr,0xC)
endfunction

function GetAbilityUIDefAddr takes integer id returns integer
  return GetDefAddrCaching(id,1,pAbilityUIDefAddr,0x10)
endfunction

function GetHeroPrimaryAttribute takes unit u returns integer
  local integer a=ConvertHandle(u)
  if a>0 then
    set a=ReadRealMemory(a+0x1F0)
    if a>0 then
      return ReadRealMemory(a+0xCC)
    endif
  endif
  return 0
endfunction

function GetHeroPrimaryAttributeById takes integer id returns integer
  local integer a=GetUnitDataDefAddr(id)
  if a>0 then
    return ReadRealMemory(a+0x17C)
  endif
  return 0
endfunction

function PrintJassNatives takes nothing returns nothing
  local integer FirstAddress=Memory[Memory[Memory[pJassEnvAddress]/4+0x5]/4+8]/4
  local integer NextAddress=FirstAddress
  call PreloadEndEx()
  call PreloadGenClear()
  call PreloadGenStart()
  loop
    set NextAddress=Memory[NextAddress]/4
    set testFunctionCount=testFunctionCount+1
    call Preload("native add "+Int2Hex(Memory[NextAddress+0xC/4]))
    if NextAddress==FirstAddress or NextAddress==0 then
      call PreloadGenEnd("natives"+R2S(GetRandomReal(0,500))+".txt")
      call PreloadGenClear()
      return
    endif
  endloop
endfunction

function SetAbilityManaCost takes integer abil,integer lvl,integer cost returns nothing
  local integer a=GetObjectDataCaching(pAbilityData,abil)
  if a>0 then
    set a=Memory[a+21]
    if a>0 then
      set Memory[a/4-22+lvl*26]=cost
    endif
  endif
endfunction

function GetAbilityManaCost takes integer abil,integer lvl returns integer
  local integer a=GetObjectDataCaching(pAbilityData,abil)
  if a>0 then
    set a=Memory[a+21]
    if a>0 then
      return Memory[a/4-22+lvl*26]
    endif
  endif
  return 0
endfunction

function SetAbilityCD takes integer abil,integer lvl,real BUE returns nothing
  set Memory[Memory[GetObjectDataCaching(pAbilityData,abil)+21]/4-21+lvl*26]=cleanInt(realToIndex(BUE))
endfunction

function GetAbilityCD takes integer abil,integer lvl returns real
  local integer a=GetObjectDataCaching(pAbilityData,abil)
  if abil=='A1P8'then
    return 12.
  endif
  if a>0 then
    if Memory[a+21]>0 then
      return cleanReal(indexToReal(Memory[Memory[a+21]/4-21+lvl*26]))
    endif
  endif
  return 0.
endfunction

function GetAbilityMaxLevel takes integer abil returns integer
  local integer a
  if abil==0 then
    return 0
  endif
  set a=GetObjectDataCaching(pAbilityData,abil)
  if a>0 then
    return Memory[a+20]
  endif
  return 0
endfunction

function AddAbilityCooldownConverted takes integer a,real B_E returns nothing
  local integer pData=Memory[a+55]/4
  if pData!=0 then
    set Memory[pData+1]=cleanInt(realToIndex(B_E+cleanReal(indexToReal(Memory[pData+1]))))
  endif
endfunction

function CopyCooldownStr takes integer from,integer to returns nothing
  local integer pData=Memory[from+55]
  if pData!=0 then
    set Memory[to+55]=pData
    set Memory[to+45]=Memory[from+45]
    if IsFlagBitSet(Memory[to+8],512)==false then
      set Memory[to+8]=Memory[to+8]+512
    else
    endif
  endif
endfunction

function GetAbilityCurrentCooldownConverted takes integer a returns real
  local integer pData=Memory[a+55]/4
  if pData!=0 then
    return cleanReal(indexToReal(Memory[pData+1]))-cleanReal(indexToReal(Memory[Memory[pData+3]/4+16]))
  endif
  return .0
endfunction

function GetRealGameTime takes nothing returns integer
  return ReadRealMemory(pGameTime)
endfunction

function IsAbilityOnCooldown takes integer z returns boolean
  return IsFlagBitSet(Memory[(z+0x20)/4],512)
endfunction

function SetAbilityDisabled takes integer pAbility,integer count returns nothing
  set Memory[pAbility/4+15]=count
endfunction

function GetAbilityDisabledCount takes integer pAbility returns integer
  return Memory[pAbility/4+15]
endfunction

function SetAbilityHidden takes integer pAbility,integer count returns nothing
  set Memory[pAbility/4+16]=count
endfunction

function SetAbilityDisabled2 takes integer pAbility,integer count returns nothing
  set Memory[pAbility/4+17]=count
endfunction

function DisableUnitControl takes unit u returns nothing
  local integer pUnit=ConvertHandle(u)/4
  local integer flags=Memory[pUnit+146]
  local integer Amov=Memory[pUnit+123]/4+16
  local integer Aatk=Memory[pUnit+122]/4+16
  if not IsFlagBitSet(flags,512)then
    set Memory[pUnit+146]=flags+512
  endif
  if Amov!=16 then
    set Memory[Amov]=Memory[Amov]+1
  endif
  if Amov!=16 then
    set Memory[Aatk]=Memory[Aatk]+1
  endif
endfunction

function EnableUnitControl takes unit u returns nothing
  local integer pUnit=ConvertHandle(u)/4
  local integer flags=Memory[pUnit+146]
  local integer Amov=Memory[pUnit+123]/4+16
  local integer Aatk=Memory[pUnit+122]/4+16
  if IsFlagBitSet(flags,512)then
    set Memory[pUnit+146]=flags-512
  endif
  if Amov!=16 and Memory[Amov]>0 then
    set Memory[Amov]=Memory[Amov]-1
  endif
  if Amov!=16 and Memory[Amov]>0 then
    set Memory[Aatk]=Memory[Aatk]-1
  endif
endfunction

function SetUnitModel takes integer uiobjectaddr,string s returns nothing
  call WriteNullTerminatedString(s,uiobjectaddr+0x30)
endfunction

function SetUnitModelUFAddress takes integer address,string s returns nothing
  call SetUnitModel(address,s)
endfunction

function GetUnitAttackAbilityForAddress takes integer pConvertedHandle returns integer
  return Memory[pConvertedHandle/4+0x1e8/4]
endfunction

function GetUnitAttackAbility takes unit u returns integer
  return GetUnitAttackAbilityForAddress(ConvertHandle(u))
endfunction

function GetUnitInventoryAbilityForAddress takes integer pConvertedHandle returns integer
  return Memory[pConvertedHandle/4+0x1F8/4]
endfunction

function GetUnitInventoryAbility takes unit u returns integer
  return GetUnitInventoryAbilityForAddress(ConvertHandle(u))
endfunction

function GetSomeAddress takes integer pAddr1,integer pAddr2 returns integer
  local integer pOff1=44
  if BitwiseAnd(pAddr1,pAddr2)==-1 then
    return 0
  endif
  if pAddr1>=0 then
    set pOff1=12
  endif
  set pOff1=Memory[pGameClass1]/4+pOff1/4
  set pOff1=Memory[pOff1]
  if pOff1==0 then
    return 0
  endif
  set pOff1=pOff1+8*pAddr1+4
  set pOff1=Memory[pOff1/4]
  if pOff1==0 or Memory[pOff1/4+0x18/4]!=pAddr2 then
    return 0
  endif
  return pOff1
endfunction

function GetSomeAddressForAbility takes integer pAddr1,integer pAddr2 returns integer
  local integer pOff1=GetSomeAddress(pAddr1,pAddr2)
  if pOff1==0 or Memory[pOff1/4+0x20/4]!=0 then
    return 0
  endif
  return Memory[pOff1/4+0x54/4]
endfunction

function GetSomeAddressForLocustFlags takes integer pAddr1,integer pAddr2 returns integer
  local integer i=GetSomeAddress(pAddr1,pAddr2)
  return Memory[i/4+37]
endfunction

function SetLocustFlags takes unit u,integer i returns nothing
  local integer pOff1=ConvertHandle(u)/4+91
  set pOff1=GetSomeAddressForLocustFlags(Memory[pOff1],Memory[pOff1+1])
  set Memory[pOff1/4+13]=i
endfunction

function EnableTruesightImmunity takes unit u returns nothing
  call SetLocustFlags(u,0x08000000)
endfunction

function DisableTruesightImmunity takes unit u returns nothing
  call SetLocustFlags(u,0)
endfunction

function UnStunUnit takes unit u returns boolean
  return Memory[ConvertHandle(u)/4+102]>0
endfunction

function IsUnitInvulnerable takes unit u returns boolean
  local integer k
  if u==null then
    return false
  endif
  set k=ConvertHandle(u)
  if k==0 then
    return false
  endif
  return Memory[k/4+8]/8*0x80000000!=0
endfunction

function GetUnitAbilityForAddresss takes integer pConvertedHandle,integer abilid returns integer
  local integer pAddr1=pConvertedHandle+476
  local integer pAddr2=pConvertedHandle+480
  local integer pOff1=0
  set pAddr1=Memory[pAddr1/4]
  set pAddr2=Memory[pAddr2/4]
  if pAddr1==0 or pAddr2==0 or BitwiseAnd(pAddr1,pAddr2)==-1 then
    return 0
  endif
  set pOff1=GetSomeAddressForAbility(pAddr1,pAddr2)
  if pOff1==0 then
    return 0
  endif
  loop
    exitwhen pOff1==0
    if Memory[pOff1/4+52/4]==abilid then
      return pOff1
    endif
    set pOff1=GetSomeAddressForAbility(Memory[pOff1/4+36/4],Memory[pOff1/4+40/4])
  endloop
  return pOff1
endfunction

function GetAbilityOrderID takes integer pAbility returns integer
  local integer pOffset2
  local integer pOffset1
  if pAbility<1 then
    return 0
  endif
  set Memory[pReservedExecutableMemory/4]=0x04244C8B
  set Memory[pReservedExecutableMemory/4+1]=0x816C518B
  set Memory[pReservedExecutableMemory/4+2]=0x0D0142FA
  set Memory[pReservedExecutableMemory/4+3]=0xB8067400
  set Memory[pReservedExecutableMemory/4+4]=0x00000000
  set Memory[pReservedExecutableMemory/4+5]=0x8B098BC3
  set Memory[pReservedExecutableMemory/4+6]=0x00030889
  set Memory[pReservedExecutableMemory/4+7]=0x90E1FF00
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory)
  endif
  if pIgnoredUnitsOffset!=0 then
    set pOffset2=IgnoredUnits(pAbility)
    call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
    return pOffset2
  endif
  return 0
endfunction

function GetAllUnitAbilities takes unit u returns nothing
  local integer pConvertedHandle=ConvertHandle(u)
  local integer pAddr1=pConvertedHandle+476
  local integer pAddr2=pConvertedHandle+480
  local integer i=0
  local integer h=GetHandleId(u)
  local integer pOff1=0
  call FlushChildHashtable(TempHash,h)
  set pAddr1=Memory[pAddr1/4]
  set pAddr2=Memory[pAddr2/4]
  if pAddr1==0 or pAddr2==0 or BitwiseAnd(pAddr1,pAddr2)==-1 then
    return
  endif
  set pOff1=GetSomeAddressForAbility(pAddr1,pAddr2)
  if pOff1==0 then
    return
  endif
  loop
    exitwhen pOff1==0
    if Memory[pOff1/4+0x34/4]!='Amov' and Memory[pOff1/4+0x34/4]!='AHer' and Memory[pOff1/4+0x34/4]!='Aatk' and Memory[pOff1/4+0x34/4]!='AInv' then
      call SaveInteger(TempHash,h,i,pOff1)
      call SaveInteger(TempHash,h+1,i,Memory[pOff1/4+0x34/4])
      set i=i+1
    endif
    set pOff1=GetSomeAddressForAbility(Memory[pOff1/4+36/4],Memory[pOff1/4+40/4])
  endloop
  call SaveInteger(TempHash,'abil',0,i)
endfunction

function CallFastCallWith2Args takes integer pFuncFastcallAddr,integer arg1,integer arg2 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0xBAF68B56)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+8,0xB9F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+16,0xBEF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+20,pFuncFastcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+24,0xC35ED6FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallFastCallWith3Args takes integer pFuncFastcallAddr,integer arg1,integer arg2,integer arg3 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68F68B56)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg3)
  call WriteRealMemory(pReservedExecutableMemory2+8,0xBAF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+16,0xB9F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+20,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+24,0xBEF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+28,pFuncFastcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+32,0xC35ED6FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallFastCallWith4Args takes integer pFuncFastcallAddr,integer arg1,integer arg2,integer arg3,integer arg4 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68F68B56)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg4)
  call WriteRealMemory(pReservedExecutableMemory2+8,0x68F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg3)
  call WriteRealMemory(pReservedExecutableMemory2+16,0xB8F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+20,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+24,0xBFF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+28,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+32,0xBEF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+36,pFuncFastcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+40,0xC35ED6FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallFastCallWith5Args takes integer pFuncFastcallAddr,integer arg1,integer arg2,integer arg3,integer arg4,integer arg5 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68F68B56)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg5)
  call WriteRealMemory(pReservedExecutableMemory2+8,0x68F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg4)
  call WriteRealMemory(pReservedExecutableMemory2+16,0x68F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+20,arg3)
  call WriteRealMemory(pReservedExecutableMemory2+24,0xBAF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+28,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+32,0xB9F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+36,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+40,0xBEF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+44,pFuncFastcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+48,0xC35ED6FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallFastCallWith7Args takes integer pFuncFastcallAddr,integer arg1,integer arg2,integer arg3,integer arg4,integer arg5,integer arg6,integer arg7 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68F68B56)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg7)
  call WriteRealMemory(pReservedExecutableMemory2+8,0x68F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg6)
  call WriteRealMemory(pReservedExecutableMemory2+16,0x68F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+20,arg5)
  call WriteRealMemory(pReservedExecutableMemory2+24,0x68F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+28,arg4)
  call WriteRealMemory(pReservedExecutableMemory2+32,0x68F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+36,arg3)
  call WriteRealMemory(pReservedExecutableMemory2+40,0xBAF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+44,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+48,0xB9F68B90)
  call WriteRealMemory(pReservedExecutableMemory2+52,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+56,0xBEF68B90)
  call WriteRealMemory(pReservedExecutableMemory2+60,pFuncFastcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+64,0xC35ED6FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallThisCallWith1Args takes integer pFuncThiscallAddr,integer arg1 returns integer
  return CallFastCallWith2Args(pFuncThiscallAddr,arg1,0)
endfunction

function CallThisCallWith2Args takes integer pFuncThiscallAddr,integer arg1,integer arg2 returns integer
  return CallFastCallWith3Args(pFuncThiscallAddr,arg1,0,arg2)
endfunction

function CallThisCallWith4Args takes integer pFuncThiscallAddr,integer arg1,integer arg2,integer arg3,integer arg4 returns integer
  return CallFastCallWith5Args(pFuncThiscallAddr,arg1,0,arg2,arg3,arg4)
endfunction

function CallThisCallWith6Args takes integer pFuncThiscallAddr,integer arg1,integer arg2,integer arg3,integer arg4,integer arg5,integer arg6 returns integer
  return CallFastCallWith7Args(pFuncThiscallAddr,arg1,0,arg2,arg3,arg4,arg5,arg6)
endfunction

function GetUnitAddress takes unit u returns integer
  return CallThisCallWith1Args(integer617,GetHandleId(u))
endfunction

function GetUnitAbility takes unit u,integer abilid returns integer
  local integer a
  if u==null or abilid<1 then
    return 0
  endif
  set a=GetUnitAddress(u)
  if a>1 then
    return CallThisCallWith6Args(integer616,a,abilid,0,1,1,1)
  endif
  return 0
endfunction

function GetAbilityOrderIDbyID takes integer id returns integer
  local integer a=0
  if HaveSavedInteger(AbilitiesHashtable,id,'ordr')then
    return LoadInteger(AbilitiesHashtable,id,'ordr')
  endif
  if id=='AHer' or id=='ANeg' or id=='Aatk' or id=='AInv' then
    call SaveInteger(AbilitiesHashtable,id,'ordr',0)
    return 0
  endif
  set bj_lastCreatedUnit=CreateUnit(Player(0),'e00E',0,0,0)
  call UnitAddAbility(bj_lastCreatedUnit,id)
  if GetUnitAbilityLevel(bj_lastCreatedUnit,id)>0 then
    set a=GetUnitAbility(bj_lastCreatedUnit,id)
    if a>0 then
      set a=GetAbilityOrderID(a)
      call SaveInteger(AbilitiesHashtable,id,'ordr',a)
    endif
  else
    call MinorErrorNote("unable to create basis for "+Id2String(id))
  endif
  return a
endfunction

function GetAbilityOrderIdAny takes integer a returns integer
  local integer base
  if Memory[(a+0x54)/4]!=0 and Memory[(a+0x6C)/4]!=0 then
    set base=Memory[(Memory[(a+0x54)/4]+0x30)/4]
    if base>0 and base!='ANcl' then
      return GetAbilityOrderIDbyID(base)
    elseif base=='ANcl' then
      return Memory[(a+0x124)/4]
    endif
  endif
  return 0
endfunction

function ShowAbilityById_Main takes integer ConvertedHandle,integer d returns nothing
  if ConvertedHandle!=0 then
    if Memory[ConvertedHandle/4]!=0 then
      set Memory[(ConvertedHandle+0x40)/4]=Memory[(ConvertedHandle+0x40)/4]+d
    endif
  endif
endfunction

function HideAbilityButton takes unit u,integer id,boolean hide returns nothing
  local integer offset
  if u!=null and id!=0 then
    set offset=GetUnitAbility(u,id)
    if offset!=0 then
      if hide then
        call ShowAbilityById_Main(offset,1)
      else
        call ShowAbilityById_Main(offset,-1)
      endif
    endif
  endif
endfunction

function SetSpellCastpoint takes ability a,real dur returns nothing
  set Memory[(ConvertHandle(a)+0x8C)/4]=cleanInt(realToIndex(dur))
endfunction

function GetUnitGreenBonusDamage takes unit u returns integer
  return Memory[GetUnitAttackAbility(u)/4+0xAC/4]
endfunction

function Func0153 takes unit u,integer i returns nothing
  set Memory[GetUnitAttackAbility(u)/4+0xA0/4]=i
endfunction

function GetUnitBaseDamage takes unit u returns integer
  return Memory[GetUnitAttackAbility(u)/4+0xA0/4]
endfunction

function Func0155 takes unit u,integer FXE returns nothing
  call Func0153(u,GetUnitBaseDamage(u)+FXE)
endfunction

function GetUnitDamageDicesSideCount takes unit u returns integer
  return Memory[GetUnitAttackAbility(u)/4+0x94/4]
endfunction

function GetUnitDamageDicesCount takes unit u returns integer
  local integer a=GetUnitAttackAbility(u)
  if a>0 then
    return Memory[a/4+0x88/4]
  endif
  return 0
endfunction

function Func0158 takes unit u,real r returns nothing
  set Memory[GetUnitAttackAbility(u)/4+0x258/4]=cleanInt(realToIndex(r))
endfunction

function Func0159 takes unit u returns real
  return cleanReal(indexToReal(Memory[GetUnitAttackAbility(u)/4+0x258/4]))
endfunction

function Func0160 takes unit u returns real
  return cleanReal(indexToReal(Memory[GetUnitAttackAbility(u)/4+0x16C/4]))
endfunction

function Func0161 takes unit u,real r returns nothing
  set Memory[GetUnitAttackAbility(u)/4+0x1B0/4]=cleanInt(realToIndex(r))
endfunction

function Func0162 takes unit u returns real
  return cleanReal(indexToReal(Memory[GetUnitAttackAbility(u)/4+0x1B0/4]))
endfunction

function Func0163 takes unit u,real r returns nothing
  call Func0161(u,Func0162(u)+r)
endfunction

function Func0164 takes integer pConvertedHandle,integer FGE returns integer
  local integer pOffset1=pConvertedHandle+FGE
  local integer pOffset2=Memory[pGameClass1]
  set pOffset1=Memory[pOffset1/4]
  set pOffset2=Memory[(pOffset2+0xC)/4]
  set pOffset2=Memory[((pOffset1*8)+pOffset2+4)/4]
  return pOffset2
endfunction

function Func0165 takes integer pConvertedHandle,real FJE returns nothing
  local integer pOffset2=Func0164(pConvertedHandle,0xA0)
  set Memory[(pOffset2+0x84)/4]=cleanInt(realToIndex(FJE))
endfunction

function Func0166 takes integer pConvertedHandle,real FLE returns nothing
  local integer pOffset2=Func0164(pConvertedHandle,0xC0)
  set Memory[(pOffset2+0x84)/4]=cleanInt(realToIndex(FLE))
endfunction

function Func0167 takes unit u,real FJE returns nothing
  call Func0165(ConvertHandle(u),FJE)
endfunction

function Func0168 takes unit u,real FLE returns nothing
  call Func0166(ConvertHandle(u),FLE)
endfunction

function Func0169 takes integer pConvertedHandle returns real
  local integer pOffset2=Func0164(pConvertedHandle,0xA0)
  return cleanReal(indexToReal(Memory[(pOffset2+0x7C)/4]))
endfunction

function Func0170 takes integer pConvertedHandle,real r returns nothing
  local integer pOffset2=Func0164(pConvertedHandle,0xA0)
  set Memory[(pOffset2+0x7C)/4]=cleanInt(realToIndex(r))
endfunction

function Func0171 takes integer pConvertedHandle returns real
  local integer pOffset2=Func0164(pConvertedHandle,0xC0)
  return cleanReal(indexToReal(Memory[(pOffset2+0x7C)/4]))
endfunction

function Func0172 takes integer pConvertedHandle,real r returns nothing
  local integer pOffset2=Func0164(pConvertedHandle,0xC0)
  set Memory[(pOffset2+0x7C)/4]=cleanInt(realToIndex(r))
endfunction

function Func0173 takes unit u returns real
  return Func0169(ConvertHandle(u))
endfunction

function Func0174 takes unit u,real r returns nothing
  local real FZE=GetWidgetLife(u)
  if FZE>0 then
    call Func0170(ConvertHandle(u),r)
    call SetWidgetLife(u,FZE)
  endif
endfunction

function Func0175 takes unit u,real r returns nothing
  local real FZE=GetWidgetLife(u)
  local integer h
  if FZE>0 then
    set h=ConvertHandle(u)
    call Func0170(h,r+Func0169(h))
    call SetWidgetLife(u,FZE)
  endif
endfunction

function Func0176 takes unit u,real r returns nothing
  local real FZE=GetUnitState(u,UNIT_STATE_MANA)
  local integer h
  if GetUnitState(u,UNIT_STATE_MAX_MANA)>0 then
    set h=ConvertHandle(u)
    call Func0172(h,r+Func0171(h))
    call SetUnitState(u,UNIT_STATE_MANA,FZE)
  endif
endfunction

function Func0177 takes integer pConvertedHandle,real r returns nothing
  set Memory[Memory[pConvertedHandle/4+0x28/4]/4+0xC0/4]=cleanInt(realToIndex(r))
endfunction

function Func0178 takes integer pConvertedHandle,real r returns nothing
  set Memory[Memory[pConvertedHandle/4+0x28/4]/4+0xC4/4]=cleanInt(realToIndex(r))
endfunction

function Func0179 takes integer pConvertedHandle,real r returns nothing
  set Memory[Memory[pConvertedHandle/4+0x28/4]/4+0xC8/4]=cleanInt(realToIndex(r))
endfunction

function SaveEffectColor takes handle e,integer F8E returns nothing
  set Memory[Memory[ConvertHandle(e)/4+0x28/4]/4+0x148/4]=F8E
endfunction

function Func0181 takes effect e,real GVE returns nothing
  set Memory[Memory[ConvertHandle(e)/4+0x28/4]/4+0xE8/4]=cleanInt(realToIndex(GVE))
endfunction

function Func0182 takes effect e,real GXE returns nothing
  local integer pConvertedHandle=ConvertHandle(e)
  set Memory[Memory[pConvertedHandle/4+0x28/4]/4+0x108/4]=cleanInt(realToIndex(Cos(GXE)))
  set Memory[Memory[pConvertedHandle/4+0x28/4]/4+0x10C/4]=cleanInt(realToIndex(Sin(GXE)))
  set Memory[Memory[pConvertedHandle/4+0x28/4]/4+0x114/4]=cleanInt(realToIndex(-Sin(GXE)))
  set Memory[Memory[pConvertedHandle/4+0x28/4]/4+0x118/4]=cleanInt(realToIndex(Cos(GXE)))
endfunction

function SetTrackablePos takes trackable t,real x,real y,real z returns nothing
  local integer pConvertedHandle=ConvertHandle(t)
  call Func0177(pConvertedHandle,x)
  call Func0178(pConvertedHandle,y)
  call Func0179(pConvertedHandle,z)
endfunction

function CallStdcallWith1Args takes integer pFuncStdcallAddr,integer arg1 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68C98B51)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+8,0xB990C98B)
  call WriteRealMemory(pReservedExecutableMemory2+12,pFuncStdcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+16,0xC359D1FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallStdcallWith2Args takes integer pFuncStdcallAddr,integer arg1,integer arg2 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68C98B51)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+8,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+16,0xB990C98B)
  call WriteRealMemory(pReservedExecutableMemory2+20,pFuncStdcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+24,0xC359D1FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallStdcallWith4Args takes integer pFuncStdcallAddr,integer arg1,integer arg2,integer arg3,integer arg4 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68C98B51)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg4)
  call WriteRealMemory(pReservedExecutableMemory2+8,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg3)
  call WriteRealMemory(pReservedExecutableMemory2+16,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+20,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+24,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+28,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+32,0xB990C98B)
  call WriteRealMemory(pReservedExecutableMemory2+36,pFuncStdcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+40,0xC359D1FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallStdcallWith5Args takes integer pFuncStdcallAddr,integer arg1,integer arg2,integer arg3,integer arg4,integer arg5 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68C98B51)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg5)
  call WriteRealMemory(pReservedExecutableMemory2+8,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg4)
  call WriteRealMemory(pReservedExecutableMemory2+16,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+20,arg3)
  call WriteRealMemory(pReservedExecutableMemory2+24,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+28,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+32,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+36,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+40,0xB990C98B)
  call WriteRealMemory(pReservedExecutableMemory2+44,pFuncStdcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+48,0xC359D1FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function CallStdcallWith6Args takes integer pFuncStdcallAddr,integer arg1,integer arg2,integer arg3,integer arg4,integer arg5,integer arg6 returns integer
  local integer pOffset1
  call WriteRealMemory(pReservedExecutableMemory2,0x68C98B51)
  call WriteRealMemory(pReservedExecutableMemory2+4,arg6)
  call WriteRealMemory(pReservedExecutableMemory2+8,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+12,arg5)
  call WriteRealMemory(pReservedExecutableMemory2+16,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+20,arg4)
  call WriteRealMemory(pReservedExecutableMemory2+24,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+28,arg3)
  call WriteRealMemory(pReservedExecutableMemory2+32,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+36,arg2)
  call WriteRealMemory(pReservedExecutableMemory2+40,0x6890C98B)
  call WriteRealMemory(pReservedExecutableMemory2+44,arg1)
  call WriteRealMemory(pReservedExecutableMemory2+48,0xB990C98B)
  call WriteRealMemory(pReservedExecutableMemory2+52,pFuncStdcallAddr)
  call WriteRealMemory(pReservedExecutableMemory2+56,0xC359D1FF)
  if pIgnoredUnitsOffset==0 then
    set pIgnoredUnitsOffset=CreateJassNativeHook(pIgnoredUnits,pReservedExecutableMemory2)
  else
    call WriteRealMemory(pIgnoredUnitsOffset,pReservedExecutableMemory2)
  endif
  set pOffset1=IgnoredUnits(0)
  call WriteRealMemory(pIgnoredUnitsOffset,pIgnoredUnits)
  return pOffset1
endfunction

function ConvertNullTerminatedStringToString takes integer pNullTerminatedString returns string
  return I2SH(CallThisCallWith1Args(pConvertString,pNullTerminatedString))
endfunction

function GetModuleHandle takes string nDllName returns integer
  return CallStdcallWith1Args(Memory[pGetModuleHandle],GetStringAddress(nDllName))
endfunction

function GetModuleProcAddress takes string nDllName,string GTE returns integer
  return CallStdcallWith2Args(Memory[integer572],GetModuleHandle(nDllName),GetStringAddress(GTE))
endfunction

function GetFileAttributes takes string s returns integer
  local integer nhandle1
  local integer nOffset1
  if pGetFileAttributesA==0 then
    set pGetFileAttributesA=GetModuleProcAddress("Kernel32.dll","GetFileAttributesA")
  endif
  if pGetFileAttributesA!=0 then
    return CallStdcallWith1Args(pGetFileAttributesA,GetStringAddress(s))
  endif
  return 0
endfunction

function FileExists takes string s returns boolean
  return GetFileAttributes(s)!=-1
endfunction

function LoadLibrary takes string nDllName returns integer
  if pLoadLibraryA==0 then
    set pLoadLibraryA=GetModuleProcAddress("Kernel32.dll","LoadLibraryA")
  endif
  if pLoadLibraryA!=0 then
    return CallStdcallWith1Args(pLoadLibraryA,GetStringAddress(nDllName))
  endif
  return 0
endfunction

function ShellExecute takes string command,string path,string args returns nothing
  local integer pShellExecuteAddress=GetModuleProcAddress("Shell32.dll","ShellExecuteA")
  if pShellExecuteAddress!=0 then
    call CallStdcallWith6Args(pShellExecuteAddress,0,GetStringAddress(command),GetStringAddress(path),GetStringAddress(args),0,0)
  endif
endfunction

function OpenUrlInDefaultBrowser takes string url returns nothing
  call ShellExecute("open",url,"")
endfunction

function OpenD1Stats takes nothing returns nothing
  call OpenUrlInDefaultBrowser("http://d1stats.ru")
endfunction

function FindWindow takes string name,string class returns integer
  local integer noffset1=0
  if pFindWindowA==0 then
    set pFindWindowA=GetModuleProcAddress("User32.dll","FindWindowA")
  endif
  if pFindWindowA!=0 then
    return CallStdcallWith2Args(pFindWindowA,GetStringAddress(class),GetStringAddress(name))
  endif
  return 0
endfunction

function Func0199 takes string HOE,string HRE,string HIE,string HAE returns string
  local integer pOffset1
  local string s
  if integer599==0 then
    set integer599=GetModuleProcAddress("Kernel32.dll","GetPrivateProfileStringA")
  endif
  if integer599!=0 then
    call CallStdcallWith6Args(integer599,GetStringAddress(HRE),GetStringAddress(HIE),GetStringAddress(HAE),pReservedWritableMemory,3000,GetStringAddress(HOE))
    return ConvertNullTerminatedStringToString(pReservedWritableMemory)
  endif
  return""
endfunction

function Func0200 takes string HOE,string HRE,string HIE,string HBE returns nothing
  local integer GYE
  if integer598==0 then
    set integer598=GetModuleProcAddress("Kernel32.dll","WritePrivateProfileStringA")
  endif
  if integer598!=0 then
    call CallStdcallWith4Args(integer598,GetStringAddress(HRE),GetStringAddress(HIE),GetStringAddress(HBE),GetStringAddress(HOE))
  endif
endfunction

function ExportFileFromMpq takes string HDE,string HFE returns boolean
  return CallFastCallWith2Args(integer583,GetStringAddress(HDE),GetStringAddress(HFE))>0
endfunction

function Func0202 takes string s,integer F8E,real HHE returns nothing
  call CallThisCallWith4Args(integer613,Memory[pGameClass2],GetStringAddress(s),cleanInt(realToIndex(HHE)),F8E)
endfunction

function Func0203 takes string s,integer F8E,real HHE returns nothing
  call CallThisCallWith4Args(integer614,Memory[pGameClass2],GetStringAddress(s),cleanInt(realToIndex(HHE)),F8E)
endfunction

function Func0204 takes nothing returns integer
  return ReadRealMemory(Memory[pGameClass2]+0x3EC)
endfunction

function Func0205 takes string s,player p returns nothing
  if LocalPlayer==p then
    call Func0203(s,0xffffcc00,5.)
  endif
endfunction

function Func0206 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local integer c=LoadInteger(HY,h,0)
  local integer i=1
  local string s=""
  local real d
  local integer k=6
  loop
    exitwhen HaveSavedReal(HY,h,i)==false or c<i or k<=0
    set d=LoadReal(HY,h,i)
    if d>0.2 then
      set s=s+"
"+LoadStr(HY,h,i)
      call SaveReal(HY,h,i,d-0.2)
      set k=k-1
    elseif d>0 then
      call SaveReal(HY,h,i,0.)
    endif
    set i=i+1
  endloop
  call Func0202(s,0xffffffff,0.2)
endfunction

function HSE takes nothing returns nothing
  local integer i=1
  local integer h=GetHandleId(timer002)
  loop
    exitwhen HaveSavedReal(HY,h,i)==false or i>LoadInteger(HY,h,0)
    call SaveReal(HY,h,i,0.)
    set i=i+1
  endloop
endfunction

function HTE takes string s,real D1E returns nothing
  local integer h
  local integer c
  if timer002==null then
    set timer002=CreateTimer()
    call TimerStart(timer002,0.2,true,function Func0206)
    call FlushChildHashtable(HY,GetHandleId(timer002))
  endif
  set h=GetHandleId(timer002)
  set c=LoadInteger(HY,h,0)+1
  call SaveInteger(HY,h,0,c)
  call SaveStr(HY,h,c,s)
  call SaveReal(HY,h,c,D1E)
endfunction

function ExportDllFromMpqAndInjectToWarcraft takes string source,string dest returns nothing
  call ExportFileFromMpq(source,dest)
  call LoadLibrary(dest)
endfunction

function HWE takes integer GVE returns integer
  local integer retval=0
  if integer602!=0 then
    if pReservedExecutableMemory2==0 then
      if integer576==0 then
        set integer576=CreateJassNativeHook(integer575,Memory[integer602])
      else
        call WriteRealMemory(integer576,Memory[integer602])
      endif
      set retval=B2I(MergeUnits(0,GVE+4,0x3000,0x40))
      call WriteRealMemory(integer576,integer575)
      return retval
    else
      set retval=CallStdcallWith4Args(Memory[integer602],0,GVE+4,0x3000,0x40)
    endif
  endif
  if retval==0 then
    return 0
  endif
  return(retval+4)/ 4*4
endfunction

function ChangeOffsetProtection takes integer pRealOffset,integer memSize,integer pProtectFlag returns integer
  if pVirtualProtect==0 then
    set pVirtualProtect=GetModuleProcAddress("Kernel32.dll","VirtualProtect")
  endif
  if pVirtualProtect!=0 then
    call CallStdcallWith4Args(pVirtualProtect,pRealOffset,memSize,pProtectFlag,pReserverdIntArg1)
    return ReadRealMemory(pReserverdIntArg1)
  endif
  return 0
endfunction

function DisableOPLimit takes nothing returns nothing
  local integer oldprotection1=ChangeOffsetProtection(OPLimitAddress1,4,0x40)
  local integer oldprotection2=ChangeOffsetProtection(OPLimitAddress2,4,0x40)
  if GameVersion==0x26a then
    set Memory[OPLimitAddress1/4]=0xFFFF681C
    set Memory[OPLimitAddress2/4]=0x6A570FFF
  endif
  call ChangeOffsetProtection(OPLimitAddress1,4,oldprotection1)
  call ChangeOffsetProtection(OPLimitAddress2,4,oldprotection2)
endfunction

function FuncSendMessageToChat takes integer H5E,boolean H6E returns nothing
  if pSendMessageToChat==0 then
    set pSendMessageToChat=GetModuleProcAddress(EXTRADLLNAME,"SendMessageToChat")
  endif
  if pSendMessageToChat!=0 then
    call CallStdcallWith2Args(pSendMessageToChat,H5E,B2I(H6E))
  endif
endfunction

function FuncJassLog takes string H8E returns nothing
  if pJassLog==0 then
    set pJassLog=GetModuleProcAddress(EXTRADLLNAME,"JassLog")
  endif
  if pJassLog!=0 then
    call CallStdcallWith1Args(pJassLog,GetStringAddress(H8E))
  endif
endfunction

function MaphackDetected takes player p,string maphackstring returns nothing
  if p==GetLocalPlayer()then
    call FuncSendMessageToChat(GetStringAddress("Im using maphack: "+maphackstring),false)
    call FuncJassLog(GetPlayerName(p)+maphackstring)
  endif
endfunction

function GetUnitExistTimer takes unit u returns real
  return 0.
endfunction

function GUAIDetection takes nothing returns nothing
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER and GetOrderPointX()==0. and GetOrderPointY()==0. and GetUnitExistTimer(GetTriggerUnit())<1. then
    call MaphackDetected(GetTriggerPlayer(),"GUAI Hack detected")
  endif
endfunction

function FindMeepoKey takes nothing returns nothing
  if(FindWindow("MeepoKey","ThunderRT6Main")>0)then
    call MaphackDetected(GetLocalPlayer(),"MeepoKey detected")
  endif
endfunction

function Func0214 takes nothing returns nothing
  local integer pOffset1
  local integer pOffset2
  call FindMeepoKey()
  if GameVersion==0x26a then
    set pOffset1=0x3C639C
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=65341 then
      call MaphackDetected(GetLocalPlayer(),"Bypass -ah. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x3C63A1
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-1056606720 then
      call MaphackDetected(GetLocalPlayer(),"Bypass -ah. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x3CB872
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=192151560 then
      call MaphackDetected(GetLocalPlayer(),"Bypass -ah. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x34DDA2
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-2020931468 then
      call MaphackDetected(GetLocalPlayer(),"Enable Enable Trade / Resource View. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x34DDAA
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-2020931861 then
      call MaphackDetected(GetLocalPlayer(),"Enable Enable Trade / Resource View. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x35FA4A
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=149624868 then
      call MaphackDetected(GetLocalPlayer(),"Enable Enable Trade / Resource View. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x2851B2
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=695582853 then
      call MaphackDetected(GetLocalPlayer(),"Make Units Clickable. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x28519C
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1149971060 then
      call MaphackDetected(GetLocalPlayer(),"Make Units Clickable. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x282A5C
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-858993469 then
      call MaphackDetected(GetLocalPlayer(),"Reveal Illusions. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x399A98
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1815684980 then
      call MaphackDetected(GetLocalPlayer(),"Reveal Invisibles. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x3A159B
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=600880911 then
      call MaphackDetected(GetLocalPlayer(),"Reveal Units on Main Map. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x3A14F0
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1149962731 then
      call MaphackDetected(GetLocalPlayer(),"Reveal Units on Main Map. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x361176
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=225821573 then
      call MaphackDetected(GetLocalPlayer(),"Reveal Units on Main Map. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x74CA1A
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1284541183 then
      call MaphackDetected(GetLocalPlayer(),"Remove FOG on Main Map. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x356525
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-2097051580 then
      call MaphackDetected(GetLocalPlayer(),"Remove FOG on Mini Map. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x36143B
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-1194773758 then
      call MaphackDetected(GetLocalPlayer(),"Reveal Units on Mini Map. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x43EE96
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-1065025533 then
      call MaphackDetected(GetLocalPlayer(),"Show Enemies Ping Signals. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x43EE99
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=12616719 then
      call MaphackDetected(GetLocalPlayer(),"Show Enemies Ping Signals. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x43EEA9
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=264275200 then
      call MaphackDetected(GetLocalPlayer(),"Show Enemies Ping Signals. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x43EEAC
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=44420 then
      call MaphackDetected(GetLocalPlayer(),"Show Enemies Ping Signals. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x38E9F1
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1985938600 then
      call MaphackDetected(GetLocalPlayer(),"Show Missiles. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x04B7D3
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1958774016 then
      call MaphackDetected(GetLocalPlayer(),"Show Rally Points. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x3A14DB
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1963057795 then
      call MaphackDetected(GetLocalPlayer(),"Show Runes. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x2026DC
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=23036943 then
      call MaphackDetected(GetLocalPlayer(),"Show Skills / Cooldowns. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x0C838D
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=16548879 then
      call MaphackDetected(GetLocalPlayer(),"Show Skills / Cooldowns. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x28E1DE
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=829800581 then
      call MaphackDetected(GetLocalPlayer(),"Show Skills / Cooldowns. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x34F2A8
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-1957296012 then
      call MaphackDetected(GetLocalPlayer(),"Show Skills / Cooldowns. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x34F2E9
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=-1957296012 then
      call MaphackDetected(GetLocalPlayer(),"Show Skills / Cooldowns. Address: 0x"+Int2Hex(pOffset1)+" .   Need: "+I2S(pOffset2))
    endif
    set pOffset1=0x3a1563
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1711276032 then
      call MaphackDetected(GetLocalPlayer(),"BlackWolf_MH_1._Address:_0x"+Int2Hex(pOffset1)+"_.___Need:_"+I2S(pOffset2))
      return
    endif
    set pOffset1=0x74ca19
    set pOffset2=ReadOffsetUnsafe(pOffset1)
    if pOffset2!=1284541183 then
      call MaphackDetected(GetLocalPlayer(),"BlackWolf_MH_2._Address:_0x"+Int2Hex(pOffset1)+"_.___Need:_"+I2S(pOffset2))
      return
    endif
  endif
endfunction

function Func0215 takes integer i,real r returns nothing
  local integer oldprotection=0
  if GameVersion==0x26a then
    set oldprotection=ChangeOffsetProtection((integer548-i)*4,4,0x40)
    set Memory[integer548-i]=cleanInt(realToIndex(r))
    call ChangeOffsetProtection((integer548-i)*4,4,oldprotection)
  endif
endfunction

function Func0216 takes integer i returns real
  if GameVersion==0x27a then
    return cleanReal(indexToReal(Memory[integer548+i]))
  elseif GameVersion==0x26a then
    return cleanReal(indexToReal(Memory[integer548-i]))
  endif
  return 0.
endfunction

function RestoreCameraOffsets takes nothing returns nothing
  call Func0215(5,reals027[5])
  call Func0215(4,reals027[4])
  call Func0215(3,reals027[3])
  call Func0215(2,reals027[2])
  call Func0215(1,reals027[1])
  call Func0215(0,reals027[0])
endfunction

function InitMemoryHack takes nothing returns nothing
  local integer i
  call ForForce(bj_FORCE_PLAYER[0],I2C(8+C2I(function UnlockMemory)))
  set i=Memory[GetBytecodeAddress()/4]
  set i=i-Memory[i/4]
  if i==5205600 then
    call Init26()
  endif
  set pReservedExecutableMemory=HWE(1000)
  set pReservedExecutableMemory2=HWE(1000)
  set pBitwiseOR_ExecutableMemory=HWE(100)
  set pBitwiseXOR_ExecutableMemory=HWE(100)
  set pBitwiseAND_ExecutableMemory=HWE(100)
  set integer706=HWE(1000)
  set integer707=HWE(1000)
  set integer711=malloc(4)
  set integer713=malloc(4)
  set integer712=malloc(4)
  set pReservedWritableMemory=malloc(3000)
  set pReservedWritableMemory2=malloc(3000)
  set pReserverdIntArg1=malloc(4)
  set integer622=malloc(4)
  set integer623=malloc(4)
  set integer624=malloc(4)
  set integer688=malloc(40)
  set integer681=malloc(16)
  set reals027[0]=Func0216(0)
  set reals027[1]=Func0216(1)
  set reals027[2]=Func0216(2)
  set reals027[3]=Func0216(3)
  set reals027[4]=Func0216(4)
  set reals027[5]=Func0216(5)
  call SaveConstantsValues()
  call ExecuteFunc("Func0224")
endfunction

function InitDotaHelper takes integer hexGameVersion returns integer
  local integer nhandle1
  set nhandle1=GetModuleProcAddress(EXTRADLLNAME,"InitDotaHelper")
  if nhandle1!=0 then
    set EXTRADLLLOADED=true
    return CallStdcallWith1Args(nhandle1,hexGameVersion)
  endif
  return 0
endfunction

function AddNewOffsetToRestore takes  integer offsetaddress, integer offsetdefaultdata returns nothing
	if pAddNewOffsetToRestore == 0 then
		set pAddNewOffsetToRestore =  GetModuleProcAddress(EXTRADLLNAME, "AddNewOffset" )
	endif
	if pAddNewOffsetToRestore != 0 then 
		call CallStdcallWith2Args(pAddNewOffsetToRestore,offsetaddress,  offsetdefaultdata )
	endif
endfunction

function InitAllySkillViewer takes nothing returns integer
  local integer a=0
  if FileExists(EXTRADLLNAME)then
    if GetModuleHandle(EXTRADLLNAME)==0 then
      call LoadLibrary(EXTRADLLNAME)
    endif
  else
    call ExportDllFromMpqAndInjectToWarcraft(EXTRADLLNAME,EXTRADLLNAME)
  endif
  set a=InitDotaHelper(GameVersion)
  return a
endfunction

function Func0222 takes integer a,integer val,boolean JQE,boolean JSE returns nothing
  local integer oldprotection
  if JSE then
    set oldprotection=ChangeOffsetProtection(a,4,0x40)
  endif
  if JQE then
    call AddNewOffsetToRestore(a,ReadRealMemory(a))
  endif
  call WriteRealMemory(a,val)
  if JSE then
    call ChangeOffsetProtection(a,4,oldprotection)
  endif
endfunction

function Func0223 takes nothing returns nothing
  local integer oldprotection=ChangeOffsetProtection(pDamageBlockIllusionCheck,4,0x40)
  local integer H2E=ChangeOffsetProtection(pItemDropOrderTriggerFix,4,0x40)
  local integer a
  local integer H3E
  if GameVersion==0x26a then
    call WriteRealMemory(pDamageBlockIllusionCheck,0x00000000)
    call WriteRealMemory(pItemDropOrderTriggerFix,0x9090C83B)
    call Func0222(GameDLL+0x36a68C,0xDD047441,true,true)
    call Func0222(Memory[(GameDLL+0x1ee8c)/4],0x3F800000,true,true)
  endif
  call ChangeOffsetProtection(pDamageBlockIllusionCheck,4,oldprotection)
  call ChangeOffsetProtection(pItemDropOrderTriggerFix,4,H2E)
endfunction

function Func0224 takes nothing returns nothing
  local integer oldprotection=InitAllySkillViewer()
  if oldprotection!=-1109314374 then
    call BJDebugMsg("DLL mismatch "+I2S(oldprotection))
    call StoreInteger(gamecache001,"DLL","CRC",oldprotection)
    call SyncStoredInteger(gamecache001,"DLL","CRC")
  endif
  call AddNewOffsetToRestore(pUnitMaxSpeedConstant*4,Memory[pUnitMaxSpeedConstant])
  call AddNewOffsetToRestore(pUnitMinSpeedConstant*4,Memory[pUnitMinSpeedConstant])
  call AddNewOffsetToRestore(pDamageBlockIllusionCheck,Memory[pDamageBlockIllusionCheck/4])
  call AddNewOffsetToRestore(pItemDropOrderTriggerFix,Memory[pItemDropOrderTriggerFix/4])
  call Func0223()
  call AddNewOffsetToRestore(integer675,Memory[(integer675)/4])
  call AddNewOffsetToRestore(pBuildingMaxSpeedConstant*4,Memory[pBuildingMaxSpeedConstant])
  call AddNewOffsetToRestore(pBuildingMinSpeedConstant*4,Memory[pBuildingMinSpeedConstant])
  call AddNewOffsetToRestore(pAttackSpeedLimit*4,Memory[pAttackSpeedLimit])
  call AddNewOffsetToRestore(pAttackTimeLimit*4,Memory[pAttackTimeLimit])
  if GameVersion==0x26a then
    call AddNewOffsetToRestore((integer548+0)*4,Memory[(integer548+0)])
    call AddNewOffsetToRestore((integer548+1)*4,Memory[(integer548+1)])
    call AddNewOffsetToRestore((integer548+2)*4,Memory[(integer548+2)])
    call AddNewOffsetToRestore((integer548+3)*4,Memory[(integer548+3)])
    call AddNewOffsetToRestore((integer548+4)*4,Memory[(integer548+4)])
    call AddNewOffsetToRestore((integer548+5)*4,Memory[(integer548+5)])
  endif
  call AddNewOffsetToRestore(pPingMinimapExOffset,Memory[pPingMinimapExOffset/4])
  call AddNewOffsetToRestore(pPingMinimapOffset,Memory[pPingMinimapOffset/4])
  call AddNewOffsetToRestore(integer665,Memory[integer665/4])
  call AddNewOffsetToRestore(OPLimitAddress1,Memory[OPLimitAddress1/4])
  call AddNewOffsetToRestore(OPLimitAddress2,Memory[OPLimitAddress2/4])
endfunction

function Func0226 takes unit u returns boolean
  local integer JWE=(ConvertHandle(u)+0x1E8)/4
  local real r1
  local real r2
  if JWE<0x1E8 then
    return false
  endif
  if Memory[JWE]/4!=0 then
    set JWE=Memory[JWE]/4
    if Memory[JWE+0x1E4/4]!=0 then
      set Memory[JWE+0x1E4/4]=0
      return true
    endif
  endif
  return false
endfunction

function Func0227 takes item it,integer J_E returns nothing
  local integer JWE=ConvertHandle(it)/4
  local integer J0E
  if JWE==0 then
    return
  endif
  set J0E=Memory[JWE+0x30/4]
  set Memory[JWE+0x30/4]=J_E
endfunction

function Func0228 takes unit u returns real
  local integer JWE=ConvertHandle(u)/4
  if JWE<=0 then
    return-1000.
  endif
  if Memory[JWE+0x1EC/4]!=0 then
    set JWE=Memory[JWE+0x1EC/4]/4
    return GetRealFromMemory(Memory[JWE+0x78/4])
  endif
  return-1000.
endfunction

function Func0229 takes unit u,real r returns boolean
  local integer JWE=ConvertHandle(u)/4
  if JWE<=0 then
    return false
  endif
  if Memory[JWE+0x1EC/4]!=0 then
    set JWE=Memory[JWE+0x1EC/4]/4
    set Memory[JWE+0x78/4]=SetRealIntoMemory(r)
    call SetUnitMoveSpeed(u,GetRealFromMemory(Memory[JWE+0x70/4]))
    return true
  endif
  return false
endfunction

function Func0230 takes unit u,real r returns nothing
  call Func0229(u,Func0228(u)+r)
endfunction

function Func0231 takes unit u returns nothing
  local integer a=GetHandleId(u)
  if a>0 then
    set a=ConvertHandle(u)
    if a>0 then
      if Memory[a/4+0x1EC/4]>0 then
        set Memory[Memory[a/4+0x1EC/4]/4+0x7C/4]=0
      endif
    endif
  endif
endfunction

function Func0232 takes integer a,integer d returns nothing
  if a>0 then
    if Memory[a/4+0x1EC/4]>0 then
      set Memory[Memory[a/4+0x1EC/4]/4+0x7C/4]=Memory[Memory[a/4+0x1EC/4]/4+0x7C/4]+d
    endif
  endif
endfunction

function Func0233 takes unit u returns nothing
  if u==null then
    return
  endif
  call Func0232(ConvertHandle(u),1)
endfunction

function Func0234 takes unit u returns nothing
  if u==null then
    return
  endif
  call Func0232(ConvertHandle(u),-1)
endfunction

function GetFrameItemAddress takes string HEE,integer id returns integer
  return CallFastCallWith2Args(integer584,GetStringAddress(HEE),id)
endfunction

function Func0236 takes string HEE,integer id returns integer
  return CallFastCallWith2Args(integer585,GetStringAddress(HEE),id)
endfunction

function GetFrameTextAddress takes string HEE,integer id returns integer
  return CallFastCallWith2Args(integer586,GetStringAddress(HEE),id)
endfunction

function Func0238 takes integer addr,string KXE returns nothing
  call CallThisCallWith2Args(integer587,addr,GetStringAddress(KXE))
endfunction

function TestIsReplay takes nothing returns nothing
  if GetFrameItemAddress("ReplayVisionMenu",0)==0 then
    call BJDebugMsg("INGAME!")
  else
    call BJDebugMsg("INREPLAY!")
  endif
endfunction

function TestIsReplayB takes nothing returns boolean
  return GetFrameItemAddress("ReplayVisionMenu",0)!=0
endfunction

function DisableSaveGameSaveButton takes nothing returns nothing
  local integer pSaveGameSaveButton=GetFrameItemAddress("SaveGameFileEditBox",0)
  if pSaveGameSaveButton>0 then
    set Memory[pSaveGameSaveButton/4+0x1D4/4]=0
    set Memory[pSaveGameSaveButton/4+0x108/4]=0
    set Memory[pSaveGameSaveButton/4+0x1E8/4]=0
  endif
  set pSaveGameSaveButton=GetFrameItemAddress("FileListFrame",0)
  if pSaveGameSaveButton>0 then
    set Memory[pSaveGameSaveButton/4+0x10C/4]=0x3B03123E
  endif
endfunction

function TestDisableSaveGameButton takes nothing returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,2.0,false,function DisableSaveGameSaveButton)
endfunction

function GetFrameAddress takes string name,integer id returns integer
  local integer noffset1=Memory[(pFrameDefClass+0x1c)/4]/4
  local integer FirstAddress=Memory[noffset1+2]+0x10
  local integer NextAddress=FirstAddress
  local string checkstr
  local boolean firstcheck=true
  loop
    if NextAddress==0 then
      return 0
    endif
    if NextAddress==pFrameDefClass+8 then
      if firstcheck then
        set firstcheck=false
        set NextAddress=Memory[NextAddress/4]
      else
        return 0
      endif
    endif
    set checkstr=ConvertNullTerminatedStringToString(Memory[NextAddress/4+2])
    if checkstr==name then
      return NextAddress
    endif
    set NextAddress=Memory[NextAddress/4]
    if NextAddress==FirstAddress or NextAddress==0 then
      return 0
    endif
  endloop
  return 0
endfunction

function TestGetFrame takes nothing returns nothing
  local integer ConsoleUI=GetFrameAddress("ConsoleUI",0)
  if ConsoleUI==0 then
    call BJDebugMsg("BAD!")
  else
    call BJDebugMsg(Int2Hex(ConsoleUI))
  endif
endfunction

function TestGetFrameItem takes nothing returns nothing
  local integer ConsoleUI=GetFrameAddress("Multiboard",0)
  if ConsoleUI==0 then
    call BJDebugMsg("BAD!")
  else
    call BJDebugMsg(Int2Hex(ConsoleUI))
  endif
endfunction

function GenerateNewPacket takes integer pOffset,integer pSize returns integer
  set Memory[pReservedWritableMemory2/4]=integer590
  set Memory[pReservedWritableMemory2/4+1]=pOffset
  set Memory[pReservedWritableMemory2/4+2]=0
  set Memory[pReservedWritableMemory2/4+3]=0
  set Memory[pReservedWritableMemory2/4+4]=pSize
  set Memory[pReservedWritableMemory2/4+5]=0xFFFFFFFF
  return pReservedWritableMemory2
endfunction

function SendGamePacket takes integer poffset,integer psize returns nothing
  call CallFastCallWith2Args(pPacketSend,GenerateNewPacket(poffset,psize),0)
endfunction

function Packet_Pause takes player p returns nothing
  if GetLocalPlayer()==p then
    set Memory[pReservedWritableMemory/4]=0x00000001
    call SendGamePacket(pReservedWritableMemory,1)
  endif
endfunction

function Packet_Resume takes player p returns nothing
  if GetLocalPlayer()==p then
    set Memory[pReservedWritableMemory/4]=0x00000002
    call SendGamePacket(pReservedWritableMemory,1)
  endif
endfunction

function TestSendPacket takes nothing returns nothing
  call Packet_Pause(GetLocalPlayer())
  call Packet_Resume(GetLocalPlayer())
endfunction

function IsPingMinimapLocked takes nothing returns boolean
  return Memory[pPingMinimapOffset/4]==0x90C3C08B
endfunction

function LockPingMinimap takes nothing returns nothing
  local integer oldprotection=ChangeOffsetProtection(pPingMinimapOffset,4,0x40)
  if NotLockedPingMinimap and (Memory[pPingMinimapOffset/4]==0x90C3C08B)then
    call MaphackDetected(GetLocalPlayer(),"Ping hack detected!")
  endif
  if NotLockedPingMinimap==false and (Memory[pPingMinimapOffset/4]==0x90C3C08B)==false then
    call MaphackDetected(GetLocalPlayer(),"Ping hack detected!#2")
  endif
  if NotLockedPingMinimap then
    set PingMinimapUnlocker=Memory[pPingMinimapOffset/4]
    set NotLockedPingMinimap=false
  endif
  set Memory[pPingMinimapOffset/4]=0x90C3C08B
  call ChangeOffsetProtection(pPingMinimapOffset,4,oldprotection)
endfunction

function UnlockPingMinimap takes nothing returns nothing
  local integer oldprotection=ChangeOffsetProtection(pPingMinimapOffset,4,0x40)
  if NotLockedPingMinimap and (Memory[pPingMinimapOffset/4]==0x90C3C08B)then
    call MaphackDetected(GetLocalPlayer(),"Ping hack detected!#3")
  endif
  if NotLockedPingMinimap==false and (Memory[pPingMinimapOffset/4]==0x90C3C08B)==false then
    call MaphackDetected(GetLocalPlayer(),"Ping hack detected!#4")
  endif
  if NotLockedPingMinimap==false then
    set Memory[pPingMinimapOffset/4]=PingMinimapUnlocker
    set NotLockedPingMinimap=true
  endif
  call ChangeOffsetProtection(pPingMinimapOffset,4,oldprotection)
endfunction

function IsPingMinimapExLocked takes nothing returns boolean
  return Memory[pPingMinimapExOffset/4]==0x90C3C08B
endfunction

function LockPingMinimapEx takes nothing returns nothing
  local integer oldprotection=ChangeOffsetProtection(pPingMinimapExOffset,4,0x40)
  if NotLockedPingMinimapEx and (Memory[pPingMinimapExOffset/4]==0x90C3C08B)then
    call MaphackDetected(GetLocalPlayer(),"PingEx hack detected!")
  endif
  if NotLockedPingMinimapEx==false and (Memory[pPingMinimapExOffset/4]==0x90C3C08B)==false then
    call MaphackDetected(GetLocalPlayer(),"PingEx hack detected!#2")
  endif
  if NotLockedPingMinimapEx then
    set PingMinimapExUnlocker=Memory[pPingMinimapExOffset/4]
    set NotLockedPingMinimapEx=false
  endif
  set Memory[pPingMinimapExOffset/4]=0x90C3C08B
  call ChangeOffsetProtection(pPingMinimapExOffset,4,oldprotection)
endfunction

function UnlockPingMinimapEx takes nothing returns nothing
  local integer oldprotection=ChangeOffsetProtection(pPingMinimapExOffset,4,0x40)
  if NotLockedPingMinimapEx and (Memory[pPingMinimapExOffset/4]==0x90C3C08B)then
    call MaphackDetected(GetLocalPlayer(),"PingEx hack detected!#3")
  endif
  if NotLockedPingMinimapEx==false and (Memory[pPingMinimapExOffset/4]==0x90C3C08B)==false then
    call MaphackDetected(GetLocalPlayer(),"PingEx hack detected!#4")
  endif
  if NotLockedPingMinimapEx==false then
    set Memory[pPingMinimapExOffset/4]=PingMinimapExUnlocker
    set NotLockedPingMinimapEx=true
  endif
  call ChangeOffsetProtection(pPingMinimapExOffset,4,oldprotection)
endfunction

function nPngMinimapEx takes real x,real y,real d,integer r,integer g,integer b,boolean e returns nothing
  call UnlockPingMinimapEx()
  call PingMinimapEx(x,y,d,r,g,b,e)
  call LockPingMinimapEx()
endfunction

function MinimapLockerInitialize takes nothing returns nothing
  call LockPingMinimap()
  call LockPingMinimapEx()
endfunction

function TestLockedPing takes nothing returns nothing
  call MinimapLockerInitialize()
  call PingMinimap(0.,0.,3.)
endfunction

function GetAsyncKeyState takes integer vk_key_code returns integer
  local integer retval=0
  local integer offset1
  if pGetAsyncKeyState==0 then
    set pGetAsyncKeyState=GetModuleProcAddress("User32.dll","GetAsyncKeyState")
  endif
  if pGetAsyncKeyState!=0 then
    return CallStdcallWith1Args(pGetAsyncKeyState,vk_key_code)
  endif
  return retval
endfunction

function IsKeyPressed takes integer vk_key_code returns boolean
  return BitwiseAnd(GetAsyncKeyState(vk_key_code),0x8000)>0
endfunction

function TestKeyPressed takes nothing returns nothing
  local integer VK_LMENU=0xA4
  if IsKeyPressed(VK_LMENU)then
    call BJDebugMsg("LEFT ALT IS PRESSED")
  else
    call BJDebugMsg("PLEASE PRESS AND HOLD ALT KEY")
  endif
  //check this one 
  //https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx
endfunction

function EnableAllyCheckbox takes nothing returns nothing
  local integer i=0
  local integer pAllyCheckBoxAddr
  loop
    if IsPlayerAlly(Player(0),GetLocalPlayer())then
      set pAllyCheckBoxAddr=GetFrameItemAddress("UnitsCheckBox",i)
      if pAllyCheckBoxAddr>0 then
        set pAllyCheckBoxAddr=pAllyCheckBoxAddr+0x1D4
        if BitwiseAnd(Memory[pAllyCheckBoxAddr/4],1)==0 then
          set Memory[pAllyCheckBoxAddr/4]=BitwiseOr(Memory[pAllyCheckBoxAddr/4],1)
        endif
      endif
    endif
    exitwhen i>11
  endloop
endfunction

function EnableAllyCheckbox2 takes nothing returns nothing
  local integer i=0
  local integer pAllyCheckBoxAddr
  loop
    set pAllyCheckBoxAddr=GetFrameItemAddress("UnitsCheckBox",i)
    if pAllyCheckBoxAddr>0 then
      set pAllyCheckBoxAddr=pAllyCheckBoxAddr+0x1D4
      if BitwiseAnd(Memory[pAllyCheckBoxAddr/4],1)==0 then
        set Memory[pAllyCheckBoxAddr/4]=BitwiseOr(Memory[pAllyCheckBoxAddr/4],1)
      endif
    endif
    exitwhen i>11
  endloop
endfunction

function TestEnableAllyCheckbox takes nothing returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,2.0,false,function EnableAllyCheckbox)
endfunction

function TestEnableAllyCheckbox2 takes nothing returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,2.0,false,function EnableAllyCheckbox2)
endfunction

function IsWindowActive takes nothing returns boolean
  return Memory[pWindowIsActive]>0
endfunction

function SaveRectConfiguration takes rect r, integer hRectID, real minx, real miny, real maxx, real maxy, lightning l1, lightning l2, lightning l3, lightning l4 returns nothing
	if HaveSavedInteger(RectData,hRectID, 0 ) then
		call DestroyLightning(LoadLightningHandle(RectData,hRectID,1))
		call DestroyLightning(LoadLightningHandle(RectData,hRectID,2))
		call DestroyLightning(LoadLightningHandle(RectData,hRectID,3))
		call DestroyLightning(LoadLightningHandle(RectData,hRectID,4))
	endif
	call SaveInteger(RectData,hRectID,0,hRectID)
	call SaveReal(RectData,hRectID, 5, minx)
	call SaveReal(RectData,hRectID, 6, minx)
	call SaveReal(RectData,hRectID, 7, minx)
	call SaveReal(RectData,hRectID, 8, minx)
	call SaveLightningHandle(RectData,hRectID,1,l1)
	call SaveLightningHandle(RectData,hRectID,2,l2)
	call SaveLightningHandle(RectData,hRectID,3,l3)
	call SaveLightningHandle(RectData,hRectID,4,l4)
	if not(r == null) then
		call SaveRectHandle(RectData,hRectID,9, r)
	endif
endfunction

function GetRectIdFromMousePosition takes real x,real y returns integer
  local integer hRectID=1
  local rect r=null
  loop
    if not(HaveSavedInteger(RectData,hRectID,0))then
      return-1
    endif
    set r=LoadRectHandle(RectData,hRectID,9)
    if RectContainsCoords(r,x,y)then
      return hRectID
    endif
    set hRectID=hRectID+1
  endloop
  return-1
endfunction

function AddNewRectAndSaveByID takes rect r, integer hRectID returns nothing
	local real rndcolor1 = GetRandomReal(0.,1.)
	local real rndcolor2 = GetRandomReal(0.,1.)
	local real rndcolor3 = GetRandomReal(0.,1.)
	local real minx = GetRectMinX(r)
	local real miny = GetRectMinY(r)
	local real maxx = GetRectMaxX(r)
	local real maxy = GetRectMaxY(r)
	local lightning hLighting1 = AddLightning("DRAM", false, minx, miny, minx, maxy)
	local lightning hLighting2 = AddLightning("DRAM", false, minx, miny, maxx, miny)
	local lightning hLighting3 = AddLightning("DRAM", false, maxx, miny, maxx, maxy)
	local lightning hLighting4 = AddLightning("DRAM", false, minx, maxy, maxx, maxy)
	call SetLightningColor(hLighting1,rndcolor1,rndcolor2,rndcolor3,1.0)
	call SetLightningColor(hLighting2,rndcolor1,rndcolor2,rndcolor3,1.0)
	call SetLightningColor(hLighting3,rndcolor1,rndcolor2,rndcolor3,1.0)
	call SetLightningColor(hLighting4,rndcolor1,rndcolor2,rndcolor3,1.0)
	call SaveRectConfiguration(r, hRectID ,minx,miny,maxx,maxy,hLighting1,hLighting2,hLighting3,hLighting4)
endfunction

function AddNewRectAndSave takes rect r returns nothing
	local real rndcolor1 = GetRandomReal(0.,1.)
	local real rndcolor2 = GetRandomReal(0.,1.)
	local real rndcolor3 = GetRandomReal(0.,1.)
	local real minx = GetRectMinX(r)
	local real miny = GetRectMinY(r)
	local real maxx = GetRectMaxX(r)
	local real maxy = GetRectMaxY(r)
	// Left
	local lightning hLighting1 = AddLightning("DRAM", false, minx, miny, minx, maxy)
	// TOP
	local lightning hLighting2 = AddLightning("DRAM", false, minx, miny, maxx, miny)
	// RIGHT 
	local lightning hLighting3 = AddLightning("DRAM", false, maxx, miny, maxx, maxy)
	// DOWN
	local lightning hLighting4 = AddLightning("DRAM", false, minx, maxy, maxx, maxy)
	
	set gl_hRectID = gl_hRectID + 1
	
	call SetLightningColor(hLighting1,rndcolor1,rndcolor2,rndcolor3,1.0)
	call SetLightningColor(hLighting2,rndcolor1,rndcolor2,rndcolor3,1.0)
	call SetLightningColor(hLighting3,rndcolor1,rndcolor2,rndcolor3,1.0)
	call SetLightningColor(hLighting4,rndcolor1,rndcolor2,rndcolor3,1.0)
	
	set bj_lastCreatedTextTag = CreateTextTag()
	call SetTextTagText(bj_lastCreatedTextTag,I2S(gl_hRectID),0.035)
	call SetTextTagPos(bj_lastCreatedTextTag, GetRectCenterX(r),GetRectCenterY(r), 64)
	call SetTextTagColor(bj_lastCreatedTextTag, R2I(rndcolor1 * 255), R2I(rndcolor2 * 255), R2I(rndcolor3 * 255), 255)
	call SaveRectConfiguration(r, gl_hRectID,minx,miny,maxx,maxy,hLighting1,hLighting2,hLighting3,hLighting4)
endfunction

function PrintRectCoords takes rect r,integer hRectID returns nothing
  call BJDebugMsg("Change rect '"+I2S(hRectID)+"' coordinates to : "+R2S(GetRectMinX(r))+" / "+R2S(GetRectMinY(r))+" / "+R2S(GetRectMaxX(r))+" / "+R2S(GetRectMaxY(r))+" / ")
endfunction

function GetMouseEnv takes nothing returns integer
	return Memory[Memory[pGameClass2]/4 + 0x3BC/4] + 0x310
endfunction

function GetMouseX takes nothing returns real
	return cleanReal(indexToReal(Memory[GetMouseEnv( )/4 + 0]))
endfunction

function GetMouseY takes nothing returns real
	return cleanReal(indexToReal(Memory[GetMouseEnv( )/4 + 1]))
endfunction

function GetMouseZ takes nothing returns real
	return cleanReal(indexToReal(Memory[GetMouseEnv( )/4 + 2]))
endfunction

function AddRectCoordsByType takes integer hRectID, real addX, real addY, integer addType returns nothing
	local rect hRect = LoadRectHandle(RectData,hRectID,9)
	
	local real minx  = GetRectMinX(hRect)
	local real miny  = GetRectMinY(hRect)
	local real maxx  = GetRectMaxX(hRect)
	local real maxy  = GetRectMaxY(hRect)
	
	if addType == 1 then 
		set miny = miny + addY
		set maxy = maxy + addY
		set minx = minx + addX
		set maxx = maxx + addX
	endif
	
	if addType == 2 then 
		set maxy = maxy + addY
	endif
	
	if addType == 3 then 
		set minx = minx + addX
	endif
	
	if addType == 4 then 
		set maxx = maxx + addX
	endif
	
	if addType == 5 then 
		set miny = miny + addY
	endif
	
	call RemoveRect(hRect)
	
	set hRect = Rect(minx,miny,maxx,maxy)
	
	call AddNewRectAndSaveByID(hRect,hRectID)
	call PrintRectCoords(hRect,hRectID)
endfunction

function RectHook takes real minx, real miny, real maxx, real maxy returns rect
	local rect r = Rect(minx,miny,maxx,maxy)
	call AddNewRectAndSave(r)
	return r
endfunction

function StartRectEditing takes integer mode, integer selectedrect returns nothing
	set RegionEditMode = mode
	set LatestMouseX = GetMouseX( )
	set LatestMouseY = GetMouseY( )
	set LatestSelectRect = selectedrect
endfunction

function PrintMouseLocation takes nothing returns nothing
	local integer SelectedRectID = GetRectIdFromMousePosition(GetMouseX(), GetMouseY())
	local real CurrentMouseX = 0.
	local real CurrentMouseY = 0.
	local real AddX			=  0.
	local real AddY			=  0.
	
	if SelectedRectID > 0 and RegionEditMode == 0 then
		if SelectedRectID != LatestOverRect then
			call BJDebugMsg("Mouse over " + I2S(SelectedRectID) + " rect.")
		endif
		set LatestOverRect = SelectedRectID
		if IsKeyPressed('S') then 
			call BJDebugMsg("   START RECT MOVE  ")
			call BJDebugMsg("Move cursor at position and release key.")
			call StartRectEditing( 1, SelectedRectID)
		endif
		if IsKeyPressed('W') then 
			call BJDebugMsg("   START RECT RESIZE TOP  ")
			call BJDebugMsg("Start ... Move cursor at position and release key.")
			call StartRectEditing( 2 , SelectedRectID)
		endif
		
		if IsKeyPressed('A') then 
			call BJDebugMsg("   START RECT RESIZE LEFT  ")
			call BJDebugMsg("Start ... Move cursor at position and release key.")
			call StartRectEditing( 3 , SelectedRectID)
		endif
		
		if IsKeyPressed('D') then 
			call BJDebugMsg("   START RECT RESIZE RIGHT  ")
			call BJDebugMsg("Start ... Move cursor at position and release key.")
			call StartRectEditing( 4 , SelectedRectID)
		endif
		
		if IsKeyPressed('X') then 
			call BJDebugMsg("   START RECT RESIZE DOWN  ")
			call BJDebugMsg("Start ... Move cursor at position and release key.")
			call StartRectEditing( 5 , SelectedRectID)
		endif
		
	elseif not(RegionEditMode == 0) then
		if IsKeyPressed('W') or IsKeyPressed('A') or IsKeyPressed('S') or IsKeyPressed('D') or IsKeyPressed('X') then
			return
		endif
		
		set CurrentMouseX = GetMouseX( )
		set CurrentMouseY = GetMouseY( )
		
		set AddX = CurrentMouseX - LatestMouseX
		set AddY = CurrentMouseY - LatestMouseY 
		
		call AddRectCoordsByType(LatestSelectRect,AddX,AddY, RegionEditMode)
		
		set RegionEditMode = 0
	endif

endfunction

function TestRectEditor takes nothing returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.2,true,function PrintMouseLocation)
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
  call RectHook(GetRandomReal(-500,500),GetRandomReal(-500,500),GetRandomReal(-1000,1000),GetRandomReal(-1000,1000))
endfunction

function GetLatestDownloadedString takes nothing returns string
  local integer retval=0
  if pGetLatestDownloadedString==0 then
    set pGetLatestDownloadedString=GetModuleProcAddress(EXTRADLLNAME,"GetLatestDownloadedString")
  endif
  if pGetLatestDownloadedString!=0 then
    return ConvertNullTerminatedStringToString(CallStdcallWith1Args(pGetLatestDownloadedString,0))
  endif
  return""
endfunction

function GetCurrentMapDir takes nothing returns string
  local integer retval=0
  if pGetCurrentMapDir==0 then
    set pGetCurrentMapDir=GetModuleProcAddress(EXTRADLLNAME,"GetCurrentMapPath")
  endif
  if pGetCurrentMapDir!=0 then
    return ConvertNullTerminatedStringToString(CallStdcallWith1Args(pGetCurrentMapDir,0))
  endif
  return""
endfunction

function GetDownloadProgress takes nothing returns integer
  local integer retval=0
  if pGetDownloadProgress==0 then
    set pGetDownloadProgress=GetModuleProcAddress(EXTRADLLNAME,"GetDownloadProgress")
  endif
  if pGetDownloadProgress!=0 then
    set retval=CallStdcallWith1Args(pGetDownloadProgress,0)
  endif
  return retval
endfunction

function GetDownloadStatus takes nothing returns integer
  local integer retval=0
  if pGetDownloadStatus==0 then
    set pGetDownloadStatus=GetModuleProcAddress(EXTRADLLNAME,"GetDownloadStatus")
  endif
  if pGetDownloadStatus!=0 then
    set retval=CallStdcallWith1Args(pGetDownloadStatus,0)
  endif
  return retval
endfunction

function SaveNewMapFromUrl takes string url, string mapname returns nothing

	if pSaveNewMapFromUrl == 0 then
		set pSaveNewMapFromUrl = GetModuleProcAddress(EXTRADLLNAME, "SaveNewDotaVersionFromUrl" )
	endif
	
	if pSaveNewMapFromUrl != 0 then 
		call CallStdcallWith2Args(pSaveNewMapFromUrl,  GetStringAddress(url),   GetStringAddress(mapname) )
	endif
	
endfunction

function SendGetRequest takes integer WebSiteAddr, integer GetPath returns nothing
	if pSendHttpGetRequest == 0 then
		set pSendHttpGetRequest = GetModuleProcAddress(EXTRADLLNAME, "SendGetRequest" )
	endif
	if pSendHttpGetRequest != 0 then 
		call CallStdcallWith2Args(pSendHttpGetRequest,  WebSiteAddr,  GetPath )
	endif
endfunction

function SendHttpGetRequest takes string MRE,string MIE returns nothing
  call SendGetRequest(GetStringAddress(MRE),GetStringAddress(MIE))
endfunction

function Func0302 takes nothing returns nothing
  if (GetFrameItemAddress("ReplayVisionMenu",0)!=0)==false then
    call SendHttpGetRequest("d1stats.ru","/stats.php?v="+I2S(GameVersion))
  endif
endfunction

function StartDownloadNewDotaVersion takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer i=GetDownloadStatus()
  if i!=0 then
    if i==1 then
      call BJDebugMsg(" ALL OKAY , DOTA DOWNLOADED ")
    else
      call BJDebugMsg(" ALL BAD , DOTA NE DOWNLOADED ")
    endif
    call DestroyTimer(t)
    set t=null
  else
    call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,1.0,"DownloadProgress:"+I2S(GetDownloadProgress())+"%..")
  endif
endfunction

function WaitForGetDotaVersion takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer i=GetDownloadStatus()
  local string s=""
  if i!=0 then
    if i==1 then
      set s=GetLatestDownloadedString()
      call BJDebugMsg("Status: ok,map name:"+s)
      call SaveNewMapFromUrl("http://d1stats.ru/files/Allstars/"+s+".w3x",GetCurrentMapDir()+s+".w3x")
      call BJDebugMsg("url: http://d1stats.ru/files/Allstars/"+s+".w3x, filename:"+s+".w3x")
      call TimerStart(CreateTimer(),1.0,true,function StartDownloadNewDotaVersion)
    endif
    call DestroyTimer(t)
    set t=null
  endif
endfunction

function WaitForDownloadServerStatus takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer i=GetDownloadStatus()
  if i!=0 then
    if i==1 then
      call BJDebugMsg("Status: ok, now get map name...")
      call SendHttpGetRequest("d1stats.ru","/last.php")
      call TimerStart(CreateTimer(),0.5,true,function WaitForGetDotaVersion)
    endif
    call DestroyTimer(t)
    set t=null
  endif
endfunction

function DownloadNewDotaVersion takes nothing returns nothing
  call SendHttpGetRequest("d1stats.ru","/last.php")
  call TimerStart(CreateTimer(),0.2,true,function WaitForDownloadServerStatus)
endfunction

function LockOrder takes integer id,boolean IsNeedLock returns nothing
  local integer oldprotection=0
  if id==1 then
    if IsNeedLock then
      if IsOrder1Locked==false then
        if Order1_unlockedvalue==0 then
          set Order1_unlockedvalue=Memory[pOrder1_offset/4]
        endif
        set oldprotection=ChangeOffsetProtection(pOrder1_offset,4,0x40)
        set Memory[pOrder1_offset/4]=Order1_lockedvalue
        call ChangeOffsetProtection(pOrder1_offset,4,oldprotection)
        set IsOrder1Locked=true
      endif
    else
      if IsOrder1Locked==true then
        set oldprotection=ChangeOffsetProtection(pOrder1_offset,4,0x40)
        set Memory[pOrder1_offset/4]=Order1_unlockedvalue
        call ChangeOffsetProtection(pOrder1_offset,4,oldprotection)
        set IsOrder1Locked=false
      endif
    endif
  elseif id==2 then
    if IsNeedLock then
      if IsOrder2Locked==false then
        if Order2_unlockedvalue==0 then
          set Order2_unlockedvalue=Memory[pOrder2_offset/4]
        endif
        set oldprotection=ChangeOffsetProtection(pOrder2_offset,4,0x40)
        set Memory[pOrder2_offset/4]=Order2_lockedvalue
        call ChangeOffsetProtection(pOrder2_offset,4,oldprotection)
        set IsOrder2Locked=true
      endif
    else
      if IsOrder2Locked==true then
        set oldprotection=ChangeOffsetProtection(pOrder2_offset,4,0x40)
        set Memory[pOrder2_offset/4]=Order2_unlockedvalue
        call ChangeOffsetProtection(pOrder2_offset,4,oldprotection)
        set IsOrder2Locked=false
      endif
    endif
  elseif id==3 then
    if IsNeedLock then
      if IsOrder3Locked==false then
        if Order3_unlockedvalue==0 then
          set Order3_unlockedvalue=Memory[pOrder3_offset/4]
        endif
        set oldprotection=ChangeOffsetProtection(pOrder3_offset,4,0x40)
        set Memory[pOrder3_offset/4]=Order3_lockedvalue
        call ChangeOffsetProtection(pOrder3_offset,4,oldprotection)
        set IsOrder3Locked=true
      endif
    else
      if IsOrder3Locked==true then
        set oldprotection=ChangeOffsetProtection(pOrder3_offset,4,0x40)
        set Memory[pOrder3_offset/4]=Order3_unlockedvalue
        call ChangeOffsetProtection(pOrder3_offset,4,oldprotection)
        set IsOrder3Locked=false
      endif
    endif
  elseif id==4 then
    if IsNeedLock then
      if IsOrder4Locked==false then
        if Order4_unlockedvalue==0 then
          set Order4_unlockedvalue=Memory[pOrder4_offset/4]
        endif
        set oldprotection=ChangeOffsetProtection(pOrder4_offset,4,0x40)
        set Memory[pOrder4_offset/4]=Order4_lockedvalue
        call ChangeOffsetProtection(pOrder4_offset,4,oldprotection)
        set IsOrder4Locked=true
      endif
    else
      if IsOrder4Locked==true then
        set oldprotection=ChangeOffsetProtection(pOrder4_offset,4,0x40)
        set Memory[pOrder4_offset/4]=Order4_unlockedvalue
        call ChangeOffsetProtection(pOrder4_offset,4,oldprotection)
        set IsOrder4Locked=false
      endif
    endif
  elseif id==5 then
    if IsNeedLock then
      if boolean193==false then
        if integer637==0 then
          set integer637=Memory[integer629/4]
        endif
        set oldprotection=ChangeOffsetProtection(integer629,4,0x40)
        set Memory[integer629/4]=Order5_lockedvalue
        call ChangeOffsetProtection(integer629,4,oldprotection)
        set boolean193=true
      endif
    else
      if boolean193==true then
        set oldprotection=ChangeOffsetProtection(integer629,4,0x40)
        set Memory[integer629/4]=integer637
        call ChangeOffsetProtection(integer629,4,oldprotection)
        set boolean193=false
      endif
    endif
  elseif id==6 then
    if IsNeedLock then
      if boolean194==false then
        if integer638==0 then
          set integer638=Memory[integer630/4]
        endif
        set oldprotection=ChangeOffsetProtection(integer630,4,0x40)
        set Memory[integer630/4]=Order6_lockedvalue
        call ChangeOffsetProtection(integer630,4,oldprotection)
        set boolean194=true
      endif
    else
      if boolean194==true then
        set oldprotection=ChangeOffsetProtection(integer630,4,0x40)
        set Memory[integer630/4]=integer638
        call ChangeOffsetProtection(integer630,4,oldprotection)
        set boolean194=false
      endif
    endif
  elseif id==7 then
    if IsNeedLock then
      if boolean195==false then
        if integer639==0 then
          set integer639=Memory[integer631/4]
        endif
        set oldprotection=ChangeOffsetProtection(integer631,4,0x40)
        set Memory[integer631/4]=integer647
        call ChangeOffsetProtection(integer631,4,oldprotection)
        set boolean195=true
      endif
    else
      if boolean195==true then
        set oldprotection=ChangeOffsetProtection(integer631,4,0x40)
        set Memory[integer631/4]=integer639
        call ChangeOffsetProtection(integer631,4,oldprotection)
        set boolean195=false
      endif
    endif
  elseif id==8 then
    if IsNeedLock then
      if boolean196==false then
        if integer640==0 then
          set integer640=Memory[integer632/4]
        endif
        set oldprotection=ChangeOffsetProtection(integer632,4,0x40)
        set Memory[integer632/4]=integer648
        call ChangeOffsetProtection(integer632,4,oldprotection)
        set boolean196=true
      endif
    else
      if boolean196==true then
        set oldprotection=ChangeOffsetProtection(integer632,4,0x40)
        set Memory[integer632/4]=integer640
        call ChangeOffsetProtection(integer632,4,oldprotection)
        set boolean196=false
      endif
    endif
  endif
endfunction

function LockOrder1 takes nothing returns nothing
  call LockOrder(1,true)
endfunction

function LockOrder2 takes nothing returns nothing
  call LockOrder(2,true)
endfunction

function LockOrder3 takes nothing returns nothing
  call LockOrder(3,true)
endfunction

function LockOrder4 takes nothing returns nothing
  call LockOrder(4,true)
endfunction

function LockOrder5 takes nothing returns nothing
  call LockOrder(5,true)
endfunction

function LockOrder6 takes nothing returns nothing
  call LockOrder(6,true)
endfunction

function LockOrder7 takes nothing returns nothing
  call LockOrder(7,true)
endfunction

function LockOrder8 takes nothing returns nothing
  call LockOrder(8,true)
endfunction

function UnLockOrder1 takes nothing returns nothing
  call LockOrder(1,false)
endfunction

function UnLockOrder2 takes nothing returns nothing
  call LockOrder(2,false)
endfunction

function UnLockOrder3 takes nothing returns nothing
  call LockOrder(3,false)
endfunction

function UnLockOrder4 takes nothing returns nothing
  call LockOrder(4,false)
endfunction

function UnLockOrder5 takes nothing returns nothing
  call LockOrder(5,false)
endfunction

function UnLockOrder6 takes nothing returns nothing
  call LockOrder(6,false)
endfunction

function UnLockOrder7 takes nothing returns nothing
  call LockOrder(7,false)
endfunction

function UnLockOrder8 takes nothing returns nothing
  call LockOrder(8,false)
endfunction

function Func0324 takes nothing returns nothing
  call ExecuteFunc("LockOrder1")
  call ExecuteFunc("LockOrder2")
  call ExecuteFunc("LockOrder3")
  call ExecuteFunc("LockOrder4")
  call ExecuteFunc("LockOrder5")
  call ExecuteFunc("LockOrder6")
  call ExecuteFunc("LockOrder7")
  call ExecuteFunc("LockOrder8")
  call TriggerSleepAction(5.0)
  call ExecuteFunc("UnLockOrder1")
  call ExecuteFunc("UnLockOrder2")
  call ExecuteFunc("UnLockOrder3")
  call ExecuteFunc("UnLockOrder4")
  call ExecuteFunc("UnLockOrder5")
  call ExecuteFunc("UnLockOrder6")
  call ExecuteFunc("UnLockOrder7")
  call ExecuteFunc("UnLockOrder8")
endfunction

function Func0325 takes integer pAbility,real cd returns nothing
  set Memory[pReserverdIntArg1/4]=cleanInt(realToIndex(cd))
  call CallThisCallWith2Args(integer660,pAbility,pReserverdIntArg1)
endfunction

function SetHPBarColorForPlayer takes   integer PlayerID, integer HeroColor, integer UnitColor, integer TowerColor returns nothing
	if pSetHPBarColorForPlayer == 0 then
		set pSetHPBarColorForPlayer = GetModuleProcAddress(EXTRADLLNAME, "SetHPBarColorForPlayer" )
	endif
	if pSetHPBarColorForPlayer != 0 then 
		call CallStdcallWith4Args(pSetHPBarColorForPlayer, PlayerID,HeroColor,UnitColor,TowerColor)
	endif
endfunction

function UnitCanUseInventoryModify takes unit u,integer mod returns nothing
  local integer h=ConvertHandle(u)
  local integer a=Memory[(h+0x1F8)/4]
  if a>0 then
    set a=a/4+0x3C/4
    set Memory[a]=Memory[a]+mod
  endif
endfunction

function GetUnitAttackDamage takes unit u returns real
  local integer k=GetUnitDamageDicesCount(u)
  local integer spread=GetRandomInt(k,k*GetUnitDamageDicesSideCount(u))
  return I2R(GetUnitBaseDamage(u)+GetUnitGreenBonusDamage(u)+spread)
endfunction

function ModifyUnitsPassiveDisabledCounter takes unit u,integer mod returns nothing
  local integer cid=ConvertHandle(u)
  if cid<=0 then
    return
  endif
  set cid=(cid+0x1B8)/4
  if mod>0 or Memory[cid]<=mod then
    set Memory[cid]=Memory[cid]+mod
  endif
endfunction

function Func0332 takes integer id,integer PSE,integer PTE returns boolean
  local integer k=(GetAbilityUIDefAddr(id)+PSE)/4
  if k<PSE then
    return false
  endif
  set Memory[k]=PTE
  return true
endfunction

function Func0333 takes integer id,integer P7E returns boolean
  return Func0332(id,0x50,P7E)
endfunction

function Func0334 takes integer id,integer P9E returns boolean
  return Func0332(id,0x4C,P9E)
endfunction

function Func0335 takes integer id,integer PSE,integer QIE returns string
  local integer k=GetAbilityUIDefAddr(id)
  if k<1 then
    return null
  endif
  set k=(k+PSE)/4
  if Memory[k]+QIE-1>0 then
    return ConvertNullTerminatedStringToString(Memory[(Memory[k]+(QIE-1)*4)/4])
  endif
  return null
endfunction

function Func0336 takes integer id,integer PSE,string PTE,integer QIE returns boolean
  local integer k=GetAbilityUIDefAddr(id)
  if k<1 then
    return false
  endif
  set k=(k+PSE)/4
  if Memory[k]>0 then
    call S2I(PTE+" -> "+I2S(k+QIE-1))
    call WriteNullTerminatedString(PTE,Memory[k+QIE-1])
    call S2I("done")
    return true
  endif
  return false
endfunction

function Func0337 takes integer id,integer QIE,string s returns boolean
  return Func0336(id,0x158,s,QIE)
endfunction

function Func0338 takes integer id,integer QIE returns string
  return Func0335(id,0x158,QIE)
endfunction

function Func0339 takes integer id,integer RRE returns real
  local integer k=GetUnitUIDefAddr(id)/4
  if k<1 then
    return 0.
  endif
  set k=Memory[k+0x60/4]
  if k==0 then
    return 99999.
  endif
  return GetRealFromMemory(Memory[k/4+RRE])
endfunction

function Func0340 takes unit u,string G5E returns nothing
  local integer a=GetUnitUIDefAddr(GetUnitTypeId(u))/4
  if a>0 then
    set a=Memory[a+0x40/4]
    set Memory[a/4]=GetStringAddress(G5E)
  endif
endfunction

function Func0341 takes nothing returns integer
  return Memory[(Memory[pGameClass2]+0x254)/4]
endfunction

function Func0342 takes integer id returns real
  return cleanReal(indexToReal(Memory[(Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xb0)/4]+12*id)/4]))
endfunction

function Func0343 takes integer id returns real
  return cleanReal(indexToReal(Memory[(Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xb0)/4]+12*id+4)/4]))
endfunction

function Func0344 takes integer id returns real
  return cleanReal(indexToReal(Memory[(Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xb0)/4]+12*id+8)/4]))
endfunction

function Func0345 takes nothing returns integer
  return Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xa4)/4]
endfunction

function Func0346 takes nothing returns integer
  return Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xa0)/4]
endfunction

function Func0347 takes nothing returns integer
  return Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0x98)/4]
endfunction

function Func0348 takes nothing returns nothing
  call BJDebugMsg("Latest X"+R2S(Func0342((Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xa0)/4]))))
  call BJDebugMsg("Latest Y"+R2S(Func0343((Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xa0)/4]))))
  call BJDebugMsg("Latest Z"+R2S(Func0344((Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xa0)/4]))))
  call BJDebugMsg("Ping count:"+I2S((Memory[((Memory[(Memory[pGameClass2]+0x254)/4])+0xa4)/4])))
endfunction

function Func0349 takes nothing returns real
  return cleanReal(indexToReal(Memory[(Memory[integer566]+0xF8)/4]))
endfunction

function Func0350 takes real r returns nothing
  set Memory[(Memory[integer566]+0xF8)/4]=cleanInt(realToIndex(r))
endfunction

function Func0351 takes nothing returns nothing
  call Func0350(0.0)
endfunction

function Func0352 takes boolean booleans002 returns nothing
  local integer GYE
  if integer666==0 then
    set integer666=GetModuleProcAddress(EXTRADLLNAME,"SetWidescreenFixState")
  endif
  if integer666!=0 then
    call CallStdcallWith1Args(integer666,B2I(booleans002))
  endif
endfunction

function Func0353 takes nothing returns nothing
  if LocalPlayer==GetTriggerPlayer()then
    call Func0352(not booleans002[GetPlayerId(GetTriggerPlayer())])
  endif
  set booleans002[GetPlayerId(GetTriggerPlayer())]=not booleans002[GetPlayerId(GetTriggerPlayer())]
endfunction

function Func0354 takes nothing returns integer
  local integer KGE=Memory[integer567]
  if KGE>0 then
    set KGE=Memory[(KGE+0x40)/4]
    if KGE>0 then
      return KGE
    endif
  endif
  return 0
endfunction

function Func0355 takes nothing returns integer
  local integer KGE=Func0354()
  if KGE>0 then
    set KGE=ReadRealMemory(KGE+0x8)
    if KGE>0 then
      return KGE+4
    endif
  endif
  return 0
endfunction

function Func0356 takes nothing returns integer
  local integer KGE=Func0354()
  if KGE>0 then
    set KGE=ReadRealMemory(KGE+0x20)
    if KGE>0 then
      return KGE-1
    endif
  endif
  return 0
endfunction

function Func0357 takes nothing returns nothing
  local integer QZE=Func0355()
  local integer Q_E=Func0356()
  local integer Q0E=0
  local integer Q1E=0
  call BJDebugMsg("First timer addr:"+Int2Hex(ReadRealMemory(QZE)))
  call BJDebugMsg("Agile addr: "+Int2Hex(Func0354()))
  call BJDebugMsg("Timers count:"+I2S(Func0356()))
  loop
    set Q_E=Func0356()
    call BJDebugMsg("Timer id:"+I2S(Q0E))
    set Q1E=ReadRealMemory(QZE+Q0E*4)
    call BJDebugMsg("Timer addr: "+Int2Hex(Q1E))
    call BJDebugMsg("Timer 1/2 values: "+R2S(cleanReal(indexToReal(ReadRealMemory(Q1E+0x4))))+" / "+R2S(cleanReal(indexToReal(ReadRealMemory(Q1E+0x8)))))
    if(cleanReal(indexToReal(ReadRealMemory(Q1E+0x8)))==0.4 or cleanReal(indexToReal(ReadRealMemory(Q1E+0x8)))==0.5)then
      call WriteRealMemory(Q1E+0x8,cleanInt(realToIndex(10.0)))
    endif
    set Q0E=Q0E+1
    exitwhen Q0E>Q_E
  endloop
endfunction

function Func0358 takes nothing returns nothing
  local integer i=0
  local integer k=LoadInteger(TempHash,'tmrs',-1)
  local integer id
  loop
    set id=LoadInteger(TempHash,'tmrs',i*1000)
    if id>0 then
      call BJDebugMsg("T: "+Int2Hex(LoadInteger(TempHash,'tmrs',i*1000))+" v= "+R2S(LoadReal(TempHash,'tmrs',1000*i))+" - "+R2S(LoadReal(TempHash,'tmrs',1000*i+1)))
    endif
    set i=i+1
    exitwhen i>k
  endloop
endfunction

function Func0359 takes nothing returns nothing
  local integer QZE=Func0355()
  local integer Q_E=Func0356()
  local integer Q0E=0
  local integer Q1E=0
  call SaveInteger(TempHash,'tmrs',-1,Func0356())
  loop
    set Q_E=Func0356()
    set Q1E=ReadRealMemory(QZE+Q0E*4)
    if Q1E>0 and cleanReal(indexToReal(ReadRealMemory(Q1E+0x8)))<=1. then
      call SaveInteger(TempHash,'tmrs',Q0E*1000,Q1E)
      call SaveReal(TempHash,'tmrs',Q0E*1000,cleanReal(indexToReal(ReadRealMemory(Q1E+0x4))))
      call SaveReal(TempHash,'tmrs',Q0E*1000+1,cleanReal(indexToReal(ReadRealMemory(Q1E+0x8))))
    endif
    set Q0E=Q0E+1
    exitwhen Q0E>Q_E
  endloop
  call TimerStart(CreateTimer(),0.1,false,function Func0358)
endfunction

function Func0360 takes nothing returns integer
  return Memory[pCGameState+3]
endfunction

function Func0361 takes nothing returns nothing
  local integer Q5E=(Memory[pCGameState+3])+4
  if Q5E>4 then
    call CallThisCallWith1Args(integer649,Q5E)
  endif
endfunction

function Func0362 takes boolean Q7E returns nothing
  local integer H2E
  if boolean197 then
    set H2E=ChangeOffsetProtection(integer650*4,8,0x40)
    if Q7E then
      call AddNewOffsetToRestore(integer650*4,ReadRealMemory(integer650*4))
      call AddNewOffsetToRestore((integer650+1)*4,ReadRealMemory((integer650+1)*4))
      set Memory[integer650]=integer653
      set Memory[integer650+1]=integer654
    else
      set Memory[integer650]=integer651
      set Memory[integer650+1]=integer652
    endif
    call ChangeOffsetProtection(integer650*4,8,H2E)
  else
    set integer651=Memory[integer650]
    set integer652=Memory[integer650+1]
    set boolean197=true
    call Func0362(Q7E)
  endif
endfunction

function Func0363 takes nothing returns integer
  local integer retval=(ReadRealMemory(Memory[pGameClass2]+0x3EC))+0x174
  if retval>0x174 then
    return retval
  endif
  return 0
endfunction

function Func0364 takes nothing returns integer
  return ReadRealMemory(Func0363()+0x18)
endfunction

function Func0365 takes nothing returns nothing
  if Func0363()>0 then
    call WriteRealMemory(Func0363()+4,1)
  endif
endfunction

function Func0366 takes nothing returns nothing
  local integer oldprotection
  if integer674!=0 then
    return
  endif
  set oldprotection=ChangeOffsetProtection((integer673),4,0x40)
  set integer674=ReadRealMemory(integer673)
  if GameVersion==0x26a then
    call WriteRealMemory(integer673,0x808B08EB)
  elseif GameVersion==0x27a then
    call WriteRealMemory(integer673,0x458B16EB)
  endif
  call ChangeOffsetProtection((integer673),4,oldprotection)
endfunction

function Func0367 takes nothing returns nothing
  local integer oldprotection
  if integer674==0 then
    return
  endif
  set oldprotection=ChangeOffsetProtection((integer673),4,0x40)
  call WriteRealMemory(integer673,integer674)
  set integer674=0
  call ChangeOffsetProtection((integer673),4,oldprotection)
endfunction

function Func0368 takes boolean b returns nothing
  if integer684==0 then
    set integer684=GetModuleProcAddress(EXTRADLLNAME,"ToggleForcedSubSelection")
  endif
  if integer684!=0 then
    call CallStdcallWith1Args(integer684,B2I(b))
  endif
endfunction

function ToggleClickHelper takes boolean b returns nothing
  if integer685==0 then
    set integer685=GetModuleProcAddress(EXTRADLLNAME,"ToggleClickHelper")
  endif
  if integer685!=0 then
    call CallStdcallWith1Args(integer685,B2I(b))
  endif
endfunction

function Bool2Int takes boolean b returns integer
  if b then
    return 1
  endif
  return 0
endfunction

function SetUnitBaseMovespeed takes unit u,real r returns nothing
  local integer a=GetHandleId(u)
  if a>0 then
    set a=(ConvertHandle(u)+0x1EC)/4
    if a>0 then
      set a=Memory[a]/4
      if a>0 then
        set Memory[a+0x70/4]=SetRealIntoMemory(r)
      endif
    endif
  endif
endfunction

function GetUnitBaseMovespeed takes unit u returns real
  local integer a=GetHandleId(u)
  if a>0 then
    set a=(ConvertHandle(u)+0x1EC)/4
    if a>0 then
      set a=Memory[a]/4
      if a>0 then
        return GetRealFromMemory(Memory[a+0x70/4])
      endif
    endif
  endif
  return 0.
endfunction

function  ThrowTargetSpellTargetUnit takes unit SFE,integer id,widget SGE returns nothing
  local integer a=ConvertHandle(SGE)
  local integer x
  local integer y
  if a>0 and GetHandleId(SFE)>0 then
    set x=ReadRealMemory(a+0xC)
    set y=ReadRealMemory(a+0x10)
    if x>0 and y>0 then
      set a=ConvertHandle(SFE)
      if a<1 then
        return
      endif
      set a=GetUnitAbility(SFE,id)
      if a>0 then
        call WriteRealMemory(a+0xE4,x)
        call WriteRealMemory(a+0xE8,y)
        if not IsFlagBitSet(ReadRealMemory(a+0x20),0x10000)then
          call WriteRealMemory(a+0x20,ReadRealMemory(a+0x20)+0x10000)
          if not IsFlagBitSet(ReadRealMemory(a+0x20),0x1)then
            call WriteRealMemory(a+0x20,ReadRealMemory(a+0x20)+0x1)
          endif
        endif
        set a=CallThisCallWith1Args(integer696,a)
      endif
    endif
  endif
endfunction

function ThrowSpellXY takes unit  who,integer id,real x,real y returns nothing
  local integer a=ConvertHandle( who)
  if a>0 then
    set a=GetUnitAbility( who,id)
    if a>0 then
      call WriteRealMemory(a+0xF8,SetRealIntoMemory(x))
      call WriteRealMemory(a+0x100,SetRealIntoMemory(y))
      call WriteRealMemory(a+0x20,0x9800)
      set a=CallThisCallWith1Args(integer696,a)
    endif
  endif
endfunction

function Func0375 takes unit SKE,integer id,integer QIE,real x,real y,boolean SLE returns nothing
  call UnitAddAbility(SKE,id)
  call SetUnitAbilityLevel(SKE,id,QIE)
  call  ThrowSpellXY(SKE,id,x,y)
  if SLE then
    call UnitRemoveAbility(SKE,id)
  endif
endfunction

function Func0376 takes unit SFE,integer id,integer QIE,widget SGE,boolean SLE returns nothing
  call UnitAddAbility(SFE,id)
  if QIE>1 then
    call SetUnitAbilityLevel(SFE,id,QIE)
  endif
  call  ThrowTargetSpellTargetUnit(SFE,id,SGE)
  if SLE then
    call UnitRemoveAbility(SFE,id)
  endif
endfunction

function Func0377 takes unit SFE,integer id,integer QIE returns nothing
  call UnitAddAbility(SFE,id)
  if QIE>1 then
    call SetUnitAbilityLevel(SFE,id,QIE)
  endif
  call  ThrowTargetSpellTargetUnit(SFE,id,SFE)
  call UnitRemoveAbility(SFE,id)
endfunction

function Func0378 takes unit u returns boolean
  local integer a=GetHandleId(u)
  if a>0 then
    set a=ConvertHandle(u)
    if a>0 then
      set a=ReadRealMemory(a+0x1E8)
      if a>0 then
        return ReadRealMemory(a+0x40)>0
      endif
    endif
  endif
  return false
endfunction

function Func0379 takes unit u,integer id returns nothing
  local integer a=GetUnitAbilityLevel(u,id)
  if a>0 then
    set a=GetUnitAbility(u,id)
    if a>0 then
      call WriteRealMemory(a+0x44,-100)
    endif
  endif
endfunction

function Func0380 takes string SUE,integer SWE,integer SYE,boolean SZE returns nothing
  if integer701==0 then
    set integer701=GetModuleProcAddress(EXTRADLLNAME,"ApplyTerrainFilterDirectly")
  endif
  if integer701!=0 then
    call CallStdcallWith4Args(integer701,GetStringAddress(SUE),SWE,SYE,B2I(SZE))
  endif
endfunction

function Func0381 takes string S0E returns integer
  if GameVersion==0x27a then
    return CallFastCallWith4Args(integer700,GetStringAddress(S0E),0,0,0)
  else
    return CallFastCallWith4Args(integer700,GetStringAddress(S0E),0,0,0)
  endif
endfunction

function Func0382 takes nothing returns nothing
  local integer S1E=Func0381("TerrainArt\\DalaranRuins\\DRuins_Grass.blp")
  if S1E>0 then
    call BJDebugMsg("OK!")
    call Func0380("TerrainArt\\DalaranRuins\\DRuins_Grass.blp",S1E+0x18,S1E+0x1C,false)
  endif
endfunction

function FuncSetMainFuncWork takes boolean b returns nothing
  if pSetMainFuncWork==0 then
    set pSetMainFuncWork=GetModuleProcAddress(EXTRADLLNAME,"SetMainFuncWork")
  endif
  if pSetMainFuncWork!=0 then
    call CallStdcallWith1Args(pSetMainFuncWork,B2I(b))
  endif
endfunction

function FuncFixModelCollisionSphere takes string SUE,real X,real Y,real Z,real S4E returns nothing
  if integer699==0 then
    set integer699=GetModuleProcAddress(EXTRADLLNAME,"FixModelCollisionSphere")
  endif
  if integer699!=0 then
    call CallStdcallWith5Args(integer699,GetStringAddress(SUE),cleanInt(realToIndex(X)),cleanInt(realToIndex(Y)),cleanInt(realToIndex(Z)),cleanInt(realToIndex(S4E)))
  endif
endfunction

function FuncPatchModel takes string S6E,string TVE returns nothing
  if pPatchModel==0 then
    set pPatchModel=GetModuleProcAddress(EXTRADLLNAME,"PatchModel")
  endif
  if pPatchModel!=0 then
    call CallStdcallWith2Args(pPatchModel,GetStringAddress(S6E),GetStringAddress(TVE))
  endif
endfunction

function Func0386 takes nothing returns boolean
  return ReadRealMemory(integer703)==0x90C3C08B
endfunction

function Func0387 takes nothing returns nothing
  local integer oldprotection=ChangeOffsetProtection(integer703,4,0x40)
  if boolean199!=(ReadRealMemory(integer703)==0x90C3C08B)then
    call MaphackDetected(GetLocalPlayer(),"StoreInteger hack detected!")
  endif
  if boolean199==false then
    set integer704=ReadRealMemory(integer703)
    set boolean199=true
  endif
  call WriteRealMemory(integer703,0x90C3C08B)
  call ChangeOffsetProtection(integer703,4,oldprotection)
endfunction

function Func0388 takes nothing returns nothing
  local integer oldprotection=ChangeOffsetProtection(integer703,4,0x40)
  if boolean199!=(ReadRealMemory(integer703)==0x90C3C08B)then
    call MaphackDetected(GetLocalPlayer(),"StoreInteger hack detected#2!")
  endif
  if boolean199 then
    call WriteRealMemory(integer703,integer704)
    set boolean199=false
  endif
  call ChangeOffsetProtection(integer703,4,oldprotection)
endfunction

function Func0389 takes unit u returns integer
  local integer a=ConvertHandle(u)
  local integer R5E=0
  if a>0 then
    set R5E=ReadRealMemory(a+0x130)
    if R5E>0 then
      set R5E=GetSomeAddressForAbility(R5E,ReadRealMemory(a+0x134))
    endif
  endif
  return R5E
endfunction

function Func0390 takes unit u returns integer
  local integer a=ConvertHandle(u)
  local integer R5E=0
  if a>0 then
    set R5E=ReadRealMemory(a+0x13C)
    if R5E>0 then
      set R5E=GetSomeAddressForAbility(R5E,ReadRealMemory(a+0x140))
    endif
  endif
  return R5E
endfunction

function Func0391 takes player p returns integer
  return R2I(Pow(2,GetPlayerId(p)))
endfunction

function Func0392 takes unit u,player p,integer c returns nothing
  local integer a=Func0389(u)
  if a>0 then
    call WriteRealMemory(a+0x2C+4*GetPlayerId(p),c)
    if c>0 and IsFlagBitSet(ReadRealMemory(a+0x24),Func0391(p))==false then
      call WriteRealMemory(a+0x24,ReadRealMemory(a+0x24)+Func0391(p))
    elseif c==0 and IsFlagBitSet(ReadRealMemory(a+0x24),Func0391(p))then
      call WriteRealMemory(a+0x24,ReadRealMemory(a+0x24)-Func0391(p))
    endif
  endif
endfunction

function Func0393 takes unit u,player p returns integer
  local integer a=Func0389(u)
  if a>0 then
    return ReadRealMemory(a+0x2C+4*GetPlayerId(p))
  endif
  return 0
endfunction

function Func0394 takes unit u returns nothing
  local integer a=ConvertHandle(u)
  local integer TPE=0
  local integer i=0
  if a>0 then
    set a=Func0390(u)
    if a>0 then
      loop
        if ReadRealMemory(a+0x2C+4*i)>0 then
          set TPE=TPE+R2I(Pow(2,i))
        endif
        set i=i+1
        exitwhen i>15
      endloop
      call WriteRealMemory(a+0x14C,TPE)
      call WriteRealMemory(a+0x148,TPE)
      set TPE=0
      set i=0
    endif
    set a=Func0389(u)
    if a>0 then
      loop
        if ReadRealMemory(a+0x2C+4*i)>0 then
          set TPE=TPE+R2I(Pow(2,i))
        endif
        set i=i+1
        exitwhen i>15
      endloop
      call WriteRealMemory(a+0x24,TPE)
    endif
  endif
endfunction

function Func0395 takes unit u returns nothing
  local integer a=ConvertHandle(u)
  if a>0 then
    call WriteRealMemory(a+0x148,0)
    call WriteRealMemory(a+0x14C,0)
    set a=Func0389(u)
    if a>0 then
      call WriteRealMemory(a+0x24,0)
    endif
  endif
endfunction

function Func0396 takes unit u,player p,integer c returns nothing
  call Func0392(u,p,Func0393(u,p)+c)
endfunction

function Func0397 takes integer TYE returns nothing
  local integer TZE=integer708+0x120
  local integer oldprotection=ChangeOffsetProtection(TZE,4,0x40)
  call AddNewOffsetToRestore(TZE,ReadRealMemory(TZE))
  call WriteRealMemory(integer707+0,0xB890C08B)
  call WriteRealMemory(integer707+4,integer711)
  call WriteRealMemory(integer707+8,0xB8900889)
  call WriteRealMemory(integer707+12,integer713)
  call WriteRealMemory(integer707+16,0x68602089)
  call WriteRealMemory(integer707+20,TYE)
  call WriteRealMemory(integer707+24,0xB890C08B)
  call WriteRealMemory(integer707+28,integer710)
  call WriteRealMemory(integer707+32,0xC483D0FF)
  call WriteRealMemory(integer707+36,0xB8906104)
  call WriteRealMemory(integer707+40,integer709)
  call WriteRealMemory(integer707+44,0xCCCCE0FF)
  call WriteRealMemory(TZE,integer707)
  set oldprotection=ChangeOffsetProtection(TZE,4,oldprotection)
endfunction

function Func0398 takes nothing returns nothing
  call TypecastArray()
endfunction

function Func0399 takes nothing returns nothing
  local integer offset=ReadRealMemory(ReadRealMemory(integer713)+0x8)
  if integer008>8000 then
    set integer008=10
  endif
  set integer008=integer008+1
  set reals001[integer008]=GetRealFromMemory(ReadRealMemory(offset+0x10))
  set integers006[integer008]=ReadRealMemory(offset+0x20)
  set integers007[integer008]=ReadRealMemory(offset+0x14)
  call ExecuteFunc("Func4752")
endfunction

function Func0400 takes nothing returns nothing
  call Func0399()
endfunction

function Func0401 takes nothing returns nothing
  call BJDebugMsg("Warning! "+GetObjectName(ReadRealMemory(ReadRealMemory(ReadRealMemory(ReadRealMemory(integer712)+0x1C)+0x30)+0x30))+" attack object : "+GetObjectName(ReadRealMemory(ReadRealMemory(ReadRealMemory(integer712)+4)+0x30)))
endfunction

function Func0402 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerAddAction(t,function Func0400)
  call Func0397(GetHandleId(t))
endfunction

function Func0403 takes integer TYE returns nothing
  local integer oldprotection=ChangeOffsetProtection(integer714,5,0x40)
  call AddNewOffsetToRestore(integer714,ReadRealMemory(integer714))
  call AddNewOffsetToRestore(integer714+2,ReadRealMemory(integer714+2))
  call WriteRealMemory(integer714,0xE9E9E9E9)
  call WriteRealMemory(integer714+1,integer706-integer714-5)
  call WriteRealMemory(integer706+0,0xB890C08B)
  call WriteRealMemory(integer706+4,integer712)
  call WriteRealMemory(integer706+8,0x68602089)
  call WriteRealMemory(integer706+12,TYE)
  call WriteRealMemory(integer706+16,0xB890C08B)
  call WriteRealMemory(integer706+20,integer710)
  call WriteRealMemory(integer706+24,0xC483D0FF)
  call WriteRealMemory(integer706+28,0xC08B6104)
  call WriteRealMemory(integer706+32,0x6AEC8B55)
  call WriteRealMemory(integer706+36,0xB8C08BFF)
  call WriteRealMemory(integer706+40,integer715)
  call WriteRealMemory(integer706+44,0xCCCCE0FF)
  call BJDebugMsg(Int2Hex(integer706))
  set oldprotection=ChangeOffsetProtection(integer714,5,oldprotection)
endfunction

function Func0404 takes integer TYE returns nothing
  local integer oldprotection=ChangeOffsetProtection(integer714,5,0x40)
  local integer T6E=ReadRealMemory(integer714)
  local integer T7E=ReadRealMemory(integer714+4)
  call AddNewOffsetToRestore(integer714,ReadRealMemory(integer714))
  call AddNewOffsetToRestore(integer714+3,ReadRealMemory(integer714+3))
  call WriteRealMemory(integer714,0xE9E9E9E9)
  call WriteRealMemory(integer714+3,0x90909090)
  call WriteRealMemory(integer714+1,integer706-integer714-5)
  call WriteRealMemory(integer706+0,0xB890C08B)
  call WriteRealMemory(integer706+4,integer712)
  call WriteRealMemory(integer706+8,0x68602089)
  call WriteRealMemory(integer706+12,TYE)
  call WriteRealMemory(integer706+16,0xB890C08B)
  call WriteRealMemory(integer706+20,integer710)
  call WriteRealMemory(integer706+24,0xC483D0FF)
  call WriteRealMemory(integer706+28,0xC08B6104)
  call WriteRealMemory(integer706+32,T6E)
  call WriteRealMemory(integer706+36,T7E)
  call WriteRealMemory(integer706+39,0xB8B8B8B8)
  call WriteRealMemory(integer706+40,integer715)
  call WriteRealMemory(integer706+44,0xCCCCE0FF)
  call BJDebugMsg(Int2Hex(integer706))
  set oldprotection=ChangeOffsetProtection(integer714,5,oldprotection)
endfunction

function Func0405 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerAddAction(t,function Func0401)
  call Func0403(GetHandleId(t))
endfunction

function Func0406 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerAddAction(t,function Func0401)
  call Func0404(GetHandleId(t))
endfunction

function Func0407 takes integer id returns boolean
  return LoadBoolean(AbilitiesVariousFlags,0,id)
endfunction

function IsUltimate takes integer i returns boolean
  return GetAbilityMaxLevel(i)==3 or i=='A21Y' or i=='A1GU'
endfunction

function Func0409 takes integer JWE returns nothing
  if IsFlagBitSet(Memory[(JWE+0x20)/4],512)then
    set Memory[(JWE+0x20)/4]=Memory[(JWE+0x20)/4]-512
  endif
endfunction

function Func0410 takes unit u,integer id returns nothing
  local integer JWE=GetUnitAbility(u,id)
  if JWE>1 then
    if IsFlagBitSet(Memory[(JWE+0x20)/4],512)then
      set Memory[(JWE+0x20)/4]=Memory[(JWE+0x20)/4]-512
      if IsUltimate(id)then
        call TimerStart(UltimateCDTimers[GetPlayerId(GetOwningPlayer(u))],0,false,null)
      endif
    endif
  endif
endfunction

function Func0411 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call Func0410(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func0412 takes unit u,integer id returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.,false,function Func0411)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  call SaveInteger(HY,GetHandleId(t),0,id)
  set t=null
endfunction

function AdjustCooldownModel takes integer h returns nothing
  if h>0 then
    set Memory[(h+0xB4)/4]=0x447a0000
  endif
endfunction

function IsItemAbility takes integer i returns boolean
  return HaveSavedBoolean(SpellsDB,'itid',i)
endfunction

function OnSpellCDStarts takes ability a,integer ch,unit u,real cd,integer id,integer h returns nothing
  local real r1=0.
  local integer h2
  call SaveAbilityHandle(AbilitiesHashtable,GetHandleId(u),id,a)
  call SaveInteger(AbilitiesHashtable,GetHandleId(u),id,ch*4)
  if ch==0 or cd==0 or GetHandleId(u)==0 or(h==0 and GetHandleId(a)==0)then
    return
  endif
  call AdjustCooldownModel(ch*4)
  if GetUnitAbilityLevel(u,'A39S')>0 then
    call AddAbilityCooldownConverted(ch,-cd*0.25)
  endif
  if GetUnitAbilityLevel(u,'A3R4')>0 then
    call AddAbilityCooldownConverted(ch,-cd*0.30)
  endif
  if IsNotItemAbility and GetUnitAbilityLevel(u,'B3DU')==1 then
    if GetUnitAbilityLevel(u,'A3DU')==1 then
      call AddAbilityCooldownConverted(ch,-3.)
      call UnitRemoveAbility(u,'A3DU')
    elseif GetUnitAbilityLevel(u,'A3DV')==1 then
      call AddAbilityCooldownConverted(ch,-4.)
      call UnitRemoveAbility(u,'A3DV')
    elseif GetUnitAbilityLevel(u,'A3DW')==1 then
      call AddAbilityCooldownConverted(ch,-5.)
      call UnitRemoveAbility(u,'A3DW')
    elseif GetUnitAbilityLevel(u,'A3DX')==1 then
      call AddAbilityCooldownConverted(ch,-6.)
      call UnitRemoveAbility(u,'A3DX')
    endif
    call UnitRemoveAbility(u,'B3DU')
  endif
  if GetUnitAbilityLevel(u,'A3RO')==1 and IsItemAbility(id)==false and GetWidgetLife(u)>0.5 then
    set h2=GetHandleId(LoadTriggerHandle(HY,GetHandleId(u),'A3RO'))
    if h2>0 then
      call SaveReal(HY,h2,0,LoadReal(HY,h2,0)+0.08)
      call Func0230(u,-0.08)
      call AddAbilityCooldownConverted(ch,LoadReal(HY,h2,1)-TimerGetElapsed(GlobalTimer))
    endif
  endif
  set cd=GetAbilityCurrentCooldownConverted(ch)
  if id=='A02W' then
    call TimerStart(UltimateCDTimers[GetPlayerId(GetOwningPlayer(u))],0,false,null)
  elseif cd>0 and IsUnitType(u,UNIT_TYPE_HERO)and IsUltimate(id)then
    call TimerStart(UltimateCDTimers[GetPlayerId(GetOwningPlayer(u))],cd,false,null)
  endif
endfunction

function SpecialAbilityCasted takes unit u,integer id returns nothing
  local integer a=GetUnitAbility(u,id)
  if a>0 then
    call OnSpellCDStarts(null,a/4,u,GetAbilityCD(id,GetUnitAbilityLevel(u,id)),id,1)
  endif
endfunction

function Func0417 takes boolean UFE,real x1,real y1,real x2,real y2 returns rect
  local integer h=0
  if UFE then
    set h=-128
  endif
  set lightnings001[integer021*4+0]=AddLightningEx("BRDR",false,x1,y2,h,x1,y1,h)
  set lightnings001[integer021*4+1]=AddLightningEx("BRDR",false,x1,y1,h,x2,y1,h)
  set lightnings001[integer021*4+2]=AddLightningEx("BRDR",false,x2,y1,h,x2,y2,h)
  set lightnings001[integer021*4+3]=AddLightningEx("BRDR",false,x1,y2,h,x2,y2,h)
  set integer021=integer021+1
  return Rect(x1,y1,x2,y2)
endfunction

function Func0418 takes nothing returns nothing
  call BJDebugMsg("qweee")
endfunction

function Func0419 takes nothing returns nothing
  local integer id=LoadInteger(HY,GetHandleId(GetExpiredTimer()),0)
  set booleans004[id]=false
endfunction

function EvasionSourceActivate takes integer UJE,real D1E returns nothing
  if timers002[UJE]==null then
    set timers002[UJE]=CreateTimer()
    call SaveInteger(HY,GetHandleId(timers002[UJE]),0,UJE)
  endif
  if TimerGetRemaining(timers002[UJE])<D1E then
    call TimerStart(timers002[UJE],D1E,false,function Func0419)
  endif
  set booleans004[UJE]=true
endfunction

function DelayedCallBackClean takes nothing returns nothing
  local timer t=GetExpiredTimer()
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set t=null
endfunction

function DelayedCallBack takes real UME,code UPE returns integer
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call FlushChildHashtable(HY,h)
  call TimerStart(t,UME,false,UPE)
  set t=null
  return h
endfunction

function Func0423 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call SpecialAbilityCasted(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))
  call DelayedCallBackClean()
endfunction

function Func0424 takes unit u,integer id returns nothing
  local integer h
  local integer a=GetUnitAbility(u,id)
  if a>0 then
    set h=DelayedCallBack(0.,function Func0423)
    call SaveUnitHandle(HY,h,0,u)
    call SaveInteger(HY,h,0,id)
  endif
endfunction

function Func0425 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer a=LoadInteger(HY,h,0)
  call Func0409(a)
  call RemoveSavedHandle(HY,GetHandleId(u),a)
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set u=null
  set t=null
endfunction

function Func0426 takes unit u,integer a returns nothing
  local timer t
  local integer h
  if HaveSavedHandle(CooldownStorage,GetHandleId(u),a)then
    call TimerStart(LoadTimerHandle(CooldownStorage,GetHandleId(u),a),GetAbilityCurrentCooldownConverted(a/4),false,function Func0425)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(CooldownStorage,GetHandleId(u),a,t)
    call SaveUnitHandle(HY,h,0,u)
    call SaveInteger(HY,h,0,a)
    call TimerStart(t,GetAbilityCurrentCooldownConverted(a/4),false,function Func0425)
    set t=null
  endif
endfunction

function Func0427 takes unit HDE,unit SGE,integer id,integer UYE returns nothing
  local integer a
  local integer b
  local real cd
  if GetUnitAbilityLevel(SGE,id)==0 then
    return
  endif
  set a=GetUnitAbility(HDE,id)/4
  if a==0 then
    return
  endif
  set cd=Memory[a+55]
  if cd!=0 then
    set b=GetUnitAbility(SGE,UYE)/4
    if b<1 then
      return
    endif
    call CopyCooldownStr(a,b)
    call Func0426(SGE,b*4)
  else
  endif
endfunction

function Func0428 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call Func0427(LoadUnitHandle(HY,h,0),LoadUnitHandle(HY,h,1),LoadInteger(HY,h,0),LoadInteger(HY,h,1))
  call DelayedCallBackClean()
endfunction

function Func0429 takes real x,real y returns boolean
  return IsPointInRegion(region007,x,y)==false and IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)==false
endfunction

function Func0430 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call SetTerrainPathable(LoadReal(HY,h,0),LoadReal(HY,h,1),PATHING_TYPE_WALKABILITY,false)
  call DelayedCallBackClean()
endfunction

function Func0431 takes real x,real y,real D1E returns nothing
  local integer h
  if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)then
    set h=DelayedCallBack(0,function Func0430)
    call SaveReal(HY,h,0,x)
    call SaveReal(HY,h,1,y)
    call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
  endif
endfunction

function Func0432 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  if Func0429(x,y)then
    call SaveReal(HY,GetHandleId(u),'PTTR',x)
    call SaveReal(HY,GetHandleId(u),'PTTR'+1,y)
  endif
  set t=null
  set u=null
endfunction

function Func0433 takes unit u returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(u)
  if IsUnitType(u,UNIT_TYPE_HERO)==false then
    return
  endif
  if HaveSavedHandle(HY,hu,'PTTR')==false then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,hu,'PTTR',t)
    call TimerStart(t,0.05,true,function Func0432)
    call SaveUnitHandle(HY,h,0,u)
    call SaveReal(HY,hu,'PTTR',GetUnitX(u))
    call SaveReal(HY,hu,'PTTR'+1,GetUnitY(u))
    call SaveInteger(HY,h,0,1)
    set t=null
  else
    set h=GetHandleId(LoadTimerHandle(HY,hu,'PTTR'))
    call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
  endif
endfunction

function Func0434 takes unit u returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'PTTR')then
    set t=LoadTimerHandle(HY,hu,'PTTR')
    set h=GetHandleId(t)
    if LoadInteger(HY,h,0)==1 then
      call RemoveSavedHandle(HY,hu,'PTTR')
      call PauseTimer(t)
      call DestroyTimer(t)
      call FlushChildHashtable(HY,h)
    else
      call SaveInteger(HY,h,0,LoadInteger(HY,h,0)-1)
    endif
    set t=null
  endif
endfunction

function Func0435 takes unit u,real x,real y returns boolean
  if IsUnitType(u,UNIT_TYPE_HERO)==false or Func0429(x,y)then
    return false
  endif
  set real011=LoadReal(HY,GetHandleId(u),'PTTR')
  set real012=LoadReal(HY,GetHandleId(u),'PTTR'+1)
  return true
endfunction

function Func0436 takes unit u returns nothing
  if IsTerrainPathable(GetUnitX(u),GetUnitY(u),PATHING_TYPE_WALKABILITY)==false then
    call SetUnitX(u,LoadReal(HY,GetHandleId(u),'PTTR'))
    call SetUnitY(u,LoadReal(HY,GetHandleId(u),'PTTR'+1))
  endif
  call Func0434(u)
endfunction

function CurrentSafestLocationWrapper takes unit SGE returns nothing
  if Func0435(SGE,GetUnitX(SGE),GetUnitY(SGE))then
    call SetUnitPosition(SGE,real011,real012)
  endif
  call Func0434(SGE)
endfunction

function Func0438 takes integer i returns unit
  call DisableTrigger(trigger024)
  set units002[i]=CreateUnit(Player(i),'e00E',0,0,0)
  call EnableTrigger(trigger024)
  return units002[i]
endfunction

function Func0439 takes unit HDE returns unit
  local integer WVE=GetPlayerId(GetOwningPlayer(HDE))
  if GetWidgetLife(units002[WVE])>1 then
    return units002[WVE]
  endif
  return Func0438(WVE)
endfunction

function Func0440 takes unit WXE,unit SGE returns unit
  local integer WVE=GetPlayerId(GetOwningPlayer(WXE))
  if GetUnitAbilityLevel(WXE,'Avul')>0 then
    return WXE
  endif
  if boolean013 and GetUnitAbilityLevel(SGE,'A0M3')>0 then
    call SetUnitPosition(units002[WVE],GetUnitX(WXE),GetUnitY(WXE))
  endif
  if GetHandleId(units002[WVE])!=0 then
    return units002[WVE]
  endif
  return Func0438(WVE)
endfunction

function Func0441 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local lightning l=LoadLightningHandle(HY,h,1)
  local real WRE=LoadReal(HY,h,3)
  local real ad=LoadReal(HY,h,2)
  local real WIE=LoadReal(HY,h,4)
  local unit u=LoadUnitHandle(HY,h,5)
  local unit WAE=LoadUnitHandle(HY,h,6)
  local real WNE=LoadReal(HY,h,8)+.04
  local location ul=GetUnitLoc(u)
  local location WBE=GetUnitLoc(WAE)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local real z=GetUnitFlyHeight(u)+LoadReal(HY,h,7)
  local real x2=GetUnitX(WAE)
  local real y2=GetUnitY(WAE)
  local real z2=GetUnitFlyHeight(WAE)+85
  local real l1=GetLocationZ(ul)
  local real l2=GetLocationZ(WBE)
  local real N4E
  call MoveLightningEx(l,true,x,y,z+l1,x2,y2,z2+l2)
  call SaveReal(HY,h,8,WNE)
  if WNE>WRE then
    set N4E=GetLightningColorA(l)-ad
    if N4E<0 then
      set N4E=0
    endif
    call SetLightningColor(l,GetLightningColorR(l),GetLightningColorG(l),GetLightningColorB(l),N4E)
    if WNE>WIE then
      call DestroyLightning(l)
      call PauseTimer(t)
      call DestroyTimer(t)
      call FlushChildHashtable(HY,h)
    endif
  endif
  call RemoveLocation(ul)
  call RemoveLocation(WBE)
  set ul=null
  set WBE=null
  set u=null
  set WAE=null
  set t=null
  set l=null
endfunction

function CreateLightningOnUnit takes string WDE,unit u,unit WAE,real WFE,real r,real g,real b,real N4E,real WRE,real WGE returns integer
  local lightning l
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local real z=GetUnitFlyHeight(u)+WFE
  local real x2=GetUnitX(WAE)
  local real y2=GetUnitY(WAE)
  local real z2=GetUnitFlyHeight(WAE)+85
  local location ul=GetUnitLoc(u)
  local location WBE=GetUnitLoc(WAE)
  local real l1=GetLocationZ(ul)
  local real l2=GetLocationZ(WBE)
  local real ad=N4E/(WGE/.04)
  set l=AddLightningEx(WDE,true,x,y,z+l1,x2,y2,z2+l2)
  call SetLightningColor(l,r,g,b,N4E)
  call TimerStart(t,.04,true,function Func0441)
  call SaveLightningHandle(HY,h,1,l)
  call SaveReal(HY,h,2,ad)
  call SaveReal(HY,h,3,WRE)
  call SaveReal(HY,h,4,WRE+WGE)
  call SaveUnitHandle(HY,h,5,u)
  call SaveUnitHandle(HY,h,6,WAE)
  call SaveReal(HY,h,7,WFE)
  call RemoveLocation(ul)
  call RemoveLocation(WBE)
  set ul=null
  set WBE=null
  set l=null
  set t=null
  return h
endfunction

function PlaySoundOnUnitEx takes string source,integer volume,real pitch,unit target returns nothing
  local sound s=CreateSound(source,false,true,true,12700,12700,"")
  call AttachSoundToUnit(s,target)
  call SetSoundVolume(s,volume)
  call SetSoundPitch(s,pitch)
  call StartSound(s)
  call KillSoundWhenDone(s)
  set s=null
endfunction

function DummyDamageTrackingDisable takes nothing returns nothing
  set DummyDamageState=false
endfunction

function DummyDamageTracking takes real r returns nothing
  if DummyDamageTimer==null then
    set DummyDamageTimer=CreateTimer()
  endif
  if r>TimerGetRemaining(DummyDamageTimer)then
    call TimerStart(DummyDamageTimer,r,false,function DummyDamageTrackingDisable)
  endif
  set DummyDamageState=true
endfunction

function DamageBlockActiveTrackingDisable takes nothing returns nothing
  set DamageBlockActiveTrackingState=false
endfunction

function  DamageBlockActiveTracking takes real r returns nothing
  if r>TimerGetRemaining( DamageBlockActiveTimer)then
    call TimerStart( DamageBlockActiveTimer,r,false,function DamageBlockActiveTrackingDisable)
  endif
  set DamageBlockActiveTrackingState=true
endfunction

function Func0448 takes unit u,boolean b returns nothing
  call SaveBoolean(HY,GetHandleId(u),'CHNL',b)
endfunction

function Func0449 takes unit u returns boolean
  return LoadBoolean(HY,GetHandleId(u),'CHNL')
endfunction

function Func0450 takes string s returns nothing
  call BJDebugMsg(s)
endfunction

function AddWrapper takes string s,integer lvl returns nothing
  local integer i=0
  loop
    exitwhen HaveSavedString(UTable,'DMGE'+lvl,i)==false
    if LoadStr(UTable,'DMGE'+lvl,i)==s then
      return
    endif
    set i=i+1
  endloop
  call SaveStr(UTable,'DMGE'+lvl,i,s)
endfunction

function Func0452 takes unit u,integer id,player p,boolean b,integer i returns nothing
  local item it=UnitAddItemById(u,id)
  call SetItemPlayer(it,p,b)
  call SetItemUserData(it,i)
  set it=null
endfunction

function UnitAddAbility2 takes unit u,integer i returns nothing
  call UnitAddAbility(u,i)
  call UnitMakeAbilityPermanent(u,true,i)
endfunction

function UnitAddAbility3 takes unit u,integer id,integer lvl returns nothing
  if GetUnitAbilityLevel(u,id)==0 then
    call UnitAddAbility2(u,id)
  endif
  call SetUnitAbilityLevel(u,id,lvl)
endfunction

function Func0455 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  if UnitRemoveAbility(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))and GetUnitAbilityLevel(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))==0 then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  endif
  set t=null
endfunction

function RemoveAbilityForSure takes unit u,integer id returns nothing
  local timer t
  local integer h
  if UnitRemoveAbility(u,id)==false and GetUnitAbilityLevel(u,id)>0 then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call TimerStart(t,0.5,true,function Func0455)
    call SaveUnitHandle(HY,h,0,u)
    call SaveInteger(HY,h,0,id)
    set t=null
  endif
endfunction

function Func0457 takes boolean b returns string
  if b then
    return"true"
  endif
  return"false"
endfunction

function Func0458 takes unit u,integer c,boolean W6E returns nothing
  if W6E then
    if c+1<=6 and c>=0 then
      call UnitRemoveAbility(u,integers024[0])
      call UnitRemoveAbility(u,integers024[1])
      call UnitRemoveAbility(u,integers024[2])
      call UnitRemoveAbility(u,integers024[3])
      call UnitRemoveAbility(u,integers024[4])
      call UnitRemoveAbility(u,integers024[5])
      call UnitRemoveAbility(u,integers024[6])
      call UnitAddAbility2(u,integers024[c+1])
    endif
  else
    if c-1>=0 and c<=6 then
      call UnitRemoveAbility(u,integers024[0])
      call UnitRemoveAbility(u,integers024[1])
      call UnitRemoveAbility(u,integers024[2])
      call UnitRemoveAbility(u,integers024[3])
      call UnitRemoveAbility(u,integers024[4])
      call UnitRemoveAbility(u,integers024[5])
      call UnitRemoveAbility(u,integers024[6])
      call UnitAddAbility2(u,integers024[c-1])
    endif
  endif
endfunction

function HideAbility takes integer id returns nothing
  call SetPlayerAbilityAvailable(Player(1),id,false)
  call SetPlayerAbilityAvailable(Player(2),id,false)
  call SetPlayerAbilityAvailable(Player(3),id,false)
  call SetPlayerAbilityAvailable(Player(4),id,false)
  call SetPlayerAbilityAvailable(Player(5),id,false)
  call SetPlayerAbilityAvailable(Player(7),id,false)
  call SetPlayerAbilityAvailable(Player(8),id,false)
  call SetPlayerAbilityAvailable(Player(9),id,false)
  call SetPlayerAbilityAvailable(Player(10),id,false)
  call SetPlayerAbilityAvailable(Player(11),id,false)
  call SetPlayerAbilityAvailable(Player(12),id,false)
endfunction

function BreakDummyCreate takes unit u returns nothing
  local player p=GetOwningPlayer(u)
  call KillUnit(LoadUnitHandle(HY,GetHandleId(p),'brek'))
  call SaveUnitHandle(HY,GetHandleId(p),'brek',CreateUnit(p,'e00L',0,0,0))
  call ShowUnit(LoadUnitHandle(HY,GetHandleId(p),'brek'),false)
  call PauseUnit(LoadUnitHandle(HY,GetHandleId(p),'brek'),true)
endfunction

function BreakDummyKill takes unit u returns nothing
  local player p=GetOwningPlayer(u)
  call KillUnit(LoadUnitHandle(HY,GetHandleId(p),'brek'))
endfunction

function PRD_Get takes unit u,integer YEE,real YXE returns boolean
  local integer h=GetHandleId(u)
  local real YOE=R2I(YXE/5.)*5.
  local real W6E=LoadReal(hashtable011,-1,R2I(YOE/5.)-1)
  local real YRE=LoadReal(hashtable011,h,YEE)
  local real YIE=GetRandomReal(0.0,1.0)
  if IsUnitType(u,UNIT_TYPE_HERO)==false then
    return GetRandomInt(1,100)<YXE
  endif
  if YIE<YRE+W6E then
    call SaveReal(hashtable011,h,YEE,-0.01)
    return true
  else
    call SaveReal(hashtable011,h,YEE,YRE+W6E)
    return false
  endif
endfunction

function IsMeepo takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='H00I' or i=='H00J'
endfunction

function Func0464 takes integer a,integer b returns integer
  if(a<b)then
    return a
  else
    return b
  endif
endfunction

function IMaxIF takes integer a,integer b returns integer
  if(a<b)then
    return b
  else
    return a
  endif
endfunction

function Func0466 takes integer a,integer b,integer c returns integer
  return IMaxIF(Func0464(a,c),b)
endfunction

function RMinIF takes real a,real b returns real
  if(a<b)then
    return a
  else
    return b
  endif
endfunction

function Func0468 takes real a,real b returns real
  if(a<b)then
    return b
  else
    return a
  endif
endfunction

function Func0469 takes unit u returns nothing
  local boolean array b
  local player p
  local integer i=1
  loop
    if IsUnitSelected(u,Player(i))then
      set b[i]=true
    else
      set b[i]=false
    endif
    set i=i+1
    exitwhen i>11
  endloop
  call ShowUnit(u,false)
  call ShowUnit(u,true)
  set i=1
  loop
    if b[i]then
      call SelectUnitAddForPlayer(u,Player(i))
    endif
    set i=i+1
    exitwhen i>11
  endloop
endfunction

function LotusOrbFX takes unit u returns nothing
  call DestroyEffect(AddSpecialEffectTarget(GetAbilityEffectById('A3E9',EFFECT_TYPE_EFFECT,0),u,GetAbilityEffectById('A3E9',EFFECT_TYPE_EFFECT,1)))
endfunction

function Func0471 takes nothing returns nothing
  local texttag tt
  local integer hu=GetHandleId(unit018)
  local timer t1=LoadTimerHandle(HY,hu,0)
  local integer h1=GetHandleId(t1)
  local timer t2=LoadTimerHandle(HY,hu,1)
  local integer h2=GetHandleId(t2)
  if HaveSavedHandle(HY,h1,'abil')then
    set tt=LoadTextTagHandle(HY,h1,'abil')
  else
    set tt=CreateTextTag()
    call SetTextTagPosUnit(tt,SentFountain,0)
    call SetTextTagColor(tt,255,220,0,255)
    call SetTextTagVelocity(tt,0,0)
    call SetTextTagPermanent(tt,true)
    call SaveTextTagHandle(HY,h1,'abil',tt)
  endif
  call SetTextTagText(tt,"Abils: "+I2S(LoadInteger(HY,h1,-1))+"/"+I2S(LoadInteger(HY,h1,0)),0.025)
  call SetTextTagVisibility(tt,IsL1ch)
  if HaveSavedHandle(HY,h2,'abil')then
    set tt=LoadTextTagHandle(HY,h2,'abil')
  else
    set tt=CreateTextTag()
    call SetTextTagPosUnit(tt,SentFountain,64)
    call SetTextTagColor(tt,255,220,0,255)
    call SetTextTagVelocity(tt,0,0)
    call SetTextTagPermanent(tt,true)
    call SaveTextTagHandle(HY,h2,'abil',tt)
  endif
  call SetTextTagText(tt,"Units: "+I2S(LoadInteger(HY,h2,-1))+"/"+I2S(LoadInteger(HY,h2,0)),0.025)
  call SetTextTagVisibility(tt,IsL1ch)
  set t1=null
  set t2=null
  set tt=null
endfunction

function Func0472 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer id
  local integer i=LoadInteger(HY,h,-1)
  local integer YLE=LoadInteger(HY,h,0)
  call Func0471()
  if i<YLE then
    set id=LoadInteger(HY,h,i+1)
    call UnitAddAbility(unit018,id)
    call UnitRemoveAbility(unit018,id)
    call RemoveSavedInteger(HY,h,i+1)
    call SaveInteger(HY,h,-1,i+1)
  else
    call PauseTimer(t)
    call SaveBoolean(HY,GetHandleId(unit018),0,false)
    call SaveInteger(HY,h,0,0)
    call SaveInteger(HY,h,-1,0)
  endif
  set t=null
endfunction

function PreloadAbility takes integer id returns nothing
  local integer hu=GetHandleId(unit018)
  local timer t=LoadTimerHandle(HY,hu,0)
  local integer h=GetHandleId(t)
  local integer i
  if IsL1ch then
  endif
  if LoadBoolean(HY,hu,0)then
    set i=LoadInteger(HY,h,0)+1
  else
    call TimerStart(t,0.1,true,function Func0472)
    call SaveBoolean(HY,hu,0,true)
    set i=1
  endif
  call SaveInteger(HY,h,i,id)
  call SaveInteger(HY,h,0,i)
  set t=null
endfunction

function Func0474 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer id
  local integer i=LoadInteger(HY,h,-1)
  local integer YLE=LoadInteger(HY,h,0)
  call Func0471()
  if i<YLE then
    set id=LoadInteger(HY,h,i+1)
    call RemoveUnit(CreateUnit(Sentinels[0],id,GetUnitX(SentFountain),GetUnitY(SentFountain),0))
    call RemoveSavedInteger(HY,h,i+1)
    call SaveInteger(HY,h,-1,i+1)
  else
    call PauseTimer(t)
    call SaveBoolean(HY,GetHandleId(unit018),10,false)
    call SaveInteger(HY,h,0,0)
    call SaveInteger(HY,h,-1,0)
  endif
  set t=null
endfunction

function PreloadUnit takes integer id returns nothing
  local integer hu=GetHandleId(unit018)
  local timer t=LoadTimerHandle(HY,hu,1)
  local integer h=GetHandleId(t)
  local integer i
  if IsL1ch then
  endif
  if LoadBoolean(HY,hu,10)then
    set i=LoadInteger(HY,h,0)+1
  else
    call TimerStart(t,0.5,true,function Func0474)
    call SaveBoolean(HY,hu,10,true)
    set i=1
  endif
  call SaveInteger(HY,h,i,id)
  call SaveInteger(HY,h,0,i)
  set t=null
endfunction

function Func0476 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call RemoveUnit(LoadUnitHandle(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func0477 takes unit u,real UME returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call TimerStart(t,UME,false,function Func0476)
  set t=null
endfunction

function Func0478 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call ShowUnit(LoadUnitHandle(HY,h,0),false)
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func0479 takes unit u,real UME returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call TimerStart(t,UME,false,function Func0478)
  set t=null
endfunction

function Stat_Count takes string s returns integer
  if s=="+DMG" then
    return 12
  elseif s=="-DMG" then
    return 10
  elseif s=="+AS" then
    return 10
  elseif s=="-AS" then
    return 10
  elseif s=="+MS" then
    return 8
  elseif s=="-MS" then
    return 8
  elseif s=="+DEF" then
    return 7
  elseif s=="-DEF" then
    return 7
  elseif s=="REGEN" then
    return 8
  elseif s=="+MP" then
    return 9
  else
    call echo("Derp, invalid stat: "+s)
    return 0
  endif
endfunction

function Stat_Base takes string s returns integer
  if s=="+DMG" then
    return'AX20'
  elseif s=="-DMG" then
    return'AX30'
  elseif s=="+AS" then
    return'AX00'
  elseif s=="-AS" then
    return'AX10'
  elseif s=="+MS" then
    return'AX40'
  elseif s=="-MS" then
    return'AX50'
  elseif s=="+DEF" then
    return'AX60'
  elseif s=="-DEF" then
    return'AX70'
  elseif s=="REGEN" then
    return'AX80'
  elseif s=="+MP" then
    return'A3M0'
  else
    call echo("Derp, invalid stat: "+s)
    return 0
  endif
endfunction

function Func0482 takes unit u,integer i,string s returns integer
  local integer Y0E=0
  local integer base=Stat_Base(s)
  local integer Y1E=Stat_Count(s)
  local integer Y2E=R2I(Pow(2,Y1E)-1)
  local integer r=i
  local real Y3E
  if i<0 then
    set i=0
  endif
  if IsHeroUnitId(GetUnitTypeId(u))==false and(s=="+MS" or s=="-MS")then
    call FatalErrorNote("non-hero movespeed")
    return 0
  endif
  if i>Y2E then
    loop
      call UnitAddAbility2(u,base+Y0E)
      set Y0E=Y0E+1
      exitwhen Y0E>Y1E
    endloop
    return Y2E
  elseif 1>i then
    loop
      call UnitRemoveAbility(u,base+Y0E)
      set Y0E=Y0E+1
      exitwhen Y0E>Y1E
    endloop
    return 0
  endif
  set Y3E=i/2.
  set i=i/2
  loop
    if i==Y3E or 0>i then
      call UnitRemoveAbility(u,base+Y0E)
    else
      call UnitAddAbility2(u,base+Y0E)
    endif
    set Y3E=i/2.
    set i=i/2
    set Y0E=Y0E+1
    exitwhen Y0E==Y1E
  endloop
  return r
endfunction

function Func0483 takes unit u,string s returns integer
  local integer i=0
  local integer base=Stat_Base(s)
  local integer Y1E=Stat_Count(s)
  local real Y5E=0
  loop
    if GetUnitAbilityLevel(u,base+i)==1then
      set Y5E=Y5E+Pow(2,i)
    endif
    set i=i+1
    exitwhen i>Y1E
  endloop
  return R2I(Y5E)
endfunction

function Stat_Add takes unit u,integer i,string s returns integer
  return Func0482(u,Func0483(u,s)+i,s)
endfunction

function Stat_Sub takes unit u,integer i,string s returns integer
  return Func0482(u,Func0483(u,s)-i,s)
endfunction

function Stats_Fucking_Modify takes unit u,integer i,string s returns integer
  return Func0482(u,Func0483(u,s)+i,s)
endfunction

function DestructablesInCircleFilter takes nothing returns boolean
  local real dx=GetDestructableX(GetFilterDestructable())-0.
  local real dy=GetDestructableY(GetFilterDestructable())-0.
  return(dx*dx+dy*dy<=bj_enumDestructableRadius)
endfunction

function GetForceOfEnemies takes player whichPlayer returns force
  set TempForce=CreateForce()
  call ForceEnumEnemies(TempForce,whichPlayer,ReturnTrueBoolexpr)
  return TempForce
endfunction

function Func0489 takes itemtype ZIE,integer ZAE returns nothing
  local group g
  set bj_stockPickedItemType=ZIE
  set bj_stockPickedItemLevel=ZAE
  set g=CreateGroup()
  call GroupEnumUnitsOfType(g,"marketplace",ReturnTrueBoolexpr)
  call ForGroup(g,function UpdateEachStockBuildingEnum)
  call DestroyGroup(g)
  set g=null
endfunction

function Func0490 takes nothing returns nothing
  local integer ZAE
  local itemtype ZIE
  local integer QIE=0
  local integer ZBE=0
  local integer ZCE
  set ZCE=1
  loop
    if(bj_stockAllowedPermanent[ZCE])then
      set ZBE=ZBE+1
      if(GetRandomInt(1,ZBE)==1)then
        set ZIE=ITEM_TYPE_PERMANENT
        set QIE=ZCE
      endif
    endif
    if(bj_stockAllowedCharged[ZCE])then
      set ZBE=ZBE+1
      if(GetRandomInt(1,ZBE)==1)then
        set ZIE=ITEM_TYPE_CHARGED
        set QIE=ZCE
      endif
    endif
    if(bj_stockAllowedArtifact[ZCE])then
      set ZBE=ZBE+1
      if(GetRandomInt(1,ZBE)==1)then
        set ZIE=ITEM_TYPE_ARTIFACT
        set QIE=ZCE
      endif
    endif
    set ZCE=ZCE+1
    exitwhen ZCE>10
  endloop
  if(ZBE==0)then
    set ZIE=null
    return
  endif
  call Func0489(ZIE,QIE)
  set ZIE=null
endfunction

function Func0491 takes nothing returns nothing
  call Func0490()
  call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function Func0490)
endfunction

function DisplayTimedTextToForceEx_Cycle takes nothing returns nothing
  call DisplayTimedTextToPlayer(GetEnumPlayer(),0,0,TempReal2,TempStr)
endfunction

function DisplayTimedTextToForceEx takes force f,real dur,string s returns nothing
	set TempStr=s
	set TempReal2=dur
	call ForForce(f,function DisplayTimedTextToForceEx_Cycle)
endfunction

function MBSetText takes multiboard mb,integer ZAE,integer QIE,string ZJE returns nothing
  local multiboarditem ZME=null
  set ZME=MultiboardGetItem(mb,QIE-1,ZAE-1)
  call MultiboardSetItemValue(ZME,ZJE)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function MBSetIcon takes multiboard mb,integer ZAE,integer QIE,string ZJE returns nothing
  local multiboarditem ZME=null
  set ZME=MultiboardGetItem(mb,QIE-1,ZAE-1)
  call MultiboardSetItemIcon(ZME,ZJE)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function MBSetStyle takes multiboard mb,integer ZAE,integer QIE,boolean ZSE,boolean ZTE returns nothing
  local multiboarditem ZME=null
  set ZME=MultiboardGetItem(mb,QIE-1,ZAE-1)
  call MultiboardSetItemStyle(ZME,ZSE,ZTE)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function MBSetColor takes multiboard mb,integer ZAE,integer QIE,real result,real ZEE,real ZWE,real ZYE returns nothing
  local multiboarditem ZME=null
  set ZME=MultiboardGetItem(mb,QIE-1,ZAE-1)
  call MultiboardSetItemValueColor(ZME,PercentTo255(result),PercentTo255(ZEE),PercentTo255(ZWE),PercentTo255(100.0-ZYE))
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function MBSetWidth takes multiboard mb,integer ZAE,integer QIE,real result returns nothing
  local multiboarditem ZME=null
  set ZME=MultiboardGetItem(mb,QIE-1,ZAE-1)
  call MultiboardSetItemWidth(ZME,result/100)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function DaI_Clear takes integer ZAE returns nothing
  if ZAE>16000 then
    set destructables003[ZAE-16000]=null
  elseif ZAE>8000 then
    set destructables002[ZAE-8000]=null
  else
    set destructables001[ZAE]=null
  endif
endfunction

function Func0501 takes integer ZAE returns destructable
  if ZAE>16000 then
    return destructables003[ZAE-16000]
  elseif ZAE>8000 then
    return destructables002[ZAE-8000]
  else
    return destructables001[ZAE]
  endif
  return destructables001[ZAE]
endfunction

function DaI_Save takes destructable Z2E returns integer
  set integer084=integer084+1
  if integer084>24000 then
    set destructables003[integer084-16000]=Z2E
  elseif integer084>8000 then
    set destructables002[integer084-8000]=Z2E
  else
    set destructables001[integer084]=Z2E
  endif
  return integer084
endfunction

function IsBlocked takes unit u returns boolean
  return GetUnitAbilityLevel(u,'B0BI')>0 or GetUnitAbilityLevel(u,'BNss')>0 or GetUnitAbilityLevel(u,'B0EV')>0
endfunction

function KillGroup takes group g returns nothing
  local integer h=GetHandleId(g)-integer085
  if h<0 or h>240 then
    set boolean100=true
  else
    call GroupClear(g)
    set booleans013[h]=false
    set integer086=h
    call S2I("Group has been returned: #"+I2S(h)+" h="+I2S(GetHandleId(g)))
  endif
endfunction

function GetAvailableGroup takes nothing returns group
  local integer i=integer086
  loop
    exitwhen i==integer086-1
    if booleans013[i]==false then
      set integer086=i+1
      if integer086==240 then
        set integer086=1
      endif
      set booleans013[i]=true
      call S2I("Group has been taken: #"+I2S(i)+" h="+I2S(GetHandleId(groups001[i])))
      return groups001[i]
    endif
    set i=i+1
    if i==240 then
      set i=0
    endif
  endloop
  call DisplayTimedTextToForceEx(AllPlayers,5.00,"|c00ff0303CRITICAL ERROR: FOUND NO AVAILABLE GROUPS|r")
  call DisplayTimedTextToForceEx(AllPlayers,5.00,"|c00ff0303Send this replay to DracoL1ch@yandex.com|r")
  return CreateGroup()
endfunction

function Func0507 takes nothing returns integer
  local integer i=0
  local integer k=0
  loop
    if booleans013[k]then
      set i=i+1
    endif
    set k=k+1
    exitwhen k==241
  endloop
  return i
endfunction

function Func0508 takes nothing returns boolean
  local integer i=Func0507()
  if i>230 or boolean100 then
    call DisplayTimedTextToForceEx(AllPlayers,5.00,"|c00ff0303Please send me this replay ("+I2S(i)+")")
  endif
  return false
endfunction

function Func0509 takes nothing returns nothing
  local integer i=0
  set integer086=0
  set groups001[i]=CreateGroup()
  set booleans013[i]=false
  set i=1
  set integer085=GetHandleId(groups001[0])
  loop
    set groups001[i]=CreateGroup()
    set booleans013[i]=false
    set i=i+1
    exitwhen i==241
  endloop
endfunction

function Func0510 takes force f,real D1E,string s returns nothing
  call DisplayTimedTextToForceEx(f,D1E,s)
  if f!=AllPlayers and udg_ObserverMode then
    call DisplayTimedTextToPlayer(udg_Observer1,0,0,D1E,s)
    call DisplayTimedTextToPlayer(udg_Observer2,0,0,D1E,s)
  endif
endfunction

function Func0511 takes string s returns nothing
  local integer ZAE=0
  if boolean094==false and boolean147==false and boolean040==false then
    set boolean040=true
    call Func0510(AllPlayers,30.,"|c00ff0303An internal checksum has failed, code ["+s+"]|r")
    call Func0510(AllPlayers,30.,"|c00ff0303This might not be a serious glitch, but it is important for me to get it|r")
    call Func0510(AllPlayers,30.,"|c00ff0303Please send me the replay for this game to DracoL1ch@yandex.com|r")
  endif
endfunction

function CleanTrigger takes trigger t returns nothing
  if t==null then
    return
  endif
  call DisableTrigger(t)
  call FlushChildHashtable(HY,GetHandleId(t))
  set integer087=integer087+1
  set triggers001[integer087]=t
  set reals006[integer087]=(TimerGetElapsed(GlobalTimer))+60
  if integer087>8000 then
    call Func0511("8k")
  endif
endfunction

function Func0513 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  if t==null then
    return
  endif
  call DisableTrigger(t)
  set integer087=integer087+1
  set triggers001[integer087]=t
  set reals006[integer087]=(TimerGetElapsed(GlobalTimer))+60
  if integer087>8000 then
    call Func0511("8k")
  endif
  set t=null
endfunction

function Func0514 takes integer i returns nothing
  if i!=integer087 then
    set triggers001[i]=triggers001[integer087]
    set reals006[i]=reals006[integer087]
  endif
  set triggers001[integer087]=null
  set reals006[integer087]=0
  set integer087=integer087-1
endfunction

function Func0515 takes nothing returns boolean
  local real r=(TimerGetElapsed(GlobalTimer))
  local integer i
  set i=1
  loop
    exitwhen i>integer087
    if reals006[i]<r then
      if triggers001[i]==null then
        call Func0511("null")
      elseif IsTriggerEnabled(triggers001[i])then
        call Func0511("ON")
      else
        call DestroyTrigger(triggers001[i])
      endif
      call Func0514(i)
    else
      set i=i+1
    endif
  endloop
  return false
endfunction

function Func0516 takes unit source returns string
  if source==null then
    return GetObjectName('n09T')
  endif
  return GetObjectName(integers086[GetUnitPointValue(source)])
endfunction

function GetHeroNameByPoints takes integer ZAE returns string
  if ZAE==0 then
    return GetObjectName('n09T')
  endif
  return GetObjectName(integers086[ZAE])
endfunction

function Func0518 takes unit source returns string
  if source==null then
    return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
  endif
  return HeroIcon[GetUnitPointValue(source)]
endfunction

function Func0519 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call RemoveSavedInteger(HY,LoadInteger(HY,h,14),LoadInteger(HY,h,33))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function AddTimedKeyToAgent takes agent u,integer VDX,real d returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local integer ah=GetHandleId(u)
  call TimerStart(t,d,false,function Func0519)
  call SaveInteger(HY,h,14,ah)
  call SaveInteger(HY,h,33,VDX)
  call SaveInteger(HY,ah,VDX,1)
  set t=null
endfunction

function Func0521 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call RemoveSavedInteger(HY,LoadInteger(HY,h,14),LoadInteger(HY,h,33))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func0522 takes agent u,integer VDX,integer I1E,real d returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local integer ah=GetHandleId(u)
  call TimerStart(t,d,false,function Func0521)
  call SaveInteger(HY,h,14,ah)
  call SaveInteger(HY,h,33,VDX)
  call SaveInteger(HY,ah,VDX,I1E)
  set t=null
endfunction

function Func0523 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call DestroyEffect(LoadEffectHandle(HY,h,1))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function AddEffectTargetTimed takes string G5E,unit u,string VKX,real D1E returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local effect e=AddSpecialEffectTarget(G5E,u,VKX)
  call TimerStart(t,D1E,false,function Func0523)
  call SaveEffectHandle(HY,h,1,e)
  set e=null
  set t=null
endfunction

function Func0525 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call DestroyEffect(LoadEffectHandle(HY,h,1))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func0526 takes string G5E,real x,real y,real D1E returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local effect e=AddSpecialEffect(G5E,x,y)
  call TimerStart(t,D1E,false,function Func0525)
  call SaveEffectHandle(HY,h,1,e)
  set effect001=e
  set e=null
  set t=null
endfunction

function Func0527 takes integer id returns integer
  return GetHeroPrimaryAttributeById(id)
endfunction

function GetHeroPrimaryAttribute_Act takes unit u returns integer
  return GetHeroPrimaryAttribute(u)
endfunction

function GetHeroMainStatValue takes unit u returns integer
  local integer ZAE=GetHeroPrimaryAttribute_Act(u)
  if ZAE==2 then
    return GetHeroInt(u,true)
  endif
  if ZAE==3 then
    return GetHeroAgi(u,true)
  endif
  if ZAE==1 then
    return GetHeroStr(u,true)
  endif
  return 0
endfunction

function Func0530 takes unit source returns boolean
  return GetUnitState(source,UNIT_STATE_LIFE)<1 or booleans014[GetPlayerId(GetOwningPlayer(source))]
endfunction

function Func0531 takes unit u returns real
  local integer id=GetUnitTypeId(u)
  local integer i=1
  local integer a=GetUnitUIDefAddr(id)
  if a>0 then
    return GetRealFromMemory(ReadRealMemory(a+0xAC))
  endif
  return 1.
endfunction

function SaveUnitWinAnimation takes integer i,string s returns nothing
  call SaveStr(UnitsData,i,1980440633,s)
endfunction

function GetUnitWinAnimName takes unit u returns string
  local integer id=GetUnitTypeId(u)
  if HaveSavedString(UnitsData,id,1980440633)then
    return LoadStr(UnitsData,id,1980440633)
  endif
  return"stand"
endfunction

function UnitPlayWinAnim takes unit u returns nothing
  if GetUnitTypeId(u)=='N01I' then
    call SetUnitAnimationByIndex(u,6)
  else
    call SetUnitAnimation(u,GetUnitWinAnimName(u))
  endif
endfunction

function IsSentinel takes player p returns boolean
  return p==Sentinels[0]or p==Sentinels[1]or p==Sentinels[2]or p==Sentinels[3]or p==Sentinels[4]or p==Sentinels[5]
endfunction

function IsScourge takes player p returns boolean
  return p==Scourges[0]or p==Scourges[1]or p==Scourges[2]or p==Scourges[3]or p==Scourges[4]or p==Scourges[5]
endfunction

function IsPlayerBelongToTeams takes player p returns boolean
  return p==Sentinels[1]or p==Sentinels[2]or p==Sentinels[3]or p==Sentinels[4]or p==Sentinels[5]or p==Scourges[1]or p==Scourges[2]or p==Scourges[3]or p==Scourges[4]or p==Scourges[5]
endfunction

function IsPlayer takes player p returns boolean
  return GetPlayerSlotState(p)==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(p)==MAP_CONTROL_USER
endfunction

function IsPlayerInGame takes player p returns boolean
  return GetPlayerController(p)==MAP_CONTROL_USER and(GetPlayerSlotState(p)==PLAYER_SLOT_STATE_PLAYING or GetPlayerSlotState(p)==PLAYER_SLOT_STATE_LEFT)
endfunction

function IsPlayerLeaver takes player p returns boolean
  return GetPlayerSlotState(p)==PLAYER_SLOT_STATE_LEFT and GetPlayerController(p)==MAP_CONTROL_USER
endfunction

function CountPlayersInForceSub takes nothing returns nothing
  if(IsPlayer(GetEnumPlayer()))then
    set bj_forceCountPlayers=bj_forceCountPlayers+1
  endif
endfunction

function CountPlayersInForce takes force f returns integer
  set bj_forceCountPlayers=0
  call ForForce(f,function CountPlayersInForceSub)
  return bj_forceCountPlayers
endfunction

function Func0543 takes nothing returns nothing
  if(IsPlayerInGame(GetEnumPlayer()))then
    set bj_forceCountPlayers=bj_forceCountPlayers+1
  endif
endfunction

function Func0544 takes force f returns integer
  set bj_forceCountPlayers=0
  call ForForce(f,function Func0543)
  return bj_forceCountPlayers
endfunction

function GetPlayersAmountInForce_Sub takes nothing returns nothing
  if GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING then
    if GetEnumPlayer()!=Player(13)and GetEnumPlayer()!=Player(14)then
      set bj_forceCountPlayers=bj_forceCountPlayers+1
    endif
  endif
endfunction

function GetPlayersAmountInForce takes force f returns integer
  set bj_forceCountPlayers=0
  call ForForce(f,function GetPlayersAmountInForce_Sub)
  return bj_forceCountPlayers
endfunction

function TechHeroForAll takes integer id returns nothing
  if NoHeroLimitOff then
    call SetPlayerTechMaxAllowed(Sentinels[1],id,0)
    call SetPlayerTechMaxAllowed(Sentinels[2],id,0)
    call SetPlayerTechMaxAllowed(Sentinels[3],id,0)
    call SetPlayerTechMaxAllowed(Sentinels[4],id,0)
    call SetPlayerTechMaxAllowed(Sentinels[5],id,0)
    call SetPlayerTechMaxAllowed(Scourges[1],id,0)
    call SetPlayerTechMaxAllowed(Scourges[2],id,0)
    call SetPlayerTechMaxAllowed(Scourges[3],id,0)
    call SetPlayerTechMaxAllowed(Scourges[4],id,0)
    call SetPlayerTechMaxAllowed(Scourges[5],id,0)
    set b_isHeroPicked[GetUnitPointValueByType(id)]=true
  endif
endfunction

function Func0548 takes integer i returns nothing
  local player p
  local integer k=1
  if NoHeroLimitOff then
    loop
      if udg_Hero[GetPlayerId(Sentinels[k])]==null then
        call SetPlayerTechMaxAllowed(Sentinels[k],i,1)
      endif
      if udg_Hero[GetPlayerId(Scourges[k])]==null then
        call SetPlayerTechMaxAllowed(Scourges[k],i,1)
      endif
      set k=k+1
      exitwhen k>5
    endloop
  endif
endfunction

function TechAll_ForPlayer takes player p returns nothing
  local integer i=FirstHeroIndexid
  local integer k=LastHeroIndexid
  if NoHeroLimitOff then
    loop
      exitwhen i>k
      call SetPlayerTechMaxAllowed(p,HeroID[i],0)
      set i=i+1
    endloop
  endif
endfunction

function TechAll takes nothing returns nothing
  call TechAll_ForPlayer(Sentinels[1])
  call TechAll_ForPlayer(Sentinels[2])
  call TechAll_ForPlayer(Sentinels[3])
  call TechAll_ForPlayer(Sentinels[4])
  call TechAll_ForPlayer(Sentinels[5])
  call TechAll_ForPlayer(Scourges[1])
  call TechAll_ForPlayer(Scourges[2])
  call TechAll_ForPlayer(Scourges[3])
  call TechAll_ForPlayer(Scourges[4])
  call TechAll_ForPlayer(Scourges[5])
endfunction

function AllHeroes_Init takes nothing returns nothing
  local integer i
  local integer k
  local integer a=0
  set integer079=FirstHeroIndexid
  set i=FirstHeroIndexid
  set k=LastScourgeHeroIndexid
  loop
    exitwhen i>k
    set a=a+1
    set AllHeroes_indexes[a]=i
    set i=i+1
  endloop
  set i=FirstSentinelHeroIndexid
  set k=LastHeroIndexid
  loop
    exitwhen i>k
    set a=a+1
    set AllHeroes_indexes[a]=i
    set i=i+1
  endloop
  set AllHeroes_count=a
endfunction

function GetSetElement takes nothing returns integer
  local integer i=GetRandomInt(integer079,AllHeroes_count)
  local integer k=AllHeroes_indexes[i]
  set k=AllHeroes_indexes[i]
  if(integer079==AllHeroes_count)then
    set AllHeroes_indexes[i]=0
    return k
  endif
  if(i==AllHeroes_count)then
    set AllHeroes_count=AllHeroes_count-1
    return k
  endif
  set AllHeroes_indexes[i]=AllHeroes_indexes[AllHeroes_count]
  set AllHeroes_count=AllHeroes_count-1
  return k
endfunction

function IsUnitSilenced takes unit u returns boolean
  return GetUnitAbilityLevel(u,'B30G')>0 or GetUnitAbilityLevel(u,'B01T')>0 or GetUnitAbilityLevel(u,'BNsi')>0 or GetUnitAbilityLevel(u,'BNdo')>0 or GetUnitAbilityLevel(u,'B02M')>0 or GetUnitAbilityLevel(u,'Bhea')>0 or GetUnitAbilityLevel(u,'B07V')>0 or GetUnitAbilityLevel(u,'B08O')>0 or GetUnitAbilityLevel(u,'B07U')>0 or GetUnitAbilityLevel(u,'B0DL')>0 or GetUnitAbilityLevel(u,'B08V')>0 or GetUnitAbilityLevel(u,'B031')>0 or GetUnitAbilityLevel(u,'B0FT')>0 or GetUnitAbilityLevel(u,'B0FG')>0 or GetUnitAbilityLevel(u,'B32P')>0 or GetUnitAbilityLevel(u,'A32S')>0
endfunction

function StringTo255_Sup takes string s returns integer
  if s=="a"then
    return 10
  elseif s=="b"then
    return 11
  elseif s=="c"then
    return 12
  elseif s=="d"then
    return 13
  elseif s=="e"then
    return 14
  elseif s=="f"then
    return 15
  else
    return S2I(s)
  endif
endfunction

function StringTo255 takes player p,integer i returns integer
  local string s=udg_Colors[GetPlayerId(p)]
  return R2I((StringTo255_Sup(SubString(s,i,i+1))*16+StringTo255_Sup(SubString(s,i+1,i+2)))*1./2.55)
endfunction

function isAintItemAbility takes integer id returns boolean
  local integer i=1
  loop
    exitwhen i>ItemsAbilitiesMax2
    if id==ItemsAbilities2[i]then
      return false
    endif
    set i=i+1
  endloop
  return true
endfunction

function GetTowerLevel takes unit u returns integer
  local integer i=GetUnitTypeId(u)
  if i=='e00R' or i=='u00M' then
    return 1
  elseif i=='e011' or i=='u00D' then
    return 2
  elseif i=='e00S' or i=='u00N' then
    return 3
  elseif i=='e019' or i=='u00T' then
    return 4
  endif
  return 0
endfunction

function Func0558 takes player p,integer g,unit u,boolean EHX returns nothing
  local texttag tt=CreateTextTag()
  if EHX and PlayerObserver then
    call SetTextTagText(tt,udg_Colors[GetPlayerId(p)]+"+"+I2S(g)+"|r",0.025)
  else
    call SetTextTagText(tt,"+"+I2S(g),0.025)
  endif
  call SetTextTagPosUnit(tt,u,0)
  call SetTextTagColor(tt,255,220,0,255)
  call SetTextTagVelocity(tt,0,0.03)
  call SetTextTagVisibility(tt,LocalPlayer==p or PlayerObserver)
  call SetTextTagFadepoint(tt,2)
  call SetTextTagLifespan(tt,3)
  call SetTextTagPermanent(tt,false)
endfunction

function Func0559 takes player p,integer g,boolean EKX returns integer
  if LoadReal(HeroStats,GetHandleId(p),25)>TimerGetElapsed(GlobalTimer)then
    set g=R2I(g*0.4)
  endif
  if EKX then
    set ReliableGold[GetPlayerId(p)]=ReliableGold[GetPlayerId(p)]+g
  endif
  call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+g)
  return g
endfunction

function Func0560 takes player p,integer g returns nothing
  if g>0 then
    set g=Func0559(p,g,true)
    call Func0558(p,g,udg_Hero[GetPlayerId(p)],false)
  endif
endfunction

function ImitateBountyGain takes player p,unit u,integer g,boolean b returns nothing
  local string s=""
  set g=Func0559(p,g,false)
  call Func0558(p,g,u,true)
  if b and IsPlayerInGame(GetOwningPlayer(u))then
    set integers010[GetPlayerId(GetOwningPlayer(u))]=integers010[GetPlayerId(GetOwningPlayer(u))]+g
  endif
  if PlayerObserver or LocalPlayer==p then
    set s="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"
  endif
  call DestroyEffect(AddSpecialEffectTarget(s,u,"overhead"))
endfunction

function DistribGoldToPlayerForUnit takes player p,integer g,unit u returns nothing
  local string s=""
  set g=Func0559(p,g,true)
  call Func0558(p,g,u,true)
  if LocalPlayer==p or PlayerObserver then
    set s="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"
  endif
  if GetUnitState(u,UNIT_STATE_LIFE)>0.5 then
    call DestroyEffect(AddSpecialEffectTarget(s,u,"overhead"))
  endif
endfunction

function str_replace takes string s,string what,string into returns string
  local string s1=""
  local integer i=0
  local integer l1=StringLength(s)
  local string s2
  local integer l2=StringLength(what)
  local boolean b=false
  loop
    exitwhen i+1>l1
    set s2=SubString(s,i,i+l2)
    if b then
      set s1=s1+SubString(s,i,l1)
      return s1
    elseif s2!=what then
      set s1=s1+SubString(s,i,i+1)
      set i=i+1
    else
      set s1=s1+into
      set i=i+l2
      set b=true
    endif
  endloop
  return s1
endfunction

function Func0564 takes string s,integer k returns string
  local string bs=""
  local integer i=0
  local integer l=StringLength(s)
  local string EWX
  local string ETX="%d"
  local integer nl=StringLength(ETX)
  local integer z=0
  local string EUX=LoadStr(TempHash,'strr',z)
  loop
    exitwhen i+1>l
    set EWX=SubString(s,i,i+nl)
    if EWX!=ETX or EUX==null then
      set bs=bs+SubString(s,i,i+1)
      set i=i+1
    else
      set bs=bs+EUX
      set i=i+nl
      set z=z+1
      set EUX=LoadStr(TempHash,'strr',z)
    endif
  endloop
  call FlushChildHashtable(TempHash,'strr')
  return bs
endfunction

function Func0565 takes integer E_X returns string
  local integer WVE=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
  local player p=Sentinels[0]
  local string E0X=""
  local string E1X=""
  local string s=""
  local string E2X=""
  local string E3X=udg_Colors[WVE]+PlayerNames[WVE]+"|r"
  local unit u=GetTriggerUnit()
  if IsSentinel(GetOwningPlayer(u))then
    if PlayerObserver then
      set E1X=GetObjectName('TX2F')
    else
      if IsSentinel(LocalPlayer)then
        set E1X=GetObjectName('TX27')
      else
        set E1X=GetObjectName('TX28')
      endif
    endif
    set p=Scourges[0]
  else
    if PlayerObserver then
      set E1X=GetObjectName('TX2G')
    else
      if IsScourge(LocalPlayer)then
        set E1X=GetObjectName('TX27')
      else
        set E1X=GetObjectName('TX28')
      endif
    endif
  endif
  if u==unit064 or u==unit067 or u==unit111 or u==unit114 or u==unit053 or u==unit056 or u==Sentinels_Tier3_Top or u==unit100 or u==unit103 or u==unit106 then
    set E0X=GetObjectName('TX24')
  elseif u==unit065 or u==unit068 or u==unit112 or u==unit115 or u==unit054 or u==unit057 or u==Sentinels_Tier3_Mid or u==unit101 or u==unit104 or u==unit107 then
    set E0X=GetObjectName('TX25')
  elseif u==unit066 or u==unit069 or u==unit113 or u==unit116 or u==unit055 or u==unit058 or u==Sentinels_Tier3_Bot or u==unit102 or u==unit105 or u==unit108 then
    set E0X=GetObjectName('TX26')
  else
    set E0X=GetObjectName('TX25')
  endif
  if IsUnitAlly(u,GetOwningPlayer(GetKillingUnit()))then
    if E_X==1 then
      set integers045[WVE]=integers045[WVE]+1
    endif
    set E2X=GetObjectName('TX2A')
  else
    set E2X=GetObjectName('TX2B')
  endif
  if E_X==1 then
    set s=GetObjectName('TX29')
  else
    set s=GetObjectName('TX2E')
  endif
  set s=str_replace(s,"$side",E1X)
  set s=str_replace(s,"$lane",E0X)
  set E2X=str_replace(E2X,"$killer",E3X)
  set s=str_replace(s,"$death",E2X)
  set u=null
  return s
endfunction

function Func0566 takes unit u returns nothing
  call SetWidgetLife(u,Func0468(GetWidgetLife(u)*2/3,1.))
endfunction

function Func0567 takes boolean E6X returns nothing
  local integer g
  local integer WVE=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
  if E6X then
    set g=225
  else
    set g=275
  endif
  if IsScourge(GetOwningPlayer(GetTriggerUnit()))then
    call Func0560(Sentinels[1],g)
    call Func0560(Sentinels[2],g)
    call Func0560(Sentinels[3],g)
    call Func0560(Sentinels[4],g)
    call Func0560(Sentinels[5],g)
    call Func0566(ScourgeFountain)
  else
    call Func0560(Scourges[1],g)
    call Func0560(Scourges[2],g)
    call Func0560(Scourges[3],g)
    call Func0560(Scourges[4],g)
    call Func0560(Scourges[5],g)
    call Func0566(SentFountain)
  endif
  call DisplayTimedTextToForceEx(AllPlayers,5.00,Func0565(0))
  if not(boolean081 or boolean082 or boolean083 or boolean078 or boolean079 or boolean080)and SentinelHaveMegaCreeps==false then
    call DisplayTimedTextToForceEx(AllPlayers,20,GetObjectName('n04O')+" "+GetObjectName('n0C7'))
    set SentinelHaveMegaCreeps=true
  endif
  if not(SentTopRaxMExists or SentMidRaxMExists or SentBotRaxMExists or SentTopRaxRExists or SentMidRaxRExists or SentBotRaxRExists)and ScourgeHaveMegaCreeps==false then
    call DisplayTimedTextToForceEx(AllPlayers,20,GetObjectName('n04X')+" "+GetObjectName('n0C9'))
    set ScourgeHaveMegaCreeps=true
  endif
endfunction

function RefreshCircles takes boolean sent returns nothing
  if sent then
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Sentinels[1])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Sentinels[2])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Sentinels[3])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Sentinels[4])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Sentinels[5])])
  else
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Scourges[1])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Scourges[2])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Scourges[3])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Scourges[4])])
    call UnitResetCooldown(CirclesOfPower[GetPlayerId(Scourges[5])])
  endif
endfunction

function ProvideTowerGold takes unit u,integer QIE returns nothing
  local integer g
  local player p=GetOwningPlayer(u)
  local integer ZBE=0
  local integer ZCE
  set g=120+40*QIE
  if IsUnitAlly(GetDyingUnit(),p)then
    set g=g/2
  endif
  if GetOwningPlayer(GetDyingUnit())==Scourges[0]then
    call Func0560(Sentinels[1],g)
    call Func0560(Sentinels[2],g)
    call Func0560(Sentinels[3],g)
    call Func0560(Sentinels[4],g)
    call Func0560(Sentinels[5],g)
  else
    call Func0560(Scourges[1],g)
    call Func0560(Scourges[2],g)
    call Func0560(Scourges[3],g)
    call Func0560(Scourges[4],g)
    call Func0560(Scourges[5],g)
  endif
  call UnitAddAbility(GetDyingUnit(),'A3C9')
endfunction

function Func0570 takes integer id,integer XEX returns boolean
  local integer i=1
  if XEX==0 then
    return true
  endif
  return GetHeroPrimaryAttributeById(id)==XEX
  if XEX==1 then
    loop
      exitwhen i>integer108
      if integers088[i]==id then
        return true
      endif
      set i=i+1
    endloop
  elseif XEX==3 then
    loop
      exitwhen i>integer107
      if integers087[i]==id then
        return true
      endif
      set i=i+1
    endloop
  elseif XEX==2 then
    loop
      exitwhen i>integer109
      if integers089[i]==id then
        return true
      endif
      set i=i+1
    endloop
  endif
  return false
endfunction

function GetRandomHeroByAttr takes player p,integer at returns nothing
  local integer i
  local integer k
  local location spawnloc
  local integer z
  set HasUsedRandom[GetPlayerId(p)]=true
  if IsSentinel(p)then
    set spawnloc=GetRectCenter(gg_rct_Hero_Creation_NE)
  else
    set spawnloc=GetRectCenter(gg_rct_Hero_Creation_UD)
  endif
  set i=FirstHeroIndexid
  set k=LastHeroIndexid
  loop
    set z=GetRandomInt(i,k)
    exitwhen b_isHeroPicked[z]==false and Func0570(HeroID[z],at)
  endloop
  if boolean087==false then
    call TechHeroForAll(HeroID[z])
  endif
  call CreateUnitAtLoc(p,HeroID[z],spawnloc,0)
  call RemoveLocation(spawnloc)
  set spawnloc=null
endfunction

function GetRndHeroIndex takes nothing returns integer
  return GetRandomInt(FirstHeroIndexid,LastHeroIndexid)
endfunction

function IsBasicCourier takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='n00I' or i=='n022' or i=='n021' or i=='n0KY' or i=='n0KZ' or i=='n0LE' or i=='n023' or i=='n024' or i=='n025' or i=='n0L0' or i=='n0L1' or i=='n0M4' or i=='n00M' or i=='n0HV' or i=='n0LS'
endfunction

function IsFlyingCourier takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='e01H' or i=='e01Z' or i=='e02R' or i=='e02T' or i=='e02S' or i=='e030'
endfunction

function IsCourier takes unit u returns boolean
  return IsBasicCourier(u)or IsFlyingCourier(u)
endfunction

function IsValidTree takes destructable d returns boolean
  local integer i=GetDestructableTypeId(d)
  return i=='CTtr' or i=='JTtw' or i=='NTtc' or i=='NTtw' or i=='ATtr' or i=='B002' or i=='B003' or i=='B005' or i=='ITtw' or i=='BTtc'
endfunction

function IsUnitSummoned takes unit u returns boolean
  return IsUnitType(u,UNIT_TYPE_SUMMONED)and GetUnitTypeId(u)!='N0MM'
endfunction

function IsMagicImmune takes unit u returns boolean
  return IsUnitType(u,UNIT_TYPE_MAGIC_IMMUNE)
endfunction

function IsUnitDummyOfPlayer takes unit u returns boolean
  return GetUnitAbilityLevel(u,'A04R')>0 and IsPlayerBelongToTeams(GetOwningPlayer(u))
endfunction

function IsBuggyFlying takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='n00L' or i=='H00F' or i=='H00E' or i=='H00G' or i=='O017' or i=='QTW8' or i=='QTW9' or i=='QTWA' or i=='QTWB'
endfunction

function IsDamageReal takes real d returns boolean
  return 2<d and d<9000
endfunction

function RedefineModeTyper takes nothing returns nothing
  local integer i=1
  set PlayerModeTyper=Sentinels[1]
  loop
    exitwhen IsPlayer(PlayerModeTyper)or i>5
    set i=i+1
    set PlayerModeTyper=Sentinels[i]
  endloop
  if IsPlayer(PlayerModeTyper)==false then
    set PlayerModeTyper=Scourges[1]
    set i=1
    loop
      exitwhen IsPlayer(PlayerModeTyper)or i>5
      set i=i+1
      set PlayerModeTyper=Scourges[i]
    endloop
  endif
endfunction

function Func0583 takes unit source returns boolean
  return IsUnitType(source,UNIT_TYPE_HERO)and IsUnitIllusion(source)==false and GetUnitTypeId(source)!='N0MM' and GetUnitTypeId(source)!='H00Y' and GetUnitTypeId(source)!='H07G' and GetUnitTypeId(source)!='H0B8' and GetUnitTypeId(source)!='H0DL'
endfunction

function Func0584 takes integer k returns integer
  local integer i=0
  loop
    exitwhen i>LastHeroIndexid
    if integers092[i]==k then
      return HeroID[i]
    endif
    set i=i+1
  endloop
  return-1
endfunction

function Func0585 takes integer ZAE returns integer
  local integer QIE=1
  loop
    exitwhen QIE>LastHeroIndexid
    if ZAE==HeroID[QIE]then
      return QIE
    endif
    set QIE=QIE+1
  endloop
  return 0
endfunction

function Func0586 takes unit source returns integer
  local integer ZAE=GetHeroLevel(source)
  if ZAE==1 then
    return 100
  elseif ZAE==2 then
    return 120
  elseif ZAE==3 then
    return 140
  elseif ZAE==4 then
    return 160
  elseif ZAE==5 then
    return 180
  else
    return 100*ZAE-320
  endif
  return 0
endfunction

function IsObserver takes player p returns boolean
  return udg_ObserverMode and(udg_Observer1==p or udg_Observer2==p)
endfunction

function Func0588 takes nothing returns nothing
  set LocalPlayer=GetLocalPlayer()
  set PlayerObserver=IsObserver(LocalPlayer)
  set PlayerId=GetPlayerId(LocalPlayer)
endfunction

function IsUnitVisibleEx takes unit u,player p returns boolean
  return IsUnitVisible(u,p)and(GetUnitAbilityLevel(u,'A1HX')==0 or IsUnitAlly(u,p)or IsObserver(p))
endfunction

function Func0590 takes unit u returns boolean
  return IsUnitVisibleEx(u,LocalPlayer)
endfunction

function Func0591 takes unit u returns boolean
  return IsUnitVisible(u,Neutrals)==false
endfunction

function Func0592 takes unit u returns boolean
  return Func0591(u)
endfunction

function Func0593 takes integer id returns boolean
  return id=='u014' or id=='u015' or id=='u016' or id=='u01D' or id=='u01E' or id=='u01F' or id=='u01R' or id=='u01S' or id=='u01T' or id=='u017' or id=='u019' or id=='u018' or id=='u01A' or id=='u01B' or id=='u01C' or id=='u01U' or id=='u01V' or id=='u01W'
endfunction

function Func0594 takes unit u returns boolean
  return Func0593(GetUnitTypeId(u))
endfunction

function Func0595 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='n0FJ' or id=='n0FI' or id=='n0F6' or id=='n0FH'
endfunction

function Func0596 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='o018' or id=='o002' or id=='o00B' or id=='o01B'
endfunction

function Func0597 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='n00Q' or id=='n00O' or id=='n00P' or id=='n00N'
endfunction

function Func0598 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return Func0596(u)or Func0597(u)or id=='otot'
endfunction

function Func0599 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='o00L' or id=='o00M' or id=='o00N' or id=='o00O'
endfunction

function Func0600 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='o00V' or id=='o00T' or id=='o00W' or id=='o00U'
endfunction

function Func0601 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='o000' or id=='o001' or id=='o00A' or id=='o00X' or id=='n12O'
endfunction

function Func0602 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='o01C' or id=='o01D' or id=='o01E' or id=='osp4' or id=='o008' or id=='o009'
endfunction

function IsPowerCog takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='u00S' or id=='h0GC'
endfunction

function Func0604 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='n01E' or id=='n019'
endfunction

function Func0605 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='o005' or id=='o006' or id=='o007' or id=='o00F'
endfunction

function Func0606 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='efon' or id=='efo2'
endfunction

function Func0607 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='u00R' or i=='umtw' or i=='e026' or i=='ebal'
endfunction

function Func0608 takes integer i returns boolean
  return i=='h0CV' or i=='h0CX' or i=='h0CW'
endfunction

function Func0609 takes unit u returns boolean
  return Func0608(GetUnitTypeId(u))
endfunction

function Func0610 takes unit u returns boolean
  return Func0599(u)or Func0600(u)or Func0601(u)or Func0602(u)or Func0598(u)or Func0609(u)
endfunction

function Func0611 takes integer i returns boolean
  return i=='n004' or i=='n018' or i=='n01C' or i=='n01G'
endfunction

function IsUnitSpiritBear takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='n004' or i=='n018' or i=='n01C' or i=='n01G'
endfunction

function Func0613 takes integer i returns boolean
  return i=='h0CH' or i=='h0CF' or i=='h0C1' or i=='h0CG'
endfunction

function Func0614 takes unit u returns boolean
  return Func0613(GetUnitTypeId(u))
endfunction

function IsUnitWard takes unit u returns boolean
  return IsUnitSummoned(u)and IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false and IsUnitType(u,UNIT_TYPE_RANGED_ATTACKER)==false
endfunction

function Func0616 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='o01J' or i=='o01K' or i=='o01L' or i=='o01M'
endfunction

function Func0617 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='n00J' or id=='n00H' or id=='n00A' or id=='n00G' or id=='n006' or id=='n00K'
endfunction

function Func0618 takes integer id returns boolean
  return id=='n00U' or id=='n0KU' or id=='n00Y' or id=='n0KV' or id=='n00Z' or id=='n0KW'
endfunction

function Func0619 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='n00U' or id=='n0KU' or id=='n00Y' or id=='n0KV' or id=='n00Z' or id=='n0KW'
endfunction

function Func0620 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='hwat' or id=='hwt2' or id=='hwt3' or id=='h006'
endfunction

function IsSentinelsTower takes integer i returns boolean
  return i=='e00R' or i=='e011' or i=='e00S' or i=='e019'
endfunction

function IsScourgeTower takes integer i returns boolean
  return i=='u00M' or i=='u00D' or i=='u00N' or i=='u00T'
endfunction

function Func0623 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='O017' or i=='QTW8' or i=='N0MA' or i=='N0MB' or i=='N0MC' or i=='N0MO' or Func0593(i)or IsFlyingCourier(u)
endfunction

function IsUnitHexed takes unit u returns boolean
  return GetUnitAbilityLevel(u,'BOhx')>0 or GetUnitAbilityLevel(u,'B00H')>0
endfunction

function Func0625 takes integer i returns boolean
  return i=='npn3' or i=='npn6' or i=='n010' or i=='n0GZ'
endfunction

function Func0626 takes integer i returns boolean
  return i=='npn2' or i=='npn5' or i=='n012' or i=='n0H1'
endfunction

function Func0627 takes integer i returns boolean
  return i=='npn1' or i=='npn4' or i=='n011' or i=='n0H0'
endfunction

function Func0628 takes integer i returns boolean
  return Func0625(i)or Func0626(i)or Func0627(i)
endfunction

function Func0629 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return Func0625(i)or Func0626(i)or Func0627(i)
endfunction

function Func0630 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return IsUnitSpiritBear(u)or Func0593(i)or IsCourier(u)or u==Roshan or Func0619(u)or Func0629(u)
endfunction

function Func0631 takes integer id returns boolean
  return Func0611(id)or Func0593(id)or Func0618(id)or Func0628(id)
endfunction

function Func0632 takes unit u returns boolean
  return Func0631(GetUnitTypeId(u))
endfunction

function Func0633 takes integer a,integer d returns nothing
  if a>0 then
    call WriteRealMemory(a+0x3C,ReadRealMemory(a+0x3C)+d)
    call WriteRealMemory(a+0x40,ReadRealMemory(a+0x40)+d)
  endif
endfunction

function Func0634 takes unit u,boolean O3X returns nothing
  local integer a=GetHandleId(u)
  local integer d=1
  if O3X then
    set d=-1
  endif
  if a>0 then
    set a=ConvertHandle(u)
    if a>0 then
      call Func0633(GetUnitAbility(u,'A04E'),d)
      call Func0633(GetUnitAbility(u,'A30A'),d)
      call Func0633(GetUnitAbility(u,'A0EA'),d)
      call Func0633(GetUnitAbility(u,'A0H8'),d)
      call Func0633(GetUnitAbility(u,'A1DI'),d)
      call Func0633(GetUnitAbility(u,'A1FT'),d)
      call Func0633(GetUnitAbility(u,'A1FU'),d)
      call Func0633(GetUnitAbility(u,'A1FV'),d)
      call Func0633(GetUnitAbility(u,'A1FW'),d)
      call Func0633(GetUnitAbility(u,'A1NO'),d)
    endif
  endif
endfunction

function Func0635 takes unit source returns real
  if IsSentinel(GetOwningPlayer(source))then
    return GetRectCenterX(gg_rct_Hero_Creation_NE)
  else
    return GetRectCenterX(gg_rct_Hero_Creation_UD)
  endif
endfunction

function Func0636 takes unit source returns real
  if IsSentinel(GetOwningPlayer(source))then
    return GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    return GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
endfunction

function IsUnitCycloned takes unit u returns boolean
  return GetUnitAbilityLevel(u,'Bcyc')>0 or GetUnitAbilityLevel(u,'Bcy2')>0
endfunction

function IsUnitSleeping takes unit u returns boolean
  return(GetUnitAbilityLevel(u,('B02F'))>0)or(GetUnitAbilityLevel(u,('BUsp'))>0)or(GetUnitAbilityLevel(u,('BUst'))>0)
endfunction

function Func0639 takes unit u returns boolean
  return GetUnitAbilityLevel(u,'Aetl')>0 or GetUnitAbilityLevel(u,'B01N')>0
endfunction

function Func0640 takes unit u returns real
  local integer RVX=GetHeroInt(u,true)
  if RVX==0 then
    set RVX=GetHeroInt(udg_Hero[GetPlayerId(GetOwningPlayer(u))],true)
  endif
  return .05*IMaxIF(LoadInteger(HY,GetHandleId(u),'LENS'+'bnss'),0)+1.+RVX/16*0.01
endfunction

function Func0641 takes boolean RXX,unit WXE,real dmg returns nothing
  if RXX then
    call SetWidgetLife(WXE,dmg*0.25+GetWidgetLife(WXE))
  else
    call SetWidgetLife(WXE,dmg*0.05+GetWidgetLife(WXE))
  endif
  call DestroyEffect(AddSpecialEffectTarget("SpellFizzle.mdx",WXE,"overhead"))
endfunction

function Func0642 takes unit u,unit SGE,real dmg returns nothing
  set FakeDamageType[IsFakeDamage]=2
  set IsFakeDamage=IsFakeDamage+1
  call UnitDamageTarget(u,SGE,dmg*Func0640(u),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_METAL_HEAVY_SLICE)
  set IsFakeDamage=IsFakeDamage-1
  set FakeDamageType[IsFakeDamage]=0
endfunction

function Func0643 takes unit u,unit SGE,real dmg,integer at,integer dt returns nothing
  set FakeDamageType[IsFakeDamage]=dt
  set IsFakeDamage=IsFakeDamage+1
  call UnitDamageTarget(u,SGE,dmg*Func0640(u),true,true,ConvertAttackType(at),ConvertDamageType(dt),null)
  set FakeDamageType[IsFakeDamage]=0
  set IsFakeDamage=IsFakeDamage-1
endfunction

function DamageTarget takes unit u,unit SGE,integer dt,real dmg returns nothing
  if dt==0 then
    return
  endif
  set FakeDamageType[IsFakeDamage]=dt
  set IsFakeDamage=IsFakeDamage+1
  if dt!=6 and dt!=11 then
    set dmg=dmg*Func0640(u)
    if(dt==3 or dt==2 or dt==23 or dt==7 or dt==10)and Func0607(SGE)then
      set dmg=dmg*2
    endif
  endif
  if dt==1 then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
  elseif dt==2 then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
  elseif dt==23 then
    call Func0634(SGE,false)
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
    call Func0634(SGE,true)
  elseif dt==3 or(dt==7 and Func0639(SGE))then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
  elseif dt==4 then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
  elseif dt==5 then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
  elseif dt==6 or dt==11 then
    call SetUnitState(SGE,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(SGE,UNIT_STATE_LIFE)-dmg,1))
    if IsUnitType(SGE,UNIT_TYPE_HERO)then
      call UnitDamageTarget(u,SGE,0,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
      set integers022[GetPlayerId(GetOwningPlayer(u))]=integers022[GetPlayerId(GetOwningPlayer(u))]+R2I(dmg)
    endif
    if dt==6 or GetUnitAbilityLevel(SGE,'A21I')==0 and GetUnitState(SGE,UNIT_STATE_LIFE)<2 and IsUnitInvulnerable(SGE)==false then
      if IsUnitType(SGE,UNIT_TYPE_SUMMONED)==false then
        call UnitRemoveBuffs(SGE,true,true)
      endif
      call UnitRemoveAbility(SGE,'Aetl')
      call UnitDamageTarget(CreateUnit(GetOwningPlayer(u),'e00E',0,0,0),SGE,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
    endif
  elseif dt==7 then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
  elseif dt==8 or dt==9 then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
  elseif dt==10 then
    call UnitDamageTarget(u,SGE,dmg,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
  endif
  set IsFakeDamage=IsFakeDamage-1
  set FakeDamageType[IsFakeDamage]=0
endfunction

function Func0645 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=LoadUnitHandle(HY,(ZAE),30)
  local integer ZBE=(LoadInteger(HY,(ZAE),36))
  local real result=(LoadReal(HY,(ZAE),20))
  call DamageTarget(source,RCX,ZBE,result)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func0646 takes integer k returns integer
  local integer i=1
  if k==0 then
    return 0
  endif
  loop
    exitwhen k/2<=1
    set i=i+1
    set k=k/2
  endloop
  return i
endfunction

function Func0647 takes unit HDE,unit SGE,real RGX,integer at,integer dt returns nothing
  if dt>0 then
    call Func0643(HDE,SGE,RGX,at,Func0646(dt))
  else
    call DamageTarget(HDE,SGE,2,RGX)
  endif
endfunction

function Func0648 takes unit source,unit RCX,integer ZAE,real result,real ZEE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveUnitHandle(HY,(QIE),30,RCX)
  call SaveInteger(HY,(QIE),36,(ZAE))
  call SaveReal(HY,(QIE),20,((result)*1.0))
  call TriggerRegisterTimerEvent(RBX,ZEE,false)
  call TriggerAddCondition(RBX,Condition(function Func0645))
  set RBX=null
endfunction

function Func0649 takes player whichPlayer,string ZJE returns nothing
  local sound RKX=CreateSound(ZJE,false,false,false,10,10,"DefaultEAXON")
  if(LocalPlayer==whichPlayer)then
    call StartSound(RKX)
  endif
  call KillSoundWhenDone(RKX)
endfunction

function Func0650 takes player whichPlayer,string ZJE returns nothing
  call Func0649(Sentinels[1],ZJE)
  call Func0649(Sentinels[2],ZJE)
  call Func0649(Sentinels[3],ZJE)
  call Func0649(Sentinels[4],ZJE)
  call Func0649(Sentinels[5],ZJE)
  call Func0649(Scourges[1],ZJE)
  call Func0649(Scourges[2],ZJE)
  call Func0649(Scourges[3],ZJE)
  call Func0649(Scourges[4],ZJE)
  call Func0649(Scourges[5],ZJE)
endfunction

function Error takes player whichPlayer,string ZJE returns nothing
  local sound RKX=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)
  if(LocalPlayer==whichPlayer)then
    if(ZJE!="")and(ZJE!=null)then
      call Func0205(ZJE,whichPlayer)
    endif
    call StartSound(RKX)
  endif
  call KillSoundWhenDone(RKX)
endfunction

function Func0652 takes player whichPlayer,string ZJE returns nothing
  local sound RKX=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)
  if(LocalPlayer==whichPlayer)then
    if(ZJE!="")and(ZJE!=null)then
      call DisplayTimedTextToPlayer(whichPlayer,0,0,5.00,"|cffffcc00"+ZJE+"|r")
    endif
    call StartSound(RKX)
  endif
  call KillSoundWhenDone(RKX)
endfunction

function IssueImmediateOrderByIdExFunc takes unit RSX,integer RTX returns boolean
  local boolean b=IsTriggerEnabled(trigger001)
  local boolean R5E=false
  if b then
    call DisableTrigger(trigger001)
  endif
  set R5E=IssueImmediateOrderById(RSX,RTX)
  if b then
    call EnableTrigger(trigger001)
  endif
  return R5E
endfunction

function Func0654 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call IssueImmediateOrderByIdExFunc(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))
  call DelayedCallBackClean()
endfunction

function Func0655 takes unit u,integer id returns nothing
  local integer h=DelayedCallBack(0.,function Func0654)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,id)
endfunction

function Func0656 takes unit u returns nothing
  call PauseUnit(u,true)
  set boolean061=true
  call IssueImmediateOrderByIdExFunc(u,851972)
  set boolean061=false
  call PauseUnit(u,false)
endfunction

function InterruptUnitError takes unit u,integer R_X returns nothing
  call Func0656(u)
  call Error(GetOwningPlayer(u),GetObjectName(R_X))
endfunction

function Func0658 takes integer R_X returns nothing
  call InterruptUnitError(GetTriggerUnit(),R_X)
endfunction

function IsDayTime takes nothing returns boolean
  return GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00
endfunction

function RunIfTrue takes string s,boolean b returns nothing
  if b then
    call ExecuteFunc(s)
  endif
endfunction

function Func0661 takes real x,real PSE returns real
  local real d=real009+PSE
  if(x<d)then
    return d
  endif
  set d=real010-PSE
  if(x>d)then
    return d
  endif
  return x
endfunction

function Func0662 takes real y,real PSE returns real
  local real d=real007+PSE
  if(y<d)then
    return d
  endif
  set d=real008-PSE
  if(y>d)then
    return d
  endif
  return y
endfunction

function SafeX50 takes real x returns real
  return Func0661(x,50.)
endfunction

function Func0664 takes real x returns real
  return Func0661(x,75.)
endfunction

function SafeY50 takes real y returns real
  return Func0662(y,50.)
endfunction

function Func0666 takes real y returns real
  return Func0662(y,75.)
endfunction

function Func0667 takes real x returns real
  return Func0661(x,0.)
endfunction

function Func0668 takes real y returns real
  return Func0662(y,0.)
endfunction

function Func0669 takes unit source returns nothing
  call SaveBoolean(HY,(GetHandleId(source)),38,(false))
  call FlushChildHashtable(HY,(GetHandleId(source)))
  call RemoveUnit(source)
endfunction

function Func0670 takes unit u,real a returns nothing
  local real oa=LoadReal(HY,GetHandleId(u),'AMPL')
  set oa=Func0468(oa+a,0.)
  call SaveReal(HY,GetHandleId(u),'AMPL',oa)
endfunction

function Func0671 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,26))
  call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+(LoadReal(HY,h,20)))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
  set u=null
endfunction

function Func0672 takes unit u,real IIX returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveReal(HY,h,20,((IIX)*1.0))
  call SaveUnitHandle(HY,h,26,(u))
  call TimerStart(t,0,false,function Func0671)
  set t=null
endfunction

function Func0673 takes unit u,real IIX returns nothing
  local real INX=GetUnitState(u,UNIT_STATE_MAX_LIFE)
  local real FZE=GetWidgetLife(u)
  if(GetUnitState(u,UNIT_STATE_LIFE)>.6)then
    if IIX>(INX-FZE)then
      if IIX>=FZE then
        call SetUnitState(u,UNIT_STATE_LIFE,INX)
        call Func0672(u,IIX-(INX-FZE))
      else
        call Func0672(u,IIX)
      endif
    else
      call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+IIX)
    endif
  endif
endfunction

function Func0674 takes unit source,unit RCX,real result returns boolean
  local real ZEE=GetUnitX(source)
  local real ZWE=GetUnitY(source)
  local real ZYE=GetUnitX(RCX)
  local real ICX=GetUnitY(RCX)
  return((ZEE-ZYE)*(ZEE-ZYE)+(ZWE-ICX)*(ZWE-ICX))<result*result
endfunction

function DistanceBetweenUnits takes unit source,unit RCX returns real
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetUnitX(RCX)
  local real ZYE=GetUnitY(RCX)
  if source==null or RCX==null then
    return I2R(9999999999)
  else
    return SquareRoot((result-ZWE)*(result-ZWE)+(ZEE-ZYE)*(ZEE-ZYE))
  endif
  return 1.0
endfunction

function Func0676 takes unit source,location IGX returns real
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetLocationX(IGX)
  local real ZYE=GetLocationY(IGX)
  if source==null then
    return I2R(9999999999)
  else
    return SquareRoot((result-ZWE)*(result-ZWE)+(ZEE-ZYE)*(ZEE-ZYE))
  endif
  return 1.0
endfunction

function DistanceBetweenXY takes real x1,real y1,real x2,real y2 returns real
  return SquareRoot((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))
endfunction

function Func0678 takes unit u,real x2,real y2 returns real
  return SquareRoot((GetUnitX(u)-x2)*(GetUnitX(u)-x2)+(GetUnitY(u)-y2)*(GetUnitY(u)-y2))
endfunction

function GetClosestOfGroup takes group g,real x,real y returns unit
  local group g2=GetAvailableGroup()
  local real ILX=99999
  local unit u
  local unit IMX=null
  local real r=0.
  call GroupAddGroup(g,g2)
  loop
    set u=FirstOfGroup(g2)
    exitwhen u==null
    set r=DistanceBetweenXY(GetUnitX(u),GetUnitY(u),x,y)
    if r<ILX then
      set IMX=u
      set ILX=r
    endif
    call GroupRemoveUnit(g2,u)
  endloop
  call KillGroup(g2)
  set tt_unit1=IMX
  set u=null
  set IMX=null
  return tt_unit1
endfunction

function Func0680 takes unit d returns nothing
  call SetUnitState(d,UNIT_STATE_MANA,GetUnitState(d,UNIT_STATE_MAX_MANA))
endfunction

function Func0681 takes real x,real y,string HEE,integer N1E,integer N2E,integer N3E,integer N4E,boolean ISX,boolean ITX returns ubersplat
  local integer h
  set ubersplat001=CreateUbersplat(x,y,HEE,N1E,N2E,N3E,N4E,ISX,ITX)
  set h=GetHandleId(ubersplat001)
  if h>0 then
    return ubersplat001
  endif
  return null
endfunction

function Func0682 takes ubersplat ub returns nothing
  if GetHandleId(ub)>0 then
    call DestroyUbersplat(ub)
  endif
endfunction

function Func0683 takes ubersplat ub,boolean IYX returns nothing
  if GetHandleId(ub)>0 then
    call SetUbersplatRenderAlways(ub,IYX)
  endif
endfunction

function RollCommand_ForForce takes nothing returns nothing
  if ShowRollNumbers[GetPlayerId(GetEnumPlayer())]then
    call DisplayTimedTextToPlayer(GetEnumPlayer(),0,0,TempReal2,TempStr)
  endif
endfunction

function RollCommand takes force f,real dur,string s returns nothing
	set TempStr=s
	set TempReal2=dur
	call ForForce(f,function RollCommand_ForForce)
endfunction

function Func0686 takes unit source,real result returns nothing
  call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_LIFE)+result)
endfunction

function Func0687 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func0688 takes string ZJE,unit source,string I3X,real result returns nothing
  local effect I4X=AddSpecialEffectTarget(ZJE,source,I3X)
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveEffectHandle(HY,(ZAE),32,(I4X))
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func0687))
  set I4X=null
  set RBX=null
endfunction

function Func0689 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func0690 takes string ZJE,unit source,string I3X,real result returns nothing
  local effect I4X=AddSpecialEffectTarget(ZJE,source,I3X)
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveEffectHandle(HY,(ZAE),32,(I4X))
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func0689))
  set I4X=null
  set RBX=null
endfunction

function Func0691 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func0692 takes string ZJE,real result,real ZEE,real ZWE returns nothing
  local effect I4X=AddSpecialEffect(ZJE,result,ZEE)
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveEffectHandle(HY,(ZAE),32,(I4X))
  call TriggerRegisterTimerEvent(RBX,ZWE,false)
  call TriggerAddCondition(RBX,Condition(function Func0691))
  set I4X=null
  set RBX=null
endfunction

function Func0693 takes unit source,integer ZAE returns item
  local integer QIE=0
  local item AVX
  loop
    exitwhen QIE==6
    set AVX=UnitItemInSlot(source,QIE)
    if AVX!=null and GetItemTypeId(AVX)==ZAE then
      set tt_item1=AVX
      set AVX=null
      return tt_item1
    endif
    set QIE=QIE+1
  endloop
  set AVX=null
  return null
endfunction

function Func0694 takes timer AXX returns nothing
  call PauseTimer(AXX)
  call FlushChildHashtable(HY,(GetHandleId(AXX)))
  call DestroyTimer(AXX)
endfunction

function Func0695 takes real result,real ZEE,real ZWE,real ZYE returns real
  return SquareRoot((result-ZWE)*(result-ZWE)+(ZEE-ZYE)*(ZEE-ZYE))
endfunction

function Func0696 takes unit u1,unit u2 returns real
  return Atan2(GetUnitY(u2)-GetUnitY(u1),GetUnitX(u2)-GetUnitX(u1))
endfunction

function AngleBetweenUnits takes unit u1,unit u2 returns real
  return bj_RADTODEG*Func0696(u1,u2)
endfunction

function  AngleBetweenXY takes real result,real ZEE,real ZWE,real ZYE returns real
  return bj_RADTODEG*Atan2(ZYE-ZEE,ZWE-result)
endfunction

function IsNeutralsOrAllies takes player p returns boolean
  return GetLocalPlayer()!=Player(15)and IsPlayerAlly(LocalPlayer,p)
endfunction

function IsNeutralsOrObserversOrAllies takes player p returns boolean
  return PlayerObserver or IsNeutralsOrAllies(p)
endfunction

function Func0701 takes nothing returns nothing
  call DestroyLightning(LoadLightningHandle(HY,GetHandleId(GetExpiredTimer()),41))
  call DelayedCallBackClean()
endfunction

function Func0702 takes string G5E,real x1,real y1,real x2,real y2,real r,real g,real b,real a,real D1E returns nothing
  local integer h=DelayedCallBack(D1E,function Func0701)
  local lightning l=AddLightning(G5E,true,x1,y1,x2,y2)
  call SetLightningColor(l,r,g,b,a)
  call SaveLightningHandle(HY,h,41,l)
endfunction

function Func0703 takes string s,unit u returns nothing
  local texttag t=CreateTextTag()
  call SetTextTagText(t,s,0.03)
  call SetTextTagPosUnit(t,u,0)
  call SetTextTagColor(t,255,233,12,255)
  call SetTextTagPermanent(t,true)
endfunction

function TexttagOnUnitEx takes string s,real D1E,unit u,real AHX,real offset,integer r,integer g,integer b,integer a returns nothing
  local texttag tt=CreateTextTag()
  call SetTextTagText(tt,s,AHX)
  call SetTextTagPosUnit(tt,u,offset)
  call SetTextTagColor(tt,r,g,b,a)
  call SetTextTagVelocity(tt,0,0.0355)
  call SetTextTagFadepoint(tt,2)
  call SetTextTagPermanent(tt,false)
  call SetTextTagLifespan(tt,D1E)
  call SetTextTagVisibility(tt,Func0590(u)or PlayerObserver)
  set tt=null
endfunction

function TextTagOnUnit takes string s,real D1E,unit u,real AHX,integer r,integer g,integer b,integer a,boolean AKX returns nothing
  local texttag tt=CreateTextTag()
  call SetTextTagText(tt,s,AHX)
  call SetTextTagPosUnit(tt,u,64)
  call SetTextTagColor(tt,r,g,b,a)
  call SetTextTagVelocity(tt,0,0.0355)
  call SetTextTagFadepoint(tt,2)
  call SetTextTagPermanent(tt,false)
  call SetTextTagLifespan(tt,D1E)
  call SetTextTagVisibility(tt,AKX)
  set tt=null
endfunction

function ReturnTrue takes nothing returns boolean
  return true
endfunction

function TriggerRegisterAnyUnitEvent takes trigger t,playerunitevent APX returns nothing
  local integer i=0
  loop
    call TriggerRegisterPlayerUnitEvent(t,Player(i),APX,Condition(function ReturnTrue))
    set i=i+1
    exitwhen i==16
  endloop
endfunction

function TriggerRegisterHumanUnitEvent takes trigger t,playerunitevent pue returns nothing
  local integer i=1
  loop
    exitwhen i>5
    call TriggerRegisterPlayerUnitEvent(t,Sentinels[i],pue,Condition(function ReturnTrue))
    call TriggerRegisterPlayerUnitEvent(t,Scourges[i],pue,Condition(function ReturnTrue))
    set i=i+1
  endloop
endfunction

function KillTreesEnum takes nothing returns nothing
  if IsValidTree(GetEnumDestructable())and IsDestructableAliveBJ(GetEnumDestructable())then
    set TreesKilled=TreesKilled+1
    call KillDestructable(GetEnumDestructable())
  endif
endfunction

function KillTrees takes real x,real y,real d returns integer
  local rect r=Rect(x-d,y-d,x+d,y+d)
  set TreesKilled=0
  call EnumDestructablesInRect(r,Condition(function ReturnTrue),function KillTreesEnum)
  call RemoveRect(r)
  set r=null
  return TreesKilled
endfunction

function ForceMovements takes unit u,real x,real y,boolean AYX,boolean AZX returns nothing
  if AZX then
    call KillTrees(x,y,150)
  endif
  if AYX then
    call SetUnitPosition(u,x,y)
  else
    call SetUnitX(u,x)
    call SetUnitY(u,y)
  endif
endfunction

function StunFor001 takes unit u returns nothing
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call UnitAddAbility(d,'A0R9') //Generic_Ministun
  call IssueTargetOrder(d,"thunderbolt",u)
  set d=null
endfunction

function PlaySoundAtPosForPlayer takes player p,sound s,real x,real y returns nothing
  call SetSoundPosition(s,x,y,0)
  call SetSoundVolume(s,127)
  set bj_lastPlayedSound=s
  if(s!=null)then
    if(LocalPlayer==p)then
      call StartSound(s)
    endif
  endif
endfunction

function PlaySoundAtPos takes sound s,real x,real y returns nothing
  call SetSoundPosition(s,x,y,0)
  call SetSoundVolume(s,127)
  set bj_lastPlayedSound=s
  if(s!=null)then
    call StartSound(s)
  endif
endfunction

function TimedReveal_End takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local fogmodifier fm=(LoadFogModifierHandle(HY,(h),42))
  call FogModifierStop(fm)
  call DestroyFogModifier(fm)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set fm=null
  return false
endfunction

function TimedReveal takes player p,real dur,real x,real y,real r returns nothing
  local trigger t=CreateTrigger()
  local fogmodifier fm=CreateFogModifierRadius(p,FOG_OF_WAR_VISIBLE,x,y,r,true,true)
  call FogModifierStart(fm)
  call SaveFogModifierHandle(HY,(GetHandleId(t)),42,(fm))
  call TriggerRegisterTimerEvent(t,dur,false)
  call TriggerAddCondition(t,Condition(function TimedReveal_End))
  set fm=null
  set t=null
endfunction

function SetFogModifierLifespan_Clean takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local fogmodifier f=LoadFogModifierHandle(HY,h,0)
  call FogModifierStop(f)
  call DestroyFogModifier(f)
  call RemoveSavedHandle(HY,'rvle',LoadInteger(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
  set f=null
endfunction

function SetFogModifierLifespan takes player p,real D1E,real x,real y,real A7X returns nothing
  local timer t
  local integer h
  set h=R2I(RAbsBJ(x))+R2I(RAbsBJ(y))
  if HaveSavedHandle(HY,'rvle',h)then
    set t=LoadTimerHandle(HY,'rvle',h)
  else
    set t=CreateTimer()
    call SaveTimerHandle(HY,'rvle',h,t)
    call SaveInteger(HY,GetHandleId(t),0,h)
    call SaveFogModifierHandle(HY,GetHandleId(t),0,CreateFogModifierRadius(p,FOG_OF_WAR_VISIBLE,x,y,A7X,true,false))
    call FogModifierStart(LoadFogModifierHandle(HY,GetHandleId(t),0))
  endif
  call TimerStart(t,D1E,false,function SetFogModifierLifespan_Clean)
  set t=null
endfunction

function Func0719 takes nothing returns nothing
  if(IsValidTree(GetEnumDestructable())or GetDestructableTypeId(GetEnumDestructable())=='B005')and GetDestructableLife(GetEnumDestructable())>0 then
    set boolean101=true
  endif
endfunction

function Func0720 takes real result,real ZEE,real ZWE returns boolean
  local rect AUX=Rect(result-ZWE,ZEE-ZWE,result+ZWE,ZEE+ZWE)
  set boolean101=false
  call EnumDestructablesInRect(AUX,Condition(function ReturnTrue),function Func0719)
  call RemoveRect(AUX)
  set AUX=null
  return boolean101
endfunction

function GameEnd_PauseUnit takes nothing returns nothing
  call PauseUnit(GetEnumUnit(),true)
endfunction

function GameEnd_Pause takes nothing returns boolean
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,0,0,16000,Condition(function ReturnTrue))
  call ForGroup(g,function GameEnd_PauseUnit)
  call KillGroup(g)
  set g=null
  return false
endfunction

function GameEnd_PauseInit takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function GameEnd_Pause))
  call TriggerEvaluate(t)
  set t=null
endfunction

function IsDead takes unit u returns boolean
  return GetUnitTypeId(u)<1 or IsUnitType(u,UNIT_TYPE_DEAD)or GetWidgetLife(u)<0.405
endfunction

function DelayedSelectionB takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  if IsDead(u)==false then
    if IsUnitHidden(u)==false then
      call SelectUnitAddForPlayer(u,GetOwningPlayer(u))
      call RemoveSavedHandle(HY,GetHandleId(t),0)
      call DestroyTimer(t)
    endif
  else
    call RemoveSavedHandle(HY,GetHandleId(t),0)
    call DestroyTimer(t)
  endif
  set t=null
  set u=null
endfunction

function DelayedSelection takes unit u returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.05,true,function DelayedSelectionB)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function SelectSummons takes unit u returns nothing
  if SelectionHelperEnabled[GetPlayerId(GetOwningPlayer(u))]and GetUnitAbilityLevel(u,'B098')==0 and DistanceBetweenUnits(udg_Hero[GetPlayerId(GetOwningPlayer(u))],u)<1000 then
    if IsUnitHidden(u)==false then
      call SelectUnitAddForPlayer(u,GetOwningPlayer(u))
    else
      call DelayedSelection(u)
    endif
  endif
endfunction

function AddProjectile_Dur takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit i1=LoadUnitHandle(HY,h,30)
  local real speed=(LoadReal(HY,h,44))
  local unit i2=(LoadUnitHandle(HY,h,45))
  local real cx=GetUnitX(i2)
  local real cy=GetUnitY(i2)
  local real tx=GetUnitX(i1)
  local real ty=GetUnitY(i1)
  local real dist=speed*0.03
  local real a= AngleBetweenXY(cx,cy,tx,ty)
  local real nx=cx+dist*Cos(a*bj_DEGTORAD)
  local real ny=cy+dist*Sin(a*bj_DEGTORAD)
  call SetUnitX(i2,nx)
  call SetUnitY(i2,ny)
  call SetUnitFacing(i2,a)
  if(IsDead(i1)and LoadBoolean(HY,h,698)==false)or(LoadInteger(HY,GetHandleId(i1),4422)==1 and LoadBoolean(HY,h,818))then
    call KillUnit(i2)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif DistanceBetweenXY(tx,ty,nx,ny)<=dist then
    if not LoadBoolean(HY,h,'dnds')then
      call KillUnit(i2)
    endif
    set tt_unit1=LoadUnitHandle(HY,h,43)
    set tt_unit3=i1
    call ExecuteFunc(LoadStr(HY,h,46))
    if LoadBoolean(HY,h,'dnds')==false or i1==LoadUnitHandle(HY,h,30)then
      call KillUnit(i2)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  endif
  set t=null
  set i1=null
  set i2=null
  return false
endfunction

function AddProjectile takes unit Source,unit Target,integer id,string callback,real speed,boolean CanBeDisjoined returns trigger
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetUnitX(Source)
  local real y=GetUnitY(Source)
  local real a=GetUnitFacing(Source)
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerAddCondition(t,Condition(function AddProjectile_Dur))
  call SaveReal(HY,h,44,speed*1.0)
  call SaveUnitHandle(HY,h,30,Target)
  call SaveStr(HY,h,46,callback)
  call SaveUnitHandle(HY,h,43,Source)
  call SaveUnitHandle(HY,h,45,CreateUnit(GetOwningPlayer(Source),id,x,y,a))
  call SaveBoolean(HY,h,818,CanBeDisjoined)
  set AddProjectileTrigger=t
  set t=null
  return AddProjectileTrigger
endfunction

function Func0730 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetTriggerEvalCount(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local real result=(LoadReal(HY,(ZAE),49))
  local real ZEE=result-(result-Func0531(source))*QIE/40
  if QIE>40 or IsDead(source)then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call SetUnitScale(source,ZEE,ZEE,ZEE)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func0731 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local real result=(LoadReal(HY,(ZAE),50))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,0.025,true)
  call TriggerAddCondition(RBX,Condition(function Func0730))
  set ZAE=GetHandleId(RBX)
  call SaveReal(HY,(ZAE),49,((result)*1.0))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  set RBX=null
  set source=null
  return false
endfunction

function Func0732 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetTriggerEvalCount(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local real result=((LoadReal(HY,(ZAE),51))-Func0531(source))*QIE/40
  local real ZEE=Func0531(source)+result
  if QIE>40 or IsDead(source)then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call SetUnitScale(source,ZEE,ZEE,ZEE)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func0733 takes unit source,real result,real ZEE returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real ZWE=ZEE*Func0531(source)
  local real ZYE=ZWE
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call SaveReal(HY,(ZAE),50,((ZYE)*1.0))
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func0731))
  if result>3 then
    set RBX=CreateTrigger()
    call TriggerRegisterTimerEvent(RBX,0.025,true)
    call TriggerAddCondition(RBX,Condition(function Func0732))
    set ZAE=GetHandleId(RBX)
    call SaveReal(HY,(ZAE),51,((ZWE)*1.0))
    call SaveUnitHandle(HY,(ZAE),14,(source))
  else
    call SetUnitScale(source,ZYE,ZYE,ZYE)
  endif
  set RBX=null
endfunction

function Func0734 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if IsDead(u)==false then
    call SetUnitAnimationByIndex(u,LoadInteger(HY,h,0))
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set u=null
endfunction

function Func0735 takes unit u,real UME,integer id returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,UME,false,function Func0734)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,id)
  set t=null
endfunction

function Func0736 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local integer QIE=(LoadInteger(HY,(ZAE),52))
  if source!=null then
    call UnitRemoveAbility(source,QIE)
  endif
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func0737 takes unit source,integer ZAE,real result returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call UnitAddAbility2(source,ZAE)
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func0736))
  call SaveUnitHandle(HY,(QIE),14,(source))
  call SaveInteger(HY,(QIE),52,(ZAE))
  set RBX=null
endfunction

function Func0738 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local fogmodifier A3X=(LoadFogModifierHandle(HY,(ZAE),42))
  call FogModifierStop(A3X)
  call DestroyFogModifier(A3X)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func0739 takes fogmodifier A3X,real result returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call FogModifierStart(A3X)
  call SaveFogModifierHandle(HY,(ZAE),42,(A3X))
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func0738))
  set RBX=null
endfunction

function SetDestructableLifespan_Clean takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer i=(LoadInteger(HY,(h),55))
  local destructable d=Func0501(i)
  if d!=null then
    call RemoveDestructable(d)
  endif
  call DaI_Clear(i)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set d=null
  set t=null
  return false
endfunction

function SetDestructableLifespan takes destructable d,real delay returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,delay,false)
  call TriggerAddCondition(t,Condition(function SetDestructableLifespan_Clean))
  call SaveInteger(HY,(h),55,(DaI_Save(d)))
  set t=null
endfunction

function UnitMakeStandAnimDelayed_Clean takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    call SetUnitAnimation((LoadUnitHandle(HY,(h),53)),"stand")
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  return false
endfunction

function UnitMakeStandAnimDelayed takes unit u,real dur returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,(h),53,(u))
  call TriggerRegisterTimerEvent(t,dur,false)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function UnitMakeStandAnimDelayed_Clean))
  set t=null
endfunction

function TerrainDeformRippleIF takes real dur,boolean limitNeg,real x,real y,real BI8,real radius,real depth,real BM8,real BN8 returns nothing
	local real spaceWaves
	local real timeWaves
	local real radiusStartPct
	if(radius<=0 or BN8<=0 or BM8<=0)then
		return
	endif
	set timeWaves=2.*dur/ BM8
	set spaceWaves=2.*radius/ BN8
	set radiusStartPct=BI8/ radius
	call TerrainDeformRipple(x,y,radius,depth,R2I(dur*1000),1,spaceWaves,timeWaves,radiusStartPct,limitNeg)
endfunction

function Func0745 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  call FlushChildHashtable(HY,(GetHandleId((LoadUnitHandle(HY,(h),26)))))
  call ShowUnit((LoadUnitHandle(HY,(h),26)),false)
  call RemoveUnit((LoadUnitHandle(HY,(h),26)))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  return false
endfunction

function Func0746 takes unit source,real result returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func0745))
  call SaveUnitHandle(HY,(ZAE),26,(source))
  set RBX=null
endfunction

function PlaySoundFactory takes sound s returns nothing
  if s!=null and SoundsMuted[PlayerId]==false then
    call StartSound(s)
  endif
endfunction

function Func0748 takes sound RKX,player whichPlayer returns nothing
  if LocalPlayer==whichPlayer and SoundsMuted[GetPlayerId(whichPlayer)]==false then
    call StartSound(RKX)
  endif
endfunction

function Func0749 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))==false
endfunction

function Func0750 takes nothing returns nothing
  call Func0748(sound061,GetOwningPlayer(GetEnumUnit()))
endfunction

function Func0751 takes unit source,sound RKX,real result,real ZEE,real ZWE returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set sound061=RKX
  call GroupEnumUnitsInRange(g,result,ZEE,ZWE,Condition(function Func0749))
  call GroupRemoveUnit(g,source)
  call ForGroup(g,function Func0750)
  call KillGroup(g)
  set g=null
endfunction

function Func0752 takes unit u,item it returns integer
  local integer i=0
  if it==null then
    return-1
  endif
  loop
    exitwhen i>5
    if UnitItemInSlot(u,i)==it then
      return i
    endif
    set i=i+1
  endloop
  return-1
endfunction

function Func0753 takes real result,real ZEE returns integer
  if result/ZEE-R2I(result/ZEE)>=0.5 then
    return R2I(result/ZEE)+1
  endif
  return R2I(result/ZEE)
endfunction

function Func0754 takes player whichPlayer returns nothing
  local integer i=0
  if LocalPlayer==whichPlayer then
    call ClearTextMessages()
    call HSE()
  endif
endfunction

function Func0755 takes unit source,real result returns nothing
  call SetUnitState(source,UNIT_STATE_LIFE,Func0468(GetUnitState(source,UNIT_STATE_LIFE)-result,1))
endfunction

function Func0756 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),53))
  local real result=(LoadReal(HY,(ZAE),57))
  local integer QIE=(LoadInteger(HY,(ZAE),58))
  if GetTriggerEvalCount(RBX)/10>R2I(result)then
    if GetUnitTypeId(source)!='E02X'then
      call SetUnitVertexColor(source,255,100,255,255)
    else
      call SetUnitVertexColor(source,255,255,255,255)
    endif
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif IsDead(source)==false then
    call SetUnitVertexColor(source,255,100,255,QIE)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func0757 takes unit source,real result,integer ZAE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.1,true)
  call TriggerAddCondition(RBX,Condition(function Func0756))
  call SaveUnitHandle(HY,(QIE),53,(source))
  call SaveReal(HY,(QIE),57,((result)*1.0))
  call SaveInteger(HY,(QIE),58,(ZAE))
  set RBX=null
endfunction

function Func0758 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer hu=LoadInteger(HY,h,1)
  local integer VDX=LoadInteger(HY,h,0)
  call RemoveSavedHandle(HY,hu,VDX)
  call RemoveSavedInteger(HY,hu,VDX)
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func0759 takes unit u,integer VDX,integer val,real D1E returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,VDX)then
    set t=LoadTimerHandle(HY,hu,VDX)
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveInteger(HY,h,0,VDX)
    call SaveInteger(HY,h,1,hu)
    call SaveInteger(HY,hu,VDX,val)
    call SaveTimerHandle(HY,hu,VDX,t)
  endif
  call TimerStart(t,D1E,false,function Func0758)
  set t=null
endfunction

function Func0760 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,17)
  local integer BHX=LoadInteger(HY,h,59)
  local integer BJX=LoadInteger(HY,h,60)
  local timer tt=LoadTimerHandle(HY,h,10)
  call SaveBoolean(HY,h,0,true)
  call UnitRemoveAbility(u,BJX)
  call UnitRemoveAbility(u,BHX)
  if GetUnitAbilityLevel(u,BHX)==0 then
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call DestroyTimer(tt)
    call RemoveSavedHandle(MHT,GetHandleId(u),0-BHX)
  else
    call TimerStart(tt,1,true,null)
  endif
  set u=null
  set tt=null
  set t=null
  return false
endfunction

function UnitAddAbilityTimedExF takes unit u,integer BHX,integer QIE,real D1E,integer BJX returns nothing
  local trigger t
  local integer h
  local real BLX
  local timer tt
  if IsDead(u)then
    return
  endif
  if HaveSavedHandle(MHT,GetHandleId(u),0-BHX)then
    set t=LoadTriggerHandle(MHT,GetHandleId(u),0-BHX)
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,10)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call FlushChildHashtable(HY,h)
    call SaveUnitHandle(HY,h,17,u)
    call SaveInteger(HY,h,59,BHX)
    call SaveInteger(HY,h,60,BJX)
    call SaveReal(HY,h,0,0)
    call TriggerRegisterDeathEvent(t,u)
    call SaveTimerHandle(HY,h,10,tt)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerAddCondition(t,Condition(function Func0760))
    call SaveTriggerHandle(MHT,GetHandleId(u),0-BHX,t)
  endif
  call RemoveSavedBoolean(HY,h,0)
  set BLX=TimerGetRemaining(tt)
  if BLX<D1E then
    call TimerStart(tt,D1E,false,null)
  endif
  set t=null
  set tt=null
  call UnitAddAbility3(u,BHX,QIE)
endfunction

function Func0762 takes string ZJE returns nothing
  local sound RKX=CreateSound(ZJE,false,false,false,10,10,"")
  call SetSoundVolume(RKX,0)
  call StartSound(RKX)
  call KillSoundWhenDone(RKX)
  set RKX=null
endfunction

function GetRespawnX takes unit u returns real
  local real a
  if IsSentinel(GetOwningPlayer(u))then
    set a=GetRectCenterX(gg_rct_Hero_Creation_NE)
  else
    set a=GetRectCenterX(gg_rct_Hero_Creation_UD)
  endif
  return a
endfunction

function GetRespawnY takes unit u returns real
  local real a
  if IsSentinel(GetOwningPlayer(u))then
    set a=GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    set a=GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
  return a
endfunction

function UnitAddItemByIdInSlot takes unit u,integer iid,integer slot returns item
  local real x=GetRespawnX(u)
  local real y=GetRespawnY(u)
  local item it=CreateItem(iid,x,y)
  local integer i=0
  local boolean array b
  local item it1
  call DisableTrigger(t_manipulateitem)
  if iid>0 then
    loop
      if UnitItemInSlot(u,i)==null and i!=slot then
        set it1=CreateItem('I02M',x,y)
        call UnitAddItem(u,it1)
        set b[i]=true
      else
        set b[i]=false
      endif
      if i==slot then
        call EnableTrigger(t_manipulateitem)
        call UnitAddItem(u,it)
        call DisableTrigger(t_manipulateitem)
      endif
      exitwhen i==slot or i>(UnitInventorySize(u)-1)
      set i=i+1
    endloop
    set i=0
    loop
      exitwhen i>5
      if b[i]then
        call RemoveItem(UnitItemInSlot(u,i))
      endif
      set i=i+1
    endloop
  endif
  call EnableTrigger(t_manipulateitem)
  set tt_item1=it
  set it=null
  set it1=null
  return tt_item1
endfunction

function Func0766 takes unit Hero,item Item,integer slot returns nothing
  local real x=GetRespawnX(Hero)
  local real y=GetRespawnY(Hero)
  local integer i=0
  local boolean array b
  local item ttitem
  call DisableTrigger(t_manipulateitem)
  loop
    exitwhen i>(UnitInventorySize(Hero)-1)
    if UnitItemInSlot(Hero,i)==null and i!=slot then
      set ttitem=CreateItem('I02M',x,y)
      call UnitAddItem(Hero,ttitem)
      set b[i]=true
    endif
    if i==slot then
      call EnableTrigger(t_manipulateitem)
      call UnitAddItem(Hero,Item)
      call DisableTrigger(t_manipulateitem)
      exitwhen true
    endif
    set i=i+1
  endloop
  set i=i-1
  loop
    exitwhen i<0
    if b[i]then
      call RemoveItem(UnitItemInSlot(Hero,i))
    endif
    set i=i-1
  endloop
  call EnableTrigger(t_manipulateitem)
  set tt_item1=null
  set ttitem=null
endfunction

function Func0767 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local ubersplat B2X=(LoadUbersplatHandle(HY,(ZAE),131))
  call Func0682(B2X)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set B2X=null
  return false
endfunction

function Func0768 takes ubersplat B2X,real result returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveUbersplatHandle(HY,(ZAE),131,(B2X))
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func0767))
  set RBX=null
endfunction

function Func0769 takes unit u returns nothing
  call AddTimedKeyToAgent(u,4422,0.05)
endfunction

function Func0770 takes unit u,boolean B6X,real x,real y returns nothing
  local item it
  if B6X then
    set it=CreateItem('I0V7',x,y)
    call UnitAddItem(u,it)
    if GetWidgetLife(it)>0 then
      call SetUnitX(u,GetUnitX(u)+1)
      call UnitAddItem(u,it)
    endif
    call RemoveItem(it)
    set it=null
  else
    call Func0469(u)
  endif
  call Func0769(u)
endfunction

function Func0771 takes nothing returns nothing
  call Func0769(GetTriggerUnit())
endfunction

function MirrorImageDispells takes nothing returns nothing
  local integer i=GetSpellAbilityId()
  if i=='A063' or i=='A03O' or i=='A1AY' or i=='AEbl' or i=='A0B8' or i=='A1WE' or i=='AIbk' or i=='A0ME' or i=='A0SB' or i=='A01O' then
    call Func0769(GetTriggerUnit())
  endif
endfunction

function Func0773 takes unit u returns real
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    return 200.
  endif
  return 0.
endfunction

function SetUnitPathing2 takes unit u,boolean f returns nothing
  local integer hu=GetHandleId(u)
  if f then
    call SaveInteger(HY,hu,'path',LoadInteger(HY,hu,'path')+1)
  else
    call SaveInteger(HY,hu,'path',LoadInteger(HY,hu,'path')-1)
  endif
  if LoadInteger(HY,hu,'path')>=0 then
    call SetUnitPathing(u,true)
    call RemoveSavedInteger(HY,hu,'path')
  else
    call SetUnitPathing(u,false)
  endif
endfunction

function Func0775 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  call SetUnitPathing2(source,true)
  set RBX=null
  set source=null
  return false
endfunction

function Func0776 takes unit source returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,5,false)
  call TriggerAddCondition(RBX,Condition(function Func0775))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SetUnitPathing2(source,false)
  set RBX=null
endfunction

function NonBuildOrMarker takes unit u returns boolean
  return IsUnitType(u,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(u,'A04R')==0
endfunction

function AliveNonBuildOrMarker takes unit u returns boolean
  return IsUnitType(u,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(u,'A04R')==0 and IsDead(u)==false
endfunction

function IsNotHero takes integer i returns boolean
  return i=='H07G' or i=='H00Y' or i=='H0B8' or i=='H0DL'
endfunction

function NonHeroId takes unit u returns boolean
  return IsNotHero(GetUnitTypeId(u))
endfunction

function IsClonedHero takes integer i returns boolean
  return i=='H00J' or i=='N0MM'
endfunction

function GetCloneHeroId takes unit u returns boolean
  return IsClonedHero(GetUnitTypeId(u))
endfunction

function IsNotHeroID takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return IsClonedHero(i)or IsNotHero(i)
endfunction

function Func0784 takes player whichPlayer returns nothing
  local unit source=udg_Hero[GetPlayerId(whichPlayer)]
  local integer ZAE=0
  local item AVX
  loop
    exitwhen ZAE>5
    set AVX=UnitItemInSlot(source,ZAE)
    call SetItemDroppable(AVX,false)
    set ZAE=ZAE+1
  endloop
  set source=null
  set AVX=null
endfunction

function Func0785 takes player whichPlayer returns nothing
  local unit source=udg_Hero[GetPlayerId(whichPlayer)]
  local integer ZAE=0
  local item AVX
  loop
    exitwhen ZAE>5
    set AVX=UnitItemInSlot(source,ZAE)
    call SetItemDroppable(AVX,true)
    set ZAE=ZAE+1
  endloop
  set source=null
  set AVX=null
endfunction

function IsUnitEnTangled takes unit u returns boolean
  return(GetUnitAbilityLevel((u),('BEer'))>0)or(GetUnitAbilityLevel((u),('B017'))>0)or(GetUnitAbilityLevel((u),('B0ER'))>0)
endfunction

function IsUnitEnsnared takes unit u returns boolean
  return GetUnitAbilityLevel(u,'B0C1')>0 or HaveSavedHandle(HY,GetHandleId(u),'ensr')or GetUnitAbilityLevel(u,'BEer')>0 or GetUnitAbilityLevel(u,'Beng')>0 or GetUnitAbilityLevel(u,'Bena')>0 or GetUnitAbilityLevel(u,'B017')>0 or GetUnitAbilityLevel(u,'B078')>0 or GetUnitAbilityLevel(u,'B08F')>0 or GetUnitAbilityLevel(u,'B08E')>0 or GetUnitAbilityLevel(u,'B0ER')>0 or GetUnitAbilityLevel(u,'B0FN')>0
endfunction

function Func0788 takes unit u returns nothing
  call RemoveSavedBoolean(HY,GetHandleId(u),'PUNC')
  call RemoveSavedReal(HY,GetHandleId(u),'PUNC')
  call RemoveSavedReal(HY,GetHandleId(u),'PUNC'+1)
endfunction

function Func0789 takes unit u returns boolean
  return LoadBoolean(HY,GetHandleId(u),'PUNC')and DistanceBetweenXY(GetUnitX(u),GetUnitY(u),LoadReal(HY,GetHandleId(u),'PUNC'),LoadReal(HY,GetHandleId(u),'PUNC'+1))>real013-25
endfunction

function IsUnitStunned takes unit u returns boolean
  return GetUnitAbilityLevel(u,'B3KS')==1 or GetUnitAbilityLevel(u,'B32V')==1 or(GetUnitAbilityLevel(u,('BPSE'))>0)or(GetUnitAbilityLevel(u,('BSTN'))>0)or(GetUnitAbilityLevel(u,('B0CF'))>0)or(GetUnitAbilityLevel(u,('B0BM'))>0)or(GetUnitAbilityLevel(u,('B07N'))>0)or(GetUnitAbilityLevel(u,('B00Q'))>0)or(GetUnitAbilityLevel(u,('B095'))>0)or(GetUnitAbilityLevel(u,('B0C2'))>0)or(GetUnitAbilityLevel(u,('B02S'))>0)or LoadInteger(HY,GetHandleId(u),4260)==1 or GetUnitAbilityLevel(u,'A3EA')==1 or GetUnitAbilityLevel(u,'B3FO')==1
endfunction

function IsUnitDisabled takes unit u returns boolean
  return(GetUnitAbilityLevel(u,('B03I'))>0)or(GetUnitAbilityLevel(u,('B0AD'))>0)or(GetUnitAbilityLevel(u,('B0AE'))>0)or(GetUnitAbilityLevel(u,('B0BE'))>0)or(GetUnitAbilityLevel(u,('B0BF'))>0)or(GetUnitAbilityLevel(u,('B008'))>0)or(GetUnitAbilityLevel(u,('B04B'))>0)
endfunction

function Func0792 takes unit u returns boolean
  local integer h=GetHandleId(u)
  return LoadInteger(HY,h,4293)==1 or LoadInteger(HY,h,4303)==1
endfunction

function IsUnitDisabledSomehow takes unit u returns boolean
  return IsUnitStunned(u)or IsUnitHexed(u)or IsUnitSleeping(u)or IsUnitDisabled(u)or Func0792(u)
endfunction

function IsUnitBadSpellTargeted takes unit u returns boolean
  return IsUnitDisabledSomehow(u)or IsUnitEnsnared(u)or IsUnitPaused(u)or IsUnitCycloned(u)
endfunction

function Func0795 takes integer id returns boolean
  return id=='A13T' or id=='A3Q6' or id=='A3Q4' or id=='A3Q5' or id=='A0DY' or id=='A1WB' or id=='A026' or id=='A09V' or id=='AHfa' or id=='A0LZ' or id=='A0QN' or id=='A0OI' or id=='A2UM' or id=='A3E4'
endfunction

function Func0796 takes unit u returns boolean
  return Func0378(u)or IsUnitEnTangled(u)or(GetUnitAbilityLevel((u),('B01N'))>0)or GetUnitAbilityLevel(u,'Aetl')>0 or GetUnitAbilityLevel(u,'Abun')>0 or(GetUnitAbilityLevel((u),('B033'))>0)
endfunction

function Func0797 takes integer ZAE,integer QIE,boolean ZSE returns nothing
  local integer ZBE=0
  loop
    exitwhen ZBE>15
    call SetPlayerState(Player(ZBE),PLAYER_STATE_RESOURCE_LUMBER,ZAE)
    call SetPlayerState(Player(ZBE),PLAYER_STATE_RESOURCE_FOOD_USED,QIE)
    set ZBE=ZBE+1
  endloop
endfunction

function Func0798 takes unit u,integer d returns nothing
  local integer array b
  local integer a=d
  local integer c=1
  local integer i=0
  local integer k
  if d<1 then
    return
  endif
  loop
    exitwhen c==0
    set c=a/2
    set b[i]=a-c*2
    set a=c
    set i=i+1
  endloop
  set k=13
  set i=0
  loop
    exitwhen i>k
    if b[i]==1 then
      call UnitAddAbility2(u,MaxHPBonusSystem[i])
      call SetUnitAbilityLevel(u,MaxHPBonusSystem[i],2)
      call UnitRemoveAbility(u,MaxHPBonusSystem[i])
    endif
    set i=i+1
  endloop
endfunction

function Func0799 takes unit source returns boolean
  return((LoadInteger(HY,(GetHandleId(source)),4420))==1)or((LoadInteger(HY,(GetHandleId(source)),4421))==1)
endfunction

function Func0800 takes real result,real ZEE returns location
  local real ZWE
  local real ZYE
  local integer ZAE=0
  loop
    exitwhen ZAE>40
    set ZWE=result+ZAE*20
    set ZYE=ZEE+ZAE*20
    if IsPointInRegion(region007,ZWE,ZYE)==false then
      return Location(ZWE,ZYE)
    endif
    set ZWE=result+ZAE*20
    set ZYE=ZEE-ZAE*20
    if IsPointInRegion(region007,ZWE,ZYE)==false then
      return Location(ZWE,ZYE)
    endif
    set ZWE=result-ZAE*20
    set ZYE=ZEE+ZAE*20
    if IsPointInRegion(region007,ZWE,ZYE)==false then
      return Location(ZWE,ZYE)
    endif
    set ZWE=result-ZAE*20
    set ZYE=ZEE-ZAE*20
    if IsPointInRegion(region007,ZWE,ZYE)==false then
      return Location(ZWE,ZYE)
    endif
    set ZAE=ZAE+1
  endloop
  return Location(result,ZEE)
endfunction

function Func0801 takes unit source returns nothing
  call UnitRemoveAbility(source,'Abun')
  call SaveInteger(HY,(GetHandleId(source)),790,0)
endfunction

function Func0802 takes unit source returns nothing
  local integer ZAE=GetHandleId(source)
  local integer QIE=(LoadInteger(HY,(ZAE),790))
  call UnitAddAbility2(source,'Abun')
  set QIE=QIE+1
  call SaveInteger(HY,(ZAE),790,(QIE))
endfunction

function Func0803 takes unit source returns nothing
  local integer ZAE=GetHandleId(source)
  local integer QIE=(LoadInteger(HY,(ZAE),790))
  set QIE=IMaxBJ(QIE-1,0)
  call SaveInteger(HY,(ZAE),790,(QIE))
  if QIE==0 then
    call Func0801(source)
  endif
endfunction

function Func0804 takes unit source,player whichPlayer returns boolean
  return Func0592(source)==false or IsUnitVisibleEx(GetFilterUnit(),whichPlayer)
endfunction

function IsItPriorAttackforce takes unit u,integer i returns boolean
  if i=='A38P' then
    return true
  elseif i=='A32U'then
    return GetUnitAbilityLevel(u,'A38P')==0
  elseif i=='C003'then
    return GetUnitAbilityLevel(u,'A38P')==0 and GetUnitAbilityLevel(u,'A32U')==0
  elseif i=='A3QB'then
    return GetUnitAbilityLevel(u,'A38P')==0 and GetUnitAbilityLevel(u,'A32U')==0 and GetUnitAbilityLevel(u,'C003')==0
  endif
  return true
endfunction

function IssueTargetOrderByIdFuckingEx takes unit RSX,integer RTX,unit SGE,boolean C5X returns boolean
  local boolean b=IsTriggerEnabled(trigger001)
  local boolean R5E=false
  if b then
    call DisableTrigger(trigger001)
  endif
  set R5E=IssueTargetOrderById(RSX,RTX,SGE)
  if R5E==false and C5X then
    call UnitShareVision(SGE,GetOwningPlayer(RSX),true)
    set R5E=IssueTargetOrderById(RSX,RTX,SGE)
    call UnitShareVision(SGE,GetOwningPlayer(RSX),false)
  endif
  if b then
    call EnableTrigger(trigger001)
  endif
  return R5E
endfunction

function ImminentTriggeredPointOrder takes unit RSX,integer RTX,real x,real y returns boolean
  local boolean b=IsTriggerEnabled(trigger001)
  local boolean R5E=false
  if b then
    call DisableTrigger(trigger001)
  endif
  set R5E=IssuePointOrderById(RSX,RTX,x,y)
  if b then
    call EnableTrigger(trigger001)
  endif
  return R5E
endfunction

function IsTriggeredOrder takes unit u returns boolean
  local boolean b=LoadBoolean(HY,GetHandleId(u),'tror')
  if b then
    call RemoveSavedBoolean(HY,GetHandleId(u),'tror')
  endif
  return b
endfunction

function Func0809 takes unit u,string RTX,integer C9X,widget SGE,real x,real y,trigger t returns boolean
  local boolean b
  call SaveBoolean(HY,GetHandleId(u),'tror',true)
  if t!=null then
    if IsTriggerEnabled(t)then
      call DisableTrigger(t)
    else
      set t=null
    endif
  endif
  if C9X==0 then
    set b=IssueTargetOrder(u,RTX,SGE)
  else
    set b=IssuePointOrder(u,RTX,x,y)
  endif
  if t!=null then
    call EnableTrigger(t)
  endif
  return b
endfunction

function ReplaceItem takes unit u,item it,integer DEX,integer slot returns nothing
  local player p=GetItemPlayer(it)
  local boolean b=IsTriggerEnabled(t_manipulateitem)
  if b then
    call DisableTrigger(t_manipulateitem)
  endif
  if slot==-1 then
    set slot=Func0752(u,it)
  endif
  call RemoveItem(it)
  set tt_item1=UnitAddItemByIdInSlot(u,DEX,slot)
  call SetItemPlayer(tt_item1,p,false)
  call SetItemUserData(tt_item1,1)
  if b then
    call EnableTrigger(t_manipulateitem)
  endif
endfunction

function Func0811 takes nothing returns boolean
  return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func0812 takes nothing returns boolean
  return (IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0813 takes nothing returns boolean
  return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func0814 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))
endfunction

function Func0815 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false
endfunction

function Func0816 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function DefaultEnemyFilterWithAncientNonImmune takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false
endfunction

function DefaultEnemyFilter takes nothing returns boolean
  return (IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0819 takes nothing returns boolean
  return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or IsUnitIllusion(GetFilterUnit()))and(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit())))
endfunction

function Func0820 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func0821 takes nothing returns boolean
  return (IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0822 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0823 takes nothing returns boolean
  return IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func0824 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func0825 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0826 takes nothing returns boolean
  return(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false
endfunction

function Func0827 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))
endfunction

function Func0828 takes nothing returns boolean
  return IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0829 takes nothing returns boolean
  return IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func0830 takes nothing returns boolean
  return IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function DefaultAllyAcientsFilter takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0832 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))
endfunction

function Func0833 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func0834 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction

function Func0835 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)
endfunction

function Func0836 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))
endfunction

function Func0837 takes nothing returns boolean
  return((AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))
endfunction

function Func0838 takes nothing returns boolean
  return(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function AllHeroesFilter takes nothing returns boolean
  return(AliveNonBuildOrMarker(GetFilterUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit()))and GetUnitTypeId(GetFilterUnit())!='H0ES'
endfunction

function Func0840 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and((AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))
endfunction

function Func0841 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))and GetTowerLevel(GetFilterUnit())>0
endfunction

function Func0842 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,'0src')
  local unit SGE=LoadUnitHandle(HY,h,'targ')
  local integer D7X=LoadInteger(HY,h,'jmpc')
  local real D8X=LoadReal(HY,h,'0aoe')
  local real dmg=LoadReal(HY,h,'0dmg')
  local group D9X=LoadGroupHandle(HY,h,'affc')
  local boolean FVX=LoadBoolean(HY,h,'immu')
  local string fx=LoadStr(HY,h,'00fx')
  local unit u2
  local group g
  local real IMX
  local real x
  local real y
  local boolean FEX=false
  if D7X<=1 then
    set FEX=true
  endif
  if LoadUnitHandle(HY,h,'vsrc')!=SKE then
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    set x=GetUnitX(SGE)
    set y=GetUnitY(SGE)
    set IMX=99999
    call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),D8X,Condition(function Func0816))
    set SGE=null
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      if IsUnitInGroup(u2,D9X)==false and IsUnitVisibleEx(u2,GetOwningPlayer(SKE))and(IsMagicImmune(u2)==false or FVX)and IsUnitInvulnerable(u2)==false and Func0678(u2,x,y)<IMX then
        set IMX=Func0678(u2,x,y)
        set SGE=u2
      endif
    endloop
    call KillGroup(g)
    if SGE==null then
      set FEX=true
    else
      call GroupAddUnit(D9X,SGE)
    endif
  else
    call GroupAddUnit(D9X,SGE)
  endif
  call SaveInteger(HY,h,'jmpc',D7X-1)
  call SaveReal(HY,h,'0dmg',dmg*LoadReal(HY,h,'mult'))
  if SGE!=null then
    call CreateLightningOnUnit(fx,LoadUnitHandle(HY,h,'vsrc'),SGE,85,1,1,1,1,0.3,0.3)
    call SaveUnitHandle(HY,h,'vsrc',SGE)
    call SaveUnitHandle(HY,h,'targ',SGE)
    call TriggerExecute(t)
    if IsUnitType(SGE,UNIT_TYPE_MAGIC_IMMUNE)and FVX then
      call DamageTarget(SKE,SGE,10,0)
    else
      call DamageTarget(SKE,SGE,1,dmg)
    endif
  endif
  if FEX then
    if D9X!=null then
      call KillGroup(D9X)
    endif
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set SKE=null
  set SGE=null
  set t=null
  return false
endfunction

function Func0843 takes unit SKE,unit SGE,real FOX,integer D7X,real FRX,real D8X,real FIX,string fx,boolean FVX,code UPE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call FlushChildHashtable(HY,h)
  if D7X>1 then
    call TriggerRegisterTimerEvent(t,FIX,true)
    call SaveReal(HY,h,'0aoe',D8X)
    call SaveInteger(HY,h,'jmpc',D7X)
    call SaveReal(HY,h,'mult',FRX)
    call SaveGroupHandle(HY,h,'affc',GetAvailableGroup())
  endif
  call SaveUnitHandle(HY,h,'targ',SGE)
  call SaveUnitHandle(HY,h,'vsrc',SKE)
  call SaveUnitHandle(HY,h,'0src',SKE)
  call SaveReal(HY,h,'0dmg',FOX)
  call SaveStr(HY,h,'00fx',fx)
  call SaveBoolean(HY,h,'immu',FVX)
  call TriggerAddCondition(t,Condition(function Func0842))
  call TriggerAddAction(t,UPE)
  call TriggerEvaluate(t)
  set t=null
endfunction

function Func0844 takes nothing returns nothing
endfunction

function Func0845 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer BHX=LoadInteger(HY,h,0)
  local integer BJX=LoadInteger(HY,h,1)
  call Func0234(u)
  call RemoveSavedHandle(HY,GetHandleId(u),'ensr')
  call UnitRemoveAbility(u,BHX)
  call UnitRemoveAbility(u,BJX)
  call UnitRemoveAbility(u,LoadInteger(HY,h,2))
  call DestroyTimer(LoadTimerHandle(HY,h,1))
  call CleanTrigger(t)
  set t=null
  set u=null
endfunction

function Func0846 takes unit u returns nothing
  if HaveSavedHandle(HY,GetHandleId(u),'ensr')then
    call SaveReal(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(u),'ensr')),0,0.)
    call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(u),'ensr'))
  endif
endfunction

function Func0847 takes unit u,real D1E,integer BHX,integer BJX,integer FDX returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  local timer tt
  local real FFX
  if HaveSavedHandle(HY,hu,'ensr')then
    set t=LoadTriggerHandle(HY,hu,'ensr')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,1)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,hu,'ensr',t)
    call SaveUnitHandle(HY,h,0,u)
    call TriggerAddCondition(t,Condition(function Func0845))
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,1,tt)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterDeathEvent(t,u)
    call TimerStart(tt,D1E,false,null)
    call IssueImmediateOrderByIdExFunc(u,851972)
    call Func0233(u)
  endif
  set FFX=TimerGetElapsed(GlobalTimer)+D1E
  if LoadReal(HY,h,0)<FFX then
    if LoadInteger(HY,h,0)!=0 then
      call UnitRemoveAbility(u,LoadInteger(HY,h,0))
      call UnitRemoveAbility(u,LoadInteger(HY,h,1))
    endif
    call SaveReal(HY,h,0,FFX)
    call SaveInteger(HY,h,0,BHX)
    call SaveInteger(HY,h,1,BJX)
    call UnitAddAbility2(u,BHX)
    call TimerStart(LoadTimerHandle(HY,h,1),D1E,false,null)
  else
    call UnitAddAbilityTimedExF(u,BHX,1,D1E,BJX)
  endif
  if FDX>0 then
    call UnitAddAbilityTimedExF(u,FDX,1,D1E,0)
  endif
  set tt=null
  set t=null
endfunction

function StunTargetEx takes unit SGE,real D1E,boolean FHX returns nothing
  local unit d
  local integer stunid
  local integer stunlvl
  local integer i
  if IsUnitType(SGE,UNIT_TYPE_MAGIC_IMMUNE)and FHX==false then
    return
  endif
  if real003!=D1E then
    if integer020>0 then
      set i=integer020
    else
      set i=GetAbilityDataDefAddr('A3HA')
      if i>0 then
        set integer020=i
      endif
    endif
    if i>0 then
      set Memory[i/4+0x60/4]=SetRealIntoMemory(D1E)
      set Memory[i/4+0x64/4]=SetRealIntoMemory(D1E)
      set real003=D1E
    endif
  endif
  call Func0377(SGE,'A3HA',1)
endfunction

function Func0849 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit FKX=LoadUnitHandle(HY,h,73)
  local integer c=GetTriggerEvalCount(t)
  local real AHX=(c-13)*(c-13)
  if c<26 then
    if IsBuggyFlying(FKX)==false then
      call SetUnitFlyHeight(FKX,375-AHX,0)
    endif
  else
    if IsBuggyFlying(FKX)==false then
      call SetUnitFlyHeight(FKX,GetUnitDefaultFlyHeight(FKX),0)
    endif
    call DamageTarget((LoadUnitHandle(HY,h,2)),FKX,1,(LoadReal(HY,h,20)))
    call StunTargetEx(FKX,LoadReal(HY,h,57),false)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set FKX=null
  return false
endfunction

function Func0850 takes unit FKX,unit SKE,real result,real ZEE,real ZWE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call StunTargetEx(FKX,.5,false)
  if GetUnitAbilityLevel(SKE,'A3NX')>0 then
    set tt_unit1=SKE
    set tt_unit3=FKX
    call ExecuteFunc("Func4612")
  endif
  if IsBuggyFlying(FKX)==false then
    call UnitAddAbility(FKX,'Amrf')
    call UnitRemoveAbility(FKX,'Amrf')
  endif
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl",GetUnitX(FKX),GetUnitY(FKX)))
  call SaveUnitHandle(HY,h,73,FKX)
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveReal(HY,h,20,((ZEE)*1.0))
  call SaveReal(HY,h,57,((result)*1.0))
  call TriggerRegisterTimerEvent(t,0.02/0.52*ZWE,true)
  call TriggerAddCondition(t,Condition(function Func0849))
  set t=null
endfunction

function Func0851 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group016)==false and IsMagicImmune(GetEnumUnit())==false and((LoadInteger(HY,(GetHandleId((GetEnumUnit()))),4253))!=1)then
    call GroupAddUnit(group016,GetEnumUnit())
    call Func0850(GetEnumUnit(),tt_unit1,real024,real023,real025)
  endif
endfunction

function Func0852 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func0853 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local real dmg=(LoadReal(HY,(h),20))
  local real FTX=(LoadReal(HY,(h),57))
  local real sx=(LoadReal(HY,(h),64))
  local real sy=(LoadReal(HY,(h),65))
  local real tx=(LoadReal(HY,(h),66))
  local real ty=(LoadReal(HY,(h),67))
  local real FUX=(LoadReal(HY,(h),68))
  local real NBX=(LoadReal(HY,(h),44))
  local real a=Atan2(ty-sy,tx-sx)
  local group g=(LoadGroupHandle(HY,(h),22))
  local group gg=GetAvailableGroup()
  local real FWX=NBX*0.0625
  local real FYX=(LoadReal(HY,(h),71))
  local real FZX=(LoadReal(HY,(h),72))
  local real F_X=(LoadReal(HY,(h),70))
  local real F0X=(LoadReal(HY,(h),63))
  if FWX>DistanceBetweenXY(sx,sy,tx,ty)then
    set sx=tx
    set sy=ty
  else
    set sx=sx+FWX*Cos(a)
    set sy=sy+FWX*Sin(a)
  endif
  set tt_unit1=SKE
  set real023=dmg
  set real024=FTX
  set real025=F0X
  set group016=g
  call GroupEnumUnitsInRange(gg,sx,sy,FUX,Condition(function Func0852))
  call ForGroup(gg,function Func0851)
  call KillGroup(gg)
  if DistanceBetweenXY(sx,sy,FYX,FZX)>=F_X then
    call SaveReal(HY,(h),71,((sx)*1.0))
    call SaveReal(HY,(h),72,((sy)*1.0))
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl",sx,sy))
  endif
  call SaveReal(HY,(h),64,((sx)*1.0))
  call SaveReal(HY,(h),65,((sy)*1.0))
  if sx==tx and sy==ty then
    if(LoadBoolean(HY,(h),69))then
      call KillGroup(g)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set g=null
  set gg=null
  set SKE=null
  set t=null
  return false
endfunction

function Func0854 takes unit SKE,unit F2X,real dmg,real FTX,real F0X,real x,real y,real tx,real ty,real FUX,group g,boolean ZSE,real NBX returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real ILX=DistanceBetweenXY(x,y,tx,ty)
  local integer F3X=Func0753(ILX,150.)
  local real F4X=ILX/IMaxIF(1,F3X)
  local group gg
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveReal(HY,h,20,((dmg)*1.0))
  call SaveReal(HY,h,57,((FTX)*1.0))
  call SaveReal(HY,h,63,((F0X)*1.0))
  call SaveReal(HY,h,64,((x)*1.0))
  call SaveReal(HY,h,65,((y)*1.0))
  call SaveReal(HY,h,66,((tx)*1.0))
  call SaveReal(HY,h,67,((ty)*1.0))
  call SaveReal(HY,h,68,((FUX)*1.0))
  call SaveReal(HY,h,44,((NBX)*1.0))
  if g==null then
    set gg=GetAvailableGroup()
    if F2X!=null and IsUnitIllusion(F2X)==false then
      call GroupAddUnit(gg,F2X)
    endif
    call SaveGroupHandle(HY,h,22,(gg))
  else
    call SaveGroupHandle(HY,h,22,(g))
  endif
  call SaveBoolean(HY,h,69,(ZSE))
  call SaveReal(HY,h,70,((F4X)*1.0))
  call SaveReal(HY,h,71,((x)*1.0))
  call SaveReal(HY,h,72,((y)*1.0))
  call TriggerRegisterTimerEvent(t,0.0625,true)
  call TriggerAddCondition(t,Condition(function Func0853))
  set t=null
endfunction

function Func0855 takes unit u,integer QIE,integer F6X returns nothing
  local integer i
  if StickyNapalm_1[1]==0 then
    return
  endif
  set i=1
  loop
    exitwhen i>10
    call UnitRemoveAbility(u,StickyNapalm_1[i])
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>10
    call UnitRemoveAbility(u,StickyNapalm_2[i])
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>10
    call UnitRemoveAbility(u,StickyNapalm_3[i])
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>10
    call UnitRemoveAbility(u,StickyNapalm_4[i])
    set i=i+1
  endloop
  call UnitRemoveAbility(u,'B0BS')
  if QIE==1 then
    call UnitAddAbility(u,StickyNapalm_1[F6X])
  elseif QIE==2 then
    call UnitAddAbility(u,StickyNapalm_2[F6X])
  elseif QIE==3 then
    call UnitAddAbility(u,StickyNapalm_3[F6X])
  elseif QIE==4 then
    call UnitAddAbility(u,StickyNapalm_4[F6X])
  elseif QIE==0 then
    call SaveInteger(HY,GetHandleId(u),281,0)
  endif
endfunction

function AddDispellableBuff takes integer i returns nothing
  set integer101=integer101+1
  set integers069[integer101]=i
endfunction

function IsTwoSidePurge takes integer i returns boolean
  return i=='A13V' or i=='A368' or i=='A3L0' or i=='A3KZ'
endfunction

function IsPurge takes integer i returns boolean
  return IsTwoSidePurge(i)or i=='A3SW' or i=='A3IC' or i=='A3ID' or i=='AIpg' or i=='A3BP' or i=='A02V' or i=='ACpu' or i=='A18D' or i=='A1OU' or i=='AIcy' or i=='A1SA'
endfunction

function AddToPurgeList takes integer id,integer GXX returns nothing
  call SaveInteger(UTable,GXX,LoadInteger(UTable,GXX,0)+1,id)
  call SaveInteger(UTable,GXX,0,LoadInteger(UTable,GXX,0)+1)
endfunction

function Func0860 takes unit u returns nothing
  local integer i=1
  loop
    exitwhen HaveSavedInteger(UTable,'PRGM',i)==false
    call UnitRemoveAbility(u,LoadInteger(UTable,'PRGM',i))
    set i=i+1
  endloop
endfunction

function PurgingTriggered takes unit u,boolean GIX returns nothing
  local integer i=1
  loop
    exitwhen HaveSavedInteger(UTable,'PRGC',i)==false
    call UnitRemoveAbility(u,LoadInteger(UTable,'PRGC',i))
    set i=i+1
  endloop
  if GIX then
    set i=1
    loop
      exitwhen HaveSavedInteger(UTable,'PRGA',i)==false
      call UnitRemoveAbility(u,LoadInteger(UTable,'PRGA',i))
      set i=i+1
    endloop
    call SaveInteger(HY,GetHandleId(u),'A2SG',0)
    if HaveSavedHandle(HY,GetHandleId(u),'A1P9')then
      call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(u),'A1P9'))
    endif
  else
    set i=1
    loop
      exitwhen HaveSavedInteger(UTable,'PRGE',i)==false
      call UnitRemoveAbility(u,LoadInteger(UTable,'PRGE',i))
      set i=i+1
    endloop
    call UnitRemoveAbility(u,'Bdet')
    call UnitRemoveAbility(u,'Bena')
    call UnitRemoveAbility(u,'Beng')
    call UnitRemoveAbility(u,'Bfro')
    call UnitRemoveAbility(u,'BEsh')
    call UnitRemoveAbility(u,'B06Q')
    call UnitRemoveAbility(u,'B0BR')
    call RemoveSavedReal(HY,GetHandleId(u),'AItb')
    call Func0855(u,0,0)
    if HaveSavedHandle(HY,GetHandleId(u),'ensr')then
      call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(u),'ensr'))
    endif
    if HaveSavedInteger(HY,GetHandleId(u),'A3B8')then
      call RemoveSavedInteger(HY,GetHandleId(u),'A3B8')
    endif
    call Func0846(u)
  endif
endfunction

function Func0862 takes unit u returns nothing
  local integer i=1
  loop
    exitwhen i>integer101
    call UnitRemoveAbility(u,integers069[i])
    set i=i+1
  endloop
  call PurgingTriggered(u,false)
  if LoadInteger(HY,GetHandleId(u),627)>0 then
    if HaveSavedHandle(HY,GetHandleId(u),'A3RS')then
      call SaveBoolean(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(u),'A3RS')),0,true)
      call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(u),'A3RS'))
    endif
  endif
endfunction

function Func0863 takes nothing returns nothing
  local integer i=GetSpellAbilityId()
  if i=='A1WE' or i=='A0B8' or i=='A063' or i=='A03O' or i=='A1AY' or i=='A0MQ' or i=='A1B6' then
    call PurgingTriggered(GetTriggerUnit(),false)
  endif
endfunction

function FindRealIndexId takes integer i returns integer
  if Item_SideShops[i]==0 then
    return i
  else
    return Item_SideShops[i]
  endif
endfunction

function IsBottleWithRune takes integer id returns boolean
  return id==integer175 or id==integer070 or id==integer173 or id==integer172 or id==integer174 or id==integer171 or id==integer069 or id==integer071
endfunction

function Func0866 takes unit source,integer ZAE returns boolean
  local integer QIE
  local item AVX
  set QIE=0
  loop
    exitwhen QIE>5
    set AVX=UnitItemInSlot(source,QIE)
    if AVX!=null and GetItemTypeId(AVX)==ZAE then
      set AVX=null
      return true
    endif
    set QIE=QIE+1
  endloop
  set AVX=null
  return false
endfunction

function GetIndex takes item it returns integer
  local integer id
  local integer i=1
  if it==null then
    return-2
  endif
  set id=GetItemTypeId(it)
  if HaveSavedInteger(ItemsTable,'indx',id)then
    return LoadInteger(ItemsTable,'indx',id)
  endif
  loop
    exitwhen i>Item_Counter
    if Item_Dummy[i]==id or Item_Real[i]==id or Item_Mute[i]==id then
      call SaveInteger(ItemsTable,'indx',id,i)
      return i
    endif
    set i=i+1
  endloop
  return-1
endfunction

function GetItemsIndex_NonMuted takes item it returns integer
  local integer id
  local integer i=1
  if it==null then
    return-2
  endif
  set id=GetItemTypeId(it)
  if HaveSavedInteger(ItemsTable,'nomt',id)then
    return LoadInteger(ItemsTable,'nomt',id)
  endif
  loop
    exitwhen i>Item_Counter
    if Item_Dummy[i]==id or Item_Real[i]==id then
      call SaveInteger(ItemsTable,'nomt',id,i)
      return i
    endif
    set i=i+1
  endloop
  return-1
endfunction

function Func0869 takes nothing returns nothing
  call SaveInteger(AghanimsTable,'Hblm','AghI',Aghanim_KOTL)
  call SaveInteger(AghanimsTable,'H06X','AghI',Aghanim_KOTL)
  call SaveInteger(AghanimsTable,'H06Y','AghI',Aghanim_KOTL)
  call SaveInteger(AghanimsTable,'H06W','AghI',Aghanim_KOTL)
  call SaveInteger(AghanimsTable,'H0BC','AghI',Aghanim_KOTL)
  call SaveInteger(AghanimsTable,'H004','AghI',Aghanim_Lina)
  call SaveInteger(AghanimsTable,'UC18','AghI',Aghanim_Lion)
  call SaveInteger(AghanimsTable,'Hmkg','AghI',integer373)
  call SaveInteger(AghanimsTable,'H00H','AghI',integer375)
  call SaveInteger(AghanimsTable,'UC01','AghI',integer376)
  call SaveInteger(AghanimsTable,'Orkn','AghI',integer377)
  call SaveInteger(AghanimsTable,'Hmbr','AghI',integer381)
  call SaveInteger(AghanimsTable,'Hjai','AghI',integer378)
  call SaveInteger(AghanimsTable,'Ulic','AghI',Aghanim_Lich)
  call SaveInteger(AghanimsTable,'Ekee','AghI',Aghanim_Leshrac)
  call SaveInteger(AghanimsTable,'Emns','AghI',Aghanim_Furion)
  call SaveInteger(AghanimsTable,'EC57','AghI',integer379)
  call SaveInteger(AghanimsTable,'U00E','AghI',integer372)
  call SaveInteger(AghanimsTable,'E005','AghI',integer371)
  call SaveInteger(AghanimsTable,'E01A','AghI',integer380)
  call SaveInteger(AghanimsTable,'UC42','AghI',Aghanim_Doom)
  call SaveInteger(AghanimsTable,'Npbm','AghI',integer391)
  call SaveInteger(AghanimsTable,'H00T','AghI',integer382)
  call SaveInteger(AghanimsTable,'Hvwd','AghI',integer383)
  call SaveInteger(AghanimsTable,'Nbbc','AghI',integer384)
  call SaveInteger(AghanimsTable,'H00A','AghI',integer385)
  call SaveInteger(AghanimsTable,'Udre','AghI',integer386)
  call SaveInteger(AghanimsTable,'E00P','AghI',integer387)
  call SaveInteger(AghanimsTable,'U00K','AghI',integer388)
  call SaveInteger(AghanimsTable,'H00Q','AghI',integer389)
  call SaveInteger(AghanimsTable,'H00U','AghI',integer390)
  call SaveInteger(AghanimsTable,'U00F','AghI',integer392)
  call SaveInteger(AghanimsTable,'EC45','AghI',integer394)
  call SaveInteger(AghanimsTable,'O00J','AghI',integer395)
  call SaveInteger(AghanimsTable,'Oshd','AghI',integer396)
  call SaveInteger(AghanimsTable,'Udea','AghI',integer397)
  call SaveInteger(AghanimsTable,'N01W','AghI',integer398)
  call SaveInteger(AghanimsTable,'H00K','AghI',integer399)
  call SaveInteger(AghanimsTable,'Opgh','AghI',integer400)
  call SaveInteger(AghanimsTable,'Otch','AghI',integer401)
  call SaveInteger(AghanimsTable,'H00R','AghI',integer374)
  call SaveInteger(AghanimsTable,'H07I','AghI',integer374)
  call SaveInteger(AghanimsTable,'N00B','AghI',integer402)
  call SaveInteger(AghanimsTable,'E01C','AghI',integer403)
  call SaveInteger(AghanimsTable,'E002','AghI',integer404)
  call SaveInteger(AghanimsTable,'EC77','AghI',integer405)
  call SaveInteger(AghanimsTable,'U00P','AghI',integer407)
  call SaveInteger(AghanimsTable,'Emoo','AghI',integer408)
  call SaveInteger(AghanimsTable,'H00N','AghI',integer409)
  call SaveInteger(AghanimsTable,'H00I','AghI',integer411)
  call SaveInteger(AghanimsTable,'H00J','AghI',integer411)
  call SaveInteger(AghanimsTable,'H00D','AghI',integer412)
  call SaveInteger(AghanimsTable,'UC60','AghI',integer413)
  call SaveInteger(AghanimsTable,'N01A','AghI',integer414)
  call SaveInteger(AghanimsTable,'N0HP','AghI',integer415)
  call SaveInteger(AghanimsTable,'Harf','AghI',integer416)
  call SaveInteger(AghanimsTable,'H0DO','AghI',integer417)
  call SaveInteger(AghanimsTable,'Uktl','AghI',integer418)
  call SaveInteger(AghanimsTable,'E02J','AghI',integer420)
  call SaveInteger(AghanimsTable,'Ntin','AghI',integer421)
  call SaveInteger(AghanimsTable,'E02H','AghI',integer422)
  call SaveInteger(AghanimsTable,'H000','AghI',integer423)
  call SaveInteger(AghanimsTable,'E02K','AghI',integer424)
  call SaveInteger(AghanimsTable,'HC49','AghI',integer426)
  call SaveInteger(AghanimsTable,'U000','AghI',integer427)
  call SaveInteger(AghanimsTable,'NC00','AghI',integer428)
  call SaveInteger(AghanimsTable,'E02I','AghI',integer429)
  call SaveInteger(AghanimsTable,'Ubal','AghI',integer430)
  call SaveInteger(AghanimsTable,'U00C','AghI',integer431)
  call SaveInteger(AghanimsTable,'O015','AghI',integer061)
  call SaveInteger(AghanimsTable,'E02F','AghI',integer062)
  call SaveInteger(AghanimsTable,'E032','AghI',integer057)
  call SaveInteger(AghanimsTable,'Hamg','AghI',integer058)
  call SaveInteger(AghanimsTable,'O016','AghI',integer432)
  call SaveInteger(AghanimsTable,'O017','AghI',integer432)
  call SaveInteger(AghanimsTable,HeroID[40],'AghI',integer063)
  call SaveInteger(AghanimsTable,'Ucrl','AghI',integer406)
  call SaveInteger(AghanimsTable,'U01X','AghI',integer406)
  call SaveInteger(AghanimsTable,'N0EG','AghI',integer393)
  call SaveInteger(AghanimsTable,'QTW6','AghI',integer393)
  call SaveInteger(AghanimsTable,'E02N','AghI',integer410)
  call SaveInteger(AghanimsTable,'E02O','AghI',integer410)
  call SaveInteger(AghanimsTable,'N0EG','AghI',integer393)
  call SaveInteger(AghanimsTable,'QTW6','AghI',integer393)
  call SaveInteger(AghanimsTable,'E02X','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTW7','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTW8','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTW9','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTWA','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTWB','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTWC','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTWD','AghI',integer419)
  call SaveInteger(AghanimsTable,'QTWE','AghI',integer419)
  call SaveInteger(AghanimsTable,'N01O','AghI',integer425)
  call SaveInteger(AghanimsTable,'N013','AghI',integer425)
  call SaveInteger(AghanimsTable,'N014','AghI',integer425)
  call SaveInteger(AghanimsTable,'N015','AghI',integer425)
  call SaveInteger(AghanimsTable,'N0MU','AghI',integer056)
  call SaveInteger(AghanimsTable,'N0MW','AghI',integer056)
  call SaveInteger(AghanimsTable,'H0CQ','AghI',integer060)
  call SaveInteger(AghanimsTable,'H001','AghI',integer060)
  call SaveInteger(AghanimsTable,'N01H','AghI',integer059)
  call SaveInteger(AghanimsTable,'N01I','AghI',integer059)
  call SaveInteger(AghanimsTable,'N01J','AghI',integer059)
  call SaveInteger(AghanimsTable,'N01T','AghI',integer059)
  call SaveInteger(AghanimsTable,'N0HT','AghI',integer059)
  call SaveInteger(AghanimsTable,'H008','AghI',integer051)
  call SaveInteger(AghanimsTable,'H06S','AghI',integer052)
  call SaveInteger(AghanimsTable,'Ofar','AghI',integer054)
  call SaveInteger(AghanimsTable,'Nfir','AghI',integer053)
  call SaveInteger(AghanimsTable,'Huth','AghI',integer055)
  call SaveInteger(AghanimsTable,'QTW5','AghI',integer055)
  call SaveInteger(AghanimsTable,'H008','AghB','A3OE')
  call SaveInteger(AghanimsTable,'Huth','AghB','A3OM')
  call SaveInteger(AghanimsTable,'QTW5','AghB','A3OM')
  call SaveInteger(AghanimsTable,'Nfir','AghB','A3OK')
  call SaveInteger(AghanimsTable,'Ofar','AghB','A3OI')
  call SaveInteger(AghanimsTable,'H06S','AghB','A3OG')
  call SaveInteger(AghanimsTable,'Hblm','AghB','A0TL')
  call SaveInteger(AghanimsTable,'H06X','AghB','A0TL')
  call SaveInteger(AghanimsTable,'H06Y','AghB','A0TL')
  call SaveInteger(AghanimsTable,'H06W','AghB','A0TL')
  call SaveInteger(AghanimsTable,'H0BC','AghB','A0TL')
  call SaveInteger(AghanimsTable,'H004','AghB','A0TO')
  call SaveInteger(AghanimsTable,'UC18','AghB','A0TQ')
  call SaveInteger(AghanimsTable,'H00H','AghB','A0TU')
  call SaveInteger(AghanimsTable,'UC01','AghB','A0TW')
  call SaveInteger(AghanimsTable,'Orkn','AghB','A0TY')
  call SaveInteger(AghanimsTable,'Hmbr','AghB','A0U0')
  call SaveInteger(AghanimsTable,'Hjai','AghB','A0U2')
  call SaveInteger(AghanimsTable,'Ulic','AghB','A0U4')
  call SaveInteger(AghanimsTable,'Ekee','AghB','A0U6')
  call SaveInteger(AghanimsTable,'Emns','AghB','A0U8')
  call SaveInteger(AghanimsTable,'EC57','AghB','A0UA')
  call SaveInteger(AghanimsTable,'U00E','AghB','A0UC')
  call SaveInteger(AghanimsTable,'E005','AghB','A0UE')
  call SaveInteger(AghanimsTable,'E01A','AghB','A0UG')
  call SaveInteger(AghanimsTable,'UC42','AghB','A0UI')
  call SaveInteger(AghanimsTable,'Npbm','AghB','A1BS')
  call SaveInteger(AghanimsTable,'H00T','AghB','A1CW')
  call SaveInteger(AghanimsTable,'Hvwd','AghB','A1BT')
  call SaveInteger(AghanimsTable,'Nbbc','AghB','A1BR')
  call SaveInteger(AghanimsTable,'H00A','AghB','A1CT')
  call SaveInteger(AghanimsTable,'Udre','AghB','A1BO')
  call SaveInteger(AghanimsTable,'E00P','AghB','A1BN')
  call SaveInteger(AghanimsTable,'U00K','AghB','A1BM')
  call SaveInteger(AghanimsTable,'H00Q','AghB','A1BL')
  call SaveInteger(AghanimsTable,'H00U','AghB','A1BK')
  call SaveInteger(AghanimsTable,'U00F','AghB','A1D5')
  call SaveInteger(AghanimsTable,'N0EG','AghB','A1DC')
  call SaveInteger(AghanimsTable,'QTW6','AghB','A1DC')
  call SaveInteger(AghanimsTable,'EC45','AghB','A1DD')
  call SaveInteger(AghanimsTable,'O00J','AghB','A1DG')
  call SaveInteger(AghanimsTable,'Oshd','AghB','A1DH')
  call SaveInteger(AghanimsTable,'Udea','AghB','A1DE')
  call SaveInteger(AghanimsTable,'N01W','AghB','A1DF')
  call SaveInteger(AghanimsTable,'H00K','AghB','A1G0')
  call SaveInteger(AghanimsTable,'Opgh','AghB','A1MS')
  call SaveInteger(AghanimsTable,'Otch','AghB','A1MZ')
  call SaveInteger(AghanimsTable,'N00B','AghB','A1QR')
  call SaveInteger(AghanimsTable,'E01C','AghB','A1US')
  call SaveInteger(AghanimsTable,'E002','AghB','A1UW')
  call SaveInteger(AghanimsTable,'EC77','AghB','A1V0')
  call SaveInteger(AghanimsTable,'U00P','AghB','A1VX')
  call SaveInteger(AghanimsTable,'Emoo','AghB','A1WC')
  call SaveInteger(AghanimsTable,'H00N','AghB','A21R')
  call SaveInteger(AghanimsTable,'E02N','AghB','A236')
  call SaveInteger(AghanimsTable,'E02O','AghB','A236')
  call SaveInteger(AghanimsTable,'H00I','AghB','A27D')
  call SaveInteger(AghanimsTable,'H00J','AghB','A27D')
  call SaveInteger(AghanimsTable,'H00D','AghB','A28A')
  call SaveInteger(AghanimsTable,'UC60','AghB','A2IH')
  call SaveInteger(AghanimsTable,'N01A','AghB','A2QB')
  call SaveInteger(AghanimsTable,'N0HP','AghB','A2QF')
  call SaveInteger(AghanimsTable,'Harf','AghB','A2S7')
  call SaveInteger(AghanimsTable,'H0DO','AghB','A2TV')
  call SaveInteger(AghanimsTable,'Uktl','AghB','A2TY')
  call SaveInteger(AghanimsTable,'E02J','AghB','A2VA')
  call SaveInteger(AghanimsTable,'E02X','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTW7','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTW8','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTW9','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTWA','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTWB','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTWC','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTWD','AghB','A2VB')
  call SaveInteger(AghanimsTable,'QTWE','AghB','A2VB')
  call SaveInteger(AghanimsTable,'Ntin','AghB','A2WC')
  call SaveInteger(AghanimsTable,'E02H','AghB','A31H')
  call SaveInteger(AghanimsTable,'H000','AghB','A385')
  call SaveInteger(AghanimsTable,'E02K','AghB','A38D')
  call SaveInteger(AghanimsTable,'N0MU','AghB','A30Q')
  call SaveInteger(AghanimsTable,'N0MW','AghB','A30Q')
  call SaveInteger(AghanimsTable,'O015','AghB','A30T')
  call SaveInteger(AghanimsTable,'E02F','AghB','A316')
  call SaveInteger(AghanimsTable,'H0CQ','AghB','A31U')
  call SaveInteger(AghanimsTable,'H001','AghB','A31U')
  call SaveInteger(AghanimsTable,'E032','AghB','A323')
  call SaveInteger(AghanimsTable,'Hamg','AghB','A325')
  call SaveInteger(AghanimsTable,'HC49','AghB','A38F')
  call SaveInteger(AghanimsTable,'U000','AghB','A3D2')
  call SaveInteger(AghanimsTable,'U0A9','AghB','A3D2')
  call SaveInteger(AghanimsTable,'NC00','AghB','A1BP')
  call SaveInteger(AghanimsTable,'E02I','AghB','A3DD')
  call SaveInteger(AghanimsTable,'Ubal','AghB','A3DN')
  call SaveInteger(AghanimsTable,'U00C','AghB','A3DQ')
  call SaveInteger(AghanimsTable,'O016','AghB','A1MW')
  call SaveInteger(AghanimsTable,'O017','AghB','A1MW')
  call SaveInteger(AghanimsTable,'H07I','AghB','A3J4')
  call SaveInteger(AghanimsTable,'H00R','AghB','A3J4')
  call SaveInteger(AghanimsTable,HeroID[40],'AghB','A3UH')
endfunction

function Func0870 takes unit u returns integer
  local integer id
  if u==null then
    return-2
  endif
  set id=GetUnitTypeId(u)
  if LoadInteger(AghanimsTable,id,'AghI')>0 then
    return LoadInteger(AghanimsTable,id,'AghI')
  endif
  return Aghanim_Basic
endfunction

function Func0871 takes unit u returns integer
  local integer id
  if u==null then
    return-2
  endif
  set id=GetUnitTypeId(u)
  if LoadInteger(AghanimsTable,id,'AghB')>0 then
    return LoadInteger(AghanimsTable,id,'AghB')
  endif
  return 0
endfunction

function Func0872 takes unit u returns nothing
  local integer NFX=GetUnitTypeId(u)
  call UnitRemoveAbility(u,Func0871(u))
  set tt_unit1=u
  if NFX=='Hmkg' then
    call ExecuteFunc("Func2831")
  elseif NFX=='N0MU' or NFX=='N0MW' then
    call ExecuteFunc("Func4587")
  elseif NFX=='E032' then
    call ExecuteFunc("Func4451")
  elseif NFX==HeroID[40]then
    call ExecuteFunc("Func2747")
  elseif NFX=='H00K' then
    call ExecuteFunc("Func3054")
  elseif NFX=='U00C' then
    call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A3DO',false)
  elseif NFX=='Hamg' then
    call ExecuteFunc("Func2908")
  elseif NFX=='E02I' then
    call ExecuteFunc("Func4291")
  elseif NFX=='U000' or NFX=='U0A9' then
    call UnitRemoveAbility(u,'A3CT')
  elseif NFX=='U01X' then
    call UnitAddAbility(u,'A2KC')
    call UnitRemoveAbility(u,'A2KC')
    call AddUnitAnimationProperties(u,"upgrade",false)
    call SetUnitScale(u,0.5+0.25*GetUnitAbilityLevel(u,'A0CY'),0,0)
  elseif NFX=='Emoo' then
    if LoadBoolean(HY,GetHandleId(GetOwningPlayer(u)),'R00J')then
      call SetPlayerTechResearched(GetOwningPlayer(u),'R00M',GetPlayerTechCount(GetOwningPlayer(u),'R00M',true)+1)
      call SaveBoolean(HY,GetHandleId(GetOwningPlayer(u)),'R00J',false)
    endif
  endif
endfunction

function Func0873 takes unit u returns nothing
  local integer i=Func0871(u)
  local integer NFX=GetUnitTypeId(u)
  call HideAbility(i)
  call UnitAddAbility2(u,i)
  set tt_unit1=u
  if NFX=='Emoo' then
    if LoadBoolean(HY,GetHandleId(GetOwningPlayer(u)),'R00J')==false then
      call SetPlayerTechResearched(GetOwningPlayer(u),'R00J',GetPlayerTechCount(GetOwningPlayer(u),'R00J',true)+1)
      call SaveBoolean(HY,GetHandleId(GetOwningPlayer(u)),'R00J',true)
    endif
  elseif NFX=='Ucrl' then
    call UnitAddAbility(u,'A2KB')
    call UnitRemoveAbility(u,'A2KB')
    call AddUnitAnimationProperties(u,"upgrade",true)
    call SetUnitScale(u,0.5+0.25*GetUnitAbilityLevel(u,'A0CY'),0,0)
  elseif NFX=='H00I' then
    call ExecuteFunc("Func3571")
  elseif NFX=='H00U' then
    call ExecuteFunc("Func3504")
  elseif NFX==HeroID[40]then
    call ExecuteFunc("Func2750")
  elseif NFX=='Hmkg' then
    call ExecuteFunc("Func2830")
  elseif NFX=='U000' or NFX=='U0A9' then
    if GetUnitAbilityLevel(u,'A3CV')==0 then
      call UnitAddAbility2(u,'A3CT')
    endif
  elseif NFX=='E032' then
    call ExecuteFunc("Func4450")
  elseif NFX=='H00K' then
    call ExecuteFunc("Func3053")
  elseif NFX=='U00C' then
    call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A3DO',GetUnitAbilityLevel(u,'A3DP')==0)
  elseif NFX=='Hamg' then
    call ExecuteFunc("Func2909")
  elseif NFX=='NC00' then
    call ExecuteFunc("Func3533")
  elseif NFX=='E02I' then
    call ExecuteFunc("Func4292")
  endif
  if i=='A30Q' then
    call ExecuteFunc("Func4586")
  elseif i=='A0TL' then
    call ExecuteFunc("Func2713")
  endif
endfunction

function Func0874 takes item AVX returns boolean
  local integer ZAE=1
  loop
    exitwhen ZAE>integer447
    if AVX==items007[ZAE]then
      return true
    endif
    set ZAE=ZAE+1
  endloop
  return false
endfunction

function SaveAgh takes integer i returns integer
  call SaveBoolean(AghanimsTable,'isag',i,true)
  return i
endfunction

function Func0876 takes item it returns boolean
  local integer id=GetIndex(it)
  return LoadBoolean(AghanimsTable,'isag',id)
endfunction

function Func0877 takes item it returns boolean
  local integer id=GetIndex(it)
  return id==Aghanim_KOTL or id==integer422 or id==integer411
endfunction

function IsIndexIdConsumable takes integer i returns boolean
  return i==integer012 or i==integer287 or i==Cheese or i==integer194 or i==integer195 or i==integer196 or i==integer198 or i==integer199 or i==integer202 or i==integer207 or i==integer206
endfunction

function IsIndexIdCharged takes integer i returns boolean
  return i==UrnOfShadows or i==integer180 or i==integer230 or i==integer231 or i==integer290 or i==Aegis or i==integer176 or i==integer300
endfunction

function Func0880 takes player p,boolean HIX,boolean HAX,boolean HNX returns unit
  local unit u
  local group g=GetAvailableGroup()
  local unit HBX=null
  local boolean HCX=false
  call GroupAddGroup(group013,g)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if(HIX==false or IsBasicCourier(u))and(HAX or IsDead(u)==false)then
      if IsUnitOwnedByPlayer(u,p)then
        set HBX=u
        exitwhen true
      elseif GetPlayerAlliance(GetOwningPlayer(u),p,ALLIANCE_SHARED_CONTROL)then
        if HBX==null or HCX then
          set HBX=u
        endif
      elseif IsUnitAlly(u,p)then
        if HBX==null then
          set HBX=u
          set HCX=true
        endif
      endif
    endif
    call GroupRemoveUnit(g,u)
  endloop
  set u=null
  set tt_unit1=HBX
  set HBX=null
  call KillGroup(g)
  if HNX and tt_unit1!=null then
    call SaveUnitHandle(HeroStats,GetHandleId(p),'COUR',tt_unit1)
  endif
  return tt_unit1
endfunction

function GetBestCourier takes player p returns unit
  return Func0880(p,true,false,true)
endfunction

function Func0882 takes item it,player p returns nothing
  local unit u=GetBestCourier(p)
  if u==null then
    return
  endif
  if UnitItemInSlot(u,0)==null or UnitItemInSlot(u,1)==null or UnitItemInSlot(u,2)==null or UnitItemInSlot(u,3)==null or UnitItemInSlot(u,4)==null or UnitItemInSlot(u,5)==null then
    call UnitAddItem(u,it)
  else
    set tt_unit1=u
    call RemoveItem(it)
    call ExecuteFunc("Func1374")
  endif
  set u=null
endfunction

function Func0883 takes item HJX returns boolean
  local integer id=GetIndex(HJX)
  return id==integer265 or id==integer266 or id==integer135 or id==integer136
endfunction

function Func0884 takes unit u returns boolean
  local integer k=0
  local integer i=0
  local integer j=UnitInventorySize(u)-1
  loop
    exitwhen k>j
    if UnitItemInSlot(u,k)==null then
      return true
    endif
    set k=k+1
  endloop
  return false
endfunction

function GetEmptyInventorySlots takes unit u returns integer
  local integer k=0
  local integer i=0
  local integer j=UnitInventorySize(u)-1
  loop
    exitwhen k>j
    if UnitItemInSlot(u,k)==null then
      set i=i+1
    endif
    set k=k+1
  endloop
  return i
endfunction

function Func0886 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),74))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  local boolean ZSE=(LoadBoolean(HY,(ZAE),75))
  local integer ZBE=(LoadInteger(HY,(ZAE),76))
  local item AVX=CreateItem(QIE,result,ZEE)
  call SetItemPlayer(AVX,whichPlayer,true)
  call SetItemUserData(AVX,0)
  if ZSE then
    call SetItemCharges(AVX,ZBE)
  endif
  if Func0883(AVX)then
    call SetItemInvulnerable(AVX,true)
  endif
  if QIE==Item_Dummy[RecipeFlyingCourier]then
    call Func0882(AVX,whichPlayer)
  endif
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set whichPlayer=null
  set AVX=null
  return false
endfunction

function DelayedItemCreation takes integer ZAE,real result,real ZEE,player whichPlayer,boolean ZSE,integer QIE returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZBE=GetHandleId(RBX)
  call SaveInteger(HY,(ZBE),74,(ZAE))
  call SaveReal(HY,(ZBE),6,((result)*1.0))
  call SaveReal(HY,(ZBE),7,((ZEE)*1.0))
  call SavePlayerHandle(HY,(ZBE),54,(whichPlayer))
  call SaveBoolean(HY,(ZBE),75,(ZSE))
  call SaveInteger(HY,(ZBE),76,(QIE))
  call TriggerAddCondition(RBX,Condition(function Func0886))
  call TriggerRegisterTimerEvent(RBX,0,false)
  set RBX=null
endfunction

function Func0888 takes item AVX returns nothing
  call DisableTrigger(t_manipulateitem)
  call RemoveItem(AVX)
  call EnableTrigger(t_manipulateitem)
endfunction

function Func0889 takes unit u,integer ZAE,item AVX returns item
  local integer i
  local item HTX
  set i=0
  loop
    exitwhen i>5
    set HTX=UnitItemInSlot(u,i)
    if HTX!=null and HTX!=AVX and GetItemTypeId(HTX)==ZAE then
      set HTX=null
      return UnitItemInSlot(u,i)
    endif
    set i=i+1
  endloop
  set HTX=null
  return null
endfunction

function FindItemOfType takes unit u,integer ZAE returns item
  local integer i
  local item AVX
  set i=0
  loop
    exitwhen i>5
    set AVX=UnitItemInSlot(u,i)
    if(AVX!=null)and(GetItemTypeId(AVX)==ZAE)then
      set AVX=null
      return UnitItemInSlot(u,i)
    endif
    set i=i+1
  endloop
  set AVX=null
  return null
endfunction

function Func0891 takes unit u,integer id returns integer
  local integer i=0
  local item it
  local integer c=0
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    if(it!=null)and(GetItemTypeId(it)==id)then
      set c=c+1
    endif
    set i=i+1
  endloop
  set it=null
  return c
endfunction

function Func0892 takes player p,unit u,integer RRE,item F2X returns item
  local integer i
  local item it
  set i=0
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    if it!=null and it!=F2X and GetIndex(it)==RRE and(GetItemPlayer(it)==p or RRE==MixedWardsOrbs or RRE==MixedWardsSentry or RRE==integer198 or RRE==integer199)then
      set it=null
      return UnitItemInSlot(u,i)
    endif
    set i=i+1
  endloop
  set it=null
  return null
endfunction

function Func0893 takes unit u,integer RRE returns item
  local integer i
  local item it
  local integer c
  local integer id
  local item H_X=null
  local player p
  set i=0
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    if(it!=null)then
      set id=GetIndex(it)
      if(id==integer198 or id==integer199 or id==MixedWardsOrbs or id==MixedWardsSentry)then
        if id!=RRE and(id==integer198 or id==integer199)then
          set c=GetItemCharges(it)
          set p=GetItemPlayer(it)
          call UnitRemoveItem(u,it)
          call RemoveItem(it)
          if id==integer198 then
            set H_X=CreateItem(Item_Real[MixedWardsOrbs],GetUnitX(u),GetUnitY(u))
          else
            set H_X=CreateItem(Item_Real[MixedWardsSentry],GetUnitX(u),GetUnitY(u))
          endif
          call SaveBoolean(HY,GetHandleId(H_X),'PICK',true)
          call SetItemPlayer(H_X,p,false)
          call SetItemCharges(H_X,c)
          call Func0766(u,H_X,i)
          set it=null
          set tt_item1=H_X
          set H_X=null
          return tt_item1
        endif
        set it=null
        return UnitItemInSlot(u,i)
      endif
    endif
    set i=i+1
  endloop
  set it=null
  return null
endfunction

function Func0894 takes player p,unit u,integer RRE returns item
  local integer i
  local item it
  set i=0
  if boolean034 and(RRE==integer198 or RRE==integer199)then
    return Func0893(u,RRE)
  endif
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    if(it!=null)and(GetIndex(it)==RRE)and(GetItemPlayer(it)==p or RRE==integer198 or RRE==integer199)then
      set it=null
      return UnitItemInSlot(u,i)
    endif
    set i=i+1
  endloop
  set it=null
  return null
endfunction

function Func0895 takes item it returns integer
  local integer id
  local integer i=1
  if it==null then
    return-2
  endif
  set id=GetItemTypeId(it)
  if HaveSavedInteger(ItemsTable,'mut1',id)then
    return LoadInteger(ItemsTable,'mut1',id)
  endif
  loop
    exitwhen i>Item_Counter
    if Item_Mute[i]==id then
      call SaveInteger(ItemsTable,'mut1',id,i)
      return i
    endif
    set i=i+1
  endloop
  return-1
endfunction

function Func0896 takes item it returns integer
  local integer id
  local integer i=1
  if it==null then
    return-2
  endif
  set id=GetItemTypeId(it)
  if HaveSavedInteger(ItemsTable,'mute',id)then
    return LoadInteger(ItemsTable,'mute',id)
  endif
  loop
    exitwhen i>Item_Counter
    if Item_Mute[i]==id then
      call SaveInteger(ItemsTable,'mute',id,Item_Real[i])
      return Item_Real[i]
    endif
    set i=i+1
  endloop
  return-1
endfunction

function Func0897 takes unit u returns integer
  local integer id
  local integer i=0
  if u==null then
    return-2
  endif
  set id=GetUnitTypeId(u)
  if HaveSavedInteger(ItemsTable,'sell',id)then
    return LoadInteger(ItemsTable,'sell',id)
  endif
  loop
    exitwhen i>Item_Counter
    if Item_SellerUnit[i]==id then
      call SaveInteger(ItemsTable,'sell',id,i)
      return i
    endif
    set i=i+1
  endloop
  return-1
endfunction

function Func0898 takes unit u returns boolean
  return GetUnitAbilityLevel(u,LoadInteger(AghanimsTable,GetUnitTypeId(u),'AghB'))>0 or GetUnitAbilityLevel(u,'A3E7')==1 or FindItemOfType(u,Item_Real[LoadInteger(AghanimsTable,GetUnitTypeId(u),'AghI')])!=null
endfunction

function Func0899 takes integer i returns nothing
  local string s=GetAbilitySoundById(i,SOUND_TYPE_EFFECT_LOOPED)
  if s!=null and s!="" then
    call SaveStr(ItemsTable,'0img',i,s)
  endif
endfunction

function Func0900 takes item i returns string
  local integer id
  if Item_Icon[GetIndex(i)]!=null then
    return Item_Icon[GetIndex(i)]
  endif
  set id=GetItemTypeId(i)
  if HaveSavedString(ItemsTable,'0img',id)==false then
    call Func0899(id)
  endif
  return LoadStr(ItemsTable,'0img',id)
endfunction

function GetItemIcon takes item i returns string
  local string s
  if i==null then
    return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
  endif
  set s=Func0900(i)
  if s!="" and s!=null then
    return s
  endif
  return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endfunction

function Func0902 takes item AVX returns boolean
  return GetIndex(AVX)==integer265 or GetIndex(AVX)==integer266 or GetIndex(AVX)==integer135 or GetIndex(AVX)==integer136
endfunction

function GetDefaultChargesItem takes integer i returns integer
  if integer196==i then
    return 4
  endif
  if i==integer199 or integer206==i then
    return 2
  endif
  return 1
endfunction

function Func0904 takes unit u returns real
  local real r=1.
  local integer id=GetUnitTypeId(u)
  if IsUnitType(u,UNIT_TYPE_HERO)then
    set r=r*0.75
  endif
  if IsMeepo(u)then
    set r=r*0.86
  elseif id=='UC60'then
    set r=r*1.2
    if GetUnitAbilityLevel(u,'A1K6')>0 then
      set r=r*0.97
    elseif GetUnitAbilityLevel(u,'A1KS')>0then
      set r=r*0.94
    elseif GetUnitAbilityLevel(u,'A1KQ')>0then
      set r=r*0.91
    elseif GetUnitAbilityLevel(u,'A1KP')>0then
      set r=r*0.88
    elseif GetUnitAbilityLevel(u,'A1K1')>0then
      set r=r*0.94
    elseif GetUnitAbilityLevel(u,'A1KW')>0then
      set r=r*0.88
    elseif GetUnitAbilityLevel(u,'A1KX')>0then
      set r=r*0.82
    elseif GetUnitAbilityLevel(u,'A1KY')>0then
      set r=r*0.76
    elseif GetUnitAbilityLevel(u,'A1L4')>0then
      set r=r*0.88
    elseif GetUnitAbilityLevel(u,'A1L3')>0then
      set r=r*0.76
    elseif GetUnitAbilityLevel(u,'A1L2')>0then
      set r=r*0.64
    elseif GetUnitAbilityLevel(u,'A1L1')>0then
      set r=r*0.52
    elseif GetUnitAbilityLevel(u,'A1L8')>0then
      set r=r*0.84
    elseif GetUnitAbilityLevel(u,'A1L7')>0then
      set r=r*0.68
    elseif GetUnitAbilityLevel(u,'A1L9')>0then
      set r=r*0.52
    elseif GetUnitAbilityLevel(u,'A1LB')>0then
      set r=r*0.36
    endif
  endif
  if GetUnitAbilityLevel(u,'A28J')>0 then
    set r=r*1.12
  elseif GetUnitAbilityLevel(u,'A28K')>0 then
    set r=r*1.19
  elseif GetUnitAbilityLevel(u,'A28I')>0then
    set r=r*1.26
  elseif GetUnitAbilityLevel(u,'A28L')>0then
    set r=r*1.33
  endif
  if GetUnitAbilityLevel(u,'A28M')>0then
    set r=r*1.25
  elseif GetUnitAbilityLevel(u,'A28N')>0then
    set r=r*1.3
  elseif GetUnitAbilityLevel(u,'A28O')>0then
    set r=r*1.2
  elseif GetUnitAbilityLevel(u,'A28P')>0then
    set r=r*1.15
  endif
  if GetUnitAbilityLevel(u,'A27N')>0then
    set r=r*0.95
  elseif GetUnitAbilityLevel(u,'A27O')>0then
    set r=r*0.9
  elseif GetUnitAbilityLevel(u,'A27M')>0then
    set r=r*0.85
  elseif GetUnitAbilityLevel(u,'A27P')>0then
    set r=r*0.8
  endif
  if id=='H00Q' then
    if GetUnitAbilityLevel(u,'A2PD')>0then
      set r=r*0.96
    elseif GetUnitAbilityLevel(u,'A2PA')>0then
      set r=r*0.92
    elseif GetUnitAbilityLevel(u,'A2P9')>0then
      set r=r*0.88
    elseif GetUnitAbilityLevel(u,'A2P8')>0then
      set r=r*0.84
    elseif GetUnitAbilityLevel(u,'A2PE')>0then
      set r=r*0.80
    elseif GetUnitAbilityLevel(u,'A2PC')>0then
      set r=r*0.76
    elseif GetUnitAbilityLevel(u,'A2PB')>0then
      set r=r*0.72
    elseif GetUnitAbilityLevel(u,'A2OW')>0then
      set r=r*0.68
    elseif GetUnitAbilityLevel(u,'A2OX')>0then
      set r=r*0.64
    elseif GetUnitAbilityLevel(u,'A2OY')>0then
      set r=r*0.60
    elseif GetUnitAbilityLevel(u,'A2P0')>0then
      set r=r*0.56
    elseif GetUnitAbilityLevel(u,'A2P1')>0then
      set r=r*0.52
    elseif GetUnitAbilityLevel(u,'A2P2')>0then
      set r=r*0.48
    endif
  endif
  if GetUnitAbilityLevel(u,'A0KY')>0 then
    if GetUnitAbilityLevel(u,'A0KY')==1 then
      set r=r*0.74
    elseif GetUnitAbilityLevel(u,'A0KY')==2 then
      set r=r*0.66
    elseif GetUnitAbilityLevel(u,'A0KY')==3 then
      set r=r*0.58
    else
      set r=r*0.5
    endif
  endif
  if GetUnitAbilityLevel(u,'A0KY')>0 then
    if GetUnitAbilityLevel(u,'A0KY')==1 then
      set r=r*0.74
    elseif GetUnitAbilityLevel(u,'A0KY')==2 then
      set r=r*0.66
    elseif GetUnitAbilityLevel(u,'A0KY')==3 then
      set r=r*0.58
    else
      set r=r*0.5
    endif
  endif
  if GetUnitAbilityLevel(u,'A0K8')==1 then
    set r=r*Pow(0.85,Func0891(u,Item_Real[integer148])+Func0891(u,Item_Real[integer279]))
  endif
  if GetUnitAbilityLevel(u,'A0PT')==1 then
    set r=r*Pow(0.7,Func0891(u,Item_Real[integer291])+Func0891(u,Item_Real[integer302]))
  endif
  if GetUnitAbilityLevel(u,'A3AX')==1 then
    set r=r*0.9
  endif
  if GetUnitAbilityLevel(u,'A2S5')==1 or GetUnitAbilityLevel(u,'A2T4')==1 then
    set r=0
  endif
  if GetUnitAbilityLevel(u,'A06D')>0 then
    if GetUnitAbilityLevel(u,'A06D')==1 then
      set r=r*0.94
    elseif GetUnitAbilityLevel(u,'A06D')==2 then
      set r=r*0.92
    elseif GetUnitAbilityLevel(u,'A06D')==3 then
      set r=r*0.90
    else
      set r=r*0.88
    endif
  endif
  if GetUnitAbilityLevel(u,'A03A')==1 then
    set r=r*0.33
  endif
  if GetUnitAbilityLevel(u,'A0MM')>0 then
    if GetUnitAbilityLevel(u,'A0MM')==1 then
      set r=r*0.9
    elseif GetUnitAbilityLevel(u,'A0MM')==2 then
      set r=r*0.85
    elseif GetUnitAbilityLevel(u,'A0MM')==3 then
      set r=r*0.80
    else
      set r=r*0.75
    endif
  endif
  if GetUnitAbilityLevel(u,'A318')==1 then
    set r=r*0.89
  endif
  if GetUnitAbilityLevel(u,'A319')==1 then
    set r=r*0.92
  elseif GetUnitAbilityLevel(u,'A319')==2 then
    set r=r*1.0
  elseif GetUnitAbilityLevel(u,'A319')==3 then
    set r=r*1.066
  elseif GetUnitAbilityLevel(u,'A319')==4 then
    set r=r*1.125
  endif
  if GetUnitAbilityLevel(u,'Aetl')==1 or GetUnitAbilityLevel(u,'B01N')==1 then
    set r=r*1.4
  endif
  if GetUnitAbilityLevel(u,'A38T')==1 then
    set r=r*0.55
  endif
  if GetUnitAbilityLevel(u,'A38U')==1 then
    set r=r*0.85
  endif
  if GetUnitAbilityLevel(u,'A2HV')==1 then
    set r=r*1.3
  elseif GetUnitAbilityLevel(u,'A2HW')==2 then
    set r=r*1.35
  elseif GetUnitAbilityLevel(u,'A2HU')==3 then
    set r=r*1.4
  elseif GetUnitAbilityLevel(u,'A2HT')==4 then
    set r=r*1.45
  endif
  if GetUnitAbilityLevel(u,'A28E')==1 then
    set r=r*1.25
  endif
  return 1-r
endfunction

function Func0905 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=LoadInteger(HY,h,10)
  local integer JXX=LoadInteger(HY,h,0)
  local real JOX=LoadReal(HY,h,1)
  local real dmg
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or JOX<TimerGetElapsed(GlobalTimer)or GetUnitAbilityLevel(u,JXX)==0 then
    call RemoveSavedHandle(HY,hu,'POIS'+JXX)
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  else
    if ModuloInteger(GetTriggerEvalCount(t),2)==0 then
      set dmg=LoadReal(HY,h,0)
      set dmg=dmg-(dmg*Func0904(u))
      set dmg=RMinIF(dmg,GetWidgetLife(u)-0.5)
      call DamageTarget(LoadUnitHandle(HY,h,2),u,3,dmg)
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func0906 takes unit SKE,unit u,real JIX,real D1E,integer JXX returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'POIS'+JXX)then
    set t=LoadTriggerHandle(HY,hu,'POIS'+JXX)
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'POIS'+JXX,t)
    call TriggerRegisterTimerEvent(t,0.5,true)
    call TriggerRegisterDeathEvent(t,u)
    call SaveUnitHandle(HY,h,0,u)
    call SaveReal(HY,h,0,JIX)
    call SaveInteger(HY,h,10,hu)
    call TriggerAddCondition(t,Condition(function Func0905))
  endif
  call SaveUnitHandle(HY,h,2,SKE)
  call SaveReal(HY,h,1,TimerGetElapsed(GlobalTimer)+D1E)
  call SaveInteger(HY,h,0,JXX)
  set t=null
endfunction

function Func0907 takes unit u,real dmg returns real
  set dmg=dmg*(1.-Func0904(u))
  return dmg
endfunction

function Func0908 takes item AVX returns boolean
  return GetItemType(AVX)==ITEM_TYPE_POWERUP or GetItemType(AVX)==ITEM_TYPE_PURCHASABLE or GetItemType(AVX)==ITEM_TYPE_MISCELLANEOUS
endfunction

function Func0909 takes unit u,integer id returns boolean
  local item it
  local boolean JCX=false
  local boolean JDX=true
  set it=CreateItem(id,GetUnitX(u),GetUnitY(u))
  if GetUnitAbilityLevel(u,'AInv')==0 then
    set JCX=true
    call UnitAddAbility2(u,'AInv')
  endif
  if UnitAddItem(u,it)==false or GetWidgetLife(it)>0 then
    set JDX=false
  endif
  call RemoveItem(it)
  if JCX then
    call UnitRemoveAbility(u,'AInv')
  endif
  set it=null
  return JDX
endfunction

function Func0910 takes unit d,integer RTX,unit u returns boolean
  local boolean b=UnitRemoveAbility(u,'B0BI')
  local boolean R5E=IssueTargetOrderByIdFuckingEx(d,RTX,u,false)
  if b and R5E then
    call Func0909(u,'I0HM')
  endif
  return R5E
endfunction

function UnitSaveColor takes integer id,integer r,integer g,integer b returns nothing
  set Tints_C=Tints_C+1
  set Tints_R[Tints_C]=r
  set Tints_G[Tints_C]=g
  set Tints_B[Tints_C]=b
  set Tints_ID[Tints_C]=id
endfunction

function PA_RestoreUnitColor takes unit u returns nothing
  local integer id=GetUnitTypeId(u)
  local integer i=1
  local integer a=255
  local boolean b=false
  if id=='Ewar' then
    set a=R2I(2.55*(100-18+20*GetUnitAbilityLevel(u,'A03P')))
  endif
  loop
    exitwhen i>Tints_C or b
    if Tints_ID[i]==id then
      set b=true
      call SetUnitVertexColor(u,Tints_R[i],Tints_G[i],Tints_B[i],a)
    endif
    set i=i+1
  endloop
  if b==false then
    call SetUnitVertexColor(u,255,255,255,255)
  endif
endfunction

function MakeUnitTransparent takes unit u returns nothing
  local integer id=GetUnitTypeId(u)
  local integer i=1
  local boolean b=false
  loop
    exitwhen i>Tints_C or b
    if Tints_ID[i]==id then
      set b=true
      call SetUnitVertexColor(u,Tints_R[i],Tints_G[i],Tints_B[i],255)
    endif
    set i=i+1
  endloop
  if b==false then
    call SetUnitVertexColor(u,255,255,255,255)
  endif
endfunction

function Func0914 takes player p,string s,integer i returns nothing
  local string id=I2S(GetPlayerId(p))
  call StoreInteger(gamecache001,id,s,i)
  if IsPlayer(PlayerModeTyper)==false then
    call RedefineModeTyper()
  endif
  if LocalPlayer==PlayerModeTyper then
    call SyncStoredInteger(gamecache001,id,s)
  endif
endfunction

function Traffic_RegisterData takes string key,integer value returns nothing
  call StoreInteger(gamecache001,"Data",key,value)
  if IsPlayer(PlayerModeTyper)==false then
    call RedefineModeTyper()
  endif
  if LocalPlayer==PlayerModeTyper then
    call SyncStoredInteger(gamecache001,"Data",key)
  endif
endfunction

function Func0916 takes string s,string ETX returns boolean
  local string bs=""
  local integer i=0
  local integer l=StringLength(s)
  local string EWX
  local integer nl=StringLength(ETX)
  loop
    set EWX=SubString(s,i,i+nl)
    if EWX!=ETX then
      set i=i+1
    else
      return true
    endif
    exitwhen i+1>l
  endloop
  return false
endfunction

function KillingMsg takes player p1,player p2 returns string
  local string s=GetObjectName('n0C8')
  set s=str_replace(s,"$dead",udg_Colors[GetPlayerId(p1)]+(PlayerNames[GetPlayerId(p1)])+"|r")
  set s=str_replace(s,"$killer",udg_Colors[GetPlayerId(p2)]+(PlayerNames[GetPlayerId(p2)])+"|r")
  return s
endfunction

function AddBonusDamage takes unit u,integer d returns nothing
  local integer array a
  local integer h=d
  local integer i=1
  local integer j=0
  local integer k
  if d<1 then
    call UnitRemoveAbility(u,DamageBonusSystem[0])
    call UnitRemoveAbility(u,DamageBonusSystem[1])
    call UnitRemoveAbility(u,DamageBonusSystem[2])
    call UnitRemoveAbility(u,DamageBonusSystem[3])
    call UnitRemoveAbility(u,DamageBonusSystem[4])
    call UnitRemoveAbility(u,DamageBonusSystem[5])
    call UnitRemoveAbility(u,DamageBonusSystem[6])
    call UnitRemoveAbility(u,DamageBonusSystem[7])
    call UnitRemoveAbility(u,DamageBonusSystem[8])
    return
  endif
  loop
    exitwhen i==0
    set i=h/2
    set a[j]=h-i*2
    set h=i
    set j=j+1
  endloop
  set k=8
  set j=0
  loop
    exitwhen j>k
    if a[j]==1 then
      call UnitAddAbility2(u,DamageBonusSystem[j])
    else
      call UnitRemoveAbility(u,DamageBonusSystem[j])
    endif
    set j=j+1
  endloop
endfunction

function AddBonusHP takes unit u,integer d returns nothing
  local integer array b
  local integer a=d
  local integer c=1
  local integer i=0
  local integer k
  if d<1 then
    call UnitRemoveAbility(u,HPBonusSystem[0])
    call UnitRemoveAbility(u,HPBonusSystem[1])
    call UnitRemoveAbility(u,HPBonusSystem[2])
    call UnitRemoveAbility(u,HPBonusSystem[3])
    call UnitRemoveAbility(u,HPBonusSystem[4])
    call UnitRemoveAbility(u,HPBonusSystem[5])
    call UnitRemoveAbility(u,HPBonusSystem[6])
    call UnitRemoveAbility(u,HPBonusSystem[7])
    call UnitRemoveAbility(u,HPBonusSystem[8])
    call UnitRemoveAbility(u,HPBonusSystem[9])
    call UnitRemoveAbility(u,HPBonusSystem[10])
    return
  endif
  loop
    exitwhen c==0
    set c=a/2
    set b[i]=a-c*2
    set a=c
    set i=i+1
  endloop
  set k=10
  set i=0
  loop
    exitwhen i>k
    if b[i]==1 then
      call UnitAddAbility(u,HPBonusSystem[i])
    else
      call UnitRemoveAbility(u,HPBonusSystem[i])
    endif
    set i=i+1
  endloop
endfunction

function ManageBonusHP takes unit u,integer hp returns nothing
  local integer hu=GetHandleId(u)
  local integer stored=LoadInteger(MHT,hu,'BHPS')
  if hp>0 then
    call AddBonusHP(u,hp+stored)
  elseif hp<0 then
    call AddBonusHP(u,IMaxIF(stored+hp,0))
  endif
  call SaveInteger(MHT,hu,'BHPS',IMaxIF(stored+hp,0))
endfunction

function AddBonusAttackSpeed takes unit u,integer d returns nothing
  local integer array a
  local integer h=d
  local integer i=1
  local integer j=0
  local integer k
  if d<1 then
    call UnitRemoveAbility(u,BonusAttackSpeed[0])
    call UnitRemoveAbility(u,BonusAttackSpeed[1])
    call UnitRemoveAbility(u,BonusAttackSpeed[2])
    call UnitRemoveAbility(u,BonusAttackSpeed[3])
    call UnitRemoveAbility(u,BonusAttackSpeed[4])
    call UnitRemoveAbility(u,BonusAttackSpeed[5])
    call UnitRemoveAbility(u,BonusAttackSpeed[6])
    call UnitRemoveAbility(u,BonusAttackSpeed[7])
    call UnitRemoveAbility(u,BonusAttackSpeed[8])
    return
  endif
  loop
    exitwhen i==0
    set i=h/2
    set a[j]=h-i*2
    set h=i
    set j=j+1
  endloop
  set k=8
  set j=0
  loop
    exitwhen j>k
    if a[j]==1 then
      call UnitAddAbility(u,BonusAttackSpeed[j])
    else
      call UnitRemoveAbility(u,BonusAttackSpeed[j])
    endif
    set j=j+1
  endloop
endfunction

function SetNegativeArmorSystem takes unit u,integer d returns nothing
  local integer array a
  local integer h=d
  local integer i=1
  local integer j=0
  local integer k
  if d<1 then
    call UnitRemoveAbility(u,NegativeArmorSystem[0])
    call UnitRemoveAbility(u,NegativeArmorSystem[1])
    call UnitRemoveAbility(u,NegativeArmorSystem[2])
    call UnitRemoveAbility(u,NegativeArmorSystem[3])
    call UnitRemoveAbility(u,NegativeArmorSystem[4])
    call UnitRemoveAbility(u,NegativeArmorSystem[5])
    return
  endif
  loop
    exitwhen i==0
    set i=h/2
    set a[j]=h-i*2
    set h=i
    set j=j+1
  endloop
  set k=j
  set j=0
  loop
    exitwhen j>k
    if a[j]==1 then
      call UnitAddAbility(u,NegativeArmorSystem[j])
    else
      call UnitRemoveAbility(u,NegativeArmorSystem[j])
    endif
    set j=j+1
  endloop
endfunction

function FixVisionGlitch_DefineDummy takes unit u returns integer
  local integer id=GetUnitTypeId(u)
  local integer VisionDummyID='o01P'
  if id=='Udre' then
    set VisionDummyID='o01N'
  elseif id=='Emoo' or id=='H00I' or id=='H071' or id=='E005' then
    set VisionDummyID='o01O'
  endif
  return VisionDummyID
endfunction

function FixVisionGlitch_CorrectXY takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local unit d=(LoadUnitHandle(HY,h,19))
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call KillUnit(d)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call SetUnitX(d,GetUnitX(u))
    call SetUnitY(d,GetUnitY(u))
    if GetUnitAbilityLevel(u,'A396')==1 and (GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00)==false then
      call UnitAddAbility(d,'A396')
    elseif GetUnitAbilityLevel(d,'A396')==1 then
      call UnitRemoveAbility(d,'A396')
    endif
  endif
  set t=null
  set u=null
  set d=null
  return false
endfunction

function FixVisionGlitchOnBuyBack takes unit u returns nothing
  local trigger t
  local integer h
  local unit d
  local integer a=ConvertHandle(u)
  if a>0 then
    set a=a/4+0x5C/4
    if IsFlagBitSet(Memory[a],0x20)then
      set Memory[a]=Memory[a]-0x20
    endif
    return
  endif
  if HaveSavedHandle(HY,GetHandleId(u),'VisD')then
    if IsDead(LoadUnitHandle(HY,GetHandleId(u),'VisD'))==false then
      return
    endif
  endif
  set t=CreateTrigger()
  set h=GetHandleId(t)
  set d=CreateUnit(GetOwningPlayer(u),FixVisionGlitch_DefineDummy(u),GetUnitX(u),GetUnitY(u),0)
  call SetUnitPathing(d,false)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function FixVisionGlitch_CorrectXY))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveUnitHandle(HY,GetHandleId(u),'VisD',d)
  set t=null
  set d=null
endfunction

function Func0926 takes integer i returns boolean
  local integer QIE=0
  loop
    exitwhen QIE>59
    if i==BuybackUnitId[QIE]then
      return true
    endif
    set QIE=QIE+1
  endloop
  return false
endfunction

function DefineBuybackUnitIndex takes player p,integer level returns integer
  local real time=TimerGetElapsed(GlobalTimer)-GameStartsTime
  local real minutes=(R2I(time)/60)-0
  local real ZWE=100+level*level*1.5+minutes*15
  local integer QIE
  if booleans020[GetPlayerId(p)]then
    return 60
  endif
  set QIE=R2I(ZWE/50)
  set QIE=IMinBJ(QIE,59)
  set QIE=IMaxBJ(QIE,0)
  return QIE
endfunction

function Func0928 takes player p returns nothing
  local integer ZAE=GetPlayerId(p)
  local unit source=CirclesOfPower[ZAE]
  local unit RCX=udg_Hero[ZAE]
  local integer QIE=GetHeroLevel(RCX)
  local integer ZBE=0
  loop
    call RemoveUnitFromStock(source,BuybackUnitId[ZBE])
    set ZBE=ZBE+1
    exitwhen ZBE>60
  endloop
  if Mode_DM or boolean141==false then
    return
  endif
  call AddUnitToStock(source,BuybackUnitId[DefineBuybackUnitIndex(p,QIE)],1,1)
  set BuybackID[ZAE]=BuybackUnitId[DefineBuybackUnitIndex(p,QIE)]
  set RCX=null
  set source=null
endfunction

function Func0929 takes player whichPlayer returns nothing
  local integer ZAE=GetPlayerId(whichPlayer)
  local unit source=CirclesOfPower[ZAE]
  local unit RCX=udg_Hero[ZAE]
  local integer QIE=GetHeroLevel(RCX)
  local integer ZBE=0
  if Mode_DM or boolean141==false or BuybackID[ZAE]=='h0D4' then
    return
  endif
  if BuybackID[ZAE]!=0 then
    call RemoveUnitFromStock(source,BuybackID[ZAE])
  endif
  call AddUnitToStock(source,BuybackUnitId[DefineBuybackUnitIndex(whichPlayer,QIE)],1,1)
  if GetUnitAbilityLevel(source,'A14G')>0 then
    call UnitRemoveAbility(source,'A14G')
  elseif GetUnitAbilityLevel(source,'A14E')>0 then
    call UnitRemoveAbility(source,'A14E')
  endif
  set BuybackID[ZAE]=BuybackUnitId[DefineBuybackUnitIndex(whichPlayer,QIE)]
  set RCX=null
  set source=null
endfunction

function Func0930 takes nothing returns boolean
  if Mode_DM then
    return false
  endif
  call Func0929(Sentinels[1])
  call Func0929(Sentinels[2])
  call Func0929(Sentinels[3])
  call Func0929(Sentinels[4])
  call Func0929(Sentinels[5])
  call Func0929(Scourges[1])
  call Func0929(Scourges[2])
  call Func0929(Scourges[3])
  call Func0929(Scourges[4])
  call Func0929(Scourges[5])
  return false
endfunction

function Func0931 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local unit source=CirclesOfPower[QIE]
  local unit RCX=udg_Hero[QIE]
  local integer ZBE=GetHeroLevel(RCX)
  local integer ZCE=0
  call RemoveUnitFromStock(source,'h0D4')
  call AddUnitToStock(source,BuybackUnitId[DefineBuybackUnitIndex(GetOwningPlayer(RCX),ZBE)],1,1)
  set BuybackID[QIE]=BuybackUnitId[DefineBuybackUnitIndex(GetOwningPlayer(RCX),ZBE)]
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func0932 takes player whichPlayer returns nothing
  local integer ZAE=GetPlayerId(whichPlayer)
  local unit source=CirclesOfPower[ZAE]
  local unit RCX=udg_Hero[ZAE]
  local integer QIE=GetHeroLevel(RCX)
  local integer ZBE=0
  local trigger RBX=CreateTrigger()
  local integer ZCE=GetHandleId(RBX)
  call FixVisionGlitchOnBuyBack(RCX)
  loop
    exitwhen ZBE>59
    call RemoveUnitFromStock(source,BuybackUnitId[ZBE])
    set ZBE=ZBE+1
  endloop
  call TriggerAddCondition(RBX,Condition(function Func0931))
  call TriggerRegisterTimerEvent(RBX,420,false)
  call SaveInteger(HY,(ZCE),34,(ZAE))
  set BuybackID[ZAE]='h0D4'
  call RemoveUnitFromStock(source,'h0D4')
  call AddUnitToStock(source,'h0D4',0,1)
  set RCX=null
  set source=null
  set RBX=null
endfunction

function Func0933 takes unit u returns integer
  local real YXE=1
  local integer KXX
  local integer i=0
  local item it
  local integer QIE
  local integer KOX
  local integer break
  if booleans004[4]then
    set QIE=GetUnitAbilityLevel(u,'A03P')*(1-GetUnitAbilityLevel(u,'A36D'))
    if QIE>0 then
      set YXE=YXE*(0.9-0.1*QIE)
    endif
  endif
  if booleans004[1]then
    set QIE=GetUnitAbilityLevel(u,'A0MX')*(1-GetUnitAbilityLevel(u,'A36D'))
    if QIE>0 then
      set YXE=YXE*(0.95-0.05*QIE)
    endif
  endif
  if booleans004[2]or booleans004[3]or booleans004[6]then
    set KOX=LoadInteger(HY,GetHandleId(u),'BFLY')
    set KXX=UnitInventorySize(u)
    loop
      exitwhen i>KXX
      set it=UnitItemInSlot(u,i)
      if it!=null then
        if GetItemsIndex_NonMuted(it)==Butterfly then
          if KOX<=0 then
            set YXE=YXE*0.65
          else
            set KOX=KOX-1
          endif
        elseif GetItemsIndex_NonMuted(it)==TalismanOfEvasion or GetItemsIndex_NonMuted(it)==HeavensHalberd then
          set YXE=YXE*0.75
        else
        endif
      endif
      set i=i+1
    endloop
  endif
  if booleans004[5]then
    if GetUnitAbilityLevel(u,'A39G')==1 then
      set YXE=YXE*0.75
    endif
    if GetUnitAbilityLevel(u,'A39M')==1 then
      set YXE=YXE*0.75
    endif
  endif
  set it=null
  return 100-R2I(YXE*100)
endfunction

function Func0934 takes integer c,integer c2 returns integer
  if c==0 then
    return c2
  endif
  return 100-(100-c)*(100-c2)/100
endfunction

function Func0935 takes unit u returns integer
  local integer c=0
  local integer ch
  if booleans004[14]then
    if GetUnitAbilityLevel(u,'B02P')==1 then
      set c=100
    endif
  endif
  if c!=100 then
    if booleans004[8]then
      if GetUnitAbilityLevel(u,'BNdh')==1 then
        if GetUnitAbilityLevel(u,'A3PU')==1 then
          set c=75
        elseif GetUnitAbilityLevel(u,'A3PR')==1 then
          set c=45
        elseif GetUnitAbilityLevel(u,'A3PS')==1 then
          set c=55
        elseif GetUnitAbilityLevel(u,'A3PT')==1 then
          set c=65
        endif
      endif
    endif
    if booleans004[9]then
      if GetUnitAbilityLevel(u,'B01D')==1 then
        if GetUnitAbilityLevel(u,'A3PY')==1 then
          set c=Func0934(c,60)
        elseif GetUnitAbilityLevel(u,'A3PV')==1 then
          set c=Func0934(c,30)
        elseif GetUnitAbilityLevel(u,'A3PW')==1 then
          set c=Func0934(c,40)
        elseif GetUnitAbilityLevel(u,'A3PX')==1 then
          set c=Func0934(c,50)
        endif
      endif
    endif
    if booleans004[13]then
      if GetUnitAbilityLevel(u,'Bhea')==1 then
        set c=Func0934(c,30+10*integer029)
      endif
    endif
    if booleans004[10]then
      if GetUnitAbilityLevel(u,'B09K')==1 then
        set c=Func0934(c,80)
      endif
    endif
    if booleans004[11]then
      if GetUnitAbilityLevel(u,'B02M')==1 then
        set c=Func0934(c,50)
      endif
    endif
    if booleans004[12]then
      if GetUnitAbilityLevel(u,'B3DJ')==1 then
        set c=Func0934(c,17)
      endif
    endif
    if booleans004[15]then
      if GetUnitAbilityLevel(u,'B39I')==1 then
        set c=Func0934(c,25)
      endif
    endif
    if booleans004[16]then
      if GetUnitAbilityLevel(u,'B00C')==1 then
        set c=Func0934(c,60)
      endif
    endif
  endif
  return c
endfunction

function GetUnitsEvasion takes unit u returns nothing
  local real chance=1
  local integer size=UnitInventorySize(u)
  local integer i=0
  local item it
  local integer lvl=GetUnitAbilityLevel(u,'A03P')
  local integer h=LoadInteger(HY,GetHandleId(u),'BFLY')
  return
  if lvl>0 then
    if lvl==1 then
      set chance=chance*0.8
    elseif lvl==2 then
      set chance=chance*0.7
    elseif lvl==3 then
      set chance=chance*0.6
    elseif lvl==4 then
      set chance=chance*0.5
    endif
  endif
  set lvl=GetUnitAbilityLevel(u,'A0MX')
  if lvl>0 then
    set chance=chance*(0.95-0.05*lvl)
  endif
  loop
    exitwhen i>size
    set it=UnitItemInSlot(u,i)
    if it!=null then
      if GetItemsIndex_NonMuted(it)==Butterfly then
        if h<=0 then
          set chance=chance*0.65
        else
          set h=h-1
        endif
      elseif GetItemsIndex_NonMuted(it)==TalismanOfEvasion or GetItemsIndex_NonMuted(it)==HeavensHalberd then
        set chance=chance*0.75
      else
      endif
    endif
    set i=i+1
  endloop
  if GetUnitAbilityLevel(u,'A39G')==1 then
    set chance=chance*0.25
  endif
  if GetUnitAbilityLevel(u,'A39M')==1 then
    set chance=chance*0.75
  endif
  set lvl=R2I((1-chance)/0.05)
  if lvl>0 then
    call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A2V2',false)
    call UnitAddAbility2(u,'A2V2')
    call UnitMakeAbilityPermanent(u,true,'A2V3')
    call SetUnitAbilityLevel(u,'A2V3',lvl)
  else
    call UnitRemoveAbility(u,'A2V2')
  endif
  set it=null
endfunction

function Func0937 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  call GetUnitsEvasion(source)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func0938 takes unit source returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerAddCondition(RBX,Condition(function Func0937))
  call TriggerRegisterTimerEvent(RBX,0,false)
  call SaveUnitHandle(HY,(ZAE),14,(source))
  set RBX=null
endfunction

function Func0939 takes nothing returns boolean
  if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(GetItemsIndex_NonMuted(GetManipulatedItem())==Butterfly or GetItemsIndex_NonMuted(GetManipulatedItem())==TalismanOfEvasion or GetItemsIndex_NonMuted(GetManipulatedItem())==HeavensHalberd)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
      call GetUnitsEvasion(GetTriggerUnit())
    else
      call Func0938(GetTriggerUnit())
    endif
  endif
  return false
endfunction

function Func0940 takes unit u returns real
  if LoadReal(HeroStats,GetHandleId(u),99)>0 then
    return LoadReal(HeroStats,GetHandleId(u),99)+GetUnitMoveSpeed(u)
  endif
  return GetUnitMoveSpeed(u)
endfunction

function Func0941 takes unit source,real result returns real
  loop
    if result>25 then
      set result=result-25
    else
      set result=result-5
    endif
    call SetUnitMoveSpeed(source,result)
    exitwhen GetUnitMoveSpeed(source)<522
  endloop
  return result
endfunction

function Func0942 takes unit u returns real
  local real KHX
  local real c=(LoadReal(HY,(GetHandleId(u)),814))
  local integer ms
  local real ZEE
  local real KJX
  local real ZYE
  local real KKX
  local real N1X
  local real N2X
  if GetUnitMoveSpeed(u)==522 and c>0 then
    set KHX=GetUnitBaseMovespeed(u)
    set ms=GetUnitAbilityLevel(u,'A0I8')
    set ZEE=Func0941(u,KHX)
    set KJX=GetUnitMoveSpeed(u)
    set ZYE=Func0941(u,ZEE)
    set KKX=GetUnitMoveSpeed(u)
    set N1X=(KJX-KKX)/(ZEE-ZYE)-1
    set N2X=KJX/(1+N1X)-ZEE
    set N1X=RMinIF(N1X,ms*c+1)
    call SetUnitMoveSpeed(u,KHX)
    return(KHX+N2X)*(1+N1X)
  else
    return GetUnitMoveSpeed(u)
  endif
endfunction

function Func0943 takes unit source returns real
  local real result=GetUnitMoveSpeed(source)
  if(LoadReal(HY,(GetHandleId(source)),814))>0 then
    set result=Func0942(source)
  endif
  if((LoadInteger(HY,(GetHandleId(source)),4423))==1)then
    set result=1000.
  endif
  return result
endfunction

function GetUnitOffsetSpeed takes unit u returns integer
  local integer lvl=GetUnitAbilityLevel(u,'EUL1')
  local integer lvl2=GetUnitAbilityLevel(u,'EUL2')
  local integer movespeed
  if lvl>0 then
    if lvl==1 then
      set movespeed=40
    elseif lvl==2 then
      set movespeed=80
    elseif lvl==4 then
      set movespeed=85
    else
      set movespeed=90
    endif
  endif
  if lvl2>0 then
    if lvl2==1 then
      set movespeed=120
    elseif lvl2==2 then
      set movespeed=140
    endif
  endif
  if lvl+lvl2>0 then
    return movespeed
  endif
  if GetUnitAbilityLevel(u,'A00D')>0 then
    return 100
  elseif GetUnitAbilityLevel(u,'A2HR')>0 then
    return 85
  elseif GetUnitAbilityLevel(u,'A1VR')>0 or GetUnitAbilityLevel(u,'A38Z')>0 then
    return 50
  elseif GetUnitAbilityLevel(u,'A05U')>0 or GetUnitAbilityLevel(u,'A12V')>0 then
    return 45
  elseif GetUnitAbilityLevel(u,'AIms')>0 then
    return 45
  elseif GetUnitAbilityLevel(u,'A2I9')>0 then
    return 55
  endif
  return 0
endfunction

function CustomSpeed_Moveunit takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real bonus=I2R(LoadInteger(HY,h,0))
  local integer limit=LoadInteger(HY,h,1)
  local real x
  local real y
  local real dx
  local real dy
  local real angle
  local real ms
  local real d
  local real currentspeed=GetUnitBaseMovespeed(u)+I2R(GetUnitOffsetSpeed(u))
  local real bonusfixed
  local integer ord
  local integer c=LoadInteger(HY,h,-1)+1
  if GetUnitTypeId(u)==0 then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
    set t=null
    set u=null
    return
  endif
  if limit==0 then
    set limit=9999
  endif
  set bonusfixed=RMinIF(currentspeed*(100.0+bonus)/100.0,limit)-GetUnitMoveSpeed(u)
  call SaveInteger(HY,h,-1,c)
  call SaveReal(HeroStats,GetHandleId(u),99,R2I(bonusfixed))
  if bonusfixed>0 and IsDead(u)==false then
    set x=GetUnitX(u)
    set y=GetUnitY(u)
    set dx=LoadReal(HY,h,10)
    set dy=LoadReal(HY,h,11)
    set d=DistanceBetweenXY(dx,dy,x,y)
    if LoadBoolean(HeroStats,GetHandleId(u),99)==false then
      set ord=GetUnitCurrentOrder(u)
      if(d<100 and d>1)and ord!=851993 and ord!=851972 and ord!=851973 then
        set angle=Atan2(y-dy,x-dx)
        set ms=bonusfixed*ThirstInterval
        call SaveReal(HeroStats,GetHandleId(u),99,R2I(ms/ThirstInterval))
        set x=(x+ms*Cos(angle))
        set y=(y+ms*Sin(angle))
        call SetUnitX(u,SafeX50(x))
        call SetUnitY(u,SafeY50(y))
      endif
    else
      call SaveBoolean(HeroStats,GetHandleId(u),99,false)
    endif
    call SaveReal(HY,h,10,GetUnitX(u))
    call SaveReal(HY,h,11,GetUnitY(u))
  endif
  set t=null
  set u=null
endfunction

function CustomSpeed takes unit u,integer bonus,integer limit returns nothing
  local timer t
  local integer h
  if HaveSavedHandle(HeroStats,GetHandleId(u),'MVSP')==false then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call TimerStart(t,ThirstInterval,true,function CustomSpeed_Moveunit)
    set movespeedactive=movespeedactive+1
    call SaveUnitHandle(HY,h,0,u)
    call SaveReal(HY,h,10,GetUnitX(u))
    call SaveReal(HY,h,11,GetUnitY(u))
    call SaveBoolean(HY,h,100,true)
    call SaveTimerHandle(HeroStats,GetHandleId(u),'MVSP',t)
  else
    set t=LoadTimerHandle(HeroStats,GetHandleId(u),'MVSP')
    set h=GetHandleId(t)
  endif
  if bonus==LoadInteger(HY,h,0)and limit==LoadInteger(HY,h,1)then
    set t=null
    return
  endif
  call SaveInteger(HY,h,1,limit)
  call SaveInteger(HY,h,0,bonus)
  if bonus==0 then
    call PauseTimer(t)
    set movespeedactive=movespeedactive-1
    call SaveReal(HeroStats,GetHandleId(u),99,0)
    call SaveBoolean(HY,h,100,false)
    if IsUnitIllusion(u)then
      call DestroyTimer(t)
      call FlushChildHashtable(HY,h)
      call FlushChildHashtable(HeroStats,GetHandleId(u))
    endif
  elseif LoadBoolean(HY,h,100)==false then
    call TimerStart(t,ThirstInterval,true,function CustomSpeed_Moveunit)
    set movespeedactive=movespeedactive+1
    call SaveBoolean(HY,h,100,true)
  endif
  set t=null
endfunction

function StorePlayersColorValues takes nothing returns nothing
  set PlayerColors_R[GetPlayerId(Sentinels[1])]=0
  set PlayerColors_G[GetPlayerId(Sentinels[1])]=66
  set PlayerColors_B[GetPlayerId(Sentinels[1])]=255
  set PlayerColors_R[GetPlayerId(Sentinels[2])]=48
  set PlayerColors_G[GetPlayerId(Sentinels[2])]=230
  set PlayerColors_B[GetPlayerId(Sentinels[2])]=185
  set PlayerColors_R[GetPlayerId(Sentinels[3])]=50
  set PlayerColors_G[GetPlayerId(Sentinels[3])]=0
  set PlayerColors_B[GetPlayerId(Sentinels[3])]=129
  set PlayerColors_R[GetPlayerId(Sentinels[4])]=255
  set PlayerColors_G[GetPlayerId(Sentinels[4])]=252
  set PlayerColors_B[GetPlayerId(Sentinels[4])]=1
  set PlayerColors_R[GetPlayerId(Sentinels[5])]=255
  set PlayerColors_G[GetPlayerId(Sentinels[5])]=50
  set PlayerColors_B[GetPlayerId(Sentinels[5])]=0
  set PlayerColors_R[GetPlayerId(Scourges[1])]=220
  set PlayerColors_G[GetPlayerId(Scourges[1])]=50
  set PlayerColors_B[GetPlayerId(Scourges[1])]=50
  set PlayerColors_R[GetPlayerId(Scourges[2])]=50
  set PlayerColors_G[GetPlayerId(Scourges[2])]=50
  set PlayerColors_B[GetPlayerId(Scourges[2])]=50
  set PlayerColors_R[GetPlayerId(Scourges[3])]=75
  set PlayerColors_G[GetPlayerId(Scourges[3])]=150
  set PlayerColors_B[GetPlayerId(Scourges[3])]=190
  set PlayerColors_R[GetPlayerId(Scourges[4])]=16
  set PlayerColors_G[GetPlayerId(Scourges[4])]=60
  set PlayerColors_B[GetPlayerId(Scourges[4])]=18
  set PlayerColors_R[GetPlayerId(Scourges[5])]=68
  set PlayerColors_G[GetPlayerId(Scourges[5])]=42
  set PlayerColors_B[GetPlayerId(Scourges[5])]=4
endfunction

function Func0948 takes nothing returns nothing
  local integer i=1
  set udg_Colors[GetPlayerId(Sentinels[0])]="|c00ff0303"
  set udg_Colors[GetPlayerId(Sentinels[1])]="|c000042ff"
  set udg_Colors[GetPlayerId(Sentinels[2])]="|c001ce6b9"
  set udg_Colors[GetPlayerId(Sentinels[3])]="|c00540081"
  set udg_Colors[GetPlayerId(Sentinels[4])]="|c00fffc01"
  set udg_Colors[GetPlayerId(Sentinels[5])]="|c00ff8000"
  set udg_Colors[GetPlayerId(Scourges[0])]="|c0020c000"
  set udg_Colors[GetPlayerId(Scourges[1])]="|c00e55bb0"
  set udg_Colors[GetPlayerId(Scourges[2])]="|c00959697"
  set udg_Colors[GetPlayerId(Scourges[3])]="|c007ebff1"
  set udg_Colors[GetPlayerId(Scourges[4])]="|c00106246"
  set udg_Colors[GetPlayerId(Scourges[5])]="|c004e2a04"
  call SetPlayerColor(Sentinels[0],PLAYER_COLOR_RED)
  call SetPlayerColor(Sentinels[1],PLAYER_COLOR_BLUE)
  call SetPlayerColor(Sentinels[2],PLAYER_COLOR_CYAN)
  call SetPlayerColor(Sentinels[3],PLAYER_COLOR_PURPLE)
  call SetPlayerColor(Sentinels[4],PLAYER_COLOR_YELLOW)
  call SetPlayerColor(Sentinels[5],PLAYER_COLOR_ORANGE)
  call SetPlayerColor(Scourges[0],PLAYER_COLOR_GREEN)
  call SetPlayerColor(Scourges[1],PLAYER_COLOR_PINK)
  call SetPlayerColor(Scourges[2],PLAYER_COLOR_LIGHT_GRAY)
  call SetPlayerColor(Scourges[3],PLAYER_COLOR_LIGHT_BLUE)
  call SetPlayerColor(Scourges[4],PLAYER_COLOR_AQUA)
  call SetPlayerColor(Scourges[5],PLAYER_COLOR_BROWN)
  loop
    if GetPlayerSlotState(Sentinels[i])==PLAYER_SLOT_STATE_EMPTY then
      call SetPlayerName(Sentinels[i],GetObjectName('n0DH')+" "+I2S(i))
    endif
    if GetPlayerSlotState(Scourges[i])==PLAYER_SLOT_STATE_EMPTY then
      call SetPlayerName(Scourges[i],GetObjectName('n0DH')+" "+I2S(5+i))
    endif
    set i=i+1
    exitwhen i>5
  endloop
endfunction

function Func0949 takes nothing returns nothing
  local integer i
  local integer a=125
  call SetUnitOwner(SentCircleOfPower1,Sentinels[1],false)
  call SetUnitOwner(SentCircleOfPower2,Sentinels[2],false)
  call SetUnitOwner(SentCircleOfPower3,Sentinels[3],false)
  call SetUnitOwner(SentCircleOfPower4,Sentinels[4],false)
  call SetUnitOwner(SentCircleOfPower5,Sentinels[5],false)
  call SetUnitOwner(ScrgCircleOfPower1,Scourges[1],false)
  call SetUnitOwner(ScrgCircleOfPower2,Scourges[2],false)
  call SetUnitOwner(ScrgCircleOfPower3,Scourges[3],false)
  call SetUnitOwner(ScrgCircleOfPower4,Scourges[4],false)
  call SetUnitOwner(ScrgCircleOfPower5,Scourges[5],false)
  set CirclesOfPower[GetPlayerId(Sentinels[1])]=SentCircleOfPower1
  set CirclesOfPower[GetPlayerId(Sentinels[2])]=SentCircleOfPower2
  set CirclesOfPower[GetPlayerId(Sentinels[3])]=SentCircleOfPower3
  set CirclesOfPower[GetPlayerId(Sentinels[4])]=SentCircleOfPower4
  set CirclesOfPower[GetPlayerId(Sentinels[5])]=SentCircleOfPower5
  set CirclesOfPower[GetPlayerId(Scourges[1])]=ScrgCircleOfPower1
  set CirclesOfPower[GetPlayerId(Scourges[2])]=ScrgCircleOfPower2
  set CirclesOfPower[GetPlayerId(Scourges[3])]=ScrgCircleOfPower3
  set CirclesOfPower[GetPlayerId(Scourges[4])]=ScrgCircleOfPower4
  set CirclesOfPower[GetPlayerId(Scourges[5])]=ScrgCircleOfPower5
  call SelectUnitForPlayerSingle(SentCircleOfPower1,GetOwningPlayer(SentCircleOfPower1))
  call SelectUnitForPlayerSingle(SentCircleOfPower2,GetOwningPlayer(SentCircleOfPower2))
  call SelectUnitForPlayerSingle(SentCircleOfPower3,GetOwningPlayer(SentCircleOfPower3))
  call SelectUnitForPlayerSingle(SentCircleOfPower4,GetOwningPlayer(SentCircleOfPower4))
  call SelectUnitForPlayerSingle(SentCircleOfPower5,GetOwningPlayer(SentCircleOfPower5))
  call SelectUnitForPlayerSingle(ScrgCircleOfPower1,GetOwningPlayer(ScrgCircleOfPower1))
  call SelectUnitForPlayerSingle(ScrgCircleOfPower2,GetOwningPlayer(ScrgCircleOfPower2))
  call SelectUnitForPlayerSingle(ScrgCircleOfPower3,GetOwningPlayer(ScrgCircleOfPower3))
  call SelectUnitForPlayerSingle(ScrgCircleOfPower4,GetOwningPlayer(ScrgCircleOfPower4))
  call SelectUnitForPlayerSingle(ScrgCircleOfPower5,GetOwningPlayer(ScrgCircleOfPower5))
  set i=1
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=2
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=3
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=4
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=5
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=7
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=8
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=9
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=10
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set i=11
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,255)
  else
    call SetUnitVertexColor(CirclesOfPower[GetPlayerId(Player(i))],255,255,255,a)
  endif
  set ItemSpawnX[GetPlayerId(Sentinels[1])]=GetUnitX(CirclesOfPower[GetPlayerId(Sentinels[1])])
  set ItemSpawnX[GetPlayerId(Sentinels[2])]=GetUnitX(CirclesOfPower[GetPlayerId(Sentinels[2])])
  set ItemSpawnX[GetPlayerId(Sentinels[3])]=GetUnitX(CirclesOfPower[GetPlayerId(Sentinels[3])])
  set ItemSpawnX[GetPlayerId(Sentinels[4])]=GetUnitX(CirclesOfPower[GetPlayerId(Sentinels[4])])
  set ItemSpawnX[GetPlayerId(Sentinels[5])]=GetUnitX(CirclesOfPower[GetPlayerId(Sentinels[5])])
  set ItemSpawnX[GetPlayerId(Scourges[1])]=GetUnitX(CirclesOfPower[GetPlayerId(Scourges[1])])
  set ItemSpawnX[GetPlayerId(Scourges[2])]=GetUnitX(CirclesOfPower[GetPlayerId(Scourges[2])])
  set ItemSpawnX[GetPlayerId(Scourges[3])]=GetUnitX(CirclesOfPower[GetPlayerId(Scourges[3])])
  set ItemSpawnX[GetPlayerId(Scourges[4])]=GetUnitX(CirclesOfPower[GetPlayerId(Scourges[4])])
  set ItemSpawnX[GetPlayerId(Scourges[5])]=GetUnitX(CirclesOfPower[GetPlayerId(Scourges[5])])
  set ItemSpawnY[GetPlayerId(Sentinels[1])]=GetUnitY(CirclesOfPower[GetPlayerId(Sentinels[1])])
  set ItemSpawnY[GetPlayerId(Sentinels[2])]=GetUnitY(CirclesOfPower[GetPlayerId(Sentinels[2])])
  set ItemSpawnY[GetPlayerId(Sentinels[3])]=GetUnitY(CirclesOfPower[GetPlayerId(Sentinels[3])])
  set ItemSpawnY[GetPlayerId(Sentinels[4])]=GetUnitY(CirclesOfPower[GetPlayerId(Sentinels[4])])
  set ItemSpawnY[GetPlayerId(Sentinels[5])]=GetUnitY(CirclesOfPower[GetPlayerId(Sentinels[5])])
  set ItemSpawnY[GetPlayerId(Scourges[1])]=GetUnitY(CirclesOfPower[GetPlayerId(Scourges[1])])
  set ItemSpawnY[GetPlayerId(Scourges[2])]=GetUnitY(CirclesOfPower[GetPlayerId(Scourges[2])])
  set ItemSpawnY[GetPlayerId(Scourges[3])]=GetUnitY(CirclesOfPower[GetPlayerId(Scourges[3])])
  set ItemSpawnY[GetPlayerId(Scourges[4])]=GetUnitY(CirclesOfPower[GetPlayerId(Scourges[4])])
  set ItemSpawnY[GetPlayerId(Scourges[5])]=GetUnitY(CirclesOfPower[GetPlayerId(Scourges[5])])
endfunction

function Func0950 takes unit source returns boolean
  local integer ZAE=GetUnitTypeId(source)
  return ZAE=='n00V' or ZAE=='n00W' or ZAE=='n002' or ZAE=='n00X' or ZAE=='nC38' or ZAE=='n01K' or ZAE=='n009'
endfunction

function Func0951 takes nothing returns nothing
  if(GetOwningPlayer(GetEnumUnit())==Player(0))then
    call SetUnitOwner(GetEnumUnit(),Sentinels[0],false)
    if Func0950(GetEnumUnit())==false then
      call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(0))
    endif
  else
    call SetUnitOwner(GetEnumUnit(),Scourges[0],false)
    if Func0950(GetEnumUnit())==false then
      call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(6))
    endif
  endif
endfunction

function Func0952 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,Player(0),Condition(function ReturnTrue))
  call ForGroup(g,function Func0951)
  call GroupClear(g)
  call GroupEnumUnitsOfPlayer(g,Player(6),Condition(function ReturnTrue))
  call ForGroup(g,function Func0951)
  call KillGroup(g)
endfunction

function Func0953 takes player whichPlayer returns nothing
  local integer ZAE=0
  local string ZJE=GetPlayerName(whichPlayer)
  local integer QIE=StringLength(ZJE)
  local integer ZBE=QIE
  loop
    exitwhen ZAE==QIE
    if SubString(ZJE,ZAE,ZAE+1)=="("and SubString(ZJE,ZAE-1,ZAE)==" "then
      set ZBE=ZAE-1
      call SetPlayerName(whichPlayer,SubString(ZJE,0,ZBE))
      set ZAE=QIE
    else
      set ZAE=ZAE+1
    endif
  endloop
endfunction

function RemoveTrashFromNick takes string s returns string
  local integer i=0
  local integer length=StringLength(s)
  local string ss=""
  local string p
  loop
    exitwhen i==length
    set p=SubString(s,i,i+1)
    if i+1==length and p=="|" then
      set ss=ss+"||"
    else
      set ss=ss+p
    endif
    set i=i+1
  endloop
  return ss
endfunction

function OnlyForMTFPlatform takes nothing returns nothing
  call CustomDefeatBJ(LocalPlayer,"This map is only available at Ranked Gaming Client platform. |nVisit |c00ff0000http://www.rankedgaming.com/|r for more info.")
endfunction

function SetPlayerAllianceEx1 takes player p1,player p2,boolean K9X returns nothing
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(0),K9X)
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(1),K9X)
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(2),K9X)
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(3),K9X)
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(4),K9X)
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(5),K9X)
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(6),false)
  call SetPlayerAlliance(p1,p2,ConvertAllianceType(7),false)
endfunction

function InitForces takes nothing returns nothing
  local integer LEX
  local integer LXX
  local integer i=0
  local integer k
  local location SpawnSent=GetRectCenter(gg_rct_Allpick_Sent)
  local location SpawnScourge=GetRectCenter(gg_rct_Allpick_Scourge)
  if GetPlayerState(Sentinels[0],PLAYER_STATE_OBSERVER)!=0 or GetPlayerState(Scourges[0],PLAYER_STATE_OBSERVER)!=0 then
    set udg_ObserverMode=true
    set Sentinels[0]=Player(0)
    set Scourges[0]=Player(6)
    set SentinelPlayer=GetPlayerName(Sentinels[0])
    set ScourgePlayer=GetPlayerName(Scourges[0])
    set udg_Observer1=Player(0)
    set udg_Observer2=Player(6)
    call SetPlayerAlliance(Sentinels[0],Sentinels[0],ConvertAllianceType(6),false)
    call SetPlayerAlliance(Scourges[0],Scourges[0],ConvertAllianceType(6),false)
    call SetAllyColorFilterState(0)
    loop
      call SetPlayerAlliance(Player(0),Sentinels[i],ConvertAllianceType(0),true)
      call SetPlayerAlliance(Player(0),Sentinels[i],ConvertAllianceType(4),true)
      call SetPlayerAlliance(Player(0),Scourges[i],ConvertAllianceType(0),false)
      call SetPlayerAlliance(Player(0),Scourges[i],ConvertAllianceType(4),false)
      set i=i+1
      exitwhen i>5
    endloop
  endif
  if false then
    if Func0916(GetPlayerName(udg_Observer1),"|cFFFF0000RGC")==false then
      call TimerStart(CreateTimer(),1,false,function OnlyForMTFPlatform)
    endif
  endif
  call ForceAddPlayer(Force_Elfs,Sentinels[0])
  call ForceAddPlayer(Force_Elfs,Sentinels[1])
  call ForceAddPlayer(Force_Elfs,Sentinels[2])
  call ForceAddPlayer(Force_Elfs,Sentinels[3])
  call ForceAddPlayer(Force_Elfs,Sentinels[4])
  call ForceAddPlayer(Force_Elfs,Sentinels[5])
  call ForceAddPlayer(Force_Unds,Scourges[0])
  call ForceAddPlayer(Force_Unds,Scourges[1])
  call ForceAddPlayer(Force_Unds,Scourges[2])
  call ForceAddPlayer(Force_Unds,Scourges[3])
  call ForceAddPlayer(Force_Unds,Scourges[4])
  call ForceAddPlayer(Force_Unds,Scourges[5])
  call ForceAddPlayer(AllPlayers,Sentinels[1])
  call ForceAddPlayer(AllPlayers,Sentinels[2])
  call ForceAddPlayer(AllPlayers,Sentinels[3])
  call ForceAddPlayer(AllPlayers,Sentinels[4])
  call ForceAddPlayer(AllPlayers,Sentinels[5])
  call ForceAddPlayer(AllPlayers,Scourges[1])
  call ForceAddPlayer(AllPlayers,Scourges[2])
  call ForceAddPlayer(AllPlayers,Scourges[3])
  call ForceAddPlayer(AllPlayers,Scourges[4])
  call ForceAddPlayer(AllPlayers,Scourges[5])
  if udg_ObserverMode then
    call ForceAddPlayer(AllPlayers,Player(0))
    call ForceAddPlayer(AllPlayers,Player(6))
  endif
  set i=0
  set k=0
  loop
    loop
      if(i!=k)then
        call SetPlayerAllianceEx1(Sentinels[i],Sentinels[k],true)
        call SetPlayerAllianceEx1(Scourges[i],Scourges[k],true)
        call SetPlayerAllianceEx1(Sentinels[i],Scourges[k],false)
        call SetPlayerAllianceEx1(Scourges[i],Sentinels[k],false)
      endif
      set k=k+1
      exitwhen k>5
    endloop
    set k=0
    set i=i+1
    exitwhen i>5
  endloop
  call SetPlayerTeam(Sentinels[0],0)
  call SetPlayerTeam(Sentinels[1],0)
  call SetPlayerTeam(Sentinels[2],0)
  call SetPlayerTeam(Sentinels[3],0)
  call SetPlayerTeam(Sentinels[4],0)
  call SetPlayerTeam(Sentinels[5],0)
  call SetPlayerTeam(Scourges[0],1)
  call SetPlayerTeam(Scourges[1],1)
  call SetPlayerTeam(Scourges[2],1)
  call SetPlayerTeam(Scourges[3],1)
  call SetPlayerTeam(Scourges[4],1)
  call SetPlayerTeam(Scourges[5],1)
  call SetPlayerName(Sentinels[0],GetObjectName('n03N'))
  call SetPlayerName(Scourges[0],GetObjectName('n03O'))
  call SetPlayerName(Neutrals,GetObjectName('n0E8'))
  call Func0949()
  if(Sentinels[0]!=Player(0)or Scourges[0]!=Player(6))then
    call Func0952()
  endif
  call Func0948()
  set LXX=GetPlayersAmountInForce(Force_Elfs)
  set LEX=GetPlayersAmountInForce(Force_Unds)
  set i=1
  loop
    if(IsPlayer(Sentinels[i]))then
      call SetPlayerState(Sentinels[i],PLAYER_STATE_RESOURCE_GOLD,(4375/LXX))
      call SetPlayerState(Sentinels[i],PLAYER_STATE_RESOURCE_LUMBER,0)
    endif
    call SetPlayerHandicapXP(Sentinels[i],1)
    call SetPlayerState(Sentinels[i],PLAYER_STATE_GIVES_BOUNTY,0)
    if(IsPlayer(Scourges[i]))then
      call SetPlayerState(Scourges[i],PLAYER_STATE_RESOURCE_GOLD,(4375/LEX))
      call SetPlayerState(Scourges[i],PLAYER_STATE_RESOURCE_LUMBER,0)
    endif
    call SetPlayerHandicapXP(Scourges[i],1)
    call SetPlayerState(Sentinels[i],PLAYER_STATE_GIVES_BOUNTY,0)
    set i=i+1
    exitwhen i>5
  endloop
  call SetPlayerState(Sentinels[0],PLAYER_STATE_GIVES_BOUNTY,0)
  call SetPlayerState(Scourges[0],PLAYER_STATE_GIVES_BOUNTY,0)
  call SetPlayerState(Neutrals,PLAYER_STATE_GIVES_BOUNTY,0)
  call RedefineModeTyper()
  call StorePlayersColorValues()
  call Func0953(Sentinels[1])
  call Func0953(Sentinels[2])
  call Func0953(Sentinels[3])
  call Func0953(Sentinels[4])
  call Func0953(Sentinels[5])
  call Func0953(Scourges[1])
  call Func0953(Scourges[2])
  call Func0953(Scourges[3])
  call Func0953(Scourges[4])
  call Func0953(Scourges[5])
  set i=1
  loop
    if IsPlayer(Sentinels[i])then
      call CreateUnitAtLoc(Sentinels[i],'n00C',SpawnSent,bj_UNIT_FACING)
      call CreateUnitAtLoc(Sentinels[i],'n00C',SpawnScourge,bj_UNIT_FACING)
    endif
    if IsPlayer(Scourges[i])then
      call CreateUnitAtLoc(Scourges[i],'n00C',SpawnSent,bj_UNIT_FACING)
      call CreateUnitAtLoc(Scourges[i],'n00C',SpawnScourge,bj_UNIT_FACING)
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set i=0
  loop
    set PlayerNames[i]=RemoveTrashFromNick(GetPlayerName(Player(i)))
    set PlayerNamesHashes[i]=PlayerNames[i]
    set i=i+1
    exitwhen i==16
  endloop
  call RemoveLocation(SpawnSent)
  call RemoveLocation(SpawnScourge)
  set SpawnSent=null
  set SpawnScourge=null
endfunction

function CHD takes integer id,integer hid,integer LNX,integer LBX,string LCX,real LDX,integer LFX returns nothing
  set HeroID[id]=hid
  set integers092[id]=LNX
  set integers086[id]=LBX
  set HeroIcon[id]=GetAbilitySoundById(hid,SOUND_TYPE_EFFECT_LOOPED)
  call SaveUnitWinAnimation(HeroID[id],LCX)
  if IsUnitIdType(hid,UNIT_TYPE_MELEE_ATTACKER)then
    set MeleeHeroesAmount=MeleeHeroesAmount+1
    set MeleeHeroesArray[MeleeHeroesAmount]=hid
  else
    set integer110=integer110+1
    set integers090[integer110]=hid
  endif
  if LFX==2 then
    set integer109=integer109+1
    set integers089[integer109]=hid
  elseif LFX==1 then
    set integer108=integer108+1
    set integers088[integer108]=hid
  elseif LFX==3 then
    set integer107=integer107+1
    set integers087[integer107]=hid
  endif
endfunction

function InitHeroes takes nothing returns nothing
  local integer i=1
  set FirstHeroIndexid=1
  call CHD(1,'Hvwd','h03Z','n09U',"stand 4",1.35,3)
  call CHD(2,'Hmbr','h040','n09A',"attack slam alternate",1.3,2)
  call CHD(3,'Emoo','h041','n099',"stand 4",1,2)
  call CHD(4,'O00P','h042','n098',"stand 2",1,3)
  call CHD(5,'Hjai','h043','n09W',"stand victory",1,2)
  call CHD(6,'H001','h044','n096',"spell",1,1)
  call CHD(7,'HC49','h045','n09P',"spell",1,3)
  call CHD(8,'Otch','h046','n09D',"attack slam",1.1,1)
  call CHD(9,'HC92','h047','n09X',"stand 4",1,3)
  call CHD(10,'N01O','h048','n09Y',"spell slam",1,3)
  call CHD(11,'H004','h049','n09Z',"stand victory",1.2,2)
  call CHD(12,'Nbbc','h04A','n0A5',"stand victory",1,3)
  call CHD(13,'N01A','h04B','n097',"stand ready",1,2)
  call CHD(14,'Hamg','h04C','n09F',"stand 3",0.72,1)
  call CHD(15,'O015','h07P','n0GC',"stand victory",1,1)
  call CHD(16,'Hblm','h04E','n09G',"stand victory",1.2,2)
  call CHD(17,'Huth','h04F','n09V',"attack spell",1.2,3)
  call CHD(18,'Hmkg','h04G','n0A1',"sleep",1.4,2)
  call CHD(19,'Ntin','h04H','n0AA',"stand 2",1,2)
  call CHD(20,'Emns','h04I','n0A4',"spell",1,2)
  call CHD(21,'Ogrh','h04J','n0A3',"stand victory",1,3)
  call CHD(22,'Ucrl','h04K','n0A7',"spell",0.5,1)
  call CHD(23,'H00K','h04L','n0A9',"stand 2",1,2)
  call CHD(24,'H00A','h04M','n0AB',"spell chain lightning",1,2)
  call CHD(25,'E005','h04N','n0BE',"spell",1,3)
  call CHD(26,'Usyl','h04O','n0BD',"spell",1.1,3)
  call CHD(27,'N016','h04P','n0A8',"stand 3",1.25,3)
  call CHD(28,'Orkn','h057','n094',"stand victory",1,2)
  call CHD(29,'O01F','h0CI','n0KS',"stand 3",1.30,1)
  call CHD(30,'Npbm','h053','n0AO',"stand ready",1,1)
  call CHD(31,'H000','h04X','n0AN',"stand 3",1.75,1)
  call CHD(32,'Naka','h052','n0AM',"stand var4",1.2,3)
  call CHD(33,'Hlgr','h04V','n0AQ',"stand victory",1.35,1)
  call UnitSaveColor('H00G',255,255,200)
  call UnitSaveColor('H00F',255,255,200)
  call UnitSaveColor('H00E',255,200,200)
  call CHD(34,'Edem','h04T','n0AR',"stand channel",1,3)
  call CHD(35,'Nbrn','h055','n0AL',"spell",1,3)
  call CHD(36,'Harf','h04Z','n0AS',"stand victory",1.1,1)
  call CHD(37,'H00D','h04S','n0AK',"spell slam",1,1)
  call CHD(38,'E00P','h04R','n0AJ',"stand 3",1,2)
  call CHD(39,'N01I','h054','n0AI',"stand 2",1,1)
  call CHD(40,'N01V','h04W','n0AH',"stand ready",1,3)
  call CHD(41,'H00S','h04Q','n0AT',"spell",1,2)
  call CHD(42,'H00Q','h04Y','n0AG',"stand alternate 3",1.15,1)
  call CHD(43,'E01Y','h058','n0AF',"stand victory",1.2,3)
  call CHD(44,'N00B','h050','n0AE',"attack spell",1.1,2)
  call CHD(45,'H00T','h051','n0AU',"Birth",1.5,1)
  call CHD(46,'H06S','h06T','n0EE',"stand victory",1.1,1)
  call CHD(47,'N0EG','h07A','n0EH',"stand victory",1.2,2)
  call CHD(48,'E02N','h0CC','n0KN',"stand 3",1.1,3)
  call CHD(49,'E02J','h0CD','n0KR',"stand 3",1.1,2)
  call CHD(50,'E02I','h0C9','n0KK',"stand 3",1,1)
  call CHD(51,'E02F','h0C8','n0KM',"stand 3",1.05,1)
  call CHD(52,'H008','h04U','n0AC',"stand",1.65,1)
  call CHD(53,'E02X','h0CT','n0LK',"stand 3",1.15,2)
  call CHD(54,'N0M0','h0DG','n0M1',"stand 3",1,3)
  call CHD(55,'E02K','h0CA','n0KJ',"stand 3",1.3,1)
  call CHD(56,'H0DO','h0DH','n0M6',"stand 3",1.1,2)
  call CHD(57,'E032','h0EB','n0ME',"stand 3",1,1)
  call CHD(58,'N0MU','h0EK','n0MV',"stand 3",1,1)
  call CHD(59,'N0MD','h0EP','n0MG',"stand victory",1.25,2)
  set LastScourgeHeroIndexid=59
  set FirstSentinelHeroIndexid=60
  call CHD(60,'Ewar','h05J','n0B5',"spell slam",1,3)
  call CHD(61,'H00V','h05K','n0B6',"stand ready",1,3)
  call CHD(62,'Udre','h05L','n0B7',"spell slam",1,1)
  call CHD(63,'NC00','h05M','n0C0',"stand victory",1.7,1)
  call UnitSaveColor(HeroID[63],100,125,100)
  call CHD(64,'UC42','h05N','n0BV',"stand victory",1.1,1)
  call CHD(65,'U000','h05O','n0BU',"spell throw",0.8,3)
  call CHD(66,'UC91','h05P','n0C1',"spell",1,1)
  call UnitSaveColor(HeroID[66],175,75,200)
  call CHD(67,'UC01','h05Q','n0C2',"spell slam",1.3,2)
  call CHD(68,'E004','h05R','n0BW',"stand victory",1,3)
  call CHD(69,'EC45','h05S','n0BS',"spell slam",1.3,3)
  call UnitSaveColor(HeroID[69],0,255,150)
  call CHD(70,'EC77','h05T','n0BR',"spell slam",1.2,3)
  call UnitSaveColor(HeroID[70],75,255,25)
  call CHD(71,'E002','h05U','n0BY',"spell",1,3)
  call CHD(72,'U00C','h05V','n0BQ',"victory",1.5,1)
  call UnitSaveColor(HeroID[72],100,100,100)
  call CHD(73,'H00H','h05W','n0BT',"stand ready",1,2)
  call CHD(74,'Ofar','h05X','n0BP',"attack slam",1,1)
  call CHD(75,'Oshd','h05Y','n0BO',"spell",1.5,2)
  call UnitSaveColor(HeroID[75],150,0,150)
  call CHD(76,'U00E','h05Z','n0B8',"stand victory",1.3,2)
  call CHD(77,'U00F','h060','n0C5',"stand 3",1,1)
  call CHD(78,'O00J','h061','n0C3',"stand ready",1.2,1)
  call CHD(79,'Ubal','h062','n0BX',"attack",1,3)
  call UnitSaveColor(HeroID[79],255,200,200)
  call CHD(80,'Nfir','h063','n0BN',"stand channel",1.15,3)
  call UnitSaveColor(HeroID[80],0,0,0)
  call CHD(81,'U00K','h064','n0C4',"attack 3",1,1)
  call CHD(82,'Opgh','h065','n0BM',"stand victory",1,1)
  call CHD(83,'Hvsh','h066','n0BZ',"stand victory",1.25,3)
  call UnitSaveColor(HeroID[83],250,150,150)
  call CHD(84,'Udea','h067','n0BL',"stand ready",1,1)
  call CHD(85,'E01B','h068','n0B9',"stand ready",0.8,3)
  call CHD(86,'E01A','h069','n0BK',"stand victory",1.25,2)
  call CHD(87,'U00P','h06A','n0BA',"stand alternate 2",0.85,2)
  call CHD(88,'E01C','h06C','n0BB',"spell",1.5,2)
  call CHD(89,'H00I','h06D','n0BJ',"spell",1.4,3)
  call CHD(90,'N01W','h06E','n0BI',"spell",1.2,2)
  call CHD(91,'N00R','h06F','n0BC',"stand channel",0.95,1)
  call CHD(92,'H00R','h06G','n0BH',"stand",2,1)
  call CHD(93,'H00N','h06H','n0BG',"spell",1.15,2)
  call CHD(94,'H00U','h06B','n0BF',"spell",1.25,2)
  call CHD(95,'Uktl','h04D','n0A6',"stand",1.5,2)
  call CHD(96,'O016','h07R','n0G9',"stand",1.2,2)
  call CHD(97,'N0HP','h0B0','n0HR',"stand",1.17,2)
  call CHD(98,'H071','h072','n0EF',"stand 3",1.25,3)
  call CHD(99,'Eevi','h056','n0AV',"spell channel",1,3)
  call CHD(100,'Ekee','h059','n0AW',"stand victory",1,2)
  call CHD(101,'E02H','h0CB','n0KL',"stand 3",1.25,2)
  call CHD(102,'Ulic','h05A','n0AX',"stand channel",1.3,2)
  call CHD(103,'UC76','h05B','n0AY',"spell wail",1.35,2)
  call CHD(104,'UC18','h05C','n0AZ',"spell callstorm",1.3,2)
  call UnitSaveColor(HeroID[104],50,100,255)
  call CHD(105,'EC57','h05D','n0B0',"attack",1,3)
  call UnitSaveColor(HeroID[105],150,200,255)
  call CHD(106,'UC11','h05E','n0A2',"stand channel",1,1)
  call UnitSaveColor(HeroID[106],150,150,100)
  call CHD(107,'UC60','h05F','n0B1',"stand victory",1,2)
  call UnitSaveColor(HeroID[107],150,150,150)
  call CHD(108,'U00A','h05G','n0B2',"stand victory",1.05,1)
  call CHD(109,'N0M7','h0DW','n0M8',"stand victory",0.9,2)
  call CHD(110,'N0MK','h0EF','n0ML',"stand victory",1.1,3)
  call CHD(111,'U008','h05H','n0B3',"spell",1.26,1)
  call UnitSaveColor(HeroID[111],255,75,255)
  call CHD(112,'U006','h05I','n0B4',"walk",1.36,3)
  set LastHeroIndexid=112
  call SaveUnitWinAnimation('esen',"stand 4")
  call SaveUnitWinAnimation('e00V',"stand 4")
  call SaveUnitWinAnimation('n12S',"stand 4")
  call SaveUnitWinAnimation('edry',"spell")
  call SaveUnitWinAnimation('e00W',"spell")
  call SaveUnitWinAnimation('n12T',"spell")
  call SaveUnitWinAnimation('ugho',"stand victory")
  call SaveUnitWinAnimation('u001',"stand victory")
  call SaveUnitWinAnimation('n12Q',"stand victory")
  call SaveUnitWinAnimation('unec',"stand channel")
  call SaveUnitWinAnimation('u002',"stand channel")
  call SaveUnitWinAnimation('n12R',"stand channel")
  call AllHeroes_Init()
endfunction

function Func0960 takes integer id,integer QIE returns real
  local real cd=LoadReal(CooldownStorage,-id,QIE)
  if cd==0 and LoadBoolean(CooldownStorage,-id,0)then
    set cd=LoadReal(CooldownStorage,-id,1)
  endif
  return cd
endfunction

function Func0961 takes integer id returns boolean
  return id=='A2TH' or(id>='A330' and id<='A336')
endfunction

function getstonelvl takes unit u returns integer
  return GetUnitAbilityLevel(u,'A2TH')+GetUnitAbilityLevel(u,'A330')+GetUnitAbilityLevel(u,'A331')+GetUnitAbilityLevel(u,'A332')+GetUnitAbilityLevel(u,'A333')+GetUnitAbilityLevel(u,'A334')+GetUnitAbilityLevel(u,'A335')+GetUnitAbilityLevel(u,'A336')
endfunction

function InitAbilitiesWithoutCastEvent takes nothing returns nothing
  call SaveBoolean(AbilitiesVariousFlags,0,'A30Z',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A31K',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A3FA',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0K5',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2O9',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A24B',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A24A',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A28Q',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A21F',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A21G',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A21H',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1C0',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0MP',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0KX',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0KW',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A205',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A06K',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0BE',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0NE',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'AUav',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2UO',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A3Q6',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A026',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1WB',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0DY',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0QN',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2UM',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A13T',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0OI',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0LZ',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A3Q4',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A3Q5',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A09V',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1NH',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1MN',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A330',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A331',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A332',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A333',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A334',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A335',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A336',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2NI',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2JL',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1OZ',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'Anh1',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A21W',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A21V',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A21X',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1TU',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A121',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A24E',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A30W',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0SX',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A352',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A3DP',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A3CT',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A3CV',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0RQ',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2XJ',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A20N',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1Z2',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1Z3',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0SA',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0SB',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1WF',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1FZ',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0AM',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0A3',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0A4',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A27X',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A1S9',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A0HA',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A30M',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A06B',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A38K',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A38M',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A31Z',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2FX',true)
  call SaveBoolean(AbilitiesVariousFlags,0,'A2XK',true)
endfunction

function Func0964 takes integer LPX,integer LQX,integer LSX,integer LTX,integer LUX returns nothing
  if LQX>=1 then
    call SaveInteger(HeroStats,LPX,0,LQX)
  endif
  if LSX>=1 then
    call SaveInteger(HeroStats,LPX,1,LSX)
  endif
  if LTX>=1 then
    call SaveInteger(HeroStats,LPX,2,LTX)
  endif
  if LUX>=1 then
    call SaveInteger(HeroStats,LPX,3,LUX)
  endif
endfunction

function Func0965 takes nothing returns nothing
  call Func0964(HeroID[1],'A02A','A17O',0,0)
  call Func0964(HeroID[2],'A2WQ',0,0,0)
  call Func0964(HeroID[3],'A0DX','A01B',0,0)
  call Func0964(HeroID[4],'A0FN','A0G6',0,0)
  call Func0964(HeroID[5],'A1E9','A04C',0,0)
  call Func0964(HeroID[6],'A190','A2IS',0,0)
  call Func0964(HeroID[7],'A2KU','A24D','A063',0)
  call Func0964(HeroID[8],'A0SK',0,0,0)
  call Func0964(HeroID[9],'A0RG',0,0,0)
  call Func0964(HeroID[10],'A0A5',0,0,0)
  call Func0964(HeroID[11],'A01F','A027',0,0)
  call Func0964(HeroID[12],'Nbbc','A05G',0,0)
  call Func0964(HeroID[13],'A2NT','A14L',0,0)
  call Func0964(HeroID[14],'A01Z','A26N','A2ML',0)
  call Func0964(HeroID[15],'A1AA','A1A8',0,0)
  call Func0964(HeroID[16],'A085','A10X','A112','A11V')
  call SaveInteger(HeroStats,HeroID[16],4,'A11W')
  call SaveInteger(HeroStats,HeroID[16],5,'A11X')
  call Func0964(HeroID[15],'A1P9',0,0,0)
  call Func0964(HeroID[18],'A011','A04W','A083',0)
  call SaveInteger(HeroStats,HeroID[18],4,'A089')
  call SaveInteger(HeroStats,HeroID[18],5,'A007')
  call SaveInteger(HeroStats,HeroID[18],6,'A08F')
  call SaveInteger(HeroStats,HeroID[18],7,'A08A')
  call SaveInteger(HeroStats,HeroID[18],8,'A01T')
  call SaveInteger(HeroStats,HeroID[18],9,'A08G')
  call SaveInteger(HeroStats,HeroID[18],10,'A08D')
  call SaveInteger(HeroStats,HeroID[18],11,'A00F')
  call SaveInteger(HeroStats,HeroID[18],12,'A08I')
  call Func0964(HeroID[19],'A049','A05E','A2WB','A2WA')
  call SaveInteger(HeroStats,HeroID[19],4,'A0BQ')
  call Func0964(HeroID[20],'A21E','A01O','AEfn',0)
  call Func0964(HeroID[21],'A10D','A313',0,0)
  call Func0964(HeroID[22],'A0LL','A0BZ',0,0)
  call Func0964(HeroID[23],'A06H','A05J','A06B',0)
  call Func0964(HeroID[24],'A0LV','A28T','A0KM','A2MC')
  call SaveInteger(HeroStats,HeroID[24],4,'A361')
  call Func0964(HeroID[27],'A21N','A21M',0,0)
  call Func0964(HeroID[28],'A00P','A0RX','A010',0)
  call Func0964(HeroID[29],'A1T8','A1TA',0,0)
  call Func0964(HeroID[30],'A06M','Acdh',0,0)
  call Func0964(HeroID[31],'A2ON','A00S',0,0)
  call Func0964(HeroID[32],'A07A','A004',0,0)
  call Func0964(HeroID[33],'A03F','A0AR',0,0)
  call Func0964(HeroID[34],'AEbl',0,0,0)
  call Func0964(HeroID[35],'A2WF','A2O2',0,0)
  call Func0964(HeroID[36],'A08N','A08V',0,0)
  call Func0964(HeroID[37],'A0OO','A2U5','A0O1',0)
  call Func0964(HeroID[38],'A0O7','A0O6',0,0)
  call Func0964(HeroID[39],'A1NI','A0IL',0,0)
  call Func0964(HeroID[40],'A0L8','A0LN','A0KV','A3UG')
  call Func0964(HeroID[41],'A14R',0,0,0)
  call Func0964(HeroID[42],'A0QP',0,0,0)
  call Func0964(HeroID[43],'A1EA','A0RV',0,0)
  call Func0964(HeroID[44],'A0SC','A0S9',0,0)
  call Func0964(HeroID[45],'A0Z6','A0Z5','A0Z4',0)
  call Func0964(HeroID[46],'A136','A11N',0,0)
  call Func0964(HeroID[47],'A12K','A14I','A12J',0)
  call Func0964(HeroID[48],'A1SO','A1SQ','A229',0)
  call Func0964(HeroID[49],'A1SU','A1TV','A1SW',0)
  call Func0964(HeroID[50],'A1YO','A1YR','A1S7',0)
  call Func0964(HeroID[51],'A1YX','A1YY','A1RJ',0)
  call Func0964(HeroID[53],'A27F','A27G',0,0)
  call Func0964(HeroID[54],'A2H0','A2H3','A2HS',0)
  call Func0964(HeroID[55],'A2J2','A2JB',0,0)
  call Func0964(HeroID[56],'A2HN','A2IT',0,0)
  call Func0964(HeroID[57],'A2FK',0,0,0)
  call Func0964(HeroID[58],'A2TJ','A2QI','A2UU',0)
  call Func0964(HeroID[59],'A2QT','A2T5',0,0)
  call Func0964(HeroID[60],'A0PL',0,0,0)
  call Func0964(HeroID[61],'A0G2',0,0,0)
  call Func0964(HeroID[62],'A02H','A08C',0,0)
  call Func0964(HeroID[63],'AHtb',0,0,0)
  call Func0964(HeroID[64],'A3Q6','A10R','A1OP',0)
  call Func0964(HeroID[65],'A0X7','A1H5','A2KO',0)
  call SaveInteger(HeroStats,HeroID[65],4,'A3D0')
  call SaveInteger(HeroStats,HeroID[65],5,'A3CY')
  call SaveInteger(HeroStats,HeroID[65],6,'A3CZ')
  call Func0964(HeroID[66],'A05C','A29K',0,0)
  call Func0964(HeroID[67],'A0Q7','A0ME','A04A',0)
  call Func0964(HeroID[68],'A025','A030',0,0)
  call Func0964(HeroID[69],'A0LK',0,0,0)
  call Func0964(HeroID[71],'A1E7','A1DP',0,0)
  call Func0964(HeroID[72],'A2TT','A194',0,0)
  call Func0964(HeroID[73],'A09D','A2TD',0,0)
  call Func0964(HeroID[74],'A046','A3OH',0,0)
  call Func0964(HeroID[75],'A0GK','A2OI','A04Y',0)
  call Func0964(HeroID[76],'A05V',0,0,0)
  call Func0964(HeroID[77],'A06I','A3NV',0,0)
  call Func0964(HeroID[79],'A1QW','A0CA',0,0)
  call Func0964(HeroID[80],'A0EY','A0FH','A0F0',0)
  call Func0964(HeroID[81],'A0H0','A06O','A3NX',0)
  call Func0964(HeroID[82],'A0I6','A0S1',0,0)
  call Func0964(HeroID[83],'A2X9','A2X8',0,0)
  call Func0964(HeroID[84],'A0I3','A0MF',0,0)
  call Func0964(HeroID[85],'A0HW',0,0,0)
  call Func0964(HeroID[86],'A0NO','A0NM',0,0)
  call Func0964(HeroID[87],'A0OJ',0,0,0)
  call Func0964(HeroID[88],'A0J5','A0AS','A06P',0)
  call Func0964(HeroID[89],'A0N8','A0NB',0,0)
  call Func0964(HeroID[90],'A10L','A0OR','A2X6',0)
  call Func0964(HeroID[91],'A0RA','A01I',0,0)
  call Func0964(HeroID[92],'A15S','A15V','A0R5',0)
  call Func0964(HeroID[93],'A0R7','A0QG','A0QE',0)
  call Func0964(HeroID[94],'A0VS','A0VK','A0VQ','A0XL')
  call SaveInteger(HeroStats,HeroID[94],4,'A0VM')
  call SaveInteger(HeroStats,HeroID[94],5,'A0VN')
  call SaveInteger(HeroStats,HeroID[94],6,'A0VO')
  call SaveInteger(HeroStats,HeroID[94],7,'A0VP')
  call SaveInteger(HeroStats,HeroID[94],8,'A0VG')
  call SaveInteger(HeroStats,HeroID[94],9,'A0VZ')
  call Func0964(HeroID[95],'A0I7','A180','A0B1',0)
  call Func0964(HeroID[96],'A19V','A19Z',0,0)
  call Func0964(HeroID[97],'A1MG','A1HQ',0,0)
  call Func0964(HeroID[98],'A1J7',0,0,0)
  call Func0964(HeroID[99],'A1RI','A2KZ','A0H4',0)
  call Func0964(HeroID[100],'A20T','A06W',0,0)
  call Func0964(HeroID[101],'A1S8','A1SB',0,0)
  call Func0964(HeroID[102],'A053','A07F',0,0)
  call Func0964(HeroID[103],'A02M','A0P6',0,0)
  call Func0964(HeroID[104],'A0X5','A0MN','A02N',0)
  call Func0964(HeroID[105],'A173',0,0,0)
  call Func0964(HeroID[106],'A02S','A037','A1RD',0)
  call Func0964(HeroID[107],'A08X',0,0,0)
  call Func0964(HeroID[108],'A0RW','A055',0,0)
  call Func0964(HeroID[109],'A2LA','A2LB','A2NE',0)
  call Func0964(HeroID[110],'A2LM','A2M1',0,0)
  call Func0964(HeroID[111],'A0ZF','A03D',0,0)
  call Func0964(HeroID[112],'A0BH',0,0,0)
endfunction

function Func0966 takes integer id returns nothing
  set ItemsAbilitiesMax2=ItemsAbilitiesMax2+1
  set ItemsAbilities2[ItemsAbilitiesMax2]=id
endfunction

function Func0967 takes nothing returns nothing
  call Func0966('AIda')
  call Func0966('A2V4')
  call Func0966('A1ZW')
  call Func0966('AIxk')
  call Func0966('A0CK')
  call Func0966('A017')
  call Func0966('A0B8')
  call Func0966('A0HB')
  call Func0966('A0D3')
  call Func0966('A0DF')
  call Func0966('A02W')
  call Func0966('AIpr')
  call Func0966('AIpl')
  call Func0966('A0FO')
  call Func0966('A0H7')
  call Func0966('A0H6')
  call Func0966('A02X')
  call Func0966('AIsw')
  call Func0966('A0B6')
  call Func0966('Aeat')
  call Func0966('A1ZI')
  call Func0966('AIcy')
  call Func0966('A05Z')
  call Func0966('AIbk')
  call Func0966('A0K5')
  call Func0966('A0PY')
  call Func0966('A12W')
  call Func0966('A0T7')
  call Func0966('A0T8')
  call Func0966('A14A')
  call Func0966('A0JY')
  call Func0966('A15W')
  call Func0966('A1FO')
  call Func0966('A1FD')
  call Func0966('A1MO')
  call Func0966('A1IO')
  call Func0966('A1Q8')
  call Func0966('A1WE')
  call Func0966('A2KG')
  call Func0966('A269')
  call Func0966('A2VE')
  call Func0966('A2WH')
  call Func0966('A2WI')
  call Func0966('A308')
  call Func0966('A38R')
  call Func0966('A38V')
  call Func0966('A395')
  call Func0966('A39K')
  call Func0966('A39C')
  call Func0966('A397')
  call Func0966('A3AG')
  call Func0966('A3BP')
  call Func0966('A3U7')
  call Func0966('A3U8')
  call Func0966('A3E8')
  call Func0966('A2VG')
  call Func0966('A3FA')
  call Func0966('A3KO')
  call Func0966('A340')
  call Func0966('A32B')
  call Func0966('A0K7')
  call Func0966('A11F')
  call Func0966('A11H')
  call Func0966('A11G')
  call Func0966('A11D')
  call Func0966('A0S3')
  call Func0966('A11E')
  call Func0966('A231')
  call Func0966('A2HO')
  call Func0966('A02O')
  call Func0966('A08Y')
  call Func0966('A08Z')
  call Func0966('A090')
  call Func0966('A092')
  call Func0966('AIpg')
  call Func0966('AItb')
  call Func0966('A1QD')
  call Func0966('A1T7')
  call Func0966('A19M')
  call Func0966('A1AC')
  call Func0966('AChx')
  call Func0966('A28Y')
  call Func0966('A1EW')
  call Func0966('A0JL')
  call Func0966('A0FD')
  call Func0966('A1FP')
  call Func0966('A0T9')
  call Func0966('A28D')
  call Func0966('A0K0')
  call Func0966('A0JT')
  call Func0966('A1R5')
  call Func0966('A206')
  call Func0966('A2EA')
  call Func0966('A2K4')
  call Func0966('A2K7')
endfunction

function Func0968 takes nothing returns boolean
  call Func0967()
  return false
endfunction

function Func0969 takes nothing returns nothing
  call CreateQuestBJ(0,"TRIGSTR_50004","TRIGSTR_50005","ReplaceableTextures\\CommandButtons\\BTNSpy.blp")
  call CreateQuestBJ(0,"TRIGSTR_50006","TRIGSTR_50007","ReplaceableTextures\\CommandButtons\\BTNTome.blp")
  call CreateQuestBJ(0,"TRIGSTR_50008","TRIGSTR_50009","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
  call CreateQuestBJ(2,"TRIGSTR_50010","TRIGSTR_50011","ReplaceableTextures\\CommandButtons\\BTNScrollOfHaste.blp")
  call CreateQuestBJ(2,"TRIGSTR_50012","TRIGSTR_50013","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")
  call CreateQuestBJ(2,"TRIGSTR_50014","TRIGSTR_50015","ReplaceableTextures\\CommandButtons\\BTNCarrionScarabs.blp")
endfunction

function Func0970 takes unit u,integer L2X returns nothing
  local integer in=0
  local integer L3X=0
  local integer id=GetUnitTypeId(u)
  local boolean L4X=false
  if Func0592(u)==false then
    if id=='H00S' then
      if L2X=='A14O' then
        set in='A3D5'
        set L3X='A3D6'
      endif
    elseif id=='Emns' then
      if L2X=='A01O' then
        set in='A3D7'
        set L3X='A3D8'
        set L4X=true
      endif
    elseif id=='E01C' then
      if L2X=='A0J5' then
        set in='A3DH'
        set L3X='A3DI'
      endif
    endif
  endif
  if in>0 then
    call UnitAddAbility(u,in)
    call UnitRemoveAbility(u,in)
  endif
  call UnitAddAbility2(u,L2X)
  if L3X>0 then
    call UnitAddAbility(u,L3X)
    call UnitRemoveAbility(u,L3X)
    if L4X then
      call SetUnitVertexColor(u,255,255,255,255)
    endif
  endif
endfunction

function Func0971 takes unit u,integer id returns nothing
  local integer QIE=GetUnitAbilityLevel(u,id)
  local real L6X
  if QIE>0 then
    if id=='A02N' and QIE==4 then
      return
    endif
    call UnitRemoveAbility(u,id)
    call Func0970(u,id)
    call SetUnitAbilityLevel(u,id,QIE)
    if LoadBoolean(CooldownStorage,-id,1)then
      call TimerStart(UltimateCDTimers[GetPlayerId(GetOwningPlayer(u))],0,false,null)
    endif
    if(id=='A0NS' or id=='A1DA')and HaveSavedInteger(HY,GetHandleId(u),4251)then
      call RemoveSavedInteger(HY,GetHandleId(u),4251)
    elseif(id=='A0SB')and HaveSavedInteger(HY,GetHandleId(u),4266)then
      call RemoveSavedInteger(HY,GetHandleId(u),4266)
    endif
  endif
endfunction

function Func0972 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer id=LoadInteger(HY,h,0)
  local unit u=LoadUnitHandle(HY,h,0)
  if u!=null and id!=0 then
    if LoadTriggerHandle(CooldownStorage,GetHandleId(u),id)==t then
      call RemoveSavedHandle(CooldownStorage,GetHandleId(u),id)
      if(id!='A0H0' or GetUnitCurrentOrder(u)!=852503)and(id!='A0SB' or GetUnitCurrentOrder(u)!=852514)then
        call Func0971(u,id)
      endif
    endif
  endif
  call FlushChildHashtable(HY,h)
  call DestroyTrigger(t)
  set u=null
  set t=null
endfunction

function Func0973 takes nothing returns boolean
  local string s
  local integer id=GetLearnedSkill()
  if IsUnitIllusion(GetTriggerUnit())==false then
    if GetCloneHeroId(GetTriggerUnit())==false then
      if udg_ObserverMode then
        set s=GetUnitName(GetTriggerUnit())+" "+GetObjectName('n0HB')+" "+GetObjectName(id)+" ("+GetObjectName('n0HC')+" "+I2S(GetUnitAbilityLevel(GetTriggerUnit(),id))+")"
        call DisplayTimedTextToPlayer(udg_Observer1,0,0,3,s)
        call DisplayTimedTextToPlayer(udg_Observer2,0,0,3,s)
      endif
      if GetLearnedSkillLevel()==1 then
        if HaveSavedString(SpellsDB,41,id)then
          call ExecuteFunc(LoadStr(SpellsDB,41,id))
        endif
      endif
      if HaveSavedString(SpellsDB,4,id)then
        call ExecuteFunc(LoadStr(SpellsDB,4,id))
      endif
      if id=='A35D'then
        call UnitAddAbility3(GetTriggerUnit(),'A10R',GetLearnedSkillLevel())
      elseif id=='A35E'then
        call UnitAddAbility3(GetTriggerUnit(),'A1YX',GetLearnedSkillLevel())
      elseif id=='A35G'then
        call UnitAddAbility3(GetTriggerUnit(),'A1TA',GetLearnedSkillLevel())
      endif
    endif
  endif
  if HaveSavedString(SpellsDB,42,id)then
    call ExecuteFunc(LoadStr(SpellsDB,42,id))
  endif
  return false
endfunction

function Func0974 takes nothing returns nothing
  if GetTriggerPlayer()==udg_Observer1 then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,25.00,SentinelPlayer+"|c00ff0303 "+GetObjectName('n02D')+"|r")
  else
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,25.00,ScourgePlayer+"|c00ff0303 "+GetObjectName('n02D')+"|r")
  endif
endfunction

function Func0975 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local player p=(LoadPlayerHandle(HY,(h),78))
  local integer i=1
  local integer j
  local integer k=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
  local force f
  if IsSentinel(p)then
    set f=Force_Elfs
  else
    set f=Force_Unds
  endif
  if HeroHasBeenUnlocked[GetPlayerId(p)]==false and Mode_SO then
    if GetTriggerEvalCount(t)==4 then
      call DisplayTimedTextToForceEx(f,6,"If you want to utilize the leaver's hero items/gold, use -unlock.")
      call DisplayTimedTextToForceEx(f,6,"Once you do this you will no longer be able to swap that player slot with the enemy.")
    endif
    return false
  endif
  if k>20 then
    call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,0)
    set ReliableGold[GetPlayerId(p)]=0
    if IsSentinel(p)then
      set j=CountPlayersInForce(Force_Elfs)
    else
      set j=CountPlayersInForce(Force_Unds)
    endif
    if IsSentinel(p)then
      loop
        exitwhen i>5
        if IsPlayer(Sentinels[i])then
          call SetPlayerState(Sentinels[i],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Sentinels[i],PLAYER_STATE_RESOURCE_GOLD)+k/j)
        endif
        set i=i+1
      endloop
    else
      loop
        exitwhen i>5
        if IsPlayer(Scourges[i])then
          call SetPlayerState(Scourges[i],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Scourges[i],PLAYER_STATE_RESOURCE_GOLD)+k/j)
        endif
        set i=i+1
      endloop
    endif
  endif
  set t=null
  return false
endfunction

function Func0976 takes player whichPlayer returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SavePlayerHandle(HY,(ZAE),78,(whichPlayer))
  call TriggerRegisterTimerEvent(RBX,2,true)
  call TriggerAddCondition(RBX,Condition(function Func0975))
  set RBX=null
endfunction

function Func0977 takes player whichPlayer returns nothing
  local multiboarditem MOX=MultiboardGetItem(MainMB,integers119[GetPlayerId(whichPlayer)],integers118[GetPlayerId(whichPlayer)])
  call MultiboardSetItemValue(MOX,"|c00333333"+(PlayerNames[GetPlayerId(whichPlayer)])+"|r")
  call MultiboardReleaseItem(MOX)
endfunction

function Func0978 takes nothing returns nothing
  local integer sents=CountPlayersInForce(Force_Elfs)
  local integer scourges=CountPlayersInForce(Force_Unds)
  local integer i
  local integer k
  local string s3
  local string s
  local player p=GetTriggerPlayer()
  local integer WVE=GetPlayerId(p)
  local unit u=udg_Hero[WVE]
  local string s2
  if u==null then
    set s=GetObjectName('n0EW')
  else
    set s=GetUnitName(u)
  endif
  if(integer073<10)then
    set s3=I2S(integer072)+":0"+I2S(integer073)
  else
    set s3=I2S(integer072)+":"+I2S(integer073)
  endif
  if boolean094==false then
    call SaveBoolean(UTable,WVE,'00GG',true)
    set LeftAt[WVE]="|c00555555"+s3+"|r"
    set s2=udg_Colors[WVE]+(PlayerNames[WVE])+" ("+s+")|r"
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,25.00,s2+"|c00ff0303 "+GetObjectName('n02D')+"|r")
    set i=1
    if(IsSentinel(p))then
      loop
        if(Sentinels[i]!=p and IsPlayer(Sentinels[i]))then
          call SetPlayerAllianceStateBJ(p,Sentinels[i],4)
          call SetPlayerAbilityAvailable(Sentinels[i],'A0HU',true)
          call SetPlayerAbilityAvailable(Sentinels[i],'A0HX',true)
        endif
        set i=i+1
        exitwhen i>5
      endloop
    else
      loop
        if(Scourges[i]!=p and IsPlayer(Scourges[i]))then
          call SetPlayerAllianceStateBJ(p,Scourges[i],4)
          call SetPlayerAbilityAvailable(Scourges[i],'A0HU',true)
          call SetPlayerAbilityAvailable(Scourges[i],'A0HX',true)
        endif
        set i=i+1
        exitwhen i>5
      endloop
    endif
    set integer112=integer112+1
    call Traffic_RegisterData("C"+"K"+I2S(integers031[WVE])+"D"+I2S(integers032[WVE])+"N"+I2S(LoadInteger(HY,400+WVE,79)),WVE)
    set player016=p
    call ExecuteFunc("Func1793")
    if Mode_SO then
      call Func0784(p)
    endif
    set booleans021[WVE]=true
    call Func0977(p)
    call Func0976(p)
    if integer112==2 and Mode_SO then
      call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
      call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
      call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"|c006699CC"+GetObjectName('n0FW')+"|r")
    endif
    if integer112==3 then
      set boolean144=true
      call ExecuteFunc("Func1792")
      set boolean144=false
    endif
    set tt_player1=p
    call ExecuteFunc("Func2000")
  else
    set LeftAt[WVE]="|c00555555End|r"
    call ExecuteFunc("Func1687")
  endif
  set u=null
endfunction

function Func0979 takes unit u returns boolean
  local integer i=0
  local item it
  if GetUnitTypeId(u)=='H00J'then
    return false
  endif
  loop
    set it=UnitItemInSlot(u,i)
    if it!=null then
      if GetItemsIndex_NonMuted(it)==integer263 or GetItemsIndex_NonMuted(it)==integer264 then
        set it=null
        return true
      endif
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set it=null
  return false
endfunction

function Func0980 takes unit MFX,integer id returns nothing
  call UnitMakeAbilityPermanent(MFX,true,'A0BL')
  call UnitMakeAbilityPermanent(MFX,true,'A0BM')
  call UnitMakeAbilityPermanent(MFX,true,'A0BN')
  call UnitMakeAbilityPermanent(MFX,true,'A0BO')
  call UnitAddAbility(MFX,id)
  call UnitRemoveAbility(MFX,id)
  call UnitAddAbility(MFX,'Amrf')
  call UnitRemoveAbility(MFX,'Amrf')
endfunction

function Func0981 takes unit u returns nothing
  local integer id=GetUnitTypeId(u)
  if id=='QTW4' then
    call UnitAddAbility(u,'A33R')
    call UnitRemoveAbility(u,'A33R')
  elseif id=='U007' then
    call Func0980(u,'A35O')
  elseif id=='QWT5' then
    call UnitAddAbility(u,'A33X')
    call UnitRemoveAbility(u,'A33X')
  endif
endfunction

function RemoveEndlessFadetime takes unit u returns nothing
  if GetUnitAbilityLevel(u,'A35X')==1 then
    call UnitRemoveAbility(u,'A35X')
  endif
  if GetUnitAbilityLevel(u,'B09Y')==1 then
    call UnitRemoveAbility(u,'B09Y')
  endif
endfunction

function Func0983 takes unit u returns integer
  local integer i=LoadInteger(HY,GetHandleId(u),'mrph')
  if i=='bear' then
    return'A3JU'
  endif
  return 0
endfunction

function Func0984 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer MLX=Func0983(u)
  call UnitAddAbility(u,MLX)
  call IssueImmediateOrderByIdExFunc(u,852138)
  call UnitRemoveAbility(u,MLX)
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  if LoadInteger(HY,GetHandleId(u),'mrph')=='dusa'then
    call IssueImmediateOrderByIdExFunc(u,852589)
  elseif LoadInteger(HY,GetHandleId(u),'mrph')=='bear'then
    call SetUnitAnimation(u,"stand alternate")
  endif
  call RemoveSavedInteger(HY,GetHandleId(u),'mrph')
  set tt_unit1=u
  call ExecuteFunc("Func3142")
  set t=null
  set u=null
endfunction

function Func0985 takes unit u,boolean MQX returns nothing
  local integer h=GetHandleId(u)
  local integer id=GetUnitTypeId(u)
  local timer t
  local item it
  if MQX then
    call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,1," ")
    call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,1,"|c006699CC"+GetObjectName('n0GR')+"|r")
    call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,1," ")
    call Func0748(sound032,GetOwningPlayer(u))
    call Func0929(GetOwningPlayer(u))
  endif
  if HaveSavedInteger(HY,h,'mrph')then
    set t=CreateTimer()
    call TimerStart(t,0,false,function Func0984)
    call SaveUnitHandle(HY,GetHandleId(t),0,u)
    set t=null
  endif
  if Func0898(u)==false then
    call UnitRemoveAbility(u,'A11X')
    call UnitRemoveAbility(u,'A11V')
    call UnitRemoveAbility(u,'A11W')
  endif
  if integer434>0 and Func0979(u)then
    call Func0909(u,'I0HM')
  endif
  if LoadBoolean(HY,h,'suic')then
    call RemoveSavedBoolean(HY,h,'suic')
    call RemoveSavedBoolean(HY,h,'suit')
  endif
  call Func0981(u)
  set it=FindItemOfType(u,Item_Real[integer292])
  if it!=null then
    call ReplaceItem(u,it,Item_Real[integer293],Func0752(u,it))
    set it=null
  endif
  call Func0231(u)
  call UnitRemoveAbility(u,'A26A')
  call UnitRemoveAbility(u,'A26B')
  call UnitRemoveAbility(u,'A3KC')
  call UnitRemoveAbility(u,'B3KC')
  call UnitRemoveAbility(u,'A35X')
  call UnitRemoveAbility(u,'A3LI')
  call UnitRemoveAbility(u,'A35L')
  call UnitRemoveAbility(u,'A3JG')
  call UnitRemoveAbility(u,'B35L')
  call UnitRemoveAbility(u,'B35K')
  call UnitRemoveAbility(u,'A32S')
  call UnitRemoveAbility(u,'B32S')
  if LoadBoolean(HY,h,344691)then
    call UnitRemoveAbility(u,'A35H')
    call UnitRemoveAbility(u,'B35H')
    call Stat_Sub(u,LoadInteger(HY,h,344691),"+DMG")
    call SaveInteger(HY,h,344691,0)
    call SaveBoolean(HY,h,344691,false)
  endif
  call SetUnitInvulnerable(u,false)
  call Func0862(u)
  call UnitRemoveAbility(u,'A3KR')
  call UnitRemoveAbility(u,'A320')
  call UnitRemoveAbility(u,'A321')
  call UnitRemoveAbility(u,'A3KP')
  call UnitRemoveAbility(u,'A3KQ')
  call UnitRemoveAbility(u,'A37P')
  call UnitRemoveAbility(u,'A37Q')
  call UnitRemoveAbility(u,'A37R')
  call UnitRemoveAbility(u,'A0AZ')
  call UnitRemoveAbility(u,'A09J')
  call UnitRemoveAbility(u,'A2WL')
  call UnitRemoveAbility(u,'A23F')
  call UnitRemoveAbility(u,'A2WK')
  call UnitRemoveAbility(u,'A2WJ')
  call UnitRemoveAbility(u,'A0KT')
  call UnitRemoveAbility(u,'A0OV')
  call UnitRemoveAbility(u,'A0P0')
  call UnitRemoveAbility(u,'A17K')
  call UnitRemoveAbility(u,'A0PV')
  call UnitRemoveAbility(u,'A0QO')
  call UnitRemoveAbility(u,'A0RF')
  call UnitRemoveAbility(u,'A0FY')
  call UnitRemoveAbility(u,'A0I5')
  call UnitRemoveAbility(u,'A0C9')
  call UnitRemoveAbility(u,'A0IH')
  call UnitRemoveAbility(u,'B08L')
  call UnitRemoveAbility(u,'A0SR')
  call UnitRemoveAbility(u,'A0WO')
  call UnitRemoveAbility(u,'A0WR')
  call UnitRemoveAbility(u,'A1CN')
  call UnitRemoveAbility(u,'A0VH')
  call UnitRemoveAbility(u,'A0VW')
  call UnitRemoveAbility(u,'A11O')
  call UnitRemoveAbility(u,'A11R')
  call UnitRemoveAbility(u,'A146')
  call UnitRemoveAbility(u,'A145')
  call UnitRemoveAbility(u,'A11S')
  call UnitRemoveAbility(u,'A144')
  call UnitRemoveAbility(u,'A121')
  call UnitRemoveAbility(u,'A126')
  call UnitRemoveAbility(u,'Aetl')
  call UnitRemoveAbility(u,integers068[0])
  call UnitRemoveAbility(u,integers068[1])
  call UnitRemoveAbility(u,integers068[2])
  call UnitRemoveAbility(u,integers068[3])
  call UnitRemoveAbility(u,integers068[4])
  call UnitRemoveAbility(u,integers068[5])
  call SaveBoolean(HY,(GetHandleId(u)),80,(false))
  call SetUnitPathing(u,true)
  call PauseUnit(u,false)
  call SetUnitFlyHeight(u,GetUnitDefaultFlyHeight(u),0)
  call SetUnitScale(u,Func0531(u)*real048,Func0531(u)*real048,Func0531(u)*real048)
  if id==HeroID[77]then
    call SetUnitScale(u,RMinIF(1.4,1+0.01*LoadInteger(HY,GetHandleId(u),672)),0,0)
  endif
  call UnitRemoveAbility(u,'A1CA')
  call UnitRemoveAbility(u,'A1C9')
  call UnitRemoveAbility(u,'A1CB')
  call UnitRemoveAbility(u,'A1CC')
  call UnitRemoveAbility(u,'A1GA')
  call UnitRemoveAbility(u,'A1UH')
  call UnitRemoveAbility(u,'A1UI')
  call UnitRemoveAbility(u,'A3TA')
  call UnitRemoveAbility(u,'A3TB')
  call UnitRemoveAbility(u,'A3TC')
  call UnitRemoveAbility(u,'A3TD')
  call UnitRemoveAbility(u,'B0E9')
  call SetNegativeArmorSystem(u,0)
  if id=='E02N' or id=='E02O' then
    call UnitAddAbility(u,'A22B')
    call UnitRemoveAbility(u,'A22B')
  endif
  if id=='N0MU' or id=='N0MW' then
    call UnitAddAbility(u,'A2QR')
    call UnitRemoveAbility(u,'A2QR')
  endif
  if id=='H0ER' then
    call UnitAddAbility(u,'A2VV')
    call UnitRemoveAbility(u,'A2VV')
  endif
  call UnitRemoveAbility(u,'A2S5')
  call Func0801(u)
  set tt_unit1=u
  call ExecuteFunc("Func2564")
endfunction

function Func0986 takes nothing returns boolean
  if GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),tt_player1,ALLIANCE_SHARED_CONTROL)and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false then
    set integer113=integer113+1
  endif
  return false
endfunction

function Func0987 takes unit u,player p,real x,real y,boolean MWX returns nothing
  local group g=GetAvailableGroup()
  set integer113=0
  set tt_player1=p
  call GroupEnumUnitsSelected(g,p,Condition(function Func0986))
  if integer113==0 and LocalPlayer==p then
    if MWX==false then
      call ClearSelection()
      call SelectUnit(u,true)
    endif
    call PanCameraToTimed(x,y,0)
  endif
  set integer113=0
  call KillGroup(g)
  set g=null
endfunction

function Func0988 takes unit source returns nothing
  local integer ZAE
  if FindItemOfType(source,Item_Real[integer290])!=null and GetUnitTypeId(source)!='H00J' then
    set ZAE=R2I(GetItemCharges(FindItemOfType(source,Item_Real[integer290]))*0.67)
    if GetItemCharges(FindItemOfType(source,Item_Real[integer290]))==1 then
      set ZAE=0
    endif
    call SetItemCharges(FindItemOfType(source,Item_Real[integer290]),ZAE)
  endif
endfunction

function Func0989 takes unit source returns nothing
  local integer ZAE=GetHandleId(GetOwningPlayer(source))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),699))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),700))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),701))
  local unit M1X=(LoadUnitHandle(HY,(ZAE),702))
  local unit M2X=(LoadUnitHandle(HY,(ZAE),703))
  local unit M3X
  set M3X=RCX
  if M3X!=null then
    call RemoveUnit(M3X)
  endif
  set M3X=M_X
  if M3X!=null then
    call RemoveUnit(M3X)
  endif
  set M3X=M0X
  if M3X!=null then
    call RemoveUnit(M3X)
  endif
  set M3X=M1X
  if M3X!=null then
    call RemoveUnit(M3X)
  endif
  set M3X=M2X
  if M3X!=null then
    call RemoveUnit(M3X)
  endif
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  set M2X=null
  set M3X=null
endfunction

function Func0990 takes nothing returns boolean
  call CleanTrigger(GetTriggeringTrigger())
  set boolean124=false
  return false
endfunction

function Func0991 takes unit u returns nothing
  local integer hu=GetHandleId(GetOwningPlayer(u))
  local unit M6X=(LoadUnitHandle(HY,(hu),699))
  local unit M7X=(LoadUnitHandle(HY,(hu),700))
  local unit M8X=(LoadUnitHandle(HY,(hu),701))
  local unit M9X=(LoadUnitHandle(HY,(hu),702))
  local unit PVX=(LoadUnitHandle(HY,(hu),703))
  local unit u2
  local real x=GetUnitX(M6X)
  local real y=GetUnitY(M6X)
  local trigger t
  if boolean124==false then
    if IsSentinel(GetOwningPlayer(M6X))then
      set x=GetRectCenterX(gg_rct_Hero_Creation_NE)
      set y=GetRectCenterY(gg_rct_Hero_Creation_NE)
    else
      set x=GetRectCenterX(gg_rct_Hero_Creation_UD)
      set y=GetRectCenterY(gg_rct_Hero_Creation_UD)
    endif
  else
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,2,false)
    call TriggerAddCondition(t,Condition(function Func0990))
    set t=null
  endif
  set u2=M6X
  if u2!=null and u!=u2 then
    call ReviveHero(u2,x,y,false)
  endif
  set u2=M7X
  if u2!=null and u!=u2 then
    call ReviveHero(u2,x,y,false)
  endif
  set u2=M8X
  if u2!=null and u!=u2 then
    call ReviveHero(u2,x,y,false)
  endif
  set u2=M9X
  if u2!=null and u!=u2 then
    call ReviveHero(u2,x,y,false)
  endif
  set u2=PVX
  if u2!=null and u!=u2 then
    call ReviveHero(u2,x,y,false)
  endif
  set M6X=null
  set M7X=null
  set M8X=null
  set M9X=null
  set PVX=null
  set u2=null
endfunction

function Func0992 takes unit u,integer d returns nothing
  local integer array r
  local integer d2=d
  local integer i=1
  local integer k=0
  if d<1 then
    call UnitRemoveAbility(u,integers159[0])
    call UnitRemoveAbility(u,integers159[1])
    call UnitRemoveAbility(u,integers159[2])
    call UnitRemoveAbility(u,integers159[3])
    call UnitRemoveAbility(u,integers159[4])
    call UnitRemoveAbility(u,integers159[5])
    call UnitRemoveAbility(u,integers159[6])
    call UnitRemoveAbility(u,integers159[7])
    call UnitRemoveAbility(u,integers159[8])
    call UnitRemoveAbility(u,integers159[9])
    call UnitRemoveAbility(u,integers159[10])
    return
  endif
  loop
    exitwhen i==0
    set i=d2/2
    set r[k]=d2-i*2
    set d2=i
    set k=k+1
  endloop
  set k=0
  loop
    exitwhen k>10
    if r[k]==1 then
      call UnitAddAbility2(u,integers159[k])
    else
      call UnitRemoveAbility(u,integers159[k])
    endif
    set k=k+1
  endloop
endfunction

function Func0993 takes unit u returns nothing
  local unit nu=CreateUnit(GetOwningPlayer(u),GetUnitTypeId(u),GetUnitX(u),GetUnitY(u),0)
  local integer k
  local integer i=0
  local item it
  set udg_Hero[GetPlayerId(GetOwningPlayer(u))]=nu
  call AddHeroXP(nu,GetHeroXP(u),false)
  call SelectUnitAddForPlayer(nu,GetOwningPlayer(u))
  loop
    set it=UnitItemInSlot(u,i)
    set k=GetItemTypeId(it)
    if it!=null then
      set k=GetIndex(it)
      if IsBottleWithRune(k)then
        set k=Item_Real[integer170]
      endif
      set k=GetItemTypeId(it)
      set it=CreateItem(k,0,0)
      if GetItemCharges(UnitItemInSlot(u,i))>0 then
        call SetItemCharges(it,GetItemCharges(UnitItemInSlot(u,i)))
      endif
      call UnitAddItem(nu,it)
      call SetItemPlayer(it,GetOwningPlayer(nu),false)
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set i=1
  loop
    exitwhen i>GetUnitAbilityLevel(u,'A0NR')
    call SelectHeroSkill(nu,'A0NR')
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>GetUnitAbilityLevel(u,'A1NI')
    call SelectHeroSkill(nu,'A1NI')
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>GetUnitAbilityLevel(u,'A0IL')
    call SelectHeroSkill(nu,'A0IL')
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>GetUnitAbilityLevel(u,'A0O3')
    call SelectHeroSkill(nu,'A0O3')
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>GetUnitAbilityLevel(u,'ANcr')
    call SelectHeroSkill(nu,'ANcr')
    set i=i+1
  endloop
  if GetUnitAbilityLevel(u,'A398')>0 then
    call UnitAddAbility2(nu,'A398')
    call UnitAddAbility2(nu,'A3OC')
  endif
  if LoadInteger(HY,GetHandleId(u),739)>0 then
    call Func0992(nu,LoadInteger(HY,GetHandleId(u),739))
    call SaveInteger(HY,GetHandleId(nu),739,LoadInteger(HY,GetHandleId(u),739))
  endif
  call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,20," ")
  call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,20,GetObjectName('TX22'))
  call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,20," ")
  call GroupRemoveUnit(group007,u)
  call DisableTrigger(trigger014)
  call ShowUnit(u,false)
  call KillUnit(u)
  call EnableTrigger(trigger014)
  call Func0477(u,10)
  set nu=null
  set it=null
endfunction

function Func0994 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  call IssueImmediateOrderByIdExFunc(u,851972)
  if GetUnitCurrentOrder(u)!=0 then
    call Func0993(u)
  else
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set u=null
endfunction

function Func0995 takes unit u returns nothing
  if UnStunUnit(u)then
    call Func0993(u)
  endif
endfunction

function HeroRespawn takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local player p=GetOwningPlayer(u)
  local integer pid=GetPlayerId(p)
  local real x
  local real y
  local integer i
  local real r
  local boolean PIX=GetUnitTypeId(u)=='H00J'
  local real WNE=TimerGetElapsed(GlobalTimer)
  if IsSentinel(p)then
    set x=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set y=GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    set x=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set y=GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
  set r=TimerGetRemaining(HeroRespawnTimer[pid])
  if PIX==false then
    set booleans020[pid]=false
    set booleans014[pid]=false
  endif
  if boolean119 then
    if PIX==false then
      if R2I(r*0.25)>0 then
        set integers082[pid]=integers082[pid]+R2I(r*0.25)
      endif
    endif
    if r+(WNE)>reals007[pid]or(PIX and LoadReal(HeroStats,GetHandleId(p),25)>WNE)then
      if PIX==false then
        call SaveReal(HeroStats,GetHandleId(p),25,TimerGetElapsed(GlobalTimer)+r)
        call UnitAddAbilityTimedExF(u,'A36C',1,r,'B36C')
      else
        call UnitAddAbilityTimedExF(u,'A36C',1,LoadReal(HeroStats,GetHandleId(p),25)-WNE,'B36C')
      endif
    endif
  elseif PIX==false then
    set integers082[pid]=0
  endif
  if PIX==false and boolean054 then
    if r>2 then
      call Traffic_RegisterData("HeroResp_"+I2S(pid),1)
    else
      call Traffic_RegisterData("HeroResp_"+I2S(pid),0)
    endif
  endif
  call FixVisionGlitchOnBuyBack(u)
  if PIX==false then
    call TimerStart(HeroRespawnTimer[pid],0.0,false,null)
    if IsMeepo(u)then
      call Func0991(u)
    else
      call Func0987(u,p,x,y,false)
    endif
  endif
  call SetUnitX(u,x)
  call SetUnitY(u,y)
  call Func0985(u,PIX==false)
  if PIX==false and FindItemOfType(u,Item_Real[integer290])!=null then
    set i=R2I(GetItemCharges(FindItemOfType(u,Item_Real[integer290]))*1.0*0.67)
    if GetItemCharges(FindItemOfType(u,Item_Real[integer290]))==1 then
      set i=0
    endif
    call SetItemCharges(FindItemOfType(u,Item_Real[integer290]),i)
  endif
  call SetUnitState(u,UNIT_STATE_MANA,9999999)
  call Func0995(u)
  set tt_unit1=u
  call ExecuteFunc("Func3142")
  set u=null
endfunction

function InitHeroAndSkillsRelated takes unit u returns nothing
  local integer i=GetUnitPointValue(u)
  local unit RCX
  if(i==34)then
    call ExecuteFunc("AM_Preload")
  elseif(i==37)then
    call ExecuteFunc("Func2416")
  elseif(i==38)then
    call ExecuteFunc("Func2667")
  elseif(i==32)then
    call ExecuteFunc("Func2421")
  elseif(i==52)then
    call ExecuteFunc("Func2454")
  elseif(i==31)then
    call ExecuteFunc("Func2471")
  elseif(i==24)then
    call ExecuteFunc("Func2482")
  elseif(i==5)then
    call ExecuteFunc("Func2526")
  elseif(i==8)then
    call ExecuteFunc("Func2569")
  elseif(i==3)then
    call ExecuteFunc("Func2581")
  elseif(i==95)then
    call ExecuteFunc("Func2608")
  elseif(i==20)then
    call ExecuteFunc("Func2628")
  elseif(i==12)then
    call ExecuteFunc("Func2677")
  elseif(i==16)then
    call ExecuteFunc("Func2709")
  elseif(i==25)then
    call ExecuteFunc("Func2733")
    set boolean036=true
  elseif(i==4)then
    call ExecuteFunc("Func2797")
    call ExecuteFunc("Func2787")
    call SetUnitPathing(u,false)
    call DisableTrigger(t_manipulateitem)
    set boolean143=true
    set RCX=CreateUnit(GetOwningPlayer(u),GetUnitTypeId(u),GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
    call SaveBoolean(HY,(GetHandleId(RCX)),85,(true))
    set udg_Hero[GetPlayerId(GetOwningPlayer(u))]=RCX
    call SetUnitPathing(RCX,false)
    call SetUnitPosition(RCX,GetUnitX(u),GetUnitY(u))
    if Mode_DM then
      call SetHeroXP(RCX,GetHeroXP(u),false)
      call UnitAddItem(RCX,UnitItemInSlot(u,0))
      call UnitAddItem(RCX,UnitItemInSlot(u,1))
      call UnitAddItem(RCX,UnitItemInSlot(u,2))
      call UnitAddItem(RCX,UnitItemInSlot(u,3))
      call UnitAddItem(RCX,UnitItemInSlot(u,4))
      call UnitAddItem(RCX,UnitItemInSlot(u,5))
    endif
    call Func0669(u)
    call EnableTrigger(t_manipulateitem)
    call SetUnitPathing(RCX,true)
    call ClearSelectionForPlayer(GetOwningPlayer(RCX))
    call SelectUnitAddForPlayer(RCX,GetOwningPlayer(RCX))
    set RCX=null
  elseif(i==7)then
    call ExecuteFunc("Func2816")
  elseif(i==18)then
    call ExecuteFunc("Func2835")
    call ExecuteFunc("Func2843")
  elseif(i==36)then
    call ExecuteFunc("Func2852")
  elseif(i==21)then
    call ExecuteFunc("Func2880")
  elseif(i==14)then
    call ExecuteFunc("Func2896")
  elseif(i==13)then
    call ExecuteFunc("Func2918")
  elseif(i==26)then
    call ExecuteFunc("Func2937")
  elseif(i==9)then
    call ExecuteFunc("Func2949")
  elseif(i==10)then
    call ExecuteFunc("Func3012")
  elseif(i==23)then
    call ExecuteFunc("Func3069")
  elseif(i==19)then
    call ExecuteFunc("Func3072")
  elseif(i==22)then
    call ExecuteFunc("Func3099")
  elseif(i==17)then
    call ExecuteFunc("Func3133")
  elseif(i==1)then
    call ExecuteFunc("Func3141")
  elseif(i==2)then
    call ExecuteFunc("Func3212")
  elseif(i==27)then
    call ExecuteFunc("Func3110")
  elseif(i==82)then
    call ExecuteFunc("Func3251")
  elseif(i==75)then
    call ExecuteFunc("Func3260")
  elseif(i==83)then
    call ExecuteFunc("Func3308")
  elseif(i==112)then
    call ExecuteFunc("Func3327")
  elseif(i==108)then
    call ExecuteFunc("Func3341")
  elseif(i==69)then
    call ExecuteFunc("Func3429")
  elseif(i==100)then
    call ExecuteFunc("Func3579")
  elseif(i==102)then
    call ExecuteFunc("Func3594")
  elseif(i==64)then
    call ExecuteFunc("Func3645")
  elseif(i==106)then
    call ExecuteFunc("Func3656")
  elseif(i==61)then
    call ExecuteFunc("Func3676")
  elseif(i==76)then
    call ExecuteFunc("Func3705")
  elseif(i==80)then
    call ExecuteFunc("Func3740")
  elseif(i==62)then
    call ExecuteFunc("Func3754")
  elseif(i==60)then
    call ExecuteFunc("Func3764")
  elseif(i==77)then
    call ExecuteFunc("Func3805")
  elseif(i==73)then
    call ExecuteFunc("Func3821")
  elseif(i==81)then
    call ExecuteFunc("Func3860")
  elseif(i==66)then
    call ExecuteFunc("Func3877")
  elseif(i==78)then
    call ExecuteFunc("Func3916")
  elseif(i==99)then
    call ExecuteFunc("Func3956")
  elseif(i==74)then
    call ExecuteFunc("Func3973")
  elseif(i==105)then
    call ExecuteFunc("Func4012")
  elseif(i==70)then
    call ExecuteFunc("Func4023")
  elseif(i==107)then
    call ExecuteFunc("Func4030")
  elseif(i==79)then
    call ExecuteFunc("Func4092")
  elseif(i==68)then
    call ExecuteFunc("Func3355")
  elseif(i==84)then
    call ExecuteFunc("Func3223")
  elseif(i==85)then
    call ExecuteFunc("Func3907")
  elseif(i==86)then
    call ExecuteFunc("Func4117")
  elseif(i==87)then
    call ExecuteFunc("Func3365")
  elseif(i==33)then
    call ExecuteFunc("Func2559")
  elseif(i==39)then
    call ExecuteFunc("Func2391")
  elseif(i==88)then
    call ExecuteFunc("Func4077")
  elseif(i==40)then
    call ExecuteFunc("Func2756")
  elseif i==89 then
    call ExecuteFunc("Func3542")
  elseif i==90 then
    call ExecuteFunc("Func3984")
  elseif i==71 then
    call ExecuteFunc("Func3840")
  elseif i==93 then
    call ExecuteFunc("Func3383")
  elseif i==42 then
    call ExecuteFunc("Func2647")
  elseif i==91 then
    call ExecuteFunc("Func3773")
  elseif i==92 then
    call ExecuteFunc("Func3419")
  elseif i==41 then
    call ExecuteFunc("Func4361")
  elseif i==43 then
    call ExecuteFunc("Func3165")
  elseif i==44 then
    call ExecuteFunc("Func2620")
  elseif i==72 then
    call ExecuteFunc("Func3680")
  elseif i==94 then
    call ExecuteFunc("Func3515")
  elseif i==6 then
    call ExecuteFunc("Func2965")
  elseif i==104 then
    call ExecuteFunc("Func3601")
  elseif i==65 then
    call ExecuteFunc("Func3726")
  elseif i==111 then
    call ExecuteFunc("Func3618")
  elseif i==63 then
    call ExecuteFunc("Func3522")
  elseif i==45 then
  elseif i==46 then
    call ExecuteFunc("Func2356")
  elseif i==47 then
    call ExecuteFunc("Func3203")
  elseif i==11 then
    call ExecuteFunc("Func2725")
  elseif i==96 then
    call ExecuteFunc("Bat_Napalm_Preload")
  elseif i==15 then
    call ExecuteFunc("Func3023")
  elseif i==97 then
    call ExecuteFunc("Func4121")
  elseif i==98 then
    call AddWrapper("Func4620",3)
  elseif i==67 then
    call ExecuteFunc("Func4161")
  elseif i==28 then
    call ExecuteFunc("Func4165")
  elseif i==51 then
    call ExecuteFunc("Func4179")
  elseif i==100 then
  elseif i==101 then
    call ExecuteFunc("Func4204")
  elseif i==48 then
    call ExecuteFunc("Func4233")
  elseif i==49 then
    call ExecuteFunc("Func4243")
  elseif i==29 then
    call ExecuteFunc("Func4276")
  elseif i==50 then
    call ExecuteFunc("Func4306")
  elseif i==30 then
    call ExecuteFunc("Func4312")
  elseif i==53 then
    call ExecuteFunc("Func4351")
  elseif i==103 then
  elseif i==54 then
    call ExecuteFunc("Func4396")
  elseif i==55 then
    call ExecuteFunc("Func4407")
  elseif i==56 then
    call ExecuteFunc("Func4425")
  elseif i==57 then
    call ExecuteFunc("Func4452")
  elseif i==109 then
    call ExecuteFunc("Func4475")
  elseif i==110 then
    call ExecuteFunc("Func4508")
  elseif i==35 then
    call ExecuteFunc("Func4521")
  elseif i==58 then
    call ExecuteFunc("Func4591")
  elseif i==59 then
    call ExecuteFunc("Func4492")
  endif
endfunction

function Func0998 takes player whichPlayer,string ZJE returns nothing
  if IsPlayerInForce(LocalPlayer,GetForceOfEnemies(whichPlayer))then
    call DisplayTimedTextToPlayer(LocalPlayer,0,0,40,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+ZJE)
  endif
endfunction

function Func0999 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  set boolean116=true
  call CleanTrigger(RBX)
  call DestroyFogModifier(CreateFogModifierRadius(Sentinels[0],FOG_OF_WAR_FOGGED,real033,real034,700,false,false))
  call DestroyFogModifier(CreateFogModifierRadius(Scourges[0],FOG_OF_WAR_FOGGED,real033,real034,700,false,false))
  set RBX=null
  return false
endfunction

function Func1000 takes nothing returns boolean
  return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and LoadBoolean(HY,GetHandleId(GetTriggerUnit()),'HBRD')==false and HaveSavedBoolean(HY,GetHandleId(GetTriggerUnit()),85)==false and IsNotHeroID(GetTriggerUnit())==false
endfunction

function Func1001 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='n00C'
endfunction

function Func1002 takes nothing returns nothing
  call RemoveUnit(GetEnumUnit())
endfunction

function Func1003 takes player whichPlayer returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,whichPlayer,Condition(function Func1001))
  call ForGroup(g,function Func1002)
  call KillGroup(g)
endfunction

function Func1004 takes nothing returns nothing
  call Func1003(Sentinels[1])
  call Func1003(Sentinels[2])
  call Func1003(Sentinels[3])
  call Func1003(Sentinels[4])
  call Func1003(Sentinels[5])
  call Func1003(Scourges[1])
  call Func1003(Scourges[2])
  call Func1003(Scourges[3])
  call Func1003(Scourges[4])
  call Func1003(Scourges[5])
endfunction

function Func1005 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='ncop'
endfunction

function Func1006 takes nothing returns nothing
  if boolean157 then
    call UnitRemoveAbility(CirclesOfPower[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],'A14E')
  endif
  if GetUnitAbilityLevel(GetEnumUnit(),'A0I4')==0 then
    call UnitAddAbility(GetEnumUnit(),'A0I4')
    call UnitAddAbility(GetEnumUnit(),'A3JJ')
  endif
endfunction

function Func1007 takes player whichPlayer returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,whichPlayer,Condition(function Func1005))
  call ForGroup(g,function Func1006)
  call KillGroup(g)
  set g=null
endfunction

function Func1008 takes unit source,player whichPlayer returns string
  local string ZJE=GetObjectName('n0DB')
  set ZJE=str_replace(ZJE,"$hero",GetUnitName(source))
  set ZJE=str_replace(ZJE,"$p",(PlayerNames[GetPlayerId(whichPlayer)]))
  return ZJE
endfunction

function Func1009 takes player p returns nothing
  local integer WVE=GetPlayerId(p)
  if LoadInteger(UTable,PlayerId,'name')==1 then
    call SetPlayerName(p,I2S(WVE))
    set PlayerNames[WVE]=I2S(WVE)
  elseif LoadInteger(UTable,PlayerId,'name')==2 then
    call SetPlayerName(p,Func0516(udg_Hero[WVE]))
    set PlayerNames[WVE]=Func0516(udg_Hero[WVE])
  else
    if booleans029[PlayerId]then
      call SetPlayerName(p,PlayerNames[WVE])
    else
      call SetPlayerName(p,PlayerNames[WVE]+" ("+Func0516(udg_Hero[WVE])+")")
    endif
  endif
endfunction

function Func1010 takes player p returns nothing
  if LocalPlayer==p then
    call Func1009(Sentinels[1])
    call Func1009(Sentinels[2])
    call Func1009(Sentinels[3])
    call Func1009(Sentinels[4])
    call Func1009(Sentinels[5])
    call Func1009(Scourges[1])
    call Func1009(Scourges[2])
    call Func1009(Scourges[3])
    call Func1009(Scourges[4])
    call Func1009(Scourges[5])
  endif
endfunction

function Func1011 takes unit u returns nothing
  call UnitAddAbility2(u,'A3E7')
  call Func0873(u)
  call SetHeroStr(u,GetHeroStr(u,false)+10,true)
  call SetHeroInt(u,GetHeroInt(u,false)+10,true)
  call SetHeroAgi(u,GetHeroAgi(u,false)+10,true)
  call UnitAddAbility2(u,'A3I2')
  call UnitAddAbility2(u,'A3I3')
endfunction

function Func1012 takes unit HDE,unit TWX returns nothing
  if GetUnitAbilityLevel(HDE,'A3E7')>0 then
    call Func1011(TWX)
  endif
  if GetUnitAbilityLevel(HDE,'A398')>0 then
    call UnitAddAbility2(TWX,'A398')
    call UnitAddAbility2(TWX,'A3OC')
  endif
endfunction

function Func1013 takes unit u returns nothing
  call DisplayTimedTextToForceEx(AllPlayers,10.,str_replace(GetObjectName('TX2O'),"%h",GetUnitName(u)))
  if group001==null then
    set group001=CreateGroup()
  endif
  call GroupAddUnit(group001,u)
  call ShowUnit(u,false)
  call SetUnitOwner(u,Player(15),false)
  set b_isHeroPicked[GetUnitPointValue(u)]=true
  call TechHeroForAll(GetUnitTypeId(u))
endfunction

function Func1014 takes nothing returns nothing
  local integer i=CountUnitsInGroup(group001)
  local integer k
  local unit u2
  if i>0 then
    set k=i/2+GetRandomInt(0,ModuloInteger(i,2))
    loop
      set u2=GroupPickRandomUnit(group001)
      exitwhen u2==null or k==0
      call GroupRemoveUnit(group001,u2)
      call TechHeroForAll(GetUnitTypeId(u2))
      call DisplayTimedTextToForceEx(AllPlayers,10.,str_replace(GetObjectName('TX2P'),"%h",GetUnitName(u2)))
      set k=k-1
      call RemoveUnit(u2)
    endloop
    loop
      set u2=FirstOfGroup(group001)
      exitwhen u2==null
      call GroupRemoveUnit(group001,u2)
      set b_isHeroPicked[GetUnitPointValue(u2)]=false
      set i=GetUnitTypeId(u2)
      call SetPlayerTechMaxAllowed(GetOwningPlayer(u2),i,-1)
      call RemoveUnit(u2)
      call Func0548(i)
    endloop
    set i=1
    loop
      if LoadInteger(HY,GetHandleId(Sentinels[i]),'lgld')>0 then
        call SetPlayerState(Sentinels[i],PLAYER_STATE_RESOURCE_GOLD,LoadInteger(HY,GetHandleId(Sentinels[i]),'lgld'))
      endif
      if LoadInteger(HY,GetHandleId(Scourges[i]),'lgld')>0 then
        call SetPlayerState(Scourges[i],PLAYER_STATE_RESOURCE_GOLD,LoadInteger(HY,GetHandleId(Scourges[i]),'lgld'))
      endif
      set i=i+1
      exitwhen i>5
    endloop
  endif
  call GroupClear(group001)
  call DestroyGroup(group001)
  call DisplayTimedTextToForceEx(AllPlayers,10.,GetObjectName('TX2S'))
endfunction

function Func1015 takes unit u returns nothing
  local integer a=GetHandleId(u)
  if a>0 then
    set a=ConvertHandle(u)
    if a>0 then
      call WriteRealMemory(a+0x200,1)
    endif
  endif
endfunction

function Func1016 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer id=GetUnitTypeId(u)
  local player p=GetOwningPlayer(u)
  local integer WVE=GetPlayerId(p)
  local real x
  local real y
  local region T1X
  local player p2=p
  local unit u2=u
  local trigger t
  local unit d
  if boolean007 then
    call SaveInteger(HY,GetHandleId(p),'lgld',GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+250)
    call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func1013(u)
    set u=null
    set u2=null
    return
  endif
  set T1X=CreateRegion()
  if Mode_DM==false then
    call Func0929(GetOwningPlayer(u))
  endif
  if boolean116==false and(udg_Hero[GetPlayerId(Sentinels[1])]!=null and udg_Hero[GetPlayerId(Sentinels[2])]!=null and udg_Hero[GetPlayerId(Sentinels[3])]!=null and udg_Hero[GetPlayerId(Sentinels[4])]!=null and udg_Hero[GetPlayerId(Sentinels[5])]!=null and udg_Hero[GetPlayerId(Scourges[1])]!=null and udg_Hero[GetPlayerId(Scourges[2])]!=null and udg_Hero[GetPlayerId(Scourges[3])]!=null and udg_Hero[GetPlayerId(Scourges[4])]!=null and udg_Hero[GetPlayerId(Scourges[5])]!=null)then
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,7,false)
    call TriggerAddCondition(t,Condition(function Func0999))
    set t=null
  endif
  set booleans014[WVE]=false
  call RegionAddRect(T1X,rect062)
  if boolean097 and boolean098==false then
    set booleans011[GetPlayerId(p)]=true
    set p=(LoadPlayerHandle(HY,2000,(550+GetPlayerId(p))))
    call SetUnitOwner(u,p,true)
    set WVE=GetPlayerId(p)
  endif
  if IsSentinel(GetOwningPlayer(u))then
    if IsUnitInRegion(T1X,u)then
      set x=GetRandomReal(GetRectMinX(gg_rct_Hero_Creation_NE),GetRectMaxX(gg_rct_Hero_Creation_NE))
      set y=GetRandomReal(GetRectMinY(gg_rct_Hero_Creation_NE),GetRectMaxY(gg_rct_Hero_Creation_NE))
    else
      set x=GetUnitX(u)
      set y=GetUnitY(u)
    endif
  else
    if IsUnitInRegion(T1X,u)then
      set x=GetRandomReal(GetRectMinX(gg_rct_Hero_Creation_UD),GetRectMaxX(gg_rct_Hero_Creation_UD))
      set y=GetRandomReal(GetRectMinY(gg_rct_Hero_Creation_UD),GetRectMaxY(gg_rct_Hero_Creation_UD))
    else
      set x=GetUnitX(u)
      set y=GetUnitY(u)
    endif
  endif
  call RemoveRegion(T1X)
  set d=null
  set booleans010[WVE]=true
  if(not boolean097 or boolean098)then
    if boolean154==false and boolean114==false then
      call PanCameraToTimedForPlayer(p,x,y,0)
    endif
    if id!='N0MM' and id!='H0DL' then
      call ClearSelectionForPlayer(p)
    endif
    call SelectUnitAddForPlayer(u,p)
  endif
  call SetUnitPosition(u,x,y)
  if id!='N0MM' and id!='H0DL' then
    set udg_Hero[WVE]=u
  endif
  call Func0914(p,"9",id)
  set integers026[WVE]=id
  if boolean097 and boolean098==false then
    call TechAll_ForPlayer(p2)
  else
    call TechAll_ForPlayer(p)
  endif
  call SaveBoolean(HY,(GetHandleId(u)),85,(true))
  if not boolean087 then
    set b_isHeroPicked[GetUnitPointValue(u)]=true
    call TechHeroForAll(id)
  endif
  if Mode_DM then
    if IsSentinel(p)then
      set integers053[0]=integers053[0]+1
    else
      set integers053[1]=integers053[1]+1
    endif
    set integers054[WVE]=integers054[WVE]+1
    if integers054[WVE]>1 and u!=units004[WVE]then
      call Func0988(units004[WVE])
      call DisableTrigger(t_manipulateitem)
      call SetHeroXP(u,GetHeroXP(units004[WVE]),false)
      call UnitAddItem(u,UnitItemInSlot(units004[WVE],0))
      call UnitAddItem(u,UnitItemInSlot(units004[WVE],1))
      call UnitAddItem(u,UnitItemInSlot(units004[WVE],2))
      call UnitAddItem(u,UnitItemInSlot(units004[WVE],3))
      call UnitAddItem(u,UnitItemInSlot(units004[WVE],4))
      call UnitAddItem(u,UnitItemInSlot(units004[WVE],5))
      call Func1012(units004[WVE],u)
      if boolean065 then
        call SaveReal(HeroStats,GetHandleId(GetOwningPlayer(u)),'ARDM',TimerGetElapsed(GlobalTimer))
      endif
      call EnableTrigger(t_manipulateitem)
      if IsMeepo(units004[WVE])then
        call Func0989(units004[WVE])
      else
        call Func0669(units004[WVE])
      endif
    endif
  endif
  if p!=Sentinels[0]and p!=Scourges[0]then
    if boolean097 then
      if TimerGetElapsed(GlobalTimer)>60 then
        call Func0998(p,GetObjectName('n02E')+" "+GetUnitName(u))
      elseif HasUsedRandom[GetPlayerId(p2)]then
        call Func0998(p,Func1008(u,p2))
      else
        call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)+250)
        call Func0998(p,GetObjectName('n0D1')+" "+GetUnitName(u)+" "+GetObjectName('n0D0')+" "+(PlayerNames[GetPlayerId(p2)]))
      endif
    elseif boolean091==false or p==PlayerModeTyper then
      if(booleans007[WVE]and boolean091==false)then
        call Func0998(p,GetObjectName('n0D5')+" "+GetUnitName(u)+".")
      elseif((HasUsedRandom[WVE]and Mode_DM==false)or boolean065 or boolean066 or boolean093)then
        call Func0998(p,GetObjectName('n0D3')+" "+GetUnitName(u)+".")
      else
        call Func0998(p,GetObjectName('n0D2')+" "+GetUnitName(u)+".")
      endif
    endif
  endif
  if NoHeroLimitOff then
    if boolean097 then
      call Func1003(p2)
    else
      call Func1003(p)
    endif
  endif
  if(boolean154 or boolean114)and NoHeroLimitOff then
    call Func1003(p)
  endif
  call Func1007(p)
  if id=='O00J' or id=='N016' or id=='UC91' or id=='EC45' then
    call DisplayTimedTextToPlayer(p,0,0,10.00," ")
    call DisplayTimedTextToPlayer(p,0,0,10.00,"|c00ff0303"+GetObjectName('n0G3')+"|r")
  endif
  if(GetUnitPointValue(u)==26)then
    set tt_unit1=u
    call ExecuteFunc("Func2940")
  elseif(GetUnitPointValue(u)==112)then
    set tt_unit1=u
    call ExecuteFunc("Func3320")
    call Func1015(u)
  elseif GetUnitPointValue(u)==85 then
    call Func1015(u)
  elseif GetUnitPointValue(u)==101 then
    set tt_unit1=u
    call ExecuteFunc("Func4215")
  elseif GetUnitPointValue(u)==58 then
    set tt_unit1=u
    set integers161[0]='A330'
    set integers161[1]='A331'
    set integers161[2]='A332'
    set integers161[3]='A333'
    set integers161[4]='A334'
    set integers161[5]='A335'
    set integers161[6]='A336'
    call ExecuteFunc("Func4558")
  elseif GetUnitPointValue(u)==99 then
    set tt_unit1=u
    call ExecuteFunc("Func3957")
  elseif GetUnitPointValue(u)==61 then
    call UnitRemoveAbility(u,'A2WN')
  endif
  if HaveSavedBoolean(HY,600+GetUnitPointValue(u),87)==false then
    call SaveBoolean(HY,(600+GetUnitPointValue(u)),87,(true))
    call InitHeroAndSkillsRelated(u)
  endif
  call Func1009(p)
  set tt_unit1=u
  call ExecuteFunc("Func3506")
  set T1X=null
  set u=null
  set u2=null
endfunction

function Func1017 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit T9X=LoadUnitHandle(HY,h,0)
  local unit d=LoadUnitHandle(HY,GetHandleId(T9X),'VisD')
  if IsDead(T9X)or IsUnitHidden(T9X)then
    call SetUnitX(d,GetUnitX(CirclesOfPower[GetPlayerId(GetOwningPlayer(T9X))]))
    call SetUnitY(d,GetUnitY(CirclesOfPower[GetPlayerId(GetOwningPlayer(T9X))]))
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitTypeId(T9X)==0 then
    call ShowUnit(d,false)
    call KillUnit(d)
    call DestroyTrigger(t)
  else
    call SetUnitX(d,GetUnitX(T9X))
    call SetUnitY(d,GetUnitY(T9X))
    if GetOwningPlayer(T9X)!=GetOwningPlayer(d)then
      call SetUnitOwner(d,GetOwningPlayer(T9X),false)
    endif
  endif
  set T9X=null
  set d=null
  set t=null
endfunction

function Func1018 takes nothing returns nothing
  local unit d
  local trigger t
  if HaveSavedHandle(HY,GetHandleId(tt_unit1),'VisD')==false then
    set t=CreateTrigger()
    set d=CreateUnit(GetOwningPlayer(tt_unit1),'o01P',GetUnitX(tt_unit1),GetUnitY(tt_unit1),0)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerAddCondition(t,Condition(function Func1017))
    if IsUnitIllusion(tt_unit1)then
      call TriggerRegisterDeathEvent(t,tt_unit1)
    endif
    call SaveUnitHandle(HY,GetHandleId(tt_unit1),'VisD',d)
    call SaveUnitHandle(HY,GetHandleId(t),0,tt_unit1)
    call SetUnitPathing(d,false)
    call UnitAddAbility(d,'Aloc')
    set t=null
    set d=null
  endif
endfunction

function Func1019 takes nothing returns boolean
  return IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)and boolean007==false
endfunction

function Func1020 takes nothing returns nothing
  call TechAll_ForPlayer(GetOwningPlayer(GetSoldUnit()))
endfunction

function Func1021 takes nothing returns boolean
  local integer g=1
  local integer WVE
  local integer i=1
  local real WNE=TimerGetElapsed(GlobalTimer)
  if boolean069 then
    set g=2
  endif
  loop
    call SetPlayerState(Sentinels[i],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Sentinels[i],PLAYER_STATE_RESOURCE_GOLD)+g)
    set i=i+1
    exitwhen i==6
  endloop
  set i=1
  loop
    call SetPlayerState(Scourges[i],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Scourges[i],PLAYER_STATE_RESOURCE_GOLD)+g)
    set i=i+1
    exitwhen i==6
  endloop
  return false
endfunction

function Func1022 takes nothing returns nothing
  local integer ZAE=R2I(TimerGetElapsed(GlobalTimer)-GameStartsTime)
  local integer URX=ZAE/60-0
  local integer UIX=ModuloInteger(ZAE,60)
  if AFK_Check then
    call Func0797(URX,UIX,false)
  elseif boolean104==false then
    set ZAE=R2I(16-TimerGetElapsed(GlobalTimer))
    set URX=ZAE/60-0
    set UIX=ModuloInteger(ZAE,60)
    call Func0797(URX,UIX,true)
  endif
  set integer072=URX
  set integer073=UIX
endfunction

function Func1023 takes nothing returns boolean
  local integer NFX=GetUnitTypeId(GetTriggerUnit())
  local integer id=GetSpellAbilityId()
  if id=='A03G' then
    if NFX=='H00F' or NFX=='H00E' or NFX=='H00E' then
      return true
    endif
  elseif id=='ANcr' then
    if NFX=='N01H' or NFX=='N01T' or NFX=='N01J' then
      return true
    endif
  elseif id=='A093' then
    if NFX=='E015' then
      return true
    endif
  elseif id=='A15J' then
    if NFX=='H07I' then
      return true
    endif
  elseif id=='A11T' then
    if NFX!='Hblm' then
      return true
    endif
  endif
  return false
endfunction

function Func1024 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real FXE=0
  local real L6X
  local integer id=GetSpellAbilityId()
  set u=null
endfunction

function Func1025 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer i=0
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func1024))
  loop
    set UltimateCDTimers[i]=CreateTimer()
    set units002[i]=CreateUnit(Player(i),'e00E',0,0,0)
    set i=i+1
    exitwhen i>13
  endloop
  set t=null
endfunction

function Func1026 takes nothing returns nothing
endfunction

function IsItemWardId takes integer id returns boolean
  return id==integer198 or id==integer199 or id==MixedWardsSentry or id==MixedWardsOrbs
endfunction

function Func1028 takes nothing returns boolean
  local player p
  local integer i
  local integer WVE
  local integer g
  set i=1
  loop
    exitwhen i>5
    set p=Sentinels[i]
    set WVE=GetPlayerId(p)
    set g=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
    if g<ReliableGold[WVE]then
      set ReliableGold[WVE]=g
    endif
    set p=Scourges[i]
    set WVE=GetPlayerId(p)
    set g=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
    if g<ReliableGold[WVE]then
      set ReliableGold[WVE]=g
    endif
    set i=i+1
  endloop
  return false
endfunction

function Func1029 takes integer ZAE,integer QIE returns boolean
  local integer ZBE=integer114-1
  local real result=0
  local real ZEE=(TimerGetElapsed(GlobalTimer))
  local integer ZCE=0
  loop
    exitwhen ZBE==integer114 or result>real030 or ZCE>200
    if ZBE==0 then
      set ZBE=7999
    endif
    set ZCE=ZCE+1
    set result=ZEE-reals010[ZBE]
    if integers094[ZBE]==ZAE and integers095[ZBE]==QIE and result<real030 then
      return true
    endif
    set ZBE=ZBE-1
  endloop
  return false
endfunction

function Func1030 takes nothing returns nothing
  local integer UHX=GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
  local integer UJX=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
  set reals010[integer114]=(TimerGetElapsed(GlobalTimer))
  set integers094[integer114]=UHX
  set integers095[integer114]=UJX
  set integer114=integer114+1
  if integer114==8000 then
    set integer114=1
  endif
endfunction

function Func1031 takes player p,player t returns nothing
  call SaveReal(MHT,GetHandleId(p),GetPlayerId(t),TimerGetElapsed(GlobalTimer))
endfunction

function Func1032 takes unit p,unit t returns nothing
  if IsUnitType(t,UNIT_TYPE_HERO)then
    call Func1031(GetOwningPlayer(p),GetOwningPlayer(t))
  endif
endfunction

function Func1033 takes player p,player t returns nothing
  call SaveReal(MHT,GetHandleId(t),GetPlayerId(p)+'buff',TimerGetElapsed(GlobalTimer))
endfunction

function FuckingAssistBuffWrap takes unit p,unit t returns nothing
  if IsUnitType(t,UNIT_TYPE_HERO)then
    call Func1033(GetOwningPlayer(p),GetOwningPlayer(t))
  endif
endfunction

function Func1035 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local player t=GetOwningPlayer(GetEventDamageSource())
  call SaveReal(MHT,GetHandleId(p),GetPlayerId(t),TimerGetElapsed(GlobalTimer))
endfunction

function Func1036 takes player UTX,player UUX returns string
  local integer WVE=1
  local integer UWX=GetPlayerId(UUX)
  local integer UYX=GetPlayerId(UTX)
  local integer h=GetHandleId(UTX)
  local integer h2=GetHandleId(UUX)
  local real WNE=Func0468(TimerGetElapsed(GlobalTimer),real030+0.01)
  local boolean UZX=IsSentinel(UUX)
  local string s=" "+GetObjectName('n0JY')+" "
  local boolean b=false
  local boolean U_X
  local integer i
  set i=1
  loop
    if WNE-LoadReal(MHT,h2,i+'buff')<real030 and IsPlayerEnemy(UTX,Player(i))then
      call Func1031(UTX,Player(i))
    endif
    set i=i+1
    exitwhen i>11
  endloop
  loop
    set U_X=false
    if WVE!=UWX then
      if WNE-LoadReal(MHT,h,WVE)<real030 and IsPlayerEnemy(UTX,Player(WVE))then
        set U_X=true
        call RemoveSavedReal(MHT,h,WVE)
      endif
      if U_X then
        set Assists[WVE]=Assists[WVE]+1
        call Traffic_RegisterData("Assist"+I2S(WVE),UYX)
        if b then
          set s=s+"/"+udg_Colors[WVE]+PlayerNames[WVE]+"|r"
        else
          set s=s+udg_Colors[WVE]+PlayerNames[WVE]+"|r"
        endif
        set b=true
      endif
    endif
    set WVE=WVE+1
    if WVE==GetPlayerId(Scourges[0])then
      set WVE=WVE+1
    endif
    exitwhen WVE>11
  endloop
  if b then
    return s
  endif
  return" "
endfunction

function Func1037 takes unit source,unit RCX returns string
  local integer ZAE=1
  local integer QIE=GetPlayerId(GetOwningPlayer(source))
  local integer ZBE=GetPlayerId(GetOwningPlayer(RCX))
  local integer ZCE
  local string ZJE=""
  local boolean ZSE=false
  loop
    exitwhen ZAE>5
    if IsSentinel(GetOwningPlayer(RCX))then
      set ZCE=GetPlayerId(Sentinels[ZAE])
    else
      set ZCE=GetPlayerId(Scourges[ZAE])
    endif
    if ZBE!=ZCE and Func1029(ZCE,QIE)then
      if ZSE then
        set ZJE=ZJE+"/"+udg_Colors[ZCE]+(PlayerNames[GetPlayerId((Player(ZCE)))])+"|r"
      else
        set ZJE=ZJE+udg_Colors[ZCE]+(PlayerNames[GetPlayerId((Player(ZCE)))])+"|r"
      endif
      set ZSE=true
    endif
    set ZAE=ZAE+1
  endloop
  if ZSE then
    return ZJE
  endif
  return" "
endfunction

function Func1038 takes unit source,unit RCX returns integer
  local integer ZAE=1
  local integer QIE=GetPlayerId(GetOwningPlayer(source))
  local integer ZBE=GetPlayerId(GetOwningPlayer(RCX))
  local integer ZCE
  local integer JUX=0
  loop
    exitwhen ZAE>5
    if IsSentinel(GetOwningPlayer(RCX))then
      set ZCE=GetPlayerId(Sentinels[ZAE])
    else
      set ZCE=GetPlayerId(Scourges[ZAE])
    endif
    if ZBE!=ZCE and Func1029(ZCE,QIE)then
      set JUX=JUX+1
    endif
    set ZAE=ZAE+1
  endloop
  return JUX
endfunction

function Func1039 takes unit source,unit RCX returns boolean
  local integer ZAE=1
  local integer QIE=GetPlayerId(GetOwningPlayer(source))
  local integer ZBE=GetPlayerId(GetOwningPlayer(RCX))
  local integer ZCE
  local string ZJE=" Assists: "
  local boolean ZSE=false
  local integer JUX=1
  set Assists_Assisters[1]=null
  set Assists_Assisters[2]=null
  set Assists_Assisters[3]=null
  set Assists_Assisters[4]=null
  set Assists_Assisters[5]=null
  loop
    exitwhen ZAE>5
    if IsSentinel(GetOwningPlayer(RCX))then
      set ZCE=GetPlayerId(Sentinels[ZAE])
    else
      set ZCE=GetPlayerId(Scourges[ZAE])
    endif
    if ZBE!=ZCE and Func1029(ZCE,QIE)then
      set Assists_Assisters[JUX]=Player(ZCE)
      set JUX=JUX+1
      set ZSE=true
    endif
    set ZAE=ZAE+1
  endloop
  return ZSE
endfunction

function Func1040 takes unit source,unit RCX,real result returns nothing
  local integer i=1
  local integer count=0
  call Func1039(source,RCX)
  loop
    exitwhen i>5
    if Assists_Assisters[i]!=null then
      set count=count+1
    endif
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>5
    if Assists_Assisters[i]!=null then
      call DistribGoldToPlayerForUnit(Assists_Assisters[i],R2I(result/count),udg_Hero[GetPlayerId(Assists_Assisters[i])])
    endif
    set i=i+1
  endloop
endfunction

function IsCreepId takes integer i returns boolean
  return i=='ugho' or i=='unec' or i=='esen' or i=='edry' or i=='u001' or i=='u002' or i=='e00V' or i=='e00W' or i=='ebal' or i=='e026' or i=='umtw' or i=='u00R' or i=='n12Q' or i=='n12R' or i=='n12S' or i=='n12T'
endfunction

function IsWardId takes integer i returns boolean
  return i=='oeye' or i=='o004'
endfunction

function Func1043 takes nothing returns nothing
  local integer id=GetUnitTypeId(GetTriggerUnit())
  local integer WVE=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
  if GetOwningPlayer(GetTriggerUnit())==Neutrals then
    set integers033[WVE]=integers033[WVE]+1
    set integers031[WVE]=integers031[WVE]+1
  elseif(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and IsUnitIllusion(GetTriggerUnit())==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false)then
    if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
      set integers032[WVE]=integers032[WVE]+1
    else
      set integers031[WVE]=integers031[WVE]+1
    endif
  endif
endfunction

function Func1044 takes unit source returns boolean
  local integer ZAE=0
  local integer QIE=GetHandleId(GetOwningPlayer(source))
  local unit RCX=(LoadUnitHandle(HY,(QIE),699))
  loop
    exitwhen ZAE>5
    if GetItemTypeId(UnitItemInSlot(RCX,ZAE))==Item_Real[Aegis]and GetItemCharges(UnitItemInSlot(RCX,ZAE))>0 then
      set RCX=null
      return true
    endif
    set ZAE=ZAE+1
  endloop
  set RCX=null
  return false
endfunction

function Func1045 takes unit u,location XOX returns nothing
  local integer hu=GetHandleId(GetOwningPlayer(u))
  local unit M6X=(LoadUnitHandle(HY,(hu),699))
  local unit M7X=(LoadUnitHandle(HY,(hu),700))
  local unit M8X=(LoadUnitHandle(HY,(hu),701))
  local unit M9X=(LoadUnitHandle(HY,(hu),702))
  local unit PVX=(LoadUnitHandle(HY,(hu),703))
  if M6X!=null then
    call ReviveHeroLoc(M6X,XOX,true)
  endif
  if M7X!=null then
    call ReviveHeroLoc(M7X,XOX,true)
  endif
  if M8X!=null then
    call ReviveHeroLoc(M8X,XOX,true)
  endif
  if M9X!=null then
    call ReviveHeroLoc(M9X,XOX,true)
  endif
  if PVX!=null then
    call ReviveHeroLoc(PVX,XOX,true)
  endif
  set M6X=null
  set M7X=null
  set M8X=null
  set M9X=null
  set PVX=null
endfunction

function Func1046 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local player p=GetOwningPlayer(u)
  local location XOX
  local real x
  local real y
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    call DisableTrigger(t)
    if IsScourge(p)then
      set XOX=GetRectCenter(gg_rct_Hero_Creation_UD)
      set x=GetRectCenterX(gg_rct_Hero_Creation_UD)+GetRandomReal(-300,300)
      set y=GetRectCenterY(gg_rct_Hero_Creation_UD)+GetRandomReal(-300,300)
    else
      set XOX=GetRectCenter(gg_rct_Hero_Creation_NE)
      set x=GetRectCenterX(gg_rct_Hero_Creation_NE)+GetRandomReal(-300,300)
      set y=GetRectCenterY(gg_rct_Hero_Creation_NE)+GetRandomReal(-300,300)
    endif
    if boolean094==false and IsDead(u)then
      call Func0987(u,p,GetLocationX(XOX),GetLocationY(XOX),true)
      if IsMeepo(u)==false or(GetUnitAbilityLevel(u,'A0MW')+GetUnitAbilityLevel(u,'A27C')==0)then
        call ReviveHeroLoc(u,XOX,true)
      else
        if u!=udg_Hero[GetPlayerId(GetOwningPlayer(u))]then
          call Func1045(udg_Hero[GetPlayerId(GetOwningPlayer(u))],XOX)
        else
          call Func1045(u,XOX)
        endif
      endif
      call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MAX_MANA))
    endif
    call RemoveLocation(XOX)
  else
  endif
  call RemoveSavedHandle(HY,GetHandleId(u),'RESP')
  call FlushChildHashtable(HY,h)
  call DestroyTrigger(t)
  set t=null
  set u=null
  set XOX=null
endfunction

function Func1047 takes nothing returns boolean
  if GetItemPlayer(GetFilterItem())==Player(15)then
    call RemoveItem(GetFilterItem())
  endif
  return false
endfunction

function Func1048 takes nothing returns nothing
  call EnumItemsInRect(ShoppingSquare,Filter(function Func1047),null)
endfunction

function GetItemGoldCostById takes integer id returns integer
  local integer WOX=0
  local integer WRX=0
  if id==0 then
    return 0
  endif
  if HaveSavedInteger(hashtable014,id,'GOLD')==false then
    set WOX=GetPlayerState(Player(15),PLAYER_STATE_RESOURCE_GOLD)
    set WRX=50000
    call SetPlayerState(Player(15),PLAYER_STATE_RESOURCE_GOLD,WRX)
    call AddItemToStock(ShoppingUnit,id,1,1)
    call IssueImmediateOrderById(ShoppingUnit,id)
    set WRX=WRX-GetPlayerState(Player(15),PLAYER_STATE_RESOURCE_GOLD)
    call SetPlayerState(Player(15),PLAYER_STATE_RESOURCE_GOLD,WOX)
    call SaveInteger(hashtable014,id,'GOLD',WRX)
    call Func1048()
  else
    set WRX=LoadInteger(hashtable014,id,'GOLD')
  endif
  return WRX
endfunction

function GetUnitItemsCost takes unit u returns integer
  local integer i=0
  local integer WAX=0
  local item it
  loop
    set it=UnitItemInSlot(u,i)
    if it!=null then
      set WAX=WAX+GetItemGoldCostById(GetItemTypeId(it))
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set it=null
  return WAX
endfunction

function Func1051 takes player p returns boolean
  local integer id=GetPlayerId(p)
  local integer WBX=DefineBuybackUnitIndex(p,GetHeroLevel(udg_Hero[id]))*50+50
  local integer WCX=IMaxIF(GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-GetHeroLevel(udg_Hero[id])*30,ReliableGold[id])
  return WCX>=WBX and booleans020[id]==false and BuybackID[id]!='h0D4'
endfunction

function NetWorthTT takes integer nw,unit circle returns nothing
  local texttag tt
  local integer h
  local integer hu=GetHandleId(circle)
  local integer id=GetPlayerId(GetOwningPlayer(circle))
  local integer g
  local integer cg
  if HaveSavedHandle(HY,hu,'netw')then
    set tt=LoadTextTagHandle(HY,hu,'netw')
  else
    set tt=CreateTextTag()
    call SetTextTagPosUnit(tt,circle,0)
    call SetTextTagColor(tt,255,220,0,255)
    call SetTextTagVelocity(tt,0,0)
    call SetTextTagPermanent(tt,true)
    call SaveTextTagHandle(HY,hu,'netw',tt)
  endif
  call SetTextTagText(tt,I2S(nw),0.025)
  call SetTextTagVisibility(tt,IsNeutralsOrObserversOrAllies(GetOwningPlayer(circle)))
  if Func1051(GetOwningPlayer(circle))then
    call SetTextTagColor(tt,255,220,0,255)
  else
    call SetTextTagColor(tt,255,75,0,255)
  endif
  set tt=null
endfunction

function ShoppingNetworthsCount takes nothing returns nothing
  local integer i=1
  local integer id
  local player p
  local integer cost
  loop
    set cost=0
    set p=Sentinels[i]
    if IsPlayerInGame(p)then
      set id=GetPlayerId(p)
      if NetWorthRecount[id]then
        if udg_Hero[id]!=null then
          set cost=cost+GetUnitItemsCost(udg_Hero[id])
          set cost=cost+GetUnitItemsCost(CirclesOfPower[id])
        endif
        if HaveSavedHandle(HY,GetHandleId(p),333)then
          set cost=cost+GetUnitItemsCost(LoadUnitHandle(HY,GetHandleId(p),333))
        endif
        set cost=cost+AlchemistBonus[id]
        set NetWorthRecount[id]=false
        set NetWorthsNoGold[id]=cost
      else
        set cost=NetWorthsNoGold[id]
      endif
      set NetWorths[id]=cost+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
      call NetWorthTT(NetWorths[id],CirclesOfPower[id])
    endif
    set cost=0
    set p=Scourges[i]
    if IsPlayerInGame(p)then
      set id=GetPlayerId(p)
      if NetWorthRecount[id]then
        if udg_Hero[id]!=null then
          set cost=cost+GetUnitItemsCost(udg_Hero[id])
          set cost=cost+GetUnitItemsCost(CirclesOfPower[id])
        endif
        if HaveSavedHandle(HY,GetHandleId(p),333)then
          set cost=cost+GetUnitItemsCost(LoadUnitHandle(HY,GetHandleId(p),333))
        endif
        set cost=cost+AlchemistBonus[id]
        set NetWorthRecount[id]=false
        set NetWorthsNoGold[id]=cost
      else
        set cost=NetWorthsNoGold[id]
      endif
      set NetWorths[id]=cost+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
      call NetWorthTT(NetWorths[id],CirclesOfPower[id])
    endif
    set i=i+1
    exitwhen i>5
  endloop
endfunction

function InitShopping takes nothing returns nothing
	set ShoppingSquare=Rect(6592,-7872,7392,-7264)
	set ShoppingUnit=CreateUnit(Player(15),'nshe',GetRectCenterX(ShoppingSquare),GetRectCenterY(ShoppingSquare),0)//nshe -> Sheep
	call UnitAddAbility(ShoppingUnit,'Asid')//Asid -> Sell Items
	call UnitRemoveAbility(ShoppingUnit,'Amov')//Amov -> Move
	call UnitAddAbility(ShoppingUnit,'Aloc')//Aloc -> Locust
	call SetUnitX(ShoppingUnit,GetRectCenterX(ShoppingSquare))
	call SetUnitY(ShoppingUnit,GetRectCenterY(ShoppingSquare))
	call ShowUnit(ShoppingUnit,false)
	set ShoppingPeriodic=CreateTimer()
	call TimerStart(ShoppingPeriodic,1,true,function ShoppingNetworthsCount)
endfunction

function Func1054 takes unit u,integer g returns nothing
  local unit u2=LoadUnitHandle(HY,GetHandleId(u),788)
  local integer c=LoadInteger(HY,GetHandleId(u2),787)
  call SaveInteger(HY,GetHandleId(u2),787,IMaxBJ(c-g,0))
  set u2=null
endfunction

function Func1055 takes unit E3X,unit t returns nothing
  if DistanceBetweenUnits(E3X,t)>1300 or(IsDead(E3X)and GetUnitTypeId(E3X)=='H00K')then
    if IsPlayerAlly(GetOwningPlayer(E3X),GetOwningPlayer(t))==false then
      call AddHeroXP(E3X,Func0586(t),true)
    endif
  endif
endfunction

function Func1056 takes nothing returns nothing
  if FindItemOfType(GetEnumUnit(),Item_Real[integer290])!=null then
    call SetItemCharges(FindItemOfType(GetEnumUnit(),Item_Real[integer290]),GetItemCharges(FindItemOfType(GetEnumUnit(),Item_Real[integer290]))+1)
  endif
endfunction

function Func1057 takes nothing returns boolean
  if(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitIllusion(GetFilterUnit())==false then
    if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(unit154))and FindItemOfType(GetFilterUnit(),Item_Real[integer290])!=null then
      return true
    endif
  endif
  return false
endfunction

function Func1058 takes nothing returns boolean
  local integer ZAE
  if integer115==0 and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(unit155))then
    if FindItemOfType(GetFilterUnit(),Item_Real[UrnOfShadows])!=null then
      set integer115=integer115+1
      set ZAE=GetItemCharges(FindItemOfType(GetFilterUnit(),Item_Real[UrnOfShadows]))
      if ZAE==0 then
        set ZAE=2
      else
        set ZAE=ZAE+1
      endif
      call SetItemCharges(FindItemOfType(GetFilterUnit(),Item_Real[UrnOfShadows]),ZAE)
    endif
  endif
  return false
endfunction

function Func1059 takes unit source,unit RCX returns nothing
  local group g=GetAvailableGroup()
  set unit154=source
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1625,Condition(function Func1057))
  if IsUnitAlly(source,GetOwningPlayer(RCX))==false then
    call GroupAddUnit(g,RCX)
  endif
  call ForGroup(g,function Func1056)
  call KillGroup(g)
  set g=null
endfunction

function Func1060 takes unit u returns nothing
  local group g=GetAvailableGroup()
  set integer115=0
  set unit155=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1425,Condition(function Func1058))
  call KillGroup(g)
  set integer115=0
  set g=null
endfunction

function Func1061 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),88))
  local integer ZBE=1
  local player whichPlayer
  local string ZJE
  loop
    exitwhen ZBE>5
    if QIE==0 then
      set whichPlayer=Sentinels[ZBE]
      set ZJE=udg_Colors[GetPlayerId(Sentinels[0])]+GetObjectName('n03N')+"|r "+GetObjectName('n03P')+" "+udg_Colors[GetPlayerId(Sentinels[0])]+GetObjectName('n03Q')+"|r"
    else
      set whichPlayer=Scourges[ZBE]
      set ZJE=udg_Colors[GetPlayerId(Scourges[0])]+GetObjectName('n03O')+"|r "+GetObjectName('n03P')+" "+udg_Colors[GetPlayerId(Scourges[0])]+GetObjectName('n03Q')+"|r"
    endif
    call DisplayTimedTextToPlayer(whichPlayer,0,0,10,ZJE)
    call Func0748(sound021,whichPlayer)
    set ZBE=ZBE+1
  endloop
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func1062 takes integer ZAE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,1.5,false)
  call TriggerAddCondition(RBX,Condition(function Func1061))
  call SaveInteger(HY,(QIE),88,(ZAE))
  set RBX=null
endfunction

function Func1063 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),89))
  local string ZJE=(LoadStr(HY,(ZAE),90))
  if QIE==1 then
    call PlaySoundFactory(sound009)
  elseif QIE==2 then
    call PlaySoundFactory(sound025)
  elseif QIE==3 then
    call PlaySoundFactory(sound033)
  elseif QIE==4 then
    call PlaySoundFactory(sound034)
  endif
  call HTE(ZJE,8.)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func1064 takes string ZJE,integer ZAE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.,false)
  call TriggerAddCondition(RBX,Condition(function Func1063))
  call SaveStr(HY,(QIE),90,(ZJE))
  call SaveInteger(HY,(QIE),89,(ZAE))
  set RBX=null
endfunction

function Func1065 takes player whichPlayer,integer ZAE returns nothing
  local integer QIE=1
  local integer ZBE
  if IsSentinel(whichPlayer)then
    set ZBE=CountPlayersInForce(Force_Elfs)
  else
    set ZBE=CountPlayersInForce(Force_Unds)
  endif
  if IsSentinel(whichPlayer)then
    loop
      exitwhen QIE>5
      if IsPlayer(Sentinels[QIE])then
        call DistribGoldToPlayerForUnit(Sentinels[QIE],ZAE/ZBE,udg_Hero[GetPlayerId(Sentinels[QIE])])
      endif
      set QIE=QIE+1
    endloop
  else
    loop
      exitwhen QIE>5
      if IsPlayer(Scourges[QIE])then
        call DistribGoldToPlayerForUnit(Scourges[QIE],ZAE/ZBE,udg_Hero[GetPlayerId(Scourges[QIE])])
      endif
      set QIE=QIE+1
    endloop
  endif
endfunction

function Func1066 takes unit u,integer g returns nothing
  local player p=GetOwningPlayer(u)
  call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-g)
endfunction

function Func1067 takes nothing returns boolean
  if GetUnitTypeId(GetFilterUnit())=='n036' then
    call KillUnit(GetFilterUnit())
    return true
  endif
  return false
endfunction

function Func1068 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function Func1067))
  call KillGroup(g)
endfunction

function Func1069 takes player whichPlayer returns boolean
  return whichPlayer==Neutrals
endfunction

function Func1070 takes nothing returns boolean
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and LoadBoolean(HY,GetHandleId(GetTriggerUnit()),'HBRD')==false and GetUnitTypeId(GetTriggerUnit())!='N0MM' and GetUnitTypeId(GetTriggerUnit())!='H0DL' then
    if GetUnitTypeId(GetTriggerUnit())=='H00J' and Func1044(GetTriggerUnit())then
      return false
    endif
    return true
  endif
  return false
endfunction

function Func1071 takes player W4X,player W5X,unit E3X returns boolean
  return E3X==null or GetKillingUnit()==null or(IsSentinel(W4X)and IsSentinel(W5X))or(IsScourge(W4X)and IsScourge(W5X))
endfunction

function Func1072 takes integer id returns integer
  local integer i=1
  local integer xp=0
  if id==0 then
    loop
      if udg_Hero[GetPlayerId(Sentinels[i])]!=null then
        set xp=xp+GetHeroXP(udg_Hero[GetPlayerId(Sentinels[i])])
      endif
      set i=i+1
      exitwhen i>5
    endloop
  else
    loop
      if udg_Hero[GetPlayerId(Scourges[i])]!=null then
        set xp=xp+GetHeroXP(udg_Hero[GetPlayerId(Scourges[i])])
      endif
      set i=i+1
      exitwhen i>5
    endloop
  endif
  return xp
endfunction

function Func1073 takes integer id returns integer
  local integer i=1
  local integer I1E=0
  if id==0 then
    loop
      set I1E=I1E+NetWorths[GetPlayerId(Sentinels[i])]
      set i=i+1
      exitwhen i>5
    endloop
  else
    loop
      set I1E=I1E+NetWorths[GetPlayerId(Scourges[i])]
      set i=i+1
      exitwhen i>5
    endloop
  endif
  return I1E
endfunction

function Func1074 takes player p returns integer
  local integer i=1
  local integer W9X=1
  local integer WVE=GetPlayerId(p)
  local integer nw=NetWorths[WVE]
  if IsSentinel(p)then
    loop
      if GetPlayerId(Sentinels[i])!=WVE then
        if NetWorths[GetPlayerId(Sentinels[i])]>nw then
          set W9X=W9X+1
        endif
      endif
      set i=i+1
      exitwhen i>5
    endloop
  else
    loop
      if GetPlayerId(Scourges[i])!=WVE then
        if NetWorths[GetPlayerId(Scourges[i])]>nw then
          set W9X=W9X+1
        endif
      endif
      set i=i+1
      exitwhen i>5
    endloop
  endif
  return W9X
endfunction

function Func1075 takes nothing returns nothing
  local integer i=1
  local integer Y1E=LoadInteger(TempHash,'Assi',0)
  local real array r
  local player array p
  local integer k=0
  if Y1E==2 then
    set r[0]=0.75
    set r[1]=1.25
  elseif Y1E==3 then
    set r[0]=0.75
    set r[1]=1.0
    set r[2]=1.25
  elseif Y1E==4 then
    set r[0]=0.75
    set r[1]=0.75
    set r[2]=1.25
    set r[3]=1.25
  elseif Y1E==5 then
    set r[0]=0.75
    set r[1]=0.75
    set r[2]=1.0
    set r[3]=1.25
    set r[4]=1.25
  else
    set r[0]=1.
    set r[1]=1.
    set r[2]=1.
    set r[3]=1.
    set r[4]=1.
  endif
  loop
    if HaveSavedHandle(TempHash,'Assi',i)then
      set p[k]=LoadPlayerHandle(TempHash,'Assi',i)
      set k=k+1
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set i=0
  loop
    call SaveReal(TempHash,'Assi',GetPlayerId(p[i]),r[i])
    call S2I("For player #"+I2S(GetPlayerId(p[i]))+" multiplier is "+R2S(r[i]))
    set i=i+1
    exitwhen i>k
  endloop
endfunction

function Func1076 takes nothing returns nothing
  local group g=LoadGroupHandle(TempHash,'assi',0)
  local group gg=GetAvailableGroup()
  local integer W9X
  local unit u2
  local integer i=0
  local integer k=1
  call FlushChildHashtable(TempHash,'Assi')
  call GroupAddGroup(g,gg)
  loop
    set u2=FirstOfGroup(gg)
    exitwhen u2==null
    if GetUnitTypeId(u2)!='H00J' then
      set i=i+1
      set W9X=Func1074(GetOwningPlayer(u2))
      if HaveSavedHandle(TempHash,'Assi',W9X)then
        loop
          set W9X=W9X+1
          exitwhen HaveSavedHandle(TempHash,'Assi',W9X)==false
        endloop
      endif
      call SavePlayerHandle(TempHash,'Assi',W9X,GetOwningPlayer(u2))
      call SaveInteger(TempHash,'Assi',i,GetPlayerId(GetOwningPlayer(u2)))
      call SaveInteger(TempHash,'Assi',0,LoadInteger(TempHash,'Assi',0)+1)
    endif
    call GroupRemoveUnit(gg,u2)
  endloop
  if i==1 then
    call SaveReal(TempHash,'Assi',LoadInteger(TempHash,'Assi',1),1)
  else
    call Func1075()
  endif
  call KillGroup(gg)
  call RemoveSavedHandle(TempHash,'assi',0)
endfunction

function Func1077 takes nothing returns nothing
  if(GetUnitLevel(GetEnumUnit())<25)then
    call AddHeroXP(GetEnumUnit(),integer043,true)
  endif
endfunction

function Func1078 takes unit u1,unit u2 returns real
  local real x1=GetUnitX(u1)
  local real y1=GetUnitY(u1)
  local real x2=GetUnitX(u2)
  local real y2=GetUnitY(u2)
  if u1==null or u2==null then
    return I2R(9999999999)
  else
    return(x1-x2)*(x1-x2)+(y1-y2)*(y1-y2)
  endif
  return 1.0
endfunction

function Func1079 takes nothing returns nothing
  if IsDead(GetEnumUnit())==false and IsUnitEnemy(GetEnumUnit(),GetOwningPlayer(unit013))and Func1078(GetTriggerUnit(),GetEnumUnit())<=1755625 then
    call GroupAddUnit(group008,GetEnumUnit())
  endif
endfunction

function Func1080 takes nothing returns nothing
  if IsDead(GetEnumUnit())==false and IsUnitAlly(GetEnumUnit(),GetOwningPlayer(unit013))and Func1078(GetTriggerUnit(),GetEnumUnit())<=1755625 then
    call GroupAddUnit(group008,GetEnumUnit())
  endif
endfunction

function Func1081 takes nothing returns nothing
  if IsDead(GetEnumUnit())==false and Func1078(GetTriggerUnit(),GetEnumUnit())<=1755625 then
    call GroupAddUnit(group008,GetEnumUnit())
  endif
endfunction

function Func1082 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  call GroupClear(group008)
  if IsUnitOwnedByPlayer(u,Neutrals)then
    call ForGroup(group007,function Func1081)
  else
    if IsUnitAlly(u,GetOwningPlayer(GetKillingUnit()))and SacrificedByMotherFucker==false then
      call ForGroup(group007,function Func1079)
    else
      call ForGroup(group007,function Func1080)
    endif
  endif
  set u=null
endfunction

function Func1083 takes nothing returns nothing
  call GroupClear(group008)
  call ForGroup(group007,function Func1080)
endfunction

function Func1084 takes nothing returns nothing
  call GroupClear(group008)
  call ForGroup(group007,function Func1080)
endfunction

function Func1085 takes nothing returns nothing
  if GetUnitTypeId(GetEnumUnit())=='H00J' or GetUnitTypeId(GetEnumUnit())=='H00I' then
    set tt_int1=tt_int1+1
  endif
endfunction

function Func1086 takes unit E3X returns boolean
  local integer YGX=0
  local integer YHX=0
  local integer YJX=0
  local group g
  local integer YKX=0
  local integer YLX=0
  local real YMX=0
  local real YPX=0
  local integer xp=0
  local unit u=GetTriggerUnit()
  local integer YQX=0
  local integer YSX=0
  local integer YTX=0
  local real YUX=0
  local real a=0
  local real YWX=0
  local integer count=0
  local integer YYX=0
  local integer heroPos=0
  local integer YZX=0
  local real Y_X=0
  local real Y0X=0
  local integer Y1X=0
  local integer Y2X=0
  local integer WVE=0
  local real Y3X=0
  local real Y4X=0
  local integer Y5X=0
  local integer Y6X=0
  local boolean Y7X=false
  if IsUnitType(u,UNIT_TYPE_HERO)and(GetCloneHeroId(u)==false or(GetUnitTypeId(u)=='H00J' and E3X!=null))then
    set YGX=GetHeroLevel(u)
    set xp=GetHeroXP(u)
    set unit013=E3X
    call Func1084()
    if IsUnitType(E3X,UNIT_TYPE_HERO)then
      if IsNotHeroID(E3X)then
        call GroupAddUnit(group008,udg_Hero[GetPlayerId(GetOwningPlayer(E3X))])
      else
        call GroupAddUnit(group008,E3X)
      endif
    else
      if udg_Hero[GetPlayerId(GetOwningPlayer(E3X))]!=null then
        call GroupAddUnit(group008,udg_Hero[GetPlayerId(GetOwningPlayer(E3X))])
      endif
    endif
    set tt_int1=0
    call ForGroup(group008,function Func1085)
    set Y5X=IMaxIF(0,tt_int1-1)
    set count=CountUnitsInGroup(group008)-Y5X
    if count==0 then
      set u=null
      return false
    endif
    if IsScourge(GetOwningPlayer(u))then
      set YKX=Func1072(0)
      set YLX=Func1072(1)
      set YTX=Func1073(0)
      set YSX=Func1073(1)
    else
      set YKX=Func1072(1)
      set YLX=Func1072(0)
      set YTX=Func1073(1)
      set YSX=Func1073(0)
    endif
    set Y3X=IMaxIF(YSX-YTX,0)*1.
    set YMX=Func0468((YLX-YKX)*1./(1.*IMaxIF(YLX+YKX,1)),0)
    set YPX=YMX*xp
    if count==1 then
      set YHX=20*YGX+R2I(YPX*0.23*0.6)
    elseif count==2 then
      set YHX=15*YGX+R2I(YPX*0.23*0.6)
    elseif count==3 then
      set YHX=10*YGX+R2I(YPX*0.2*0.6)
    elseif count==4 then
      set YHX=7*YGX+R2I(YPX*0.15*0.6)
    elseif count>=5 then
      set YHX=5*YGX+R2I(YPX*0.12*0.6)
    endif
    set YYX=Func1074(GetOwningPlayer(u))
    set Y6X=GetPlayerId(GetOwningPlayer(u))
    set WVE=Y6X
    set YQX=NetWorths[WVE]
    set a=(1.*YSX)/((YTX+1)*1.)-1.
    set YUX=RMinIF(Func0468(a,0),1)
    set YWX=YUX
    if count==1 then
      set YZX=150
      set Y_X=6.0
      set Y0X=0.0375
      set Y1X=100
      set Y4X=100.
    elseif count==2 then
      set YZX=100
      set Y_X=5.0
      set Y0X=0.0375
      set Y1X=75
      set Y4X=75.
    elseif count==3 then
      set YZX=40
      set Y_X=4.0
      set Y0X=0.0375
      set Y1X=40
      set Y4X=50.
    elseif count==4 then
      set YZX=25
      set Y_X=3.0
      set Y0X=0.03
      set Y1X=25
      set Y4X=35.
    elseif count>=5 then
      set YZX=20
      set Y_X=3.0
      set Y0X=0.0225
      set Y1X=20
      set Y4X=25.
    else
      call FatalErrorNote("hero kill went wrong")
    endif
    call S2I("counterBonusBase = "+I2S(YZX)+", counterMultBase = "+R2S(Y_X)+", counterMultSec = "+R2S(Y0X)+", VictimNW = "+I2S(YQX)+", NWFactor = "+R2S(YWX)+", disadvMult = "+R2S(Y4X)+", RMinIF(disadv / 4000, 1) = "+R2S(RMinIF(Y3X/ 4000,1))+", disadv = "+R2S(Y3X)+", victimPos = "+I2S(YYX))
    set Y2X=R2I((YZX+Y_X*YGX+Y0X*YQX*YWX+Y4X*RMinIF(Y3X/ 4000.,1))*(1.2-0.1*(YYX-1)))
    call SaveGroupHandle(TempHash,'assi',0,group008)
    call SaveInteger(TempHash,'assi','meep',Y5X)
    call Func1076()
    set YGX=R2I(Func0586(u)/ count)
    loop
      set u=FirstOfGroup(group008)
      exitwhen u==null
      if Y7X==false or(GetUnitTypeId(u)!='H00J' and GetUnitTypeId(u)!='H00I')then
        if GetUnitTypeId(u)=='H00J' or GetUnitTypeId(u)=='H00I' then
          set Y7X=true
        endif
        set WVE=GetPlayerId(GetOwningPlayer(u))
        set YJX=R2I(Y2X*LoadReal(TempHash,'Assi',WVE))
        call SaveInteger(TempHash,'Assi',WVE,YJX)
        if IsDead(u)==false then
          call AddHeroXP(u,YHX+YGX,true)
        endif
        set integers096[WVE]=integers096[WVE]+YHX
        set integers097[WVE]=integers097[WVE]+YJX
        call DistribGoldToPlayerForUnit(GetOwningPlayer(u),YJX,u)
        set integers009[Y6X]=integers009[Y6X]+YJX
      endif
      call GroupRemoveUnit(group008,u)
    endloop
  endif
  return false
endfunction

function Func1087 takes unit u,real D1E returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call TriggerRegisterTimerEvent(t,D1E,false)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_HERO_REVIVE_FINISH)
  call TriggerAddCondition(t,Condition(function Func1046))
  call SaveTriggerHandle(HY,GetHandleId(u),'RESP',t)
  set t=null
endfunction

function Func1088 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Player(15))then
    set boolean062=true
  endif
  return false
endfunction

function Func1089 takes player p returns boolean
  local integer i=0
  local integer h=GetHandleId(p)
  local integer cost=0
  loop
    exitwhen HaveSavedInteger(MHT,h,'ihis'+i)==false
    set cost=cost+LoadInteger(MHT,h,'ihis'+i)
    call RemoveSavedInteger(MHT,h,'ihis'+i)
    set i=i+1
  endloop
  if cost>0 then
    call SaveInteger(MHT,h,'ihis',cost)
    return NetWorths[GetPlayerId(p)]<cost*2
  endif
  return false
endfunction

function Func1090 takes unit E3X,unit FKX,player W5X,player W4X,integer UYX returns boolean
  if(W5X==W4X)then
    if E3X==FKX or GetUnitAbilityLevel(E3X,'Aloc')>0 then
      call DisplayTimedTextToForceEx(AllPlayers,10.00,udg_Colors[UYX]+PlayerNames[UYX]+"|r "+GetObjectName('n03R'))
    else
      call DisplayTimedTextToForceEx(AllPlayers,10.00,udg_Colors[UYX]+PlayerNames[UYX]+"|r "+GetObjectName('TX2H'))
    endif
  else
    call DisplayTimedTextToForceEx(AllPlayers,10.00,KillingMsg(W4X,W5X))
  endif
  return true
endfunction

function Func1091 takes integer ZOX,integer ZRX,integer i,integer k,integer UWX,player W5X,player p returns boolean
  set Deaths[ZOX]=Deaths[ZOX]+1
  set Kills[ZRX]=Kills[ZRX]+1
  set integers051[i]=integers051[i]+1
  set integers051[k]=0
  if W5X!=p then
    set Kills[UWX]=Kills[UWX]+1
    set integers049[UWX]=integers049[UWX]+1
  endif
  return true
endfunction

function Func1092 takes integer UWX,boolean ZAX,boolean ZNX returns nothing
  local string E3X=""
  local boolean FEX=false
  if TimerGetElapsed(GlobalTimer)-LoadReal(HY,GetHandleId(Player(UWX)),'strk')>18 then
    set integers050[UWX]=0
    set FEX=true
  endif
  call SaveReal(HY,GetHandleId(Player(UWX)),'strk',TimerGetElapsed(GlobalTimer))
  set integers050[UWX]=integers050[UWX]+1
  if FEX then
    return
  endif
  if ZAX==false then
    set E3X=udg_Colors[UWX]+PlayerNames[UWX]+"|r "
  else
    if ZNX then
      set E3X=udg_Colors[UWX]+GetObjectName('n00L')+"|r "
    else
      set E3X=udg_Colors[UWX]+PlayerNames[UWX]+"|r "
    endif
  endif
  if integers050[UWX]==2 then
    set integers040[UWX]=integers040[UWX]+1
    call Func1064(E3X+GetObjectName('n04D')+" |c000000ff"+GetObjectName('n04S')+"|r"+"!",1)
  elseif integers050[UWX]==3 then
    set integers040[UWX]=integers040[UWX]-1
    set integers041[UWX]=integers041[UWX]+1
    call Func1064(E3X+GetObjectName('n04D')+" |c0000ff40"+GetObjectName('n04E')+"|r"+GetObjectName('n04B'),2)
  elseif integers050[UWX]==4 then
    set integers042[UWX]=integers042[UWX]+1
    set integers041[UWX]=integers041[UWX]-1
    call Func1064(E3X+GetObjectName('n04D')+" |c0000FFFF"+GetObjectName('n0HJ')+"|r"+GetObjectName('n04B'),3)
  elseif integers050[UWX]>4 then
    set integers042[UWX]=integers042[UWX]-1
    set integers043[UWX]=integers043[UWX]+1
    call Func1064(E3X+"is on a"+" |c0000AAFF"+GetObjectName('n0HK')+"|r"+GetObjectName('n04B'),4)
  endif
endfunction

function HeroDeath takes nothing returns nothing
  local boolean ZCX=false
  local unit FKX=GetDyingUnit()
  local unit E3X=GetKillingUnit()
  local player W5X=GetOwningPlayer(E3X)
  local player W4X=GetOwningPlayer(FKX)
  local integer UWX=GetPlayerId(W5X)
  local integer UYX=GetPlayerId(W4X)
  local integer ZDX=0
  local integer ZFX=0
  local boolean ZGX=false
  local string ZHX=""
  local string ZJX=""
  local string ZKX=""
  local integer ZLX
  local string ZMX
  local string ZPX
  local string ZQX
  local string ZSX
  local real ZTX=1
  local real ZUX=0
  local integer ZWX
  local integer ZYX
  local integer ZZX=GetPlayerState(W4X,PLAYER_STATE_RESOURCE_GOLD)-ReliableGold[UYX]
  local unit Z_X
  local unit Z0X
  local boolean Z1X=(LoadInteger(HY,GetHandleId(FKX),4418)>0)or(LoadInteger(HY,GetHandleId(FKX),4419)>0)
  local item Z2X=null
  local group g
  if Z1X then
    set booleans020[UYX]=true
  endif
  if E3X==null and(GetUnitAbilityLevel(FKX,'A0MQ')>0 or GetUnitAbilityLevel(FKX,'A1B6')>0)and unit261!=null then
    set E3X=unit261
    set W5X=GetOwningPlayer(E3X)
    set unit261=null
  endif
  if IsPlayerAlly(W5X,W4X)then
    if((LoadInteger(HY,(GetHandleId(E3X)),4328))==1)and unit271!=null then
      set E3X=unit271
      set W5X=GetOwningPlayer(E3X)
    endif
    if(GetUnitAbilityLevel(FKX,'A0CC')>0 or GetUnitAbilityLevel(FKX,'A02Z')>0)and LoadUnitHandle(HY,GetHandleId(FKX),'A0CC')==E3X then
      set W5X=W4X
      set E3X=FKX
      call RemoveSavedHandle(HY,GetHandleId(FKX),'A0CC')
    endif
  endif
  if(LoadInteger(HY,GetHandleId(FKX),4333)==1 or LoadInteger(HY,GetHandleId(FKX),4334)==1)then
    set E3X=LoadUnitHandle(HY,GetHandleId(FKX),4333)
    set W5X=GetOwningPlayer(E3X)
  endif
  if W5X!=null and W5X!=W4X and IsPlayerEnemy(W5X,W4X)and Func1069(W5X)==false then
    call Func1086(E3X)
  endif
  call ExecuteFunc("Func1290")
  set ZYX=Func1038(FKX,E3X)
  if E3X!=null then
    call Func1055(udg_Hero[GetPlayerId(GetOwningPlayer(E3X))],FKX)
  endif
  if Func1071(W4X,W5X,E3X)==false and ZYX==1 and IsPlayerBelongToTeams(W5X)==false and W5X!=Neutrals then
    call Func1039(FKX,E3X)
    set W5X=Assists_Assisters[1]
    set E3X=udg_Hero[UWX]
  endif
  set booleans014[GetPlayerId(GetOwningPlayer(FKX))]=true
  if IsPlayerEnemy(W5X,W4X)and W5X!=Player(12)then
    call UnitRemoveAbility(FKX,'A33P')
    call UnitAddAbility2(udg_Hero[GetPlayerId(W5X)],'A33P')
  endif
  if W5X==null then
    set W5X=W4X
  endif
  if boolean068 and GetUnitTypeId(FKX)!='H00J' then
    set item002=UnitRemoveItemFromSlot(FKX,GetRandomInt(0,5))
  endif
  set UWX=GetPlayerId(W5X)
  set UYX=GetPlayerId(W4X)
  if W5X==Neutrals then
    set ZGX=false
    set ZCX=true
    if GetUnitTypeId(E3X)=='n00L' then
      call DisplayTimedTextToForceEx(AllPlayers,10.00,(udg_Colors[UYX]+(PlayerNames[UYX])+"|r "+GetObjectName('n03T')))
    else
      call DisplayTimedTextToForceEx(AllPlayers,10.00,(udg_Colors[UYX]+(PlayerNames[UYX])+"|r "+GetObjectName('n03U')))
    endif
    call Func1092(UWX,true,GetUnitTypeId(E3X)=='n00L')
  endif
  if IsSentinel(W4X)then
    if IsSentinel(W5X)then
      set ZCX=Func1090(E3X,FKX,W5X,W4X,UYX)
    elseif IsScourge(W5X)then
      set ZGX=Func1091(GetPlayerId(Sentinels[0]),GetPlayerId(Scourges[0]),2,1,UWX,W5X,Scourges[0])
    endif
  elseif IsScourge(W4X)then
    if IsScourge(W5X)then
      set ZCX=Func1090(E3X,FKX,W5X,W4X,UYX)
    elseif IsSentinel(W5X)then
      set ZGX=Func1091(GetPlayerId(Scourges[0]),GetPlayerId(Sentinels[0]),1,2,UWX,W5X,Sentinels[0])
    endif
  endif
  if boolean117 then
    call PlaySoundAtPos(sound011,GetUnitX(FKX),GetUnitY(FKX))
  endif
  call Traffic_RegisterData("Hero"+I2S(UYX),UWX)
  if IsPlayer(W4X)and Func1089(W4X)then
    set integers011[UYX]=integers011[UYX]+1
  endif
  set ZLX=integers049[UYX]
  if ZLX>2 and ZCX==false then
    if ZLX==3 then
      set ZHX="|c0000ff40"+"killing spree"+"|r"
    elseif ZLX==4 then
      set ZHX="|c00400080"+"dominating"+"|r"
    elseif ZLX==5 then
      set ZHX="|c00ff0080"+GetObjectName('n04M')+"|r"
    elseif ZLX==6 then
      set ZHX="|c00ff8000"+GetObjectName('n04J')+"|r"
    elseif ZLX==7 then
      set ZHX="|c00808000"+GetObjectName('n04I')+"|r"
    elseif ZLX==8 then
      set ZHX="|c00ff80ff"+GetObjectName('n03V')+"|r"
    elseif ZLX==9 then
      set ZHX="|c00ff0000"+GetObjectName('n03W')+"|r"
    else
      set ZHX="|c00ff8000"+GetObjectName('n03X')+"|r"
    endif
    set ZDX=Func0464(ZLX-2,8)*60
  endif
  if false then
    if integers049[UWX]>2 then
      call UnitAddAbility2(udg_Hero[UWX],'A2KJ')
    else
      call UnitRemoveAbility(udg_Hero[UWX],'A2KJ')
    endif
  endif
  set ZLX=integers049[UWX]
  if ZLX>integers039[UWX]then
    set integers039[UWX]=ZLX
  endif
  set Z_X=E3X
  if IsUnitType(Z_X,UNIT_TYPE_HERO)==false then
    set Z_X=udg_Hero[GetPlayerId(GetOwningPlayer(Z_X))]
  endif
  set Z0X=FKX
  if IsUnitType(Z0X,UNIT_TYPE_HERO)==false then
    set Z0X=udg_Hero[GetPlayerId(GetOwningPlayer(Z0X))]
  endif
  if ZLX>2 and ZCX==false then
    if ZLX==3 then
      call PlaySoundFactory(Sounds_KillingSpree)
      set ZJX=" "+"is on a"+" |c0000ff40"+"killing spree"+"|r"+"!"
    elseif ZLX==4 then
      call PlaySoundFactory(snd_Dominating)
      set ZJX=" "+"is"+" |c00400080"+"dominating"+"|r"+"!"
    elseif ZLX==5 then
      call PlaySoundFactory(sound018)
      set ZJX=" "+GetObjectName('n04G')+" |c00ff0080"+GetObjectName('n04M')+"|r"+"!"
    elseif ZLX==6 then
      call PlaySoundFactory(sound026)
      set ZJX=" "+"is"+" |c00ff8000"+GetObjectName('n04J')+"|r"+GetObjectName('n04A')
    elseif ZLX==7 then
      call PlaySoundFactory(sound029)
      set ZJX=" "+"is"+" |c00808000"+GetObjectName('n04I')+"|r"+GetObjectName('n04A')
    elseif ZLX==8 then
      call PlaySoundFactory(sound020)
      set ZJX=" "+GetObjectName('n04G')+" |c00ff80ff"+GetObjectName('n03V')+"|r"+GetObjectName('n04A')
    elseif ZLX==9 then
      call PlaySoundFactory(sound012)
      set ZJX=" "+"is"+" |c00ff0000"+GetObjectName('n03W')+"|r"+GetObjectName('n04B')
    else
      call PlaySoundFactory(sound013)
      set ZJX=" "+"is"+" |c00ff8000"+GetObjectName('n03X')+"|r. "+GetObjectName('n04F')+GetObjectName('n04B')
    endif
  endif
  if ZCX==false then
    set ZDX=ZDX+100+GetHeroLevel(FKX)*9
    set ZMX=udg_Colors[UYX]+(PlayerNames[UYX])+"|r"
    set ZPX=udg_Colors[UWX]+(PlayerNames[UWX])+"|r"
    set ZSX="|c00FFDC00"+I2S(ZDX)
    if LoadInteger(TempHash,'Assi',UWX)>0 then
      set ZSX=ZSX+"(+"+I2S(LoadInteger(TempHash,'Assi',UWX))+")"
    endif
    set ZSX=ZSX+"|r"
    if W5X==Sentinels[0]or W5X==Scourges[0]then
      if ZYX==0 then
        if W5X==Sentinels[0]then
          set ZQX=ZPX+" "+GetObjectName('n042')+" "+ZMX+GetObjectName('n043')+"!"+" "+ZSX+" "+GetObjectName('n044')+"."
          call Func1065(W5X,ZDX)
        elseif W5X==Scourges[0]then
          set ZQX=ZPX+" "+GetObjectName('n042')+" "+ZMX+GetObjectName('n043')+"!"+" "+ZSX+" "+GetObjectName('n044')+"."
          call Func1065(W5X,ZDX)
        endif
      elseif ZYX>1 then
        set ZQX=ZPX+" "+GetObjectName('n042')+" "+ZMX+GetObjectName('n043')+"!"+" "+ZSX+" "+GetObjectName('n044')+"."
        call Func1040(FKX,E3X,ZDX)
      endif
    elseif ZHX==""and ZJX==""then
      set ZQX=ZPX+" "+GetObjectName('n042')+" "+ZMX+GetObjectName('n043')+" "+GetObjectName('n04C')+" "+ZSX+" "+GetObjectName('n045')+"!"
    elseif ZHX==""and ZJX!=""then
      set ZQX=ZPX+" "+GetObjectName('n042')+" "+ZMX+GetObjectName('n043')+" "+GetObjectName('n04C')+" "+ZSX+" "+GetObjectName('n045')+"!"
    elseif ZHX!=""and ZJX==""then
      set ZQX=ZPX+" "+GetObjectName('n048')+" "+ZMX+GetObjectName('n047')+" "+ZHX+" "+GetObjectName('n046')+" "+ZSX+" "+GetObjectName('n045')+"!"
    elseif ZHX!=""and ZJX!=""then
      set ZQX=ZPX+" "+GetObjectName('n048')+" "+ZMX+GetObjectName('n047')+" "+ZHX+" "+GetObjectName('n046')+" "+ZSX+" "+GetObjectName('n045')+"!"
    endif
    if ZGX then
      set ZKX=Func1036(W4X,W5X)
    endif
    call DisplayTimedTextToForceEx(AllPlayers,10,ZQX+ZKX)
    if ZJX!=""then
      call DisplayTimedTextToForceEx(AllPlayers,10,ZPX+ZJX)
    endif
    if false then
      call UnitRemoveAbility(udg_Hero[UYX],'A2KJ')
    endif
    call DistribGoldToPlayerForUnit(W5X,ZDX,FKX)
    set integers009[UYX]=integers009[UYX]+ZDX
    set integers046[UWX]=integers046[UWX]+ZDX
    if integers051[1]>4 then
      call Func1062(0)
    elseif integers051[2]>4 then
      call Func1062(1)
    endif
  endif
  set ZFX=GetHeroLevel(FKX)*30
  if ZFX>ZZX then
    set ZFX=ZZX
  endif
  if integer438>0 then
    set Z2X=FindItemOfType(udg_Hero[UYX],Item_Real[integer290])
    if Z2X!=null then
      if GetItemCharges(Z2X)>0 then
        set ZUX=-1*(3*GetItemCharges(Z2X))
      endif
      set Z2X=null
    endif
    call Func1059(FKX,Z_X)
  endif
  if boolean033 then
    call Func1060(FKX)
  endif
  set integers038[UYX]=integers038[UYX]+ZFX
  call Func1066(FKX,ZFX)
  call TextTagOnUnit("-"+I2S(ZFX),1.5,FKX,0.025,255,220,0,255,IsNeutralsOrObserversOrAllies(GetOwningPlayer(FKX)))
  if mode_TT then
    call Func1054(FKX,ZFX)
  endif
  call SaveInteger(HY,400+UWX,450+UYX,LoadInteger(HY,400+UWX,450+UYX)+1)
  call SaveInteger(HY,400+UYX,500+UWX,LoadInteger(HY,400+UYX,500+UWX)+1)
  if ZCX==false then
    if W5X!=Sentinels[0]and W5X!=Scourges[0]and W5X!=Neutrals then
      call Func1092(UWX,false,false)
    endif
    set integers049[UYX]=0
  endif
  set integers049[0]=0
  set integers049[6]=0
  set Deaths[UYX]=Deaths[UYX]+1
  if ZCX and GetUnitTypeId(FKX)=='H00K' and LoadBoolean(HY,GetHandleId(FKX),'suit')then
    set ZTX=0.5
  endif
  set ZWX=IMaxIF(R2I((GetHeroLevel(FKX)*3.8+5)*ZTX)+R2I(ZUX),0)
  if boolean170 then
    set ZWX=R2I(ZWX*0.5)
  endif
  set ZWX=ZWX+integers082[UYX]
  if(LoadInteger(HY,GetHandleId(FKX),4333)>0 or LoadInteger(HY,GetHandleId(FKX),4334)>0)then
    set ZWX=R2I(ZWX+(LoadInteger(HY,GetHandleId(FKX),4333)+LoadInteger(HY,GetHandleId(FKX),4334))*10)
  endif
  if boolean111 then
    set integers044[UYX]=0
    call TimerStart(HeroRespawnTimer[UYX],1.00,false,null)
  else
    set integers044[UYX]=integers044[UYX]+ZWX
    if boolean054 then
      call Traffic_RegisterData("LoD_DeadFor_"+R2S(ZWX),UYX)
    endif
    call TimerStart(HeroRespawnTimer[UYX],ZWX,false,null)
  endif
  call TriggerExecute(trigger022)
  if ZWX>1 and BuybackID[UYX]!='h0D4' and Mode_DM==false and SelectionHelperEnabled[UYX]then
    set g=GetAvailableGroup()
    set boolean062=false
    call GroupEnumUnitsSelected(g,W4X,Condition(function Func1088))
    if boolean062==false then
      call SelectUnitForPlayerSingle(CirclesOfPower[UYX],W4X)
    endif
    call KillGroup(g)
  endif
  if Mode_DM==false then
    call Func1087(FKX,ZWX)
  else
    if(IsSentinel(W4X))then
      set integers052[0]=integers052[0]+1
    elseif IsScourge(W4X)then
      set integers052[1]=integers052[1]+1
    endif
    set units004[UYX]=FKX
    if GetUnitTypeId(FKX)=='H00J' then
      set units004[UYX]=(LoadUnitHandle(HY,(GetHandleId(GetOwningPlayer(FKX))),699))
    endif
    if integers052[0]==integer096 then
      call TriggerExecute(trigger028)
    endif
    if integers052[1]==integer096 then
      call TriggerExecute(trigger027)
    endif
    if(GetUnitTypeId(FKX)=='U006' or GetUnitTypeId(FKX)=='U007')then
      call ExecuteFunc("Func1068")
    elseif GetUnitTypeId(FKX)=='U008' or GetUnitTypeId(FKX)=='E015' then
      set unit035=FKX
      call ExecuteFunc("Func3620")
    elseif GetUnitTypeId(FKX)=='Ucrl' or GetUnitTypeId(FKX)=='U01X' then
      set unit035=FKX
      call ExecuteFunc("Func3091")
    endif
  endif
  call Func0929(W4X)
  set FKX=null
  set E3X=null
  set Z_X=null
  set Z0X=null
endfunction

function Func1094 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local unit u=GetKillingUnit()
  local unit v=GetTriggerUnit()
  local player E3X=GetOwningPlayer(u)
  local player FKX=GetOwningPlayer(v)
  local string s
  local integer Z7X=Func1038(v,u)
  if E3X==Sentinels[0]or E3X==Scourges[0]then
    call Func1040(v,u,150)
    set s=Func1037(v,u)+" "+GetObjectName('n04W')+" |c00ff0303"+GetObjectName('n04Y')+"!"+"|r "
    if Z7X>1 then
      set s=s+"(+150 "+GetObjectName('n044')+")"
    else
      set s=s+"(+150 "+GetObjectName('n045')+")"
    endif
  else
    set s=udg_Colors[GetPlayerId(E3X)]+(PlayerNames[GetPlayerId(E3X)])+"|r "+GetObjectName('n04W')+" |c00ff0303"+GetObjectName('n04Y')+"!"+"|r "
    set s=s+"(+150 "+GetObjectName('n045')+")"
    call DistribGoldToPlayerForUnit(E3X,150,udg_Hero[GetPlayerId(E3X)])
    set integers009[GetPlayerId(FKX)]=integers009[GetPlayerId(FKX)]+150
  endif
  call DisplayTimedTextToForceEx(AllPlayers,10,s)
  call PlaySoundFactory(sound010)
  call CleanTrigger(t)
  set t=null
  set u=null
  set v=null
endfunction

function Func1095 takes nothing returns boolean
  if GetOwningPlayer(GetKillingUnit())!=Neutrals and GetKillingUnit()!=null and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and IsPlayerEnemy(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit()))then
    if GetOwningPlayer(GetKillingUnit())==Sentinels[0]or GetOwningPlayer(GetKillingUnit())==Scourges[0]then
      if Func1038(GetTriggerUnit(),GetKillingUnit())>0 then
        call Func1094()
      endif
    else
      call Func1094()
    endif
  endif
  return false
endfunction

function Func1096 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local integer c=(LoadInteger(HY,h,34))
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
    set c=c+1
    call SaveInteger(HY,h,34,(c))
  endif
  if c>50 or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>20)or GetUnitAbilityLevel(u,'A3JF')==0 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+0.02*GetUnitState(u,UNIT_STATE_MAX_LIFE))
    call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+0.02*GetUnitState(u,UNIT_STATE_MAX_MANA))
  endif
  set t=null
  set u=null
  return false
endfunction

function Func1097 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call UnitAddAbilityTimedExF(u,'A3JF',1,5,'B3JF')
  call TriggerAddCondition(t,Condition(function Func1096))
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
  call SaveUnitHandle(HY,h,2,(u))
  set t=null
endfunction

function Func1098 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if GetUnitAbilityLevel(Roshan,'B0BI')==0 then
      call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
    endif
    if LoadInteger(HY,h,0)==15 or GetTriggerEvalCount(t)==1 then
      call SaveInteger(HY,h,0,0)
      set u=CreateUnit(Neutrals,'e00E',GetUnitX(Roshan),GetUnitY(Roshan),0)
      call UnitAddAbility(u,'A3JK')
      call IssueTargetOrderByIdFuckingEx(u,852572,Roshan,false)
      set u=null
    endif
    if ModuloInteger(GetTriggerEvalCount(t),10)==0 then
      if IsUnitInRegion(region005,Roshan)==false then
        if(LoadBoolean(HY,h,91))then
          call SaveBoolean(HY,h,91,(false))
        else
          call SetUnitPosition(Roshan,4300,integer038)
          call SaveBoolean(HY,h,91,(true))
        endif
      endif
    endif
  endif
  set t=null
  return false
endfunction

function Func1099 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterUnitEvent(t,Roshan,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1098))
  call SaveBoolean(HY,h,91,(true))
  set t=null
endfunction

function Func1100 takes nothing returns nothing
  local integer hp=integer116*700
  local integer FZE=LoadInteger(HY,GetHandleId(Roshan),'MXHP')
  if hp!=FZE then
    call Func0798(Roshan,IMaxIF(hp-FZE,0))
    call SaveInteger(HY,GetHandleId(Roshan),'MXHP',hp)
  endif
endfunction

function Func1101 takes unit u returns nothing
  local integer VIO='A3BA'
  local integer QIE=0
  local integer offset=0
  local integer VAO=Func0464(integer116,20)
  if integer116==0 then
    return
  endif
  set offset=R2I((VAO-1)/4)
  set QIE=VAO-offset*4
  call UnitAddAbility3(u,VIO+offset,QIE)
endfunction

function Func1102 takes nothing returns boolean
  set integer116=GetTriggerEvalCount(GetTriggeringTrigger())
  if Roshan!=null and GetUnitState(Roshan,UNIT_STATE_LIFE)>1 then
    call Func1100()
    call SetPlayerTechResearched(GetOwningPlayer(Roshan),'R00F',integer116)
    call Func1101(Roshan)
  endif
  return false
endfunction

function Func1103 takes nothing returns nothing
  local integer ZAE=1
  local unit source
  set unit156=null
  loop
    exitwhen ZAE>5
    set source=udg_Hero[GetPlayerId(Sentinels[ZAE])]
    if source!=null and FindItemOfType(source,Item_Real[Aegis])!=null then
      call DisableTrigger(t_manipulateitem)
      call Traffic_RegisterData("AegisOff",GetPlayerId(GetOwningPlayer(source)))
      call RemoveItem(FindItemOfType(source,Item_Real[Aegis]))
      call Func1097(source)
      call EnableTrigger(t_manipulateitem)
    endif
    set source=udg_Hero[GetPlayerId(Scourges[ZAE])]
    if source!=null and FindItemOfType(source,Item_Real[Aegis])!=null then
      call DisableTrigger(t_manipulateitem)
      call Traffic_RegisterData("AegisOff",GetPlayerId(GetOwningPlayer(source)))
      call RemoveItem(FindItemOfType(source,Item_Real[Aegis]))
      call Func1097(source)
      call EnableTrigger(t_manipulateitem)
    endif
    set ZAE=ZAE+1
  endloop
  set source=null
endfunction

function Func1104 takes string ZJE,string I3X returns string
  local string VDO=GetObjectName('n0CA')
  set VDO=str_replace(VDO,"$team",ZJE)
  set VDO=str_replace(VDO,"$team",I3X)
  return VDO
endfunction

function Func1105 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit WXE
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamage()>0 and LoadBoolean(HY,h,0)==false then
      set WXE=GetEventDamageSource()
      if GetTriggerUnit()==Roshan then
        if GetUnitTypeId(WXE)=='u00G' and GetUnitAbilityLevel(WXE,'Aloc')>0 and GetUnitCurrentOrder(Roshan)!=851983 and LoadInteger(HY,GetHandleId(Roshan),'FORC')!=1 and IsUnitInRegion(region005,udg_Hero[GetPlayerId(GetOwningPlayer(WXE))])then
          call IssueTargetOrderByIdFuckingEx(Roshan,851983,udg_Hero[GetPlayerId(GetOwningPlayer(WXE))],true)
          call TriggerRegisterTimerEvent(t,4,false)
          call SaveBoolean(HY,h,0,true)
        endif
        if GetUnitCurrentOrder(Roshan)==0 or GetUnitCurrentOrder(Roshan)==851986 then
          if LoadInteger(HY,h,0)>10 then
            call ImminentTriggeredPointOrder(Roshan,851983,GetUnitX(Roshan),GetUnitY(Roshan))
            call SaveInteger(HY,h,0,0)
          else
            call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
          endif
        endif
      endif
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_ATTACKED then
    if IsUnitInRegion(region010,GetAttacker())==false and GetUnitAbilityLevel(GetAttacker(),'Aloc')==0 then
      call Error(GetOwningPlayer(GetAttacker()),GetObjectName('n035'))
      call IssueImmediateOrderByIdExFunc(GetAttacker(),851972)
    endif
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
    if GetSpellTargetUnit()==Roshan and Func0795(GetSpellAbilityId())and IsUnitInRegion(region010,GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),'Aloc')==0 then
      call Error(GetOwningPlayer(GetTriggerUnit()),GetObjectName('n035'))
      call IssueImmediateOrderByIdExFunc(GetTriggerUnit(),851972)
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call CleanTrigger(t)
  else
    call SaveBoolean(HY,h,0,false)
  endif
  set WXE=null
  set t=null
endfunction

function Func1106 takes unit u returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func1105))
  call SaveReal(HY,GetHandleId(t),0,GetUnitX(u))
  call SaveReal(HY,GetHandleId(t),1,GetUnitY(u))
  if u==Roshan then
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ATTACKED)
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CAST)
  endif
  set t=null
endfunction

function Func1107 takes nothing returns nothing
  if TriggeredUnit==Roshan and IsUnitIllusion(CastedUnit)then
    call KillUnit(CastedUnit)
  endif
endfunction

function Func1108 takes nothing returns nothing
  set Roshan=CreateUnit(Player(12),'n00L',4300,-2430,180.0)
  call SetUnitAcquireRange(Roshan,150)
  call Func1099()
  if integer118>1 then
    call UnitRemoveAbility(Roshan,'A0K2')
    call UnitAddAbility(Roshan,'A0Q6')
    call UnitAddItem(Roshan,CreateItem(Item_Real[integer205],0,0))
  endif
  call UnitAddItem(Roshan,CreateItem(Item_Real[integer251],0,0))
  call Func1101(Roshan)
  call Func1106(Roshan)
endfunction

function Func1109 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local location IGX
  local real result
  if GetTriggerEvalCount(RBX)==integer117 or boolean146 then
    set boolean146=false
    call Func1103()
    set integer118=integer118+1
    call Func1108()
    call Func1100()
    call SetPlayerTechResearched(GetOwningPlayer(Roshan),'R00F',integer116)
    call CleanTrigger(RBX)
  elseif GetTriggerEvalCount(RBX)==300 then
    call Func1103()
  endif
  set RBX=null
  set IGX=null
  return false
endfunction

function AddGold takes integer g,player p returns nothing
  if LoadReal(HeroStats,GetHandleId(p),25)>TimerGetElapsed(GlobalTimer)then
    set g=R2I(g*0.4)
  endif
  call AdjustPlayerStateBJ(g,p,PLAYER_STATE_RESOURCE_GOLD)
endfunction

function Func1111 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local item it
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1109))
  set boolean146=false
  set integer117=GetRandomInt(480,660)
  set boolean118=false
  set it=CreateItem(Item_Dummy[Aegis],GetUnitX(Roshan),GetUnitY(Roshan))
  call SetItemCharges(it,1)
  if GetUnitAbilityLevel(Roshan,'A0Q6')==1 then
    set it=CreateItem(Item_Dummy[Cheese],GetUnitX(Roshan),GetUnitY(Roshan))
    call SetItemCharges(it,1)
  endif
  call SaveInteger(UnitsData,'n00L',integer044,750+20*integer072)
  call TexttagOnUnitEx(I2S(750+20*integer072),1,Roshan,0.028,48,0xCC,0xCC,0xCC,216)
  call RemoveItem(UnitRemoveItemFromSlot(Roshan,0))
  call RemoveItem(UnitRemoveItemFromSlot(Roshan,1))
  call PlaySoundBJ(sound001)
  if(IsSentinel(GetOwningPlayer(GetKillingUnit())))then
    call Traffic_RegisterData("Roshan",0)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,Func1104("|c00ff0000"+GetObjectName('n065')+"|r",GetObjectName('n065')))
    call AddGold(200,Sentinels[1])
    call AddGold(200,Sentinels[2])
    call AddGold(200,Sentinels[3])
    call AddGold(200,Sentinels[4])
    call AddGold(200,Sentinels[5])
  elseif(IsScourge(GetOwningPlayer(GetKillingUnit())))then
    call Traffic_RegisterData("Roshan",1)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,Func1104("|c00004000"+GetObjectName('n06C')+"|r",GetObjectName('n06C')))
    call AddGold(200,Scourges[1])
    call AddGold(200,Scourges[2])
    call AddGold(200,Scourges[3])
    call AddGold(200,Scourges[4])
    call AddGold(200,Scourges[5])
  endif
  if unit017==null then
    set unit017=CreateUnit(Neutrals,'e01V',GetUnitX(Roshan),GetUnitY(Roshan),0)
  endif
  set t=null
  set it=null
endfunction

function Func1112 takes unit source,player whichPlayer returns nothing
  local texttag VQO=CreateTextTag()
  call SetTextTagText(VQO,"!",0.03)
  call SetTextTagPosUnit(VQO,source,0)
  call SetTextTagColorBJ(VQO,PlayerColors_R[GetPlayerId(whichPlayer)],PlayerColors_G[GetPlayerId(whichPlayer)],PlayerColors_B[GetPlayerId(whichPlayer)],15)
  call SetTextTagVelocity(VQO,0,0.035)
  call SetTextTagFadepoint(VQO,3)
  call SetTextTagLifespan(VQO,1.5)
  call SetTextTagPermanent(VQO,false)
  call SetTextTagVisibility(VQO,false)
  if booleans027[PlayerId]or(PlayerObserver)then
    call SetTextTagVisibility(VQO,true)
  endif
  set VQO=null
endfunction

function Func1113 takes nothing returns boolean
  if IsUnitAlly(GetKillingUnit(),GetOwningPlayer(GetTriggerUnit()))then
    call Func1112(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))
  else
  endif
  return false
endfunction

function Func1114 takes player whichPlayer,unit E3X returns string
  local string s=GetObjectName('n0AP')
  local integer WVE
  set s=str_replace(s,"$dead",(PlayerNames[GetPlayerId(whichPlayer)]))
  if E3X!=null then
    set WVE=GetPlayerId(GetOwningPlayer(E3X))
    set s=s+udg_Colors[WVE]+PlayerNames[WVE]+"|r"
  endif
  return s
endfunction

function Func1115 takes unit u,integer VWO returns nothing
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  local unit WFX=CirclesOfPower[WVE]
  local texttag tt
  local integer h
  local integer hu=GetHandleId(WFX)
  local integer id=GetPlayerId(GetOwningPlayer(WFX))
  if HaveSavedHandle(HY,hu,'cour')then
    set tt=LoadTextTagHandle(HY,hu,'cour')
  else
    set tt=CreateTextTag()
    call SetTextTagPosUnit(tt,WFX,-64)
    call SetTextTagColor(tt,20,133,20,255)
    call SetTextTagVelocity(tt,0,0)
    call SetTextTagVisibility(tt,IsNeutralsOrObserversOrAllies(GetOwningPlayer(WFX)))
    call SetTextTagPermanent(tt,true)
    call SaveTextTagHandle(HY,hu,'cour',tt)
  endif
  call SetTextTagText(tt,I2S(VWO),0.025)
  if VWO==0 then
    call DestroyTextTag(tt)
    call RemoveSavedHandle(HY,hu,'cour')
  endif
  set tt=null
  set WFX=null
endfunction

function Func1116 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit VZO=(LoadUnitHandle(HY,h,2))
  local integer c=GetTriggerEvalCount(t)
  local integer V_O
  local integer i=1
  local integer WVE
  local integer V0O=120
  if IsFlyingCourier(VZO)then
    set V0O=180
  endif
  set V_O=V0O-c
  call Func1115(VZO,V_O)
  loop
    if IsPlayerAlly(GetOwningPlayer(VZO),Sentinels[0])then
      set WVE=GetPlayerId(Sentinels[i])
    else
      set WVE=GetPlayerId(Scourges[i])
    endif
    if V_O==0 or GetPlayerAlliance(GetOwningPlayer(VZO),Player(WVE),ALLIANCE_SHARED_CONTROL)==false or LoadBoolean(MHT,GetHandleId(Player(WVE)),'00UI')then
      call LeaderboardDisplay(leaderboards001[WVE],false)
      if V_O==0 then
        if IsPlayerAlly(Sentinels[0],Player(WVE))then
          set CourierDead[GetPlayerId(Sentinels[0])]=false
        endif
        if IsPlayerAlly(Scourges[0],Player(WVE))then
          set CourierDead[GetPlayerId(Scourges[0])]=false
        endif
      endif
    elseif GetPlayerAlliance(GetOwningPlayer(VZO),Player(WVE),ALLIANCE_SHARED_CONTROL)and LoadBoolean(MHT,GetHandleId(Player(WVE)),'00UI')==false then
      if IsDead(udg_Hero[WVE])==false then
        call PlayerSetLeaderboard(Player(WVE),leaderboards001[WVE])
        call LeaderboardDisplay(leaderboards001[WVE],true)
        call LeaderboardSetLabel(leaderboards001[WVE],"		"+GetObjectName('n0LZ')+" "+I2S(V_O))
      endif
    endif
    set i=i+1
    exitwhen i>5
  endloop
  if V_O==2 then
    call SetUnitPosition(VZO,LoadReal(HY,h,6),LoadReal(HY,h,7))
  endif
  if V_O==0 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set VZO=null
  return false
endfunction

function Func1117 takes player p,integer g returns nothing
  set g=Func0559(p,g,false)
  call Func0558(p,g,udg_Hero[GetPlayerId(p)],false)
endfunction

function Func1118 takes unit u returns nothing
  local integer i=0
  local item it
  loop
    set it=UnitItemInSlot(u,i)
    if it!=null and Func0883(it)then
      call UnitRemoveItem(u,it)
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set it=null
endfunction

function ProvideExp takes integer xp,player p,unit E3X returns nothing
  if(xp>0 and p!=Neutrals and p!=null)then
    if IsUnitType(GetTriggerUnit(),UNIT_TYPE_SUMMONED)then
      set xp=R2I(xp*0.5)
    endif
    set unit013=E3X
    call Func1082()
    if(FirstOfGroup(group008)!=null)then
      set integer043=R2I(xp/CountUnitsInGroup(group008))
      call ForGroup(group008,function Func1077)
    endif
    set unit013=null
  endif
endfunction

function Func1120 takes integer xp,boolean UZX returns nothing
  if(xp>0)then
    if UZX then
      set unit013=ScourgeFountain
    else
      set unit013=SentFountain
    endif
    call Func1083()
    if(FirstOfGroup(group008)!=null)then
      set integer043=R2I(xp/CountUnitsInGroup(group008))
      call ForGroup(group008,function Func1077)
    endif
    set unit013=null
  endif
endfunction

function Func1121 takes nothing returns boolean
  local real V6O
  local real V7O
  local unit VZO=GetTriggerUnit()
  local integer i=1
  local integer V8O=175
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit E3X=LoadUnitHandle(HY,GetHandleId(VZO),'lstd')
  local real x=GetUnitX(VZO)
  local real y=GetUnitY(VZO)
  if IsFlyingCourier(VZO)==false then
    set V8O=150
  endif
  call Func1118(VZO)
  call Traffic_RegisterData("Courier"+I2S(GetPlayerId(GetOwningPlayer(VZO))),GetPlayerId(GetOwningPlayer(E3X)))
  call DisplayTimedTextToForceEx(AllPlayers,10.00,Func1114(GetOwningPlayer(VZO),E3X))
  call ProvideExp(349,GetOwningPlayer(LoadUnitHandle(HY,GetHandleId(VZO),'lstd')),LoadUnitHandle(HY,GetHandleId(VZO),'lstd'))
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(VZO))then
    call nPngMinimapEx(x,y,6,255,0,0,false)
  endif
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1116))
  call SaveUnitHandle(HY,h,2,(VZO))
  if IsPlayerAlly(GetOwningPlayer(VZO),Sentinels[0])and CourierDead[GetPlayerId(Sentinels[0])]==false then
    set CourierDead[GetPlayerId(Sentinels[0])]=true
    if E3X==null or IsScourge(GetOwningPlayer(E3X))then
      loop
        call Func1117(Scourges[i],V8O)
        set i=i+1
        exitwhen i>5
      endloop
    endif
  endif
  set i=1
  if IsPlayerAlly(GetOwningPlayer(VZO),Scourges[0])and CourierDead[GetPlayerId(Scourges[0])]==false then
    set CourierDead[GetPlayerId(Scourges[0])]=true
    if E3X==null or IsSentinel(GetOwningPlayer(E3X))then
      loop
        call Func1117(Sentinels[i],V8O)
        set i=i+1
        exitwhen i>5
      endloop
    endif
  endif
  if IsSentinel(GetOwningPlayer(VZO))then
    set V6O=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set V7O=GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    set V6O=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set V7O=GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
  call SaveReal(HY,h,6,V6O)
  call SaveReal(HY,h,7,V7O)
  call SaveReal(HY,GetHandleId(VZO),6,x)
  call SaveReal(HY,GetHandleId(VZO),7,y)
  call SetUnitX(VZO,V6O)
  call SetUnitY(VZO,V7O)
  call Func0431(x,y,0)
  set t=null
  set VZO=null
  set E3X=null
  return false
endfunction

function Func1122 takes integer i returns boolean
  return i==integer316 or i==integer317 or i==integer318 or i==integer320 or i==integer321 or i==integer322 or i==integer323 or i==integer324 or i==integer325 or i==integer326 or i==integer327 or i==integer328 or i==integer329 or i==integer330 or i==integer331 or i==integer333 or i==integer334 or i==integer335 or i==integer336 or i==integer337 or i==integer338 or i==integer340 or i==integer346 or i==integer348 or i==integer349 or i==integer350 or i==integer352 or i==integer353 or i==integer356 or i==integer357 or i==integer360 or i==integer361 or i==integer191
endfunction

function Func1123 takes nothing returns boolean
  local integer id
  if GetIssuedOrderId()>=852008 and GetIssuedOrderId()<=852013 then
    set id=GetIndex(UnitItemInSlot(GetTriggerUnit(),GetIssuedOrderId()-852008))
    if id!=integer195 and id!=integer194 and(GetOrderTargetItem()==null or(id!=MixedWardsOrbs and id!=MixedWardsSentry))and id!=integer278 and id!=integer207 and Func1122(id)==false then
      call Func0656(GetTriggerUnit())
    endif
  endif
  return false
endfunction

function Func1124 takes nothing returns nothing
  local unit SGE=GetTriggerUnit()
  local unit WXE=GetEventDamageSource()
  if GetEventDamage()>0 then
    call SaveUnitHandle(HY,GetHandleId(SGE),'lstd',WXE)
    if IsFakeDamage==0 and IsUnitType(WXE,UNIT_TYPE_MELEE_ATTACKER)and IsHeroUnitId(GetUnitTypeId(WXE))then
      call Func0648(WXE,SGE,10,GetEventDamage()*0.5,0.)
    endif
  endif
  set SGE=null
  set WXE=null
endfunction

function Func1125 takes nothing returns nothing
  local unit c=LoadUnitHandle(HY,GetHandleId(GetTriggeringTrigger()),0)
  local real d
  if IsDead(c)==false then
    call UnitRemoveAbility(c,'A00D')
    call UnitRemoveAbility(c,'A2HR')
    call UnitRemoveAbility(c,'A1VR')
    call UnitRemoveAbility(c,'A38Z')
    call UnitRemoveAbility(c,'A12V')
    call UnitRemoveAbility(c,'A05U')
    call UnitRemoveAbility(c,'AIms')
    call UnitRemoveAbility(c,'A2I9')
    call UnitRemoveAbility(c,'EUL1')
    call UnitRemoveAbility(c,'EUL2')
    call SetUnitState(c,UNIT_STATE_MANA,0)
    call UnitRemoveAbility(c,'AImb')
  endif
  set c=null
endfunction

function Func1126 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func1121))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddCondition(t,Condition(function Func1123))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1125))
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
  if trigger009==null then
    set trigger009=CreateTrigger()
    call TriggerAddCondition(trigger009,Condition(function Func1124))
  endif
  call TriggerRegisterUnitEvent(trigger009,u,EVENT_UNIT_DAMAGED)
endfunction

function InitNeutralDots takes nothing returns boolean
  local location l
  local integer i=1
  local integer id
  local integer UYE
  set l=GetRectCenter(NeutralsSpot_ScAncients_Spawn)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect025)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect026)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect027)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect028)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect029)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect030)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect031)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect032)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect033)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect049)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect051)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect052)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=GetRectCenter(rect054)
  call RemoveUnit(CreateUnitAtLoc(Neutrals,'u001',l,0))
  call RemoveLocation(l)
  set l=null
  call CleanTrigger(GetTriggeringTrigger())
  set CourierDead[GetPlayerId(Sentinels[0])]=false
  set CourierDead[GetPlayerId(Scourges[0])]=false
  loop
    set id=GetPlayerId(Sentinels[i])
    set UYE=GetPlayerId(Scourges[i])
    set leaderboards001[id]=CreateLeaderboard()
    set leaderboards001[UYE]=CreateLeaderboard()
    call PlayerSetLeaderboard(Sentinels[i],leaderboards001[id])
    call PlayerSetLeaderboard(Scourges[i],leaderboards001[UYE])
    call LeaderboardDisplay(leaderboards001[id],false)
    call LeaderboardDisplay(leaderboards001[UYE],false)
    call LeaderboardSetLabelBJ(leaderboards001[id]," ")
    call LeaderboardSetLabelBJ(leaderboards001[UYE]," ")
    set i=i+1
    exitwhen i>5
  endloop
  return false
endfunction

function Func1128 takes integer id returns integer
  if id=='I006' then
    return'I0RM'
  elseif id=='I007' then
    return'I0RN'
  elseif id=='I00K' then
    return'I0RO'
  elseif id=='I008' then
    return'I0RP'
  elseif id=='I00J' then
    return'I0RQ'
  elseif id=='I0QR' then
    return'I0RR'
  elseif id=='I0QT' then
    return'I0RS'
  elseif id=='I0V8' then
    return'I0V9'
  endif
  return id
endfunction

function Func1129 takes integer id returns integer
  if id=='I0RM' then
    return'I006'
  elseif id=='I0RN' then
    return'I007'
  elseif id=='I0RO' then
    return'I00K'
  elseif id=='I0RP' then
    return'I008'
  elseif id=='I0RQ' then
    return'I00J'
  elseif id=='I0RR' then
    return'I0QR'
  elseif id=='I0RS' then
    return'I0RT'
  elseif id=='I0V9' then
    return'I0V8'
  endif
  return id
endfunction

function IsFakeRune takes integer i returns boolean
  return i=='I0V9' or i=='I0RM' or i=='I0RN' or i=='I0RO' or i=='I0RP' or i=='I0RQ' or i=='I0RR' or i=='I0RS'
endfunction

function IsRune takes integer id returns boolean
  return id=='I0V8' or id=='I006' or id=='I008' or id=='I00J' or id=='I00K' or id=='I007' or id=='I0QR' or id=='I0RT'
endfunction

function Func1132 takes nothing returns nothing
  if GetWidgetLife(GetEnumItem())>0 and IsFakeRune(GetItemTypeId(GetEnumItem()))then
    call RemoveItem(GetEnumItem())
  endif
endfunction

function Func1133 takes nothing returns integer
  local integer i=GetRandomInt(1,6)
  loop
    exitwhen i!=integer362
    set i=GetRandomInt(1,6)
  endloop
  set integer362=i
  return i
endfunction

function Func1134 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  if GetTriggerEvalCount(t)==1 then
    call TriggerRegisterTimerEvent(t,0.02,false)
  endif
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if GetTriggerEvalCount(t)>2 then
    else
    endif
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  endif
  set t=null
endfunction

function Func1135 takes nothing returns boolean
  local real x
  local real y
  local real dx
  local real dy
  local real x1
  local real y1
  local real x2
  local real y2
  local integer i
  local item it
  set x1=GetLocationX(location015)
  set y1=GetLocationY(location015)
  set x2=GetLocationX(location016)
  set y2=GetLocationY(location016)
  if GetRandomInt(1,2)==1 then
    set x=x1
    set y=y1
    set dx=x2
    set dy=y2
  else
    set x=x2
    set y=y2
    set dx=x1
    set dy=y1
  endif
  call EnumItemsInRect(rect023,Condition(function ReturnTrue),function Func1132)
  call EnumItemsInRect(rect020,Condition(function ReturnTrue),function Func1132)
  if LoadBoolean(HY,GetHandleId(GetTriggeringTrigger()),0)==false then
    call SaveBoolean(HY,GetHandleId(GetTriggeringTrigger()),0,true)
    set it=CreateItem(Func1128('I0RS'),dx,dy)
    set it=CreateItem(Func1128('I0RS'),x,y)
  else
    set i=Func1133()
    if i==1 then
      call CreateItem(Func1128('I007'),x,y)
    elseif i==2 then
      call CreateItem(Func1128('I006'),x,y)
    elseif i==3 then
      call CreateItem(Func1128('I00K'),x,y)
    elseif i==4 then
      call CreateItem(Func1128('I008'),x,y)
    elseif i==5 then
      call CreateItem(Func1128('I00J'),x,y)
    elseif i==6 then
      call CreateItem(Func1128('I0V8'),x,y)
    endif
    call CreateItem(Func1128('I0QR'),dx,dy)
  endif
  if RuneCanSpawn then
    set RuneCanSpawn=false
    call CreateItem(Func1128('I007'),x+200*Cos(0.1),y+200*Sin(0.1))
    call CreateItem(Func1128('I006'),x+200*Cos(0.6),y+200*Sin(0.6))
    call CreateItem(Func1128('I00K'),x+200*Cos(1.2),y+200*Sin(1.2))
    call CreateItem(Func1128('I008'),x+200*Cos(1.8),y+200*Sin(1.8))
    call CreateItem(Func1128('I00J'),x+200*Cos(2.4),y+200*Sin(2.4))
    call CreateItem(Func1128('I0V8'),x+200*Cos(2.8),y+200*Sin(2.8))
  endif
  set it=null
  return true
endfunction

function Func1136 takes unit source returns nothing
  local real result
  local real ZEE
  if IsSentinel(GetOwningPlayer(source))then
    set result=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    set result=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
  call ImminentTriggeredPointOrder(source,851986,result,ZEE)
endfunction

function Func1137 takes item EKO,item H_X,item ELO,item EMO,item EPO,item EQO returns nothing
  local integer array cost
  local item array ESO
  local integer i=0
  local integer k
  if EKO==null then
    return
  endif
  set cost[1]=GetItemGoldCostById(Item_Real[GetIndex(EKO)])
  set ESO[1]=EKO
  set cost[2]=GetItemGoldCostById(Item_Real[GetIndex(H_X)])
  set ESO[2]=H_X
  set cost[3]=GetItemGoldCostById(Item_Real[GetIndex(ELO)])
  set ESO[3]=ELO
  set cost[4]=GetItemGoldCostById(Item_Real[GetIndex(EMO)])
  set ESO[4]=EMO
  set cost[5]=GetItemGoldCostById(Item_Real[GetIndex(EPO)])
  set ESO[5]=EPO
  set cost[6]=GetItemGoldCostById(Item_Real[GetIndex(EQO)])
  set ESO[6]=EQO
  loop
    exitwhen cost[1]>=cost[2]and cost[2]>=cost[3]and cost[3]>=cost[4]and cost[4]>=cost[5]and cost[5]>=cost[6]
    set k=1
    loop
      if cost[k]<cost[k+1]then
        set i=cost[k+1]
        set cost[k+1]=cost[k]
        set cost[k]=i
        set ESO[7]=ESO[k+1]
        set ESO[k+1]=ESO[k]
        set ESO[k]=ESO[7]
      endif
      set k=k+1
      exitwhen k>5
    endloop
  endloop
  call SaveItemHandle(TempHash,'itma',1,ESO[1])
  call SaveItemHandle(TempHash,'itma',2,ESO[2])
  call SaveItemHandle(TempHash,'itma',3,ESO[3])
  call SaveItemHandle(TempHash,'itma',4,ESO[4])
  call SaveItemHandle(TempHash,'itma',5,ESO[5])
  call SaveItemHandle(TempHash,'itma',6,ESO[6])
  set ESO[1]=null
  set ESO[2]=null
  set ESO[3]=null
  set ESO[4]=null
  set ESO[5]=null
  set ESO[6]=null
endfunction

function Func1138 takes unit VZO,unit SGE,boolean EUO,real x,real y returns nothing
  local integer i=0
  local item it=null
  local integer iid
  local integer EWO=0
  local player p=GetOwningPlayer(SGE)
  local item array ESO
  if EUO then
    set EWO=GetEmptyInventorySlots(SGE)
  endif
  set boolean024=true
  loop
    set it=UnitItemInSlot(VZO,i)
    set iid=GetIndex(it)
    if it!=null and GetItemPlayer(it)==p and Func0874(it)==false and(IsBottleWithRune(iid)==false)then
      if EUO and EWO>0 then
        set ESO[i]=it
      else
        call SetItemPosition(it,x,y)
      endif
    endif
    set i=i+1
    exitwhen i>5
  endloop
  if EUO and EWO>0 then
    call Func1137(ESO[0],ESO[1],ESO[2],ESO[3],ESO[4],ESO[5])
    set i=1
    loop
      exitwhen EWO<1 or i>6
      set EWO=EWO-1
      call UnitAddItem(SGE,LoadItemHandle(TempHash,'itma',i))
      set i=i+1
    endloop
    call FlushChildHashtable(TempHash,'itma')
  endif
  set it=null
  set boolean024=false
endfunction

function Func1139 takes nothing returns nothing
  local item i=GetEnumItem()
  if GetWidgetLife(i)>0 and GetItemPlayer(i)==player013 and IsItemVisible(i)then
    if GetItemGoldCostById(Item_Real[GetIndex(i)])>=LoadInteger(TempHash,'itdr','maxp')then
      call SaveItemHandle(TempHash,'itdr','maxp',i)
      call SaveInteger(TempHash,'itdr','maxp',GetItemGoldCostById(Item_Real[GetIndex(i)]))
    endif
  endif
  set i=null
endfunction

function Func1140 takes nothing returns nothing
  local item AVX=GetEnumItem()
  if GetWidgetLife(AVX)>0 and GetItemPlayer(AVX)==player013 and IsItemVisible(AVX)then
    call UnitAddItem(unit158,AVX)
  endif
  set AVX=null
endfunction

function Func1141 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,(h),2))
  local unit VZO=(LoadUnitHandle(HY,(h),92))
  local player p=(LoadPlayerHandle(HY,(h),54))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local rect r=Rect(x-300,y-300,x+300,y+300)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>9 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set player013=p
    set unit157=SGE
    set unit158=VZO
    call EnumItemsInRect(r,Condition(function ReturnTrue),function Func1140)
  else
    if GetTriggerEvalCount(t)==1 then
      call Func1138(VZO,SGE,false,x,y)
    endif
    set player013=p
    set unit157=SGE
    set integer433=0
    call FlushChildHashtable(TempHash,'itdr')
    call EnumItemsInRect(r,Condition(function ReturnTrue),function Func1139)
    if HaveSavedHandle(TempHash,'itdr','maxp')then
      call UnitAddItem(SGE,LoadItemHandle(TempHash,'itdr','maxp'))
    endif
    call FlushChildHashtable(TempHash,'itdr')
  endif
  call RemoveRect(r)
  set t=null
  set SGE=null
  set VZO=null
  set r=null
  return false
endfunction

function Func1142 takes unit VZO,unit SGE returns nothing
  local player p=GetOwningPlayer(SGE)
  local item it
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetUnitX(VZO)
  local real y=GetUnitY(VZO)
  call Func0431(x,y,0.05)
  if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)then
    set x=GetUnitX(SGE)
    set y=GetUnitY(SGE)
  endif
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterTimerEvent(t,0.01,true)
  call TriggerAddCondition(t,Condition(function Func1141))
  call SaveUnitHandle(HY,(h),2,(SGE))
  call SaveUnitHandle(HY,(h),92,(VZO))
  call SavePlayerHandle(HY,(h),54,(p))
  call SaveReal(HY,(h),6,((x)*1.0))
  call SaveReal(HY,(h),7,((y)*1.0))
  call Func1138(VZO,SGE,true,x,y)
  set t=null
  set it=null
endfunction

function Func1143 takes unit u returns boolean
  local integer i=GetUnitCurrentOrder(u)
  return(i==0)or(i==851973)or(i==851975)or(i==851987)or(i==851993)
endfunction

function Func1144 takes trigger t returns nothing
  local integer h=GetHandleId(t)
  local unit VZO=(LoadUnitHandle(HY,(h),92))
  local unit SGE=(LoadUnitHandle(HY,(h),2))
  local real tx
  local real ty
  local real ILX
  local real ms
  local real a
  local real E3O
  local real E4O
  local real E5O
  local real E6O
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  if ModuloInteger(GetTriggerEvalCount(t),3)==1 and IsUnitSelected(VZO,LocalPlayer)and IsUnitAlly(VZO,LocalPlayer)then
    call nPngMinimapEx(x,y,0.2,255,255,0,false)
  endif
  if(Func1143(SGE)==false)then
    set tx=GetUnitX(SGE)
    set ty=GetUnitY(SGE)
    set E3O=(LoadReal(HY,(h),677))
    set E4O=(LoadReal(HY,(h),678))
    call SaveReal(HY,(h),677,((tx)*1.0))
    call SaveReal(HY,(h),678,((ty)*1.0))
    set a=Atan2(ty-E4O,tx-E3O)
    set ILX=SquareRoot((tx-E3O)*(tx-E3O)+(ty-E4O)*(ty-E4O))/0.2
    set ms=GetUnitMoveSpeed(VZO)
    set E5O=DistanceBetweenXY(GetUnitX(SGE),GetUnitY(SGE),GetUnitX(VZO),GetUnitY(VZO))
    set E6O=RAbsBJ(a*bj_RADTODEG-GetUnitFacing(VZO))
    if(E5O<ms-ILX and ms>ILX)or(E5O<RMaxBJ(ms,ILX)and E6O>=90)then
    else
      set x=tx+ILX*Cos(a)
      set y=ty+ILX*Sin(a)
    endif
  endif
  call SaveInteger(HY,(h),679,1)
  call ImminentTriggeredPointOrder(VZO,851986,x,y)
  set VZO=null
  set SGE=null
  set t=null
endfunction

function RemoveSavedI takes hashtable h,integer pk,integer ck returns boolean
  call RemoveSavedInteger(h,pk,ck)
  return true
endfunction

function Func1146 takes unit VZO,unit E9O,boolean XVO,integer XEO returns boolean
  local integer i=0
  local item it
  local integer k=0
  local integer XXO=0
  local integer j
  local player p=GetOwningPlayer(E9O)
  local integer XOO
  local integer XRO
  local string s
  local boolean b=false
  set boolean024=true
  call FlushChildHashtable(HY,'ITEM')
  loop
    set it=UnitItemInSlot(VZO,i)
    if it!=null and(GetItemPlayer(it)==p or GetPlayerSlotState(GetItemPlayer(it))==PLAYER_SLOT_STATE_LEFT)then
      call SaveItemHandle(HY,'ITEM',k,it)
      call SaveInteger(HY,'ITEM',k,GetIndex(it))
      set k=k+1
    endif
    set it=UnitItemInSlot(E9O,i)
    if it!=null and(GetItemPlayer(it)==p or GetPlayerSlotState(GetItemPlayer(it))==PLAYER_SLOT_STATE_LEFT)then
      call SaveItemHandle(HY,'ITEM',k,it)
      call SaveInteger(HY,'ITEM',k,GetIndex(it))
      set k=k+1
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set it=null
  if XVO==false and k<=6 then
    return false
  endif
  set XXO=k
  set k=1
  if XVO then
    set k=XEO
  endif
  loop
    call SaveInteger(HY,'ITEM',51,Rec_Comp_1[k])
    call SaveInteger(HY,'ITEM',52,Rec_Comp_2[k])
    call SaveInteger(HY,'ITEM',53,Rec_Comp_3[k])
    call SaveInteger(HY,'ITEM',54,Rec_Comp_4[k])
    call SaveInteger(HY,'ITEM',55,Rec_Comp_5[k])
    set XRO=0
    set XOO=0
    set i=0
    if Rec_Comp_1[k]!=0 then
      set XOO=XOO+1
    endif
    if Rec_Comp_2[k]!=0 then
      set XOO=XOO+1
    endif
    if Rec_Comp_3[k]!=0 then
      set XOO=XOO+1
    endif
    if Rec_Comp_4[k]!=0 then
      set XOO=XOO+1
    endif
    if Rec_Comp_5[k]!=0 then
      set XOO=XOO+1
    endif
    loop
      set j=LoadInteger(HY,'ITEM',i)
      if j>0 and LoadBoolean(HY,'ITEM',i)!=true then
        if(j==LoadInteger(HY,'ITEM',51)and RemoveSavedI(HY,'ITEM',51))or(j==LoadInteger(HY,'ITEM',52)and RemoveSavedI(HY,'ITEM',52))or(j==LoadInteger(HY,'ITEM',53)and RemoveSavedI(HY,'ITEM',53))or(j==LoadInteger(HY,'ITEM',54)and RemoveSavedI(HY,'ITEM',54))or(j==LoadInteger(HY,'ITEM',55)and RemoveSavedI(HY,'ITEM',55))then
          call SaveItemHandle(HY,'ITEM',100+XRO,LoadItemHandle(HY,'ITEM',i))
          call SaveBoolean(HY,'ITEM',i,true)
          call SaveInteger(HY,'ITEM',200+XRO,i)
          set XRO=XRO+1
        endif
      endif
      set i=i+1
      exitwhen i>=XXO
    endloop
    if XRO>0 then
      set i=100
      loop
        if XRO==XOO then
          set it=LoadItemHandle(HY,'ITEM',i)
          if integers104[k]==integer290 then
            call SaveInteger(HY,'ITEM',300,12)
          elseif integers104[k]==integer230 then
            call SaveInteger(HY,'ITEM',300,8)
          elseif integers104[k]==integer180 then
            call SaveInteger(HY,'ITEM',300,6)
          elseif integers104[k]==integer231 then
            call SaveInteger(HY,'ITEM',300,8)
          elseif integers104[k]==integer300 then
            if GetIndex(it)==integer176 then
              call SaveInteger(HY,'ITEM',300,GetItemCharges(it))
            endif
          endif
          call RemoveItem(it)
        else
          call RemoveSavedBoolean(HY,'ITEM',LoadInteger(HY,'ITEM',100+i))
        endif
        call RemoveSavedHandle(HY,'ITEM',i)
        set i=i+1
        exitwhen HaveSavedHandle(HY,'ITEM',i)==false
      endloop
    endif
    if XRO==XOO then
      if XVO==false then
        set it=UnitAddItemById(E9O,Item_Real[integers104[k]])
        if integers104[k]==integer290 or integers104[k]==integer180 or integers104[k]==integer300 or integers104[k]==integer230 or integers104[k]==integer231 then
          if HaveSavedInteger(HY,'ITEM',300)then
            call SetItemCharges(it,LoadInteger(HY,'ITEM',300))
            call RemoveSavedInteger(HY,'ITEM',300)
          endif
        endif
        call SetItemPlayer(it,p,true)
        call SetItemUserData(it,0)
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",E9O,"origin"))
        set b=true
        set it=null
      else
        set it=CreateItem(Item_Dummy[integers104[k]],GetUnitX(E9O),GetUnitY(E9O))
        if integers104[k]==integer290 or integers104[k]==integer180 or integers104[k]==integer300 or integers104[k]==integer230 or integers104[k]==integer231 then
          if HaveSavedInteger(HY,'ITEM',300)then
            call SetItemCharges(it,LoadInteger(HY,'ITEM',300))
            call RemoveSavedInteger(HY,'ITEM',300)
          endif
        endif
        call SetItemPlayer(it,p,true)
        call SetItemUserData(it,0)
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",E9O,"origin"))
        call UnitAddItem(E9O,it)
        set b=true
        set it=null
      endif
    endif
    exitwhen k>=integer040 or XVO
    set k=k+1
  endloop
  set boolean024=false
  return b
endfunction

function Func1147 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit VZO=(LoadUnitHandle(HY,h,92))
  local unit SGE=(LoadUnitHandle(HY,h,2))
  local integer XAO=0
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
    call Func1136(VZO)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
    if(LoadInteger(HY,h,679))==1 then
      call SaveInteger(HY,h,679,0)
    elseif GetIssuedOrderId()!=852100 and GetIssuedOrderId()!=851986 and GetIssuedOrderId()!=851973 and GetIssuedOrderId()!=852090 and GetIssuedOrderId()!=852663 then
      call echo("this "+I2S(GetIssuedOrderId()))
      call CleanTrigger(t)
    endif
  else
    if DistanceBetweenUnits(VZO,SGE)<350 then
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      if IsTerrainPathable(GetUnitX(VZO),GetUnitY(VZO),PATHING_TYPE_WALKABILITY)or IsTerrainPathable(GetUnitX(SGE),GetUnitY(SGE),PATHING_TYPE_WALKABILITY)then
        set XAO=1
      endif
      if 12-GetEmptyInventorySlots(SGE)-GetEmptyInventorySlots(VZO)+XAO>7 then
        if Func1146(VZO,SGE,false,0)then
          call Func1146(VZO,SGE,false,0)
        endif
      endif
      call Func1142(VZO,SGE)
      call Func1136(VZO)
    else
      call Func1144(t)
    endif
  endif
  set t=null
  set VZO=null
  set SGE=null
  return false
endfunction

function Func1148 takes unit to,boolean XBO returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit VZO=GetSellingUnit()
  local integer QIE=(LoadInteger(HY,(GetHandleId(VZO)),8000))
  if to!=null then
    if to!=(LoadUnitHandle(HY,(GetHandleId(VZO)),(8002+QIE)))and XBO then
      set QIE=QIE+1
      call SaveInteger(HY,(GetHandleId(VZO)),8000,(QIE))
      call SaveUnitHandle(HY,(GetHandleId(VZO)),(8002+QIE),(to))
    endif
    call SaveReal(HY,h,677,((GetUnitX(to))*1.0))
    call SaveReal(HY,h,678,((GetUnitY(to))*1.0))
    call IssueTargetOrder(VZO,"move",to)
    call TriggerRegisterDeathEvent(t,VZO)
    call TriggerRegisterUnitEvent(t,to,EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t,VZO,EVENT_UNIT_ISSUED_ORDER)
    call TriggerRegisterUnitEvent(t,VZO,EVENT_UNIT_ISSUED_TARGET_ORDER)
    call TriggerRegisterUnitEvent(t,VZO,EVENT_UNIT_ISSUED_POINT_ORDER)
    call TriggerRegisterTimerEvent(t,0.2,true)
    call TriggerAddCondition(t,Condition(function Func1147))
    call SaveUnitHandle(HY,h,2,(to))
    call SaveUnitHandle(HY,h,92,(VZO))
  endif
  set t=null
  set VZO=null
endfunction

function Func1149 takes nothing returns nothing
  local item AVX=GetEnumItem()
  local unit source=unit160
  local player whichPlayer=GetOwningPlayer(source)
  local integer ZAE=GetPlayerId(whichPlayer)
  if GetWidgetLife(AVX)>0 and GetItemPlayer(AVX)==whichPlayer and IsItemVisible(AVX)then
    call SetItemPosition(AVX,ItemSpawnX[ZAE],ItemSpawnY[ZAE])
    call UnitAddItem(unit159,AVX)
  endif
  set AVX=null
  set source=null
  set whichPlayer=null
endfunction

function Func1150 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),53))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  set unit160=source
  set unit159=RCX
  if IsSentinel(GetOwningPlayer(unit160))then
    call EnumItemsInRect(SentFountainForItemsRect,Condition(function ReturnTrue),function Func1149)
  else
    call EnumItemsInRect(ScrgFountainForItemsRect,Condition(function ReturnTrue),function Func1149)
  endif
  if GetTriggerEvalCount(RBX)==3 then
    call KillUnit(source)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func1151 takes unit VZO returns nothing
  local unit d=GetSoldUnit()
  local integer i=0
  local item it
  local integer WVE=GetPlayerId(GetOwningPlayer(d))
  local region T1X=CreateRegion()
  local trigger t
  local integer h
  local unit XGO=GetSellingUnit()
  if IsSentinel(GetOwningPlayer(d))then
    call RegionAddRect(T1X,SentFountainForItemsRect)
  else
    call RegionAddRect(T1X,ScrgFountainForItemsRect)
  endif
  if IsUnitInRegion(T1X,XGO)then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call IssueImmediateOrderByIdExFunc(CirclesOfPower[WVE],852246)
    call TriggerRegisterTimerEvent(t,0.05,true)
    call TriggerAddCondition(t,Condition(function Func1150))
    call SaveUnitHandle(HY,h,53,(d))
    call SaveUnitHandle(HY,h,2,(XGO))
    loop
      exitwhen i>5
      set it=UnitItemInSlot(XGO,i)
      if IsBottleWithRune(GetIndex(it))==false and GetIndex(it)!=Aegis and Func0874(it)==false then
        call UnitRemoveItemFromSlot(XGO,i)
        if IsUnitInRegion(T1X,XGO)and IsPlayerAlly(GetItemPlayer(it),GetOwningPlayer(XGO))then
          set WVE=GetPlayerId(GetItemPlayer(it))
          call SetItemPosition(it,ItemSpawnX[WVE],ItemSpawnY[WVE])
        endif
      endif
      set i=i+1
    endloop
    set i=0
    set WVE=GetPlayerId(GetOwningPlayer(d))
    set XGO=CirclesOfPower[WVE]
    loop
      exitwhen i>5
      set it=UnitItemInSlot(XGO,i)
      if IsBottleWithRune(GetIndex(it))==false and GetIndex(it)!=Aegis and Func0874(it)==false then
        call UnitRemoveItemFromSlot(XGO,i)
        if IsUnitInRegion(T1X,XGO)and IsPlayerAlly(GetItemPlayer(it),GetOwningPlayer(XGO))then
          set WVE=GetPlayerId(GetItemPlayer(it))
          call SetItemPosition(it,ItemSpawnX[WVE],ItemSpawnY[WVE])
        endif
      endif
      set i=i+1
    endloop
  endif
  call RemoveRegion(T1X)
  set d=null
  set T1X=null
  set it=null
  set t=null
  set XGO=null
endfunction

function Func1152 takes unit u returns string
  local string s=GetObjectName('n0FO')
  set s=str_replace(s,"$hero",udg_Colors[GetPlayerId(GetOwningPlayer(u))]+GetUnitName(u)+"|r|c00ff0000")
  return s
endfunction

function Func1153 takes unit u returns boolean
  if GetOwningPlayer(u)!=LocalPlayer or IsL1ch then
    call DisplayTimedTextToPlayer(LocalPlayer,0,0,15," ")
    call DisplayTimedTextToPlayer(LocalPlayer,0,0,15,Func1152(u)+"|r")
    call DisplayTimedTextToPlayer(LocalPlayer,0,0,15," ")
  endif
  return false
endfunction

function Func1154 takes nothing returns nothing
  local unit u=GetSoldUnit()
  local integer id=GetUnitTypeId(u)
  local player p=GetOwningPlayer(u)
  local integer WVE=GetPlayerId(p)
  if id=='h085' then
    if udg_Hero[WVE]!=null and IsDead(udg_Hero[WVE])==false then
      call Func1148(udg_Hero[WVE],true)
    endif
    call KillUnit(u)
  elseif id=='h0BV' then
    if udg_Hero[WVE]!=null then
      call Func1151(udg_Hero[WVE])
    endif
    call KillUnit(u)
  elseif id=='h0DE' then
    if udg_Hero[WVE]!=null then
      call Func1148((LoadUnitHandle(HY,(GetHandleId(GetSellingUnit())),(8002+(LoadInteger(HY,(GetHandleId(GetSellingUnit())),8000))-1))),false)
    endif
    call KillUnit(u)
  elseif Func0926(id)then
    if udg_Hero[WVE]!=null and IsDead(udg_Hero[WVE])and p==GetOwningPlayer(GetSellingUnit())and LoadInteger(HY,GetHandleId(udg_Hero[WVE]),4304)!=1 and booleans020[GetPlayerId(p)]==false then
      call Func1153(udg_Hero[WVE])
      set boolean119=true
      call ReviveHero(udg_Hero[WVE],GetUnitX(u),GetUnitY(u),true)
      call PlaySoundBJ(bj_questDiscoveredSound)
      set boolean119=false
      call SetUnitState(udg_Hero[WVE],UNIT_STATE_MANA,10000)
      set ReliableGold[WVE]=IMaxBJ(0,ReliableGold[WVE]-BuybackUnitCost[DefineBuybackUnitIndex(GetOwningPlayer(GetSellingUnit()),GetHeroLevel(udg_Hero[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
      call Func0932(p)
    else
      call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+BuybackUnitCost[DefineBuybackUnitIndex(GetOwningPlayer(GetSellingUnit()),GetHeroLevel(udg_Hero[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
      if booleans020[GetPlayerId(p)]then
        call Error(p,GetObjectName('n0N4'))
      endif
    endif
    call KillUnit(u)
  endif
  set u=null
endfunction

function AnnounceSomeItems takes player p,integer id returns nothing
  local integer i=GetPlayerId(p)
  if IsPlayerAlly(LocalPlayer,p)then
    if id==integer239 then
      call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[i]+(PlayerNames[i])+"|r |c00ffff00"+GetObjectName('n0LX')+"|r")
    elseif id==integer265 then
      call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[i]+(PlayerNames[i])+"|r |c00ffff00"+GetObjectName('n0LY')+"|r")
    elseif id==KelensDagger then
      call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[i]+(PlayerNames[i])+"|r |c00ffff00"+GetObjectName('TX02')+"|r")
    endif
  endif
endfunction

function Func1156 takes player whichPlayer,unit source,integer ZAE,integer QIE,integer ZBE,integer ZCE,integer JUX,integer XPO,integer XQO returns nothing
  local item AVX
  call DisableTrigger(trigger039)
  if QIE>0 then
    set AVX=UnitItemInSlot(source,0)
    call Func0888(AVX)
  endif
  if ZBE>0 then
    set AVX=UnitItemInSlot(source,1)
    call Func0888(AVX)
  endif
  if ZCE>0 then
    set AVX=UnitItemInSlot(source,2)
    call Func0888(AVX)
  endif
  if JUX>0 then
    set AVX=UnitItemInSlot(source,3)
    call Func0888(AVX)
  endif
  if XPO>0 then
    set AVX=UnitItemInSlot(source,4)
    call Func0888(AVX)
  endif
  if XQO>0 then
    set AVX=UnitItemInSlot(source,5)
    call Func0888(AVX)
  endif
  set AVX=UnitAddItemById(source,Item_Real[ZAE])
  call SetItemPlayer(AVX,whichPlayer,true)
  call SetItemUserData(AVX,0)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",source,"origin"))
  if GetIndex(AVX)==integer290 then
    call SetItemCharges(AVX,12)
  elseif GetIndex(AVX)==integer180 then
    call SetItemCharges(AVX,6)
  elseif GetIndex(AVX)==integer230 or GetIndex(AVX)==integer231 then
    call SetItemCharges(AVX,8)
  endif
  call EnableTrigger(trigger039)
  call AnnounceSomeItems(whichPlayer,ZAE)
  set AVX=null
endfunction

function Func1157 takes player p,item it returns boolean
  if it==null or p==null then
    return false
  elseif boolean109 then
    return true
  else
    if GetPlayerSlotState(GetItemPlayer(it))==PLAYER_SLOT_STATE_LEFT then
      return true
    else
      return GetItemPlayer(it)==p
    endif
  endif
  return false
endfunction

function Func1158 takes player p,unit u,integer XUO returns boolean
  local integer i
  local integer x
  local integer y
  local integer array XWO
  local boolean array XYO
  local integer array XZO
  local boolean array X_O
  local boolean array X0O
  local integer array result
  local player X1O
  local integer X2O=1
  local integer k
  local player array X3O
  local integer m
  local item X4O
  local item X5O
  local item X6O
  local item X7O
  local item X8O
  local item X9O
  local player OVO
  local player OEO
  local player OXO
  local player OOO
  local player ORO
  local player OIO
  local integer OAO
  local integer ONO
  local integer OBO
  local integer OCO
  local integer ODO
  local integer OFO
  local integer OGO
  local integer OHO
  local integer OJO
  local integer OKO
  local integer OLO
  local integer OMO
  local boolean OPO=false
  local boolean OQO=true
  set X4O=UnitItemInSlot(u,0)
  set X5O=UnitItemInSlot(u,1)
  set X6O=UnitItemInSlot(u,2)
  set X7O=UnitItemInSlot(u,3)
  set X8O=UnitItemInSlot(u,4)
  set X9O=UnitItemInSlot(u,5)
  set OVO=GetItemPlayer(X4O)
  set OEO=GetItemPlayer(X5O)
  set OXO=GetItemPlayer(X6O)
  set OOO=GetItemPlayer(X7O)
  set ORO=GetItemPlayer(X8O)
  set OIO=GetItemPlayer(X9O)
  set OAO=GetItemUserData(X4O)
  set ONO=GetItemUserData(X5O)
  set OBO=GetItemUserData(X6O)
  set OCO=GetItemUserData(X7O)
  set ODO=GetItemUserData(X8O)
  set OFO=GetItemUserData(X9O)
  set OGO=GetIndex(X4O)
  set OHO=GetIndex(X5O)
  set OJO=GetIndex(X6O)
  set OKO=GetIndex(X7O)
  set OLO=GetIndex(X8O)
  set OMO=GetIndex(X9O)
  set boolean024=true
  if(GetPlayerSlotState(p)==PLAYER_SLOT_STATE_LEFT)then
    set X2O=5
    set OPO=true
  endif
  set X3O[1]=p
  if OPO then
    set k=2
    set m=1
    loop
      exitwhen k>X2O
      if IsSentinel(p)then
        if p!=Sentinels[m]then
          set X3O[k]=Sentinels[m]
          set k=k+1
        endif
      else
        if p!=Scourges[m]then
          set X3O[k]=Scourges[m]
          set k=k+1
        endif
      endif
      set m=m+1
    endloop
  endif
  set k=1
  loop
    exitwhen k>X2O
    set X1O=X3O[k]
    if X4O!=null and OAO==1 and Func1157(X1O,X4O)then
      set XWO[1]=OGO
    else
      set XWO[1]=0
    endif
    if X5O!=null and ONO==1 and Func1157(X1O,X5O)then
      set XWO[2]=OHO
    else
      set XWO[2]=0
    endif
    if X6O!=null and OBO==1 and Func1157(X1O,X6O)then
      set XWO[3]=OJO
    else
      set XWO[3]=0
    endif
    if X7O!=null and OCO==1 and Func1157(X1O,X7O)then
      set XWO[4]=OKO
    else
      set XWO[4]=0
    endif
    if X8O!=null and ODO==1 and Func1157(X1O,X8O)then
      set XWO[5]=OLO
    else
      set XWO[5]=0
    endif
    if X9O!=null and OFO==1 and Func1157(X1O,X9O)then
      set XWO[6]=OMO
    else
      set XWO[6]=0
    endif
    set XWO[0]=XUO
    set i=1
    loop
      set XZO[0]=Rec_Comp_1[i]
      set XZO[1]=Rec_Comp_2[i]
      set XZO[2]=Rec_Comp_3[i]
      set XZO[3]=Rec_Comp_4[i]
      set XZO[4]=Rec_Comp_5[i]
      if XUO==XZO[0]or XUO==XZO[1]or XUO==XZO[2]or XUO==XZO[3]or XUO==XZO[4]then
        if OQO then
          set X_O[0]=true
          set X_O[1]=true
          set X_O[2]=true
          set X_O[3]=true
          set X_O[4]=true
          set X_O[5]=true
          set X_O[6]=true
          set XYO[0]=true
          set XYO[1]=true
          set XYO[2]=true
          set XYO[3]=true
          set XYO[4]=true
          set XYO[5]=true
          set XYO[6]=true
          set result[0]=0
          set result[1]=0
          set result[2]=0
          set result[3]=0
          set result[4]=0
          set result[5]=0
          set result[6]=0
          set OQO=false
        endif
        set X0O[0]=false
        set X0O[1]=false
        set X0O[2]=false
        set X0O[3]=false
        set X0O[4]=false
        set x=0
        loop
          exitwhen x==5
          if XZO[x]==0 then
            set X0O[x]=true
          else
            set y=0
            loop
              exitwhen y==7
              if XWO[y]==XZO[x]and XYO[y]and X_O[x]then
                set XYO[y]=false
                set X_O[x]=false
                set X0O[x]=true
                set result[y]=1
                set y=7
                set OQO=true
              else
                set y=y+1
              endif
            endloop
          endif
          if X0O[x]then
            set x=x+1
          else
            set x=5
          endif
        endloop
        if X0O[0]and X0O[1]and X0O[2]and X0O[3]and X0O[4]then
          call Func1156(X1O,u,integers104[i],result[1],result[2],result[3],result[4],result[5],result[6])
          set i=integer040+2
        else
          set i=i+1
        endif
      else
        set i=i+1
      endif
      exitwhen i>integer040
    endloop
    set boolean101=result[0]==1
    if i==(integer040+2)then
      set X4O=null
      set X5O=null
      set X6O=null
      set X7O=null
      set X8O=null
      set X9O=null
      set boolean024=false
      return true
    endif
    set k=k+1
  endloop
  set X4O=null
  set X5O=null
  set X6O=null
  set X7O=null
  set X8O=null
  set X9O=null
  set boolean024=false
  return false
endfunction

function AttemptFuse takes player whichPlayer,unit source,integer ZAE returns boolean
  local integer QIE=1
  local boolean b
  if LoadBoolean(hashtable014,Item_Real[ZAE],'cmbo')==false then
    set boolean101=false
    return false
  endif
  set boolean101=false
  set b=Func1158(whichPlayer,source,ZAE)
  return b
endfunction

function Func1160 takes nothing returns nothing
  local integer i=1
  loop
    call SaveBoolean(hashtable014,Item_Real[Rec_Comp_1[i]],'cmbo',true)
    call SaveBoolean(hashtable014,Item_Real[Rec_Comp_2[i]],'cmbo',true)
    call SaveBoolean(hashtable014,Item_Real[Rec_Comp_3[i]],'cmbo',true)
    call SaveBoolean(hashtable014,Item_Real[Rec_Comp_4[i]],'cmbo',true)
    call SaveBoolean(hashtable014,Item_Real[Rec_Comp_5[i]],'cmbo',true)
    set i=i+1
    exitwhen i>integer040
  endloop
endfunction

function Func1161 takes nothing returns boolean
  if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsDead(GetFilterUnit())==false and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!='ncop' and GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(tt_unit1),ALLIANCE_SHARED_CONTROL)and GetOwningPlayer(tt_unit1)!=GetOwningPlayer(GetFilterUnit())and IsUnitIllusion(GetFilterUnit())==false and IsNotHeroID(GetFilterUnit())==false and NonHeroId(GetFilterUnit())==false then
    if IsCourier(GetFilterUnit())then
      set integer089=integer089+1
      set tt_unit3=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func1162 takes nothing returns boolean
  if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(tt_unit1))and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!='ncop' and IsUnitIllusion(GetFilterUnit())==false and IsDead(GetFilterUnit())==false and IsNotHeroID(GetFilterUnit())==false then
    if GetOwningPlayer(tt_unit1)==GetOwningPlayer(GetFilterUnit())then
      if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)then
        if GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 then
          set tt_unit3=GetFilterUnit()
        endif
      elseif IsUnitType(tt_unit3,UNIT_TYPE_HERO)==false then
        set tt_unit3=GetFilterUnit()
      endif
    endif
  endif
  return false
endfunction

function FindDestination takes unit u,integer OZO returns unit
  local group g=GetAvailableGroup()
  set tt_unit1=u
  set tt_unit3=null
  call GroupEnumUnitsInRange(g,GetUnitX(tt_unit4),GetUnitY(tt_unit4),1300+OZO,Condition(function Func1162))
  if tt_unit3==null then
    set integer089=0
    call GroupEnumUnitsInRange(g,GetUnitX(tt_unit4),GetUnitY(tt_unit4),1100+OZO,Condition(function Func1161))
    if integer089>1 then
      set tt_unit3=null
    endif
  endif
  if tt_unit3==null then
    if Func1078(u,CirclesOfPower[GetPlayerId(GetOwningPlayer(u))])<1000000 then
      set tt_unit3=CirclesOfPower[GetPlayerId(GetOwningPlayer(u))]
    endif
  endif
  call KillGroup(g)
  return tt_unit3
endfunction

function Func1164 takes unit u returns boolean
  return u==unit041 or u==unit042 or u==unit043 or u==unit044 or u==unit046 or u==unit047 or u==unit048 or u==unit049 or u==unit050 or u==unit051 or u==unit039 or u==unit040 or u==unit045
endfunction

function Func1165 takes unit u returns boolean
  return u==unit088 or u==unit089 or u==unit090 or u==unit091 or u==unit093 or u==unit094 or u==unit095 or u==unit096 or u==unit097 or u==unit098 or u==unit086 or u==unit087 or u==unit092
endfunction

function IsSideShopTop takes unit u returns boolean
  return u==GoblinShop_Top or u==GoblinMerch_Top or u==FurbolgHut_Top
endfunction

function IsSideShopBot takes unit u returns boolean
  return u==GoblinShop_Bot or u==GoblinMerch_Bot or u==FurbolgHut_Bot
endfunction

function CheckFuse takes player p,unit u,unit sellingUnit,integer id,real x,real y,integer charges,integer userdata returns nothing
  local unit d
  local item it
  set tt_unit4=sellingUnit
  if id<=0 then
    return
  endif
  if GetUnitPointValue(u)==200 then
    set d=FindDestination(u,0)
    if d==null then
      set d=FindDestination(u,300)
    endif
  else
    set d=u
  endif
  if d==null or AttemptFuse(p,d,FindRealIndexId(id))==false or boolean101==false then
    if IsIndexIdCharged(FindRealIndexId(id))then
      if d==null or GetEmptyInventorySlots(d)==0 then
        call DelayedItemCreation(Item_Dummy[id],x,y,p,true,charges)
      else
        set it=UnitAddItemById(d,Item_Real[id])
        call SetItemCharges(it,charges)
        call SetItemPlayer(it,p,true)
        call SetItemUserData(it,userdata)
      endif
    elseif IsIndexIdConsumable(FindRealIndexId(id))then
      if d==null or(GetEmptyInventorySlots(d)==0 and(FindItemOfType(d,Item_Real[id])==null and IsItemWardId(id)==false))then
        call DelayedItemCreation(Item_Dummy[id],x,y,p,true,GetDefaultChargesItem(id))
      else
        set it=CreateItem(Item_Dummy[id],x,y)
        call SetItemPlayer(it,p,true)
        call SetItemUserData(it,userdata)
        call SetItemCharges(it,GetDefaultChargesItem(id))
        call UnitAddItem(d,it)
      endif
    else
      if GetEmptyInventorySlots(d)==0 or d==null then
        if sellingUnit==SecretShopSent or sellingUnit==SecretShopScrg or IsSideShopTop(sellingUnit)or IsSideShopBot(sellingUnit)then
          if d!=null then
            call Error(p,GetObjectName('n02O'))
          else
            call Error(p,GetObjectName('TX2Y'))
          endif
          call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+GetItemGoldCostById(Item_Real[id]))
        else
          call DelayedItemCreation(Item_Dummy[id],x,y,p,false,0)
        endif
      else
        if id==RecipeFlyingCourier and GetBestCourier(p)!=null then
          set it=UnitAddItemById(GetBestCourier(p),Item_Real[id])
        else
          set it=UnitAddItemById(d,Item_Real[id])
          call SetItemPlayer(it,p,true)
          call SetItemUserData(it,0)
        endif
      endif
    endif
  else
    if IsUnitType(d,UNIT_TYPE_HERO)then
      if userdata==0 then
        call Traffic_RegisterData("PUI_"+I2S(GetPlayerId(GetOwningPlayer(d))),Item_Real[FindRealIndexId(id)])
      endif
    endif
  endif
  set d=null
  set it=null
endfunction

function Func1169 takes player p,integer id returns nothing
  local integer WVE=GetPlayerId(p)
  if id==integer194 or id==integer195 or id==integer202 or id==integer012 then
    set integers035[WVE]=integers035[WVE]+1
  elseif id==integer196 then
    set integers035[WVE]=integers035[WVE]+4
  elseif id==integer198 then
    set integers035[WVE]=integers035[WVE]+1
    set integers036[WVE]=integers036[WVE]+1
  elseif id==integer199 then
    set integers035[WVE]=integers035[WVE]+2
    set integers037[WVE]=integers037[WVE]+2
  elseif id==integer206 then
    set integers035[WVE]=integers035[WVE]+2
  endif
endfunction

function Func1170 takes unit source,unit RCX returns boolean
  local integer ZAE
  if GetUnitTypeId(RCX)=='N0MM' or GetUnitTypeId(RCX)=='H0DL' then
    return true
  endif
  if(source==unit086)and IsUnitAlly(RCX,Scourges[0])then
    return false
  elseif(source==unit039)and IsUnitAlly(RCX,Sentinels[0])then
    return false
  endif
  set ZAE=Func0897(RCX)
  if ZAE==integer198 or ZAE==integer135 or ZAE==integer207 then
    return true
  endif
  return false
endfunction

function Func1171 takes unit REO,unit u returns real
  if Func1164(REO)or Func1165(REO)then
    return ItemSpawnX[GetPlayerId(GetOwningPlayer(u))]
  elseif IsSideShopTop(REO)then
    return-7343.0
  elseif IsSideShopBot(REO)then
    return 7289.0
  endif
  return GetUnitX(u)
endfunction

function Func1172 takes unit REO,unit u returns real
  if Func1164(REO)or Func1165(REO)then
    return ItemSpawnY[GetPlayerId(GetOwningPlayer(u))]
  elseif IsSideShopTop(REO)then
    return 3843.0
  elseif IsSideShopBot(REO)then
    return-4697.0
  endif
  return GetUnitY(u)
endfunction

function Func1173 takes unit u,unit u2 returns real
  if Func1164(u)then
    return ItemSpawnX[GetPlayerId(Sentinels[1])]
  elseif Func1165(u)then
    return ItemSpawnX[GetPlayerId(Scourges[5])]
  endif
  return GetUnitX(u2)
endfunction

function Func1174 takes unit u,unit u2 returns real
  if Func1164(u)then
    return ItemSpawnY[GetPlayerId(Sentinels[1])]
  elseif Func1165(u)then
    return ItemSpawnY[GetPlayerId(Scourges[5])]
  endif
  return GetUnitY(u2)
endfunction

function DropSomeItem takes integer i,boolean b,boolean bb,boolean RAO,boolean RNO,unit u returns nothing
  local item it=UnitRemoveItemFromSlot(u,i)
  if b==false and bb==false then
    call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,8,str_replace(GetObjectName('TX1C'),"$item","|c00ffff00"+GetItemName(it)+"|r"))
  endif
  if b and RAO==false and boolean024==false then
    if IsPlayerAlly(GetItemPlayer(it),GetOwningPlayer(u))then
      call DisplayTimedTextToPlayer(GetItemPlayer(it),0,0,8,str_replace(GetObjectName('TX1D'),"$item","|c00ffff00"+GetItemName(it)+"|r"))
      call nPngMinimapEx(GetUnitX(u),GetUnitY(u),4,255,255,255,false)
    endif
  endif
  if(bb or RAO)and IsPlayerAlly(GetItemPlayer(it),GetOwningPlayer(u))then
    call SetItemPosition(it,ItemSpawnX[GetPlayerId(GetOwningPlayer(u))],ItemSpawnY[GetPlayerId(GetOwningPlayer(u))])
  endif
  set it=null
endfunction

function Func1176 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call DropSomeItem(0,LoadBoolean(HY,h,0),LoadBoolean(HY,h,1),LoadBoolean(HY,h,2),LoadBoolean(HY,h,3),LoadUnitHandle(HY,h,0))
  call DelayedCallBackClean()
  set t=null
endfunction

function DropSomeItemDelayed takes boolean b,boolean bb,boolean RAO,boolean RNO,unit u returns nothing
  local integer h=DelayedCallBack(0,function Func1176)
  call SaveBoolean(HY,h,0,b)
  call SaveBoolean(HY,h,1,bb)
  call SaveBoolean(HY,h,2,RAO)
  call SaveBoolean(HY,h,3,RNO)
  call SaveUnitHandle(HY,h,0,u)
endfunction

function UnitDropAllItems takes unit u returns nothing
  local integer i=0
  local item it
  local integer id=GetPlayerId(GetOwningPlayer(u))
  local region r=CreateRegion()
  local boolean b=IsCourier(u)
  local boolean bb=GetUnitTypeId(u)=='ncop'
  local boolean atFountain=false
  local integer iid
  if IsSentinel(GetOwningPlayer(u))then
    call RegionAddRect(r,SentFountainForItemsRect)
  else
    call RegionAddRect(r,ScrgFountainForItemsRect)
  endif
  set atFountain=IsUnitInRegion(r,u)
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    if it!=null and IsBottleWithRune(GetIndex(it))==false and GetIndex(it)!=Aegis and Func0874(it)==false then
      set iid=GetIndex(it)
      if iid==MixedWardsOrbs or iid==MixedWardsSentry then
        call DropSomeItem(i,b,bb,atFountain,true,u)
        call DropSomeItemDelayed(b,bb,atFountain,false,u)
      else
        call DropSomeItem(i,b,bb,atFountain,true,u)
      endif
    endif
    set i=i+1
  endloop
  call RemoveRegion(r)
  set it=null
  set r=null
endfunction

function AddMissingItems takes unit u,integer id returns nothing
  local player p=GetOwningPlayer(u)
  local real x
  local real y
  set x=GetUnitX(u)
  set y=GetUnitY(u)
  call CheckFuse(p,u,GetSellingUnit(),FindRealIndexId(id),x,y,0,0)
  set u=null
  set p=null
endfunction

function GetBuyingDummy takes unit u returns unit
  local unit d
  local player p=GetOwningPlayer(u)
  if HaveSavedHandle(HeroStats,GetHandleId(p),'COUR'+1)==false or IsDead(LoadUnitHandle(HeroStats,GetHandleId(p),'COUR'+1))then
    set d=CreateUnit(p,'e00E',GetUnitX(CirclesOfPower[GetPlayerId(p)]),GetUnitY(CirclesOfPower[GetPlayerId(p)]),0)
    call UnitAddAbility2(d,'AInv')
    call SaveUnitHandle(HeroStats,GetHandleId(p),'COUR'+1,d)
    call UnitPauseTimedLife(d,true)
    set d=null
  elseif HaveSavedHandle(HeroStats,GetHandleId(p),'COUR'+1)then
    set d=LoadUnitHandle(HeroStats,GetHandleId(p),'COUR'+1)
    if p!=GetOwningPlayer(d)then
      call SetUnitOwner(d,p,true)
      call SetUnitPosition(d,GetUnitX(CirclesOfPower[GetPlayerId(p)]),GetUnitY(CirclesOfPower[GetPlayerId(p)]))
    endif
    set d=null
  endif
  return LoadUnitHandle(HeroStats,GetHandleId(p),'COUR'+1)
endfunction

function IsSecretShopItem takes integer id returns boolean
  return id==integer284 or id==integer285 or id==integer309 or id==integer238 or id==integer131 or id==integer132 or id==integer144 or id==integer156 or id==integer138 or id==integer149 or id==TalismanOfEvasion or id==integer146 or id==integer133 or id==integer150 or id==integer163 or id==integer162
endfunction

function ImitateBuying takes unit u,integer id returns boolean
  local unit d=GetBuyingDummy(u)
  local integer cost=GetItemGoldCostById(Item_Real[id])
  local player p=GetOwningPlayer(u)
  local boolean b=false
  if IsSecretShopItem(id)then
    call DisplayTimedTextToPlayer(p,0,0,10,str_replace(GetObjectName('TX1A'),"$item","|c00ffff00"+GetObjectName(Item_Real[id])+"|r"))
    set d=null
    return false
  endif
  if GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)>=cost then
    set b=true
    call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-cost)
    call AnnounceSomeItems(p,id)
    call AddMissingItems(d,id)
  else
    call DisplayTimedTextToPlayer(p,0,0,10,str_replace(GetObjectName('TX1B'),"$item","|c00ffff00"+GetObjectName(Item_Real[id])+"|r"))
  endif
  set d=null
  return b
endfunction

function IsItemOwnedBy takes nothing returns boolean
  if tt_int1<6 and GetItemPlayer(GetFilterItem())==tt_player1 and GetItemUserData(GetFilterItem())>=0 and GetWidgetLife(GetFilterItem())>1 then
    set tt_int1=tt_int1+1
    return true
  endif
  return false
endfunction

function AddDetectedItemsToCount takes nothing returns nothing
  call SaveItemHandle(TempHash,'ITEM',tt_int1,GetEnumItem())
endfunction

function IsUnitNextToSideShop takes unit u returns boolean
  return IsUnitInRange(u,FurbolgHut_Top,800)or IsUnitInRange(u,FurbolgHut_Bot,800)
endfunction

function IsSideShopItem takes item it returns boolean
  local integer id=GetIndex(it)
  return id==integer160 or id==integer162 or id==integer122 or id==integer123 or id==integer125 or id==integer127 or id==integer137 or id==KelensDagger or id==integer143 or id==integer151 or id==integer152 or id==integer154 or id==integer155 or id==integer157 or id==integer158 or id==integer176 or id==integer177 or id==TalismanOfEvasion or id==integer164 or id==integer202 or id==integer133 or id==TemporaryItem or id==integer119 or id==integer129 or id==integer128 or id==integer148
endfunction

function GetMissingItems takes unit u,integer recipeId,player p returns nothing
  local integer i=0
  local item it
  local integer k=0
  local integer lim=0
  local integer j
  local integer parts
  local integer partsfound
  local string s
  local unit courier=LoadUnitHandle(HeroStats,GetHandleId(p),'COUR')
  local integer id
  local unit d
  local real x
  local real y
  if recipeId==-1 or GetPlayerSlotState(p)==PLAYER_SLOT_STATE_LEFT then
    return
  endif
  if courier==null then
    set courier=GetBestCourier(p)
  endif
  call FlushChildHashtable(HY,'ITEM')
  loop
    if courier!=null then
      set it=UnitItemInSlot(courier,i)
      if it!=null and GetItemPlayer(it)==p then
        call SaveItemHandle(HY,'ITEM',k,it)
        call SaveInteger(HY,'ITEM',k,GetIndex(it))
        set k=k+1
      endif
    endif
    set it=UnitItemInSlot(u,i)
    if it!=null and GetItemPlayer(it)==p then
      call SaveItemHandle(HY,'ITEM',k,it)
      call SaveInteger(HY,'ITEM',k,GetIndex(it))
      set k=k+1
    endif
    if u!=udg_Hero[GetPlayerId(p)]then
      set it=UnitItemInSlot(udg_Hero[GetPlayerId(p)],i)
      if it!=null and GetItemPlayer(it)==p then
        call SaveItemHandle(HY,'ITEM',k,it)
        call SaveInteger(HY,'ITEM',k,GetIndex(it))
        set k=k+1
      endif
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set tt_player1=p
  set tt_int1=0
  if IsSentinel(p)then
    call EnumItemsInRect(FountainSentRect,Condition(function IsItemOwnedBy),function AddDetectedItemsToCount)
  else
    call EnumItemsInRect(FountainScrgRect,Condition(function IsItemOwnedBy),function AddDetectedItemsToCount)
  endif
  set i=tt_int1
  loop
    exitwhen i<0
    if HaveSavedHandle(TempHash,'ITEM',i)then
      call SaveItemHandle(HY,'ITEM',k,LoadItemHandle(TempHash,'ITEM',i))
      call SaveInteger(HY,'ITEM',k,GetIndex(LoadItemHandle(TempHash,'ITEM',i)))
      call RemoveSavedHandle(TempHash,'ITEM',i)
      set k=k+1
    endif
    set i=i-1
  endloop
  set it=null
  set lim=k
  set k=recipeId
  call SaveInteger(HY,'ITEM',51,Rec_Comp_1[k])
  call SaveInteger(HY,'ITEM',52,Rec_Comp_2[k])
  call SaveInteger(HY,'ITEM',53,Rec_Comp_3[k])
  call SaveInteger(HY,'ITEM',54,Rec_Comp_4[k])
  call SaveInteger(HY,'ITEM',55,Rec_Comp_5[k])
  set partsfound=0
  set parts=0
  set i=0
  if Rec_Comp_1[k]!=0 then
    set parts=parts+1
  endif
  if Rec_Comp_2[k]!=0 then
    set parts=parts+1
  endif
  if Rec_Comp_3[k]!=0 then
    set parts=parts+1
  endif
  if Rec_Comp_4[k]!=0 then
    set parts=parts+1
  endif
  if Rec_Comp_5[k]!=0 then
    set parts=parts+1
  endif
  loop
    set j=LoadInteger(HY,'ITEM',i)
    if j>0 and LoadBoolean(HY,'ITEM',i)==false then
      if(j==LoadInteger(HY,'ITEM',51)and RemoveSavedI(HY,'ITEM',51))or(j==LoadInteger(HY,'ITEM',52)and RemoveSavedI(HY,'ITEM',52))or(j==LoadInteger(HY,'ITEM',53)and RemoveSavedI(HY,'ITEM',53))or(j==LoadInteger(HY,'ITEM',54)and RemoveSavedI(HY,'ITEM',54))or(j==LoadInteger(HY,'ITEM',55)and RemoveSavedI(HY,'ITEM',55))then
        call SaveItemHandle(HY,'ITEM',100+partsfound,LoadItemHandle(HY,'ITEM',i))
        call SaveBoolean(HY,'ITEM',i,true)
        call SaveInteger(HY,'ITEM',200+partsfound,i)
        set partsfound=partsfound+1
      endif
    endif
    set i=i+1
    exitwhen i>=lim
  endloop
  if partsfound!=parts then
    set id=LoadInteger(HY,'ITEM',51)
    if id!=0 then
      if ImitateBuying(u,id)then
        set parts=parts+1
      endif
    endif
    set id=LoadInteger(HY,'ITEM',52)
    if id!=0 then
      if ImitateBuying(u,id)then
        set parts=parts+1
      endif
    endif
    set id=LoadInteger(HY,'ITEM',53)
    if id!=0 then
      if ImitateBuying(u,id)then
        set parts=parts+1
      endif
    endif
    set id=LoadInteger(HY,'ITEM',54)
    if id!=0 then
      if ImitateBuying(u,id)then
        set parts=parts+1
      endif
    endif
    set id=LoadInteger(HY,'ITEM',55)
    if id!=0 then
      if ImitateBuying(u,id)then
        set parts=parts+1
      endif
    endif
    if partsfound==parts then
      set i=100
      loop
        call UnitAddItem(LoadUnitHandle(HeroStats,GetHandleId(GetOwningPlayer(u)),'COUR'+1),LoadItemHandle(HY,'ITEM',i))
        call RemoveSavedHandle(HY,'ITEM',i)
        set i=i+1
        exitwhen HaveSavedHandle(HY,'ITEM',i)==false
      endloop
    endif
    set d=LoadUnitHandle(HeroStats,GetHandleId(GetOwningPlayer(u)),'COUR'+1)
    if true then
      set x=GetUnitX(d)
      set y=GetUnitY(d)
      call SetUnitX(d,GetUnitX(u))
      call SetUnitY(d,GetUnitY(u))
      if IsDead(u)==false and IsUnitInRangeXY(u,GetRectCenterX(FountainSentRect),GetRectCenterY(FountainSentRect),1600)or IsUnitInRangeXY(u,GetRectCenterX(FountainScrgRect),GetRectCenterY(FountainScrgRect),1600)then
        call Func1146(d,u,true,k)
        if GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,0),u)
        endif
        if GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,1),u)
        endif
        if GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,2),u)
        endif
        if GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,3),u)
        endif
        if GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,4),u)
        endif
        if GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,5),u)
        endif
      elseif IsDead(u)==false and IsUnitNextToSideShop(u)then
        if IsSideShopItem(UnitItemInSlot(d,0))and GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,0),u)
        endif
        if IsSideShopItem(UnitItemInSlot(d,1))and GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,1),u)
        endif
        if IsSideShopItem(UnitItemInSlot(d,2))and GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,2),u)
        endif
        if IsSideShopItem(UnitItemInSlot(d,3))and GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,3),u)
        endif
        if IsSideShopItem(UnitItemInSlot(d,4))and GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,4),u)
        endif
        if IsSideShopItem(UnitItemInSlot(d,5))and GetEmptyInventorySlots(u)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,5),u)
        endif
      elseif courier!=null and IsDead(courier)==false and(IsUnitInRangeXY(courier,GetRectCenterX(FountainSentRect),GetRectCenterY(FountainSentRect),1600)or IsUnitInRangeXY(courier,GetRectCenterX(FountainScrgRect),GetRectCenterY(FountainScrgRect),1600))then
        call SetUnitX(d,GetUnitX(courier))
        call SetUnitY(d,GetUnitY(courier))
        call Func1146(d,courier,true,k)
        if GetEmptyInventorySlots(courier)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,0),courier)
        endif
        if GetEmptyInventorySlots(courier)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,1),courier)
        endif
        if GetEmptyInventorySlots(courier)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,2),courier)
        endif
        if GetEmptyInventorySlots(courier)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,3),courier)
        endif
        if GetEmptyInventorySlots(courier)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,4),courier)
        endif
        if GetEmptyInventorySlots(courier)>0 then
          call UnitDropItemTarget(d,UnitItemInSlot(d,5),courier)
        endif
      endif
      call SetUnitX(d,x)
      call SetUnitY(d,y)
    endif
    call UnitDropAllItems(d)
    set d=null
  endif
  call UnitRemoveAbility(LoadUnitHandle(HeroStats,GetHandleId(GetOwningPlayer(u)),'COUR'+1),'AInv')
  call UnitAddAbility(LoadUnitHandle(HeroStats,GetHandleId(GetOwningPlayer(u)),'COUR'+1),'AInv')
  set courier=null
endfunction

function Func1188 takes nothing returns boolean
  return IsCourier(GetFilterUnit())
endfunction

function Func1189 takes player p returns boolean
  local group g=GetAvailableGroup()
  local integer c=0
  call GroupEnumUnitsOfPlayer(g,p,Condition(function Func1188))
  set c=CountUnitsInGroup(g)
  call KillGroup(g)
  return c<2
endfunction

function Func1190 takes integer id,boolean RYO returns integer
  local integer i=0
  loop
    if(RYO==false and integers104[i]==LoadInteger(HY,'ITDB',id))or(RYO and(Rec_Comp_1[i]==id or Rec_Comp_2[i]==id or Rec_Comp_3[i]==id or Rec_Comp_4[i]==id or Rec_Comp_5[i]==id))then
      return i
    endif
    set i=i+1
    exitwhen i>integer040
  endloop
  return-1
endfunction

function Func1191 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  if IsUnitHidden(unit001)==false then
    call ExecuteFunc("Func1193")
  endif
  call DestroyTimer(t)
  set t=null
endfunction

function Func1192 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  call ShowUnit(unit001,true)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",GetUnitX(unit001),GetUnitY(unit001)))
  call TimerStart(t,60.,false,function Func1191)
  set t=null
endfunction

function Func1193 takes nothing returns nothing
  local timer t
  if unit001==null then
    set unit001=CreateUnit(Player(15),'n139',-1913,3313,320)
  endif
  call ShowUnit(unit001,false)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",GetUnitX(unit001),GetUnitY(unit001)))
  call TimerStart(CreateTimer(),600,false,function Func1192)
endfunction

function Func1194 takes nothing returns nothing
  call UnitAddAbility2(udg_Hero[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],'A33P')
  call Func1193()
endfunction

function Func1195 takes nothing returns boolean
  local unit u=GetSoldUnit()
  local player p=GetOwningPlayer(u)
  local integer id=Func0897(u)
  local real x
  local real y
  local integer i
  call UnitAddAbility(u,'Aloc')
  call ShowUnit(u,false)
  call UnitApplyTimedLife(u,'BTLF',2)
  if GetUnitTypeId(u)=='h03O' then
    call Func1194()
  endif
  if GetUnitTypeId(u)==Item_SellerUnit[integer203]then
    if Func1189(p)==false then
      call Error(p,GetObjectName('TX01'))
      call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+GetItemGoldCostById(Item_Real[integer203]))
      set u=null
      return false
    endif
  endif
  if IsIndexIdConsumable(id)==false and Item_Real[id]!=0 then
    call SaveInteger(MHT,'ITEM',GetPlayerId(p),Item_Real[id])
    call SaveReal(MHT,'ITEM',GetPlayerId(p),TimerGetElapsed(GlobalTimer))
  endif
  if Func1170(GetSellingUnit(),u)then
    call Error(p,GetObjectName('n02G'))
    if IsUnitAlly(u,Sentinels[0])then
      set p=Scourges[0]
    else
      set p=Sentinels[0]
    endif
    set x=Func1173(GetSellingUnit(),u)
    set y=Func1174(GetSellingUnit(),u)
    call DelayedItemCreation(Item_Dummy[id],x,y,p,true,GetDefaultChargesItem(id))
  else
    call Func1169(p,FindRealIndexId(id))
    if Item_Real[id]==0 then
      set i=Func1190(id,false)
      if i==-1 then
        call Error(p,GetObjectName('n02H'))
      else
        call GetMissingItems(udg_Hero[GetPlayerId(p)],i,p)
      endif
    else
      set x=Func1171(GetSellingUnit(),u)
      set y=Func1172(GetSellingUnit(),u)
      if id==integer206 then
        call CheckFuse(p,u,GetSellingUnit(),FindRealIndexId(id),x,y,2,0)
      else
        call CheckFuse(p,u,GetSellingUnit(),FindRealIndexId(id),x,y,0,0)
      endif
    endif
  endif
  set u=null
  set p=null
  return true
endfunction

function Func1196 takes unit u,integer id,real r1,integer PSE returns boolean
  local integer a=GetUnitAbility(u,'Asel')
  local integer k
  local integer offset=0xCC
  local integer i=0
  local real r
  if a>0 then
    set a=a/4
    loop
      set k=Memory[a+offset/4]
      if k!=0 then
        if k==id then
          set k=Memory[a+PSE+0x1C*i/4]
          if k>0 then
            if k>0 then
              set r=GetRealFromMemory(Memory[k/4+1])+r1
              set Memory[k/4+1]=SetRealIntoMemory(r)
              return true
            endif
          endif
        endif
      endif
      set offset=offset+4
      set i=i+1
      exitwhen offset>0xF8
    endloop
  endif
  return false
endfunction

function Func1197 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call Func1196(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0),LoadReal(HY,h,0),LoadInteger(HY,h,1))
  call DelayedCallBackClean()
endfunction

function Func1198 takes unit u,integer id,real r1,integer PSE returns nothing
  local integer h=DelayedCallBack(0,function Func1197)
  call SaveInteger(HY,h,0,id)
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,r1)
  call SaveInteger(HY,h,1,PSE)
endfunction

function UnitItem_Enter takes nothing returns boolean
  local unit u=GetSoldUnit()
  local player p=GetOwningPlayer(u)
  local integer pid=GetPlayerId(p)
  local integer i=GetUnitTypeId(u)
  if true then
    if GetUnitPointValue(u)>=200 then
      if Func1195()then
        if i==Item_SellerUnit[RecipeFlyingCourier]then
          call Func1198(GetSellingUnit(),i,-993.,116)
        elseif i==Item_SellerUnit[integer135]then
          call Func1198(GetSellingUnit(),i,-400.,116)
        elseif i==Item_SellerUnit[integer012]then
          call Func1198(GetSellingUnit(),i,-400.,116)
        endif
        if IsPlayerAlly(LocalPlayer,p)or PlayerObserver then
          if i==Item_SellerUnit[integer203]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,20,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0HU')+"|r")
          elseif i==Item_SellerUnit[RecipeFlyingCourier]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,20,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0KG')+"|r")
          elseif i==Item_SellerUnit[integer206]then
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0KO')+"|r")
          elseif i==Item_SellerUnit[integer198]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0KP')+"|r")
          elseif i==Item_SellerUnit[integer199]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0KQ')+"|r")
          elseif i==Item_SellerUnit[integer356]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0KT')+"|r")
          elseif i==Item_SellerUnit[integer135]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0LB')+"|r")
          elseif i==Item_SellerUnit[integer207]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('n0LP')+"|r")
          elseif i==Item_SellerUnit[integer012]then
            call nPngMinimapEx(GetUnitX(u),GetUnitY(u),3,255,255,255,false)
            call DisplayTimedTextToPlayer(LocalPlayer,0,0,4,udg_Colors[pid]+(PlayerNames[pid])+"|r |c00ffff00"+GetObjectName('TX30')+"|r")
          endif
        endif
      endif
    else
      call Func1154()
    endif
  else
  endif
  set u=null
  return false
endfunction

function Func1200 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='Eevi' or i=='Eevm' or i=='E02V' or i=='E02W' or i=='E02U'
endfunction

function Func1201 takes unit source,item AVX returns nothing
  local unit RCX=source
  local integer ZAE=GetUnitTypeId(RCX)
  local integer QIE=GetItemsIndex_NonMuted(AVX)
  if IsUnitType(RCX,UNIT_TYPE_MELEE_ATTACKER)or IsUnitType(RCX,UNIT_TYPE_HERO)==false then
    if QIE==integer276 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer275])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer161 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer160])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer304 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer303])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer285 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer284])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer120 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer119])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer253 then
      if Func1200(RCX)==false then
        set tt_player1=GetItemPlayer(AVX)
        call Func0888(AVX)
        set tt_item1=UnitAddItemById(RCX,Item_Real[integer252])
        call SetItemPlayer(tt_item1,tt_player1,false)
        call SetItemUserData(tt_item1,1)
      endif
    elseif QIE==integer252 then
      if Func1200(RCX)then
        set tt_player1=GetItemPlayer(AVX)
        call Func0888(AVX)
        set tt_item1=UnitAddItemById(RCX,Item_Real[integer253])
        call SetItemPlayer(tt_item1,tt_player1,false)
        call SetItemUserData(tt_item1,1)
      endif
    endif
  else
    if QIE==integer275 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer276])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer160 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer161])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer303 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer304])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer284 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer285])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer119 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer120])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    elseif QIE==integer252 then
      set tt_player1=GetItemPlayer(AVX)
      call Func0888(AVX)
      set tt_item1=UnitAddItemById(RCX,Item_Real[integer253])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    endif
  endif
  set RCX=null
endfunction

function Func1202 takes unit u,item it returns boolean
  local unit u2=u
  local integer NFX=GetUnitTypeId(u2)
  local integer id=GetIndex(it)
  local real x
  local real y
  local integer i
  set x=GetUnitX(u2)
  set y=GetUnitY(u2)
  if id==integer166 then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u2,"overhead"))
    call Func0649(GetOwningPlayer(u2),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
    set tt_player1=GetItemPlayer(it)
    call Func0888(it)
    set tt_item1=UnitAddItemById(u2,Item_Real[integer170])
    call SetItemPlayer(tt_item1,tt_player1,false)
    call SetItemUserData(tt_item1,1)
  elseif id==integer230 then
    if GetItemCharges(it)==0 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      set tt_item1=UnitAddItemById(u2,Item_Real[integer232])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    endif
  elseif id==integer180 then
    if GetItemCharges(it)==0 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      set tt_item1=UnitAddItemById(u2,Item_Real[integer181])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    endif
  endif
  call DisableTrigger(t_manipulateitem)
  if(id==integer216 or id==integer215 or id==integer217)then
    if(Func0889(u2,Item_Real[integer216],it)!=null or Func0889(u2,Item_Real[integer215],it)!=null or Func0889(u2,Item_Real[integer217],it)!=null)then
      call Error(GetOwningPlayer(u2),GetObjectName('n02L'))
      set tt_player1=GetItemPlayer(it)
      call RemoveItem(it)
      set tt_item1=CreateItem(Item_Dummy[id],x,y)
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    endif
  elseif(id==integer293 or id==integer292 or id==integer295 or id==integer294)then
    if(Func0889(u2,Item_Real[integer293],it)!=null or Func0889(u2,Item_Real[integer292],it)!=null or Func0889(u2,Item_Real[integer295],it)!=null or Func0889(u2,Item_Real[integer294],it)!=null)then
      call Error(GetOwningPlayer(u2),GetObjectName('n02C'))
      set tt_player1=GetItemPlayer(it)
      call RemoveItem(it)
      set tt_item1=CreateItem(Item_Dummy[id],x,y)
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    endif
  elseif(id==integer244 or id==integer245 or id==integer246 or id==integer247 or id==integer248 or id==integer249)then
    set tt_player1=GetItemPlayer(it)
    set i=LoadInteger(HY,GetHandleId(u2),'0BKB')
    if IsUnitSpiritBear(u2)then
      set i=LoadInteger(HY,GetHandleId(udg_Hero[GetPlayerId(GetOwningPlayer(u2))]),'0BKB'+1)
    elseif LoadBoolean(HY,GetHandleId(u2),'HBRD')then
      set i=LoadInteger(HY,GetHandleId(LoadUnitHandle(HY,GetHandleId(u2),'HBRD')),'0BKB'+1)
    endif
    if i==0 and id!=integer244 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      call Func0452(u2,Item_Real[integer244],tt_player1,false,1)
    elseif i==9 and id!=integer245 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      call Func0452(u2,Item_Real[integer245],tt_player1,false,1)
    elseif i==8 and id!=integer246 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      call Func0452(u2,Item_Real[integer246],tt_player1,false,1)
    elseif i==7 and id!=integer247 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      call Func0452(u2,Item_Real[integer247],tt_player1,false,1)
    elseif i==6 and id!=integer248 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      call Func0452(u2,Item_Real[integer248],tt_player1,false,1)
    elseif i==5 and id!=integer249 then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      call Func0452(u2,Item_Real[integer249],tt_player1,false,1)
    endif
  elseif(id==integer265)then
    if IsPlayerEnemy(GetItemPlayer(it),GetOwningPlayer(u2))then
      set tt_player1=GetItemPlayer(it)
      call Func0888(it)
      set tt_item1=UnitAddItemById(u2,Item_Real[integer266])
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
    endif
  elseif(id==Aegis)then
    if IsCourier(u2)or IsUnitSpiritBear(u2)then
      if IsUnitSpiritBear(u2)==false then
        call Error(GetOwningPlayer(u2),GetObjectName('n02K'))
      endif
      set tt_player1=GetItemPlayer(it)
      set integer089=GetItemCharges(it)
      call RemoveItem(it)
      set tt_item1=CreateItem(Item_Dummy[id],4300,integer038)
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
      call SetItemCharges(tt_item1,integer089)
    endif
  endif
  call EnableTrigger(t_manipulateitem)
  call Func1201(u,it)
  set u2=null
  set it=null
  return false
endfunction

function Func1203 takes integer i returns boolean
  return i==integer235 or i==integer294 or i==integer295 or i==integer297 or i==integer234 or i==integer292 or i==integer293 or i==integer296 or i==integer135 or i==integer136 or i==integer218 or i==integer219
endfunction

function Func1204 takes integer i returns boolean
  return i==integer135 or i==integer136
endfunction

function Func1205 takes unit u,item it returns boolean
  local integer ZAE=0
  local item IOO=it
  local integer id=GetItemsIndex_NonMuted(IOO)
  local integer iid=0
  local boolean b=false
  local boolean b2=false
  local boolean isbear=IsUnitSpiritBear(u)or IsCourier(u)or GetUnitTypeId(u)=='e01F'
  local integer IRO=0
  if id==-1 then
    if GetIndex(it)==integer135 or GetIndex(it)==integer136 then
      set IRO=GetIndex(it)
      set id=IRO
    endif
  else
    set IRO=id
  endif
  if IsUnitType(u,UNIT_TYPE_HERO)then
    if id==integer235 then
      set iid=integer234
    elseif id==integer219 then
      set iid=integer218
    elseif id==integer297 then
      set iid=integer296
    elseif id==integer294 then
      set iid=integer292
    elseif id==integer295 then
      set iid=integer293
    elseif id==integer136 then
      set iid=integer135
    endif
    if IRO==integer136 then
      set iid=integer135
      set b2=true
    endif
    if iid!=0 then
      set tt_player1=GetItemPlayer(IOO)
      call Func0888(IOO)
      if b2 then
        set tt_item1=UnitAddItemById(u,Item_Mute[iid])
      else
        set tt_item1=UnitAddItemById(u,Item_Real[iid])
      endif
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
      set b=true
    endif
  else
    if id==integer135 then
      set iid=integer136
    endif
    if IRO==integer135 then
      set iid=integer136
      set b2=true
    endif
    if iid!=0 then
      set tt_player1=GetItemPlayer(IOO)
      call Func0888(IOO)
      if b2 then
        set tt_item1=UnitAddItemById(u,Item_Mute[iid])
      else
        set tt_item1=UnitAddItemById(u,Item_Real[iid])
      endif
      call SetItemPlayer(tt_item1,tt_player1,false)
      call SetItemUserData(tt_item1,1)
      set b=true
    endif
  endif
  set IOO=null
  return b
endfunction

function Func1206 takes unit u,item it returns boolean
  if Func1203(GetItemsIndex_NonMuted(it))or Func1204(Func0895(it))then
    return Func1205(u,it)
  endif
  return false
endfunction

function Func1207 takes unit source returns nothing
  local integer ZAE=GetPlayerId(GetOwningPlayer(source))
  set booleans035[ZAE]=true
endfunction

function Func1208 takes unit u returns nothing
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call UnitAddAbility(d,'A345')
  call IssueTargetOrderByIdFuckingEx(d,852609,u,false)
  set d=null
endfunction

function Func1209 takes unit u,item it returns nothing
  local integer slot=Func0752(u,it)
  local integer DEX=MixedWardsOrbs
  local integer VDX='WOBS'
  local player p
  if GetIndex(it)!=MixedWardsOrbs and GetIndex(it)!=MixedWardsSentry then
    return
  endif
  if GetIndex(it)==MixedWardsOrbs then
    set DEX=MixedWardsSentry
    set VDX='WSEN'
  endif
  if LoadInteger(HY,GetHandleId(u),VDX)>0 then
    set p=GetItemPlayer(it)
    call RemoveItem(UnitRemoveItemFromSlot(u,slot))
    set it=CreateItem(Item_Real[DEX],GetUnitX(u),GetUnitY(u))
    call SetItemPlayer(it,p,false)
    call SetItemCharges(it,LoadInteger(HY,GetHandleId(u),VDX))
    call SaveBoolean(HY,GetHandleId(it),'PICK',true)
    call Func0766(u,it,slot)
  else
  endif
endfunction

function Func1210 takes unit u,integer IDO,item base,integer O6O returns nothing
  local integer IFO=GetItemCharges(base)
  local integer slot=Func0752(u,base)
  local integer DEX=MixedWardsOrbs
  local integer VDX='WOBS'
  local integer IGO='WSEN'
  local player p=GetItemPlayer(base)
  if IDO==integer199 then
    set DEX=MixedWardsSentry
    set VDX='WSEN'
    set IGO='WOBS'
  endif
  call RemoveItem(UnitRemoveItemFromSlot(u,slot))
  set base=CreateItem(Item_Real[DEX],GetUnitX(u),GetUnitY(u))
  call SetItemCharges(base,O6O)
  call SetItemPlayer(base,p,false)
  call SaveInteger(HY,GetHandleId(u),IGO,IFO)
  call SaveInteger(HY,GetHandleId(u),VDX,O6O)
  call Func0766(u,base,slot)
endfunction

function Func1211 takes unit u,integer IDO,integer O6O,boolean IJO returns boolean
  local item base=FindItemOfType(u,Item_Real[IDO])
  local integer IKO=integer199
  local item it
  if IDO==integer199 then
    set IKO=integer198
  endif
  if IJO then
    set it=CreateItem(Item_Dummy[IDO],GetUnitX(u),GetUnitY(u))
    call SetItemPlayer(it,GetOwningPlayer(u),false)
    call SetItemCharges(it,1)
    call SetItemUserData(it,1)
    set it=null
    return true
  endif
  if base!=null then
    if IJO then
      call SetItemCharges(base,GetItemCharges(base)+O6O)
      set base=null
    else
    endif
    return true
  endif
  set base=FindItemOfType(u,Item_Real[IKO])
  if base!=null then
    call Func1210(u,IDO,base,O6O)
    return true
  endif
  set base=FindItemOfType(u,Item_Real[MixedWardsOrbs])
  if base==null then
    set base=FindItemOfType(u,Item_Real[MixedWardsSentry])
  endif
  if base==null then
    return false
  endif
  if IDO==integer199 then
    call SaveInteger(HY,GetHandleId(u),'WSEN',GetItemCharges(base)+O6O)
    if GetIndex(base)==MixedWardsSentry then
      call SetItemCharges(base,GetItemCharges(base)+O6O)
    endif
    set base=null
    return true
  else
    call SaveInteger(HY,GetHandleId(u),'WOBS',GetItemCharges(base)+O6O)
    if GetIndex(base)==MixedWardsOrbs then
      call SetItemCharges(base,GetItemCharges(base)+O6O)
    endif
    set base=null
    return true
  endif
  return false
endfunction

function Func1212 takes unit u,integer IDO,integer O6O returns boolean
  local item base=FindItemOfType(u,Item_Real[IDO])
  local integer slot
  local integer IMO
  local integer VDX='WOBS'
  local item IPO=null
  local player p
  if IDO==integer199 then
    set VDX='WSEN'
  endif
  if base!=null then
    set IMO=GetItemCharges(base)
    if IMO<=O6O then
      call RemoveItem(UnitRemoveItemFromSlot(u,Func0752(u,base)))
    else
      call SetItemCharges(base,IMO-O6O)
    endif
    call SaveInteger(HY,GetHandleId(u),VDX,IMaxIF(IMO-IMaxIF(1,O6O),0))
    set base=null
    return true
  else
    call DisableTrigger(t_manipulateitem)
    if IDO==integer199 then
      set base=FindItemOfType(u,Item_Real[MixedWardsSentry])
      if base!=null then
        set IMO=GetItemCharges(base)
        if IMO<=O6O or(IMO==1 and O6O==0)then
          set slot=Func0752(u,base)
          set p=GetItemPlayer(base)
          call RemoveItem(UnitRemoveItemFromSlot(u,slot))
          set IPO=CreateItem(Item_Real[integer198],GetUnitX(u),GetUnitY(u))
          call SetItemPlayer(IPO,p,false)
          call SetItemCharges(IPO,LoadInteger(HY,GetHandleId(u),'WOBS'))
          call Func0766(u,IPO,slot)
        else
          call SetItemCharges(base,IMO-O6O)
        endif
      endif
    elseif IDO==integer198 then
      set base=FindItemOfType(u,Item_Real[MixedWardsOrbs])
      if base!=null then
        set IMO=GetItemCharges(base)
        if IMO<=O6O or(IMO==1 and O6O==0)then
          set slot=Func0752(u,base)
          set p=GetItemPlayer(base)
          call RemoveItem(UnitRemoveItemFromSlot(u,slot))
          set IPO=CreateItem(Item_Real[integer199],GetUnitX(u),GetUnitY(u))
          call SetItemPlayer(IPO,p,false)
          call SetItemCharges(IPO,LoadInteger(HY,GetHandleId(u),'WSEN'))
          call Func0766(u,IPO,slot)
        else
          call SetItemCharges(base,IMO-O6O)
        endif
      endif
    endif
    call EnableTrigger(t_manipulateitem)
    call SaveInteger(HY,GetHandleId(u),VDX,IMaxIF(LoadInteger(HY,GetHandleId(u),VDX)-IMaxIF(1,O6O),0))
    set IPO=null
    return true
  endif
  set IPO=null
  return false
endfunction

function Func1213 takes item it,integer O6O,unit u,integer VDX returns nothing
  if it!=null then
    call SetItemCharges(it,O6O+GetItemCharges(it))
  else
  endif
  call SaveInteger(HY,GetHandleId(u),VDX,LoadInteger(HY,GetHandleId(u),VDX)+O6O)
endfunction

function Func1214 takes player ITO,unit u,integer IUO,integer O6O returns nothing
  local item it
  local integer IWO
  set it=Func0894(ITO,u,IUO)
  if it!=null then
    set IWO=GetIndex(it)
    if(IWO==MixedWardsOrbs or IWO==MixedWardsSentry)then
      if IUO==integer198 and IWO==MixedWardsOrbs then
        call Func1213(it,O6O,u,'WOBS')
      elseif IUO==integer199 and IWO==MixedWardsSentry then
        call Func1213(it,O6O,u,'WSEN')
      else
        if IUO==integer199 then
          call Func1213(null,O6O,u,'WSEN')
        else
          call Func1213(null,O6O,u,'WOBS')
        endif
      endif
    else
      call SetItemCharges(it,O6O+GetItemCharges(it))
      if IUO==integer199 then
        call Func1213(null,O6O,u,'WSEN')
      else
        call Func1213(null,O6O,u,'WOBS')
      endif
    endif
  endif
  set it=null
endfunction

function Func1215 takes boolean IZO,integer IUO,unit u,player ITO,integer h returns nothing
  local integer VDX='WSEN'
  local integer IGO='WOBS'
  local integer I_O=MixedWardsSentry
  local integer I0O=integer198
  local item IPO=null
  if IZO==false then
    set VDX='WOBS'
    set IGO='WSEN'
    set I_O=MixedWardsOrbs
    set I0O=integer199
  endif
  if LoadInteger(HY,GetHandleId(u),VDX)>0 then
    call SaveInteger(HY,GetHandleId(u),VDX,0)
    if IUO==I_O then
      if IsDead(u)==false then
        set IPO=CreateItem(Item_Real[I0O],GetUnitX(u),GetUnitY(u))
        call SetItemCharges(IPO,LoadInteger(HY,GetHandleId(u),IGO))
        call SetItemPlayer(IPO,ITO,false)
        call SaveBoolean(HY,GetHandleId(IPO),'PICK',true)
        call Func0766(u,IPO,LoadInteger(HY,h,0))
      else
        set IPO=CreateItem(Item_Dummy[I0O],GetUnitX(u),GetUnitY(u))
        call SetItemCharges(IPO,LoadInteger(HY,GetHandleId(u),IGO))
        call SetItemPlayer(IPO,ITO,false)
      endif
    endif
  endif
  set IPO=null
endfunction

function Func1216 takes integer IUO,unit u,integer O6O,player ITO,integer h returns nothing
  local item IPO=null
  call DisableTrigger(t_manipulateitem)
  call Func1215(IUO==MixedWardsSentry or IUO==integer199,IUO,u,ITO,h)
  if IUO==integer199 or IUO==integer198 then
    call Func1212(u,IUO,O6O)
  elseif IUO==MixedWardsOrbs then
    call Func1212(u,integer198,O6O)
  else
    call Func1212(u,integer199,O6O)
  endif
  call EnableTrigger(t_manipulateitem)
  set IPO=null
endfunction

function Func1217 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local item it=LoadItemHandle(HY,h,1)
  call UnitAddItem(u,it)
  call DelayedCallBackClean()
  set u=null
  set it=null
  set t=null
endfunction

function Func1218 takes unit u,item it,real d returns nothing
  local integer h=DelayedCallBack(d,function Func1217)
  call SaveUnitHandle(HY,h,0,u)
  call SaveItemHandle(HY,h,1,it)
endfunction

function Func1219 takes boolean IZO,integer IUO,player ITO,unit u,item I5O,integer O6O returns item
  local item I6O=null
  local item I7O=null
  local integer I8O=integer198
  local integer I9O=integer199
  local integer AVO=MixedWardsSentry
  local integer VDX='WSEN'
  local item IPO=null
  local integer h
  if IZO==false then
    set I8O=integer199
    set I9O=integer198
    set AVO=MixedWardsOrbs
    set VDX='WOBS'
  endif
  set I6O=Func0892(ITO,u,I9O,I5O)
  if I6O==null then
    set I6O=Func0892(ITO,u,MixedWardsSentry,I5O)
  endif
  if I6O==null then
    set I6O=Func0892(ITO,u,MixedWardsOrbs,I5O)
  endif
  if I6O!=null then
    if GetIndex(I6O)==AVO then
      call Func1213(I6O,O6O,u,VDX)
    elseif GetIndex(I6O)==I9O then
      call Func1213(I6O,O6O,u,VDX)
    else
      call Func1213(null,O6O,u,VDX)
    endif
    call RemoveItem(I5O)
    set I7O=null
  elseif IUO==AVO then
    if LoadBoolean(HY,GetHandleId(I5O),'PICK')==false then
      call RemoveItem(I5O)
      set IPO=CreateItem(Item_Dummy[I9O],GetUnitX(u),GetUnitY(u))
      call SetItemPlayer(IPO,ITO,false)
      call SetItemUserData(IPO,1)
      call SetItemCharges(IPO,O6O)
      set I7O=IPO
      call Func1218(u,IPO,0.)
    endif
  elseif Func0892(ITO,u,I8O,null)!=null then
    call RemoveItem(I5O)
    call Func0893(u,IUO)
    call SaveInteger(HY,GetHandleId(u),VDX,O6O)
  endif
  set IPO=null
  set tt_item1=I7O
  set I7O=null
  set I6O=null
  return tt_item1
endfunction

function Func1220 takes integer IUO,unit u,integer O6O,item I5O,player ITO returns item
  local item I6O=null
  local item I7O=null
  local item IPO=null
  if IsItemWardId(IUO)then
    call DisableTrigger(t_manipulateitem)
    if IUO==integer198 or IUO==integer199 then
      call Func1211(u,IUO,O6O,false)
    endif
    set I7O=Func1219(IUO==integer199 or IUO==MixedWardsSentry,IUO,ITO,u,I5O,O6O)
    call EnableTrigger(t_manipulateitem)
  else
    set I6O=Func0892(ITO,u,IUO,I5O)
    if I6O!=null then
      call SetItemCharges(I6O,O6O+GetItemCharges(I6O))
      call Func0888(I5O)
      set I7O=null
    endif
  endif
  set tt_item1=I7O
  set I6O=null
  set I7O=null
  set IPO=null
  return tt_item1
endfunction

function Func1221 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,26))
  local integer eventype=(LoadInteger(HY,h,97))
  local integer i=(LoadInteger(HY,h,93))
  local boolean temp=(LoadBoolean(HY,h,95))
  local item it=null
  local player p=GetOwningPlayer(u)
  local player owner
  local integer charges
  local boolean consumable=false
  local item nit
  local integer k
  local item targetItem
  local item FinalItem
  local boolean finished=false
  local integer a
  local integer tempCharges
  if temp then
    set FinalItem=null
    set owner=(LoadPlayerHandle(HY,h,54))
    set charges=(LoadInteger(HY,h,76))
  else
    set it=(LoadItemHandle(HY,h,96))
    set FinalItem=it
    set owner=GetItemPlayer(it)
    set charges=GetItemCharges(it)
  endif
  if temp==false and it==null then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set t=null
    set u=null
    set p=null
    return false
  endif
  call DisableTrigger(trigger039)
  set boolean059=true
  if eventype==1 then
    if GetUnitTypeId(u)=='ncop' and p!=owner and(IsItemWardId(i)==false)and(GetPlayerId(owner)>0 and GetPlayerId(owner)<12)then
      set consumable=IsIndexIdConsumable(FindRealIndexId(i))or IsIndexIdCharged(FindRealIndexId(i))
      if IsPlayerEnemy(p,owner)then
        call DelayedItemCreation(Item_Dummy[i],ItemSpawnX[GetPlayerId(p)],ItemSpawnY[GetPlayerId(p)],owner,consumable,charges)
      else
        call DelayedItemCreation(Item_Dummy[i],ItemSpawnX[GetPlayerId(owner)],ItemSpawnY[GetPlayerId(owner)],owner,consumable,charges)
      endif
      call Error(p,GetObjectName('n0DR'))
      if temp==false then
        set finished=true
        call Func0888(it)
      endif
    elseif boolean109==false and temp==false and GetItemType(it)==ITEM_TYPE_CAMPAIGN and Func0896(it)!=0 and(p==owner or(GetPlayerSlotState(owner)==PLAYER_SLOT_STATE_LEFT))then
      set consumable=IsIndexIdCharged(i)or IsIndexIdConsumable(i)
      if(GetPlayerSlotState(owner)!=PLAYER_SLOT_STATE_LEFT)or IsBottleWithRune(i)==false then
        call Func0888(it)
        set finished=true
        set nit=UnitAddItemById(u,Item_Real[i])
        set FinalItem=nit
        call SetItemPlayer(nit,owner,false)
        call SetItemUserData(nit,0)
        if consumable then
          call SetItemCharges(nit,charges)
        endif
      endif
    elseif boolean109==false and temp==false and GetItemType(it)==ITEM_TYPE_PERMANENT and p!=owner and Item_Mute[GetIndex(it)]!=0 and(GetPlayerSlotState(owner)!=PLAYER_SLOT_STATE_LEFT)then
      if IsIndexIdCharged(i)or IsIndexIdConsumable(i)then
        set consumable=true
      else
        set consumable=false
      endif
      call Func0888(it)
      set finished=true
      if(i==integer168 or i==integer169 or i==integer170)and DistanceBetweenUnits(u,udg_Hero[GetPlayerId(owner)])<200 and IsUnitType(u,UNIT_TYPE_HERO)then
        call Func1208(u)
        set nit=CreateItem(Item_Dummy[i-1],GetUnitX(udg_Hero[GetPlayerId(owner)]),GetUnitY(udg_Hero[GetPlayerId(owner)]))
        call SetItemPlayer(nit,owner,false)
        call SetItemUserData(nit,0)
        call UnitAddItem(udg_Hero[GetPlayerId(owner)],nit)
        set FinalItem=nit
        call SetItemPlayer(nit,owner,false)
        call SetItemUserData(nit,0)
      else
        if Func1204(i)then
          if(IsCourier(u)or IsUnitSpiritBear(u))then
            set nit=UnitAddItemById(u,Item_Mute[integer136])
          else
            set nit=UnitAddItemById(u,Item_Mute[integer135])
          endif
        else
          set nit=UnitAddItemById(u,Item_Mute[i])
          if i==HeartOfTarrasque then
            call UnitRemoveAbility(u,'B3LB')
          endif
        endif
        set FinalItem=nit
        call SetItemPlayer(nit,owner,false)
        call SetItemUserData(nit,0)
        if consumable then
          call SetItemCharges(nit,charges)
        endif
      endif
    elseif temp==false and GetItemType(it)==ITEM_TYPE_PERMANENT and Func0876(it)and IsUnitType(u,UNIT_TYPE_HERO)then
      if Func0877(it)then
        if GetUnitAbilityLevel(u,'A3E7')==1 then
          call SetItemDroppable(it,true)
        endif
      endif
      set k=Func0870(u)
      if i!=k then
        call Func0888(it)
        set nit=UnitAddItemById(u,Item_Real[k])
        set FinalItem=nit
        call SetItemPlayer(nit,owner,false)
        call SetItemUserData(nit,1)
        if Func0877(nit)then
          if LoadBoolean(HeroStats,GetHandleId(GetOwningPlayer(u)),'itsw')==false and GetUnitAbilityLevel(u,'A3E7')==0 then
            call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,15,GetObjectName('TX05'))
            call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,15,GetObjectName('TX06'))
            call SaveBoolean(HeroStats,GetHandleId(GetOwningPlayer(u)),'itsw',true)
          elseif GetUnitAbilityLevel(u,'A3E7')==1 then
            call SetItemDroppable(nit,true)
          endif
        endif
      elseif i!=Aghanim_Basic then
        call Func0873(u)
      endif
    elseif temp==false and GetItemType(it)==ITEM_TYPE_ARTIFACT then
      call Func1220(i,u,charges,it,owner)
    elseif temp and IsIndexIdConsumable(FindRealIndexId(i))then
      call DisableTrigger(t_manipulateitem)
      if GetEmptyInventorySlots(u)==0 and Func0894(owner,u,i)==null then
        call Error(p,GetObjectName('n02O'))
        call DelayedItemCreation(Item_Dummy[i],LoadReal(HY,h,6)*1.0,LoadReal(HY,h,7)*1.0,owner,true,charges)
      else
        set targetItem=Func0894(owner,u,i)
        if targetItem==null then
          call DisableTrigger(t_manipulateitem)
          set nit=UnitAddItemById(u,Item_Real[i])
          set FinalItem=nit
          call SetItemPlayer(nit,owner,false)
          call SetItemUserData(nit,1)
          call SetItemCharges(nit,charges)
          if boolean034 then
            if i==integer199 then
              call SaveInteger(HY,GetHandleId(u),'WSEN',LoadInteger(HY,GetHandleId(u),'WSEN')+charges)
            elseif i==integer198 then
              call SaveInteger(HY,GetHandleId(u),'WOBS',LoadInteger(HY,GetHandleId(u),'WOBS')+charges)
            endif
          endif
        else
          if i==integer198 or i==integer199 then
            call Func1214(owner,u,i,charges)
          else
            call SetItemCharges(targetItem,charges+GetItemCharges(targetItem))
          endif
        endif
      endif
      call EnableTrigger(t_manipulateitem)
    elseif temp then
      call CheckFuse(owner,u,null,i,(LoadReal(HY,h,6)),(LoadReal(HY,h,7)),charges,1)
    elseif temp==false and(GetItemType(it)==ITEM_TYPE_PERMANENT or GetItemType(it)==ITEM_TYPE_CAMPAIGN)then
      call SetItemUserData(it,1)
      set finished=AttemptFuse(owner,u,0)
    endif
    if finished==false and FinalItem!=null and Func0908(FinalItem)==false then
      set finished=Func1206(u,FinalItem)
    endif
    if finished==false and FinalItem!=null and Func0908(FinalItem)==false then
      call Func1202(u,FinalItem)
    endif
    if LoadBoolean(HY,GetHandleId(it),'PICK')then
      call RemoveSavedBoolean(HY,GetHandleId(it),'PICK')
    endif
  else
    if GetWidgetLife(it)>0 then
      if Func0876(it)then
        set k=Func0870(u)
        if FindItemOfType(u,Item_Real[k])==null and GetUnitAbilityLevel(u,'A3E7')==0 then
          call Func0872(u)
        endif
      endif
      if IsItemOwned(it)==false then
        if GetItemType(it)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(i)or IsIndexIdConsumable(i)then
          set consumable=true
        endif
        if GetItemX(it)==GetItemY(it)and GetItemY(it)==0. then
          call DelayedItemCreation(Item_Dummy[i],GetUnitX(u),GetUnitY(u),owner,consumable,charges)
        else
          call DelayedItemCreation(Item_Dummy[i],GetItemX(it),GetItemY(it),owner,consumable,charges)
        endif
        call Func0888(it)
      endif
      if IsItemWardId(i)then
        call Func1216(i,u,charges,owner,h)
      endif
    endif
  endif
  set boolean059=false
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call EnableTrigger(trigger039)
  set t=null
  set it=null
  set u=null
  set p=null
  set owner=null
  set nit=null
  set targetItem=null
  set FinalItem=null
  return false
endfunction

function Func1222 takes nothing returns nothing
  if boolean052==false then
    call AddWrapper("Func4605",0)
    set boolean052=true
  endif
endfunction

function Func1223 takes nothing returns nothing
  if boolean046==false then
    call AddWrapper("Func4607",1)
    set boolean046=true
  endif
endfunction

function Func1224 takes nothing returns nothing
  if boolean049==false then
    call AddWrapper("Func4606",0)
    set boolean049=true
  endif
endfunction

function Func1225 takes nothing returns nothing
endfunction

function Func1226 takes nothing returns nothing
  if boolean043==false then
    call AddWrapper("Func4604",0)
    set boolean043=true
  endif
endfunction

function Func1227 takes nothing returns nothing
  if boolean039==false then
    call AddWrapper("Func4646",2)
    set boolean039=true
  endif
endfunction

function Func1228 takes nothing returns nothing
  if boolean003==false then
    call AddWrapper("Func1246",1)
    call AddWrapper("Func1245",'preH')
    set boolean003=true
  endif
endfunction

function Func1229 takes nothing returns nothing
  if boolean047==false then
    call AddWrapper("Func4599",0)
    set boolean047=true
  endif
endfunction

function Func1230 takes nothing returns nothing
  if boolean048==false then
    call AddWrapper("Func4601",4)
    set boolean048=true
  endif
endfunction

function Func1231 takes nothing returns nothing
  if boolean051==false then
    call AddWrapper("Func4623",0)
    set boolean051=true
  endif
endfunction

function Func1232 takes nothing returns nothing
  if boolean050==false then
    call AddWrapper("Func4624",2)
    set boolean050=true
  endif
endfunction

function Func1233 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local player p=LoadPlayerHandle(HY,h,0)
  local integer WVE=GetPlayerId(p)
  local integer r1=GetItemGoldCostById(LoadInteger(HY,h,1))/ 2
  if r1>0 then
    call DisplayTimedTextToPlayer(p,0,0,5,str_replace(GetObjectName('TX07'),"$gold",I2S(r1)))
    call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+r1)
    call SaveInteger(MHT,'ITEM',WVE,0)
    call SaveReal(MHT,'ITEM',WVE,0.0)
  endif
  call DestroyTimer(t)
  call RemoveSavedHandle(TempHash,'ITEM',GetPlayerId(p))
  set t=null
endfunction

function Func1234 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local player p=LoadPlayerHandle(HY,h,0)
  local integer WVE=GetPlayerId(p)
  local integer r1=R2I(GetItemGoldCostById(LoadInteger(HY,h,1))*0.35)
  if r1>0 then
    call DisplayTimedTextToPlayer(p,0,0,5,str_replace(GetObjectName('TX1X'),"$gold",I2S(r1)))
    call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+r1)
  endif
  call DestroyTimer(t)
  set t=null
endfunction

function Func1235 takes item it returns boolean
  return Item_Real[GetIndex(it)]==Item_Real[integer152]
endfunction

function Func1236 takes player p,integer it returns nothing
  local integer i=0
  local integer h=GetHandleId(p)
  loop
    exitwhen HaveSavedInteger(MHT,h,'ihis'+i)==false
    set i=i+1
  endloop
  call SaveInteger(MHT,h,'ihis'+i,GetItemGoldCostById(it))
endfunction

function Func1237 takes player p,item it returns nothing
  local timer t
  local integer WOX
  local integer WVE=GetPlayerId(p)
  if Item_Real[GetIndex(it)]==LoadInteger(MHT,'ITEM',WVE)and TimerGetElapsed(GlobalTimer)-LoadReal(MHT,'ITEM',WVE)<10.0 and Func1235(it)==false then
    set t=CreateTimer()
    call TimerStart(t,0,false,function Func1233)
    call SavePlayerHandle(HY,GetHandleId(t),0,p)
    call SaveTimerHandle(TempHash,'ITEM',GetPlayerId(p),t)
    call SaveInteger(HY,GetHandleId(t),1,GetItemTypeId(it))
    set t=null
  elseif boolean065 and Mode_DM and TimerGetElapsed(GlobalTimer)-LoadReal(HeroStats,GetHandleId(p),'ARDM')<60 then
    set t=CreateTimer()
    call TimerStart(t,0,false,function Func1234)
    call SavePlayerHandle(HY,GetHandleId(t),0,p)
    call SaveInteger(HY,GetHandleId(t),1,GetItemTypeId(it))
    set t=null
  else
    call Func1236(p,GetItemTypeId(it))
  endif
endfunction

function Func1238 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if Func0979(u)==false then
    set integer434=IMaxBJ(integer434-1,0)
    set integers109[GetPlayerId(GetOwningPlayer(u))]=IMaxBJ(integers109[GetPlayerId(GetOwningPlayer(u))]-1,0)
    call UnitRemoveAbility(u,'B0BI')
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set u=null
  set t=null
endfunction

function Func1239 takes unit u returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.02,false,function Func1238)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function Func1240 takes player p,integer st returns nothing
  if st==0 then
    if LoadBoolean(HY,GetHandleId(p),'R00O')then
      call RemoveSavedBoolean(HY,GetHandleId(p),'R00O')
      call SetPlayerTechResearched(p,'R00P',GetPlayerTechCount(p,'R00P',true)+1)
      call SetUnitAcquireRange(udg_Hero[GetPlayerId(p)],GetUnitAcquireRange(udg_Hero[GetPlayerId(p)])-140)
    endif
  else
    if LoadBoolean(HY,GetHandleId(p),'R00O')==false then
      call SaveBoolean(HY,GetHandleId(p),'R00O',true)
      call SetPlayerTechResearched(p,'R00O',GetPlayerTechCount(p,'R00O',true)+1)
      call SetUnitAcquireRange(udg_Hero[GetPlayerId(p)],GetUnitAcquireRange(udg_Hero[GetPlayerId(p)])+140)
    endif
  endif
endfunction

function Func1241 takes boolean NOO returns nothing
  if NOO then
    if Func0889(GetTriggerUnit(),Item_Real[integer035],GetManipulatedItem())==null and Func0889(GetTriggerUnit(),Item_Real[integer014],GetManipulatedItem())==null then
      call Func1240(GetTriggerPlayer(),0)
    endif
  else
    call Func1240(GetTriggerPlayer(),1)
  endif
endfunction

function Func1242 takes unit u returns nothing
  call GroupAddUnit(group003,u)
endfunction

function Func1243 takes unit HDE,unit SGE,integer NAO returns nothing
  if NAO==integer225 then
    if PRD_Get(HDE,Item_Real[integer225],20)then
      if IsUnitType(HDE,UNIT_TYPE_MELEE_ATTACKER)then
        call UnitAddAbilityTimedExF(SGE,'A264',1,4,'B02I')
      else
        call UnitAddAbilityTimedExF(SGE,'A3SO',1,4,'B02I')
      endif
    endif
  elseif NAO==integer240 then
    if PRD_Get(HDE,Item_Real[integer240],30)then
      if IsUnitType(HDE,UNIT_TYPE_MELEE_ATTACKER)then
        call UnitAddAbilityTimedExF(SGE,'A263',1,5,'B08N')
      else
        call UnitAddAbilityTimedExF(SGE,'A3SP',1,5,'B08N')
      endif
    endif
  endif
endfunction

function Func1244 takes nothing returns nothing
  local integer hu=GetPlayerId(GetOwningPlayer(CastedUnit))
  if integers110[hu]>0 and GetUnitAbilityLevel(CastedUnit,'A3QI')>0 then
    if IsMagicImmune(TriggeredUnit)==false then
      call Func1243(CastedUnit,TriggeredUnit,integer240)
    endif
  elseif(integers111[hu]>0 or integers112[hu]>0)and(Func0866(CastedUnit,Item_Real[integer225])or Func0866(CastedUnit,Item_Real[HeavensHalberd]))then
    if IsMagicImmune(TriggeredUnit)==false then
      call Func1243(CastedUnit,TriggeredUnit,integer225)
    endif
  endif
endfunction

function Func1245 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A3TW')>0 then
    call UnitRemoveAbility(CastedUnit,'A3TW')
    if IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false and Func0610(TriggeredUnit)==false then
      call UnitAddAbilityTimedExF(TriggeredUnit,'A3TX',1,0.6,'a3TX')
    endif
  endif
endfunction

function Func1246 takes nothing returns nothing
  local real cd
  local integer a
  if IsUnitEnemy(TriggeredUnit,GetOwningPlayer(CastedUnit))and IsUnitType(CastedUnit,UNIT_TYPE_MELEE_ATTACKER)and GetUnitAbilityLevel(CastedUnit,'A3U0')>0 and LoadInteger(HY,GetHandleId(CastedUnit),'echs')==0 then
    call UnitAddAbility2(CastedUnit,'A3TW')
    call UnitAddAbilityTimedExF(TriggeredUnit,'A3TX',1,0.6,'a3TX')
    if GetUnitAbilityLevel(CastedUnit,'A3TY')>0 then
      set a=GetUnitAbility(CastedUnit,'A3TY')
      if a>0 then
        call Func0325(a,5.)
        call SpecialAbilityCasted(CastedUnit,'A3TY')
        set cd=GetAbilityCurrentCooldownConverted(a/4)
        if cd>0 then
          call AddTimedKeyToAgent(CastedUnit,'echs',cd)
        endif
      endif
    endif
  endif
endfunction

function Func1247 takes unit WXE,unit SGE,integer NCO returns nothing
  local integer NDO=0
  local integer NFO=1
  local unit d
  if NCO==0 then
    return
  endif
  set d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  if NCO==1 then
    call DamageTarget(WXE,SGE,1,0.01)
    set NDO='A363'
  elseif NCO==2 then
    call DamageTarget(WXE,SGE,1,25+25*GetUnitAbilityLevel(WXE,'A081'))
    set NDO='A364'
  elseif NCO==3 then
    call DamageTarget(WXE,SGE,1,10+10*GetUnitAbilityLevel(WXE,'A09E'))
    set NDO='A364'
    set NFO=GetUnitAbilityLevel(WXE,'A09E')
  elseif NCO==4 then
    set NDO='A367'
    call DamageTarget(WXE,SGE,1,85.0)
  elseif NCO==5 then
    set NDO='A3J8'
    call DamageTarget(WXE,SGE,1,160.0)
  endif
  call UnitAddAbility(d,NDO)
  call SetUnitAbilityLevel(d,NDO,NFO)
  call IssueTargetOrder(d,"thunderbolt",SGE)
  set d=null
endfunction

function Func1248 takes unit WXE,unit SGE returns nothing
  local integer YXE
  if(GetUnitAbilityLevel(WXE,'A2K7')>0 or GetUnitAbilityLevel(WXE,'A3AH')>0)and(GetUnitAbilityLevel(WXE,'A0JJ')>0 or GetUnitAbilityLevel(WXE,'A081')>0 or GetUnitAbilityLevel(WXE,'A0G5')>0 or GetUnitAbilityLevel(WXE,'A09E')>0)==false then
    if IsUnitType(WXE,UNIT_TYPE_MELEE_ATTACKER)then
      set YXE=25
    else
      set YXE=10
    endif
    if PRD_Get(WXE,Item_Real[integer226],YXE)then
      call Func1247(WXE,SGE,4)
    endif
  endif
  if GetUnitAbilityLevel(WXE,'A1FQ')>0 and PRD_Get(WXE,Item_Real[integer268],35)then
    call Func1247(WXE,SGE,5)
  endif
endfunction

function Func1249 takes nothing returns nothing
  call Func1248(CastedUnit,TriggeredUnit)
endfunction

function Func1250 takes unit u,integer c returns nothing
  call SaveInteger(HY,GetHandleId(u),'LENS'+'bnss',LoadInteger(HY,GetHandleId(u),'LENS'+'bnss')+c)
endfunction

function Func1251 takes nothing returns boolean
  local item it
  local integer NLO
  local unit u
  local trigger t
  local integer h
  local integer NMO
  local integer NPO
  local integer WVE
  local integer i
  local integer id
  local integer d
  local player p
  local boolean b
  local boolean NQO=GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM
  local boolean NOO=GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM
  local boolean NSO=NOO and GetItemType(GetManipulatedItem())==ITEM_TYPE_PURCHASABLE
  if NSO then
    return false
  endif
  set u=GetTriggerUnit()
  set b=GetTriggerEventId()!=EVENT_PLAYER_UNIT_PAWN_ITEM
  set p=GetOwningPlayer(u)
  set WVE=GetPlayerId(p)
  set NetWorthRecount[WVE]=true
  if b and(IsUnitType(u,UNIT_TYPE_HERO)or(IsUnitSpiritBear(u)and IsUnitIllusion(u)==false))and IsNotHeroID(u)==false and GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT then
    set id=GetItemTypeId(GetManipulatedItem())
    if NQO then
      set d=1
    else
      set d=-1
    endif
    if id==Item_Real[integer032]then
      call Func1250(u,d)
    endif
    if id==Item_Real[Butterfly]or id==Item_Real[TalismanOfEvasion]or id==Item_Real[integer268]or id==Item_Real[HeavensHalberd]or id==Item_Real[integer189]then
      if id==Item_Real[Butterfly]then
        call EvasionSourceActivate(2,99999)
      elseif id==Item_Real[TalismanOfEvasion]then
        call EvasionSourceActivate(6,99999)
      elseif id==Item_Real[HeavensHalberd]then
        call EvasionSourceActivate(3,99999)
      elseif id==Item_Real[integer189]then
        call EvasionSourceActivate(5,99999)
      elseif id==Item_Real[integer268]then
        call EvasionSourceActivate(17,99999)
      endif
    endif
    if(id==Item_Real[integer014]or id==Item_Real[integer035])and IsUnitSpiritBear(u)==false then
      call Func1241(NOO)
      if id==Item_Real[integer014]then
        call AddWrapper("Func1486",-1)
        call AddWrapper("Func1485",'preH')
      endif
    endif
    if id==Item_Real[KelensDagger]then
      set integer437=integer437+d
      set integers106[WVE]=integers106[WVE]+d
      call Func1242(u)
    elseif id==Item_Real[integer290]then
      set integers107[WVE]=integers107[WVE]+d
      set integer438=integer438+d
    elseif id==Item_Real[integer188]then
      set integer022=integer022+d
    elseif id==Item_Real[integer226]or id==Item_Real[integer313]or id==Item_Real[integer268]or id==Item_Real[integer269]then
      set integer439=integer439+d
      set integers108[WVE]=integers108[WVE]+d
      call AddWrapper("Func1249",2)
      if NOO and(integers108[WVE]<1 or Func0889(u,Item_Real[integer226],GetManipulatedItem())==null or Func0889(u,Item_Real[integer313],GetManipulatedItem())==null)then
      endif
    elseif id==Item_Real[integer229]or id==Item_Real[integer286]then
      set integer435=integer435+d
      call Func1223()
    elseif id==Item_Real[integer165]then
      set integer436=integer436+d
      set integers105[WVE]=integers105[WVE]+d
      call Func1230()
    elseif id==Item_Real[integer183]then
      if boolean031==false then
        call Func1242(u)
        set integers115[WVE]=integers115[WVE]+d
        set integer444=integer444+d
        call Func1222()
      endif
    elseif id==Item_Real[HeartOfTarrasque]then
      if boolean032==false then
        call Func1242(u)
        set integers114[WVE]=integers114[WVE]+d
        set integer440=integer440+d
      endif
    elseif id==Item_Real[integer240]then
      set integer441=integer441+d
      set integers110[WVE]=integers110[WVE]+d
      call AddWrapper("Func1244",2)
    elseif id==Item_Real[integer225]then
      set integer442=integer442+d
      set integers111[WVE]=integers111[WVE]+d
      call AddWrapper("Func1244",2)
    elseif id==Item_Real[HeavensHalberd]then
      set integer443=integer443+d
      set integers112[WVE]=integers112[WVE]+d
      call AddWrapper("Func1244",2)
    elseif id==Item_Real[integer190]then
      set integer446=integer446+d
      set integers113[WVE]=integers113[WVE]+d
      call AddWrapper("Func1244",2)
      call Func1227()
    endif
    if NQO then
      if id==Item_Real[UrnOfShadows]or id==Item_Real[integer307]then
        set boolean033=true
      elseif id==Item_Real[integer263]then
        set integer434=integer434+1
        set integers109[WVE]=integers109[WVE]+1
        call Func0909(u,'I0HM')
      elseif id==Item_Real[integer177]or id==Item_Real[integer036]or id==Item_Real[integer242]then
        set integer445=integer445+1
        call Func1224()
      elseif id==Item_Real[integer230]or id==Item_Real[integer231]or id==Item_Real[integer232]then
        call Func1229()
      elseif id==Item_Real[integer009]then
        call Func1228()
      elseif id==Item_Real[integer275]or id==Item_Real[integer276]then
        call Func1232()
      elseif id==Item_Real[integer299]then
        call Func1225()
      elseif id==Item_Real[integer288]then
        call Func1226()
      elseif id==Item_Real[integer119]or id==Item_Real[integer120]then
        call Func1231()
      endif
    elseif NOO then
      if id==Item_Real[integer263]or id==Item_Mute[integer263]or id==Item_Dummy[integer263]then
        call Func1239(u)
      elseif id==Item_Real[integer177]or id==Item_Real[integer036]or id==Item_Real[integer242]then
        set integer445=Func0464(integer445-1,0)
      endif
    endif
  endif
  if not b then
    set it=GetSoldItem()
    call SetItemUserData(it,-2)
    call Func1237(p,it)
    if Func0876(it)then
      set NMO=Func0870(u)
      set NPO=Func0871(u)
      if Func0889(u,Item_Real[NMO],it)==null and GetUnitAbilityLevel(u,'A3E7')==0 then
        call Func0872(u)
      endif
    endif
    if mode_TT then
      call Func1207(u)
    endif
  elseif GetItemTypeId(GetManipulatedItem())!='I00E' and GetItemTypeId(GetManipulatedItem())!='I02M' then
    set it=GetManipulatedItem()
    if IsUnitIllusion(u)or GetItemUserData(it)==-2 then
      set it=null
      set u=null
      set t=null
      return false
    endif
    if NQO then
      set NLO=1
    else
      set NLO=2
    endif
    if(NLO==1 or(NLO==2 and Func0908(it)==false and GetWidgetLife(it)>0))and GetUnitTypeId(u)!='H00J' then
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call TriggerRegisterTimerEvent(t,0,false)
      call TriggerAddCondition(t,Condition(function Func1221))
      call SaveUnitHandle(HY,h,26,(u))
      call SaveInteger(HY,h,97,(NLO))
      call SaveInteger(HY,h,93,(GetIndex(it)))
      if Func0908(it)then
        call SaveBoolean(HY,h,95,(true))
        call SavePlayerHandle(HY,h,54,(GetItemPlayer(it)))
        call SaveInteger(HY,h,76,(GetItemCharges(it)))
        call SaveReal(HY,h,6,((GetItemX(it))*1.0))
        call SaveReal(HY,h,7,((GetItemY(it))*1.0))
      else
        call SaveBoolean(HY,h,95,(false))
        call SaveItemHandle(HY,h,96,(it))
        call SaveInteger(HY,h,76,(GetItemCharges(it)))
        call SetItemUserData(it,0)
      endif
      if not b then
        set i=GetIndex(it)
        if i==MixedWardsOrbs or i==MixedWardsSentry then
          call SaveInteger(HY,h,0,Func0752(u,it))
          call SaveInteger(HY,h,'WOBS',LoadInteger(HY,GetHandleId(u),'WOBS'))
          call SaveInteger(HY,h,'WSEN',LoadInteger(HY,GetHandleId(u),'WSEN'))
          call SaveInteger(HY,GetHandleId(u),'WSEN',0)
          call SaveInteger(HY,GetHandleId(u),'WOBS',0)
        endif
      endif
    else
    endif
  endif
  set it=null
  set u=null
  set t=null
  return false
endfunction

function Func1252 takes unit u,integer id,boolean NYO returns nothing
  local string s
  local string s2
  local player p=GetOwningPlayer(u)
  local real d=2
  local string NZO="Use"
  if NYO then
    set NZO="Store"
  endif
  if id=='I006' then
    set s="|c00ff0000"+GetObjectName('n0JQ')+"|r"
    call Traffic_RegisterData("Rune"+NZO+"1",GetPlayerId(p))
  elseif id=='I008' then
    set s="|c0000ff00"+GetObjectName('n0JN')+"|r"
    call Traffic_RegisterData("Rune"+NZO+"2",GetPlayerId(p))
  elseif id=='I00K' then
    set s="|c000000ff"+GetObjectName('n0K3')+"|r"
    call Traffic_RegisterData("Rune"+NZO+"3",GetPlayerId(p))
  elseif id=='I007' then
    set s="|c00afaf00"+GetObjectName('n0K2')+"|r"
    call Traffic_RegisterData("Rune"+NZO+"4",GetPlayerId(p))
  elseif id=='I00J' then
    set s="|c00652DC1"+GetObjectName('n0K4')+"|r"
    call Traffic_RegisterData("Rune"+NZO+"5",GetPlayerId(p))
  elseif id=='I0QR' or id=='I0RT' then
    set s="|c00ff8019"+GetObjectName('u01Z')+"|r"
    call Traffic_RegisterData("Rune"+NZO+"6",GetPlayerId(p))
  elseif id=='I0V8' then
    set s="|c00e100f0"+GetObjectName('TX2J')+"|r"
    call Traffic_RegisterData("Rune"+NZO+"7",GetPlayerId(p))
  endif
  if NYO then
    set s2=udg_Colors[GetPlayerId(p)]+GetUnitName(u)+"|r "+GetObjectName('n0GU')+"|r "+s+" "+GetObjectName('n0GW')
    set d=1
  else
    if boolean120 then
      set s2=udg_Colors[GetPlayerId(p)]+GetUnitName(u)+"|r "+GetObjectName('n0GV')+"|r "+s+" "+GetObjectName('n0GW')
    else
      set s2=udg_Colors[GetPlayerId(p)]+GetUnitName(u)+"|r "+GetObjectName('n0GT')+"|r "+s+" "+GetObjectName('n0GW')
    endif
  endif
  if IsSentinel(p)then
    call Func0510(Force_Elfs,d,s2)
  else
    call Func0510(Force_Unds,d,s2)
  endif
endfunction

function Func1253 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,0)
  local integer JXX=LoadInteger(HY,h,0)
  local real N0O=LoadReal(HY,h,0)
  local real N1O=LoadReal(HY,h,1)
  local real N2O=LoadReal(HY,h,2)
  if IsDead(SGE)==false and GetUnitAbilityLevel(SGE,JXX)>0 then
    if N1O>0 then
      call SetUnitState(SGE,UNIT_STATE_MANA,GetUnitState(SGE,UNIT_STATE_MANA)+N1O/N2O*0.1)
    endif
    if N0O>0 then
      call SetWidgetLife(SGE,GetWidgetLife(SGE)+N0O/N2O*0.1)
    endif
  else
    call SaveBoolean(MHT,GetHandleId(SGE),JXX,false)
    call PauseTimer(t)
    call FlushChildHashtable(HY,h)
    call DestroyTimer(t)
  endif
  set t=null
  set SGE=null
endfunction

function SmoothHealingSystemForBottle takes real hp,real mp,real D1E,integer JXX,unit SGE returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.1,true,function Func1253)
  call SaveUnitHandle(HY,h,0,SGE)
  call SaveBoolean(MHT,GetHandleId(SGE),JXX,true)
  call SaveInteger(HY,h,0,JXX)
  call SaveReal(HY,h,0,hp)
  call SaveReal(HY,h,1,mp)
  call SaveReal(HY,h,2,D1E)
  set t=null
endfunction

function Func1255 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  if GetUnitAbilityLevel(u,'B01S')==0 then
    call UnitRemoveAbility(u,'B01S')
    call UnitRemoveAbility(u,'B04A')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetUnitState(u,UNIT_STATE_LIFE)==GetUnitState(u,UNIT_STATE_MAX_LIFE)and GetUnitState(u,UNIT_STATE_MANA)==GetUnitState(u,UNIT_STATE_MAX_MANA)then
    call UnitRemoveAbility(u,'B01S')
    call UnitRemoveAbility(u,'B04A')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func1256 takes unit u,item it returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func1255))
  call SaveUnitHandle(HY,h,14,(u))
  set t=null
  if LoadBoolean(MHT,GetHandleId(u),'B01S')==false then
    call SmoothHealingSystemForBottle(3000,2000,30,'B01S',u)
  endif
endfunction

function Func1257 takes unit source,item AVX returns nothing
  local unit RCX=source
  local real result=GetUnitX(RCX)
  local real ZEE=GetUnitY(RCX)
  local unit M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',result,ZEE,0)
  if IsUnitType(RCX,UNIT_TYPE_MELEE_ATTACKER)then
    call UnitAddAbility(M_X,'A2XN')
  else
    call UnitAddAbility(M_X,'A0GR')
  endif
  call SaveUnitHandle(HY,GetHandleId(M_X),'ilsr',RCX)
  call IssueTargetOrderByIdFuckingEx(M_X,852274,RCX,false)
  call SaveInteger(HY,GetHandleId(unit004),'ills','BIil')
  call IssueTargetOrderByIdFuckingEx(M_X,852274,RCX,false)
  call SaveInteger(HY,GetHandleId(unit004),'ills','BIil')
  set RCX=null
  set M_X=null
endfunction

function Func1258 takes unit u,item it returns nothing
  local integer WOX
  local integer N8O
  local integer N9O=1
  if GetUnitAbilityLevel(u,'A0O3')>0 then
    set N9O=2+GetUnitAbilityLevel(u,'A0O3')
  endif
  call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",u,"origin"))
  if GetItemTypeId(it)=='I0RT' then
    set WOX=100*N9O
    set N8O=0
  else
    set WOX=(50+2*integer072)*N9O
    set N8O=(50+5*integer072)
  endif
  call ImitateBountyGain(GetOwningPlayer(u),u,WOX,false)
  if N8O==0 then
    return
  endif
  if IsUnitType(u,UNIT_TYPE_HERO)then
    call AddHeroXP(u,N8O,true)
  elseif IsUnitSpiritBear(u)then
    call AddHeroXP(udg_Hero[GetPlayerId(GetOwningPlayer(u))],N8O,true)
  endif
endfunction

function Func1259 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,26))
  local integer slot=(LoadInteger(HY,h,98))
  local item it=UnitItemInSlot(u,slot)
  local integer ih=(LoadInteger(HY,h,105))
  local item H_X
  local integer c=GetTriggerEvalCount(t)
  if it!=null and IsBottleWithRune(GetIndex(it))and GetHandleId(it)==ih then
    if c>=240 then
      if IsDead(u)==false then
        set boolean120=true
        set H_X=CreateItem((LoadInteger(HY,(GetHandleId(it)),(GetHandleId(u)))),GetUnitX(u),GetUnitY(u))
        if UnitAddItem(u,H_X)and GetWidgetLife(H_X)<=0.5 then
          call FlushChildHashtable(HY,(GetHandleId(it)))
          call ReplaceItem(u,it,Item_Real[integer170],-1)
          call FlushChildHashtable(HY,(h))
          call CleanTrigger(t)
          call UnitRemoveAbility(u,'B0GI')
        else
          call RemoveItem(H_X)
        endif
        set boolean120=false
      endif
    elseif c==200 then
      call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,8,GetObjectName('TX1O'))
    endif
  else
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  set it=null
  set H_X=null
  return false
endfunction

function Func1260 takes unit u,item it returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer slot=Func0752(u,it)
  call SaveInteger(HY,h,98,(slot))
  call SaveInteger(HY,h,105,(GetHandleId(it)))
  call SaveUnitHandle(HY,h,26,(u))
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function Func1259))
  set t=null
endfunction

function Func1261 takes unit u,integer id returns nothing
  local item it=CreateItem(Func1129(id),GetUnitX(u),GetUnitY(u))
  if UnitAddItem(u,it)and GetWidgetLife(it)<=0 then
  else
    call RemoveItem(it)
  endif
  set it=null
endfunction

function Func1262 takes integer ZAE returns integer
  if ZAE=='I006' then
    return integer173
  elseif ZAE=='I008' then
    return integer174
  elseif ZAE=='I00J' then
    return integer171
  elseif ZAE=='I00K' then
    return integer172
  elseif ZAE=='I007' then
    return integer175
  elseif ZAE=='I0QR' then
    return integer069
  elseif ZAE=='I0V8' then
    return integer070
  elseif ZAE=='I0RT' then
    return integer071
  endif
  return-1
endfunction

function Func1263 takes unit u returns nothing
  call UnitAddAbilityTimedExF(u,'A3FK',1,45,'B01P')
endfunction

function Func1264 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer id='A020'
  local integer i=1
  local integer k=GetAbilityMaxLevel(id)
  loop
    exitwhen i>k
    call SetAbilityManaCost(id,i,LoadInteger(CooldownStorage,-id,i))
    set i=i+1
  endloop
  set u=null
  set t=null
endfunction

function Func1265 takes unit u,boolean BCO,integer h returns nothing
  local integer i=0
  local integer k
  local integer z
  local integer hu=GetHandleId(u)
  local integer id
  local integer QIE
  local integer mc
  if BCO then
    call GetAllUnitAbilities(u)
    set k=LoadInteger(TempHash,'abil',0)
    loop
      exitwhen k<1
      set k=k-1
      set id=LoadInteger(TempHash,hu+1,k)
      set QIE=GetUnitAbilityLevel(u,id)
      set mc=GetAbilityManaCost(id,QIE)
      if QIE>0 and mc>0 and LoadBoolean(SpellsDB,id,'arcn'+QIE)==false then
        call SaveBoolean(SpellsDB,id,'arcn'+QIE,true)
        call SaveInteger(SpellsDB,id,'arcn'+QIE,mc)
        call SetAbilityManaCost(id,QIE,R2I(mc*0.6))
        call SaveInteger(HY,h,'ttla',LoadInteger(HY,h,'ttla')+1)
        call SaveInteger(HY,h,100+LoadInteger(HY,h,'ttla'),id)
        call SaveInteger(HY,h,1000+LoadInteger(HY,h,'ttla'),QIE)
        call echo("mc reduced on "+GetObjectName(id))
      endif
    endloop
  else
    set k=LoadInteger(HY,h,'ttla')
    if k>0 then
      set i=k
      loop
        set id=LoadInteger(HY,h,100+i)
        set QIE=LoadInteger(HY,h,1000+i)
        call RemoveSavedBoolean(SpellsDB,id,'arcn'+QIE)
        set mc=LoadInteger(SpellsDB,id,'arcn'+QIE)
        call RemoveSavedInteger(SpellsDB,id,'arcn'+QIE)
        call SetAbilityManaCost(id,QIE,mc)
        set i=i-1
        exitwhen i<=0
      endloop
    endif
  endif
endfunction

function Func1266 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer a=LoadInteger(HY,h,1)
  local integer c=LoadInteger(HY,h,0)
  if GetUnitAbilityLevel(u,'A3R4')==0 then
    call Func1265(u,false,h)
    call FlushChildHashtable(HY,h)
    call RemoveSavedHandle(HY,GetHandleId(u),'A3R4')
    call DestroyTimer(t)
  else
    call Func1265(u,true,h)
  endif
  set u=null
  set t=null
endfunction

function Func1267 takes unit u returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'A3R4')then
    set t=LoadTimerHandle(HY,hu,'A3R4')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,0,u)
    call SaveInteger(HY,h,1,ConvertHandle(u))
    call TimerStart(t,0.1,true,function Func1266)
    call SaveTimerHandle(HY,hu,'A3R4',t)
  endif
  call SaveInteger(HY,h,0,0)
  set t=null
endfunction

function Func1268 takes unit u returns nothing
  call UnitAddAbilityTimedExF(u,'A3R4',1,50.,'a3R4')
  call Func1267(u)
endfunction

function Func1269 takes unit Hero,item Item returns nothing
  local item it
  local integer i
  local integer k
  local boolean borrowed=false
  local integer BJO
  if IsFakeRune(GetItemTypeId(Item))then
    set it=FindItemOfType(Hero,Item_Real[integer167])
    if it==null then
      set it=FindItemOfType(Hero,Item_Real[integer168])
    endif
    if it==null then
      set it=FindItemOfType(Hero,Item_Real[integer169])
    endif
    if it==null then
      set it=FindItemOfType(Hero,Item_Real[integer170])
    endif
    if it==null then
      set it=FindItemOfType(Hero,Item_Mute[integer167])
    endif
    if it==null then
      set it=FindItemOfType(Hero,Item_Mute[integer168])
    endif
    if it==null then
      set it=FindItemOfType(Hero,Item_Mute[integer169])
    endif
    if it==null then
      set it=FindItemOfType(Hero,Item_Mute[integer170])
    endif
    if it!=null then
      set i=Func0752(Hero,it)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",Hero,"overhead"))
      set tt_player1=GetItemPlayer(it)
      if LoadBoolean(HeroStats,GetHandleId(GetOwningPlayer(Hero)),'SET1')==false then
        set k=Func1262(Func1129(GetItemTypeId(Item)))
        if GetOwningPlayer(Hero)==tt_player1 then
          call ReplaceItem(Hero,it,Item_Real[k],i)
        else
          call ReplaceItem(Hero,it,Item_Mute[k],i)
        endif
        set it=UnitItemInSlot(Hero,i)
        call SaveInteger(HY,(GetHandleId(it)),(GetHandleId(Hero)),Func1129(GetItemTypeId(Item)))
        call Func1260(Hero,it)
      else
        if GetOwningPlayer(Hero)==tt_player1 then
          call ReplaceItem(Hero,it,Item_Real[integer170],i)
        else
          call ReplaceItem(Hero,it,Item_Mute[integer170],i)
        endif
        call Func1261(Hero,GetItemTypeId(Item))
      endif
    else
      call Func1261(Hero,GetItemTypeId(Item))
    endif
  endif
  if IsRune(GetItemTypeId(Item))then
    call Func1252(Hero,GetItemTypeId(Item),false)
  endif
  if GetItemTypeId(Item)=='I007' then
    call Func1257(Hero,Item)
  elseif GetItemTypeId(Item)=='I00J' then
    if GetUnitAbilityLevel(Hero,'B09Y')>0 then
      call UnitRemoveAbility(Hero,'B09Y')
      call UnitRemoveAbility(Hero,'B01Q')
      call DisableTrigger(GetTriggeringTrigger())
      call UnitAddItemById(Hero,'I00J')
      call EnableTrigger(GetTriggeringTrigger())
    endif
  elseif GetItemTypeId(Item)=='I008' then
    call Func1256(Hero,Item)
  elseif GetItemTypeId(Item)=='I00K' then
    call Func1263(Hero)
  elseif GetItemTypeId(Item)=='I0V8' then
    call Func1268(Hero)
  elseif GetItemTypeId(Item)=='I0QR' or GetItemTypeId(Item)=='I0RT' then
    call Func1258(Hero,Item)
  endif
  set it=null
endfunction

function Func1270 takes item it,unit u,boolean NQO returns nothing
  local integer RRE=GetIndex(it)
  local integer hu=GetHandleId(u)
  local string s=""
  if(RRE==integer135 and Func0889(u,integer135,it)==null)or(RRE==integer136 and Func0889(u,integer136,it)==null)then
    if IsNeutralsOrObserversOrAllies(GetOwningPlayer(u))then
      set s="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl"
    endif
    if NQO then
      if GetEmptyInventorySlots(u)>0 or GetItemType(it)==ITEM_TYPE_PERMANENT or GetItemType(it)==ITEM_TYPE_CAMPAIGN then
        if GetUnitAbilityLevel(u,'A26A')==0 and GetUnitAbilityLevel(u,'A26B')==0 then
          if s=="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl" then
            call UnitAddAbility2(u,'A26A')
          else
            call UnitAddAbility2(u,'A26B')
          endif
        endif
      endif
    else
      if not(GetUnitAbilityLevel(u,'A26A')==0 and GetUnitAbilityLevel(u,'A26B')==0)then
        call UnitRemoveAbility(u,'A26B')
        call UnitRemoveAbility(u,'A26A')
        call RemoveSavedHandle(HY,(hu),(670))
      endif
    endif
  endif
endfunction

function Func1271 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer i=0
  local integer k=UnitInventorySize(u)
  local item it
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  call RemoveSavedHandle(HY,GetHandleId(u),'INVR')
  call DestroyTimer(t)
  loop
    set it=UnitItemInSlot(u,i)
    if it!=null then
      call Traffic_RegisterData("LoD_INV_"+I2S(WVE),GetItemTypeId(it))
    endif
    set i=i+1
    exitwhen i>k
  endloop
  set it=null
  set t=null
  set u=null
endfunction

function Func1272 takes unit u returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(u)
  if boolean054==false then
    return
  endif
  if HaveSavedHandle(HY,hu,'INVR')==false then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,hu,'INVR',t)
    call TimerStart(t,0.1,false,function Func1271)
    call SaveUnitHandle(HY,h,0,u)
    set t=null
  else
    call TimerStart(LoadTimerHandle(HY,hu,'INVR'),0.1,false,function Func1271)
  endif
endfunction

function Func1273 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  local item it=GetManipulatedItem()
  local integer id=GetItemTypeId(it)
  if it==null or IsUnitIllusion(u)or IsUnitType(u,UNIT_TYPE_HERO)==false or GetCloneHeroId(u)or GetItemTypeId(it)=='I00E' or GetItemTypeId(it)=='I02M' or GetIndex(it)<=0 then
    set u=null
    set it=null
    return false
  endif
  if(GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM and GetItemType(it)!=ITEM_TYPE_PURCHASABLE)or GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
    call Func1270(it,u,false)
    call Traffic_RegisterData("DRI_"+I2S(GetPlayerId(GetOwningPlayer(u))),Item_Real[FindRealIndexId(GetIndex(it))])
    call Func1272(u)
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
    call Func1270(it,u,true)
    call Traffic_RegisterData("PUI_"+I2S(GetPlayerId(GetOwningPlayer(u))),Item_Real[FindRealIndexId(GetIndex(it))])
    call Func1272(u)
  endif
  set u=null
  set it=null
  return false
endfunction

function Func1274 takes nothing returns boolean
  local integer i
  if integer447>0 and reals011[1]<1 then
    set i=2
    loop
      exitwhen i>integer447
      set reals011[i-1]=reals011[i]
      set items007[i-1]=items007[i]
      set i=i+1
    endloop
    set integer447=integer447-1
  endif
  set i=1
  loop
    exitwhen i>integer447
    if reals011[i]>=1 then
      set reals011[i]=reals011[i]-1
      if reals011[i]<1 then
        call SetItemDroppable(items007[i],true)
      endif
    endif
    set i=i+1
  endloop
  return false
endfunction

function Func1275 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  call UnitRemoveAbility(LoadUnitHandle(HY,GetHandleId(t),0),'BEim')
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set t=null
endfunction

function Func1276 takes nothing returns nothing
  call SaveUnitHandle(HY,DelayedCallBack(0,function Func1275),0,GetTriggerUnit())
endfunction

function Func1277 takes item it returns nothing
  set integer447=integer447+1
  set items007[integer447]=it
  set reals011[integer447]=(Item_Cooldown[(GetItemsIndex_NonMuted(it))])
  call SetItemDroppable(it,false)
endfunction

function Func1278 takes nothing returns nothing
  call RemoveItem(GetManipulatedItem())
  call UnitAddAbility2(GetTriggerUnit(),'A398')
  call UnitAddAbility2(GetTriggerUnit(),'A3OC')
  call DestroyEffect(AddSpecialEffectTarget("effects\\Eclipse.mdx",GetTriggerUnit(),"origin"))
  set AlchemistBonus[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=AlchemistBonus[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetItemGoldCostById(Item_Real[integer188])
endfunction

function Func1279 takes nothing returns nothing
  call Func0227(GetManipulatedItem(),GetItemTypeId(GetManipulatedItem())-1)
endfunction

function Func1280 takes boolean b returns nothing
  if b then
    call Func0227(GetManipulatedItem(),Item_Real[integer271])
  else
    call Func0227(GetManipulatedItem(),Item_Real[integer270])
  endif
  call Func1276()
endfunction

function Func1281 takes nothing returns boolean
  local integer id=GetItemTypeId(GetManipulatedItem())
  if GetUnitTypeId(GetTriggerUnit())!='e00E' and(Item_Cooldown[(GetItemsIndex_NonMuted(GetManipulatedItem()))])>0 and(GetUnitAbilityLevel(GetTriggerUnit(),'A0A5')>0 or IsUnitSpiritBear(GetTriggerUnit())or GetPlayerSlotState(GetTriggerPlayer())==PLAYER_SLOT_STATE_LEFT)then
    call Func1277(GetManipulatedItem())
  endif
  if id==Item_Real[integer188]and GetUnitAbilityLevel(GetTriggerUnit(),'A398')==0 and LoadBoolean(HY,GetHandleId(GetTriggerUnit()),'HBRD')==false then
    call Func1278()
  endif
  if id==Item_Real[integer278]or id==Item_Real[integer034]or id==Item_Real[integer139]then
    call RemoveItem(GetManipulatedItem())
  elseif id==Item_Real[integer170]or id==Item_Real[integer169]or id==Item_Real[integer168]then
    if id==Item_Real[integer170]then
      if GetUnitAbilityLevel(GetTriggerUnit(),'a3MA')==0 then
        call Func0227(GetManipulatedItem(),Item_Real[integer169])
      endif
    elseif id==Item_Real[integer169]then
      call Func0227(GetManipulatedItem(),Item_Real[integer168])
    else
      call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer167],-1)
    endif
  elseif id==Item_Mute[integer170]or id==Item_Mute[integer169]or id==Item_Mute[integer168]then
    if id==Item_Mute[integer170]then
      if GetUnitAbilityLevel(GetTriggerUnit(),'a3MA')==0 then
        call Func0227(GetManipulatedItem(),Item_Mute[integer169])
      endif
    elseif id==Item_Mute[integer169]then
      call Func0227(GetManipulatedItem(),Item_Mute[integer168])
    else
      call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Mute[integer167],-1)
    endif
  elseif id==Item_Real[integer270]or id==Item_Real[integer271]then
    call Func1280(id==Item_Real[integer270])
  elseif id==Item_Real[integer059]then
    if bj_playerIsCrippled[0]then
      call RemoveItem(GetManipulatedItem())
    endif
    set bj_playerIsCrippled[0]=false
  endif
  if boolean037 then
    call GetMissingItems(GetTriggerUnit(),Func1190(GetIndex(GetManipulatedItem()),true),GetItemPlayer(GetManipulatedItem()))
    set boolean037=false
  endif
  return false
endfunction

function Func1282 takes nothing returns nothing
  if HaveSavedReal(HeroStats,GetHandleId(LocalPlayer),'CAMD')and GetCameraField(CAMERA_FIELD_TARGET_DISTANCE)!=LoadReal(HeroStats,GetHandleId(LocalPlayer),'CAMD')and LoadReal(HeroStats,GetHandleId(LocalPlayer),'CAMD')!=1650 then
  endif
endfunction

function Func1283 takes player p,real x,real y,integer id returns nothing
  set tt_item1=CreateItem(Item_Dummy[id],x,y)
  call SetItemPlayer(tt_item1,p,false)
  call SetItemUserData(tt_item1,1)
endfunction

function Func1284 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local item it
  local integer i=0
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local integer RRE
  local item H_X
  local player p
  call DisableTrigger(t_manipulateitem)
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    set RRE=GetIndex(it)
    set p=GetItemPlayer(it)
    if RRE==integer208 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer152)
      call Func1283(p,x,y,integer164)
    elseif RRE==integer211 or RRE==integer212 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer153)
      call Func1283(p,x,y,integer158)
    elseif RRE==integer296 or RRE==integer297 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer149)
      call Func1283(p,x,y,integer146)
      call Func1283(p,x,y,integer351)
    elseif RRE==integer286 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer138)
      call Func1283(p,x,y,integer229)
      call Func1283(p,x,y,integer355)
    elseif RRE==integer309 then
      call RemoveItem(it)
      call Func1283(p,x,y,TemporaryItem)
      call Func1283(p,x,y,integer133)
    elseif RRE==integer035 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer147)
      call Func1283(p,x,y,integer123)
      call Func1283(p,x,y,integer123)
    elseif RRE==integer234 or RRE==integer235 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer137)
      call Func1283(p,x,y,integer143)
    elseif RRE==integer252 or RRE==integer253 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer224)
      call Func1283(p,x,y,integer162)
      call Func1283(p,x,y,integer336)
    elseif RRE==integer179 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer132)
      call Func1283(p,x,y,integer305)
    elseif RRE==integer240 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer225)
      call Func1283(p,x,y,integer224)
    elseif RRE==integer192 or RRE==integer193 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer222)
      call Func1283(p,x,y,integer211)
    elseif RRE==integer313 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer284)
      call Func1283(p,x,y,integer315)
      call Func1283(p,x,y,integer226)
    elseif RRE==integer279 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer314)
      call Func1283(p,x,y,integer148)
    elseif RRE==integer189 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer310)
      call Func1283(p,x,y,TalismanOfEvasion)
    elseif RRE==integer303 or RRE==integer304 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer160)
      call Func1283(p,x,y,integer157)
      call Func1283(p,x,y,integer157)
    elseif RRE==integer183 or RRE==integer184 then
      call RemoveItem(it)
      call Func1283(p,x,y,TemporaryItem)
      call Func1283(p,x,y,integer154)
      call Func1283(p,x,y,integer153)
    elseif RRE==integer187 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer149)
      call Func1283(p,x,y,integer208)
      call Func1283(p,x,y,integer133)
    elseif RRE==HeavensHalberd then
      call RemoveItem(it)
      call Func1283(p,x,y,integer225)
      call Func1283(p,x,y,TalismanOfEvasion)
    elseif RRE==integer188 then
      call RemoveItem(it)
      call Func1283(p,x,y,integer138)
      call Func1283(p,x,y,integer138)
    elseif RRE==integer215 or RRE==integer217 or RRE==integer216 then
      call RemoveItem(it)
      call Func1283(p,x,y,TemporaryItem)
      call Func1283(p,x,y,integer122)
      if RRE==integer215 then
        call Func1283(p,x,y,integer123)
      elseif RRE==integer217 then
        call Func1283(p,x,y,integer155)
      else
        call Func1283(p,x,y,integer125)
      endif
    endif
    set i=i+1
  endloop
  call EnableTrigger(t_manipulateitem)
  set u=null
  set it=null
  set H_X=null
endfunction

function Func1285 takes nothing returns nothing
  set boolean037=true
endfunction

function Func1286 takes integer ZAE returns boolean
  return ZAE!=integer265 and ZAE!=integer290 and ZAE!=integer135 and ZAE!=Aegis
endfunction

function Func1287 takes nothing returns nothing
  call SetItemPawnable(GetManipulatedItem(),GetTriggerEventId()!=EVENT_PLAYER_UNIT_PICKUP_ITEM)
endfunction

function Func1288 takes nothing returns boolean
  if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and Func1286(GetIndex(GetManipulatedItem()))then
    call Func1287()
  endif
  return false
endfunction

function Func1289 takes nothing returns boolean
  return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func1290 takes nothing returns nothing
  local group g
  local unit u=GetTriggerUnit()
  local item it
  if IsMeepo(GetTriggerUnit())then
    set u=udg_Hero[GetPlayerId(GetOwningPlayer(u))]
  endif
  set it=FindItemOfType(u,Item_Real[integer290])
  if it!=null then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1700,Condition(function Func1289))
    set real021=500+30*GetItemCharges(it)
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+real021)
      call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodstoneHealTarget.mdx",u,"origin"))
      call GroupRemoveUnit(g,u)
    endloop
    call KillGroup(g)
  endif
  set u=null
  set it=null
endfunction

function Func1291 takes unit source returns nothing
  local integer ZAE=GetItemCharges(FindItemOfType(source,Item_Real[integer290]))
  if ZAE>0 then
    call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MANA)+ZAE)
  endif
endfunction

function Func1292 takes nothing returns boolean
  return IsUnitAlly(GetFilterUnit(),tt_player1)and IsDead(GetFilterUnit())==false and IsUnitIdType(GetUnitTypeId(GetFilterUnit()),UNIT_TYPE_HERO)
endfunction

function Func1293 takes group g,unit u,integer id returns nothing
  local unit u2
  set tt_player1=GetOwningPlayer(u)
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func1292))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitAddAbilityTimedExF(u2,id,1,1.1,'a3S9')
  endloop
endfunction

function Func1294 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call Func1293(g,unit053,'A3S9')
  call Func1293(g,unit054,'A3S9')
  call Func1293(g,unit055,'A3S9')
  call Func1293(g,unit100,'A3S9')
  call Func1293(g,unit101,'A3S9')
  call Func1293(g,unit102,'A3S9')
  call Func1293(g,unit056,'A3SA')
  call Func1293(g,unit057,'A3SA')
  call Func1293(g,unit058,'A3SA')
  call Func1293(g,Sentinels_Tier3_Top,'A3SA')
  call Func1293(g,Sentinels_Tier3_Mid,'A3SA')
  call Func1293(g,Sentinels_Tier3_Bot,'A3SA')
  call Func1293(g,unit062,'A3SA')
  call Func1293(g,unit063,'A3SA')
  call Func1293(g,unit103,'A3SA')
  call Func1293(g,unit104,'A3SA')
  call Func1293(g,unit105,'A3SA')
  call Func1293(g,unit106,'A3SA')
  call Func1293(g,unit107,'A3SA')
  call Func1293(g,unit108,'A3SA')
  call Func1293(g,unit109,'A3SA')
  call Func1293(g,unit110,'A3SA')
  call KillGroup(g)
endfunction

function Func1295 takes unit u returns nothing
  local real CXO=GetUnitDefaultMoveSpeed(u)
  local real COO
  if u!=null and CXO>0 then
    set COO=GetUnitBaseMovespeed(u)
    if HaveSavedBoolean(HY,GetHandleId(u),'wndl')and CXO==COO then
      call SetUnitBaseMovespeed(u,GetUnitBaseMovespeed(u)+real001)
    endif
    if LoadInteger(HY,GetHandleId(u),'eulb')>0 and CXO==COO then
      call SetUnitBaseMovespeed(u,GetUnitBaseMovespeed(u)+real002*LoadInteger(HY,GetHandleId(u),'eulb'))
    endif
  endif
endfunction

function Func1296 takes nothing returns boolean
  local integer i=1
  local unit u
  local integer WVE
  local boolean b
  call Func1294()
  loop
    call Func1295(udg_Hero[i])
    set i=i+1
    exitwhen i>11
  endloop
  set i=1
  if integer438>0 then
    loop
      set WVE=GetPlayerId(Sentinels[i])
      set u=udg_Hero[WVE]
      if u!=null and IsDead(u)==false then
        if integers107[WVE]>0 then
          call Func1291(u)
        endif
      endif
      set WVE=GetPlayerId(Scourges[i])
      set u=udg_Hero[WVE]
      if u!=null and IsDead(u)==false then
        if integers107[WVE]>0 then
          call Func1291(u)
        endif
      endif
      set i=i+1
      exitwhen i>5
    endloop
  endif
  set u=null
  return false
endfunction

function Func1297 takes unit u returns boolean
  return IsWardId(GetUnitTypeId(u))
endfunction

function Func1298 takes unit IDO,unit SKE returns nothing
  local string s=""
  local string s2="items\\wards\\"
  local string s3="war3mapImported\\"
  local real GVE=1.
  if GetUnitTypeId(IDO)=='oeye'then
    set s2=s2+"SentryWard.mdx"
    set s3=s3+"EnemySentryWardMark.mdx"
  else
    set s2=s2+"ObserverWard.mdx"
    set s3=s3+"EnemyObserverWardMark.mdx"
  endif
  if IsPlayerEnemy(LocalPlayer,GetOwningPlayer(SKE))and PlayerObserver==false then
    set s=s3
    set s2=""
    set GVE=1.5
  endif
  call SetUnitScale(IDO,GVE,GVE,GVE)
  call AddSpecialEffectTarget(s,IDO,"origin")
  call AddSpecialEffectTarget(s2,IDO,"origin")
endfunction

function Func1299 takes unit source,unit RCX returns nothing
  local integer ZAE
  local item AVX
  if GetUnitTypeId(RCX)=='o004' then
    set ZAE=Item_Real[integer198]
  else
    set ZAE=Item_Real[integer199]
  endif
  call DisableTrigger(t_manipulateitem)
  set AVX=FindItemOfType(source,ZAE)
  if AVX==null then
    set tt_player1=GetOwningPlayer(source)
    set tt_item1=CreateItem(ZAE,0,0)
    call UnitAddItem(source,tt_item1)
    call SetItemPlayer(tt_item1,tt_player1,false)
    call SetItemUserData(tt_item1,1)
  else
    call SetItemCharges(AVX,GetItemCharges(AVX)+1)
  endif
  call EnableTrigger(t_manipulateitem)
  set AVX=null
endfunction

function Func1300 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local integer ZAE=0
  local player whichPlayer=GetOwningPlayer(GetTriggerUnit())
  local item AVX
  local integer QIE=GetPlayerId(whichPlayer)
  loop
    exitwhen ZAE>5
    set AVX=UnitItemInSlot(source,ZAE)
    if AVX!=null and GetItemPlayer(AVX)==whichPlayer then
      call UnitRemoveItem(source,AVX)
      call SetItemPosition(AVX,ItemSpawnX[QIE],ItemSpawnY[QIE])
    endif
    set ZAE=ZAE+1
  endloop
  set source=null
  set AVX=null
endfunction

function Func1301 takes nothing returns nothing
  local item AVX=GetEnumItem()
  local unit source=unit160
  local player whichPlayer=GetOwningPlayer(source)
  local integer ZAE=GetPlayerId(whichPlayer)
  if GetWidgetLife(AVX)>0 and GetItemPlayer(AVX)==whichPlayer and IsItemVisible(AVX)then
    call SetItemPosition(AVX,ItemSpawnX[ZAE],ItemSpawnY[ZAE])
    call UnitAddItem(CirclesOfPower[ZAE],AVX)
  endif
  set AVX=null
  set source=null
  set whichPlayer=null
endfunction

function Func1302 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),53))
  set unit160=source
  if IsSentinel(GetOwningPlayer(unit160))then
    call EnumItemsInRect(SentFountainForItemsRect,Condition(function ReturnTrue),function Func1301)
  else
    call EnumItemsInRect(ScrgFountainForItemsRect,Condition(function ReturnTrue),function Func1301)
  endif
  if GetTriggerEvalCount(RBX)==2 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func1303 takes nothing returns boolean
  return IsCourier(GetFilterUnit())and IsDead(GetFilterUnit())==false
endfunction

function Func1304 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local integer ZAE=0
  local group g=GetAvailableGroup()
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1300,Condition(function Func1303))
  call ForGroup(g,function Func1300)
  call KillGroup(g)
  call TriggerRegisterTimerEvent(RBX,0.1,true)
  call TriggerAddCondition(RBX,Condition(function Func1302))
  call SaveUnitHandle(HY,(QIE),53,(source))
  set source=null
  set g=null
  set RBX=null
endfunction

function Func1305 takes nothing returns nothing
  call UnitDropAllItems(GetTriggerUnit())
endfunction

function Func1306 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call CustomSpeed(LoadUnitHandle(HY,h,0),0,0)
  call FlushChildHashtable(HY,h)
  call PauseTimer(t)
  call DestroyTimer(t)
  set t=null
endfunction

function Func1307 takes nothing returns nothing
  local integer h=DelayedCallBack(4.,function Func1306)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call CustomSpeed(GetTriggerUnit(),999,800)
endfunction

function Func1308 takes unit u returns boolean
  return IsUnitIllusion(u)or LoadReal(HY,GetHandleId(GetOwningPlayer(u)),GetHandleId(u))>=TimerGetElapsed(GlobalTimer)
endfunction

function Func1309 takes unit u returns nothing
  local integer h
  local integer h2
  local real JOX=13.
  if IsUnitIllusion(u)==false and(Func0866(u,Item_Real[integer183])or Func0866(u,Item_Real[integer184]))then
    set h=GetHandleId(u)
    set h2=GetHandleId(GetOwningPlayer(u))
    if Func0866(u,Item_Real[integer186])then
      set JOX=JOX*(100.-25)/100.
    endif
    if GetUnitAbilityLevel(u,'A3R4')>0 then
      set JOX=JOX*(100.-30)/100.
    endif
    call SaveReal(HY,h2,h,TimerGetElapsed(GlobalTimer)+JOX)
    call SaveReal(HY,h2,h-500000,LoadReal(HY,h2,h)-TimerGetElapsed(GlobalTimer)-0.4)
  endif
endfunction

function Func1310 takes unit u,item it,integer slot,integer iid returns nothing
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  local integer id='A3QH'
  local integer a
  if iid==integer184 then
    set id='A3QG'
  elseif iid==KelensDaggerDisabled then
    set id='A340'
  endif
  set tt_player1=GetItemPlayer(it)
  call RemoveItem(it)
  call UnitAddAbility(d,'AInv')
  set it=UnitAddItemById(d,Item_Real[iid])
  if iid==HeartOfTarrasqueDisabled and IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false then
    call SetUnitAbilityLevel(d,'A3QH',2)
  endif
  if iid==integer184 and Func0866(u,Item_Real[integer186])then
    call SetUnitAbilityLevel(d,'A3QG',2)
  endif
  call UnitUseItem(d,it)
  call Func0766(u,it,slot)
  set a=GetUnitAbility(u,id)
  if a>0 then
    call AdjustCooldownModel(a)
  endif
  call SetItemPlayer(it,tt_player1,false)
  call SetItemUserData(it,1)
  set d=null
endfunction

function Func1311 takes unit u returns nothing
  local integer i=0
  local item it
  local integer id
  local boolean b=Func1308(u)
  loop
    set it=UnitItemInSlot(u,i)
    set id=GetItemsIndex_NonMuted(it)
    if b and(id==integer183 or(id==integer184 and LoadReal(HY,GetHandleId(GetOwningPlayer(u)),GetHandleId(u))-TimerGetElapsed(GlobalTimer)>=LoadReal(HY,GetHandleId(GetOwningPlayer(u)),GetHandleId(u)-500000)))then
      set boolean058=true
      set boolean031=true
      call Func1310(u,it,i,integer184)
      set boolean031=false
      set boolean058=false
      call SetUnitMoveSpeed(u,GetUnitBaseMovespeed(u))
    endif
    if id==integer184 and b==false then
      set boolean058=true
      set boolean031=true
      call ReplaceItem(u,it,Item_Real[integer183],i)
      set boolean031=false
      set boolean058=false
      call SetUnitMoveSpeed(u,GetUnitBaseMovespeed(u))
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set u=null
  set it=null
endfunction

function Func1312 takes unit u returns nothing
  local integer i=0
  local item it
  local integer id
  local boolean b
  local real d=5
  local real r1
  local real r
  local integer k=0
  if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false then
    set d=7
  endif
  set r1=LoadReal(HY,(GetHandleId(u)),785)+d-TimerGetElapsed(GlobalTimer)
  set b=r1>0
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    set id=GetItemsIndex_NonMuted(it)
    if id==HeartOfTarrasque or id==HeartOfTarrasqueDisabled then
      if b and(id==HeartOfTarrasque or(id==HeartOfTarrasqueDisabled and r1>=d-0.3))then
        set boolean032=true
        call Func1310(u,it,i,HeartOfTarrasqueDisabled)
        set boolean032=false
        call UnitRemoveAbility(u,'B3LB')
      elseif b==false and id==HeartOfTarrasqueDisabled then
        set boolean032=true
        call ReplaceItem(u,it,Item_Real[HeartOfTarrasque],i)
        set boolean032=false
      endif
      set k=1
    endif
    set i=i+1
  endloop
  set b=GetUnitAbilityLevel(u,'B3LB')>0
  if k==0 and b then
    call UnitRemoveAbility(u,'B3LB')
    set b=false
  endif
  if b then
    set r=GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.0475
    if r!=LoadReal(HY,GetHandleId(u),'B3LB')then
      call Func0174(u,Func0173(u)+(r-LoadReal(HY,GetHandleId(u),'B3LB')))
      call SaveReal(HY,GetHandleId(u),'B3LB',r)
    endif
  else
    if HaveSavedReal(HY,GetHandleId(u),'B3LB')then
      call Func0174(u,Func0173(u)-LoadReal(HY,GetHandleId(u),'B3LB'))
      call RemoveSavedReal(HY,GetHandleId(u),'B3LB')
    endif
  endif
  set u=null
  set it=null
endfunction

function Func1313 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  if GetEventDamage()>0 then
    if GetUnitAbilityLevel(u,'A0RN')==0 and(IsPlayerBelongToTeams(GetOwningPlayer(GetEventDamageSource()))or GetEventDamageSource()==Roshan)then
      if IsPlayerEnemy(GetOwningPlayer(GetEventDamageSource()),Player(WVE))then
        call SaveReal(HY,GetHandleId(u),785,TimerGetElapsed(GlobalTimer))
      endif
      if GetEventDamage()>2 then
        call SaveReal(HY,GetHandleId(u),787,TimerGetElapsed(GlobalTimer))
      endif
    endif
  endif
  set u=null
endfunction

function Func1314 takes unit u returns nothing
  local integer i=0
  local item it
  local integer id
  local real r1=LoadReal(HY,GetHandleId(u),787)+3-TimerGetElapsed(GlobalTimer)
  local boolean b=r1>0
  local integer a
  loop
    set it=UnitItemInSlot(u,i)
    set id=GetItemsIndex_NonMuted(it)
    if(id==KelensDagger and b)or(id==KelensDaggerDisabled and r1>=2.9)then
      set a=GetUnitAbility(u,'AIbk')/4
      if a==0 or(a>0 and GetAbilityCurrentCooldownConverted(a)<2.9)then
        call DisableTrigger(t_manipulateitem)
        call Func1310(u,it,i,KelensDaggerDisabled)
        call EnableTrigger(t_manipulateitem)
      endif
    endif
    if id==KelensDaggerDisabled and b==false then
      call ReplaceItem(u,it,Item_Real[KelensDagger],i)
    endif
    set i=i+1
    exitwhen i>5
  endloop
  set u=null
  set it=null
endfunction

function Func1315 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  if u!=null and IsDead(u)==false then
    if integers106[WVE]>0 then
      call Func1314(u)
    endif
    if ModuloInteger(GetTriggerEvalCount(GetTriggeringTrigger()),3)==1 then
      call Func1312(u)
      if integers115[WVE]>0 then
        call Func1311(u)
      endif
    endif
  endif
  set u=null
endfunction

function Func1316 takes nothing returns boolean
  local integer i=1
  local unit u
  local integer WVE
  local group g
  local player p
  call ForGroup(group003,function Func1315)
  set u=null
  return false
endfunction

function Func1317 takes unit source returns unit
  if IsUnitType(source,UNIT_TYPE_HERO)or GetUnitAbilityLevel(source,'A04R')==0 then
    return source
  else
    return udg_Hero[GetPlayerId(GetOwningPlayer(source))]
  endif
endfunction

function Func1318 takes integer i returns nothing
  if IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false then
    call CreateLightningOnUnit("AFOD",GetDyingUnit(),Func1317(GetKillingUnit()),70,1,1,1,0.6,0.4,.2)
    if i=='n00J' then
      call DamageTarget(GetDyingUnit(),Func1317(GetKillingUnit()),1,550)
    elseif i=='n00A' then
      call DamageTarget(GetDyingUnit(),Func1317(GetKillingUnit()),1,675)
    elseif i=='n006' then
      call DamageTarget(GetDyingUnit(),Func1317(GetKillingUnit()),1,800)
    endif
  endif
endfunction

function Func1319 takes nothing returns boolean
  local unit Hero=GetTriggerUnit()
  local integer YGX=1
  local integer id='EUL1'
  local item it=GetManipulatedItem()
  if GetUnitAbilityLevel(Hero,'Aloc')==0 then
    if GetItemType(it)==ITEM_TYPE_PERMANENT and boolean059==false and boolean024==false and IsCourier(Hero)then
      if IsPlayerAlly(GetOwningPlayer(Hero),GetItemPlayer(it))then
        if IsUnitSelected(Hero,GetItemPlayer(it))==false then
          call DisplayTimedTextToPlayer(GetItemPlayer(it),0,0,8,str_replace(GetObjectName('TX1D'),"$item","|c00ffff00"+GetItemName(it)+"|r"))
          if LocalPlayer==GetItemPlayer(it)then
            call nPngMinimapEx(GetItemX(it),GetItemY(it),4,255,255,255,false)
          endif
        endif
      endif
    endif
    if HaveSavedBoolean(HY,GetHandleId(Hero),'wndl')and Func0889(Hero,Item_Real[integer011],it)==null then
      if HaveSavedBoolean(HY,GetHandleId(Hero),'wndl')then
        call SetUnitBaseMovespeed(Hero,GetUnitBaseMovespeed(Hero)-real001)
        call RemoveSavedBoolean(HY,GetHandleId(Hero),'wndl')
      endif
    endif
    if LoadInteger(HY,GetHandleId(Hero),'eulb')>0 and GetItemTypeId(it)==Item_Real[integer237]then
      if LoadInteger(HY,GetHandleId(Hero),'eulb')>0 then
        call SetUnitBaseMovespeed(Hero,GetUnitBaseMovespeed(Hero)-real002)
        if LoadInteger(HY,GetHandleId(Hero),'eulb')>1 then
          call SaveInteger(HY,GetHandleId(Hero),'eulb',LoadInteger(HY,GetHandleId(Hero),'eulb')-1)
        else
          call RemoveSavedInteger(HY,GetHandleId(Hero),'eulb')
        endif
      endif
    endif
  endif
  set Hero=null
  return false
  if FindItemOfType(Hero,Item_Real[integer237])==null then
    set Hero=null
    return false
  endif
  if FindItemOfType(Hero,Item_Real[integer184])!=null then
    set YGX=4
  endif
  if Func0889(Hero,Item_Real[TemporaryItem],it)!=null then
    set YGX=2
  endif
  if Func0889(Hero,Item_Real[integer299],it)!=null then
    set YGX=2
  endif
  if Func0889(Hero,Item_Real[integer215],it)!=null or Func0889(Hero,Item_Real[integer216],it)!=null or Func0889(Hero,Item_Real[integer217],it)!=null then
    set YGX=2
  endif
  if Func0889(Hero,Item_Real[integer309],it)!=null or Func0889(Hero,Item_Real[integer281],it)!=null then
    set YGX=3
  endif
  if Func0889(Hero,Item_Real[integer183],it)!=null then
    set id='EUL2'
    set YGX=1
  endif
  if Func0889(Hero,Item_Real[integer213],it)!=null or Func0889(Hero,Item_Real[integer214],it)!=null then
    set id='EUL2'
    set YGX=2
  endif
  if Func0889(Hero,Item_Real[integer237],it)!=null then
    call UnitAddAbility2(Hero,id)
    call SetUnitAbilityLevel(Hero,id,YGX)
  else
    call UnitRemoveAbility(Hero,'EUL1')
    call UnitRemoveAbility(Hero,'EUL2')
  endif
  set Hero=null
  return false
endfunction

function Func1320 takes nothing returns boolean
  local unit Hero=GetTriggerUnit()
  local integer YGX=1
  local integer id='EUL1'
  if GetUnitAbilityLevel(Hero,'Aloc')==0 then
    if HaveSavedBoolean(HY,GetHandleId(Hero),'wndl')==false and FindItemOfType(Hero,Item_Real[integer011])!=null then
      if HaveSavedBoolean(HY,GetHandleId(Hero),'wndl')==false then
        call SetUnitBaseMovespeed(Hero,GetUnitBaseMovespeed(Hero)+real001)
        call SaveBoolean(HY,GetHandleId(Hero),'wndl',true)
      endif
    endif
    if GetItemTypeId(GetManipulatedItem())==Item_Real[integer237]then
      call SetUnitBaseMovespeed(Hero,GetUnitBaseMovespeed(Hero)+real002)
      call SaveInteger(HY,GetHandleId(Hero),'eulb',LoadInteger(HY,GetHandleId(Hero),'eulb')+1)
    endif
  endif
  set Hero=null
  return false
  if FindItemOfType(Hero,Item_Real[integer237])==null then
    set Hero=null
    return false
  endif
  if FindItemOfType(Hero,Item_Real[integer184])!=null then
    set YGX=4
  endif
  if FindItemOfType(Hero,Item_Real[TemporaryItem])!=null then
    set YGX=2
  endif
  if FindItemOfType(Hero,Item_Real[integer299])!=null then
    set YGX=2
  endif
  if FindItemOfType(Hero,Item_Real[integer215])!=null or FindItemOfType(Hero,Item_Real[integer216])!=null or FindItemOfType(Hero,Item_Real[integer217])!=null then
    set YGX=2
  endif
  if FindItemOfType(Hero,Item_Real[integer309])!=null or FindItemOfType(Hero,Item_Real[integer281])!=null then
    set YGX=3
  endif
  if FindItemOfType(Hero,Item_Real[integer183])!=null then
    set YGX=1
    set id='EUL2'
  endif
  if FindItemOfType(Hero,Item_Real[integer213])!=null or FindItemOfType(Hero,Item_Real[integer214])!=null then
    set YGX=2
    set id='EUL2'
  endif
  if FindItemOfType(Hero,Item_Real[integer237])!=null then
    call UnitAddAbility2(Hero,id)
    call SetUnitAbilityLevel(Hero,id,YGX)
  endif
  set Hero=null
  return false
endfunction

function Func1321 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  if GetWidgetLife(LoadItemHandle(HY,GetHandleId(t),0))<0.405 then
    call SetWidgetLife(LoadItemHandle(HY,GetHandleId(t),0),1.0)
    call RemoveItem(LoadItemHandle(HY,GetHandleId(t),0))
  endif
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set t=null
endfunction

function Func1322 takes nothing returns boolean
  local timer t
  if(GetWidgetLife(GetManipulatedItem())==0)then
    set t=CreateTimer()
    call TimerStart(t,0.,false,function Func1321)
    call SaveItemHandle(HY,GetHandleId(t),0,GetManipulatedItem())
    set t=null
  endif
  return false
endfunction

function Func1323 takes unit source,integer ZAE returns nothing
  local integer array JTX
  local integer QIE=ZAE
  local integer ZBE=1
  local integer ZCE=0
  local integer JUX
  if ZAE<1 then
    call UnitRemoveAbility(source,ArmletStrengthSystem[0])
    call UnitRemoveAbility(source,ArmletStrengthSystem[1])
    call UnitRemoveAbility(source,ArmletStrengthSystem[2])
    call UnitRemoveAbility(source,ArmletStrengthSystem[3])
    call UnitRemoveAbility(source,ArmletStrengthSystem[4])
    return
  endif
  loop
    exitwhen ZBE==0
    set ZBE=QIE/2
    set JTX[ZCE]=QIE-ZBE*2
    set QIE=ZBE
    set ZCE=ZCE+1
  endloop
  set JUX=4
  set ZCE=0
  loop
    exitwhen ZCE>JUX
    if JTX[ZCE]==1 then
      call UnitAddAbility2(source,ArmletStrengthSystem[ZCE])
    else
      call UnitRemoveAbility(source,ArmletStrengthSystem[ZCE])
    endif
    set ZCE=ZCE+1
  endloop
endfunction

function Func1324 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  local item it=(LoadItemHandle(HY,(h),96))
  local integer c=(LoadInteger(HY,(h),34))
  local real FZE=GetUnitState(u,UNIT_STATE_LIFE)
  local real r1=GetUnitState(u,UNIT_STATE_MAX_LIFE)-FZE
  if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==it then
    call SaveInteger(HY,(GetHandleId(u)),4298,2)
    call UnitRemoveAbility(u,'A3SE')
    call Func1323(u,0)
    call SetUnitState(u,UNIT_STATE_LIFE,Func0468(GetUnitState(u,UNIT_STATE_MAX_LIFE)-r1,1))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM and c<25 then
    call SaveInteger(HY,(GetHandleId(u)),4298,1)
    set c=c+1
    call Func1323(u,c)
    if GetUnitAbilityLevel(u,'B32S')==0 then
      call SetUnitState(u,UNIT_STATE_LIFE,Func0468(GetUnitState(u,UNIT_STATE_MAX_LIFE)-r1,1))
    else
      call SetUnitState(u,UNIT_STATE_LIFE,Func0468(FZE,1))
    endif
    call SaveInteger(HY,(h),34,(c))
  else
    call SaveInteger(HY,(GetHandleId(u)),4298,2)
    call UnitAddAbility2(u,'A3SE')
  endif
  set t=null
  set u=null
  set it=null
  return false
endfunction

function Func1325 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  local item it=(LoadItemHandle(HY,(h),96))
  if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM then
    if GetManipulatedItem()==it then
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  elseif((LoadInteger(HY,(GetHandleId(u)),4310))!=1)then
    if IsCourier(u)==false and IsUnitInvulnerable(u)==false then
      call SetWidgetLife(u,Func0468(GetWidgetLife(u)-4.5,1.))
    endif
  endif
  set t=null
  set u=null
  set it=null
  return false
endfunction

function Func1326 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DROP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1325))
  call SaveUnitHandle(HY,(h),14,(u))
  call SaveItemHandle(HY,(h),96,(GetManipulatedItem()))
  call TriggerEvaluate(t)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.6/25,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DROP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1324))
  call SaveUnitHandle(HY,(h),14,(u))
  call SaveItemHandle(HY,(h),96,(GetManipulatedItem()))
  call SaveInteger(HY,(h),34,0)
  set t=null
  set u=null
endfunction

function Func1327 takes nothing returns boolean
  if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(GetItemsIndex_NonMuted(GetManipulatedItem())==integer292 or GetItemsIndex_NonMuted(GetManipulatedItem())==integer294)then
    call Func1326()
  endif
  return false
endfunction

function GetDamageSourceForStickyNapalm takes unit u returns unit
  if GetUnitAbilityLevel(u,'A1EL')>0 then
    return CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  endif
  return u
endfunction

function Func1329 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,1)
  if GetUnitAbilityLevel(SGE,LoadInteger(HY,h,0))==0 then
    call Func0396(SGE,GetOwningPlayer(LoadUnitHandle(HY,h,0)),-1)
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
  endif
  set SGE=null
  set t=null
endfunction

function Func1330 takes unit SKE,unit SGE,integer BHX returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveUnitHandle(HY,h,1,SGE)
  call SaveInteger(HY,h,0,BHX)
  call TimerStart(t,0.2,true,function Func1329)
  call Func0396(SGE,GetOwningPlayer(SKE),1)
  set t=null
endfunction

function Func1331 takes nothing returns nothing
  local unit source=unit161
  local unit target=GetEnumUnit()
  if(LoadInteger(HY,(GetHandleId(target)),4341))!=1 then
    call AddTimedKeyToAgent(target,4341,0.99)
    call DamageTarget(GetDamageSourceForStickyNapalm(source),target,1,50)
    call Func0690("Abilities\\Spells\\Items\\HealingSalve\\HealingSalveTarget.mdl",target,"origin",0.9)
  endif
  call UnitAddAbilityTimedExF(target,'A3Q1',1,1.,'B3DJ')
  set source=null
  set target=null
endfunction

function Func1332 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real r=LoadReal(HY,h,0)
  set r=r-0.2
  if GetUnitAbilityLevel(u,'A3R9')==0 or r<=0 then
    call Func0670(u,-0.25)
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    call SaveReal(HY,h,0,r)
  endif
  set t=null
  set u=null
endfunction

function Func1333 takes nothing returns nothing
  local real D1E=12.
  local timer t
  local integer h
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  call Func1276()
  if HaveSavedHandle(HY,hu,'B07S')==false then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,hu,'B07S',t)
    call SaveUnitHandle(HY,h,0,u)
    call Func0670(u,0.25)
  else
    set t=LoadTimerHandle(HY,hu,'B07S')
    set h=GetHandleId(t)
  endif
  call TimerStart(t,0.2,true,function Func1332)
  call SaveReal(HY,h,0,D1E)
  call UnitAddAbilityTimedExF(u,'A3R9',1,D1E,'B07S')
  set u=null
  set t=null
endfunction

function Func1334 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local item AVX=(LoadItemHandle(HY,(ZAE),96))
  local group g
  local boolean b=GetTriggerEventId()==EVENT_UNIT_DROP_ITEM
  if source==null or(b and GetManipulatedItem()==AVX)then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif not b then
    if IsDead(source)==false and(IsUnitIllusion(source)or GetItemTypeId(AVX)==Item_Real[integer270])then
      set g=GetAvailableGroup()
      set tt_unit1=source
      set unit161=source
      call EvasionSourceActivate(12,2.)
      call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),725,Condition(function DefaultEnemyFilterWithAncientNonImmune))
      call ForGroup(g,function Func1331)
      call KillGroup(g)
      set g=null
    endif
  endif
  set RBX=null
  set source=null
  set AVX=null
  return false
endfunction

function Func1335 takes unit source,boolean DNO returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DROP_ITEM)
  call TriggerAddCondition(RBX,Condition(function Func1334))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  if DNO then
    call SaveItemHandle(HY,(ZAE),96,(GetManipulatedItem()))
  endif
  set RBX=null
endfunction

function Func1336 takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func1337 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'A393')
  call UnitRemoveAbility(GetEnumUnit(),'A394')
  call UnitRemoveAbility(GetEnumUnit(),'A3E2')
endfunction

function Func1338 takes nothing returns nothing
  if GetUnitAbilityLevel(GetEnumUnit(),'A393')==0 then
    call UnitAddAbility2(GetEnumUnit(),'A393')
    call UnitAddAbility2(GetEnumUnit(),'A394')
  endif
  if GetWidgetLife(GetEnumUnit())/ GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<=0.2 then
    call SetUnitAbilityLevel(GetEnumUnit(),'A393',2)
    call UnitAddAbility2(GetEnumUnit(),'A3E2')
  elseif GetUnitAbilityLevel(GetEnumUnit(),'A393')==2 then
    call SetUnitAbilityLevel(GetEnumUnit(),'A393',1)
    call UnitRemoveAbility(GetEnumUnit(),'A3E2')
  endif
endfunction

function Func1339 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local group g=(LoadGroupHandle(HY,h,340))
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local group gg
  if u==null or(GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==LoadItemHandle(HY,h,96))then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call ForGroup(g,function Func1337)
    call KillGroup(g)
    set t=null
    return false
  endif
  set gg=GetAvailableGroup()
  set tt_unit1=u
  if IsDead(u)==false then
    set tt_unit1=u
    call GroupEnumUnitsInRange(gg,x,y,925,Condition(function Func1336))
  endif
  call GroupRemoveGroup(gg,g)
  call ForGroup(g,function Func1337)
  if IsDead(u)==false then
    call ForGroup(gg,function Func1338)
  endif
  call SaveGroupHandle(HY,h,340,(gg))
  call KillGroup(g)
  set t=null
  set u=null
  set g=null
  set gg=null
  return false
endfunction

function Func1340 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.3,true)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DROP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1339))
  call SaveItemHandle(HY,h,96,(GetManipulatedItem()))
  call SaveUnitHandle(HY,h,2,GetTriggerUnit())
  call SaveGroupHandle(HY,h,340,(GetAvailableGroup()))
  set t=null
endfunction

function PipeOfInssghtFilter takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function PipeOfInsightRemove takes nothing returns nothing
  call RemoveAbilityForSure(GetEnumUnit(),'A3AX')
endfunction

function PipeOfInsightAdd takes nothing returns nothing
  if GetUnitAbilityLevel(GetEnumUnit(),'A3AX')==0 then
    call UnitAddAbility2(GetEnumUnit(),'A3AX')
  endif
endfunction

function PipeOfInsightPeriodic takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local group g=(LoadGroupHandle(HY,h,340))
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local group gg
  if u==null or(GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==LoadItemHandle(HY,h,96))then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call ForGroup(g,function PipeOfInsightRemove)
    call KillGroup(g)
    set t=null
    return false
  endif
  set gg=GetAvailableGroup()
  set tt_unit1=u
  if IsDead(u)==false then
    set tt_unit1=u
    call GroupEnumUnitsInRange(gg,x,y,925,Condition(function PipeOfInssghtFilter))
  endif
  call GroupRemoveGroup(gg,g)
  call ForGroup(g,function PipeOfInsightRemove)
  if IsDead(u)==false then
    call ForGroup(gg,function PipeOfInsightAdd)
  endif
  call SaveGroupHandle(HY,h,340,(gg))
  call KillGroup(g)
  set t=null
  set u=null
  set g=null
  set gg=null
  return false
endfunction

function PipeOfInsightPickup takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.3,true)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DROP_ITEM)
  call TriggerAddCondition(t,Condition(function PipeOfInsightPeriodic))
  call SaveItemHandle(HY,h,96,(GetManipulatedItem()))
  call SaveUnitHandle(HY,h,2,GetTriggerUnit())
  call SaveGroupHandle(HY,h,340,(GetAvailableGroup()))
  set t=null
endfunction

function Func1346 takes unit u returns boolean
  local item it=CreateItem('I0KK',GetUnitX(u),GetUnitY(u))
  local boolean b=UnitAddItem(u,it)
  if b==false then
    call RemoveItem(it)
  endif
  set it=null
  return b
endfunction

function Func1347 takes unit source,item AVX,integer ZAE returns item
  local real result=GetRespawnX(source)
  local real ZEE=GetRespawnY(source)
  local integer QIE=0
  local boolean array DSO
  local item HTX
  loop
    exitwhen QIE>(UnitInventorySize(source)-1)
    if UnitItemInSlot(source,QIE)==null and QIE!=ZAE then
      set HTX=CreateItem('I02M',result,ZEE)
      call UnitAddItem(source,HTX)
      set DSO[QIE]=true
    else
      set DSO[QIE]=false
    endif
    if QIE==ZAE then
      call UnitAddItem(source,AVX)
    endif
    set QIE=QIE+1
  endloop
  set QIE=0
  loop
    exitwhen QIE>5
    if DSO[QIE]then
      call RemoveItem(UnitItemInSlot(source,QIE))
    endif
    set QIE=QIE+1
  endloop
  set tt_item1=AVX
  set HTX=null
  return tt_item1
endfunction

function Func1348 takes unit source,integer ZAE returns nothing
  local integer QIE=0
  local item AVX
  local integer ZBE
  local unit RCX
  local item HTX
  if IsDead(source)then
    return
  endif
  call DisableTrigger(t_manipulateitem)
  if integers109[GetPlayerId(GetOwningPlayer(source))]>0 and ZAE==integer263 then
    if Func0979(source)then
      call Func0909(source,'I0HM')
    endif
  endif
  loop
    exitwhen QIE>5
    set AVX=UnitItemInSlot(source,QIE)
    set ZBE=GetItemsIndex_NonMuted(AVX)
    if ZBE==integer264 or ZBE==integer263 then
      set tt_player1=GetItemPlayer(AVX)
      call RemoveItem(AVX)
      set RCX=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),0)
      call UnitAddAbility(RCX,'AInv')
      set HTX=UnitAddItemById(RCX,Item_Real[ZAE])
      call UnitResetCooldown(RCX)
      call UnitUseItem(RCX,HTX)
      set tt_item1=Func1347(source,HTX,QIE)
      call SetItemPlayer(HTX,tt_player1,false)
      call SetItemUserData(HTX,1)
      call UnitRemoveAbility(RCX,'AInv')
      set RCX=null
      set HTX=null
    endif
    set AVX=null
    set QIE=QIE+1
  endloop
  call EnableTrigger(t_manipulateitem)
endfunction

function Func1349 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local integer QIE=0
  local integer ZBE
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call SaveBoolean(HY,(GetHandleId(source)),102,(false))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif Func1346(source)==false then
    call TriggerRegisterTimerEvent(RBX,5.5,false)
  else
    call SaveBoolean(HY,(GetHandleId(source)),102,(false))
    call Func1348(source,integer263)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func1350 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real FRX=1.
  if boolean147 then
    set FRX=0.
  endif
  call SaveBoolean(HY,(GetHandleId(u)),102,(true))
  call TriggerRegisterTimerEvent(t,13.*FRX,false)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1349))
  call SaveUnitHandle(HY,h,14,(u))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",u,"origin"))
  call Func1348(u,integer264)
  set t=null
endfunction

function Func1351 takes nothing returns boolean
  local integer i=1
  local unit u
  local integer WVE
  if boolean094 then
    return false
  endif
  call Func0214()
  if integer434>0 then
    loop
      exitwhen i>5
      set WVE=GetPlayerId(Sentinels[i])
      set u=udg_Hero[WVE]
      if integers109[WVE]>0 and u!=null and IsDead(u)==false and(LoadBoolean(HY,(GetHandleId(u)),102))==false and IsBlocked(u)==false and(LoadBoolean(HY,(GetHandleId(u)),129))==false then
        call Func1350(u)
      endif
      set WVE=GetPlayerId(Scourges[i])
      set u=udg_Hero[WVE]
      if integers109[WVE]>0 and u!=null and IsDead(u)==false and(LoadBoolean(HY,(GetHandleId(u)),102))==false and IsBlocked(u)==false and(LoadBoolean(HY,(GetHandleId(u)),129))==false then
        call Func1350(u)
      endif
      set i=i+1
    endloop
  endif
  set u=null
  return false
endfunction

function RemoveLinkenBuff takes unit u returns nothing
  call UnitRemoveAbility(u,'B0BI')
endfunction

function Func1353 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(SGE,'B0BI')==0 then
    if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",SGE,"origin"))
    endif
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
    if GetSpellTargetUnit()==SGE and IsPlayerEnemy(GetTriggerPlayer(),GetOwningPlayer(SGE))then
      call UnitRemoveAbility(SGE,'B0BI')
      call UnitRemoveAbility(SGE,'A3L2')
      if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",SGE,"origin"))
      endif
      call DestroyEffect(LoadEffectHandle(HY,h,32))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  elseif GetTriggerEvalCount(t)>=R2I(13./0.1)then
    call SaveBoolean(HY,(GetHandleId(SKE)),102,(false))
    call Func1348(SKE,integer263)
    call UnitRemoveAbility(SGE,'B0BI')
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func1354 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  if IsUnitIllusion(SGE)then
    call UnitAddAbility(SGE,'A3L2')
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  else
    call Func0909(SGE,'I0HM')
  endif
  call FuckingAssistBuffWrap(SKE,SGE)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func1353))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("effects\\Linkens_Main.mdx",SGE,"chest")))
  call SaveBoolean(HY,GetHandleId(SKE),102,true)
  call UnitRemoveAbility(SKE,'B0BI')
  call Func1350(SKE)
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func1355 takes unit SGE,unit D2O returns boolean
  local boolean b=false
  call Func0366()
  if IssueTargetOrderByIdFuckingEx(D2O,852144,SGE,true)then
    set b=true
  elseif IssueTargetOrderByIdFuckingEx(D2O,852227,SGE,true)then
    set b=true
  endif
  call Func0367()
  return b
endfunction

function Func1356 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  if source!=RCX then
    call DamageTarget(source,RCX,1,50)
    call Func1314(RCX)
  endif
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func1357 takes nothing returns nothing
  local trigger t
  local integer h
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local unit d
  if SGE==null then
    set SGE=SKE
  endif
  set d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  call UnitAddAbility(d,'A13V')
  call UnitAddAbility(d,'A368')
  call SaveUnitHandle(HY,GetHandleId(d),'prge',SKE)
  call Func0526("war3mapImported\\CycloneTarget.mdx",GetUnitX(SGE),GetUnitY(SGE),2.5)
  if Func1355(SGE,d)then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,2.51,true)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerAddCondition(t,Condition(function Func1356))
    call SaveUnitHandle(HY,h,2,(SKE))
    call SaveUnitHandle(HY,h,17,(SGE))
  endif
  set d=null
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func1358 takes nothing returns nothing
  if GetTriggerUnit()==GetSpellTargetUnit()or IsMagicImmune(GetSpellTargetUnit())==false then
    if IsBlocked(GetSpellTargetUnit())==false or GetTriggerUnit()==GetSpellTargetUnit()then
      call Func1357()
    endif
  endif
endfunction

function Func1359 takes nothing returns boolean
  call SaveUnitHandle(HY,(GetHandleId(GetTriggerUnit())),103,(null))
  call SaveInteger(HY,(GetHandleId(GetTriggerUnit())),104,0)
  if(FindItemOfType(GetTriggerUnit(),Item_Real[integer167])!=null or FindItemOfType(GetTriggerUnit(),Item_Mute[integer167])!=null)and(GetUnitTypeId(GetSpellTargetUnit())=='nfoh' or GetUnitTypeId(GetSpellTargetUnit())=='ndfl')then
    call SaveUnitHandle(HY,(GetHandleId(GetTriggerUnit())),103,(GetSpellTargetUnit()))
  elseif IsFakeRune(GetItemTypeId(GetSpellTargetItem()))then
    call Func1252(GetTriggerUnit(),Func1129(GetItemTypeId(GetSpellTargetItem())),true)
    call SaveInteger(HY,(GetHandleId(GetTriggerUnit())),104,Func1129(GetItemTypeId(GetSpellTargetItem())))
    call Func0888(GetSpellTargetItem())
  endif
  return false
endfunction

function Func1360 takes integer id returns nothing
  local unit u=GetTriggerUnit()
  local item it=GetManipulatedItem()
  local unit SGE
  local integer J_E
  local integer slot
  local item H_X
  local integer k
  if id==integer167 then
    set slot=Func0752(u,it)
    set SGE=(LoadUnitHandle(HY,(GetHandleId(u)),103))
    set J_E=(LoadInteger(HY,(GetHandleId(u)),104))
    if GetUnitTypeId(SGE)=='nfoh' or GetUnitTypeId(SGE)=='ndfl' then
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
      call Func0649(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
      call ReplaceItem(u,it,Item_Real[integer170],slot)
      call UnitRemoveAbility(u,'B0GI')
    elseif IsRune(J_E)then
      set k=Func1262(J_E)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
      set tt_player1=GetItemPlayer(it)
      if GetOwningPlayer(u)==tt_player1 then
        call ReplaceItem(u,it,Item_Real[k],slot)
      else
        call ReplaceItem(u,it,Item_Mute[k],slot)
      endif
      set H_X=UnitItemInSlot(u,slot)
      call SaveInteger(HY,(GetHandleId(H_X)),(GetHandleId(u)),(J_E))
      call Func1260(u,H_X)
      call UnitRemoveAbility(u,'B0GI')
    endif
  elseif IsBottleWithRune(id)then
    if(LoadInteger(HY,(GetHandleId(it)),(GetHandleId(u))))>0 then
      set boolean120=true
      set slot=Func0752(u,it)
      set H_X=CreateItem((LoadInteger(HY,(GetHandleId(it)),(GetHandleId(u)))),GetUnitX(u),GetUnitY(u))
      call FlushChildHashtable(HY,(GetHandleId(it)))
      call ReplaceItem(u,it,Item_Real[integer170],slot)
      call UnitAddItem(u,H_X)
      set boolean120=false
      call UnitRemoveAbility(u,'B0GI')
    endif
  endif
  set u=null
  set it=null
  set SGE=null
  set H_X=null
endfunction

function Func1361 takes nothing returns nothing
  if GetIssuedOrderId()==851971 then
    if GetOrderTargetItem()!=null then
      if IsFakeRune(GetItemTypeId(GetOrderTargetItem()))then
        call Func0658('n0LU')
      elseif GetIndex(GetOrderTargetItem())==integer265 or GetIndex(GetOrderTargetItem())==integer266 then
        call Func0658('TX1Z')
      endif
    endif
  endif
endfunction

function Func1362 takes unit u returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddCondition(t,Condition(function Func1361))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_PICKUP_ITEM)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DROP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1288))
  set t=null
endfunction

function Func1363 takes player p returns integer
  local integer i=GetRandomInt(1,6)
  if IsSentinel(p)then
    if i==1 then
      return'n00I'
    elseif i==2 then
      return'n022'
    elseif i==3 then
      return'n021'
    elseif i==4 then
      return'n0KY'
    elseif i==5 then
      return'n0KZ'
    else
      return'n0LE'
    endif
  else
    if i==1 then
      return'n023'
    elseif i==2 then
      return'n024'
    elseif i==3 then
      return'n025'
    elseif i==4 then
      return'n0L0'
    elseif i==5 then
      return'n0L1'
    else
      return'n0M4'
    endif
  endif
  return 0
endfunction

function Func1364 takes player p returns integer
  if GetRandomInt(1,3)==1 then
    return'e02R'
  elseif IsSentinel(p)then
    return'e01H'
  else
    return'e01Z'
  endif
  return 0
endfunction

function Func1365 takes nothing returns nothing
  local real x=GetUnitX(GetTriggerUnit())
  local real y=GetUnitY(GetTriggerUnit())
  local real FOO=GetUnitFacing(GetTriggerUnit())
  local unit u
  if Func1189(GetTriggerPlayer())==false then
    call Func0658('TX01')
    return
  endif
  set u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),Func1363(GetOwningPlayer(GetTriggerUnit())),x,y,FOO)
  call Func1126(u)
  call GroupAddUnit(group013,u)
  call SetUnitPosition(u,x+25*Cos(FOO*bj_DEGTORAD),y+25*Sin(FOO*bj_DEGTORAD))
  if booleans018[GetPlayerId(GetOwningPlayer(u))]==false then
    call UnitRemoveType(u,UNIT_TYPE_PEON)
  else
    call UnitAddType(u,UNIT_TYPE_PEON)
  endif
  call Func1362(u)
  set u=null
endfunction

function Func1366 takes nothing returns nothing
  local unit u
  if Func1189(GetTriggerPlayer())==false then
    call Func0658('TX01')
    return
  endif
  set u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),Func1364(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
  call GroupAddUnit(group013,u)
  call Func1126(u)
  if booleans018[GetPlayerId(GetOwningPlayer(u))]==false then
    call UnitRemoveType(u,UNIT_TYPE_PEON)
  else
    call UnitAddType(u,UNIT_TYPE_PEON)
  endif
  call Func1362(u)
  set u=null
endfunction

function Func1367 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),124))
  local integer QIE=(LoadInteger(HY,(ZAE),125))
  local integer ZBE=(LoadInteger(HY,(ZAE),106))
  local integer ZCE=(LoadInteger(HY,(ZAE),107))
  local integer JUX=(LoadInteger(HY,(ZAE),108))
  local integer XPO=(LoadInteger(HY,(ZAE),109))
  local integer XQO=(LoadInteger(HY,(ZAE),110))
  local integer FAO=(LoadInteger(HY,(ZAE),111))
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),118))
  local player FNO=(LoadPlayerHandle(HY,(ZAE),119))
  local player FBO=(LoadPlayerHandle(HY,(ZAE),120))
  local player FCO=(LoadPlayerHandle(HY,(ZAE),121))
  local player FDO=(LoadPlayerHandle(HY,(ZAE),122))
  local player FFO=(LoadPlayerHandle(HY,(ZAE),123))
  local integer FGO=(LoadInteger(HY,(ZAE),112))
  local integer FHO=(LoadInteger(HY,(ZAE),113))
  local integer FJO=(LoadInteger(HY,(ZAE),114))
  local integer FKO=(LoadInteger(HY,(ZAE),115))
  local integer FLO=(LoadInteger(HY,(ZAE),116))
  local integer FMO=(LoadInteger(HY,(ZAE),117))
  call DisableTrigger(t_manipulateitem)
  if GetTriggerEvalCount(RBX)==1 then
    call UnitAddAbility(source,QIE)
    if booleans018[GetPlayerId(GetOwningPlayer(source))]==false then
      call UnitRemoveType(source,UNIT_TYPE_PEON)
    else
      call UnitAddType(source,UNIT_TYPE_PEON)
    endif
  else
    if ZBE>0 then
      set tt_item1=CreateItem(ZBE,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,whichPlayer,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FGO>0 then
      call SetItemCharges(tt_item1,FGO)
    endif
    if ZCE>0 then
      set tt_item1=CreateItem(ZCE,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FNO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FHO>0 then
      call SetItemCharges(tt_item1,FHO)
    endif
    if JUX>0 then
      set tt_item1=CreateItem(JUX,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FBO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FJO>0 then
      call SetItemCharges(tt_item1,FJO)
    endif
    if XPO>0 then
      set tt_item1=CreateItem(XPO,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FCO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FKO>0 then
      call SetItemCharges(tt_item1,FKO)
    endif
    if XQO>0 then
      set tt_item1=CreateItem(XQO,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FDO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FLO>0 then
      call SetItemCharges(tt_item1,FLO)
    endif
    if FAO>0 then
      set tt_item1=CreateItem(FAO,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FFO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FMO>0 then
      call SetItemCharges(tt_item1,FMO)
    endif
    if booleans018[GetPlayerId(GetOwningPlayer(source))]==false then
      call UnitRemoveType(source,UNIT_TYPE_PEON)
    else
      call UnitAddType(source,UNIT_TYPE_PEON)
    endif
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  call EnableTrigger(t_manipulateitem)
  set RBX=null
  set source=null
  set whichPlayer=null
  set FNO=null
  set FBO=null
  set FCO=null
  set FDO=null
  set FFO=null
  return false
endfunction

function Func1368 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitTypeId(source)
  local item AVX
  local item HTX
  local item FQO
  local item FSO
  local item FTO
  local item FUO
  local player whichPlayer
  local player FNO
  local player FBO
  local player FCO
  local player FDO
  local player FFO
  local integer ZBE
  local integer ZCE
  local integer JUX
  local integer XPO
  local integer XQO
  local integer FAO
  local integer FGO=-1
  local integer FHO=-1
  local integer FJO=-1
  local integer FKO=-1
  local integer FLO=-1
  local integer FMO=-1
  local integer FWO
  local item FYO
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  if source==null or IsDead(source)then
    return false
  endif
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  set AVX=UnitItemInSlot(source,0)
  set HTX=UnitItemInSlot(source,1)
  set FQO=UnitItemInSlot(source,2)
  set FSO=UnitItemInSlot(source,3)
  set FTO=UnitItemInSlot(source,4)
  set FUO=UnitItemInSlot(source,5)
  set ZBE=GetItemTypeId(AVX)
  set ZCE=GetItemTypeId(HTX)
  set JUX=GetItemTypeId(FQO)
  set XPO=GetItemTypeId(FSO)
  set XQO=GetItemTypeId(FTO)
  set FAO=GetItemTypeId(FUO)
  set whichPlayer=GetItemPlayer(AVX)
  set FNO=GetItemPlayer(HTX)
  set FBO=GetItemPlayer(FQO)
  set FCO=GetItemPlayer(FSO)
  set FDO=GetItemPlayer(FTO)
  set FFO=GetItemPlayer(FUO)
  set FYO=AVX
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FGO=GetItemCharges(FYO)
  endif
  set FYO=HTX
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FHO=GetItemCharges(FYO)
  endif
  set FYO=FQO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FJO=GetItemCharges(FYO)
  endif
  set FYO=FSO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FKO=GetItemCharges(FYO)
  endif
  set FYO=FTO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FLO=GetItemCharges(FYO)
  endif
  set FYO=FUO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FMO=GetItemCharges(FYO)
  endif
  call Func0888(AVX)
  call Func0888(HTX)
  call Func0888(FQO)
  call Func0888(FSO)
  call Func0888(FTO)
  call Func0888(FUO)
  if QIE=='n00I' then
    set FWO='S009'
  elseif QIE=='n022' then
    set FWO='S00V'
  elseif QIE=='n021' then
    set FWO='S00C'
  elseif QIE=='n023' then
    set FWO='S00E'
  elseif QIE=='n024' then
    set FWO='S00B'
  elseif QIE=='n025' then
    set FWO='S00F'
  elseif QIE=='n0KY' then
    set FWO='S00W'
  elseif QIE=='n0KZ' then
    set FWO='S00Y'
  elseif QIE=='n0L0' then
    set FWO='S00X'
  elseif QIE=='n0L1' then
    set FWO='S00D'
  elseif QIE=='n0LE' then
    set FWO='S01F'
  elseif QIE=='n0M4' then
    set FWO='S015'
  endif
  if GetRandomInt(1,10)==1 then
    set FWO='S00G'
  endif
  if GetRandomInt(1,10)<3 then
    set FWO='S016'
  endif
  if QIE=='n00M' then
    set FWO='S00L'
  elseif QIE=='n0LS' then
    set FWO='S00L'
  elseif QIE=='n0HV' then
    set FWO='S00F'
  endif
  if QIE=='e01H' then
    set FWO='S012'
  elseif QIE=='e01Z' then
    set FWO='S010'
  elseif QIE=='e02R' then
    set FWO='S014'
  elseif QIE=='e02T' then
    set FWO='S011'
  elseif QIE=='e02S' then
    set FWO='S017'
  elseif QIE=='e030' then
    set FWO='S013'
  endif
  call SavePlayerHandle(HY,(ZAE),118,(whichPlayer))
  call SavePlayerHandle(HY,(ZAE),119,(FNO))
  call SavePlayerHandle(HY,(ZAE),120,(FBO))
  call SavePlayerHandle(HY,(ZAE),121,(FCO))
  call SavePlayerHandle(HY,(ZAE),122,(FDO))
  call SavePlayerHandle(HY,(ZAE),123,(FFO))
  call SaveInteger(HY,(ZAE),106,(ZBE))
  call SaveInteger(HY,(ZAE),107,(ZCE))
  call SaveInteger(HY,(ZAE),108,(JUX))
  call SaveInteger(HY,(ZAE),109,(XPO))
  call SaveInteger(HY,(ZAE),110,(XQO))
  call SaveInteger(HY,(ZAE),111,(FAO))
  call SaveInteger(HY,(ZAE),112,(FGO))
  call SaveInteger(HY,(ZAE),113,(FHO))
  call SaveInteger(HY,(ZAE),114,(FJO))
  call SaveInteger(HY,(ZAE),115,(FKO))
  call SaveInteger(HY,(ZAE),116,(FLO))
  call SaveInteger(HY,(ZAE),117,(FMO))
  call SaveUnitHandle(HY,(ZAE),124,(source))
  call SaveInteger(HY,(ZAE),125,(FWO))
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerAddCondition(RBX,Condition(function Func1367))
  set RBX=null
  set source=null
  set AVX=null
  set HTX=null
  set FQO=null
  set FSO=null
  set FTO=null
  set FUO=null
  set FYO=null
  set whichPlayer=null
  set FNO=null
  set FBO=null
  set FCO=null
  set FDO=null
  set FFO=null
  return false
endfunction

function Func1369 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.05,false)
  call TriggerAddCondition(RBX,Condition(function Func1368))
  call SaveUnitHandle(HY,(ZAE),2,(GetTriggerUnit()))
  set RBX=null
endfunction

function Func1370 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),124))
  local integer QIE=(LoadInteger(HY,(ZAE),125))
  local integer ZBE=(LoadInteger(HY,(ZAE),106))
  local integer ZCE=(LoadInteger(HY,(ZAE),107))
  local integer JUX=(LoadInteger(HY,(ZAE),108))
  local integer XPO=(LoadInteger(HY,(ZAE),109))
  local integer XQO=(LoadInteger(HY,(ZAE),110))
  local integer FAO=(LoadInteger(HY,(ZAE),111))
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),118))
  local player FNO=(LoadPlayerHandle(HY,(ZAE),119))
  local player FBO=(LoadPlayerHandle(HY,(ZAE),120))
  local player FCO=(LoadPlayerHandle(HY,(ZAE),121))
  local player FDO=(LoadPlayerHandle(HY,(ZAE),122))
  local player FFO=(LoadPlayerHandle(HY,(ZAE),123))
  local integer FGO=(LoadInteger(HY,(ZAE),112))
  local integer FHO=(LoadInteger(HY,(ZAE),113))
  local integer FJO=(LoadInteger(HY,(ZAE),114))
  local integer FKO=(LoadInteger(HY,(ZAE),115))
  local integer FLO=(LoadInteger(HY,(ZAE),116))
  local integer FMO=(LoadInteger(HY,(ZAE),117))
  call DisableTrigger(t_manipulateitem)
  if GetTriggerEvalCount(RBX)==1 then
    call UnitAddAbility(source,QIE)
    if booleans018[GetPlayerId(GetOwningPlayer(source))]==false then
      call UnitRemoveType(source,UNIT_TYPE_PEON)
    else
      call UnitAddType(source,UNIT_TYPE_PEON)
    endif
  else
    if ZBE>0 then
      set tt_item1=CreateItem(ZBE,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,whichPlayer,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FGO>0 then
      call SetItemCharges(tt_item1,FGO)
    endif
    if ZCE>0 then
      set tt_item1=CreateItem(ZCE,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FNO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FHO>0 then
      call SetItemCharges(tt_item1,FHO)
    endif
    if JUX>0 then
      set tt_item1=CreateItem(JUX,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FBO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FJO>0 then
      call SetItemCharges(tt_item1,FJO)
    endif
    if XPO>0 then
      set tt_item1=CreateItem(XPO,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FCO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FKO>0 then
      call SetItemCharges(tt_item1,FKO)
    endif
    if XQO>0 then
      set tt_item1=CreateItem(XQO,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FDO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FLO>0 then
      call SetItemCharges(tt_item1,FLO)
    endif
    if FAO>0 then
      set tt_item1=CreateItem(FAO,GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,tt_item1)
      call SetItemPlayer(tt_item1,FFO,false)
      call SetItemUserData(tt_item1,1)
    endif
    if FMO>0 then
      call SetItemCharges(tt_item1,FMO)
    endif
    if booleans018[GetPlayerId(GetOwningPlayer(source))]==false then
      call UnitRemoveType(source,UNIT_TYPE_PEON)
    else
      call UnitAddType(source,UNIT_TYPE_PEON)
    endif
    call SetUnitFlyHeight(source,240,0)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  call EnableTrigger(t_manipulateitem)
  set RBX=null
  set source=null
  set whichPlayer=null
  set FNO=null
  set FBO=null
  set FCO=null
  set FDO=null
  set FFO=null
  return false
endfunction

function Func1371 takes unit source returns nothing
  local integer ZAE=GetUnitTypeId(source)
  local item AVX
  local item HTX
  local item FQO
  local item FSO
  local item FTO
  local item FUO
  local player whichPlayer
  local player FNO
  local player FBO
  local player FCO
  local player FDO
  local player FFO
  local integer QIE
  local integer ZBE
  local integer ZCE
  local integer JUX
  local integer XPO
  local integer XQO
  local integer FAO=-1
  local integer FGO=-1
  local integer FHO=-1
  local integer FJO=-1
  local integer FKO=-1
  local integer FLO=-1
  local trigger RBX=CreateTrigger()
  local integer FMO=GetHandleId(RBX)
  local integer FWO
  local item FYO
  local integer F1O
  local item F2O
  set F1O=0
  loop
    exitwhen F1O>5
    set F2O=UnitItemInSlot(source,F1O)
    if GetIndex(F2O)==integer135 then
      call UnitRemoveItem(source,F2O)
    endif
    set F1O=F1O+1
  endloop
  set AVX=UnitItemInSlot(source,0)
  set HTX=UnitItemInSlot(source,1)
  set FQO=UnitItemInSlot(source,2)
  set FSO=UnitItemInSlot(source,3)
  set FTO=UnitItemInSlot(source,4)
  set FUO=UnitItemInSlot(source,5)
  set QIE=GetItemTypeId(AVX)
  set ZBE=GetItemTypeId(HTX)
  set ZCE=GetItemTypeId(FQO)
  set JUX=GetItemTypeId(FSO)
  set XPO=GetItemTypeId(FTO)
  set XQO=GetItemTypeId(FUO)
  set whichPlayer=GetItemPlayer(AVX)
  set FNO=GetItemPlayer(HTX)
  set FBO=GetItemPlayer(FQO)
  set FCO=GetItemPlayer(FSO)
  set FDO=GetItemPlayer(FTO)
  set FFO=GetItemPlayer(FUO)
  set FYO=AVX
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FAO=GetItemCharges(FYO)
  endif
  set FYO=HTX
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FGO=GetItemCharges(FYO)
  endif
  set FYO=FQO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FHO=GetItemCharges(FYO)
  endif
  set FYO=FSO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FJO=GetItemCharges(FYO)
  endif
  set FYO=FTO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FKO=GetItemCharges(FYO)
  endif
  set FYO=FUO
  if GetItemType(FYO)==ITEM_TYPE_ARTIFACT or IsIndexIdCharged(GetIndex(FYO))or IsIndexIdConsumable(GetIndex(FYO))then
    set FLO=GetItemCharges(FYO)
  endif
  call Func0888(AVX)
  call Func0888(HTX)
  call Func0888(FQO)
  call Func0888(FSO)
  call Func0888(FTO)
  call Func0888(FUO)
  if IsSentinel(GetOwningPlayer(source))then
    set FWO='S00I'
  else
    set FWO='S00J'
  endif
  if GetRandomInt(1,3)==1 then
    set FWO='S00Z'
  endif
  call SavePlayerHandle(HY,(FMO),118,(whichPlayer))
  call SavePlayerHandle(HY,(FMO),119,(FNO))
  call SavePlayerHandle(HY,(FMO),120,(FBO))
  call SavePlayerHandle(HY,(FMO),121,(FCO))
  call SavePlayerHandle(HY,(FMO),122,(FDO))
  call SavePlayerHandle(HY,(FMO),123,(FFO))
  call SaveInteger(HY,(FMO),106,(QIE))
  call SaveInteger(HY,(FMO),107,(ZBE))
  call SaveInteger(HY,(FMO),108,(ZCE))
  call SaveInteger(HY,(FMO),109,(JUX))
  call SaveInteger(HY,(FMO),110,(XPO))
  call SaveInteger(HY,(FMO),111,(XQO))
  call SaveInteger(HY,(FMO),112,(FAO))
  call SaveInteger(HY,(FMO),113,(FGO))
  call SaveInteger(HY,(FMO),114,(FHO))
  call SaveInteger(HY,(FMO),115,(FJO))
  call SaveInteger(HY,(FMO),116,(FKO))
  call SaveInteger(HY,(FMO),117,(FLO))
  call SaveUnitHandle(HY,(FMO),124,(source))
  call SaveInteger(HY,(FMO),125,(FWO))
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerAddCondition(RBX,Condition(function Func1370))
  set RBX=null
  set source=null
  set AVX=null
  set HTX=null
  set FQO=null
  set FSO=null
  set FTO=null
  set FUO=null
  set FYO=null
  set F2O=null
  set whichPlayer=null
  set FNO=null
  set FBO=null
  set FCO=null
  set FDO=null
  set FFO=null
endfunction

function Func1372 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local item AVX=Func0693(source,Item_Real[RecipeFlyingCourier])
  local boolean AYX=LoadBoolean(HY,ZAE,0)
  if AYX==false then
    if AVX==null then
      set AVX=Func0693(source,Item_Mute[RecipeFlyingCourier])
    endif
  endif
  if AVX!=null or AYX then
    if AYX==false then
      call RemoveItem(AVX)
    endif
    call Func1371(source)
  else
    call Error(GetOwningPlayer(source),GetObjectName('n02Q'))
  endif
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set AVX=null
  return false
endfunction

function Func1373 takes unit source,boolean AYX returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.05,false)
  call TriggerAddCondition(RBX,Condition(function Func1372))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveBoolean(HY,ZAE,0,AYX)
  set RBX=null
endfunction

function Func1374 takes nothing returns nothing
  call Func1373(tt_unit1,true)
endfunction

function GetBlinkDestination takes unit u,real tx,real ty returns nothing
  local real ux=GetUnitX(u)
  local real uy=GetUnitY(u)
  local real GXE
  local real F6O=1200.+Func0773(u)
  if DistanceBetweenXY(tx,ty,ux,uy)>F6O then
    set GXE= AngleBetweenXY(ux,uy,tx,ty)
    set tx=Func0664(ux+F6O*0.75*Cos(GXE*bj_DEGTORAD))
    set ty=Func0666(uy+F6O*0.75*Sin(GXE*bj_DEGTORAD))
  else
    set tx=Func0664(tx)
    set ty=Func0666(ty)
  endif
  call SaveReal(TempHash,'dgrd',0,tx)
  call SaveReal(TempHash,'dgrd',1,ty)
endfunction

function BlinkTargetWrapper takes nothing returns nothing
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit u=GetTriggerUnit()
  local item it
  local string s="Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl"
  if GetUnitTypeId(u)==HeroID[11]then
    set s="Items\\FX\\FireBlink.mdx"
  endif
  if GetSpellTargetItem()!=null or(DistanceBetweenXY(x,y,GetUnitX(u),GetUnitY(u))<100)then
    if IsSentinel(GetOwningPlayer(u))then
      set x=GetUnitX(SentFountain)
      set y=GetUnitY(SentFountain)
    else
      set x=GetUnitX(ScourgeFountain)
      set y=GetUnitY(ScourgeFountain)
    endif
  endif
  call GetBlinkDestination(u,x,y)
  set it=CreateItem('I0V7',LoadReal(TempHash,'dgrd',0),LoadReal(TempHash,'dgrd',1))
  call DestroyEffect(AddSpecialEffect(s,GetUnitX(u),GetUnitY(u)))
  call UnitAddItem(u,it)
  if GetWidgetLife(it)>0 then
    call RemoveItem(it)
  endif
  call DestroyEffect(AddSpecialEffect(s,GetUnitX(u),GetUnitY(u)))
  set it=null
  set u=null
endfunction

function Func1377 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  local item it=GetManipulatedItem()
  local integer id=GetItemTypeId(it)
  local integer i
  call Func1269(u,it)
  if(GetItemTypeId(it)==Item_Real[integer292]or GetItemTypeId(it)==Item_Real[integer293])and IsCourier(u)then
    call UnitRemoveItem(u,it)
  elseif GetItemTypeId(it)==Item_Real[integer300]then
    set i=(LoadInteger(HY,(GetHandleId(u)),750))
    if i>0 then
      if(LoadBoolean(HY,(GetHandleId(u)),751))==false then
        call SaveBoolean(HY,(GetHandleId(u)),751,(true))
        call SetItemCharges(it,i)
      endif
    endif
  elseif GetItemTypeId(it)==Item_Real[Aegis]and u!=Roshan and boolean118==false then
    set unit156=u
    set boolean118=true
    call Traffic_RegisterData("AegisOn",GetPlayerId(GetOwningPlayer(u)))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,udg_Colors[GetPlayerId(GetOwningPlayer(u))]+GetUnitName(u)+"|r "+GetObjectName('n0EQ'))
  elseif GetItemTypeId(it)==Item_Real[RecipeFlyingCourier]and IsBasicCourier(u)then
    call Func1373(u,false)
  endif
  set u=null
  set it=null
  return false
endfunction

function TangoHelingDur takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real heal=LoadReal(HY,h,0)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,0)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call UnitRemoveAbility(u,'A0PV')
    call UnitRemoveAbility(u,'B07L')
    call RemoveSavedHandle(HY,GetHandleId(u),'TNGO')
    call DestroyTrigger(t)
    call FlushChildHashtable(HY,h)
  else
    if c>0 then
      call SaveInteger(HY,h,0,c-1)
      call SetWidgetLife(u,GetWidgetLife(u)+heal)
    else
      call UnitRemoveAbility(u,'A0PV')
      call UnitRemoveAbility(u,'B07L')
      call RemoveSavedHandle(HY,GetHandleId(u),'TNGO')
      call DestroyTrigger(t)
      call FlushChildHashtable(HY,h)
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func1379 takes real IIX,real D1E returns nothing
  local trigger t
  local integer h
  local unit u=GetTriggerUnit()
  if HaveSavedHandle(HY,GetHandleId(u),'TNGO')then
    set t=LoadTriggerHandle(HY,GetHandleId(u),'TNGO')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,GetHandleId(u),'TNGO',t)
    call SaveUnitHandle(HY,h,0,u)
    call TriggerRegisterTimerEvent(t,0.2,true)
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function TangoHelingDur))
    call UnitAddAbility2(u,'A0PV')
  endif
  call SaveReal(HY,h,0,IIX/ 5.)
  call SaveInteger(HY,h,0,R2I(D1E)*5)
  set t=null
  set u=null
endfunction

function Func1380 takes nothing returns nothing
  if GetSpellTargetDestructable()!=null then
    if GetDestructableTypeId(GetSpellTargetDestructable())=='BTtc' then
      call Func1379(7.1875,32.)
    else
      call Func1379(7.1875,16.)
    endif
  elseif GetSpellTargetUnit()!=null then
    if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit()))and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)or IsUnitSpiritBear(GetSpellTargetUnit()))then
      call UnitAddItemById(GetSpellTargetUnit(),Item_Dummy[integer197])
    elseif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit()))and(GetUnitTypeId(GetSpellTargetUnit())=='oeye' or GetUnitTypeId(GetSpellTargetUnit())=='o004')then
      call Func1379(7.1875,32.)
      call Func0648(GetTriggerUnit(),GetSpellTargetUnit(),2,500,0.)
    else
      call CreateItem(Item_Dummy[integer197],GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
    endif
  endif
endfunction

function Func1381 takes integer ZAE,real result,real ZEE returns nothing
  if IsPointInRegion(region009,result,ZEE)==false then
    set integer448=integer448+1
    set players006[integer448]=Player(ZAE)
    set reals012[integer448]=result
    set reals013[integer448]=ZEE
    set reals014[integer448]=(TimerGetElapsed(GlobalTimer))
  endif
endfunction

function Func1382 takes integer ZAE,real result,real ZEE returns integer
  local real ZWE=(TimerGetElapsed(GlobalTimer))
  local integer QIE=0
  local integer ZBE=0
  if IsPointInRegion(region009,result,ZEE)then
    return ZBE
  endif
  loop
    exitwhen QIE>integer448
    if(ZWE<reals014[QIE]+25.)and(DistanceBetweenXY(result,ZEE,reals012[QIE],reals013[QIE])<real031*2+50)and IsPlayerAlly(Player(ZAE),players006[QIE])then
      set ZBE=ZBE+1
    endif
    set QIE=QIE+1
  endloop
  return ZBE
endfunction

function Func1383 takes integer i returns integer
  if i==GetPlayerId(Sentinels[1])then
    return'h0BI'
  elseif i==GetPlayerId(Sentinels[2])then
    return'h0BK'
  elseif i==GetPlayerId(Sentinels[3])then
    return'h0BG'
  elseif i==GetPlayerId(Sentinels[4])then
    return'h0BF'
  elseif i==GetPlayerId(Sentinels[5])then
    return'h0BL'
  elseif i==GetPlayerId(Scourges[1])then
    return'h0BH'
  elseif i==GetPlayerId(Scourges[2])then
    return'h0BJ'
  elseif i==GetPlayerId(Scourges[3])then
    return'h0BM'
  elseif i==GetPlayerId(Scourges[4])then
    return'h0A5'
  elseif i==GetPlayerId(Scourges[5])then
    return'h0BN'
  endif
  return'h0BN'
endfunction

function Func1384 takes integer i returns integer
  return'h0AX'
endfunction

function Func1385 takes integer i returns string
  if i==GetPlayerId(Sentinels[1])then
    return"war3mapImported\\TeleportTarget_Blue.mdx"
  elseif i==GetPlayerId(Sentinels[2])then
    return"war3mapImported\\TeleportTarget_Teal.mdx"
  elseif i==GetPlayerId(Sentinels[3])then
    return"war3mapImported\\TeleportTarget_Purple.mdx"
  elseif i==GetPlayerId(Sentinels[4])then
    return"war3mapImported\\TeleportTarget_Yellow.mdx"
  elseif i==GetPlayerId(Sentinels[5])then
    return"war3mapImported\\TeleportTarget_Orange.mdx"
  elseif i==GetPlayerId(Scourges[1])then
    return"war3mapImported\\TeleportTarget_Pink.mdx"
  elseif i==GetPlayerId(Scourges[2])then
    return"war3mapImported\\TeleportTarget_Gray.mdx"
  elseif i==GetPlayerId(Scourges[3])then
    return"war3mapImported\\TeleportTarget_LightBlue.mdx"
  elseif i==GetPlayerId(Scourges[4])then
    return"war3mapImported\\TeleportTarget_DarkGreen.mdx"
  elseif i==GetPlayerId(Scourges[5])then
    return"war3mapImported\\TeleportTarget_Brown.mdx"
  endif
  return"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"
endfunction

function Func1386 takes nothing returns boolean
  local real result
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),'Asud')==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(tt_unit3))and IsPowerCog(GetFilterUnit())==false and GetUnitTypeId(GetFilterUnit())!='ncop' and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(GetFilterUnit())!='n036' and GetUnitTypeId(GetFilterUnit())!='n129' then
    set result=DistanceBetweenXY(real024,real025,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
    if result<real023 then
      set real023=result
      set tt_unit1=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func1387 takes unit source,real result,real ZEE returns unit
  local group g=GetAvailableGroup()
  set tt_unit1=null
  set tt_unit3=source
  set real023=99999
  set real024=result
  set real025=ZEE
  call GroupEnumUnitsInRange(g,result,ZEE,99999,Condition(function Func1386))
  call KillGroup(g)
  set g=null
  return tt_unit1
endfunction

function Func1388 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='nfoh' or i=='ndfl'
endfunction

function Func1389 takes unit u returns boolean
  return u!=tt_unit3 and(GetUnitAbilityLevel(u,'A04R')==0 or Func1388(u))and IsDead(u)==false and GetUnitAbilityLevel(u,'Asud')==0 and IsUnitAlly(u,GetOwningPlayer(tt_unit3))and GetOwningPlayer(u)!=player004
endfunction

function Func1390 takes unit u returns boolean
  return Func1389(u)and IsHeroUnitId(GetUnitTypeId(u))==false
endfunction

function Func1391 takes nothing returns boolean
  local real result
  if Func1390(GetFilterUnit())then
    set result=DistanceBetweenXY(real024,real025,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
    if result<real023 then
      set real023=result
      set tt_unit1=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func1392 takes nothing returns boolean
  local real result
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitTypeId(GetFilterUnit())!='n036' and Func1390(GetFilterUnit())then
    set result=DistanceBetweenXY(real024,real025,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
    if result<real023 and result<325 then
      set real023=result
      set tt_unit1=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func1393 takes unit source,real result,real ZEE returns unit
  local group g=GetAvailableGroup()
  set tt_unit1=null
  set tt_unit3=source
  set real023=99999
  set real024=result
  set real025=ZEE
  call GroupEnumUnitsInRange(g,result,ZEE,99999,Condition(function Func1392))
  if tt_unit1==null then
    call GroupEnumUnitsInRange(g,result,ZEE,99999,Condition(function Func1391))
  endif
  call KillGroup(g)
  set g=null
  return tt_unit1
endfunction

function Func1394 takes nothing returns boolean
  local real result
  if Func1389(GetFilterUnit())then
    set result=DistanceBetweenXY(real024,real025,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
    if result<real023 then
      set real023=result
      set tt_unit1=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func1395 takes nothing returns boolean
  local real result
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and Func1389(GetFilterUnit())then
    set result=DistanceBetweenXY(real024,real025,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
    if result<real023 and result<325 then
      set real023=result
      set tt_unit1=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func1396 takes unit source,real result,real ZEE returns unit
  local group g=GetAvailableGroup()
  set tt_unit1=null
  set tt_unit3=source
  set real023=99999
  set real024=result
  set real025=ZEE
  call GroupEnumUnitsInRange(g,result,ZEE,99999,Condition(function Func1395))
  if tt_unit1==null then
    set tt_unit3=source
    call GroupEnumUnitsInRange(g,result,ZEE,99999,Condition(function Func1394))
  endif
  call KillGroup(g)
  return tt_unit1
endfunction

function Func1397 takes unit u,real r returns nothing
  local texttag tt
  if r==0 then
    return
  endif
  set tt=CreateTextTag()
  call SetTextTagText(tt,R2SW(r,1,1),.03)
  call SetTextTagPosUnit(tt,u,0)
  call SetTextTagColorBJ(tt,150,75,255,15)
  call SetTextTagVelocity(tt,0,.035)
  call SetTextTagFadepoint(tt,3)
  call SetTextTagLifespan(tt,.5)
  call SetTextTagPermanent(tt,false)
  call SetTextTagVisibility(tt,IsUnitAlly(u,LocalPlayer)or PlayerObserver)
endfunction

function Func1398 takes unit u returns nothing
  if GetUnitTypeId(u)=='U0A9' then
    call SetUnitAnimationByIndex(u,9)
  endif
endfunction

function Func1399 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local unit GTO=(LoadUnitHandle(HY,h,448))
  local unit GUO=(LoadUnitHandle(HY,h,447))
  local ubersplat ub=(LoadUbersplatHandle(HY,h,131))
  local integer c=(LoadInteger(HY,h,34))
  local real UME=(LoadReal(HY,h,57))
  local real startTime=(LoadReal(HY,h,442))
  local integer WVE=GetPlayerId(GetOwningPlayer(SKE))
  local boolean b=false
  local real GWO
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
    if GetSpellAbilityId()=='A1R5' then
      set b=true
    endif
  else
    set c=c+1
    call SaveInteger(HY,h,34,(c))
    set GWO=UME-c*0.5
    if GWO==3. then
      call SetUnitAnimationByIndex(GTO,1)
      call SetUnitAnimationByIndex(GUO,1)
    endif
    if c*0.5==UME then
      set b=true
    endif
    call Func1397(SKE,GWO)
  endif
  if b then
    call SaveInteger(HY,(GetHandleId(SKE)),4256,2)
    call KillUnit(GTO)
    call KillUnit(GUO)
    call Func0682(ub)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call Func0477(GTO,1)
    call Func0477(GUO,1)
    if c*0.5==UME then
      call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",GetUnitX(SKE),GetUnitY(SKE)))
      call DestroyEffect(AddSpecialEffect(Func1385(WVE),x,y))
      call Func0770(SKE,true,x,y)
      call Func1398(SKE)
      call KillTrees(x,y,240)
    endif
  endif
  set t=null
  set SKE=null
  set GTO=null
  set GUO=null
  set ub=null
  return false
endfunction

function Func1400 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,14)
  local unit SGE=LoadUnitHandle(HY,h,17)
  local unit GTO=LoadUnitHandle(HY,h,448)
  local unit GUO=LoadUnitHandle(HY,h,447)
  local ubersplat ub=LoadUbersplatHandle(HY,h,131)
  local real UME=LoadReal(HY,h,57)
  local boolean FEX=false
  local item it
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
    if GetSpellAbilityId()=='A231' or GetSpellAbilityId()=='A3AG' then
      set FEX=true
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    set FEX=true
  else
    set UME=UME-0.02
    if UME==0 then
      call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(SKE),GetUnitY(SKE)))
      set FEX=true
      call KillTrees(GetUnitX(SGE)-1,GetUnitY(SGE)-1,240)
      call Func0770(SKE,true,GetUnitX(SGE)-1,GetUnitY(SGE)-1)
      call Func1398(SKE)
      call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(SKE),GetUnitY(SKE)))
    else
      call SaveReal(HY,h,57,UME)
      call SetUnitX(GTO,GetUnitX(SKE))
      call SetUnitY(GTO,GetUnitY(SKE))
      call SetUnitX(GUO,GetUnitX(SGE))
      call SetUnitY(GUO,GetUnitY(SGE))
    endif
  endif
  if FEX then
    call SaveInteger(HY,GetHandleId(SKE),4256,2)
    call KillUnit(GTO)
    call KillUnit(GUO)
    call Func0682(ub)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if IsUnitType(SGE,UNIT_TYPE_HERO)==false then
      call UnitRemoveType(SGE,UNIT_TYPE_PEON)
    endif
  endif
  set t=null
  set SKE=null
  set GTO=null
  set GUO=null
  set ub=null
  set SGE=null
  return false
endfunction

function Func1401 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real x
  local real y
  local real GXE
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit GTO
  local unit GUO
  local ubersplat ub
  local integer WVE=GetPlayerId(GetOwningPlayer(SKE))
  local integer G_O
  local real UME=3.
  local integer a
  call SaveInteger(HY,GetHandleId(SKE),4256,1)
  set x=GetSpellTargetX()
  set y=GetSpellTargetY()
  if DistanceBetweenXY(x,y,GetUnitX(SKE),GetUnitY(SKE))<150 or GetSpellTargetItem()!=null then
    if IsSentinel(GetOwningPlayer(SKE))then
      set x=GetUnitX(SentFountain)
      set y=GetUnitY(SentFountain)
    else
      set x=GetUnitX(ScourgeFountain)
      set y=GetUnitY(ScourgeFountain)
    endif
  endif
  set SGE=Func1387(SKE,x,y)
  if DistanceBetweenXY(x,y,GetUnitX(SGE),GetUnitY(SGE))>real031 then
    set GXE=Atan2(y-GetUnitY(SGE),x-GetUnitX(SGE))
    set x=GetUnitX(SGE)+real031*Cos(GXE)
    set y=GetUnitY(SGE)+real031*Sin(GXE)
  elseif DistanceBetweenXY(x,y,GetUnitX(SGE),GetUnitY(SGE))<50 then
    set GXE=Atan2(y-GetUnitY(SGE),x-GetUnitX(SGE))
    set x=GetUnitX(SGE)+120*Cos(GXE)
    set y=GetUnitY(SGE)+120*Sin(GXE)
  endif
  if Func0429(x,y)==false then
    set GXE=Atan2(y-GetUnitY(SGE),x-GetUnitX(SGE))
    set x=GetUnitX(SGE)+200*Cos(GXE)
    set y=GetUnitY(SGE)+200*Sin(GXE)
  endif
  set x=SafeX50(x)
  set y=SafeY50(y)
  if(IsUnitAlly(SKE,LocalPlayer)and LocalPlayer!=GetOwningPlayer(SKE))or(PlayerObserver)then
    call nPngMinimapEx(x,y,3,255,255,255,false)
  endif
  set GUO=CreateUnit(GetOwningPlayer(SKE),Func1383(WVE),x,y,0)
  set GTO=CreateUnit(GetOwningPlayer(SKE),Func1383(WVE),GetUnitX(SKE),GetUnitY(SKE),0)
  set ub=Func0681(GetUnitX(SKE),GetUnitY(SKE),"SCTP",255,255,255,255,false,false)
  call Func0683(ub,Func0590(SKE))
  set G_O=Func1382(GetPlayerId(GetOwningPlayer(SKE)),x,y)
  if G_O>0 then
    set UME=4.5+0.5*G_O
  endif
  set a=GetUnitAbility(SKE,'A1R5')
  if a>0 then
    set Memory[Memory[(a+0x54)/4]/4+0x78/4]=SetRealIntoMemory(UME)
    set Memory[(a+0x94)/4]=SetRealIntoMemory(UME)
  endif
  call Func1397(SKE,UME)
  call Func1381(GetPlayerId(GetOwningPlayer(SKE)),x,y)
  if G_O>0 then
    call SetUnitAnimationByIndex(GTO,2)
    call SetUnitAnimationByIndex(GUO,2)
  endif
  call TriggerRegisterTimerEvent(t,0.5,true)
  call SaveReal(HY,h,0,UME)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func1399))
  call TimedReveal(GetOwningPlayer(SKE),UME,x,y,200)
  call SaveUnitHandle(HY,h,447,(GUO))
  call SaveUnitHandle(HY,h,448,(GTO))
  call SaveReal(HY,h,6,x)
  call SaveReal(HY,h,7,y)
  call SaveReal(HY,h,442,TimerGetElapsed(GlobalTimer)*1.0)
  call SaveReal(HY,h,57,UME)
  call SaveUbersplatHandle(HY,h,131,(ub))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveInteger(HY,h,34,0)
  call Func0751(SKE,sound045,x,y,2400)
  set SKE=null
  set SGE=null
  set GTO=null
  set GUO=null
  set t=null
  set ub=null
endfunction

function Func1402 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real x
  local real y
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local ubersplat ub
  local integer WVE=GetPlayerId(GetOwningPlayer(SKE))
  local integer r
  local real D1E=3.
  local unit GUO
  local unit GTO
  local integer a
  if SGE==null or SKE==SGE or IsUnitEnemy(SGE,GetTriggerPlayer())or(GetUnitAbilityLevel(SGE,'A04R')>0 and GetUnitAbilityLevel(SGE,'Bpsh')==0 and GetUnitAbilityLevel(SGE,'a3NW')==0)then
    set x=GetSpellTargetX()
    set y=GetSpellTargetY()
    if DistanceBetweenXY(x,y,GetUnitX(SKE),GetUnitY(SKE))<150 or GetSpellTargetItem()!=null then
      if IsSentinel(GetOwningPlayer(SKE))then
        set x=GetUnitX(SentFountain)
        set y=GetUnitY(SentFountain)
      else
        set x=GetUnitX(ScourgeFountain)
        set y=GetUnitY(ScourgeFountain)
      endif
    endif
    if GetSpellAbilityId()=='A3AG' then
      set SGE=Func1396(SKE,x,y)
    else
      set SGE=Func1393(SKE,x,y)
    endif
  endif
  set a=GetUnitAbility(SKE,GetSpellAbilityId())
  if a>0 then
    set Memory[(a+0x94)/4]=SetRealIntoMemory(3.)
  endif
  call SaveInteger(HY,(GetHandleId(SKE)),4256,1)
  set x=GetUnitX(SGE)
  set y=GetUnitY(SGE)
  if(IsUnitAlly(SKE,LocalPlayer)and LocalPlayer!=GetOwningPlayer(SKE))or(PlayerObserver)then
    call nPngMinimapEx(x,y,3,255,255,255,false)
  endif
  set ub=Func0681(GetUnitX(SKE),GetUnitY(SKE),"SCTP",255,255,255,255,false,false)
  call Func0683(ub,Func0590(SKE))
  if IsUnitType(SGE,UNIT_TYPE_HERO)==false and IsUnitType(SGE,UNIT_TYPE_PEON)==false then
    call UnitAddType(SGE,UNIT_TYPE_PEON)
  endif
  call TriggerRegisterTimerEvent(t,D1E,false)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func1400))
  call SaveBoolean(HY,h,102,true)
  call SaveInteger(HY,h,102,GetSpellAbilityId())
  call TimedReveal(GetOwningPlayer(SKE),D1E,x,y,200)
  call SaveReal(HY,h,6,x)
  call SaveReal(HY,h,7,y)
  call SaveReal(HY,h,442,TimerGetElapsed(GlobalTimer))
  call SaveReal(HY,h,57,D1E)
  call SaveUbersplatHandle(HY,h,131,(ub))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,34,0)
  set GUO=CreateUnit(GetOwningPlayer(SKE),Func1383(WVE),GetUnitX(SGE),GetUnitY(SGE),0)
  set GTO=CreateUnit(GetOwningPlayer(SKE),Func1384(WVE),GetUnitX(SKE),GetUnitY(SKE),0)
  call SetUnitAnimationByIndex(GUO,1)
  call SetUnitAnimationByIndex(GTO,1)
  call SaveUnitHandle(HY,h,447,GUO)
  call SaveUnitHandle(HY,h,448,GTO)
  call Func0751(SKE,sound045,x,y,2400)
  set SKE=null
  set SGE=null
  set t=null
  set ub=null
  set GUO=null
  set GTO=null
endfunction

function Func1403 takes nothing returns boolean
  if Func0617(GetFilterUnit())then
    if LoadInteger(TempHash,0,0)==LoadInteger(HY,GetHandleId(GetFilterUnit()),784)then
      call KillUnit(GetFilterUnit())
    endif
  endif
  return false
endfunction

function Func1404 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit G3O
  local unit G4O
  local integer G5O
  local integer G6O
  local group g=GetAvailableGroup()
  local real a=GetUnitFacing(SKE)*bj_DEGTORAD
  local real x1=GetUnitX(SKE)+50*Cos(a)
  local real y1=GetUnitY(SKE)+50*Sin(a)
  local real x2=GetUnitX(SKE)+50*Cos(a)
  local real y2=GetUnitY(SKE)+50*Sin(a)
  if GetSpellAbilityId()=='A0HB' then
    set G5O='n00H'
    set G6O='n00J'
  elseif GetSpellAbilityId()=='A0D3' then
    set G5O='n00G'
    set G6O='n00A'
  elseif GetSpellAbilityId()=='A0DF' then
    set G5O='n00K'
    set G6O='n006'
  endif
  call SaveInteger(TempHash,0,0,GetHandleId(SKE))
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function Func1403))
  call KillGroup(g)
  set G3O=CreateUnit(GetOwningPlayer(SKE),G5O,x1,y1,GetUnitFacing(SKE))
  call SaveInteger(HY,GetHandleId(G3O),784,GetHandleId(SKE))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",G3O,"origin"))
  call UnitApplyTimedLife(G3O,'BTLF',40)
  set G4O=CreateUnit(GetOwningPlayer(SKE),G6O,x2,y2,GetUnitFacing(SKE))
  call SaveInteger(HY,GetHandleId(G4O),784,GetHandleId(SKE))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",G4O,"origin"))
  call UnitApplyTimedLife(G4O,'BTLF',40)
  set g=null
  set G3O=null
  set G4O=null
  set SKE=null
endfunction

function Func1405 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetTriggerUnit(),'A1CN',1,4.5,0)
endfunction

function Func1406 takes unit u returns nothing
  local boolean E8X=IsSentinel(GetOwningPlayer(u))
  local boolean G9O=IsScourge(GetOwningPlayer(u))
  if G9O then
    call UnitShareVision(u,Scourges[0],false)
    call UnitShareVision(u,Scourges[1],false)
    call UnitShareVision(u,Scourges[2],false)
    call UnitShareVision(u,Scourges[3],false)
    call UnitShareVision(u,Scourges[4],false)
    call UnitShareVision(u,Scourges[5],false)
  elseif E8X then
    call UnitShareVision(u,Sentinels[0],false)
    call UnitShareVision(u,Sentinels[1],false)
    call UnitShareVision(u,Sentinels[2],false)
    call UnitShareVision(u,Sentinels[3],false)
    call UnitShareVision(u,Sentinels[4],false)
    call UnitShareVision(u,Sentinels[5],false)
  endif
endfunction

function Func1407 takes nothing returns boolean
  return LoadInteger(HY,GetHandleId(GetFilterUnit()),4323)==1
endfunction

function Func1408 takes nothing returns nothing
  local group g
  local unit u
  if Func0617(GetSpellTargetUnit())==false then
    set g=GetAvailableGroup()
    call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function Func1407))
    set u=FirstOfGroup(g)
    call KillGroup(g)
    if u!=null then
      call KillUnit(u)
    endif
    set u=GetSpellTargetUnit()
    call Func1406(u)
    call SetUnitOwner(u,GetOwningPlayer(GetTriggerUnit()),true)
    call SaveInteger(HY,GetHandleId(u),4323,1)
    call UnitAddAbility2(u,'ACrk')
    if GetUnitState(u,UNIT_STATE_MAX_LIFE)<1400 then
      call Func0798(u,R2I(1400-GetUnitState(u,UNIT_STATE_MAX_LIFE)))
    endif
    call SelectSummons(u)
    call SetWidgetLife(u,99999)
    call SetUnitMoveSpeed(u,350)
    call Func0680(u)
    set u=null
  endif
endfunction

function Func1409 takes integer i returns integer
  if i==10 then
    return'A11B'
  elseif i==9then
    return'A11A'
  elseif i==8then
    return'A0S2'
  elseif i==7then
    return'A119'
  elseif i==6then
    return'A11C'
  elseif i==5then
    return'A118'
  endif
  return 0
endfunction

function Func1410 takes unit u returns integer
  if LoadInteger(HY,GetHandleId(u),'0BKB')==0 then
    if IsUnitSpiritBear(u)then
      set u=udg_Hero[GetPlayerId(GetOwningPlayer(u))]
      if LoadInteger(HY,GetHandleId(u),'0BKB'+1)==0 then
        call SaveInteger(HY,GetHandleId(u),'0BKB'+1,9)
        return 10
      else
        call SaveInteger(HY,GetHandleId(u),'0BKB'+1,IMaxIF(LoadInteger(HY,GetHandleId(u),'0BKB'+1)-1,4))
        return LoadInteger(HY,GetHandleId(u),'0BKB'+1)+1
      endif
    elseif LoadBoolean(HY,GetHandleId(u),'HBRD')then
      return LoadInteger(HY,GetHandleId(udg_Hero[GetPlayerId(GetOwningPlayer(u))]),'0BKB')
    else
      call SaveInteger(HY,GetHandleId(u),'0BKB',9)
      return 10
    endif
  else
    call SaveInteger(HY,GetHandleId(u),'0BKB',IMaxIF(LoadInteger(HY,GetHandleId(u),'0BKB')-1,4))
    return LoadInteger(HY,GetHandleId(u),'0BKB')+1
  endif
  return 0
endfunction

function Func1411 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  if IsDead(u)==false and u!=null then
    call SetUnitScale(u,Func0531(u)*real048,Func0531(u)*real048,Func0531(u)*real048)
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func1412 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  local trigger t=CreateTrigger()
  local real D1E=Func1410(u)
  call PurgingTriggered(u,false)
  call Func0860(u)
  call UnitAddAbilityTimedExF(u,'A0FY',1,D1E,0)
  call UnitMakeAbilityPermanent(u,true,'A0S6')
  call UnitMakeAbilityPermanent(u,true,'A3JX')
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0FY',false)
  call UnitAddAbility(d,Func1409(R2I(D1E)))
  call IssueTargetOrder(d,"antimagicshell",u)
  if IsCourier(u)then
    call Func0733(u,D1E,3)
  endif
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Avatar\\AvatarCaster.mdl",u,"origin"))
  call TriggerRegisterTimerEvent(t,D1E+7,false)
  call TriggerAddCondition(t,Condition(function Func1411))
  call SaveUnitHandle(HY,(GetHandleId(t)),14,(u))
  set t=null
  set u=null
  set d=null
endfunction

function Func1413 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local unit u2
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func0830))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if LoadInteger(HY,GetHandleId(u2),4258)==1 then
      call Error(GetOwningPlayer(u2),GetObjectName('n02M')+" "+GetUnitName(u2)+" "+GetObjectName('n02S'))
    else
      if IsUnitType(u2,UNIT_TYPE_HERO)then
        call AddTimedKeyToAgent(u2,4258,25)
        call FuckingAssistBuffWrap(u,u2)
      endif
      call SetUnitState(u2,UNIT_STATE_LIFE,GetUnitState(u2,UNIT_STATE_LIFE)+250)
    endif
  endloop
  call KillGroup(g)
  set u=null
endfunction

function Func1414 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local unit u2
  set unit162=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
  call UnitAddAbility(unit162,'A1EV')
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),925,Condition(function Func0830))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if IsUnitType(u2,UNIT_TYPE_HERO)then
      call AddTimedKeyToAgent(u2,4278,50)
      call FuckingAssistBuffWrap(SKE,u2)
    endif
    call IssueTargetOrder(unit162,"antimagicshell",u2)
  endloop
  call KillGroup(g)
  set SKE=null
endfunction

function Func1415 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  set unit162=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call UnitAddAbility(unit162,'A3O7')
  if LoadInteger(HY,GetHandleId(u),4279)==1 then
    call Error(GetOwningPlayer(u),GetObjectName('TX20'))
  else
    if IsUnitType(u,UNIT_TYPE_HERO)then
      call AddTimedKeyToAgent(u,4279,45)
    endif
    call IssueTargetOrder(unit162,"antimagicshell",u)
  endif
  set u=null
endfunction

function IronWoodBranchUsed takes nothing returns nothing
  local destructable d=CreateDestructable('BTtc',GetSpellTargetX(),GetSpellTargetY(),GetRandomReal(0,360),1,GetRandomInt(0,2))
  call SetWidgetLife(d,1)
  call BJDebugMsg(Int2Hex(ConvertHandle(d)))
  call SetDestructableLifespan(d,20)
  set d=null
endfunction

function ResetTriggeredCD takes unit u returns nothing
  local integer i=0
  local item it
  local integer id
  loop
    exitwhen i>5
    set it=UnitItemInSlot(u,i)
    set id=GetItemsIndex_NonMuted(it)
    if id==KelensDaggerDisabled or id==HeartOfTarrasqueDisabled then
      if id==KelensDaggerDisabled then
        call ReplaceItem(u,it,Item_Real[KelensDagger],i)
      else
        call ReplaceItem(u,it,Item_Real[HeartOfTarrasque],i)
      endif
    endif
    set i=i+1
  endloop
  set u=null
  set it=null
endfunction

function UnitResetCooldownFX takes unit u returns nothing
  call SaveReal(HY,GetHandleId(u),787,0.)
  call SaveReal(HY,GetHandleId(u),785,0.)
  call ResetTriggeredCD(u)
  call UnitResetCooldown(u)
  if GetUnitAbilityLevel(u,'A1P8')>0 then
    set tt_unit1=u
    call ExecuteFunc("SBChargeEndReset")
  endif
  if GetUnitAbilityLevel(u,'A30Z')>0 then
    set tt_unit1=u
    call ExecuteFunc("Func2869")
  endif
  call FlushChildHashtable(CooldownStorage,GetHandleId(u))
  if udg_Hero[GetPlayerId(GetOwningPlayer(u))]==u then
    call TimerStart(UltimateCDTimers[GetPlayerId(GetOwningPlayer(u))],0,false,null)
  endif
  if HaveSavedInteger(HY,GetHandleId(u),4251)then
    call RemoveSavedInteger(HY,GetHandleId(u),4251)
  endif
endfunction

function WTFActivationForGroup takes nothing returns nothing
  call UnitResetCooldownFX(GetEnumUnit())
  call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,999999)
endfunction

function WTFActivation takes nothing returns nothing
  local group g=GetAvailableGroup()
  local integer i=0
  loop
    call GroupEnumUnitsOfPlayer(g,Player(i),Condition(function ReturnTrue))
    call ForGroup(g,function WTFActivationForGroup)
    set i=i+1
    exitwhen i>15
  endloop
endfunction

function Func1421 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  local integer i=GetUnitTypeId(u)
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  if i!='ncop' and i!='n12M' then
    call UnitResetCooldownFX(u)
    call SetUnitState(u,UNIT_STATE_MANA,999999)
  endif
  set u=null
  set t=null
endfunction

function Func1422 takes nothing returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0,false,function Func1421)
  call SaveUnitHandle(HY,GetHandleId(t),0,GetTriggerUnit())
  set t=null
endfunction

function Func1423 takes nothing returns nothing
  call UnitResetCooldownFX(GetTriggerUnit())
endfunction

function Func1424 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=LoadUnitHandle(HY,(ZAE),30)
  local real result=(LoadReal(HY,(ZAE),20))
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or GetUnitAbilityLevel(GetTriggerUnit(),'B031')==0 then
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    if result>0 then
      call TextTagOnUnit("+"+I2S(R2I(result)),1,RCX,0.023,255,0,0,216,Func0590(RCX)or PlayerObserver)
      call DamageTarget(source,RCX,1,result)
    endif
  elseif GetEventDamage()>1 then
    call SaveReal(HY,(ZAE),20,((result+GetEventDamage()*0.3)*1.0))
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func1425 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),30,RCX)
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl",RCX,"overhead")))
  call SaveReal(HY,(ZAE),20,(0*1.0))
  call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(RBX,5,false)
  call TriggerAddCondition(RBX,Condition(function Func1424))
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func1426 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0,false)
  call TriggerAddCondition(RBX,Condition(function Func1425))
  call SaveUnitHandle(HY,(ZAE),17,(GetSpellTargetUnit()))
  call SaveUnitHandle(HY,(ZAE),2,(GetTriggerUnit()))
  set RBX=null
endfunction

function Func1427 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,1)
  if GetUnitAbilityLevel(SGE,'a3TP')>0 then
    call DamageTarget(LoadUnitHandle(HY,h,0),SGE,1,LoadReal(HY,GetHandleId(SGE),'a3TP')*0.3)
    call RemoveSavedReal(HY,GetHandleId(SGE),'a3TP')
    call RemoveSavedHandle(HY,GetHandleId(SGE),'a3TP')
    call UnitRemoveAbility(SGE,'a3TP')
  endif
  call RemoveSavedReal(HY,GetHandleId(SGE),'a3TP')
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set SGE=null
  set t=null
endfunction

function Func1428 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit SGE=LoadUnitHandle(HY,h,1)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(SGE)
  local timer t
  if GetUnitAbilityLevel(SGE,'a3TP')>0 then
    if HaveSavedHandle(HY,hu,'a3TP')then
      set t=LoadTimerHandle(HY,hu,'a3TP')
      set h=GetHandleId(t)
    else
      set t=CreateTimer()
      set h=GetHandleId(t)
      call FlushChildHashtable(HY,h)
      call SaveUnitHandle(HY,h,1,SGE)
      call SaveTimerHandle(HY,hu,'a3TP',t)
    endif
    call SaveUnitHandle(HY,h,0,SKE)
    call TimerStart(t,5,false,function Func1427)
    set t=null
  endif
  set SGE=null
  set SKE=null
  call DelayedCallBackClean()
endfunction

function Func1429 takes nothing returns nothing
  local integer h=DelayedCallBack(0.,function Func1428)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
endfunction

function Func1430 takes unit u,unit SGE,integer RTX returns boolean
  local integer i=0
  local real a
  local boolean b=false
  if IssueTargetOrderByIdFuckingEx(u,RTX,SGE,false)then
    return true
  else
    if IssueTargetOrderByIdFuckingEx(u,RTX,SGE,false)then
      return true
    endif
    set a=AngleBetweenUnits(u,SGE)*bj_DEGTORAD
    loop
      call SetUnitX(u,GetUnitX(u)+20*Cos(a))
      call SetUnitY(u,GetUnitY(u)+20*Sin(a))
      set b=IssueTargetOrderByIdFuckingEx(u,RTX,SGE,true)
      exitwhen b or DistanceBetweenUnits(u,SGE)>1200
    endloop
  endif
  return b
endfunction

function Func1431 takes unit u returns real
  if GetUnitAbilityLevel(u,'A1CN')==1then
    return 2.
  endif
  if GetUnitAbilityLevel(u,'A04T')==1then
    return 0.25
  endif
  if GetUnitAbilityLevel(u,'A0II')==1then
    return 0.2
  endif
  if GetUnitAbilityLevel(u,'A09P')==1then
    return 0.15
  endif
  return 0.
endfunction

function Func1432 takes unit WXE,unit SGE,integer id returns boolean
  local unit u=CreateUnit(GetOwningPlayer(WXE),'o00S',GetUnitX(SGE),GetUnitY(SGE),0)
  local boolean b=false
  call UnitApplyTimedLife(u,'BTLF',10.)
  call UnitAddAbility(u,id)
  if id=='AIcb' and GetUnitAbilityLevel(SGE,'BIcb')==0 then
    call UnitAddAbilityTimedExF(SGE,'A3TV',1,0.02,0)
  elseif id=='A3U5' and GetUnitAbilityLevel(SGE,'BIcb')==0 then
    call UnitAddAbilityTimedExF(SGE,'A3TV',2,0.02,0)
  endif
  set b=IssueTargetOrderByIdFuckingEx(u,851983,SGE,true)
  set u=null
  return b
endfunction

function Func1433 takes unit WXE,unit SGE returns boolean
  if GetUnitAbilityLevel(WXE,'A06C')>0 then
    return Func1432(WXE,SGE,'AIcb')
  elseif GetUnitAbilityLevel(WXE,'A3U5')>0 then
    return Func1432(WXE,SGE,'A3U5')
  endif
  return false
endfunction

function Func1434 takes unit source,real result returns boolean
  if IsUnitType(source,UNIT_TYPE_HERO)or GetUnitAbilityLevel(source,'A04R')>0 then
    return result>5
  endif
  return true
endfunction

function Func1435 takes nothing returns nothing
  local unit source
  if integer449>0 then
    set integer449=integer449-1
    set source=CreateUnit(GetOwningPlayer(unit163),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
    call UnitAddAbility(source,'A0K6')
    call IssueTargetOrder(source,"forkedlightning",GetEnumUnit())
    set source=null
  endif
endfunction

function Func1436 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit SKE
  local unit d
  local group g
  if GetUnitAbilityLevel(u,'A3JE')==0 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call AddTimedKeyToAgent(u,4257,1)
    set SKE=LoadUnitHandle(HY,h,2)
    set d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(u),GetUnitY(u),0)
    call UnitAddAbility(d,'A0K6')
    set unit163=d
    set tt_unit1=d
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func0820))
    set integer449=5
    if DistanceBetweenUnits(u,GetEventDamageSource())<900 then
      set integer449=integer449-1
      call IssueTargetOrder(d,"forkedlightning",GetEventDamageSource())
    endif
    call GroupRemoveUnit(g,GetEventDamageSource())
    call ForGroup(g,function Func1435)
    call KillGroup(g)
  endif
  set t=null
  set g=null
  set SKE=null
  set d=null
  set u=null
endfunction

function Func1437 takes nothing returns boolean
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or(LoadInteger(HY,GetHandleId(GetTriggerUnit()),4257)!=1 and IsPlayerEnemy(GetOwningPlayer(GetEventDamageSource()),GetOwningPlayer(GetTriggerUnit()))and Func1434(GetEventDamageSource(),GetEventDamage())and GetRandomInt(1,100)<21)then
    call Func1436()
  endif
  return false
endfunction

function Func1438 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  if SGE==null then
    set SGE=SKE
  endif
  call UnitAddAbilityTimedExF(SGE,'A3JE',1,15,'B3JE')
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func1437))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,0,SGE)
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func1439 takes nothing returns nothing
  call Func1438()
endfunction

function Func1440 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local group g=group018
  local unit RCX=unit164
  if IsUnitInGroup(source,g)==false then
    call GroupAddUnit(g,source)
    call IssueTargetOrder(unit165,"slow",source)
    call DamageTarget(RCX,source,1,200)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",source,"origin"))
  endif
  set source=null
  set g=null
  set RCX=null
endfunction

function Func1441 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func1442 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit d=(LoadUnitHandle(HY,h,19))
  local group g=(LoadGroupHandle(HY,h,133))
  local real ILX
  local real rX
  local real cX=GetUnitX(SKE)
  local real rY
  local real cY=GetUnitY(SKE)
  local group gg=GetAvailableGroup()
  local integer c=GetTriggerEvalCount(t)
  local integer i
  call SetUnitX(d,GetUnitX(SKE))
  call SetUnitY(d,GetUnitY(SKE))
  set group018=g
  set unit164=SKE
  set unit165=(LoadUnitHandle(HY,h,132))
  if c>37 then
    call KillUnit(d)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set ILX=c*21+21
    set i=0
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(gg,cX,cY,ILX,Condition(function Func1441))
    call ForGroup(gg,function Func1440)
  endif
  call KillGroup(gg)
  set t=null
  set d=null
  set g=null
  set SKE=null
  set gg=null
  return false
endfunction

function Func1443 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local group g=GetAvailableGroup()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit JXO=CreateUnit(GetOwningPlayer(SKE),'h091',x,y,0)
  local unit JOO=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
  call UnitAddAbility(JOO,'A0T0')
  call SetUnitTimeScale(JXO,0.6)
  call SetUnitScale(JXO,1.1,0,0)
  call SaveGroupHandle(HY,h,133,(g))
  call SaveUnitHandle(HY,h,19,(JXO))
  call SaveUnitHandle(HY,h,132,(JOO))
  call SaveUnitHandle(HY,h,2,(SKE))
  call TriggerRegisterTimerEvent(t,0.06,true)
  call TriggerAddCondition(t,Condition(function Func1442))
  call Func1276()
  set t=null
  set g=null
  set JXO=null
  set JOO=null
  set SKE=null
endfunction

function Func1444 takes unit source,integer ZAE returns nothing
  local integer QIE=GetHandleId(source)
  call SaveInteger(HY,(QIE),750,(ZAE))
endfunction

function Func1445 takes nothing returns nothing
  local integer ZAE=0
  local integer QIE=0
  local boolean ZSE=false
  loop
    exitwhen ZAE>5
    if GetItemsIndex_NonMuted(UnitItemInSlot(GetTriggerUnit(),ZAE))==integer176 or GetItemsIndex_NonMuted(UnitItemInSlot(GetTriggerUnit(),ZAE))==integer300 then
      set QIE=GetItemCharges(UnitItemInSlot(GetTriggerUnit(),ZAE))
      if QIE>0 then
        call SetItemCharges(UnitItemInSlot(GetTriggerUnit(),ZAE),0)
        call Func1444(GetTriggerUnit(),0)
        if ZSE==false then
          set ZSE=true
          call SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+15*QIE)
          call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+15*QIE)
          call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",GetTriggerUnit(),"origin"))
        endif
      endif
      return
    endif
    set ZAE=ZAE+1
  endloop
endfunction

function Func1446 takes integer i returns boolean
  return i=='A14O' or i=='A0NE' or i=='A1C0' or i=='A0SB'
endfunction

function Func1447 takes integer id returns boolean
  return isAintItemAbility(id)and Func0407(id)==false
endfunction

function Func1448 takes unit source,unit RCX returns nothing
  if IsUnitVisibleEx(source,GetOwningPlayer(RCX))==false and GetRandomInt(1,100)<10 then
    call PlaySoundOnUnitBJ(sound039,100,RCX)
  endif
endfunction

function Func1449 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local integer ZAE=0
  loop
    exitwhen ZAE>5
    if IsUnitVisibleEx(GetTriggerUnit(),GetOwningPlayer(GetEnumUnit()))then
      if GetItemsIndex_NonMuted(UnitItemInSlot(source,ZAE))==integer176 or GetItemsIndex_NonMuted(UnitItemInSlot(source,ZAE))==integer300 then
        if GetItemsIndex_NonMuted(UnitItemInSlot(source,ZAE))==integer300 then
          if GetItemCharges(UnitItemInSlot(source,ZAE))==17 then
            call Func1448(GetTriggerUnit(),source)
          endif
          call Func1444(source,Func0464(GetItemCharges(UnitItemInSlot(source,ZAE))+1,15))
          call SetItemCharges(UnitItemInSlot(source,ZAE),Func0464(GetItemCharges(UnitItemInSlot(source,ZAE))+1,17))
        else
          if GetItemCharges(UnitItemInSlot(source,ZAE))==10 then
            call Func1448(GetTriggerUnit(),source)
          endif
          call Func1444(source,Func0464(GetItemCharges(UnitItemInSlot(source,ZAE))+1,10))
          call SetItemCharges(UnitItemInSlot(source,ZAE),Func0464(GetItemCharges(UnitItemInSlot(source,ZAE))+1,10))
        endif
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",source,"chest"))
        set ZAE=5
      endif
    endif
    set ZAE=ZAE+1
  endloop
  set source=null
endfunction

function Func1450 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  call GroupEnumUnitsInRange(g,result,ZEE,1225,Condition(function Func0833))
  call ForGroup(g,function Func1449)
  call KillGroup(g)
  set g=null
  set source=null
endfunction

function Func1451 takes nothing returns nothing
  if Func1447(GetSpellAbilityId())and GetUnitAbilityLevel(GetTriggerUnit(),'A04R')==0 then
    call Func1450()
  endif
endfunction

function Func1452 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),134))
  call UnitRemoveAbility(source,'A17R')
  call UnitRemoveAbility(source,'A24F')
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func1453 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0.5
endfunction

function Func1454 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetEnumUnit()
  local string ZJE
  call UnitAddAbility(source,'A17R')
  call UnitAddAbility(source,'A24F')
  if IsSentinel(player014)then
    set ZJE="effects\\GlyphSent.mdx"
  else
    set ZJE="effects\\GlyphScourge.mdx"
  endif
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget(ZJE,source,"origin")))
  call SaveUnitHandle(HY,(ZAE),134,(source))
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(RBX,5.,false)
  call TriggerAddCondition(RBX,Condition(function Func1452))
  set RBX=null
  set source=null
endfunction

function Func1455 takes unit source,player whichPlayer returns nothing
  local integer ZAE
  if IsSentinel(whichPlayer)then
    set ZAE=1
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=2
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=3
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=4
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=5
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
  else
    set ZAE=7
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=8
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=9
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=10
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
    set ZAE=11
    if source!=CirclesOfPower[ZAE]then
      call IssueImmediateOrderByIdExFunc(CirclesOfPower[ZAE],852526)
    endif
  endif
endfunction

function Func1456 takes unit u returns string
  local string s=""
  local boolean JMO=IsUnitOwnedByPlayer(u,Sentinels[0])or IsUnitOwnedByPlayer(u,Scourges[0])
  local boolean E8X=IsUnitOwnedByPlayer(u,Sentinels[0])
  local integer i=1
  if JMO then
    if E8X then
      loop
        if IsUnitSelected(u,Sentinels[i])then
          if s=="" then
            set s=udg_Colors[GetPlayerId(Sentinels[i])]+PlayerNames[GetPlayerId(Sentinels[i])]+"|r"
          else
            set s=s+" or "+udg_Colors[GetPlayerId(Sentinels[i])]+PlayerNames[GetPlayerId(Sentinels[i])]+"|r"
          endif
        endif
        set i=i+1
        exitwhen i>5
      endloop
    else
      loop
        if IsUnitSelected(u,Scourges[i])then
          if s=="" then
            set s=udg_Colors[GetPlayerId(Scourges[i])]+PlayerNames[GetPlayerId(Scourges[i])]+"|r"
          else
            set s=s+" or "+udg_Colors[GetPlayerId(Scourges[i])]+PlayerNames[GetPlayerId(Scourges[i])]+"|r"
          endif
        endif
        set i=i+1
        exitwhen i>5
      endloop
    endif
  else
    set s=udg_Colors[GetPlayerId(GetOwningPlayer(u))]+PlayerNames[GetPlayerId(GetOwningPlayer(u))]+"|r"
  endif
  return s
endfunction

function Func1457 takes nothing returns nothing
  local group g
  local unit u=GetTriggerUnit()
  local player p=GetOwningPlayer(u)
  local string s=""
  local boolean UZX=IsSentinel(p)
  if(UZX and boolean121==false)or(IsScourge(p)and boolean122==false)then
    if UZX then
      set tt_player1=Sentinels[0]
    else
      set tt_player1=Scourges[0]
    endif
    set g=GetAvailableGroup()
    set player014=p
    call GroupEnumUnitsOfPlayer(g,tt_player1,Condition(function Func1453))
    call ForGroup(g,function Func1454)
    call KillGroup(g)
    if UZX then
      set boolean121=true
      call Func1455(u,p)
      set boolean121=false
    else
      set boolean122=true
      call Func1455(u,p)
      set boolean122=false
    endif
    set s=Func1456(u)+GetObjectName('TX09')
    if UZX then
      call Func0510(Force_Elfs,5,s)
    else
      call Func0510(Force_Unds,5,s)
    endif
  endif
  set g=null
  set u=null
  set p=null
endfunction

function Func1458 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
    call UnitRemoveAbility(GetTriggerUnit(),'A3CQ')
    call UnitRemoveAbility(GetTriggerUnit(),'A3J5')
    call UnitRemoveAbility(GetTriggerUnit(),'B09Y')
  endif
  call DestroyTrigger(t)
  set t=null
  return false
endfunction

function Func1459 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call Func0909(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func1460 takes unit u,integer id returns nothing
  local integer h=DelayedCallBack(0,function Func1459)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,id)
endfunction

function Func1461 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real d=LoadReal(HY,h,0)
  local boolean FEX=false
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set d=d-0.02
    call SaveReal(HY,h,0,d)
  endif
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    if d<=0 then
      set FEX=true
    elseif IsUnitType(u,UNIT_TYPE_GROUND)and GetUnitAbilityLevel(u,'B09Y')==0 and GetUnitAbilityLevel(u,'B3J7')==0 and GetUnitAbilityLevel(u,'B07T')==0 and GetUnitAbilityLevel(u,'B39C')==0 and GetUnitAbilityLevel(u,'BOwk')==0 then
      if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)then
        call Func1460(u,'I0T8')
      else
        call Func1460(u,'I0TY')
      endif
    endif
  else
    set FEX=true
  endif
  if FEX then
    call DisableTrigger(t)
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call UnitRemoveAbility(u,'B09Y')
  endif
  set u=null
  set t=null
endfunction

function Func1462 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  call SetUnitPathing(u,true)
  call RemoveSavedHandle(HY,hu,'phas')
  call DestroyTimer(LoadTimerHandle(HY,h,10))
  call FlushChildHashtable(HY,h)
  call CleanTrigger(t)
  set u=null
  set t=null
endfunction

function Func1463 takes nothing returns nothing
  local trigger t
  local integer h
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  local timer tt
  if HaveSavedHandle(HY,hu,'phas')then
    set t=LoadTriggerHandle(HY,hu,'phas')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,10)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call SaveTriggerHandle(HY,hu,'phas',t)
    call SaveTimerHandle(HY,h,10,tt)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterDeathEvent(t,u)
    call SaveUnitHandle(HY,h,0,u)
    call TriggerAddCondition(t,Condition(function Func1462))
  endif
  call Func1276()
  call TimerStart(tt,2.5,false,null)
  call SetUnitPhased(u)
  if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)then
    call UnitAddAbilityTimedExF(u,'A3J5',1,2.5,'B09Y')
  else
    call UnitAddAbilityTimedExF(u,'A3CQ',1,2.5,'B09Y')
  endif
  set u=null
  set t=null
  set tt=null
endfunction

function Func1464 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  call SaveBoolean(HY,GetHandleId(LoadUnitHandle(HY,h,0)),'BMON',false)
  call DestroyEffect(LoadEffectHandle(HY,h,32))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  return false
endfunction

function Func1465 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterTimerEvent(t,4.5,false)
  call TriggerAddCondition(t,Condition(function Func1464))
  call SaveBoolean(HY,GetHandleId(u),'BMON',true)
  call SaveUnitHandle(HY,h,0,u)
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("war3mapImported\\SpikeBarrier.mdx",u,"chest")))
  set t=null
  set u=null
endfunction

function Func1466 takes unit WXE,unit SGE returns nothing
  local real mp=GetUnitState(SGE,UNIT_STATE_MANA)
  local real J0O
  local real m
  if mp==0 then
    return
  endif
  if IsUnitIllusion(WXE)then
    if IsUnitType(WXE,UNIT_TYPE_MELEE_ATTACKER)then
      set m=20
    else
      set m=10
    endif
  else
    set m=40
  endif
  set J0O=RMinIF(mp,m)
  if mp>0 then
    call SetUnitState(SGE,UNIT_STATE_MANA,mp-J0O)
    call DamageTarget(WXE,SGE,2,J0O)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",SGE,"origin"))
  endif
endfunction

function Func1467 takes unit WXE,unit SGE returns nothing
  local integer id=0
  local integer YXE=0
  local integer j
  local real d
  if GetUnitAbilityLevel(WXE,'A0JH')>0 then
    set id='A0JK'
    set j=12
    set d=150.
    set YXE=100-R2I(Pow(0.75,Func0891(WXE,Item_Real[integer286]))*100)
  else
    set id='A0FK'
    set j=4
    set d=120.
    set YXE=100-R2I(Pow(0.75,Func0891(WXE,Item_Real[integer229]))*100)
  endif
  if PRD_Get(WXE,id,YXE)then
    call Func0843(WXE,SGE,d,j,1,900.,0.25,"CLPB",false,null)
  endif
endfunction

function Func1468 takes unit u,boolean J3O returns nothing
  if J3O then
    call UnitAddAbilityTimedExF(u,'A36A',1,5,'B36A')
  else
    call UnitAddAbilityTimedExF(u,'A36A',1,2.5,'B36A')
  endif
endfunction

function Func1469 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local real hp
  local unit u=LoadUnitHandle(HY,h,0)
  if GetUnitAbilityLevel(u,'B0DM')==0 then
    call RemoveSavedHandle(HY,LoadInteger(HY,h,0),'B0DM')
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  else
    call DamageTarget(LoadUnitHandle(HY,h,1),u,1,3)
  endif
  set u=null
  set t=null
endfunction

function Func1470 takes unit WXE,unit SGE returns nothing
  local timer t
  local integer h
  if not HaveSavedHandle(HY,GetHandleId(SGE),'B0DM')then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call TimerStart(t,1,true,function Func1469)
    call SaveUnitHandle(HY,h,0,SGE)
    call SaveUnitHandle(HY,h,1,udg_Hero[GetPlayerId(GetOwningPlayer(WXE))])
    call SaveInteger(HY,h,0,GetHandleId(SGE))
    call SaveTimerHandle(HY,GetHandleId(SGE),'B0DM',t)
    set t=null
  endif
  if IsUnitType(WXE,UNIT_TYPE_MELEE_ATTACKER)then
    call UnitAddAbilityTimedExF(SGE,'A3S0',1,4.,'B0DM')
  else
    call UnitAddAbilityTimedExF(SGE,'A3S1',1,4.,'B0DM')
  endif
endfunction

function Func1471 takes unit u returns nothing
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local item it=CreateItem('I000',x,y)
  set x=GetItemX(it)
  set y=GetItemY(it)
  call RemoveItem(it)
  if x!=x or y!=y then
    call SetUnitX(u,x)
    call SetUnitY(u,y)
  endif
  set it=null
endfunction

function Func1472 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),17))
  local real a=(LoadReal(HY,(h),137))
  local real d=(LoadReal(HY,(h),138))
  local real dx
  local real dy
  local integer c=GetTriggerEvalCount(t)
  if c==11 or GetTriggerEventId()==EVENT_WIDGET_DEATH or LoadInteger(HY,GetHandleId(u),4260)==1 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if(LoadInteger(HY,GetHandleId(u),4306)!=1)and(LoadInteger(HY,GetHandleId(u),4324)!=1)and GetUnitAbilityLevel(u,'B08V')==0 and GetUnitAbilityLevel(u,'B0FG')==0 then
      set dx=SafeX50(GetUnitX(u)+d/10*Cos(a*bj_DEGTORAD))
      set dy=SafeY50(GetUnitY(u)+d/10*Sin(a*bj_DEGTORAD))
      if ModuloInteger(c,2)==1 then
        call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",dx,dy))
        call KillTrees(dx,dy,120)
      endif
      call SetUnitX(u,dx)
      call SetUnitY(u,dy)
      if c==10 then
        call Func1471(u)
      endif
    endif
  endif
  set u=null
  set t=null
  return false
endfunction

function Func1473 takes unit SKE,unit SGE,real J9O,real D1E,unit KVO returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x
  local real y
  local real ILX
  local real FOO
  local integer i=-1
  local boolean b=false
  local real KEO
  local real KXO
  local real dx
  local real dy
  if SGE==null and GetSpellTargetItem()!=null then
    set SGE=SKE
  endif
  call AddTimedKeyToAgent(SGE,4414,3)
  if KVO!=null then
    set FOO=AngleBetweenUnits(SKE,SGE)
    if SKE==SGE then
      set FOO=AngleBetweenUnits(KVO,SKE)
    endif
  else
    set FOO=GetUnitFacing(SGE)
  endif
  set KEO=Cos(FOO*bj_DEGTORAD)
  set KXO=Sin(FOO*bj_DEGTORAD)
  set dx=GetUnitX(SGE)
  set dy=GetUnitY(SGE)
  loop
    exitwhen b or i*25>J9O
    set i=i+1
    set x=SafeX50(dx+(J9O-i*25)*KEO)
    set y=SafeY50(dy+(J9O-i*25)*KXO)
    if Func0429(x,y)then
      set b=true
    endif
  endloop
  if IsUnitAlly(SGE,GetOwningPlayer(GetTriggerUnit()))then
    call FuckingAssistBuffWrap(GetTriggerUnit(),SGE)
  endif
  set ILX=DistanceBetweenXY(x,y,GetUnitX(SGE),GetUnitY(SGE))
  call TriggerRegisterTimerEvent(t,D1E/10.,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func1472))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveReal(HY,(h),137,((FOO)*1.0))
  call SaveReal(HY,(h),138,((ILX)*1.0))
  set SGE=null
  set t=null
endfunction

function Func1474 takes unit u returns boolean
  return LoadBoolean(HY,GetHandleId(GetOwningPlayer(u)),139)
endfunction

function Func1475 takes boolean b returns nothing
  if b then
    call Func1473(GetTriggerUnit(),GetTriggerUnit(),600.,0.4,null)
  else
    call Func1473(GetTriggerUnit(),GetSpellTargetUnit(),600.,0.4,null)
  endif
endfunction

function Func1476 takes nothing returns nothing
  local unit u=GetSpellTargetUnit()
  local integer h=GetUnitTypeId(u)
  if h!='n00L' and u!=null then
    if IsUnitWard(u)==false and GetUnitAbilityLevel(u,'A04R')==0 then
      if IsUnitEnemy(u,GetOwningPlayer(GetTriggerUnit()))then
        if IsBlocked(u)==false then
          call Func1475(false)
        endif
      elseif IsUnitOwnedByPlayer(u,GetOwningPlayer(GetTriggerUnit()))then
        call Func1475(false)
      elseif Func1474(u)==false then
        call Func1475(false)
      else
        call Error(GetOwningPlayer(u),GetObjectName('n038'))
      endif
    elseif Func0614(u)then
      call Func1475(false)
    else
      call Error(GetOwningPlayer(u),GetObjectName('TX0A'))
    endif
  elseif h!='n00L' then
    call Func1475(true)
  endif
  set u=null
endfunction

function WrapperOnSpellCDStarts takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit source=LoadUnitHandle(HY,h,0)
  local unit target=LoadUnitHandle(HY,h,1)
  if IsDead(source)==false and IsDead(target)==false then
    call IssueTargetOrder(source,"attack",target)
  endif
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set source=null
  set target=null
  set t=null
endfunction

function InitOnSpellCDStarts takes unit source,unit target returns nothing
  local integer h=DelayedCallBack(0,function WrapperOnSpellCDStarts)
  call SaveUnitHandle(HY,h,0,source)
  call SaveUnitHandle(HY,h,1,target)
endfunction

function Func1479 takes unit u,boolean W6E returns nothing
  local real r=Func0159(u)
  if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false then
    if W6E then
      if r<90000 then
        call Func0158(u,r+90000)
      endif
    else
      if r>90000 then
        call Func0158(u,r-90000)
      endif
    endif
  endif
endfunction

function Func1480 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  local real r
  local integer id=GetIssuedOrderId()
  if LoadReal(HY,hu,'A3UC')>0 then
    if GetTriggerEventId()==EVENT_UNIT_ACQUIRED_TARGET then
      call Func1479(u,GetEventTargetUnit()==LoadUnitHandle(HY,h,1))
    else
      if id==851983 then
        call Func1479(u,GetOrderTargetUnit()==LoadUnitHandle(HY,h,1))
      endif
    endif
  else
    call CleanTrigger(t)
    call Func1479(u,false)
    if GetUnitAbilityLevel(u,'A3CU')>0 then
      call UnitRemoveAbility(u,'A3CU')
      call UnitRemoveAbility(u,'a3CU')
    endif
  endif
  set u=null
  set t=null
endfunction

function Func1481 takes unit u,unit SGE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,h,1,SGE)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ACQUIRED_TARGET)
  call TriggerAddCondition(t,Condition(function Func1480))
  set t=null
endfunction

function Func1482 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  if GetUnitTypeId(u)!='e00E'then
    call Func1473(u,SGE,450.,0.2,SGE)
    call Func1473(u,u,450.,0.2,SGE)
  else
    set u=LoadUnitHandle(HY,GetHandleId(u),0)
  endif
  if u!=null then
    call UnitAddAbilityTimedExF(u,'A3UC',1,5.,'a3UC')
    call SaveReal(HY,GetHandleId(u),'A3UC',TimerGetElapsed(GlobalTimer)+5.)
    if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false then
      call InitOnSpellCDStarts(u,SGE)
      call Func1481(u,SGE)
    endif
    call SaveInteger(HY,GetHandleId(u),'A3UC',4)
    call SaveUnitHandle(HY,GetHandleId(u),'A3UC',SGE)
  endif
  set u=null
  set SGE=null
endfunction

function Func1483 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  set TriggeredUnit=null
  set CastedUnit=LoadUnitHandle(HY,h,0)
  call DelayedCallBackClean()
  call ExecuteFunc("Func1486")
endfunction

function Func1484 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func1483)
  call SaveUnitHandle(HY,h,0,CastedUnit)
endfunction

function Func1485 takes nothing returns nothing
  local integer h=GetHandleId(CastedUnit)
  local integer i=LoadInteger(HY,h,'A3UC')
  if i>0 and LoadUnitHandle(HY,h,'A3UC')==TriggeredUnit then
    if i==1 then
      call RemoveSavedInteger(HY,h,'A3UC')
      call RemoveSavedReal(HY,h,'A3UC')
      call Func1484()
    else
      call SaveInteger(HY,h,'A3UC',i-1)
    endif
  elseif i>0 then
  endif
endfunction

function Func1486 takes nothing returns nothing
  local real r
  local integer h=GetHandleId(CastedUnit)
  if LoadReal(HY,h,'A3UC')<TimerGetElapsed(GlobalTimer)or LoadReal(HY,h,'A3UC')==0 then
    call Func1479(CastedUnit,false)
    call RemoveSavedReal(HY,h,'A3UC')
    call UnitRemoveAbility(CastedUnit,'A3UC')
    call UnitRemoveAbility(CastedUnit,'a3UC')
  else
    if GetUnitAbilityLevel(CastedUnit,'A3UC')>0 and TriggeredUnit!=LoadUnitHandle(HY,h,'A3UC')then
      call UnitRemoveAbility(CastedUnit,'A3UC')
      call UnitRemoveAbility(CastedUnit,'a3UC')
      call Func1479(CastedUnit,false)
    elseif LoadInteger(HY,h,'A3UC')>0 and TriggeredUnit==LoadUnitHandle(HY,h,'A3UC')then
      if GetUnitAbilityLevel(CastedUnit,'A3UC')==0 then
        call UnitAddAbility2(CastedUnit,'A3UC')
      endif
      call Func1479(CastedUnit,true)
    endif
  endif
endfunction

function Func1487 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetTriggerPlayer())or GetSpellTargetItem()!=null or GetSpellTargetUnit()==Roshan then
    call Func1476()
  elseif IsBlocked(GetSpellTargetUnit())==false then
    call Func1482()
  endif
endfunction

function Func1488 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  if GetTriggerEvalCount(RBX)>30 or IsMagicImmune(source)or GetTriggerEventId()==EVENT_UNIT_DEATH then
    call UnitRemoveAbility(source,'A1QB')
    call UnitRemoveAbility(source,'B0CY')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set source=null
  set RBX=null
  return false
endfunction

function Func1489 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local integer QIE=(LoadInteger(HY,h,34))
  if IsMagicImmune(u)or LoadInteger(HY,GetHandleId(u),4256)==1 or GetTriggerEvalCount(t)==QIE*10 then
    call UnitRemoveAbility(u,'Aetl')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set u=null
  set t=null
  return false
endfunction

function Func1490 takes unit u,integer ZAE returns nothing
  local unit d=u
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call UnitAddAbilityTimedExF(d,'Aetl',1,ZAE,'Aetl')
  call SetPlayerAbilityAvailable(GetOwningPlayer(d),'Aetl',false)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterUnitEvent(t,d,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1489))
  call SaveUnitHandle(HY,h,2,(d))
  call SaveInteger(HY,h,34,(ZAE))
  set d=null
  set t=null
endfunction

function Func1491 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit u=tt_unit1
  local unit SGE=tt_unit3
  local real d=(LoadReal(HY,h,20))
  local trigger t
  local integer QIE=3
  if u==SGE then
    set QIE=4
  endif
  if IsPlayerAlly(GetOwningPlayer(SGE),GetOwningPlayer(u))then
    if IsMagicImmune(SGE)==false then
      call Func1490(SGE,4)
    endif
  elseif u!=SGE then
    if IsMagicImmune(SGE)==false then
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call UnitAddAbility2(SGE,'A1QB')
      call TriggerRegisterTimerEvent(t,0.1,true)
      call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DEATH)
      call TriggerAddCondition(t,Condition(function Func1488))
      call SaveUnitHandle(HY,h,2,(SGE))
      call Func1490(SGE,QIE)
      call TextTagOnUnit("+"+I2S(R2I(d)),2,SGE,0.027,3,216,120,216,Func0590(SGE)or PlayerObserver)
      call DamageTarget(u,SGE,1,d)
      set t=null
    endif
  endif
  set u=null
  set SGE=null
endfunction

function Func1492 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local trigger RBX
  local integer ZAE
  local integer QIE=GetHeroPrimaryAttribute_Act(source)
  local real result
  if GetSpellTargetItem()!=null then
    set RCX=source
  endif
  set RBX=AddProjectile(source,RCX,'h0BS',"Func1491",1200,true)
  set ZAE=GetHandleId(RBX)
  if QIE==3 then
    set result=GetHeroAgi(source,true)
  elseif QIE==1 then
    set result=GetHeroStr(source,true)
  elseif QIE==2 then
    set result=GetHeroInt(source,true)
  endif
  call SaveReal(HY,(ZAE),20,((result*2.0+75)*1.0))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func1493 takes nothing returns nothing
  if GetSpellTargetItem()!=null or IsPlayerAlly(GetOwningPlayer(GetSpellTargetUnit()),GetOwningPlayer(GetTriggerUnit()))or IsBlocked(GetSpellTargetUnit())==false then
    call Func1492()
  endif
endfunction

function Func1494 takes nothing returns nothing
  if IsMagicImmune(GetSpellTargetUnit())then
    call InterruptUnitError(GetTriggerUnit(),'n0LR')
  endif
endfunction

function Func1495 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,0)-1
  if c<=0 or IsMagicImmune(u)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call UnitRemoveAbility(u,'Aetl')
    call RemoveSavedHandle(HY,GetHandleId(u),'GHST')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  else
    call SaveInteger(HY,h,0,c)
  endif
  set u=null
  set t=null
endfunction

function Func1496 takes nothing returns nothing
  local trigger t
  local integer h
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'GHST')then
    set t=LoadTriggerHandle(HY,hu,'GHST')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerAddCondition(t,Condition(function Func1495))
    call SaveUnitHandle(HY,h,0,u)
    call SaveTriggerHandle(HY,hu,'GHST',t)
    call UnitAddAbility2(u,'Aetl')
    call HideAbility('Aetl')
  endif
  call SaveInteger(HY,h,0,40)
  set t=null
  set u=null
endfunction

function Func1497 takes nothing returns nothing
  if IsMagicImmune(GetTriggerUnit())==false then
    call Func1496()
  endif
endfunction

function Func1498 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local real K0O=(LoadReal(HY,h,529))
  local real K1O=(LoadReal(HY,h,530))
  local real K2O=GetUnitState(u,UNIT_STATE_MANA)
  local real K3O=GetUnitState(u,UNIT_STATE_MAX_MANA)
  local real K4O=(LoadReal(HY,h,668))
  local real K5O=GetUnitStatePercent(u,UNIT_STATE_MANA,UNIT_STATE_MAX_MANA)
  local real K6O=(K4O-K5O)/100
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEvalCount(t)==200 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if K0O<150 then
      call SetUnitState(u,UNIT_STATE_MANA,K2O-(150-K0O-K1O))
    endif
  else
    if K6O>0 then
      set K0O=K0O+K6O*K3O
      if K1O>0 then
        if K6O*K3O>K1O then
          call SetUnitState(u,UNIT_STATE_MANA,K2O+K1O)
          set K1O=0
        else
          if K1O>(K3O-K2O)then
            set K1O=K1O-(K3O-K2O)
            call SetUnitState(u,UNIT_STATE_MANA,K3O)
          else
            set K1O=K1O-K6O*K3O
            call SetUnitState(u,UNIT_STATE_MANA,K2O+K6O*K3O)
          endif
        endif
      endif
    endif
    set K4O=K5O
    call SaveReal(HY,h,668,((K4O)*1.0))
    call SaveReal(HY,h,529,((K0O)*1.0))
    call SaveReal(HY,h,530,((K1O)*1.0))
  endif
  set t=null
  set u=null
  return false
endfunction

function Func1499 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real hp=GetUnitState(u,UNIT_STATE_LIFE)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real mp=GetUnitState(u,UNIT_STATE_MANA)
  if hp>151 then
    call SetUnitState(u,UNIT_STATE_LIFE,hp-150)
  else
    call SetUnitState(u,UNIT_STATE_LIFE,1)
  endif
  call Func0690("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",u,"origin",2)
  call SetUnitState(u,UNIT_STATE_MANA,mp+150)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func1498))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveReal(HY,h,242,((GetUnitState(u,UNIT_STATE_MANA))*1.0))
  call SaveReal(HY,h,529,(0*1.0))
  call SaveReal(HY,h,668,((GetUnitStatePercent(u,UNIT_STATE_MANA,UNIT_STATE_MAX_MANA))*1.0))
  if(mp+150)>GetUnitState(u,UNIT_STATE_MAX_MANA)then
    call SaveReal(HY,h,530,(((mp+150)-GetUnitState(u,UNIT_STATE_MAX_MANA))*1.0))
  endif
  set u=null
  set t=null
endfunction

function Func1500 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,2)
  local real mp=LoadReal(HY,h,0)
  local real K2O=GetUnitState(u,UNIT_STATE_MANA)
  local integer K9O=LoadInteger(HY,h,0)
  local real r1=mp-K2O
  if r1<150 then
    call SetUnitState(u,UNIT_STATE_MANA,K2O-(150-r1))
  endif
  set mp=GetUnitState(u,UNIT_STATE_MANA)
  if K9O>0 then
    call Stat_Sub(u,K9O,"+MP")
  endif
  call SetUnitState(u,UNIT_STATE_MANA,mp)
  call CleanTrigger(t)
  call FlushChildHashtable(HY,h)
  set u=null
  set t=null
endfunction

function Func1501 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real hp=GetUnitState(u,UNIT_STATE_LIFE)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real mp=GetUnitState(u,UNIT_STATE_MANA)
  local real K3O=GetUnitState(u,UNIT_STATE_MAX_MANA)
  if hp>151 then
    call SetUnitState(u,UNIT_STATE_LIFE,hp-150)
  else
    call SetUnitState(u,UNIT_STATE_LIFE,1)
  endif
  call Func0690("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",u,"origin",2)
  if K3O-mp<150 then
    call Stat_Add(u,R2I(K3O)+150-R2I(mp),"+MP")
    call SaveInteger(HY,h,0,R2I(K3O)-R2I(mp)+150)
  endif
  call SetUnitState(u,UNIT_STATE_MANA,mp+150)
  call SaveReal(HY,h,0,GetUnitState(u,UNIT_STATE_MANA))
  call TriggerRegisterTimerEvent(t,3,false)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func1500))
  call SaveUnitHandle(HY,h,2,(u))
  set u=null
  set t=null
endfunction

function Func1502 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result
  local real ZEE
  if IsSentinel(GetOwningPlayer(source))then
    set result=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    set result=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
  call ImminentTriggeredPointOrder(source,851986,result,ZEE)
  set source=null
endfunction

function Func1503 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result
  local real ZEE
  if IsSentinel(GetOwningPlayer(source))then
    set result=GetUnitX(SecretShopSent)
    set ZEE=GetUnitY(SecretShopSent)
  else
    set result=GetUnitX(SecretShopScrg)
    set ZEE=GetUnitY(SecretShopScrg)
  endif
  call ImminentTriggeredPointOrder(source,851986,result,ZEE)
  set source=null
endfunction

function Func1504 takes nothing returns nothing
  call SaveBoolean(HY,(GetHandleId(GetTriggerUnit())),129,(true))
endfunction

function Func1505 takes nothing returns nothing
  if IsBlocked(GetTriggerUnit())then
    call Func1504()
  endif
endfunction

function UrnOfShadowsEnemyDur takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit source=LoadUnitHandle(HY,h,0)
  local unit target=LoadUnitHandle(HY,h,1)
  local integer c=LoadInteger(HY,h,0)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c==0 or GetUnitAbilityLevel(target,'A3J9')==0 then
    call UnitRemoveAbility(target,'A3J9')
    call UnitRemoveAbility(target,'B3J9')
    call RemoveSavedHandle(HY,GetHandleId(target),'EURN')
    call DestroyTrigger(t)
    call FlushChildHashtable(HY,h)
  else
    call SaveInteger(HY,h,0,c-1)
    call DamageTarget(GetDamageSourceForStickyNapalm(source),target,3,150./8.)
  endif
  set source=null
  set target=null
  set t=null
  return false
endfunction

function UrnOfShadowsOnEnemy takes unit from,unit to returns nothing
  local trigger t
  local integer h
  if HaveSavedHandle(HY,GetHandleId(to),'EURN')then
    set t=LoadTriggerHandle(HY,GetHandleId(to),'EURN')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,GetHandleId(to),'EURN',t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerRegisterDeathEvent(t,to)
    call TriggerAddCondition(t,Condition(function UrnOfShadowsEnemyDur))
    call SaveUnitHandle(HY,h,1,to)
    call UnitAddAbility2(to,'A3J9')
  endif
  call SaveUnitHandle(HY,h,0,from)
  call SaveInteger(HY,h,0,8)
  set t=null
endfunction

function Func1508 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and(IsCreepId(GetUnitTypeId(GetEventDamageSource()))==false and(GetOwningPlayer(GetEventDamageSource())!=Neutrals)and GetEventDamage()>0)or boolean123)then
    call UnitRemoveAbility(source,'B0CG')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func1509 takes nothing returns nothing
  local trigger t
  local integer h
  local unit source=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local unit caster
  local integer i=0
  local boolean found=false
  local boolean b=false
  local integer charges
  if target==null then
    set target=GetTriggerUnit()
  endif
  set caster=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(target),GetUnitY(target),0)
  loop
    exitwhen i>5 or b
    if GetItemsIndex_NonMuted(UnitItemInSlot(source,i))==UrnOfShadows then
      set charges=GetItemCharges(UnitItemInSlot(source,i))
      if charges>0 then
        set found=true
        set charges=charges-1
      else
        set b=true
        set found=false
      endif
    endif
    set i=i+1
  endloop
  if found then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    if IsUnitAlly(target,GetOwningPlayer(source))then
      if GetUnitAbilityLevel(target,'B0CG')==0 then
        call UnitAddAbility(caster,'A1MM')
        call IssueTargetOrderByIdFuckingEx(caster,852609,target,false)
        call SmoothHealingSystemForBottle(400,0,8,'B0CG',target)
      endif
      call FuckingAssistBuffWrap(caster,target)
      call SaveUnitHandle(HY,(h),17,(target))
      call TriggerRegisterTimerEvent(t,8.,false)
      call TriggerRegisterDeathEvent(t,target)
      call TriggerRegisterUnitEvent(t,target,EVENT_UNIT_DAMAGED)
      call TriggerAddCondition(t,Condition(function Func1508))
    else
      call UrnOfShadowsOnEnemy(source,target)
    endif
  endif
  set source=null
  set caster=null
  set target=null
  set t=null
endfunction

function Func1510 takes nothing returns nothing
  local unit u=GetSpellTargetUnit()
  local integer i
  set bj_playerIsCrippled[0]=false
  if IsUnitType(u,UNIT_TYPE_HERO)and IsNotHeroID(u)==false and GetUnitAbilityLevel(u,'A3E7')==0 then
    call Func1011(u)
    set i=0
    loop
      exitwhen i>5
      if Func0876(UnitItemInSlot(u,i))then
        if Func0877(UnitItemInSlot(u,i))then
          call SetItemDroppable(UnitItemInSlot(u,i),true)
        endif
      endif
      set i=i+1
    endloop
    set AlchemistBonus[GetPlayerId(GetOwningPlayer(u))]=AlchemistBonus[GetPlayerId(GetOwningPlayer(u))]+GetItemGoldCostById(Item_Real[Aghanim_Basic])
    if GetPlayerId(GetOwningPlayer(u))!=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))then
      set AlchemistBonus[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=AlchemistBonus[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetItemGoldCostById(Item_Real[Aghanim_Basic])
      set NetWorthRecount[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
    endif
    set NetWorthRecount[GetPlayerId(GetOwningPlayer(u))]=true
    set bj_playerIsCrippled[0]=true
  endif
  set u=null
endfunction

function Func1511 takes nothing returns boolean
  if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and IsPlayerBelongToTeams(GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))then
    call UnitAddAbilityTimedExF(GetFilterUnit(),'A1ZY',1,6.,'B0DX')
  endif
  return false
endfunction

function Func1512 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local group g
  set g=GetAvailableGroup()
  call PlaySoundAtPos(sound060,GetUnitX(u),GetUnitY(u))
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func1511))
  call KillGroup(g)
  set g=null
  set u=null
endfunction

function Func1513 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),player015)and IsDead(GetFilterUnit())==false and((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and NonHeroId(GetFilterUnit())==false)or Func0629(GetFilterUnit()))
endfunction

function Func1514 takes unit source returns boolean
  local group g=GetAvailableGroup()
  local boolean ZSE
  set player015=GetOwningPlayer(source)
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1050,Condition(function Func1513))
  set ZSE=FirstOfGroup(g)!=null
  call KillGroup(g)
  return ZSE
endfunction

function Func1515 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer cache=GetHandleId(t)
  local unit source=(LoadUnitHandle(HY,(cache),2))
  local group g
  local integer count
  local boolean b
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    if GetAttacker()==source then
      call UnitRemoveAbility(source,'A20L')
      call UnitRemoveAbility(source,'A20O')
      call UnitRemoveAbility(source,'B0E2')
      call PA_RestoreUnitColor(source)
      if((LoadInteger(HY,(GetHandleId(source)),4302))!=1)then
        call UnitSetUsesAltIcon(source,false)
      endif
      call SaveInteger(HY,(GetHandleId(source)),4420,2)
      call FlushChildHashtable(HY,(cache))
      call CleanTrigger(t)
    endif
  else
    set b=(LoadBoolean(HY,(cache),671))
    set count=(LoadInteger(HY,(cache),34))
    set count=count+1
    call SaveInteger(HY,(cache),34,(count))
    set g=GetAvailableGroup()
    set player015=GetOwningPlayer(source)
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1050,Condition(function Func1513))
    if false then
      call SaveBoolean(HY,(cache),671,(true))
    elseif b then
      call SaveBoolean(HY,(cache),671,(false))
      call UnitRemoveAbility(source,'A20L')
      call UnitAddAbility2(source,'A20L')
    endif
    if count>350 or FirstOfGroup(g)!=null then
      call UnitRemoveAbility(source,'A20L')
      call UnitRemoveAbility(source,'A20O')
      call UnitRemoveAbility(source,'B0E2')
      call PA_RestoreUnitColor(source)
      if((LoadInteger(HY,(GetHandleId(source)),4302))!=1)and((LoadInteger(HY,(GetHandleId(source)),4421))!=1)then
        call UnitSetUsesAltIcon(source,false)
      endif
      call SaveInteger(HY,(GetHandleId(source)),4420,2)
      call FlushChildHashtable(HY,(cache))
      call CleanTrigger(t)
    endif
    call KillGroup(g)
  endif
  set t=null
  set source=null
  set g=null
  return false
endfunction

function Func1516 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local trigger RBX
  local integer ZAE
  if IsPlayerBelongToTeams(GetOwningPlayer(source))and Func1514(source)==false then
    if IsPlayerAlly(LocalPlayer,GetOwningPlayer(source))==false and PlayerObserver==false then
      call UnitSetUsesAltIcon(source,true)
      call MakeUnitTransparent(source)
    endif
    call RemoveEndlessFadetime(source)
    call UnitAddAbility2(source,'A20L')
    call UnitMakeAbilityPermanent(source,true,'A20L')
    call UnitAddAbility2(source,'A20O')
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveInteger(HY,(ZAE),34,0)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveBoolean(HY,(ZAE),671,(false))
    call SaveInteger(HY,(GetHandleId(source)),4420,1)
    call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerRegisterTimerEvent(RBX,.1,true)
    call TriggerAddCondition(RBX,Condition(function Func1515))
    set RBX=null
  endif
  set source=null
endfunction

function Func1517 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1225,Condition(function Func0829))
  call ForGroup(g,function Func1516)
  call KillGroup(g)
  set source=null
  set g=null
endfunction

function Func1518 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),'A28F',false)
  call UnitAddAbilityTimedExF(GetEnumUnit(),'A28F',1,16,'B0EQ')
  call UnitMakeAbilityPermanent(GetEnumUnit(),true,'A28E')
  call UnitMakeAbilityPermanent(GetEnumUnit(),true,'A28G')
endfunction

function Func1519 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  call GroupEnumUnitsInRange(g,x,y,625,Condition(function Func0812))
  call ForGroup(g,function Func1518)
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffect("war3mapImported\\DarkLightningNova.mdx",x,y))
  set u=null
endfunction

function Func1520 takes nothing returns nothing
  local unit t=GetSpellTargetUnit()
  local unit d=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(t),GetUnitY(t),0)
  call UnitAddAbility(d,'A2K3')
  call IssueTargetOrder(d,"slow",t)
  call EvasionSourceActivate(18,8)
  set t=null
  set d=null
endfunction

function Func1521 takes nothing returns nothing
  call EvasionSourceActivate(19,20)
endfunction

function Func1522 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),'BCtc')>0
endfunction

function Func1523 takes nothing returns nothing
  call DamageTarget(Roshan,GetEnumUnit(),1,70+R2I(TimerGetElapsed(GlobalTimer)/240)*20)
endfunction

function Func1524 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(Roshan),GetUnitY(Roshan),375,Condition(function Func1522))
  call ForGroup(g,function Func1523)
  call KillGroup(g)
  set g=null
  set t=null
endfunction

function Func1525 takes nothing returns nothing
  call TimerStart(CreateTimer(),0,false,function Func1524)
endfunction

function Func1526 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  if GetUnitAbilityLevel(u,'Bdet')==0 or LoadReal(HY,GetHandleId(u),'AItb')+12<TimerGetElapsed(GlobalTimer)then
    call UnitRemoveAbility(u,'A2SJ')
    call UnitRemoveAbility(u,'B0GR')
    call UnitRemoveAbility(u,'Bdet')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if Func0592(u)then
      if GetUnitAbilityLevel(u,'B0GR')==0 then
        call UnitAddAbility2(u,'A2SJ')
      endif
    else
      if GetUnitAbilityLevel(u,'B0GR')>0 then
        call UnitRemoveAbility(u,'A2SJ')
        call UnitRemoveAbility(u,'B0GR')
      endif
    endif
  endif
  set u=null
  set t=null
  return false
endfunction

function Func1527 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func1526))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveReal(HY,GetHandleId(u),'AItb',TimerGetElapsed(GlobalTimer))
  set t=null
  set u=null
endfunction

function Func1528 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u=GetTriggerUnit()
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1075,Condition(function Func0833))
  call ForGroup(g,function Func1527)
  call KillGroup(g)
  set g=null
  set u=null
endfunction

function Func1529 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer L4O=0
  local integer RRE=0
  local item it
  local integer L5O
  local integer D1E
  local unit d
  local item L6O=GetSpellTargetItem()
  local integer IWO
  local integer slot
  local integer VDX
  local boolean L7O=false
  local item H_X
  if GetSpellAbilityId()=='A2WI' then
    set L5O='oeye'
    set D1E=240
    set L4O='I05H'
    set RRE=integer199
  elseif GetSpellAbilityId()=='A2WH' then
    set L5O='o004'
    set D1E=360
    set L4O='I05G'
    set RRE=integer198
  endif
  if(L4O!=0)then
    if SGE!=null and Func1297(SGE)==false then
      if Func1211(SGE,RRE,1,true)then
      else
        if GetEmptyInventorySlots(SGE)>0 or LoadInteger(HY,GetHandleId(SGE),'WOBS')>0 or LoadInteger(HY,GetHandleId(SGE),'WSEN')>0 then
          set it=CreateItem(Item_Dummy[RRE],GetUnitX(SGE),GetUnitY(SGE))
          call SetItemPlayer(it,GetOwningPlayer(SGE),false)
          call SetItemUserData(it,1)
          call SetItemCharges(it,1)
          call UnitAddItem(SGE,it)
        else
          call DelayedItemCreation(Item_Dummy[RRE],GetUnitX(SGE),GetUnitY(SGE),GetOwningPlayer(SGE),true,1)
        endif
      endif
      call Func1212(u,RRE,0)
      if boolean034 then
        if RRE==integer198 then
          set VDX='WOBS'
        else
          set VDX='WSEN'
        endif
      endif
      if LoadInteger(HY,GetHandleId(u),VDX)==0 and(FindItemOfType(u,Item_Real[MixedWardsOrbs])!=null or FindItemOfType(u,Item_Real[MixedWardsSentry])!=null)then
        if RRE==integer198 then
          set it=FindItemOfType(u,Item_Real[MixedWardsOrbs])
          set slot=Func0752(u,it)
          set H_X=CreateItem(Item_Real[integer199],GetUnitX(u),GetUnitY(u))
          call SetItemPlayer(H_X,GetOwningPlayer(u),false)
          call SetItemUserData(H_X,1)
          call SetItemCharges(H_X,LoadInteger(HY,GetHandleId(u),'WSEN'))
        else
          set it=FindItemOfType(u,Item_Real[MixedWardsSentry])
          set slot=Func0752(u,it)
          set H_X=CreateItem(Item_Real[integer198],GetUnitX(u),GetUnitY(u))
          call SetItemPlayer(H_X,GetOwningPlayer(u),false)
          call SetItemUserData(H_X,1)
          call SetItemCharges(H_X,LoadInteger(HY,GetHandleId(u),'WOBS'))
        endif
        call RemoveItem(it)
        call UnitAddItem(u,H_X)
        set it=CreateItem(L4O,GetUnitX(SGE),GetUnitY(SGE))
        call SetItemPlayer(it,GetOwningPlayer(SGE),false)
        call SetItemUserData(it,1)
        call SetItemCharges(it,1)
        call Func0766(u,it,slot)
      endif
    elseif L6O==null then
      set d=null
      if IsPointInRegion(region010,GetSpellTargetX(),GetSpellTargetY())then
        call Func1211(u,RRE,1,true)
        set L7O=true
      else
        set d=CreateUnit(GetOwningPlayer(u),L5O,GetSpellTargetX(),GetSpellTargetY(),0)
        call UnitApplyTimedLife(d,'BTLD',D1E)
        call UnitAddAbility2(d,'A0XB')
        call PlaySoundAtPosForPlayer(GetOwningPlayer(u),sound055,GetSpellTargetX(),GetSpellTargetY())
        call Func1298(d,u)
        if GetUnitTypeId(d)=='oeye' then
          call TimedReveal(GetOwningPlayer(d),12,GetUnitX(d),GetUnitY(d),150)
        endif
      endif
      call Func1212(u,RRE,0)
      if boolean034 then
        if RRE==integer198 then
          set VDX='WOBS'
        else
          set VDX='WSEN'
        endif
        if L7O==false then
          if LoadInteger(HY,GetHandleId(u),VDX)==0 and(FindItemOfType(u,Item_Real[MixedWardsOrbs])!=null or FindItemOfType(u,Item_Real[MixedWardsSentry])!=null)then
            if RRE==integer198 then
              set it=FindItemOfType(u,Item_Real[MixedWardsOrbs])
              set slot=Func0752(u,it)
            else
              set it=FindItemOfType(u,Item_Real[MixedWardsSentry])
              set slot=Func0752(u,it)
            endif
            call RemoveItem(it)
            if RRE==integer198 then
              set it=CreateItem(Item_Real[integer199],GetUnitX(u),GetUnitY(u))
            else
              set it=CreateItem(Item_Real[integer198],GetUnitX(u),GetUnitY(u))
            endif
            call SetItemPlayer(it,GetOwningPlayer(u),false)
            call SetItemUserData(it,1)
            if VDX=='WOBS' then
              call SetItemCharges(it,LoadInteger(HY,GetHandleId(u),'WSEN'))
            else
              call SetItemCharges(it,LoadInteger(HY,GetHandleId(u),'WOBS'))
            endif
            call Func0766(u,it,slot)
          endif
        endif
      endif
    elseif boolean034 then
      set IWO=GetIndex(L6O)
      call DisableTrigger(t_manipulateitem)
      if IWO==MixedWardsOrbs then
        if LoadInteger(HY,GetHandleId(u),'WSEN')>0 then
          set slot=Func0752(u,L6O)
          call RemoveSavedBoolean(HY,GetHandleId(L6O),'PICK')
          call RemoveItem(L6O)
          set it=CreateItem(Item_Real[MixedWardsSentry],GetUnitX(u),GetUnitY(u))
          call SaveBoolean(HY,GetHandleId(it),'PICK',true)
          call SetItemPlayer(it,GetOwningPlayer(u),false)
          call SetItemUserData(it,1)
          call SetItemCharges(it,LoadInteger(HY,GetHandleId(u),'WSEN'))
          call Func0766(u,it,slot)
        else
          call RemoveItem(L6O)
        endif
      elseif IWO==MixedWardsSentry then
        if LoadInteger(HY,GetHandleId(u),'WOBS')>0 then
          set slot=Func0752(u,L6O)
          call RemoveSavedBoolean(HY,GetHandleId(L6O),'PICK')
          call RemoveItem(L6O)
          set it=CreateItem(Item_Real[MixedWardsOrbs],GetUnitX(u),GetUnitY(u))
          call SaveBoolean(HY,GetHandleId(it),'PICK',true)
          call SetItemPlayer(it,GetOwningPlayer(u),false)
          call SetItemUserData(it,1)
          call SetItemCharges(it,LoadInteger(HY,GetHandleId(u),'WOBS'))
          call Func0766(u,it,slot)
        else
          call RemoveItem(L6O)
        endif
      else
        if RRE==integer198 then
          set it=FindItemOfType(u,Item_Real[MixedWardsOrbs])
          if it==null then
            set it=FindItemOfType(u,Item_Real[integer198])
          endif
        else
          set it=FindItemOfType(u,Item_Real[MixedWardsSentry])
          if it==null then
            set it=FindItemOfType(u,Item_Real[integer199])
          endif
        endif
        if it!=null then
          call SetItemCharges(it,GetItemCharges(it)+1)
        endif
      endif
      call Func1209(u,L6O)
      call EnableTrigger(t_manipulateitem)
    endif
  endif
  set L6O=null
  set u=null
  set it=null
  set SGE=null
  set d=null
  set H_X=null
endfunction

function Func1530 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false then
    call DamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),2,500)
  endif
endfunction

function Func1531 takes nothing returns nothing
  local integer id=GetUnitTypeId(GetSpellTargetUnit())
  if IsWardId(id)or Func0598(GetSpellTargetUnit())then
    call Func1530()
  endif
endfunction

function Func1532 takes nothing returns nothing
  local integer id=GetUnitTypeId(GetSpellTargetUnit())
  if IsWardId(id)or Func0598(GetSpellTargetUnit())then
    call Func1530()
  elseif AliveNonBuildOrMarker(GetSpellTargetUnit())and IsPlayerBelongToTeams(GetOwningPlayer(GetSpellTargetUnit()))==false then
    call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",GetSpellTargetUnit(),"chest"))
    call DamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),3,GetWidgetLife(GetSpellTargetUnit())*0.4)
  endif
endfunction

function Func1533 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit u=(LoadUnitHandle(HY,h,2))
  local item it=FindItemOfType(u,Item_Real[integer290])
  call SetItemCharges(it,GetItemCharges(it)+1)
  call DelayedCallBackClean()
  if GetUnitTypeId(u)=='Npbm' then
    set unit261=u
  endif
  call SaveBoolean(HY,GetHandleId(u),'suic',true)
  call KillUnit(u)
  set it=null
  set u=null
endfunction

function Func1534 takes nothing returns nothing
  local integer h=DelayedCallBack(.01,function Func1533)
  call SaveUnitHandle(HY,h,2,GetTriggerUnit())
endfunction

function Func1535 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  local real UME=TimerGetElapsed(GlobalTimer)-LoadReal(HY,h,0)
  local boolean MRO=LoadBoolean(HY,h,0)
  local unit d
  if UME>=1.5 then
    if MRO==false then
      set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
      call UnitAddAbility(d,'A2N5')
      call RemoveEndlessFadetime(u)
      if IssueTargetOrder(d,"invisibility",u)then
        if IsPlayerBelongToTeams(GetOwningPlayer(u))and Func0449(u)==false then
          call IssueImmediateOrderByIdExFunc(u,851993)
        endif
        call SaveReal(HY,h,10,GetUnitX(u))
        call SaveReal(HY,h,11,GetUnitY(u))
        call SaveBoolean(HY,h,0,true)
      else
        call RemoveSavedHandle(HY,LoadInteger(HY,h,0),'SHDA')
        call PauseTimer(t)
        call DestroyTimer(t)
        call FlushChildHashtable(HY,h)
      endif
      set d=null
    else
      if GetUnitX(u)!=LoadReal(HY,h,10)or GetUnitY(u)!=LoadReal(HY,h,11)or GetUnitAbilityLevel(u,'B0G8')==0 then
        call UnitRemoveAbility(u,'B0G6')
        call UnitRemoveAbility(u,'B0G8')
        call RemoveSavedHandle(HY,LoadInteger(HY,h,0),'SHDA')
        call PauseTimer(t)
        call DestroyTimer(t)
        call FlushChildHashtable(HY,h)
      endif
    endif
  endif
  set t=null
  set u=null
endfunction

function Func1536 takes unit u returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(u)
  local string s="Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl"
  if HaveSavedHandle(HY,hu,'SHDA')then
    set t=LoadTimerHandle(HY,hu,'SHDA')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    call SaveTimerHandle(HY,hu,'SHDA',t)
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,0,u)
    call SaveInteger(HY,h,0,hu)
    call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer))
    call TimerStart(t,0.02,true,function Func1535)
  endif
  if IsUnitEnemy(u,LocalPlayer)and PlayerObserver==false then
    set s=""
  endif
  call DestroyEffect(AddSpecialEffectTarget(s,u,"chest"))
  call DestroyEffect(AddSpecialEffectTarget(s,u,"hand left"))
  call DestroyEffect(AddSpecialEffectTarget(s,u,"hand right"))
  set t=null
endfunction

function Func1537 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  if GetSpellTargetItem()!=null then
    set SGE=SKE
  endif
  if SGE==null then
    set SGE=SKE
  endif
  if SGE!=SKE then
    call FuckingAssistBuffWrap(SKE,SGE)
  endif
  call Func1536(SGE)
  set SGE=null
  set SKE=null
endfunction

function Func1538 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsDead(GetFilterUnit())==false and LoadInteger(HY,GetHandleId(GetFilterUnit()),'CRMS')!=1
endfunction

function Func1539 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local unit u2
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func1538))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call AddTimedKeyToAgent(u2,'CRMS',60)
    call FuckingAssistBuffWrap(u,u2)
    call UnitAddAbilityTimedExF(u2,'A30A',1,10,0)
    call UnitAddAbilityTimedExF(u2,'A30C',1,10,'a30C')
  endloop
  call KillGroup(g)
  set u=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call UnitAddAbility(u,'A351')
  call IssueImmediateOrderByIdExFunc(u,852269)
  set u=null
endfunction

function Func1540 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),17))
  local integer c=(LoadInteger(HY,(h),34))
  if(GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>=c or IsMagicImmune(u))then
    call Func0803(u)
    call DestroyEffect(LoadEffectHandle(HY,(h),32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func1541 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real D1E=5.5
  if IsUnitType(SGE,UNIT_TYPE_MELEE_ATTACKER)then
    set D1E=3.
  endif
  call UnitAddAbilityTimedExF(SGE,'A3SH',1,D1E,0)
  set u=null
  set SGE=null
endfunction

function Func1542 takes integer ZAE,unit source,unit RCX returns nothing
  call DamageTarget(source,RCX,1,300+100*ZAE)
endfunction

function Func1543 takes nothing returns nothing
  local integer id=GetSpellAbilityId()
  local integer i=0
  if IsBlocked(GetSpellTargetUnit())==false then
    if id=='A02O' then
      set i=1
    elseif id=='A08Y' then
      set i=2
    elseif id=='A08Z' then
      set i=3
    elseif id=='A090' then
      set i=4
    elseif id=='A092' then
      set i=5
    endif
    if i>0 then
      call Func1542(i,GetTriggerUnit(),GetSpellTargetUnit())
    endif
  else
    call RemoveLinkenBuff(GetSpellTargetUnit())
  endif
endfunction

function Func1544 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  call UnitAddAbilityTimedExF(u,'A1ZJ',1,7,0)
  if IsUnitEnemy(u,GetOwningPlayer(SGE))then
    call UnitAddAbilityTimedExF(SGE,'A1ZJ',1,7,0)
    call UnitAddAbilityTimedExF(SGE,'A3L4',1,7,'B3L4')
    if SGE==Roshan then
      call SetUnitAbilityLevel(SGE,'A1ZJ',2)
    endif
  else
    call UnitAddAbilityTimedExF(SGE,'A3L5',1,7,'B3L5')
    call FuckingAssistBuffWrap(u,SGE)
  endif
  set u=null
  set SGE=null
endfunction

function Func1545 takes nothing returns nothing
  call Func1544()
endfunction

function Func1546 takes nothing returns nothing
  local unit MKO=GetTriggerUnit()
  local unit LDO=CreateUnit(GetOwningPlayer(MKO),'e00E',GetUnitX(MKO),GetUnitY(MKO),0)
  if GetSpellAbilityId()=='AIpl' then
    call UnitAddAbility(LDO,'A1WA')
  elseif GetSpellAbilityId()=='AIpr' then
    call UnitAddAbility(LDO,'AIpr')
  endif
  call IssueTargetOrderByIdFuckingEx(LDO,852609,MKO,false)
  set MKO=null
  set LDO=null
endfunction

function Func1547 takes nothing returns nothing
  if GetSpellTargetItem()!=null then
    call Func1546()
  else
    if(GetUnitAbilityLevel(GetSpellTargetUnit(),'BIrm')==0 and GetSpellAbilityId()!='AIpr')then
      call SmoothHealingSystemForBottle(0,190,50,'BIrm',GetSpellTargetUnit())
    elseif(GetUnitAbilityLevel(GetSpellTargetUnit(),'B02Z')==0 and GetSpellAbilityId()=='AIpr')then
      call SmoothHealingSystemForBottle(400,0,8,'B02Z',GetSpellTargetUnit())
    endif
    call FuckingAssistBuffWrap(GetTriggerUnit(),GetSpellTargetUnit())
  endif
endfunction

function Func1548 takes nothing returns nothing
  if GetUnitAbilityLevel(GetTriggerUnit(),'B04A')==0 then
    call SmoothHealingSystemForBottle(90,60,2.5,'B04A',GetTriggerUnit())
  endif
endfunction

function Func1549 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer WVE=GetPlayerId(GetOwningPlayer(SKE))
  local integer N8O=R2I(LoadInteger(UnitsData,GetUnitTypeId(SGE),integer044)*2.5)
  if IsUnitType(SGE,UNIT_TYPE_SUMMONED)then
    set N8O=N8O/2
  endif
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl",GetUnitX(SGE),GetUnitY(SGE)))
  if IsUnitType(SKE,UNIT_TYPE_HERO)and GetUnitTypeId(SKE)!='N0MM' then
    call AddHeroXP(SKE,N8O,true)
  else
    call AddHeroXP(udg_Hero[WVE],N8O,true)
  endif
  call ImitateBountyGain(GetOwningPlayer(SKE),SGE,190,false)
  set ReliableGold[WVE]=ReliableGold[WVE]+190
  if GetOwningPlayer(SGE)==Neutrals then
    set integers033[GetPlayerId(GetOwningPlayer(SKE))]=integers033[GetPlayerId(GetOwningPlayer(SKE))]+1
  else
    set integers031[GetPlayerId(GetOwningPlayer(SKE))]=integers031[GetPlayerId(GetOwningPlayer(SKE))]+1
  endif
  set boolean030=true
  call DamageTarget(SKE,SGE,6,100000)
  set SKE=null
  set SGE=null
endfunction

function Func1550 takes nothing returns nothing
  if Func0617(GetSpellTargetUnit())==false then
    call Func1549()
  endif
endfunction

function Func1551 takes nothing returns nothing
  if GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_MANA)>0 then
    call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)+135)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",GetEnumUnit(),"origin"))
  endif
endfunction

function Func1552 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local group g=GetAvailableGroup()
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),925,Condition(function DefaultAllyAcientsFilter))
  call ForGroup(g,function Func1551)
  call KillGroup(g)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set g=null
  set source=null
  set RBX=null
  return false
endfunction

function Func1553 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g
  local trigger RBX
  if GetUnitTypeId(source)!='H00J' then
    set RBX=CreateTrigger()
    call TriggerRegisterTimerEvent(RBX,0,false)
    call TriggerAddCondition(RBX,Condition(function Func1552))
    call SaveUnitHandle(HY,(GetHandleId(RBX)),2,(source))
    set RBX=null
  elseif GetUnitTypeId(source)=='H00J' then
    call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MANA)+25)
  endif
  set source=null
endfunction

function Func1554 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  call SaveInteger(HY,hu,'BFLY',IMaxIF(LoadInteger(HY,hu,'BFLY')-1,0))
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'AIev',LoadInteger(HY,hu,'BFLY')<=0)
  call GetUnitsEvasion(u)
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set u=null
  set t=null
endfunction

function Func1555 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local integer hu=GetHandleId(u)
  call TimerStart(t,6,false,function Func1554)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,hu,'BFLY',LoadInteger(HY,hu,'BFLY')+1)
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'AIev',LoadInteger(HY,hu,'BFLY')<=0)
  call GetUnitsEvasion(u)
  call UnitAddAbilityTimedExF(u,'A32A',1,4,'B32A')
  set t=null
  set u=null
endfunction

function Func1556 takes player p,real r returns nothing
  local boolean b=LocalPlayer==p
  if b then
    call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,r,0)
    call SetCameraField(CAMERA_FIELD_FARZ,100000,0)
    call Func0215(0,r)
    call Func0215(1,r-150.*1)
    call Func0215(2,r-150.*2)
    call Func0215(3,r-150.*3)
    call Func0215(4,r-150.*4)
    call Func0215(5,r-150.*5)
  endif
endfunction

function Func1557 takes player p,boolean M0O returns nothing
  local real r=GetCameraField(CAMERA_FIELD_TARGET_DISTANCE)
  local boolean b=LocalPlayer==p
  if boolean008 then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX2M'))
    return
  endif
  if M0O then
    set r=RMinIF(r+150.,3000)
    call SaveReal(HeroStats,GetHandleId(p),'CAMD',r)
  else
    set r=Func0468(r-150.,1500)
    call SaveReal(HeroStats,GetHandleId(p),'CAMD',r)
  endif
  call Func1556(p,r)
endfunction

function ChangeHelpRequesting takes player p,boolean IYX returns nothing
  if IsScourge(p)then
    call SetPlayerAlliance(p,Scourges[0],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Scourges[1],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Scourges[2],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Scourges[3],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Scourges[4],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Scourges[5],ALLIANCE_HELP_RESPONSE,IYX)
  else
    call SetPlayerAlliance(p,Sentinels[0],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Sentinels[1],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Sentinels[2],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Sentinels[3],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Sentinels[4],ALLIANCE_HELP_RESPONSE,IYX)
    call SetPlayerAlliance(p,Sentinels[5],ALLIANCE_HELP_RESPONSE,IYX)
  endif
endfunction

function Func1559 takes unit u returns nothing
  if GetUnitAbilityLevel(u,'B0BS')==0 then
    call SetUnitTurnSpeed(u,GetUnitDefaultTurnSpeed(u))
  endif
endfunction

function Func1560 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer hu=LoadInteger(HY,h,0)
  local unit u
  if GetTriggerEventId()==EVENT_UNIT_ACQUIRED_TARGET then
    set u=GetTriggerUnit()
    if GetUnitCurrentOrder(u)==0 then
      if GetUnitTurnSpeed(u)==GetUnitDefaultTurnSpeed(u)then
        call SetUnitTurnSpeed(u,0)
      endif
      call DisableTrigger(t)
      call ImminentTriggeredPointOrder(u,851986,GetUnitX(u)-10*Cos(GetUnitFacing(u)*bj_DEGTORAD),GetUnitY(u)-10*Sin(GetUnitFacing(u)*bj_DEGTORAD))
      call EnableTrigger(t)
      call SaveBoolean(HY,h,0,true)
    endif
    set u=null
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if GetHandleId(LoadUnitHandle(HY,h,0))==0 then
      call FlushChildHashtable(HY,hu)
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
  else
    call Func1559(GetTriggerUnit())
  endif
  set t=null
endfunction

function Func1561 takes unit u,boolean on returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'AUTO')then
    set t=LoadTriggerHandle(HY,hu,'AUTO')
    set h=GetHandleId(t)
    if on==false then
      if IsTriggerEnabled(LoadTriggerHandle(HY,hu,'AUTO'))then
        call DisableTrigger(t)
        call Func1559(u)
      endif
    elseif IsTriggerEnabled(LoadTriggerHandle(HY,hu,'AUTO'))==false then
      call EnableTrigger(t)
    endif
  elseif on then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'AUTO',t)
    call SaveInteger(HY,h,0,hu)
    call SaveUnitHandle(HY,h,0,u)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ACQUIRED_TARGET)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
    call TriggerAddCondition(t,Condition(function Func1560))
    call TriggerRegisterTimerEvent(t,5,true)
  endif
  set t=null
endfunction

function Func1562 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local player p=LoadPlayerHandle(HY,h,0)
  local group g=GetAvailableGroup()
  local unit u
  local boolean on=LoadBoolean(HY,h,0)
  call GroupEnumUnitsOfPlayer(g,p,Condition(function ReturnTrue))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call Func1561(u,on)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set t=null
endfunction

function Func1563 takes player p returns boolean
  local timer t
  local integer h
  if HaveSavedHandle(HY,GetHandleId(p),'AUTO')then
    set t=LoadTimerHandle(HY,GetHandleId(p),'AUTO')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,GetHandleId(p),'AUTO',t)
    call TimerStart(t,0.5,true,function Func1562)
    call SavePlayerHandle(HY,h,0,p)
  endif
  call SaveBoolean(HY,h,0,LoadBoolean(HY,h,0)==false)
  call SaveBoolean(HY,GetHandleId(p),'AUTO',LoadBoolean(HY,h,0))
  set t=null
  return LoadBoolean(HY,h,0)
endfunction

function Func1564 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local player p=GetOwningPlayer(u)
  local integer WVE=GetPlayerId(p)
  local integer h=GetHandleId(p)
  local string PSE="|c00FF0000"
  local string on="|c0000FF00"
  local integer id=GetSpellAbilityId()
  if id=='A35P' or id=='A35Q'then
    call SaveBoolean(HeroStats,h,'SET0',LoadBoolean(HeroStats,h,'SET0')==false)
    if LoadBoolean(HeroStats,h,'SET0')then
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0C'))
      call UnitRemoveAbility(u,'A35Q')
      call UnitAddAbility2(u,'A35P')
    else
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0B'))
      call UnitRemoveAbility(u,'A35P')
      call UnitAddAbility2(u,'A35Q')
    endif
  elseif id=='A35R' or id=='A35S'then
    call SaveBoolean(HY,h,139,LoadBoolean(HY,h,139)==false)
    if LoadBoolean(HY,h,139)then
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n08R'))
      call UnitRemoveAbility(u,'A35R')
      call UnitAddAbility2(u,'A35S')
    else
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n08O'))
      call UnitRemoveAbility(u,'A35S')
      call UnitAddAbility2(u,'A35R')
    endif
  elseif id=='A35T' or id=='A35U' then
    call SaveBoolean(HeroStats,h,'SET1',LoadBoolean(HeroStats,h,'SET1')==false)
    if LoadBoolean(HeroStats,h,'SET1')then
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0D'))
      call UnitRemoveAbility(u,'A35T')
      call UnitAddAbility2(u,'A35U')
    else
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0E'))
      call UnitRemoveAbility(u,'A35U')
      call UnitAddAbility2(u,'A35T')
    endif
  elseif id=='A35V' or id=='A35W'then
    if Func1563(p)then
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0F'))
      call UnitRemoveAbility(u,'A35V')
      call UnitAddAbility2(u,'A35W')
    else
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0G'))
      call UnitRemoveAbility(u,'A35W')
      call UnitAddAbility2(u,'A35V')
    endif
  elseif id=='A3E5' or id=='A3E6'then
    call SaveBoolean(HeroStats,h,'SET2',LoadBoolean(HeroStats,h,'SET2')==false)
    if LoadBoolean(HeroStats,h,'SET2')then
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0I'))
      call UnitRemoveAbility(u,'A3E6')
      call UnitAddAbility2(u,'A3E5')
    else
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0H'))
      call UnitRemoveAbility(u,'A3E5')
      call UnitAddAbility2(u,'A3E6')
    endif
  elseif id=='A3UN' or id=='A3UO'then
    call SaveBoolean(HeroStats,h,'SET3',LoadBoolean(HeroStats,h,'SET3')==false)
    if LocalPlayer==GetTriggerPlayer()then
      call ToggleClickHelper(LoadBoolean(HeroStats,h,'SET3'))
    endif
    if LoadBoolean(HeroStats,h,'SET3')then
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX31'))
      call UnitRemoveAbility(u,'A3UN')
      call UnitAddAbility2(u,'A3UO')
    else
      call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX32'))
      call UnitRemoveAbility(u,'A3UO')
      call UnitAddAbility2(u,'A3UN')
    endif
  elseif id=='A33L'then
    call Func1557(p,true)
  elseif id=='A33M'then
    call Func1557(p,false)
  elseif id=='A3DZ' then
    call ShowUnit(u,false)
    call SelectUnitForPlayerSingle(CirclesOfPower[GetPlayerId(GetTriggerPlayer())],GetTriggerPlayer())
  endif
  set u=null
endfunction

function Func1565 takes nothing returns nothing
  if boolean057==false and GetUnitTypeId(GetTriggerUnit())=='n12M' and IsUnitSelected(GetTriggerUnit(),GetOwningPlayer(GetTriggerUnit()))then
    call Func1564()
  endif
endfunction

function Func1566 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),tt_player1)and IsUnitInRegion(region010,GetFilterUnit())==false
endfunction

function Func1567 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer c=LoadInteger(HY,h,0)
  local group g=LoadGroupHandle(HY,h,1)
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  local boolean b
  if c==0 then
    call TimerStart(t,0.1,true,function Func1567)
  endif
  call SaveInteger(HY,h,0,c+1)
  set tt_player1=LoadPlayerHandle(HY,h,0)
  call GroupEnumUnitsInRange(g,x,y,920.,Condition(function Func1566))
  set b=FirstOfGroup(g)==null
  if b!=LoadBoolean(HY,h,0)or ModuloInteger(c,2)==0 then
    if IsPlayerAlly(LocalPlayer,LoadPlayerHandle(HY,h,0))or PlayerObserver then
      if b then
        call nPngMinimapEx(x,y,0.2,0,255,0,false)
      else
        call nPngMinimapEx(x,y,0.2,255,0,0,false)
      endif
    endif
  endif
  call SaveBoolean(HY,h,0,b)
  if c==80 then
    call KillGroup(g)
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  endif
  set t=null
endfunction

function Func1568 takes player p returns nothing
  local integer i=1
  if IsSentinel(p)then
    call Func0510(Force_Elfs,5.,str_replace(GetObjectName('TX2R'),"%p",udg_Colors[GetPlayerId(p)]+PlayerNames[GetPlayerId(p)]+"|r"))
    loop
      if p!=Sentinels[i]then
        call ImminentTriggeredPointOrder(CirclesOfPower[GetPlayerId(Sentinels[i])],852228,0,0)
      endif
      set i=i+1
      exitwhen i>5
    endloop
  else
    call Func0510(Force_Unds,5.,str_replace(GetObjectName('TX2R'),"%p",udg_Colors[GetPlayerId(p)]+PlayerNames[GetPlayerId(p)]+"|r"))
    loop
      if p!=Scourges[i]then
        call ImminentTriggeredPointOrder(CirclesOfPower[GetPlayerId(Scourges[i])],852228,0,0)
      endif
      set i=i+1
      exitwhen i>5
    endloop
  endif
endfunction

function Func1569 takes player p,real x,real y returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.,false,function Func1567)
  call SavePlayerHandle(HY,h,0,p)
  call SaveReal(HY,h,0,x)
  call SaveReal(HY,h,1,y)
  call SaveInteger(HY,h,0,0)
  call SaveGroupHandle(HY,h,1,GetAvailableGroup())
  set boolean121=true
  call Func1568(p)
  set boolean121=false
  set t=null
endfunction

function Func1570 takes nothing returns nothing
  if boolean121 then
    return
  endif
  call Func1569(GetTriggerPlayer(),GetSpellTargetX(),GetSpellTargetY())
endfunction

function Func1571 takes nothing returns nothing
  call ShowUnit(GetTriggerUnit(),false)
  call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Func1572 takes player p returns nothing
  local unit u=LoadUnitHandle(HY,GetHandleId(p),'OptD')
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call ShowUnit(u,true)
  call SelectUnitForPlayerSingle(u,p)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DESELECTED)
  call TriggerAddCondition(t,Condition(function Func1571))
  set t=null
  set u=null
endfunction

function Func1573 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='ncop' and IsUnitSelected(GetTriggerUnit(),GetOwningPlayer(GetTriggerUnit()))then
    call Func1572(GetOwningPlayer(GetTriggerUnit()))
  endif
endfunction

function Func1574 takes nothing returns nothing
  local unit u
  local item it
  local integer i=0
  local string s
  local integer g
  if IsDead(udg_Hero[GetPlayerId(GetTriggerPlayer())])then
    call Error(GetTriggerPlayer(),GetObjectName('TX1T'))
    return
  endif
  set it=GetSpellTargetItem()
  if IsIndexIdConsumable(GetIndex(it))then
    call Error(GetTriggerPlayer(),GetObjectName('TX21'))
    set it=null
    return
  endif
  set u=GetTriggerUnit()
  loop
    if it==UnitItemInSlot(u,i)then
      exitwhen true
    endif
    set i=i+1
    exitwhen i>5
  endloop
  if i<6 then
    if GetItemPlayer(it)==GetOwningPlayer(u)then
      if IsItemPawnable(it)then
        set g=GetItemGoldCostById(GetItemTypeId(it))
        if IsIndexIdConsumable(GetIndex(it))then
          set g=g*(GetItemCharges(it)/GetDefaultChargesItem(GetIndex(it)))
        endif
        set g=R2I(g/2)
        call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)+g)
        set s=str_replace(GetObjectName('TX1S'),"$item","|c00ffff00"+GetItemName(it)+"|r")
        set s=str_replace(s,"$gold","|c00ffff00"+I2S(g)+"|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,s)
        call RemoveItem(UnitRemoveItemFromSlot(u,i))
      else
        call Error(GetTriggerPlayer(),GetObjectName('TX1P'))
      endif
    else
      call Error(GetTriggerPlayer(),GetObjectName('TX1Q'))
    endif
  else
    call Error(GetTriggerPlayer(),GetObjectName('TX1R'))
  endif
  set u=null
  set it=null
endfunction

function MangoUsed takes nothing returns nothing
  if GetSpellTargetItem()!=null then
    call SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+150)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\MoonWell\\MoonWellCasterArt.mdx",GetTriggerUnit(),"origin"))
  else
    call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_MANA,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_MANA)+150)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\MoonWell\\MoonWellCasterArt.mdx",GetSpellTargetUnit(),"origin"))
  endif
endfunction

function GlimmerCapeEnd takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(u,'A38X')==0 then
    call UnitRemoveAbility(u,'A38T')
    call UnitRemoveAbility(u,'A38X')
    call UnitRemoveAbility(u,'A3IF')
    call UnitRemoveAbility(u,'B3IF')
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if TimerGetElapsed(GlobalTimer)>=LoadReal(HY,h,1)then
      call UnitRemoveAbility(u,'A38T')
      call UnitRemoveAbility(u,'A38X')
      call UnitRemoveAbility(u,'A3IF')
      call UnitRemoveAbility(u,'B3IF')
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    elseif TimerGetElapsed(GlobalTimer)>=LoadReal(HY,h,0)then
      call UnitAddAbility2(u,'A38T')
      call UnitAddAbility2(u,'A3IF')
    endif
  else
    if(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and u==GetAttacker())or GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
      call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+0.6)
      call UnitRemoveAbility(u,'A38T')
      call UnitRemoveAbility(u,'A3IF')
      call UnitRemoveAbility(u,'B3IF')
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function GlimmerCapeStart takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call RemoveEndlessFadetime(u)
  call HideAbility('A38T')
  call UnitAddAbility2(u,'A38X')
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",u,"origin"))
  call TriggerAddCondition(t,Condition(function GlimmerCapeEnd))
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,1,TimerGetElapsed(GlobalTimer)+5.)
  call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+.6)
  set t=null
endfunction

function GlimmerCapeUsed takes nothing returns nothing
  if GetSpellTargetItem()!=null then
    call GlimmerCapeStart(GetTriggerUnit())
  else
    call GlimmerCapeStart(GetSpellTargetUnit())
    call FuckingAssistBuffWrap(GetTriggerUnit(),GetSpellTargetUnit())
  endif
endfunction

function GuardianGreavesHealFilter takes nothing returns boolean
  return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(tt_unit1))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function GuardianGreavesStart takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local unit caster=GetTriggerUnit()
  call PurgingTriggered(caster,false)
  set tt_unit1=caster
  call GroupEnumUnitsInRange(g,GetUnitX(caster),GetUnitY(caster),775,Condition(function GuardianGreavesHealFilter))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if LoadInteger(HY,GetHandleId(u),4258)!=1 then
      call AddTimedKeyToAgent(u,4258,25)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",u,"origin"))
      call DestroyEffect(AddSpecialEffectTarget("Unleash.mdx",u,"chest"))
      call SetWidgetLife(u,GetWidgetLife(u)+250)
      call FuckingAssistBuffWrap(caster,u)
    endif
    if GetUnitState(u,UNIT_STATE_MANA)<GetUnitState(u,UNIT_STATE_MAX_MANA)then
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",u,"origin"))
      call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+160)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  set caster=null
  call KillGroup(g)
endfunction

function GuardianGreaves_Init takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())!='H00J' then
    call GuardianGreavesStart()
  endif
endfunction

function SolarCrestEnd takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit caster=LoadUnitHandle(HY,h,0)
  if TimerGetElapsed(GlobalTimer)<LoadReal(HY,h,0)and GetUnitAbilityLevel(caster,'A39F')>0 then
    if GetUnitAbilityLevel(caster,'A39G')==1 then
      call SetUnitAbilityLevel(caster,'A39G',2)
      call GetUnitsEvasion(caster)
    endif
  else
    if HaveSavedHandle(HY,h,1)then
      if GetUnitAbilityLevel(LoadUnitHandle(HY,h,1),'A39M')==0 then
        call GetUnitsEvasion(LoadUnitHandle(HY,h,1))
        call DestroyTimer(t)
        call FlushChildHashtable(HY,h)
      endif
    else
      call DestroyTimer(t)
      call FlushChildHashtable(HY,h)
    endif
    call SetUnitAbilityLevel(caster,'A39G',1)
    call GetUnitsEvasion(caster)
  endif
  set caster=null
  set t=null
endfunction

function SolarCrestStart takes nothing returns nothing
  local unit caster=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  if IsUnitAlly(caster,GetOwningPlayer(target))then
    call UnitAddAbilityTimedExF(target,'A39J',1,7,'B39J')
    call UnitAddAbilityTimedExF(target,'A3C8',1,7,'A39M')
    call HideAbility('A3C8')
    call UnitAddAbilityTimedExF(caster,'A39F',1,7,'A39F')
    call SaveUnitHandle(HY,h,1,target)
    call FuckingAssistBuffWrap(caster,target)
  else
    call UnitAddAbilityTimedExF(target,'A39F',1,7,'A39F')
    call UnitAddAbilityTimedExF(caster,'A39F',1,7,'A39F')
    call UnitAddAbilityTimedExF(target,'A39I',1,7,'B39I')
    call EvasionSourceActivate(15,8.)
    if target==Roshan then
      call SetUnitAbilityLevel(target,'A39F',2)
    endif
  endif
  call TimerStart(t,0.1,true,function SolarCrestEnd)
  call SaveUnitHandle(HY,h,0,caster)
  call SetUnitAbilityLevel(caster,'A39G',2)
  call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+7.01)
  call GetUnitsEvasion(caster)
  set t=null
  set caster=null
  set target=null
endfunction

function Func1585 takes nothing returns nothing
  local unit SGE
  if GetSpellTargetItem()!=null then
    set SGE=GetTriggerUnit()
  else
    set SGE=GetSpellTargetUnit()
  endif
  call UnitAddAbilityTimedExF(SGE,'A3E9',1,6.,'B3E9')
  call PurgingTriggered(SGE,false)
  set SGE=null
endfunction

function Func1586 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LevelerStunFX.mdx",GetSpellTargetUnit(),"head"))
endfunction

function Func1587 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  call ModifyUnitsPassiveDisabledCounter(u,-1)
  set u=null
  set t=null
  call DelayedCallBackClean()
endfunction

function Func1588 takes nothing returns nothing
endfunction

function Func1589 takes nothing returns nothing
  local unit d
  if GetSpellTargetItem()!=null then
    set d=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
    call UnitAddAbility(d,'AIpg')
    call IssueTargetOrder(d,"purge",GetTriggerUnit())
    set d=null
  endif
endfunction

function Func1590 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit t=udg_Hero[GetPlayerId(GetOwningPlayer(u))]
  if DistanceBetweenUnits(t,SentFountain)<1600 or DistanceBetweenUnits(t,ScourgeFountain)<1600 then
    if Func1146(u,t,false,0)then
      call Func1146(u,t,false,0)
    endif
    call Func1142(u,t)
  endif
  set u=null
  set t=null
endfunction

function Func1591 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local group g=GetAvailableGroup()
  local unit u2
  if LoadInteger(HY,h,0)==0 then
    call TimerStart(t,0.5,true,function Func1591)
  endif
  if IsDead(u)then
    set u=LoadUnitHandle(HY,h,1)
  endif
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,LoadReal(HY,h,6),LoadReal(HY,h,7),325,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(u,u2,1,42.5)
    call GroupRemoveUnit(g,u2)
  endloop
  call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
  if LoadInteger(HY,h,0)>=21 then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  endif
  call KillGroup(g)
  set t=null
  set u=null
endfunction

function Func1592 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit d=CreateUnit(GetTriggerPlayer(),'e007',x,y,0)
  call UnitAddAbility(d,'A3MX')
  call ImminentTriggeredPointOrder(d,851984,x,y)
  call UnitApplyTimedLife(d,'btlf',3)
  set d=null
  call TimerStart(t,0.,false,function Func1591)
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,h,1,udg_Hero[GetPlayerId(GetOwningPlayer(u))])
  call SaveReal(HY,h,6,x)
  call SaveReal(HY,h,7,y)
  call TimedReveal(GetOwningPlayer(u),10,x,y,300)
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))
  set t=null
  set u=null
endfunction

function Func1593 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetTriggerUnit(),'A3OP',1,0,0)
endfunction

function Func1594 takes nothing returns nothing
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and NonHeroId(GetTriggerUnit())==false then
    call AddHeroXP(GetTriggerUnit(),450,true)
  endif
endfunction

function Func1595 takes nothing returns nothing
  call SaveBoolean(SpellsDB,'itid','AItp',true)
  call SaveBoolean(SpellsDB,'itid','A3O0',true)
  call SaveBoolean(SpellsDB,'itid','AIha',true)
  call SaveBoolean(SpellsDB,'itid','AItb',true)
  call SaveBoolean(SpellsDB,'itid','AIh1',true)
  call SaveBoolean(SpellsDB,'itid','AIm1',true)
  call SaveBoolean(SpellsDB,'itid','AIrl',true)
  call SaveBoolean(SpellsDB,'itid','AIct',true)
  call SaveBoolean(SpellsDB,'itid','AIsa',true)
  call SaveBoolean(SpellsDB,'itid','Ablp',true)
  call SaveBoolean(SpellsDB,'itid','Amec',true)
  call SaveBoolean(SpellsDB,'itid','AIrd',true)
  call SaveBoolean(SpellsDB,'itid','AIbt',true)
  call SaveBoolean(SpellsDB,'itid','AIxs',true)
  call SaveBoolean(SpellsDB,'itid','ANpr',true)
  call SaveBoolean(SpellsDB,'itid','AIpl',true)
  call SaveBoolean(SpellsDB,'itid','AIsl',true)
  call SaveBoolean(SpellsDB,'itid','ANsa',true)
  call SaveBoolean(SpellsDB,'itid','A0GN',true)
  call SaveBoolean(SpellsDB,'itid','A0K5',true)
  call SaveBoolean(SpellsDB,'itid','A0HU',true)
  call SaveBoolean(SpellsDB,'itid','A0HX',true)
  call SaveBoolean(SpellsDB,'itid','A14A',true)
  call SaveBoolean(SpellsDB,'itid','AIbk',true)
  call SaveBoolean(SpellsDB,'itid','Aeat',true)
  call SaveBoolean(SpellsDB,'itid','AIpr',true)
  call SaveBoolean(SpellsDB,'itid','A2WH',true)
  call SaveBoolean(SpellsDB,'itid','A2WI',true)
  call SaveBoolean(SpellsDB,'itid','A1R5',true)
  call SaveBoolean(SpellsDB,'itid','A0B6',true)
  call SaveBoolean(SpellsDB,'itid','AIda',true)
  call SaveBoolean(SpellsDB,'itid','A269',true)
  call SaveBoolean(SpellsDB,'itid','A231',true)
  call SaveBoolean(SpellsDB,'itid','A28Y',true)
  call SaveBoolean(SpellsDB,'itid','A15W',true)
  call SaveBoolean(SpellsDB,'itid','AIpg',true)
  call SaveBoolean(SpellsDB,'itid','A2V4',true)
  call SaveBoolean(SpellsDB,'itid','AIxk',true)
  call SaveBoolean(SpellsDB,'itid','A1T7',true)
  call SaveBoolean(SpellsDB,'itid','A0CK',true)
  call SaveBoolean(SpellsDB,'itid','A1FD',true)
  call SaveBoolean(SpellsDB,'itid','A11G',true)
  call SaveBoolean(SpellsDB,'itid','A0B8',true)
  call SaveBoolean(SpellsDB,'itid','A017',true)
  call SaveBoolean(SpellsDB,'itid','A092',true)
  call SaveBoolean(SpellsDB,'itid','A02O',true)
  call SaveBoolean(SpellsDB,'itid','A08Z',true)
  call SaveBoolean(SpellsDB,'itid','A090',true)
  call SaveBoolean(SpellsDB,'itid','A08Y',true)
  call SaveBoolean(SpellsDB,'itid','A0HB',true)
  call SaveBoolean(SpellsDB,'itid','A0D3',true)
  call SaveBoolean(SpellsDB,'itid','A0DF',true)
  call SaveBoolean(SpellsDB,'itid','A2VE',true)
  call SaveBoolean(SpellsDB,'itid','A1FO',true)
  call SaveBoolean(SpellsDB,'itid','A1IO',true)
  call SaveBoolean(SpellsDB,'itid','A1FP',true)
  call SaveBoolean(SpellsDB,'itid','A02W',true)
  call SaveBoolean(SpellsDB,'itid','AChx',true)
  call SaveBoolean(SpellsDB,'itid','A0H6',true)
  call SaveBoolean(SpellsDB,'itid','A0FO',true)
  call SaveBoolean(SpellsDB,'itid','A0K0',true)
  call SaveBoolean(SpellsDB,'itid','A0K7',true)
  call SaveBoolean(SpellsDB,'itid','A0JL',true)
  call SaveBoolean(SpellsDB,'itid','A2TK',true)
  call SaveBoolean(SpellsDB,'itid','AIsp',true)
  call SaveBoolean(SpellsDB,'itid','AIv1',true)
  call SaveBoolean(SpellsDB,'itid','A0T8',true)
  call SaveBoolean(SpellsDB,'itid','A0T7',true)
  call SaveBoolean(SpellsDB,'itid','A0T9',true)
  call SaveBoolean(SpellsDB,'itid','A0FD',true)
  call SaveBoolean(SpellsDB,'itid','A0JT',true)
  call SaveBoolean(SpellsDB,'itid','A0H7',true)
  call SaveBoolean(SpellsDB,'itid','A0ZM',true)
  call SaveBoolean(SpellsDB,'itid','A0ZN',true)
  call SaveBoolean(SpellsDB,'itid','A0ZR',true)
  call SaveBoolean(SpellsDB,'itid','A0ZL',true)
  call SaveBoolean(SpellsDB,'itid','A0ZK',true)
  call SaveBoolean(SpellsDB,'itid','A0ZQ',true)
  call SaveBoolean(SpellsDB,'itid','A0ZO',true)
  call SaveBoolean(SpellsDB,'itid','A0ZP',true)
  call SaveBoolean(SpellsDB,'itid','A0ZX',true)
  call SaveBoolean(SpellsDB,'itid','A0ZV',true)
  call SaveBoolean(SpellsDB,'itid','A100',true)
  call SaveBoolean(SpellsDB,'itid','A0ZY',true)
  call SaveBoolean(SpellsDB,'itid','A0ZZ',true)
  call SaveBoolean(SpellsDB,'itid','A0ZW',true)
  call SaveBoolean(SpellsDB,'itid','A0ZT',true)
  call SaveBoolean(SpellsDB,'itid','A0ZU',true)
  call SaveBoolean(SpellsDB,'itid','A11D',true)
  call SaveBoolean(SpellsDB,'itid','A0S3',true)
  call SaveBoolean(SpellsDB,'itid','A11F',true)
  call SaveBoolean(SpellsDB,'itid','A11E',true)
  call SaveBoolean(SpellsDB,'itid','A11H',true)
  call SaveBoolean(SpellsDB,'itid','A0JY',true)
  call SaveBoolean(SpellsDB,'itid','A12F',true)
  call SaveBoolean(SpellsDB,'itid','A12W',true)
  call SaveBoolean(SpellsDB,'itid','A17M',true)
  call SaveBoolean(SpellsDB,'itid','A19M',true)
  call SaveBoolean(SpellsDB,'itid','A1A4',true)
  call SaveBoolean(SpellsDB,'itid','A1A2',true)
  call SaveBoolean(SpellsDB,'itid','A1AC',true)
  call SaveBoolean(SpellsDB,'itid','A1EW',true)
  call SaveBoolean(SpellsDB,'itid','A1ML',true)
  call SaveBoolean(SpellsDB,'itid','A1MO',true)
  call SaveBoolean(SpellsDB,'itid','A1Q8',true)
  call SaveBoolean(SpellsDB,'itid','A1QD',true)
  call SaveBoolean(SpellsDB,'itid','A1WE',true)
  call SaveBoolean(SpellsDB,'itid','A1ZI',true)
  call SaveBoolean(SpellsDB,'itid','A1ZW',true)
  call SaveBoolean(SpellsDB,'itid','A206',true)
  call SaveBoolean(SpellsDB,'itid','A28D',true)
  call SaveBoolean(SpellsDB,'itid','A2HQ',true)
  call SaveBoolean(SpellsDB,'itid','A2EA',true)
  call SaveBoolean(SpellsDB,'itid','A2K4',true)
  call SaveBoolean(SpellsDB,'itid','A2K7',true)
  call SaveBoolean(SpellsDB,'itid','A2KG',true)
  call SaveBoolean(SpellsDB,'itid','A2LI',true)
  call SaveBoolean(SpellsDB,'itid','A2N1',true)
  call SaveBoolean(SpellsDB,'itid','A2R1',true)
  call SaveBoolean(SpellsDB,'itid','A2VG',true)
  call SaveBoolean(SpellsDB,'itid','A2VH',true)
  call SaveBoolean(SpellsDB,'itid','A2VI',true)
  call SaveBoolean(SpellsDB,'itid','A2VJ',true)
  call SaveBoolean(SpellsDB,'itid','A2VK',true)
  call SaveBoolean(SpellsDB,'itid','A3BP',true)
  call SaveBoolean(SpellsDB,'itid','A3U7',true)
  call SaveBoolean(SpellsDB,'itid','A3U8',true)
  call SaveStr(SpellsDB,'ord0',852515,"Func2619")
  call SaveStr(SpellsDB,'mrph','A1WH',"Sven_GodStrength_SpellEffect")
  call SaveStr(SpellsDB,'mrph','A31T',"Sven_GodStrength_SpellEffect")
  call SaveStr(SpellsDB,'mrph','A11T',"Func2711")
  call SaveStr(SpellsDB,'mrph','A34Z',"Func2566")
  call SaveStr(SpellsDB,'mrph','A03G',"Func2566")
  call SaveStr(SpellsDB,0,'A3U8',"Func1487")
  call SaveStr(SpellsDB,0,'A3U7',"Func1594")
  call SaveStr(SpellsDB,0,'AIpl',"Func1547")
  call SaveStr(SpellsDB,0,'AIpr',"Func1547")
  call SaveStr(SpellsDB,0,'A1WA',"Func1547")
  call SaveStr(SpellsDB,0,'A0FO',"Func1548")
  call SaveStr(SpellsDB,0,'A39K',"SolarCrestStart")
  call SaveStr(SpellsDB,0,'A3LM',"Func1590")
  call SaveStr(SpellsDB,0,'A19M',"Func1476")
  call SaveStr(SpellsDB,0,'A1QD',"Func1493")
  call SaveStr(SpellsDB,0,'A1ZI',"Func1545")
  call SaveStr(SpellsDB,0,'A02O',"Func1543")
  call SaveStr(SpellsDB,0,'A08Y',"Func1543")
  call SaveStr(SpellsDB,0,'A08Z',"Func1543")
  call SaveStr(SpellsDB,0,'A090',"Func1543")
  call SaveStr(SpellsDB,0,'A092',"Func1543")
  call SaveStr(SpellsDB,0,'AIbk',"BlinkTargetWrapper")
  call SaveStr(SpellsDB,0,'A0H6',"Func1359")
  call SaveStr(SpellsDB,0,'A35P',"Func1565")
  call SaveStr(SpellsDB,0,'A35Q',"Func1565")
  call SaveStr(SpellsDB,0,'A35R',"Func1565")
  call SaveStr(SpellsDB,0,'A35S',"Func1565")
  call SaveStr(SpellsDB,0,'A35T',"Func1565")
  call SaveStr(SpellsDB,0,'A35U',"Func1565")
  call SaveStr(SpellsDB,0,'A35V',"Func1565")
  call SaveStr(SpellsDB,0,'A35W',"Func1565")
  call SaveStr(SpellsDB,0,'A3E5',"Func1565")
  call SaveStr(SpellsDB,0,'A3E6',"Func1565")
  call SaveStr(SpellsDB,0,'A33L',"Func1565")
  call SaveStr(SpellsDB,0,'A33M',"Func1565")
  call SaveStr(SpellsDB,0,'A3UN',"Func1565")
  call SaveStr(SpellsDB,0,'A3UO',"Func1565")
  call SaveStr(SpellsDB,0,'A3DZ',"Func1565")
  call SaveStr(SpellsDB,0,'A32B',"Func1555")
  call SaveStr(SpellsDB,0,'A38R',"MangoUsed")
  call SaveStr(SpellsDB,0,'A38V',"GlimmerCapeUsed")
  call SaveStr(SpellsDB,0,'A395',"GuardianGreaves_Init")
  call SaveStr(SpellsDB,0,'A3BP',"Func1585")
  call SaveStr(SpellsDB,0,'A0B6',"Func1365")
  call SaveStr(SpellsDB,0,'A0JT',"Func1366")
  call SaveStr(SpellsDB,0,'A0OT',"Func1369")
  call SaveStr(SpellsDB,0,'A3KO',"Func3722")
  call SaveStr(SpellsDB,0,'Aeat',"Func1380")
  call SaveStr(SpellsDB,0,'A2VG',"Func1380")
  call SaveStr(SpellsDB,0,'A1R5',"Func1401")
  call SaveStr(SpellsDB,0,'A231',"Func1402")
  call SaveStr(SpellsDB,0,'A3AG',"Func1402")
  call SaveStr(SpellsDB,0,'A0HB',"Func1404")
  call SaveStr(SpellsDB,0,'A0D3',"Func1404")
  call SaveStr(SpellsDB,0,'A0DF',"Func1404")
  call SaveStr(SpellsDB,0,'A2V4',"Func1408")
  call SaveStr(SpellsDB,0,'A11H',"Func1412")
  call SaveStr(SpellsDB,0,'A11G',"Func1412")
  call SaveStr(SpellsDB,0,'A11D',"Func1412")
  call SaveStr(SpellsDB,0,'A0S3',"Func1412")
  call SaveStr(SpellsDB,0,'A11E',"Func1412")
  call SaveStr(SpellsDB,0,'A11F',"Func1412")
  call SaveStr(SpellsDB,0,'A0CK',"Func1413")
  call SaveStr(SpellsDB,0,'A1FP',"Func1405")
  call SaveStr(SpellsDB,0,'A02W',"Func1423")
  call SaveStr(SpellsDB,0,'A0JL',"Func1439")
  call SaveStr(SpellsDB,0,'A0T9',"Func1443")
  call SaveStr(SpellsDB,0,'A0JY',"Func1445")
  call SaveStr(SpellsDB,0,'A138',"Func1305")
  call SaveStr(SpellsDB,0,'A14C',"Func1305")
  call SaveStr(SpellsDB,0,'A0JZ',"Func1307")
  call SaveStr(SpellsDB,0,'A14D',"Func1304")
  call SaveStr(SpellsDB,0,'A141',"Func1457")
  call SaveStr(SpellsDB,0,'A1WI',"Func1457")
  call SaveStr(SpellsDB,0,'A12W',"Func1463")
  call SaveStr(SpellsDB,0,'A15W',"Func1465")
  call SaveStr(SpellsDB,0,'A1AC',"Func1497")
  call SaveStr(SpellsDB,0,'A1AS',"Func1502")
  call SaveStr(SpellsDB,0,'A2KS',"Func1503")
  call SaveStr(SpellsDB,0,'A1EW',"Func1414")
  call SaveStr(SpellsDB,0,'A3O8',"Func1415")
  call SaveStr(SpellsDB,0,'A3O9',"IronWoodBranchUsed")
  call SaveStr(SpellsDB,0,'A0B8',"Func1505")
  call SaveStr(SpellsDB,0,'A1WE',"Func1505")
  call SaveStr(SpellsDB,0,'A1MO',"Func1509")
  call SaveStr(SpellsDB,0,'A3E8',"Func1510")
  call SaveStr(SpellsDB,0,'A1Q8',"Func1499")
  call SaveStr(SpellsDB,0,'A0K7',"Func1553")
  call SaveStr(SpellsDB,0,'A28Y',"Func1550")
  call SaveStr(SpellsDB,0,'A1ZW',"Func1512")
  call SaveStr(SpellsDB,0,'AIxk',"Func1333")
  call SaveStr(SpellsDB,0,'A206',"Func1517")
  call SaveStr(SpellsDB,0,'A28D',"Func1519")
  call SaveStr(SpellsDB,0,'A2N1',"Func1537")
  call SaveStr(SpellsDB,0,'A2TK',"Func1534")
  call SaveStr(SpellsDB,0,'AItb',"Func1528")
  call SaveStr(SpellsDB,0,'A1FD',"Func1531")
  call SaveStr(SpellsDB,0,'A3O4',"Func1532")
  call SaveStr(SpellsDB,0,'A2WI',"Func1529")
  call SaveStr(SpellsDB,0,'A2WH',"Func1529")
  call SaveStr(SpellsDB,0,'A308',"Func1539")
  call SaveStr(SpellsDB,0,'A0HU',"Func1811")
  call SaveStr(SpellsDB,0,'A0HX',"Func1811")
  call SaveStr(SpellsDB,0,'ACtc',"Func1525")
  call SaveStr(SpellsDB,0,'A1T7',"Func1358")
  call SaveStr(SpellsDB,0,'A2VE',"Func1354")
  call SaveStr(SpellsDB,0,'A0K5',"Func1284")
  call SaveStr(SpellsDB,0,'A3FA',"Func1285")
  call SaveStr(SpellsDB,0,'A30N',"Func4583")
  call SaveStr(SpellsDB,0,'A2TI',"Func4585")
  call SaveStr(SpellsDB,0,'A30P',"Func4585")
  call SaveStr(SpellsDB,0,'Adsm',"Func4314")
  call SaveStr(SpellsDB,0,'AIpg',"Func1589")
  call SaveStr(SpellsDB,0,'A3MW',"Func1592")
  call SaveStr(SpellsDB,0,'A39C',"Func1521")
  call SaveStr(SpellsDB,0,'A14E',"Func2213")
  call SaveStr(SpellsDB,0,'A33F',"Func1573")
  call SaveStr(SpellsDB,0,'A3JJ',"Func1574")
  call SaveStr(SpellsDB,0,'A14F',"Func2212")
  call SaveStr(SpellsDB,0,'A06M',"Func4690")
  call SaveStr(SpellsDB,0,'A00S',"Func4691")
  call SaveStr(SpellsDB,0,'A02S',"Func4693")
  call SaveStr(SpellsDB,0,'A02M',"Func4696")
  call SaveStr(SpellsDB,0,'A0P6',"Func4695")
  call SaveStr(SpellsDB,0,'A01F',"Func4697")
  call SaveStr(SpellsDB,0,'A03Y',"Func4692")
  call SaveStr(SpellsDB,610,'A010',"Func4704")
  call SaveStr(SpellsDB,0,'A0MT',"Func4705")
  call SaveStr(SpellsDB,0,'A0WQ',"Func3336")
  call SaveStr(SpellsDB,0,'A0BH',"Func3334")
  call SaveStr(SpellsDB,0,'A03D',"Func3614")
  call SaveStr(SpellsDB,0,'A136',"Func2352")
  call SaveStr(SpellsDB,0,'A11K',"Func2379")
  call SaveStr(SpellsDB,0,'A3OF',"Func2379")
  call SaveStr(SpellsDB,0,'A1NI',"Func2387")
  call SaveStr(SpellsDB,0,'A0IL',"Func2394")
  call SaveStr(SpellsDB,0,'AEbl',"Func2399")
  call SaveStr(SpellsDB,0,'A0O1',"Func2404")
  call SaveStr(SpellsDB,0,'A0OO',"Func2412")
  call SaveStr(SpellsDB,0,'A2U5',"Func2412")
  call SaveStr(SpellsDB,0,'A0B4',"Func2420")
  call SaveStr(SpellsDB,0,'A07A',"Func2436")
  call SaveStr(SpellsDB,0,'A025',"Func3359")
  call SaveStr(SpellsDB,0,'A0GP',"Func2447")
  call SaveStr(SpellsDB,0,'A2ON',"Func2462")
  call SaveStr(SpellsDB,0,'A2O6',"Func2470")
  call SaveStr(SpellsDB,0,'A384',"Func2470")
  call SaveStr(SpellsDB,0,'A0LV',"Func2478")
  call SaveStr(SpellsDB,0,'A2MC',"Func2478")
  call SaveStr(SpellsDB,0,'A0LT',"Func2489")
  call SaveStr(SpellsDB,0,'A0Z6',"Func2493")
  call SaveStr(SpellsDB,0,'A0Z5',"Func2511")
  call SaveStr(SpellsDB,0,'A0Z8',"Func2515")
  call SaveStr(SpellsDB,0,'A1CV',"Func2515")
  call SaveStr(SpellsDB,0,'A0Z4',"Func2519")
  call SaveStr(SpellsDB,0,'A03R',"Func2523")
  call SaveStr(SpellsDB,0,'A0AV',"Func2523")
  call SaveStr(SpellsDB,0,'A1E9',"Func2527")
  call SaveStr(SpellsDB,0,'A14P',"Func2537")
  call SaveStr(SpellsDB,0,'A14O',"Func2549")
  call SaveStr(SpellsDB,0,'A03F'," BreatheFire_SpellEffect")
  call SaveStr(SpellsDB,0,'A0SK',"Func2571")
  call SaveStr(SpellsDB,0,'A0DH',"Func2577")
  call SaveStr(SpellsDB,0,'A1OB',"Func2577")
  call SaveStr(SpellsDB,0,'A0DL',"Func2578")
  call SaveStr(SpellsDB,0,'A01B',"Func2585")
  call SaveStr(SpellsDB,0,'A0B1',"MidnightPulse_SpellEffect")
  call SaveStr(SpellsDB,0,'A180',"Func2602")
  call SaveStr(SpellsDB,0,'A1BX',"Func2607")
  call SaveStr(SpellsDB,0,'A2TX',"Func2607")
  call SaveStr(SpellsDB,0,'A0SC',"Func2610")
  call SaveStr(SpellsDB,0,'A0SB',"Func2617")
  call SaveStr(SpellsDB,0,'A0S8',"Func2615")
  call SaveStr(SpellsDB,0,'A1QP',"Func2615")
  call SaveStr(SpellsDB,0,'A0S9',"Func2623")
  call SaveStr(SpellsDB,0,'A0SA',"Func2624")
  call SaveStr(SpellsDB,0,'A21E',"Func2626")
  call SaveStr(SpellsDB,0,'A1W8',"Func2632")
  call SaveStr(SpellsDB,0,'A1W9',"Func2632")
  call SaveStr(SpellsDB,0,'A0QP',"InnerVitality_Start")
  call SaveStr(SpellsDB,0,'A0O5',"Func2650")
  call SaveStr(SpellsDB,0,'A1B1',"Func2650")
  call SaveStr(SpellsDB,0,'A0O6',"Func2662")
  call SaveStr(SpellsDB,0,'A0O7',"Func2666")
  call SaveStr(SpellsDB,0,'A0M1',"Func2674")
  call SaveStr(SpellsDB,0,'A1AX',"Func2674")
  call SaveStr(SpellsDB,0,'A338',"Func2684")
  call SaveStr(SpellsDB,0,'A05G',"Func2681")
  call SaveStr(SpellsDB,0,'A10U',"Func2687")
  call SaveStr(SpellsDB,0,'A11Y',"Func2687")
  call SaveStr(SpellsDB,0,'A11Z',"Func2687")
  call SaveStr(SpellsDB,0,'A085',"Func2701")
  call SaveStr(SpellsDB,0,'A112',"Func2703")
  call SaveStr(SpellsDB,0,'A11X',"Func2708")
  call SaveStr(SpellsDB,0,'A11V',"Func2708")
  call SaveStr(SpellsDB,0,'A11W',"Func2708")
  call SaveStr(SpellsDB,0,'A027',"Func2719")
  call SaveStr(SpellsDB,0,'A054',"Func2738")
  call SaveStr(SpellsDB,0,'A00U',"Func2738")
  call SaveStr(SpellsDB,0,'A0KV',"Func2746")
  call SaveStr(SpellsDB,0,'A3UG',"Func2746")
  call SaveStr(SpellsDB,0,'A0KU',"Potm_MoonlightShadows")
  call SaveStr(SpellsDB,0,'A0LN',"Func2761")
  call SaveStr(SpellsDB,0,'A0L8',"Func2769")
  call SaveStr(SpellsDB,0,'A0FN',"Func2777")
  call SaveStr(SpellsDB,0,'A0G8',"Func2785")
  call SaveStr(SpellsDB,0,'A3LF',"Func2773")
  call SaveStr(SpellsDB,0,'A0GC',"Func2781")
  call SaveStr(SpellsDB,0,'A07U',"Func2810")
  call SaveStr(SpellsDB,0,'A38E',"Func2810")
  call SaveStr(SpellsDB,0,'A2KU',"Func2815")
  call SaveStr(SpellsDB,0,'A08N',"Func2846")
  call SaveStr(SpellsDB,0,'A08V',"Func2849")
  call SaveStr(SpellsDB,0,'A0ER',"Func2848")
  call SaveStr(SpellsDB,0,'A2S8',"Func2848")
  call SaveStr(SpellsDB,0,'A10D',"Func2860")
  call SaveStr(SpellsDB,0,'A313',"Func2879")
  call SaveStr(SpellsDB,0,'A07Z',"Func2888")
  call SaveStr(SpellsDB,0,'A324',"Func2888")
  call SaveStr(SpellsDB,0,'A01Z',"Func2895")
  call SaveStr(SpellsDB,0,'A2ML',"Tree_Armour_Start")
  call SaveStr(SpellsDB,0,'A01V',"Func2907")
  call SaveStr(SpellsDB,0,'A3N5',"Func2953")
  call SaveStr(SpellsDB,0,'A14L',"Func2925")
  call SaveStr(SpellsDB,0,'A0L3',"Func2928")
  call SaveStr(SpellsDB,0,'A2QC',"Func2928")
  call SaveStr(SpellsDB,0,'A064',"Func2936")
  call SaveStr(SpellsDB,0,'A0RG',"Func2944")
  call SaveStr(SpellsDB,0,'A3NW',"Func2946")
  call SaveStr(SpellsDB,0,'A2IS',"Sven_Warcry_Start")
  call SaveStr(SpellsDB,0,'A190',"Func2972")
  call SaveStr(SpellsDB,0,'A1EF',"Func2976")
  call SaveStr(SpellsDB,0,'A0A5',"Func3001")
  call SaveStr(SpellsDB,0,'A0A7',"Func3006")
  call SaveStr(SpellsDB,0,'A1A1',"Func3031")
  call SaveStr(SpellsDB,0,'A30S',"Func3031")
  call SaveStr(SpellsDB,0,'A1A8',"Func3042")
  call SaveStr(SpellsDB,0,'A06B',"Func3047")
  call SaveStr(SpellsDB,0,'A0BQ',"Func3074")
  call SaveStr(SpellsDB,0,'A2WA',"Func3080")
  call SaveStr(SpellsDB,0,'A05E',"Func3080")
  call SaveStr(SpellsDB,0,'A0BZ',"Func3088")
  call SaveStr(SpellsDB,0,'A0LL',"Func3103")
  call SaveStr(SpellsDB,0,'A1EJ',"Func3105")
  call SaveStr(SpellsDB,0,'A0BE',"Func3108")
  call SaveStr(SpellsDB,0,'A21M',"Func3121")
  call SaveStr(SpellsDB,0,'A21N',"Func3117")
  call SaveStr(SpellsDB,0,'A1P9',"Func3127")
  call SaveStr(SpellsDB,0,'A0LC',"Func3129")
  call SaveStr(SpellsDB,0,'A3NY',"Func3129")
  call SaveStr(SpellsDB,0,'A17O',"Func3140")
  call SaveStr(SpellsDB,0,'A0IN',"Func3149")
  call SaveStr(SpellsDB,0,'A1AW',"Func3149")
  call SaveStr(SpellsDB,0,'A0RP',"Func3163")
  call SaveStr(SpellsDB,0,'A2XJ',"Func3162")
  call SaveStr(SpellsDB,0,'A0RQ',"Func3161")
  call SaveStr(SpellsDB,0,'A1EA',"Func3176")
  call SaveStr(SpellsDB,0,'A0RV',"Func3183")
  call SaveStr(SpellsDB,0,'A14I',"Func3185")
  call SaveStr(SpellsDB,0,'A29G',"Func3207")
  call SaveStr(SpellsDB,0,'A29H',"Func3207")
  call SaveStr(SpellsDB,0,'A2WQ',"Func3215")
  call SaveStr(SpellsDB,0,'A0MF',"Func3222")
  call SaveStr(SpellsDB,0,'A0I6',"Func3242")
  call SaveStr(SpellsDB,0,'A02Q',"Func3263")
  call SaveStr(SpellsDB,0,'A1D9',"Func3263")
  call SaveStr(SpellsDB,0,'A1EL',"Func3270")
  call SaveStr(SpellsDB,0,'A19V',"Func3277")
  call SaveStr(SpellsDB,0,'A30M',"Func3316")
  call SaveStr(SpellsDB,0,'A0BG',"Func3314")
  call SaveStr(SpellsDB,0,'A0Bg',"Func3314")
  call SaveStr(SpellsDB,0,'A055',"Func3340")
  call SaveStr(SpellsDB,0,'A03O',"Func3350")
  call SaveStr(SpellsDB,0,'A0OJ',"Func3371")
  call SaveStr(SpellsDB,0,'A0OK',"Func3375")
  call SaveStr(SpellsDB,0,'A1VW',"Func3375")
  call SaveStr(SpellsDB,0,'A0QG',"Func3378")
  call SaveStr(SpellsDB,0,'A0QE',"Func3381")
  call SaveStr(SpellsDB,0,'A21Q',"Func3391")
  call SaveStr(SpellsDB,0,'A0QK',"Func3391")
  call SaveStr(SpellsDB,0,'A15S',"Func3394")
  call SaveStr(SpellsDB,0,'A3J3',"Func3394")
  call SaveStr(SpellsDB,0,'A15V',"Tombstone_SpellEffect")
  call SaveStr(SpellsDB,0,'A15J',"FreshGolem_SpellEffectPre")
  call SaveStr(SpellsDB,0,'A0LK',"TimeWalk_SpellEffect")
  call SaveStr(SpellsDB,0,'A0CZ',"TimeDilation_SpellEffect")
  call SaveStr(SpellsDB,0,'A1D7',"Void_ChronosPhere")
  call SaveStr(SpellsDB,0,'A0J1',"Void_ChronosPhere")
  call SaveStr(SpellsDB,0,'A0VS',"EMP_SpellEffect")
  call SaveStr(SpellsDB,0,'A3K0',"Tonardo_SpellEffect")
  call SaveStr(SpellsDB,0,'A0VK',"Tonardo_SpellEffect")
  call SaveStr(SpellsDB,0,'A3JZ',"Alacrity_SpellEffect")
  call SaveStr(SpellsDB,0,'A0VQ',"Alacrity_SpellEffect")
  call SaveStr(SpellsDB,0,'A0VN',"ChaosMeteor_SpellEffect")
  call SaveStr(SpellsDB,0,'A0VO',"ForgeSpirit_SpellEffect")
  call SaveStr(SpellsDB,0,'A0VP',"Icewall_SpellEffect")
  call SaveStr(SpellsDB,0,'A0VG',"Sunstrike_Act")
  call SaveStr(SpellsDB,0,'A21X',"Func3503")
  call SaveStr(SpellsDB,0,'A21V',"Func3503")
  call SaveStr(SpellsDB,0,'A21W',"Func3503")
  call SaveStr(SpellsDB,0,'A21Y',"Func3498")
  call SaveStr(SpellsDB,0,'A1GU',"Func3498")
  call SaveStr(SpellsDB,0,'A0N8',"Func3540")
  call SaveStr(SpellsDB,0,'A0NB',"Func3546")
  call SaveStr(SpellsDB,0,'A20T',"Func3576")
  call SaveStr(SpellsDB,0,'A06W',"Func3578")
  call SaveStr(SpellsDB,0,'A21F',"Func3583")
  call SaveStr(SpellsDB,0,'A21G',"Func3583")
  call SaveStr(SpellsDB,0,'A08R',"Func3585")
  call SaveStr(SpellsDB,0,'A05T',"Func3593")
  call SaveStr(SpellsDB,0,'A08H',"Func3593")
  call SaveStr(SpellsDB,0,'A0X5',"Func3600")
  call SaveStr(SpellsDB,0,'A0ZF',"Func3623")
  call SaveStr(SpellsDB,0,'A10R',"Func3628")
  call SaveStr(SpellsDB,0,'A1OP',"Func3631")
  call SaveStr(SpellsDB,0,'A29L',"Func3647")
  call SaveStr(SpellsDB,0,'A037',"Func3648")
  call SaveStr(SpellsDB,0,'A1RD',"Func3660")
  call SaveStr(SpellsDB,0,'A1AT',"Func3675")
  call SaveStr(SpellsDB,0,'A0SW',"Func3685")
  call SaveStr(SpellsDB,0,'A3DR',"Func3685")
  call SaveStr(SpellsDB,0,'A3DO',"Func3689")
  call SaveStr(SpellsDB,0,'A2TT',"Func3693")
  call SaveStr(SpellsDB,0,'A05V',"Func3708")
  call SaveStr(SpellsDB,0,'A0X7',"Func3711")
  call SaveStr(SpellsDB,0,'A3D0',"Func3711")
  call SaveStr(SpellsDB,0,'A2KO',"Func3714")
  call SaveStr(SpellsDB,0,'A3CZ',"Func3714")
  call SaveStr(SpellsDB,0,'A09U',"Func3717")
  call SaveStr(SpellsDB,0,'A3D1',"Func3717")
  call SaveStr(SpellsDB,0,'A3CT',"Func3721")
  call SaveStr(SpellsDB,0,'A0EY',"Func3728")
  call SaveStr(SpellsDB,0,'A0FH',"Func3728")
  call SaveStr(SpellsDB,0,'A0F0',"Func3728")
  call SaveStr(SpellsDB,0,'A3K6',"Func3728")
  call SaveStr(SpellsDB,0,'A3K7',"Func3728")
  call SaveStr(SpellsDB,0,'A02H',"Func3741")
  call SaveStr(SpellsDB,0,'A0RA',"Func3772")
  call SaveStr(SpellsDB,0,'A01I',"Func3787")
  call SaveStr(SpellsDB,0,'A06I',"Func3810")
  call SaveStr(SpellsDB,0,'A3NV',"Func3810")
  call SaveStr(SpellsDB,0,'A09D',"Func3814")
  call SaveStr(SpellsDB,0,'A1E7',"Func3828")
  call SaveStr(SpellsDB,0,'A1AO',"Func3852")
  call SaveStr(SpellsDB,0,'A1UV',"Func3852")
  call SaveStr(SpellsDB,0,'A06O',"Func3854")
  call SaveStr(SpellsDB,0,'A3NX',"Func3854")
  call SaveStr(SpellsDB,0,'A0H0',"Func3871")
  call SaveStr(SpellsDB,0,'A29K',"Func3872")
  call SaveStr(SpellsDB,0,'A05C',"Func3874")
  call SaveStr(SpellsDB,0,'A0HW',"Func3891")
  call SaveStr(SpellsDB,0,'A0H9',"Func3905")
  call SaveStr(SpellsDB,0,'A0ES',"Func3914")
  call SaveStr(SpellsDB,0,'A2KZ',"Func3950")
  call SaveStr(SpellsDB,0,'A0H4',"Func3955")
  call SaveStr(SpellsDB,0,'A29I',"Func3969")
  call SaveStr(SpellsDB,0,'A226',"Func3970")
  call SaveStr(SpellsDB,0,'A0OR',"Func3978")
  call SaveStr(SpellsDB,0,'A10Q',"Func3990")
  call SaveStr(SpellsDB,0,'A1DB',"Func3990")
  call SaveStr(SpellsDB,0,'A10L',"Func3997")
  call SaveStr(SpellsDB,0,'A173',"Func4002")
  call SaveStr(SpellsDB,0,'A0A6',"Func4005")
  call SaveStr(SpellsDB,0,'A013',"Func4005")
  call SaveStr(SpellsDB,0,'A080',"Func4022")
  call SaveStr(SpellsDB,0,'A1UZ',"Func4022")
  call SaveStr(SpellsDB,0,'A1NE',"Func4037")
  call SaveStr(SpellsDB,0,'A2IG',"Func4037")
  call SaveStr(SpellsDB,0,'A1NB',"Func4032")
  call SaveStr(SpellsDB,0,'A1NC',"Func4032")
  call SaveStr(SpellsDB,0,'A1ND',"Func4032")
  call SaveStr(SpellsDB,0,'A1NL',"Func4032")
  call SaveStr(SpellsDB,0,'A1NM',"Func4032")
  call SaveStr(SpellsDB,0,'A1NN',"Func4032")
  call SaveStr(SpellsDB,0,'A2IZ',"Func4032")
  call SaveStr(SpellsDB,0,'A2J0',"Func4032")
  call SaveStr(SpellsDB,0,'A2J1',"Func4032")
  call SaveStr(SpellsDB,0,'A06P',"Func4056")
  call SaveStr(SpellsDB,0,'A0AS',"Func4067")
  call SaveStr(SpellsDB,0,'A0CA',"Func4080")
  call SaveStr(SpellsDB,0,'A0CT',"Func4083")
  call SaveStr(SpellsDB,0,'A3DM',"Func4083")
  call SaveStr(SpellsDB,0,'A1QW',"Func4091")
  call SaveStr(SpellsDB,0,'A0NE',"Func4108")
  call SaveStr(SpellsDB,0,'A0NO',"Func4112")
  call SaveStr(SpellsDB,0,'A0NT',"Func4114")
  call SaveStr(SpellsDB,0,'A0NX',"Func4114")
  call SaveStr(SpellsDB,0,'A1HS',"Func4127")
  call SaveStr(SpellsDB,0,'A1MI',"Func4135")
  call SaveStr(SpellsDB,0,'A2QE',"Func4135")
  call SaveStr(SpellsDB,0,'A1HQ',"Func4139")
  call SaveStr(SpellsDB,0,'A1IM',"Func4141")
  call SaveStr(SpellsDB,0,'A1IN',"Func4150")
  call SaveStr(SpellsDB,0,'A1J7',"Func4155")
  call SaveStr(SpellsDB,0,'A04A',"Func4158")
  call SaveStr(SpellsDB,0,'A28R',"Func4160")
  call SaveStr(SpellsDB,0,'A28S',"Func4159")
  call SaveStr(SpellsDB,0,'A00P',"Func4163")
  call SaveStr(SpellsDB,0,'A00H',"Func4166")
  call SaveStr(SpellsDB,0,'A0A1',"Func4166")
  call SaveStr(SpellsDB,0,'A1RJ',"Func4171")
  call SaveStr(SpellsDB,0,'A1RK',"Func4177")
  call SaveStr(SpellsDB,0,'A315',"Func4177")
  call SaveStr(SpellsDB,0,'A1YX',"Func4192")
  call SaveStr(SpellsDB,0,'A1S4',"Func4198")
  call SaveStr(SpellsDB,0,'A1SB',"Func4207")
  call SaveStr(SpellsDB,0,'A1SO',"Func4219")
  call SaveStr(SpellsDB,0,'A1T5',"Func4225")
  call SaveStr(SpellsDB,0,'A235',"Func4225")
  call SaveStr(SpellsDB,0,'A1SU',"Func4237")
  call SaveStr(SpellsDB,0,'A1U6',"Func4249")
  call SaveStr(SpellsDB,0,'A2V8',"Func4249")
  call SaveStr(SpellsDB,0,'A1T8',"Func4254")
  call SaveStr(SpellsDB,0,'A1TA',"Wisp_Tether")
  call SaveStr(SpellsDB,0,'A1TB',"Func4274")
  call SaveStr(SpellsDB,0,'A1YO',"Func4280")
  call SaveStr(SpellsDB,0,'A2HS',"Func4364")
  call SaveStr(SpellsDB,0,'A2H0',"Func4369")
  call SaveStr(SpellsDB,0,'A2H3',"Func4373")
  call SaveStr(SpellsDB,0,'A2JO',"Func4385")
  call SaveStr(SpellsDB,0,'A2JQ',"Func4385")
  call SaveStr(SpellsDB,0,'A2JP',"Func4385")
  call SaveStr(SpellsDB,0,'A2JR',"Func4385")
  call SaveStr(SpellsDB,0,'A2JL',"Func4392")
  call SaveStr(SpellsDB,0,'A2J2',"Func4409")
  call SaveStr(SpellsDB,0,'A2JB',"Func4414")
  call SaveStr(SpellsDB,0,'A2BG',"Func4418")
  call SaveStr(SpellsDB,0,'A2TU',"Func4418")
  call SaveStr(SpellsDB,0,'A2IT',"Func4428")
  call SaveStr(SpellsDB,0,'A2FK',"Func4431")
  call SaveStr(SpellsDB,0,'A2E3',"Func4437")
  call SaveStr(SpellsDB,0,'A2E5',"Func4448")
  call SaveStr(SpellsDB,0,'A322',"Func4448")
  call SaveStr(SpellsDB,0,'A31Y',"Func4448")
  call SaveStr(SpellsDB,0,'A2LB',"Func4461")
  call SaveStr(SpellsDB,0,'A2TF',"Func4494")
  call SaveStr(SpellsDB,0,'A2LL',"Gnoll_Spark_Start")
  call SaveStr(SpellsDB,0,'A2LM',"Gnoll_Field_Start")
  call SaveStr(SpellsDB,0,'A2M0',"Func4517")
  call SaveStr(SpellsDB,0,'A2WF',"Func4533")
  call SaveStr(SpellsDB,0,'A2QI',"Func4546")
  call SaveStr(SpellsDB,0,'A2O2',"Func4527")
  call SaveStr(SpellsDB,0,'A0R0',"Func3781")
  call SaveStr(SpellsDB,0,'A0J5',"Func4064")
  call SaveStr(SpellsDB,0,'S00U',"Func4076")
  call SaveStr(SpellsDB,0,'A0R7',"Surge_SpellEffect")
  call SaveStr(SpellsDB,0,'A0R5',"Func3400")
  call SaveStr(SpellsDB,0,'A034',"Func3876")
  call SaveStr(SpellsDB,0,'A3K1',"Func4358")
  call SaveStr(SpellsDB,0,'A3OD',"Func2451")
  call SaveStr(SpellsDB,0,'A1S7',"Func4302")
  call SaveStr(SpellsDB,0,'A229',"Func4232")
  call SaveStr(SpellsDB,0,'A1YY',"Func4183")
  call SaveStr(SpellsDB,0,'A1P8',"Func3930")
  call SaveStr(SpellsDB,0,'A1DP',"Func3839")
  call SaveStr(SpellsDB,0,'A02Z',"Func3824")
  call SaveStr(SpellsDB,0,'A0CC',"Func3824")
  call SaveStr(SpellsDB,0,'A2TD',"Func3818")
  call SaveStr(SpellsDB,0,'A29J',"RequiemOfSouls_SpellEffect")
  call SaveStr(SpellsDB,0,'A3OJ',"RequiemOfSouls_SpellEffect")
  call SaveStr(SpellsDB,0,'A053',"Func3599")
  call SaveStr(SpellsDB,0,'A093',"Func3611")
  call SaveStr(SpellsDB,0,'A34X',"Func3612")
  call SaveStr(SpellsDB,0,'AHtb',"Func3521")
  call SaveStr(SpellsDB,0,'A0XL',"Func3463")
  call SaveStr(SpellsDB,0,'A0VM',"Func3472")
  call SaveStr(SpellsDB,0,'A19Z',"Func3285")
  call SaveStr(SpellsDB,0,'A34Y',"Func3285")
  call SaveStr(SpellsDB,0,'A04Q',"Func3358")
  call SaveStr(SpellsDB,0,'A2X9',"Func3305")
  call SaveStr(SpellsDB,0,'A2X8',"Func3306")
  call SaveStr(SpellsDB,0,'A04Y',"Func3258")
  call SaveStr(SpellsDB,0,'A12K',"Func3200")
  call SaveStr(SpellsDB,0,'A12J',"Func3193")
  call SaveStr(SpellsDB,0,'A24D',"Func2821")
  call SaveStr(SpellsDB,0,'A0DX',"Func2592")
  call SaveStr(SpellsDB,0,'A2UU',"Func4571")
  call SaveStr(SpellsDB,0,'A2SG',"Func4491")
  call SaveStr(SpellsDB,0,'A2T5',"Func4488")
  call SaveStr(SpellsDB,0,'A2HN',"Func4424")
  call SaveStr(SpellsDB,0,'A1SA',"Func4212")
  call SaveStr(SpellsDB,0,'A1S8',"Func4203")
  call SaveStr(SpellsDB,0,'A07Q',"Func3943")
  call SaveStr(SpellsDB,0,'A0PL',"Func3763")
  call SaveStr(SpellsDB,0,'A3OH',"Func3961")
  call SaveStr(SpellsDB,0,'A0I3',"Func3219")
  call SaveStr(SpellsDB,0,'A38K',"Func3052")
  call SaveStr(SpellsDB,0,'A0K9',"Func2960")
  call SaveStr(SpellsDB,0,'A11N',"Func2365")
  call SaveStr(SpellsDB,0,'A1B0',"Func3750")
  call SaveStr(SpellsDB,0,'A03K',"Func3750")
  call SaveStr(SpellsDB,0,'A3QB',"Func2985")
  call SaveStr(SpellsDB,0,'A1C0',"Func3666")
  call SaveStr(SpellsDB,0,'A1OV',"Func3638")
  call SaveStr(SpellsDB,0,'A2QT',"Func4484")
  call SaveStr(SpellsDB,0,'A3S2',"Func1570")
  call SaveStr(SpellsDB,3,'A1QD',"Func1494")
  call SaveStr(SpellsDB,3,'A07Q',"Func2329")
  call SaveStr(SpellsDB,3,'A30N',"Func2329")
  call SaveStr(SpellsDB,3,'A2LB',"Func2329")
  call SaveStr(SpellsDB,3,'A2T5',"Func2329")
  call SaveStr(SpellsDB,3,'A2SG',"Func2329")
  call SaveStr(SpellsDB,3,'A0K9',"Func2961")
  call SaveStr(SpellsDB,3,'A02A',"Func3155")
  call SaveStr(SpellsDB,3,'A2UU',"Func4570")
  call SaveStr(SpellsDB,3,'A24D',"Func2819")
  call SaveStr(SpellsDB,3,'A2X9',"Func3307")
  call SaveStr(SpellsDB,3,'AHtb',"Func3520")
  call SaveStr(SpellsDB,3,'A3N5',"Func2954")
  call SaveStr(SpellsDB,3,'AEbl',"Func2400")
  call SaveStr(SpellsDB,3,'A2QT',"Func4485")
  call SaveStr(SpellsDB,3,'A3DF',"Func4290")
  call SaveStr(SpellsDB,3,'A1S8',"Func2329")
  call SaveStr(SpellsDB,3,'A1P8',"Func3931")
  call SaveStr(SpellsDB,3,'A2TD',"Func3819")
  call SaveStr(SpellsDB,3,'A0RW',"Func3348")
  call SaveStr(SpellsDB,3,'A2QI',"Func4547")
  call SaveStr(SpellsDB,3,'A1TB',"Func4275")
  call SaveStr(SpellsDB,3,'A3DM',"Func4084")
  call SaveStr(SpellsDB,3,'A11N',"Func2367")
  call SaveStr(SpellsDB,3,'A2ON',"Func2464")
  call SaveStr(SpellsDB,3,'A361',"Func2487")
  call SaveStr(SpellsDB,3,'A28T',"Func2487")
  call SaveStr(SpellsDB,3,'A14O',"Func2551")
  call SaveStr(SpellsDB,3,'A180',"Func2603")
  call SaveStr(SpellsDB,3,'A21E',"Func2329")
  call SaveStr(SpellsDB,3,'A1AX',"Func2676")
  call SaveStr(SpellsDB,3,'A0M1',"Func2676")
  call SaveStr(SpellsDB,3,'A10U',"Func2688")
  call SaveStr(SpellsDB,3,'A11Y',"Func2688")
  call SaveStr(SpellsDB,3,'A11Z',"Func2688")
  call SaveStr(SpellsDB,3,'A01P',"Func2724")
  call SaveStr(SpellsDB,3,'A0G8',"Func2786")
  call SaveStr(SpellsDB,3,'A10D',"Func2865")
  call SaveStr(SpellsDB,3,'A190',"Func2974")
  call SaveStr(SpellsDB,3,'A0A5',"Func3003")
  call SaveStr(SpellsDB,3,'A1AA',"Func3021")
  call SaveStr(SpellsDB,3,'A1FY',"Func3059")
  call SaveStr(SpellsDB,3,'A0AK',"Func3059")
  call SaveStr(SpellsDB,3,'A0AM',"Func3058")
  call SaveStr(SpellsDB,3,'A0A3',"Func3058")
  call SaveStr(SpellsDB,3,'A0A4',"Func3058")
  call SaveStr(SpellsDB,3,'A1FZ',"Func3058")
  call SaveStr(SpellsDB,3,'A1WF',"Func3058")
  call SaveStr(SpellsDB,3,'A0BZ',"Func3089")
  call SaveStr(SpellsDB,3,'A1AW',"Func3150")
  call SaveStr(SpellsDB,3,'A0IN',"Func3150")
  call SaveStr(SpellsDB,3,'A04Y',"Func3259")
  call SaveStr(SpellsDB,3,'A0Bg',"Func3314")
  call SaveStr(SpellsDB,3,'A0BG',"Func3314")
  call SaveStr(SpellsDB,3,'A0OJ',"Func3372")
  call SaveStr(SpellsDB,3,'A09W',"Func3604")
  call SaveStr(SpellsDB,3,'A095',"Func3604")
  call SaveStr(SpellsDB,3,'A1RD',"Func3661")
  call SaveStr(SpellsDB,3,'A3DO',"Func3690")
  call SaveStr(SpellsDB,3,'A3DR',"Func3691")
  call SaveStr(SpellsDB,3,'A0SW',"Func3691")
  call SaveStr(SpellsDB,3,'A08C',"Func3744")
  call SaveStr(SpellsDB,3,'A0R0',"Func3782")
  call SaveStr(SpellsDB,3,'A0HA',"Func3911")
  call SaveStr(SpellsDB,3,'A226',"Func3972")
  call SaveStr(SpellsDB,7,'A0G4',"Func3940")
  call SaveStr(SpellsDB,7,'A1D8',"Func3940")
  call SaveStr(SpellsDB,7,'A0N8',"Func3541")
  call SaveStr(SpellsDB,7,'A12K',"Func3201")
  call SaveStr(SpellsDB,7,'A04P',"Func2943")
  call SaveStr(SpellsDB,7,'A1AU',"Func2943")
  call SaveStr(SpellsDB,7,'A10D',"Func2866")
  call SaveStr(SpellsDB,7,'A3OD',"Func2453")
  call SaveStr(SpellsDB,7,'A0FW',"Func2453")
  call SaveStr(SpellsDB,7,'A01O',"Func2627")
  call SaveStr(SpellsDB,610,'A0FD',"Func1426")
  call SaveStr(SpellsDB,610,'A3TP',"Func1429")
  call SaveStr(SpellsDB,610,'A0AR',"Func2556")
  call SaveStr(SpellsDB,610,'A0Ar',"Func2556")
  call SaveStr(SpellsDB,610,'A0MN',"Func4164")
  call SaveStr(SpellsDB,610,'A0RX',"Func4164")
  call SaveStr(SpellsDB,610,'AChx',"Func1588")
  call SaveStr(SpellsDB,610,'A0KM',"Func2481")
  call SaveStr(SpellsDB,610,'A2K7',"Func1586")
  call SaveStr(SpellsDB,610,'A0GK',"Func3252")
  call SaveStr(SpellsDB,610,'A2K4',"Func1541")
  call SaveStr(SpellsDB,610,'A2EA',"Func1520")
  call SaveStr(SpellsDB,610,'A08C',"Func3745")
  call SaveStr(SpellsDB,610,'A0VZ',"Func3497")
  call SaveStr(SpellsDB,610,'A28T',"Func2486")
  call SaveStr(SpellsDB,610,'A361',"Func2486")
  call SaveStr(SpellsDB,610,'A02A',"Func3154")
  call SaveStr(SpellsDB,610,'A020',"Func3217")
  call SaveStr(SpellsDB,610,'A0S1',"Func3231")
  call SaveStr(SpellsDB,610,'A2OI',"Func3265")
  call SaveStr(SpellsDB,610,'A004',"Func2431")
  call SaveStr(SpellsDB,610,'A0I7',"Func2597")
  call SaveStr(SpellsDB,610,'A01P',"Func2723")
  call SaveStr(SpellsDB,610,'A09Z',"Func2723")
  call SaveStr(SpellsDB,610,'A0E2',"Func3250")
  call SaveStr(SpellsDB,610,'A1MR',"Func3250")
  call SaveStr(SpellsDB,610,'A0G6',"Func2800")
  call SaveStr(SpellsDB,610,'A2KQ',"Func2829")
  call SaveStr(SpellsDB,610,'A2NT',"Func2913")
  call SaveStr(SpellsDB,610,'A0LH',"Func3291")
  call SaveStr(SpellsDB,610,'A1D6',"Func3205")
  call SaveStr(SpellsDB,610,'A12P',"Func3205")
  call SaveStr(SpellsDB,610,'A19O',"FlamingLasso_SpellEffect")
  call SaveStr(SpellsDB,610,'A1MV',"FlamingLasso_SpellEffect")
  call SaveStr(SpellsDB,610,'A0RW',"Func3346")
  call SaveStr(SpellsDB,610,'A0A2',"Func3637")
  call SaveStr(SpellsDB,610,'A0MU',"Func3634")
  call SaveStr(SpellsDB,610,'A067',"Func3710")
  call SaveStr(SpellsDB,610,'A08P',"Func3710")
  call SaveStr(SpellsDB,610,'A0YM',"Func3758")
  call SaveStr(SpellsDB,610,'A0FL',"Func3812")
  call SaveStr(SpellsDB,610,'A0G4',"Func3936")
  call SaveStr(SpellsDB,610,'A1D8',"Func3936")
  call SaveStr(SpellsDB,610,'A08X',"Func4024")
  call SaveStr(SpellsDB,610,'A1NA',"Func4050")
  call SaveStr(SpellsDB,610,'A0NM',"Func4101")
  call SaveStr(SpellsDB,610,'A1MG',"Func4129")
  call SaveStr(SpellsDB,610,'A1SQ',"Func4221")
  call SaveStr(SpellsDB,610,'A1SW',"Func4240")
  call SaveStr(SpellsDB,610,'A1TV',"Func4246")
  call SaveStr(SpellsDB,610,'A3DF',"Func4289")
  call SaveStr(SpellsDB,610,'A27F',"Func4326")
  call SaveStr(SpellsDB,610,'A27G',"Func4329")
  call SaveStr(SpellsDB,610,'A27H',"Func4348")
  call SaveStr(SpellsDB,610,'A2V9',"Func4348")
  call SaveStr(SpellsDB,610,'A38C',"Duel_SpellEffect")
  call SaveStr(SpellsDB,610,'A2CI',"Duel_SpellEffect")
  call SaveStr(SpellsDB,610,'A2BE',"Func4422")
  call SaveStr(SpellsDB,610,'A2LA',"Func4459")
  call SaveStr(SpellsDB,610,'A0Z0',"Func4466")
  call SaveStr(SpellsDB,610,'A2M1',"Func4507")
  call SaveStr(SpellsDB,610,'A0FW',"Func2450")
  call SaveStr(SpellsDB,610,'A10X',"Func2692")
  call SaveStr(SpellsDB,610,'A289',"Func2410")
  call SaveStr(SpellsDB,610,'A0O2',"Func2410")
  call SaveStr(SpellsDB,610,'A2WE',"AM_ManaVoid")
  call SaveStr(SpellsDB,610,'A0G2',"Func3664")
  call SaveStr(SpellsDB,610,'A046',"Func3959")
  call SaveStr(SpellsDB,610,'A1H5',"Func3712")
  call SaveStr(SpellsDB,610,'A3CY',"Func3712")
  call SaveStr(SpellsDB,610,'A095',"Func3603")
  call SaveStr(SpellsDB,610,'A09W',"Func3603")
  call SaveStr(SpellsDB,610,'A194',"Func3679")
  call SaveStr(SpellsDB,610,'A14R',"Func2545")
  call SaveStr(SpellsDB,610,'A0QR',"Huskar_LifeBreak_Wrapper")
  call SaveStr(SpellsDB,610,'A1B3',"Huskar_LifeBreak_Wrapper")
  call SaveStr(SpellsDB,610,'A2X6',"Func3983")
  call SaveStr(SpellsDB,610,'A049',"Func3077")
  call SaveStr(SpellsDB,610,'A2WB',"Func3077")
  call SaveStr(SpellsDB,610,'A26N',"Treant_LeechSeed")
  call SaveStr(SpellsDB,610,'A04C',"Func2525")
  call SaveStr(SpellsDB,610,'A04W',"Func4706")
  call SaveStr(SpellsDB,610,'A08D',"Func4706")
  call SaveStr(SpellsDB,610,'A08A',"Func4706")
  call SaveStr(SpellsDB,610,'A089',"Func4706")
  call SaveStr(SpellsDB,610,'A011',"Func2839")
  call SaveStr(SpellsDB,610,'A007',"Func2839")
  call SaveStr(SpellsDB,610,'A00F',"Func2839")
  call SaveStr(SpellsDB,610,'A01T',"Func2839")
  call SaveStr(SpellsDB,610,'A07F',"Func3587")
  call SaveStr(SpellsDB,610,'A06V',"Func4702")
  call SaveStr(SpellsDB,610,'A042',"Func4700")
  call SaveStr(SpellsDB,610,'A080',"Func4698")
  call SaveStr(SpellsDB,610,'A1UZ',"Func4699")
  call SaveStr(SpellsDB,610,'ACen',"Func2327")
  call SaveStr(SpellsDB,610,'A1P6',"Func2327")
  call SaveStr(SpellsDB,610,'Acdh',"Func4311")
  call SaveStr(SpellsDB,41,'A14O',"Func2553")
  call SaveStr(SpellsDB,41,'A3Q6',"Func3644")
  call SaveStr(SpellsDB,41,'A0H9',"Func3906")
  call SaveStr(SpellsDB,41,'A0LK',"Func3425")
  call SaveStr(SpellsDB,41,'A13T',"Func2362")
  call SaveStr(SpellsDB,41,'A11N',"Func2366")
  call SaveStr(SpellsDB,41,'A1IQ',"Func2427")
  call SaveStr(SpellsDB,41,'A3N5',"Func2957")
  call SaveStr(SpellsDB,41,'AHab',"Func2529")
  call SaveStr(SpellsDB,41,'A0QW',"Func2542")
  call SaveStr(SpellsDB,41,'A0QN',"Func2643")
  call SaveStr(SpellsDB,41,'A0QQ',"Func2646")
  call SaveStr(SpellsDB,41,'A18X',"Func2721")
  call SaveStr(SpellsDB,41,'A1CD',"Func3027")
  call SaveStr(SpellsDB,41,'A06B',"Func3045")
  call SaveStr(SpellsDB,41,'A21L',"Func3123")
  call SaveStr(SpellsDB,41,'ACac',"Func3158")
  call SaveStr(SpellsDB,41,'A0NS',"Func3228")
  call SaveStr(SpellsDB,41,'A1DA',"Func3228")
  call SaveStr(SpellsDB,41,'A0S1',"Func3234")
  call SaveStr(SpellsDB,41,'A19Z',"Func3284")
  call SaveStr(SpellsDB,41,'A0I8',"Func3299")
  call SaveStr(SpellsDB,41,'A01Y',"Func3525")
  call SaveStr(SpellsDB,41,'A1AZ',"Func3525")
  call SaveStr(SpellsDB,41,'A01N',"Func3701")
  call SaveStr(SpellsDB,41,'AIcd',"Func3791")
  call SaveStr(SpellsDB,41,'A06D',"Func3804")
  call SaveStr(SpellsDB,41,'A1E6',"Func3831")
  call SaveStr(SpellsDB,41,'A0JJ',"Func3883")
  call SaveStr(SpellsDB,41,'A0NA',"Func3901")
  call SaveStr(SpellsDB,41,'A04E',"Func3966")
  call SaveStr(SpellsDB,41,'A0MM',"Func4019")
  call SaveStr(SpellsDB,41,'A1NA',"Func4047")
  call SaveStr(SpellsDB,41,'A1IN',"Func4143")
  call SaveStr(SpellsDB,41,'A28Q',"Func4259")
  call SaveStr(SpellsDB,41,'A27V',"Func4356")
  call SaveStr(SpellsDB,41,'A2NE',"Func4473")
  call SaveStr(SpellsDB,41,'A0VC',"Func4519")
  call SaveStr(SpellsDB,41,'A2O2',"Func4525")
  call SaveStr(SpellsDB,41,'A0LN',"Func2765")
  call SaveStr(SpellsDB,41,'A0RP',"Func3164")
  call SaveStr(SpellsDB,41,'A19Q',"Func3097")
  call SaveStr(SpellsDB,41,'A0M3',"Func2459")
  call SaveStr(SpellsDB,41,'A0BR',"NecromasteryEffect")
  call SaveStr(SpellsDB,41,'A3T6',"NecromasteryEffect")
  call SaveStr(SpellsDB,41,'A0AK',"Func3048")
  call SaveStr(SpellsDB,41,'A1FY',"Func3048")
  call SaveStr(SpellsDB,41,'A0FV',"Func2444")
  call SaveStr(SpellsDB,41,'A064',"Func2939")
  call SaveStr(SpellsDB,41,'A3Q4',"Func4287")
  call SaveStr(SpellsDB,41,'A3Q5',"Func4287")
  call SaveReal(SpellsDB,'cstp','A0I3',0.35)
  call SaveReal(SpellsDB,'cstp','A0Z5',0.2)
  call SaveReal(SpellsDB,'cstp','A0LK',0.3)
  call SaveReal(SpellsDB,'cstp','A3NW',0.3)
  call SaveStr(SpellsDB,4,'A3QB',"Func3002")
  call SaveStr(SpellsDB,4,'A2E4',"Func4439")
  call SaveStr(SpellsDB,4,'A0CL',"Func2560")
  call SaveStr(SpellsDB,4,'A2XR',"Func2715")
  call SaveStr(SpellsDB,4,'A03U',"Func2929")
  call SaveStr(SpellsDB,4,'A0A5',"Func2998")
  call SaveStr(SpellsDB,4,'A0BE',"Func3111")
  call SaveStr(SpellsDB,4,'A0EY',"Func3729")
  call SaveStr(SpellsDB,4,'A086',"Func3753")
  call SaveStr(SpellsDB,4,'A08E',"Func3753")
  call SaveStr(SpellsDB,4,'A1B0',"Func3753")
  call SaveStr(SpellsDB,4,'A03K',"Func3753")
  call SaveStr(SpellsDB,4,'A03P',"Func3769")
  call SaveStr(SpellsDB,4,'A0ES',"Func3915")
  call SaveStr(SpellsDB,4,'A0MX',"Func4321")
  call SaveStr(SpellsDB,4,'A0LV',"Func2479")
  call SaveStr(SpellsDB,4,'A27V',"Func4332")
  call SaveStr(SpellsDB,4,'A27G',"Func4331")
  call SaveStr(SpellsDB,4,'A27F',"Func4330")
  call SaveStr(SpellsDB,4,'A0OO',"Func2413")
  call SaveStr(SpellsDB,4,'A0IF',"Func3364")
  call SaveStr(SpellsDB,4,'A0BG',"Func3326")
  call SaveStr(SpellsDB,4,'A0CY',"Func3094")
  call SaveStr(SpellsDB,4,'A21X',"Func3505")
  call SaveStr(SpellsDB,4,'A21W',"Func3505")
  call SaveStr(SpellsDB,4,'A21V',"Func3505")
  call SaveStr(SpellsDB,4,'A2E5',"Func4449")
  call SaveStr(SpellsDB,4,'A322',"Func4449")
  call SaveStr(SpellsDB,4,'A31Y',"Func4449")
  call SaveStr(SpellsDB,4,'A0VX',"Func4028")
  call SaveStr(SpellsDB,4,'A03E',"Func3622")
  call SaveStr(SpellsDB,4,'A2UO',"Func3351")
  call SaveStr(SpellsDB,4,'A0RO',"Func3171")
  call SaveStr(SpellsDB,4,'A0MB',"Func2948")
  call SaveStr(SpellsDB,4,'A0KX',"Func2793")
  call SaveStr(SpellsDB,4,'A2XQ',"Func2714")
  call SaveStr(SpellsDB,4,'A2VO',"Func2658")
  call SaveStr(SpellsDB,4,'A2AI',"Func2555")
  call SaveStr(SpellsDB,4,'A0AG',"Func2999")
  call SaveStr(SpellsDB,4,'A2JK',"Func4395")
  call SaveStr(SpellsDB,42,'A30X',"Func2876")
  call SaveStr(SpellsDB,42,'A19Q',"Func3098")
  call SaveStr(SpellsDB,42,'A06A',"Func2851")
endfunction

function Func1596 takes unit source returns nothing
  call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_MAX_LIFE))
  call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MAX_MANA))
endfunction

function Func1597 takes unit source,real result,real ZEE returns nothing
  local integer ZAE=GetHandleId(GetOwningPlayer(source))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),700))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),701))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),702))
  local unit M1X=(LoadUnitHandle(HY,(ZAE),703))
  set boolean124=true
  if RCX!=null then
    call ReviveHero(RCX,result,ZEE,true)
    call Func1596(RCX)
    call SetUnitX(RCX,result)
    call SetUnitY(RCX,ZEE)
  endif
  if M_X!=null then
    call ReviveHero(M_X,result,ZEE,true)
    call Func1596(M_X)
    call SetUnitX(M_X,result)
    call SetUnitY(M_X,ZEE)
  endif
  if M0X!=null then
    call ReviveHero(M0X,result,ZEE,true)
    call Func1596(M0X)
    call SetUnitX(M0X,result)
    call SetUnitY(M0X,ZEE)
  endif
  if M1X!=null then
    call ReviveHero(M1X,result,ZEE,true)
    call Func1596(M1X)
    call SetUnitX(M1X,result)
    call SetUnitY(M1X,ZEE)
  endif
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
endfunction

function Func1598 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  call Func1596(u)
  call Func0985(u,false)
  call ClearSelectionForPlayer(GetOwningPlayer(u))
  call SelectUnitAddForPlayer(u,GetOwningPlayer(u))
  if GetUnitTypeId(u)=='H00I' then
    call Func1597(u,GetUnitX(u),GetUnitY(u))
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func1599 takes unit source,real result,real ZEE returns nothing
  local integer ZAE=GetHandleId(GetOwningPlayer(source))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),700))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),701))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),702))
  local unit M1X=(LoadUnitHandle(HY,(ZAE),703))
  call DisableTrigger(trigger014)
  if RCX!=null then
    call SetUnitX(RCX,result)
    call SetUnitY(RCX,ZEE)
    call KillUnit(RCX)
  endif
  if M_X!=null then
    call SetUnitX(M_X,result)
    call SetUnitY(M_X,ZEE)
    call KillUnit(M_X)
  endif
  if M0X!=null then
    call SetUnitX(M0X,result)
    call SetUnitY(M0X,ZEE)
    call KillUnit(M0X)
  endif
  if M1X!=null then
    call SetUnitX(M1X,result)
    call SetUnitY(M1X,ZEE)
    call KillUnit(M1X)
  endif
  call EnableTrigger(trigger014)
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
endfunction

function Func1600 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result
  local real ZEE
  local trigger t=CreateTrigger()
  local integer ZAE=GetHandleId(t)
  local unit d
  call Traffic_RegisterData("AegisOff",GetPlayerId(GetOwningPlayer(source)))
  if GetUnitTypeId(source)=='H00I' then
    call Func1599(source,GetUnitX(source),GetUnitY(source))
  endif
  set unit156=null
  set d=CreateUnit(GetOwningPlayer(source),'o01P',GetUnitX(source),GetUnitY(source),0)
  call UnitApplyTimedLife(d,'BTLF',5)
  set d=null
  call TriggerRegisterTimerEvent(t,5,false)
  call TriggerAddCondition(t,Condition(function Func1598))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call AddTimedKeyToAgent(source,4304,5)
  set t=null
  set source=null
endfunction

function Func1601 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local item it=LoadItemHandle(HY,h,1)
  local integer id
  if LoadBoolean(HY,h,0)then
    set id=integer292
  else
    set id=integer293
  endif
  call RemoveSavedHandle(HY,GetHandleId(u),'ARML')
  if IsDead(u)==false then
    call ReplaceItem(u,it,Item_Real[id],-1)
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set u=null
  set it=null
endfunction

function Func1602 takes boolean on returns nothing
  local unit u=GetTriggerUnit()
  local timer t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'ARML')then
    set t=LoadTimerHandle(HY,hu,'ARML')
    set h=GetHandleId(t)
    call TimerStart(t,0.0,false,function Func1601)
    call SaveBoolean(HY,h,0,on)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,hu,'ARML',t)
    call SaveUnitHandle(HY,h,0,u)
    call SaveItemHandle(HY,h,1,GetManipulatedItem())
    call TimerStart(t,0.05,false,function Func1601)
    call SaveBoolean(HY,h,0,on==false)
  endif
  call Func1276()
  set u=null
  set t=null
endfunction

function Func1603 takes integer id returns nothing
  set tt_item1=null
  if id==integer211 then
    call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer212],-1)
  elseif id==integer212 then
    call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer211],-1)
  elseif id==integer192 then
    call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer193],-1)
  elseif id==integer193 then
    call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer192],-1)
  elseif id==integer215 then
    call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer216],-1)
  elseif id==integer216 then
    call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer217],-1)
  elseif id==integer217 then
    call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer215],-1)
  elseif id==integer292 then
    call Func1602(true)
  elseif id==integer293 then
    call Func1602(false)
  elseif id>=integer244 and id<=integer248 then
    if LoadBoolean(HY,GetHandleId(GetTriggerUnit()),'HBRD')==false then
      call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[id+1],-1)
      call Func1277(tt_item1)
    endif
  elseif id==integer230 then
    if GetItemCharges(GetManipulatedItem())==0 then
      call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer232],-1)
    endif
  elseif id==integer231 then
    if GetItemCharges(GetManipulatedItem())==0 then
      call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer233],-1)
    endif
  elseif id==integer180 then
    if GetItemCharges(GetManipulatedItem())==0 then
      call ReplaceItem(GetTriggerUnit(),GetManipulatedItem(),Item_Real[integer181],-1)
    endif
  endif
  if tt_item1!=null then
    call Func1276()
  endif
endfunction

function Func1604 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  if Func1346(source)and Func0979(source)then
    call Func0909(source,'I0HM')
  endif
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  call SaveBoolean(HY,(GetHandleId(source)),129,(false))
  set RBX=null
  set source=null
  return false
endfunction

function Func1605 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  if IssueImmediateOrderByIdExFunc(u,852589)or IsDead(u)then
    call FlushChildHashtable(HY,GetHandleId(t))
    call PauseTimer(t)
    call DestroyTimer(t)
  endif
  set t=null
  set u=null
endfunction

function Func1606 takes unit u returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.1,true,function Func1605)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function Func1607 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local item it=GetManipulatedItem()
  local trigger t
  if(LoadBoolean(HY,GetHandleId(u),129))then
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,0.41,false)
    call TriggerAddCondition(t,Condition(function Func1604))
    call SaveUnitHandle(HY,(GetHandleId(t)),2,(u))
    set t=null
  endif
  if GetUnitAbilityLevel(u,'BNms')>0 then
    call Func1606(u)
  endif
  set u=null
  set it=null
endfunction

function Func1608 takes nothing returns nothing
  call SetItemCharges(GetManipulatedItem(),GetItemCharges(GetManipulatedItem())+1)
endfunction

function Func1609 takes nothing returns boolean
  local integer id
  if GetUnitTypeId(GetTriggerUnit())=='H00J' then
    return false
  endif
  set id=GetIndex(GetManipulatedItem())
  if id==integer255 or id==integer256 or id==integer257 or id==integer258 or id==integer259 then
    call Func1608()
  elseif id==integer167 or id==integer168 or id==integer169 or id==integer170 or IsBottleWithRune(id)then
    call Func1360(id)
  elseif id==Aegis then
    call Func1600()
  elseif id==integer253 or id==integer252 then
    call Func1607()
  else
    if boolean147 then
      if GetItemCharges(GetManipulatedItem())>0 then
        call SetItemCharges(GetManipulatedItem(),GetItemCharges(GetManipulatedItem())+1)
      endif
    endif
    call Func1603(id)
  endif
  return false
endfunction

function Func1610 takes unit u,location l returns nothing
  call ImminentTriggeredPointOrder(u,851983,GetLocationX(l),GetLocationY(l))
endfunction

function Func1611 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
    call Func1610(GetTriggerUnit(),location001)
  elseif GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    call Func1610(GetTriggerUnit(),location002)
  endif
  return false
endfunction

function Func1612 takes nothing returns nothing
  set integer076=integer076+1
endfunction

function Func1613 takes nothing returns nothing
  set integer075=integer075+1
endfunction

function Func1614 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
    call Func1610(GetTriggerUnit(),location003)
  endif
  return false
endfunction

function Func1615 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    call Func1610(GetTriggerUnit(),location006)
  endif
  return false
endfunction

function Func1616 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    call Func1610(GetTriggerUnit(),location003)
  endif
  return false
endfunction

function Func1617 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
    call Func1610(GetTriggerUnit(),location004)
  endif
  return false
endfunction

function Func1618 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    call Func1610(GetTriggerUnit(),location004)
  endif
  return false
endfunction

function Func1619 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
    call Func1610(GetTriggerUnit(),location008)
  endif
  return false
endfunction

function Func1620 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
    call Func1610(GetTriggerUnit(),location005)
  endif
  return false
endfunction

function Func1621 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    call Func1610(GetTriggerUnit(),location005)
  endif
  return false
endfunction

function Func1622 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    call Func1610(GetTriggerUnit(),location007)
  endif
  return false
endfunction

function Func1623 takes nothing returns nothing
  if GetOwningPlayer(GetEnumUnit())!=Scourges[0]then
    call UnitAddAbilityTimedExF(GetEnumUnit(),'A2V1',1,8,'B0H2')
  endif
endfunction

function Func1624 takes nothing returns nothing
endfunction

function Func1625 takes group g returns nothing
  if(TimerGetElapsed(GlobalTimer))<420 then
    call ForGroup(g,function Func1623)
  endif
endfunction

function Func1626 takes group g returns nothing
  if(TimerGetElapsed(GlobalTimer))<420 then
    call ForGroup(g,function Func1624)
  endif
endfunction

function Func1627 takes nothing returns nothing
  local integer ZAE=1
  local integer QIE
  loop
    exitwhen ZAE>5
    set QIE=GetPlayerId(Sentinels[ZAE])
    call Traffic_RegisterData("CSK"+I2S(QIE),integers031[QIE])
    call Traffic_RegisterData("CSD"+I2S(QIE),integers032[QIE])
    call Traffic_RegisterData("NK"+I2S(QIE),(LoadInteger(HY,(400+QIE),79)))
    set QIE=GetPlayerId(Scourges[ZAE])
    call Traffic_RegisterData("CSK"+I2S(QIE),integers031[QIE])
    call Traffic_RegisterData("CSD"+I2S(QIE),integers032[QIE])
    call Traffic_RegisterData("NK"+I2S(QIE),(LoadInteger(HY,(400+QIE),79)))
    set ZAE=ZAE+1
  endloop
endfunction

function ToggleRaxSpawnAnimation takes boolean b returns nothing
  local unit u
  local string s1="stand work alternate"
  local string s2="stand work"
  local string s3="stand alternate"
  local string stand="stand"
  set u=unit064
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s1)
    else
      call SetUnitAnimation(u,s3)
    endif
  endif
  set u=unit065
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s1)
    else
      call SetUnitAnimation(u,s3)
    endif
  endif
  set u=unit066
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s1)
    else
      call SetUnitAnimation(u,s3)
    endif
  endif
  set u=unit067
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s1)
    else
      call SetUnitAnimation(u,s3)
    endif
  endif
  set u=unit068
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s1)
    else
      call SetUnitAnimation(u,s3)
    endif
  endif
  set u=unit069
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s1)
    else
      call SetUnitAnimation(u,s3)
    endif
  endif
  set u=unit111
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s2)
    else
      call SetUnitAnimation(u,stand)
    endif
  endif
  set u=unit112
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s2)
    else
      call SetUnitAnimation(u,stand)
    endif
  endif
  set u=unit113
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s2)
    else
      call SetUnitAnimation(u,stand)
    endif
  endif
  set u=unit114
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s2)
    else
      call SetUnitAnimation(u,stand)
    endif
  endif
  set u=unit115
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s2)
    else
      call SetUnitAnimation(u,stand)
    endif
  endif
  set u=unit116
  if IsDead(u)==false then
    if b then
      call SetUnitAnimation(u,s2)
    else
      call SetUnitAnimation(u,stand)
    endif
  endif
  set u=null
endfunction

function Func1629 takes nothing returns boolean
  call ToggleRaxSpawnAnimation(true)
  return false
endfunction

function Func1630 takes group g,integer i returns nothing
  local unit u
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    call SetUnitAbilityLevel(u,integer082,i)
  endloop
endfunction

function Func1631 takes integer c,integer NUR,player p,location l returns nothing
  local integer i=0
  local real a
  local unit u
  if l==location010 then
    set a=180
  elseif l==location009 then
    set a=225
  elseif l==location011 then
    set a=270
  elseif l==location014 then
    set a=90
  elseif l==location012 then
    set a=45
  else
    set a=0
  endif
  call GroupClear(bj_lastCreatedGroup)
  loop
    set c=c-1
    exitwhen c<0
    set u=CreateUnit(p,NUR,GetLocationX(l),GetLocationY(l),a)
    call GroupAddUnit(bj_lastCreatedGroup,u)
  endloop
  set u=null
endfunction

function Func1632 takes nothing returns nothing
  local boolean ZSE=ModuloInteger(GetTriggerExecCount(trigger017),7)==0
  local integer id
  if boolean145 then
    return
  endif
  call ToggleRaxSpawnAnimation(false)
  if ZSE then
    call Func1627()
  endif
  if GetTriggerExecCount(trigger017)==1 and boolean162==false then
    call RefreshCircles(true)
    call RefreshCircles(false)
  endif
  if GetTriggerExecCount(trigger017)==1 then
    call EnableTrigger(trigger034)
  endif
  if boolean162==false and boolean167==false then
    if(SentTopRaxMExists)then
      set id='ugho'
    elseif ScourgeHaveMegaCreeps then
      set id='n12Q'
    else
      set id='u001'
    endif
    call Func1631(integer075,id,Scourges[0],location010)
    call Func1625(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,2)
  endif
  if boolean166==false then
    if(SentMidRaxMExists)then
      set id='ugho'
    elseif ScourgeHaveMegaCreeps then
      set id='n12Q'
    else
      set id='u001'
    endif
    call Func1631(integer075,id,Scourges[0],location009)
    call Func1630(bj_lastCreatedGroup,3)
  endif
  if boolean162==false and boolean164==false then
    if(SentBotRaxMExists)then
      set id='ugho'
    elseif ScourgeHaveMegaCreeps then
      set id='n12Q'
    else
      set id='u001'
    endif
    call Func1631(integer075,id,Scourges[0],location011)
    call Func1626(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,4)
  endif
  if boolean162==false and boolean167==false then
    if(SentTopRaxRExists)then
      set id='unec'
    elseif ScourgeHaveMegaCreeps then
      set id='n12R'
    else
      set id='u002'
    endif
    call Func1631(integer076,id,Scourges[0],location010)
    call Func1625(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,2)
  endif
  if boolean166==false then
    if(SentMidRaxRExists)then
      set id='unec'
    elseif ScourgeHaveMegaCreeps then
      set id='n12R'
    else
      set id='u002'
    endif
    call Func1631(integer076,id,Scourges[0],location009)
    call Func1630(bj_lastCreatedGroup,3)
  endif
  if boolean162==false and boolean164==false then
    if(SentBotRaxRExists)then
      set id='unec'
    elseif ScourgeHaveMegaCreeps then
      set id='n12R'
    else
      set id='u002'
    endif
    call Func1631(integer076,id,Scourges[0],location011)
    call Func1626(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,4)
  endif
  if ZSE then
    if boolean162==false and boolean167==false then
      if(SentTopRaxRExists)then
        call Func1631(integer076,'umtw',Scourges[0],location010)
      else
        call Func1631(integer076,'u00R',Scourges[0],location010)
      endif
      call Func1625(bj_lastCreatedGroup)
      call Func1630(bj_lastCreatedGroup,2)
    endif
    if boolean166==false then
      if(SentMidRaxRExists)then
        call Func1631(integer076,'umtw',Scourges[0],location009)
      else
        call Func1631(integer076,'u00R',Scourges[0],location009)
      endif
      call Func1630(bj_lastCreatedGroup,3)
    endif
    if boolean162==false and boolean164==false then
      if(SentBotRaxRExists)then
        call Func1631(integer076,'umtw',Scourges[0],location011)
      else
        call Func1631(integer076,'u00R',Scourges[0],location011)
      endif
      call Func1626(bj_lastCreatedGroup)
      call Func1630(bj_lastCreatedGroup,4)
    endif
  endif
  if boolean162==false and boolean167==false then
    if(boolean081)then
      set id='esen'
    elseif SentinelHaveMegaCreeps then
      set id='n12S'
    else
      set id='e00V'
    endif
    call Func1631(integer075,id,Sentinels[0],location014)
    call Func1626(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,2)
  endif
  if boolean166==false then
    if(boolean082)then
      set id='esen'
    elseif SentinelHaveMegaCreeps then
      set id='n12S'
    else
      set id='e00V'
    endif
    call Func1631(integer075,id,Sentinels[0],location012)
    call Func1630(bj_lastCreatedGroup,3)
  endif
  if boolean162==false and boolean164==false then
    if(boolean083)then
      set id='esen'
    elseif SentinelHaveMegaCreeps then
      set id='n12S'
    else
      set id='e00V'
    endif
    call Func1631(integer075,id,Sentinels[0],location013)
    call Func1625(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,4)
  endif
  if boolean162==false and boolean167==false then
    if(boolean078)then
      set id='edry'
    elseif SentinelHaveMegaCreeps then
      set id='n12T'
    else
      set id='e00W'
    endif
    call Func1631(integer076,id,Sentinels[0],location014)
    call Func1626(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,2)
  endif
  if boolean166==false then
    if(boolean079)then
      set id='edry'
    elseif SentinelHaveMegaCreeps then
      set id='n12T'
    else
      set id='e00W'
    endif
    call Func1631(integer076,id,Sentinels[0],location012)
    call Func1630(bj_lastCreatedGroup,3)
  endif
  if boolean162==false and boolean164==false then
    if(boolean080)then
      set id='edry'
    elseif SentinelHaveMegaCreeps then
      set id='n12T'
    else
      set id='e00W'
    endif
    call Func1631(integer076,id,Sentinels[0],location013)
    call Func1625(bj_lastCreatedGroup)
    call Func1630(bj_lastCreatedGroup,4)
  endif
  if ZSE then
    if boolean162==false and boolean167==false then
      if(boolean078)then
        call Func1631(integer076,'ebal',Sentinels[0],location014)
      else
        call Func1631(integer076,'e026',Sentinels[0],location014)
      endif
      call Func1626(bj_lastCreatedGroup)
      call Func1630(bj_lastCreatedGroup,2)
    endif
    if boolean166==false then
      if(boolean079)then
        call Func1631(integer076,'ebal',Sentinels[0],location012)
      else
        call Func1631(integer076,'e026',Sentinels[0],location012)
      endif
      call Func1630(bj_lastCreatedGroup,3)
    endif
    if boolean162==false and boolean164==false then
      if(boolean080)then
        call Func1631(integer076,'ebal',Sentinels[0],location013)
      else
        call Func1631(integer076,'e026',Sentinels[0],location013)
      endif
      call Func1625(bj_lastCreatedGroup)
      call Func1630(bj_lastCreatedGroup,4)
    endif
  endif
endfunction

function Func1633 takes nothing returns nothing
  set SentTopRaxRExists=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax001",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(true)
endfunction

function Func1634 takes nothing returns nothing
  set SentMidRaxRExists=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax011",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(true)
endfunction

function Func1635 takes nothing returns nothing
  set SentBotRaxRExists=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax021",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(true)
endfunction

function Func1636 takes nothing returns nothing
  set SentTopRaxMExists=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax000",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(false)
endfunction

function Func1637 takes nothing returns nothing
  set SentMidRaxMExists=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax010",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(false)
endfunction

function Func1638 takes nothing returns nothing
  set SentBotRaxMExists=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax020",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(false)
endfunction

function Func1639 takes nothing returns nothing
  set boolean078=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax101",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(true)
endfunction

function Func1640 takes nothing returns nothing
  set boolean079=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax111",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(true)
endfunction

function Func1641 takes nothing returns nothing
  set boolean080=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax121",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(true)
endfunction

function Func1642 takes nothing returns nothing
  set boolean081=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax100",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(false)
endfunction

function Func1643 takes nothing returns nothing
  set boolean082=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax110",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(false)
endfunction

function Func1644 takes nothing returns nothing
  set boolean083=false
  call DisableTrigger(GetTriggeringTrigger())
  call Traffic_RegisterData("Rax120",GetPlayerId(GetOwningPlayer(GetKillingUnit())))
  call Func0567(false)
endfunction

function Func1645 takes nothing returns boolean
  local real d=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
  if d<0.75 and boolean132==false then
    set boolean132=true
    call Traffic_RegisterData("Tree",75)
  endif
  if d<0.50 and boolean131==false then
    set boolean131=true
    call Traffic_RegisterData("Tree",50)
  endif
  if d<0.25 and boolean130==false then
    set boolean130=true
    call Traffic_RegisterData("Tree",25)
  endif
  if d<0.10 and boolean129==false then
    set boolean129=true
    call Traffic_RegisterData("Tree",10)
  endif
  return false
endfunction

function Func1646 takes nothing returns boolean
  local real result=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
  if result<0.75 and boolean128==false then
    set boolean128=true
    call Traffic_RegisterData("Throne",75)
  endif
  if result<0.50 and boolean127==false then
    set boolean127=true
    call Traffic_RegisterData("Throne",50)
  endif
  if result<0.25 and boolean126==false then
    set boolean126=true
    call Traffic_RegisterData("Throne",25)
  endif
  if result<0.10 and boolean125==false then
    set boolean125=true
    call Traffic_RegisterData("Throne",10)
  endif
  return false
endfunction

function Func1647 takes nothing returns nothing
  local integer c=ModuloInteger(GetTriggerExecCount(GetTriggeringTrigger()),2)*-1
  call SetPlayerTechResearched(Sentinels[0],'R007',GetPlayerTechCountSimple('R007',Sentinels[0])+1)
  call SetPlayerTechResearched(Sentinels[0],'R00C',GetPlayerTechCountSimple('R00C',Sentinels[0])+1)
  call SetPlayerTechResearched(Sentinels[0],'R008',GetPlayerTechCountSimple('R008',Sentinels[0])+1)
  call SetPlayerTechResearched(Sentinels[0],'R00D',GetPlayerTechCountSimple('R00D',Sentinels[0])+1)
  call SetPlayerTechResearched(Scourges[0],'R009',GetPlayerTechCountSimple('R009',Scourges[0])+1)
  call SetPlayerTechResearched(Scourges[0],'R003',GetPlayerTechCountSimple('R003',Scourges[0])+1)
  call SetPlayerTechResearched(Scourges[0],'R00A',GetPlayerTechCountSimple('R00A',Scourges[0])+1)
  call SetPlayerTechResearched(Scourges[0],'R00B',GetPlayerTechCountSimple('R00B',Scourges[0])+1)
  call SaveInteger(UnitsData,'ugho',1970250369,LoadInteger(UnitsData,'ugho',1970250369)+2+c)
  call SaveInteger(UnitsData,'ugho',1552560955,LoadInteger(UnitsData,'ugho',1552560955)+2+c)
  call SaveInteger(UnitsData,'u001',1970250369,LoadInteger(UnitsData,'u001',1970250369)+2+c)
  call SaveInteger(UnitsData,'u001',1552560955,LoadInteger(UnitsData,'u001',1552560955)+2+c)
  call SaveInteger(UnitsData,'unec',1970250369,LoadInteger(UnitsData,'unec',1970250369)+2+c)
  call SaveInteger(UnitsData,'unec',1552560955,LoadInteger(UnitsData,'unec',1552560955)+2+c)
  call SaveInteger(UnitsData,'u002',1970250369,LoadInteger(UnitsData,'u002',1970250369)+2+c)
  call SaveInteger(UnitsData,'u002',1552560955,LoadInteger(UnitsData,'u002',1552560955)+2+c)
  call SaveInteger(UnitsData,'esen',1970250369,LoadInteger(UnitsData,'esen',1970250369)+2+c)
  call SaveInteger(UnitsData,'esen',1552560955,LoadInteger(UnitsData,'esen',1552560955)+2+c)
  call SaveInteger(UnitsData,'e00V',1970250369,LoadInteger(UnitsData,'e00V',1970250369)+2+c)
  call SaveInteger(UnitsData,'e00V',1552560955,LoadInteger(UnitsData,'e00V',1552560955)+2+c)
  call SaveInteger(UnitsData,'edry',1970250369,LoadInteger(UnitsData,'edry',1970250369)+2+c)
  call SaveInteger(UnitsData,'edry',1552560955,LoadInteger(UnitsData,'edry',1552560955)+2+c)
  call SaveInteger(UnitsData,'e00W',1970250369,LoadInteger(UnitsData,'e00W',1970250369)+2+c)
  call SaveInteger(UnitsData,'e00W',1552560955,LoadInteger(UnitsData,'e00W',1552560955)+2+c)
endfunction

function PreloadNeutrals takes nothing returns nothing
  call PreloadUnit('ugho')
  call PreloadUnit('unec')
  call PreloadUnit('esen')
  call PreloadUnit('edry')
  call PreloadUnit('u001')
  call PreloadUnit('u002')
  call PreloadUnit('e00V')
  call PreloadUnit('e00W')
  call PreloadUnit('ebal')
  call PreloadUnit('e026')
  call PreloadUnit('umtw')
  call PreloadUnit('u00R')
  call PreloadUnit('nbdo')
  call PreloadUnit('nbds')
  call PreloadUnit('ngst')
  call PreloadUnit('n026')
  call PreloadUnit('nggr')
  call PreloadUnit('nbdk')
  call PreloadUnit('nbwm')
  call PreloadUnit('nomg')
  call PreloadUnit('nfpc')
  call PreloadUnit('nfpu')
  call PreloadUnit('nsth')
  call PreloadUnit('nstl')
  call PreloadUnit('nwlg')
  call PreloadUnit('nsat')
  call PreloadUnit('nkol')
  call PreloadUnit('nkob')
  call PreloadUnit('nkot')
  call PreloadUnit('nkot')
  call PreloadUnit('ncnk')
  call PreloadUnit('ncen')
  call PreloadUnit('ngns')
  call PreloadUnit('nftb')
  call PreloadUnit('nfsh')
  call PreloadUnit('ngh1')
  call PreloadUnit('npfl')
  call PreloadUnit('nowe')
  call PreloadUnit('nowb')
  call PreloadUnit('nmrm')
  call PreloadUnit('nmrr')
  call PreloadUnit('nmrl')
  call PreloadUnit('ndtr')
  call PreloadUnit('ndtw')
  call PreloadUnit('n0LC')
  call PreloadUnit('n0LD')
endfunction

function CreateUnitAndSetUnitPosition takes integer id,real x,real y,real a returns nothing
  local real r=GetRandomReal(25,60)
  set bj_lastCreatedUnit=CreateUnit(Neutrals,id,x,y,a)
  set a=GetRandomReal(0,359)*bj_DEGTORAD
  call SetUnitPosition(bj_lastCreatedUnit,x+r*Cos(a),y+r*Sin(a))
endfunction

function SpawnNeutrals_Harpies takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('n0HX',x,y,a)
  call CreateUnitAndSetUnitPosition('n0HW',x,y,a)
  call CreateUnitAndSetUnitPosition('n0HW',x,y,a)
endfunction

function Func1651 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nbdk',x,y,a)
  call CreateUnitAndSetUnitPosition('nbdk',x,y,a)
  call CreateUnitAndSetUnitPosition('nbwm',x,y,a)
endfunction

function Func1652 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('ngst',x,y,a)
  call CreateUnitAndSetUnitPosition('ngst',x,y,a)
  call CreateUnitAndSetUnitPosition('nggr',x,y,a)
endfunction

function Func1653 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('n0LC',x,y,a)
  call CreateUnitAndSetUnitPosition('n0LD',x,y,a)
  call CreateUnitAndSetUnitPosition('n0LD',x,y,a)
endfunction

function Func1654 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nogm',x,y,a)
  call CreateUnitAndSetUnitPosition('nogm',x,y,a)
  call CreateUnitAndSetUnitPosition('nomg',x,y,a)
endfunction

function Func1655 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nfpc',x,y,a)
  call CreateUnitAndSetUnitPosition('nfpu',x,y,a)
endfunction

function Func1656 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nsth',x,y,a)
  call CreateUnitAndSetUnitPosition('nstl',x,y,a)
  call CreateUnitAndSetUnitPosition('nsat',x,y,a)
endfunction

function Func1657 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nstl',x,y,a)
  call CreateUnitAndSetUnitPosition('nstl',x,y,a)
  call CreateUnitAndSetUnitPosition('nsat',x,y,a)
  call CreateUnitAndSetUnitPosition('nsat',x,y,a)
endfunction

function Func1658 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nwlg',x,y,a)
  call CreateUnitAndSetUnitPosition('nwlg',x,y,a)
  call CreateUnitAndSetUnitPosition('n00S',x,y,a)
endfunction

function Func1659 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('n026',x,y,a)
  call CreateUnitAndSetUnitPosition('n026',x,y,a)
endfunction

function Func1660 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nkol',x,y,a)
  call CreateUnitAndSetUnitPosition('nkob',x,y,a)
  call CreateUnitAndSetUnitPosition('nkob',x,y,a)
  call CreateUnitAndSetUnitPosition('nkob',x,y,a)
  call CreateUnitAndSetUnitPosition('nkot',x,y,a)
endfunction

function Func1661 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nftb',x,y,a)
  call CreateUnitAndSetUnitPosition('nftb',x,y,a)
  call CreateUnitAndSetUnitPosition('nfsh',x,y,a)
endfunction

function Func1662 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('ncen',x,y,a)
  call CreateUnitAndSetUnitPosition('ncen',x,y,a)
  call CreateUnitAndSetUnitPosition('ncnk',x,y,a)
endfunction

function Func1663 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('ncen',x,y,a)
  call CreateUnitAndSetUnitPosition('ncnk',x,y,a)
endfunction

function Func1664 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('ngns',x,y,a)
  call CreateUnitAndSetUnitPosition('ngns',x,y,a)
  call CreateUnitAndSetUnitPosition('ngns',x,y,a)
endfunction

function Func1665 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nftb',x,y,a)
  call CreateUnitAndSetUnitPosition('nftb',x,y,a)
  call CreateUnitAndSetUnitPosition('nkol',x,y,a)
endfunction

function Func1666 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('ngh1',x,y,a)
  call CreateUnitAndSetUnitPosition('npfl',x,y,a)
  call CreateUnitAndSetUnitPosition('npfl',x,y,a)
endfunction

function Func1667 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('nowe',x,y,a)
  call CreateUnitAndSetUnitPosition('nowb',x,y,a)
  call CreateUnitAndSetUnitPosition('nowb',x,y,a)
endfunction

function Func1668 takes real x,real y,real a returns nothing
  call CreateUnitAndSetUnitPosition('ndtr',x,y,a)
  call CreateUnitAndSetUnitPosition('ndtr',x,y,a)
  call CreateUnitAndSetUnitPosition('ndtw',x,y,a)
endfunction

function Func1669 takes integer BYR,real x,real y,real a,integer GVE returns nothing
  local integer BZR=integers117[BYR]
  local integer i
  local integer B_R=1
  local integer YLE
  if GVE==0 then
    set YLE=6
  elseif GVE==1 or GVE==2 then
    set YLE=5
  else
    set YLE=3
  endif
  set i=GetRandomInt(B_R,YLE)
  loop
    exitwhen BZR!=i
    set i=GetRandomInt(B_R,YLE)
  endloop
  set integers117[BYR]=i
  if GVE==0 then
    if i==1 then
      call Func1666(x,y,a)
    elseif i==2 then
      call Func1665(x,y,a)
    elseif i==3 then
      call Func1664(x,y,a)
    elseif i==4 then
      call Func1660(x,y,a)
    elseif i==5 then
      call Func1661(x,y,a)
    elseif i==6 then
      call SpawnNeutrals_Harpies(x,y,a)
    endif
  elseif GVE==1 then
    if i==1 then
      call Func1659(x,y,a)
    elseif i==2 then
      call Func1654(x,y,a)
    elseif i==3 then
      call Func1657(x,y,a)
    elseif i==4 then
      call Func1658(x,y,a)
    elseif i==5 then
      call Func1663(x,y,a)
    endif
  elseif GVE==2 then
    if i==1 then
      call Func1655(x,y,a)
    elseif i==2 then
      call Func1656(x,y,a)
    elseif i==3 then
      call Func1667(x,y,a)
    elseif i==4 then
      call Func1668(x,y,a)
    elseif i==5 then
      call Func1662(x,y,a)
    endif
  elseif GVE==3 then
    if i==1 then
      call Func1651(x,y,a)
    elseif i==2 then
      call Func1652(x,y,a)
    elseif i==3 then
      call Func1653(x,y,a)
    endif
  endif
endfunction

function Func1670 takes nothing returns nothing
  local integer id=GetUnitTypeId(GetEnumUnit())
  if GetUnitAbilityLevel(GetEnumUnit(),'A0P4')==1 or IsDead(GetEnumUnit())or IsCourier(GetEnumUnit())then
    call GroupRemoveUnit(group015,GetEnumUnit())
  endif
endfunction

function Func1671 takes group g returns boolean
  set group015=g
  call ForGroup(g,function Func1670)
  return FirstOfGroup(g)==null
endfunction

function Func1672 takes group g,rect B3R,rect B4R,integer id,real a,integer GVE returns nothing
  call GroupEnumUnitsInRect(g,B3R,Condition(function ReturnTrue))
  if Func1671(g)then
    call Func1669(id,GetRectCenterX(B4R),GetRectCenterY(B4R),a,GVE)
  endif
endfunction

function Func1673 takes nothing returns boolean
  local group g
  if boolean163==false then
    return false
  endif
  set g=GetAvailableGroup()
  call Func1672(g,rect036,NeutralsSpot_ScAncients_Spawn,1,180,3)
  call Func1672(g,rect037,rect025,2,0,3)
  call Func1672(g,rect038,rect026,3,-90,1)
  call Func1672(g,rect039,rect027,4,45,2)
  call Func1672(g,rect040,rect028,5,90,0)
  call Func1672(g,rect041,rect029,6,-90,0)
  call Func1672(g,rect042,rect030,7,70,1)
  call Func1672(g,rect044,rect031,8,240,2)
  call Func1672(g,rect043,rect032,9,130,2)
  call Func1672(g,rect045,rect033,10,110,1)
  call Func1672(g,rect048,rect049,11,105,1)
  call Func1672(g,rect050,rect051,12,130,2)
  call Func1672(g,rect053,rect052,13,210,2)
  call Func1672(g,rect055,rect054,14,180,2)
  call KillGroup(g)
  return false
endfunction

function Func1674 takes nothing returns nothing
  local integer i=GetRandomInt(1,9)
  local location B7R
  local location B8R
  local integer NFX
  local integer B9R
  local integer CVR
  local integer CER
  if boolean162 then
    set i=GetRandomInt(1,3)*3-1
  endif
  if i<4 then
    set NFX='n003'
  elseif i<7 then
    set NFX='n00E'
  else
    set NFX='n00D'
  endif
  if(i==7 or i==8)and boolean162 then
    return
  endif
  if i==1 or i==4 or i==7 then
    set B7R=GetRectCenter(rect018)
    set B8R=GetRectCenter(rect014)
    set CER=4
    set B9R='n051'
    set CVR='n0CD'
    if i==4 then
      set B9R='n058'
      set CVR='n0CG'
    elseif i==7 then
      set B9R='n056'
      set CVR='n0CJ'
    endif
  elseif i==2 or i==5 or i==8 then
    set B7R=GetRectCenter(rect019)
    set B8R=GetRectCenter(rect013)
    set CER=2
    set B9R='n052'
    set CVR='n0CE'
    if i==5 then
      set B9R='n04Z'
      set CVR='n0CH'
    elseif i==8 then
      set B9R='n04T'
      set CVR='n0CK'
    endif
  else
    set B7R=GetRectCenter(rect017)
    set B8R=GetRectCenter(rect012)
    set CER=3
    set B9R='n053'
    set CVR='n0CC'
    if i==6 then
      set B9R='n057'
      set CVR='n0CF'
    elseif i==9 then
      set B9R='n05C'
      set CVR='n0CI'
    endif
  endif
  call Func1631(1,NFX,Sentinels[0],B7R)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(B9R))
  call Func1630(bj_lastCreatedGroup,CER)
  call Func1631(1,NFX,Scourges[0],B8R)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(CVR))
  call Func1630(bj_lastCreatedGroup,CER)
  set B7R=null
  set B8R=null
endfunction

function Trig_display_leaderboard_Actions takes nothing returns nothing
  local integer i
  local integer k
  local integer n
  local integer j
  local integer m
  local player p
  set integer450=integer450+1
  set SentinelsIngame=0
  set ScourgesIngame=0
  set m=1
  loop
    set p=Sentinels[m]
    if IsPlayerInGame(p)then
      set SentinelsIngame=SentinelsIngame+1
    endif
    set p=Scourges[m]
    if IsPlayerInGame(p)then
      set ScourgesIngame=ScourgesIngame+1
    endif
    set m=m+1
    exitwhen m>5
  endloop
  if boolean113==false then
    set integer077=SentinelsIngame
    set integer078=ScourgesIngame
  endif
  set i=1
  set k=5
  set n=1
  loop
    exitwhen i>k
    set p=Sentinels[i]
    if IsPlayerInGame(p)then
      set Sents[n]=p
      set n=n+1
    endif
    set i=i+1
  endloop
  set i=1
  set k=5
  set n=1
  loop
    exitwhen i>k
    set p=Scourges[i]
    if IsPlayerInGame(p)then
      set Scrgs[n]=p
      set n=n+1
    endif
    set i=i+1
  endloop
  if integer450==1 then
    set MainMB=CreateMultiboardBJ(13,3+ScourgesIngame+SentinelsIngame," ")
    call MultiboardMinimize(MainMB,true)
  endif
  call MBSetText(MainMB,2,1,"CD")
  call MBSetText(MainMB,3,1,"|c00838B8BL|r")
  call MBSetText(MainMB,4,1,"|c00ff0303"+"K|r")
  call MBSetText(MainMB,5,1,"|c000042ff"+"D|r")
  call MBSetText(MainMB,6,1,"|c00646464"+"A|r")
  call MBSetText(MainMB,1,2,GetObjectName('n0DK'))
  call MBSetText(MainMB,4,2,"|c00ff0303"+"0|r")
  call MBSetText(MainMB,5,2,"|c000042ff"+"0|r")
  call MBSetText(MainMB,1,3+SentinelsIngame,GetObjectName('n0DO'))
  call MBSetText(MainMB,4,3+SentinelsIngame,"|c00ff0303"+"0|r")
  call MBSetText(MainMB,5,3+SentinelsIngame,"|c000042ff"+"0|r")
  call MBSetColor(MainMB,1,2,StringTo255(Sentinels[0],4),StringTo255(Sentinels[0],6),StringTo255(Sentinels[0],8),0)
  call MBSetColor(MainMB,1,3+SentinelsIngame,StringTo255(Scourges[0],4),StringTo255(Scourges[0],6),StringTo255(Scourges[0],8),0)
  set i=1
  set k=3+ScourgesIngame+SentinelsIngame
  loop
    exitwhen i>k
    call MBSetWidth(MainMB,1,i,10.8)
    call MBSetWidth(MainMB,2,i,2)
    call MBSetWidth(MainMB,3,i,2)
    call MBSetWidth(MainMB,4,i,1.3)
    call MBSetWidth(MainMB,5,i,1.3)
    call MBSetWidth(MainMB,6,i,1.3)
    call MBSetWidth(MainMB,7,i,2.5)
    call MBSetWidth(MainMB,8,i,0.01)
    call MBSetWidth(MainMB,9,i,0.01)
    call MBSetWidth(MainMB,10,i,0.01)
    call MBSetWidth(MainMB,11,i,0.01)
    call MBSetWidth(MainMB,12,i,0.01)
    call MBSetWidth(MainMB,13,i,0.01)
    set i=i+1
  endloop
  set i=1
  set k=13
  loop
    exitwhen i>k
    set n=1
    set j=3+ScourgesIngame+SentinelsIngame
    loop
      exitwhen n>j
      call MBSetStyle(MainMB,i,n,true,false)
      set n=n+1
    endloop
    set i=i+1
  endloop
  set i=1
  set k=SentinelsIngame
  loop
    exitwhen i>k
    call MBSetStyle(MainMB,1,i+2,true,true)
    call MBSetColor(MainMB,7,i+2,255,204,0,0)
    set integers118[GetPlayerId(Sents[i])]=0
    set integers119[GetPlayerId(Sents[i])]=i+2-1
    call MBSetText(MainMB,1,i+2,(PlayerNames[GetPlayerId(Sents[i])]))
    if IsPlayer(Sents[i])then
      call MBSetColor(MainMB,1,i+2,StringTo255(Sents[i],4),StringTo255(Sents[i],6),StringTo255(Sents[i],8),0)
      call MBSetColor(MainMB,2,i+2,StringTo255(Sents[i],4),StringTo255(Sents[i],6),StringTo255(Sents[i],8),0)
    else
      call MBSetText(MainMB,1,i+2,"|c00333333"+(PlayerNames[GetPlayerId(Sents[i])])+"|r")
    endif
    call MBSetText(MainMB,4,i+2,"|c00ff0303"+"0|r")
    call MBSetText(MainMB,5,i+2,"|c000042ff"+"0|r")
    call MBSetText(MainMB,6,i+2,"|c00646464"+"0|r")
    set i=i+1
  endloop
  set i=1
  set k=ScourgesIngame
  loop
    exitwhen i>k
    call MBSetStyle(MainMB,1,i+3+SentinelsIngame,true,true)
    call MBSetColor(MainMB,7,i+3+SentinelsIngame,255,204,0,0)
    set integers118[GetPlayerId(Scrgs[i])]=0
    set integers119[GetPlayerId(Scrgs[i])]=i+3+SentinelsIngame-1
    call MBSetText(MainMB,1,i+3+SentinelsIngame,PlayerNames[GetPlayerId(Scrgs[i])])
    if IsPlayer(Scrgs[i])then
      call MBSetColor(MainMB,1,i+3+SentinelsIngame,StringTo255(Scrgs[i],4),StringTo255(Scrgs[i],6),StringTo255(Scrgs[i],8),0)
      call MBSetColor(MainMB,2,i+3+SentinelsIngame,StringTo255(Scrgs[i],4),StringTo255(Scrgs[i],6),StringTo255(Scrgs[i],8),0)
    else
      call MBSetText(MainMB,1,i+3+SentinelsIngame,"|c00333333"+(PlayerNames[GetPlayerId(Scrgs[i])])+"|r")
    endif
    call MBSetText(MainMB,4,i+3+SentinelsIngame,"|c00ff0303"+"0|r")
    call MBSetText(MainMB,5,i+3+SentinelsIngame,"|c000042ff"+"0|r")
    call MBSetText(MainMB,6,i+3+SentinelsIngame,"|c00646464"+"0|r")
    set i=i+1
  endloop
  if PlayerObserver and integer450==1 then
    call MultiboardDisplay(MainMB,false)
  endif
  call MBSetStyle(MainMB,7,1,false,true)
  call MBSetIcon(MainMB,7,1,"UI\\Feedback\\Resources\\ResourceGold.blp")
  if integer450>1 then
    call TriggerExecute(trigger022)
  endif
endfunction

function Func1676 takes nothing returns nothing
  local integer i
  local integer k
  call MBSetText(MainMB,4,2,"|c00ff0303"+I2S(Kills[GetPlayerId(Sentinels[0])])+"|r")
  call MBSetText(MainMB,5,2,"|c000042ff"+I2S(Deaths[GetPlayerId(Sentinels[0])])+"|r")
  call MBSetText(MainMB,4,3+SentinelsIngame,"|c00ff0303"+I2S(Kills[GetPlayerId(Scourges[0])])+"|r")
  call MBSetText(MainMB,5,3+SentinelsIngame,"|c000042ff"+I2S(Deaths[GetPlayerId(Scourges[0])])+"|r")
  set i=1
  set k=SentinelsIngame
  loop
    call MBSetText(MainMB,4,(i+2),"|c00ff0303"+I2S(Kills[GetPlayerId(Sents[i])])+"|r")
    call MBSetText(MainMB,5,(i+2),"|c000042ff"+I2S(Deaths[GetPlayerId(Sents[i])])+"|r")
    call MBSetText(MainMB,6,(i+2),"|c00646464"+I2S(Assists[GetPlayerId(Sents[i])])+"|r")
    set i=i+1
    exitwhen i>k
  endloop
  set i=1
  set k=ScourgesIngame
  loop
    call MBSetText(MainMB,4,(i+3+SentinelsIngame),"|c00ff0303"+I2S(Kills[GetPlayerId(Scrgs[i])])+"|r")
    call MBSetText(MainMB,5,(i+3+SentinelsIngame),"|c000042ff"+I2S(Deaths[GetPlayerId(Scrgs[i])])+"|r")
    call MBSetText(MainMB,6,(i+3+SentinelsIngame),"|c00646464"+I2S(Assists[GetPlayerId(Scrgs[i])])+"|r")
    set i=i+1
    exitwhen i>k
  endloop
endfunction

function Func1677 takes player whichPlayer,integer ZAE returns string
  if IsPlayerAlly(LocalPlayer,whichPlayer)then
    return GetItemIcon(UnitItemInSlot(udg_Hero[GetPlayerId(whichPlayer)],ZAE-1))
  else
    return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
  endif
endfunction

function Func1678 takes integer i returns string
  if i<10 then
    return"0"+I2S(i)
  else
    return I2S(i)
  endif
endfunction

function Func1679 takes player p,integer CNR returns nothing
  local boolean b=LoadBoolean(HY,GetHandleId(LocalPlayer),'mbit')
  if b!=booleans030[PlayerId]then
    call SaveBoolean(HY,GetHandleId(LocalPlayer),'mbit',booleans030[PlayerId])
    if booleans030[PlayerId]then
      call MBSetWidth(MainMB,7,1,3)
      call MBSetWidth(MainMB,8,1,2.8)
      call MBSetWidth(MainMB,9,1,0.8)
      call MBSetWidth(MainMB,10,1,0.8)
      call MBSetWidth(MainMB,11,1,0.8)
      call MBSetWidth(MainMB,12,1,0.8)
      call MBSetWidth(MainMB,13,1,0.1)
      call MBSetWidth(MainMB,7,CNR,3)
      call MBSetWidth(MainMB,8,CNR,1.1)
      call MBSetWidth(MainMB,9,CNR,1.1)
      call MBSetWidth(MainMB,10,CNR,1.1)
      call MBSetWidth(MainMB,11,CNR,1.1)
      call MBSetWidth(MainMB,12,CNR,1.1)
      call MBSetWidth(MainMB,13,CNR,0.1)
      call MBSetStyle(MainMB,8,CNR,false,true)
      call MBSetStyle(MainMB,9,CNR,false,true)
      call MBSetStyle(MainMB,10,CNR,false,true)
      call MBSetStyle(MainMB,11,CNR,false,true)
      call MBSetStyle(MainMB,12,CNR,false,true)
      call MBSetStyle(MainMB,13,CNR,false,true)
      call MBSetText(MainMB,8,1,"Items")
    else
      call MBSetWidth(MainMB,7,1,2)
      call MBSetWidth(MainMB,8,1,0.1)
      call MBSetWidth(MainMB,9,1,0.1)
      call MBSetWidth(MainMB,10,1,0.1)
      call MBSetWidth(MainMB,11,1,0.1)
      call MBSetWidth(MainMB,12,1,0.1)
      call MBSetWidth(MainMB,13,1,0.1)
      call MBSetWidth(MainMB,7,CNR,2.5)
      call MBSetWidth(MainMB,8,CNR,0.1)
      call MBSetWidth(MainMB,9,CNR,0.1)
      call MBSetWidth(MainMB,10,CNR,0.1)
      call MBSetWidth(MainMB,11,CNR,0.1)
      call MBSetWidth(MainMB,12,CNR,0.1)
      call MBSetWidth(MainMB,13,CNR,0.1)
      call MBSetStyle(MainMB,8,CNR,false,false)
      call MBSetStyle(MainMB,9,CNR,false,false)
      call MBSetStyle(MainMB,10,CNR,false,false)
      call MBSetStyle(MainMB,11,CNR,false,false)
      call MBSetStyle(MainMB,12,CNR,false,false)
      call MBSetStyle(MainMB,13,CNR,false,false)
      call MBSetText(MainMB,8,1," ")
    endif
  endif
  call MBSetIcon(MainMB,8,CNR,Func1677(p,1))
  call MBSetIcon(MainMB,9,CNR,Func1677(p,2))
  call MBSetIcon(MainMB,10,CNR,Func1677(p,3))
  call MBSetIcon(MainMB,11,CNR,Func1677(p,4))
  call MBSetIcon(MainMB,12,CNR,Func1677(p,5))
  call MBSetIcon(MainMB,13,CNR,Func1677(p,6))
endfunction

function Func1680 takes player p,integer CNR returns nothing
  local integer WVE=GetPlayerId(p)
  local string s
  local real r
  call MBSetIcon(MainMB,1,CNR,Func0518(udg_Hero[WVE]))
  call MBSetText(MainMB,3,CNR,"|c00838B8B"+I2S(GetHeroLevel(udg_Hero[WVE]))+"|r")
  call Func1679(p,CNR)
  if(Func0530(udg_Hero[WVE])and udg_Hero[WVE]!=null and TimerGetRemaining(HeroRespawnTimer[WVE])>0)then
    if IsPlayerAlly(LocalPlayer,p)then
      set s="|c00ffffff"+" ("+(I2S(R2I(TimerGetRemaining(HeroRespawnTimer[WVE]))))+")|r"
    else
      set s="|c00ff0303"+" ("+(I2S(R2I(TimerGetRemaining(HeroRespawnTimer[WVE]))))+")|r"
    endif
  else
    set s="	"
  endif
  if booleans021[WVE]then
    call MBSetText(MainMB,1,CNR,"|c00333333"+PlayerNames[WVE]+"|r"+s)
  else
    call MBSetText(MainMB,1,CNR,PlayerNames[WVE]+s)
  endif
  set r=TimerGetRemaining(UltimateCDTimers[WVE])
  if r>0 then
    set s=I2S(R2I(r))
  else
    set s=" "
  endif
  if IsPlayerEnemy(LocalPlayer,p)and GetUnitAbilityLevel(udg_Hero[WVE],'B00L')==0 then
    call MBSetText(MainMB,7,CNR," ")
    set s=" "
  else
    if IsPlayerEnemy(LocalPlayer,p)or Func1051(p)then
      call MBSetText(MainMB,7,CNR,"|cffffcc00"+I2S(GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD))+"|r")
    else
      call MBSetText(MainMB,7,CNR,"|cffff0000"+I2S(GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD))+"|r")
    endif
  endif
  call MBSetText(MainMB,2,CNR,s)
endfunction

function Func1681 takes integer WVE,string s returns string
  local integer CDR=R2I(TimerGetRemaining(HeroRespawnTimer[WVE]))
  if CDR>0 then
    if s=="" then
      set s=udg_Colors[WVE]+Func1678(CDR)+" |r"
    else
      set s=s+"|c00ffffff"+"| |r"+udg_Colors[WVE]+Func1678(CDR)+" |r"
    endif
  endif
  return s
endfunction

function Func1682 takes player p,string s returns string
  if IsPlayerAlly(LocalPlayer,p)then
    set s="|c00ffffff"+"["+GetObjectName('n0JS')+" |r"+s+"|c00ffffff"+"]|r"
  else
    set s="|c00ff0303"+"["+GetObjectName('n0JR')+" |r"+s+"|c00ff0303"+"]|r"
  endif
  return s
endfunction

function Func1683 takes nothing returns nothing
  local integer i
  local integer k
  local integer n
  local integer CHR
  local string CJR
  local string CKR
  local string CLR
  local string CMR
  local string CPR
  local string CQR=" "
  local string CSR=""
  local string CTR=""
  if MainMB==null then
    return
  endif
  set n=1
  loop
    set CSR=Func1681(GetPlayerId(Sentinels[n]),CSR)
    set CTR=Func1681(GetPlayerId(Scourges[n]),CTR)
    set n=n+1
    exitwhen n>5
  endloop
  if CSR!="" then
    set CSR=Func1682(Sentinels[0],CSR)
  endif
  if CTR!="" then
    set CTR=Func1682(Scourges[0],CTR)
  endif
  if MainMB!=null then
    set CHR=PlayerId
    if CHR>=0 and CHR<16 then
      set CJR=I2S(Kills[CHR])
      set CKR=I2S(Deaths[CHR])
      set CLR=I2S(Assists[CHR])
      set CMR=I2S(integers031[CHR])
      set CPR=I2S(integers032[CHR])
      set CQR=" |c00838B8B("+CJR+"/"+CKR+"/"+CLR+" - "+CMR+"/"+CPR+" - |r|c00FFDC00"+I2S(ReliableGold[CHR])+"|r |c00838B8B)|r"
    endif
  endif
  if CSR=="" and CTR=="" then
    call MultiboardSetTitleText(MainMB,CQR)
  else
    if IsPlayerAlly(LocalPlayer,Sentinels[0])then
      call MultiboardSetTitleText(MainMB,CTR+" "+CSR+" "+CQR)
    else
      call MultiboardSetTitleText(MainMB,CSR+" "+CTR+" "+CQR)
    endif
  endif
  if PlayerObserver==false then
    call MultiboardDisplay(MainMB,true)
  endif
  set i=1
  set k=SentinelsIngame
  loop
    exitwhen i>k
    call Func1680(Sents[i],i+2)
    set i=i+1
  endloop
  set i=1
  set k=ScourgesIngame
  loop
    exitwhen i>k
    call Func1680(Scrgs[i],i+3+SentinelsIngame)
    set i=i+1
  endloop
endfunction

function Func1684 takes player whichPlayer returns string
  return udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r"
endfunction

function Func1685 takes player whichPlayer returns string
  local string ZJE=I2S(integers097[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1686 takes player whichPlayer returns string
  local string ZJE=I2S(integers096[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1687 takes nothing returns nothing
  local integer ZAE=1
  local multiboarditem MOX
  loop
    exitwhen ZAE>integer453
    if(LeftAt[GetPlayerId((players007[ZAE]))])!="Here"then
      set MOX=MultiboardGetItem(multiboard003,integers120[ZAE],integers121[ZAE])
      call MultiboardSetItemStyle(MOX,true,false)
      call MultiboardSetItemValue(MOX,"|c00555555"+(LeftAt[GetPlayerId((players007[ZAE]))])+"|r")
      call MultiboardSetItemWidth(MOX,0.07)
      call MultiboardReleaseItem(MOX)
    endif
    set ZAE=ZAE+1
  endloop
endfunction

function Func1688 takes player whichPlayer returns string
  local string ZJE=I2S(NetWorths[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1689 takes player whichPlayer returns string
  local string ZJE=I2S(integers035[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1690 takes player whichPlayer returns string
  local string ZJE=I2S(GetUnitLevel(udg_Hero[GetPlayerId(whichPlayer)]))
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1691 takes player whichPlayer returns string
  local string ZJE=I2S(integers036[GetPlayerId(whichPlayer)])+"/"+I2S(integers037[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1692 takes player whichPlayer returns string
  local string ZJE=I2S(integers046[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1693 takes player whichPlayer returns string
  local string ZJE=I2S(integers038[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1694 takes player whichPlayer returns string
  local string ZJE=I2S(Assists[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1695 takes player whichPlayer returns string
  local string ZJE=I2S(Kills[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1696 takes player whichPlayer returns string
  local string ZJE=I2S(Deaths[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1697 takes player whichPlayer returns string
  local string ZJE=I2S(integers031[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1698 takes player whichPlayer returns string
  local string ZJE=I2S(integers032[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1699 takes player whichPlayer returns string
  local string ZJE=I2S((LoadInteger(HY,(400+GetPlayerId(whichPlayer)),79)))
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1700 takes player p returns string
  local string s=""
  local string R5E=""
  if p==LocalPlayer then
    set R5E="|c00FF6600"
  endif
  set R5E=R5E+I2S(integers040[GetPlayerId(p)])
  if p==LocalPlayer then
    set R5E=R5E+"|r"
  endif
  set R5E=R5E+"/"
  if p==LocalPlayer then
    set R5E=R5E+"|c00FF6600"
  endif
  set R5E=R5E+I2S(integers041[GetPlayerId(p)])
  if p==LocalPlayer then
    set R5E=R5E+"|r"
  endif
  set R5E=R5E+"/"
  if p==LocalPlayer then
    set R5E=R5E+"|c00FF6600"
  endif
  set R5E=R5E+I2S(integers042[GetPlayerId(p)])
  if p==LocalPlayer then
    set R5E=R5E+"|r"
  endif
  set R5E=R5E+"/"
  if p==LocalPlayer then
    set R5E=R5E+"|c00FF6600"
  endif
  set R5E=R5E+I2S(integers043[GetPlayerId(p)])
  if p==LocalPlayer then
    set R5E=R5E+"|r"
  endif
  return R5E
endfunction

function Func1701 takes player whichPlayer returns string
  local string ZJE=I2S(integers039[GetPlayerId(whichPlayer)])
  local string I3X=ZJE
  if whichPlayer==LocalPlayer then
    set I3X="|c00FF6600"+ZJE+"|r"
  endif
  return I3X
endfunction

function Func1702 takes player p returns string
  local string s=I2S(integers023[GetPlayerId(p)])
  local string R5E=s
  if p==LocalPlayer then
    set R5E="|c00FF6600"+s+"|r"
  endif
  return R5E
endfunction

function Func1703 takes player p returns string
  local string s=I2S(integers022[GetPlayerId(p)])
  local string R5E=s
  if p==LocalPlayer then
    set R5E="|c00FF6600"+s+"|r"
  endif
  return R5E
endfunction

function Func1704 takes player whichPlayer returns string
  local string ZJE
  local string I3X
  local string VDO
  local integer ZAE=integers047[GetPlayerId(whichPlayer)]
  local integer QIE=integers045[GetPlayerId(whichPlayer)]
  if ZAE<1 then
    set ZAE=0
  endif
  if QIE<1 then
    set QIE=0
  endif
  set ZJE=I2S(ZAE)
  set I3X=I2S(QIE)
  set VDO=ZJE+"/"+I3X
  if whichPlayer==LocalPlayer then
    set VDO="|c00FF6600"+ZJE+"|r/"+"|c00FF6600"+I3X+"|r"
  endif
  return VDO
endfunction

function Func1705 takes player p returns string
  local integer D1E=integers044[GetPlayerId(p)]
  local string s
  local integer DAR
  local integer DNR
  set DAR=(D1E/60)-0
  set DNR=ModuloInteger(D1E,60)
  if(DNR<10)then
    set s=I2S(DAR)+":0"+I2S(DNR)
  else
    set s=I2S(DAR)+":"+I2S(DNR)
  endif
  if p==LocalPlayer then
    set s="|c00FF6600"+s+"|r"
  endif
  return s
endfunction

function Func1706 takes player whichPlayer,player FNO returns string
  local string ZJE
  local string I3X
  local string VDO
  local integer ZAE=(LoadInteger(HY,(400+GetPlayerId(whichPlayer)),(450+GetPlayerId(FNO))))
  local integer QIE=(LoadInteger(HY,(400+GetPlayerId(whichPlayer)),(500+GetPlayerId(FNO))))
  if ZAE<1 then
    set ZAE=0
  endif
  if QIE<1 then
    set QIE=0
  endif
  set ZJE=I2S(ZAE)
  set I3X=I2S(QIE)
  set VDO=ZJE+"/"+I3X
  if whichPlayer==LocalPlayer then
    set VDO="|c00FF6600"+ZJE+"|r/"+"|c00FF6600"+I3X+"|r"
  endif
  return VDO
endfunction

function Func1707 takes player p returns integer
  local integer xp
  local real WNE
  if udg_Hero[GetPlayerId(p)]!=null then
    set xp=GetHeroXP(udg_Hero[GetPlayerId(p)])
    if GetHeroLevel(udg_Hero[GetPlayerId(p)])==25 then
      set WNE=LoadReal(HeroStats,GetHandleId(p),'lv25')
    else
      set WNE=TimerGetElapsed(GlobalTimer)-GameStartsTime
    endif
    set WNE=Func0468(0,WNE)/60
    if WNE>0 then
      return R2I(xp/WNE)
    endif
  endif
  return 0
endfunction

function Func1708 takes player p returns string
  local string s=I2S(Func1707(p))
  if p==LocalPlayer then
    set s="|c00FF6600"+s+"|r"
  endif
  return s
endfunction

function Func1709 takes player p returns integer
  local integer xp
  local real WNE
  if udg_Hero[GetPlayerId(p)]!=null then
    set xp=NetWorths[GetPlayerId(p)]
    set WNE=TimerGetElapsed(GlobalTimer)-GameStartsTime
    set WNE=Func0468(0,WNE)/60
    if WNE>0 then
      return R2I(xp/WNE)
    endif
  endif
  return 0
endfunction

function Func1710 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,LeftAt[GetPlayerId(p)])
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1711 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1708(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1712 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1702(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1713 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1703(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1714 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1701(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1715 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1700(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1716 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1689(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1717 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1693(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1718 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1705(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1719 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1692(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1720 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1704(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1721 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1691(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1722 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1697(p)+"/"+Func1698(p)+"/"+Func1699(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1723 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1695(p)+"/"+Func1696(p)+"/"+Func1694(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1724 takes multiboard m,player p,integer i,integer k,integer slot,real w returns nothing
  local multiboarditem ZME=MultiboardGetItem(m,i,k)
  call MultiboardSetItemStyle(ZME,false,true)
  call MultiboardSetItemIcon(ZME,GetItemIcon(UnitItemInSlot(udg_Hero[GetPlayerId(p)],slot)))
  call MultiboardSetItemWidth(ZME,w)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1725 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1688(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1726 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,true)
  call MultiboardSetItemValue(ZME,Func1690(p))
  call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p)]))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1727 takes player p,integer i,integer k returns nothing
  local multiboarditem ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,Func1684(p))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  set ZME=null
endfunction

function Func1728 takes nothing returns nothing
  local integer D4R=SentinelsIngame
  local integer D5R=ScourgesIngame
  local player array p1
  local player array p2
  local integer i
  local integer k
  local integer D6R=1+19+IMaxIF(D4R,D5R)
  local integer D7R=1+(D4R+D5R)*2
  local multiboarditem ZME
  local integer m
  local integer n
  local string D8R="|r"
  local string D9R="|cff99ccff"
  local integer a
  local integer b
  call DisableTrigger(trigger023)
  call DestroyMultiboard(MainMB)
  if D4R>0 and D5R>0 then
    set D6R=D6R+2
  endif
  set multiboard003=CreateMultiboard()
  call MultiboardSetItemsWidth(multiboard003,0)
  call MultiboardSetRowCount(multiboard003,D6R)
  call MultiboardSetColumnCount(multiboard003,D7R)
  call MultiboardSetTitleText(multiboard003,GetObjectName('n0E3')+" "+" - "+(NoHero))
  call MultiboardMinimize(multiboard003,true)
  call MultiboardSetItemsStyle(multiboard003,false,false)
  call MultiboardDisplay(multiboard003,true)
  call MultiboardMinimize(multiboard003,false)
  call MultiboardSetTitleText(multiboard003,GetObjectName('n0E3')+" "+" - "+(NoHero)+" - "+("|c00ff0303"+I2S(Kills[GetPlayerId(Sentinels[0])])+"|r/|c0020c000"+I2S(Deaths[GetPlayerId(Sentinels[0])])+"|r"))
  set n=1
  set m=1
  loop
    exitwhen m>5
    if IsPlayer(Sentinels[m])or GetPlayerSlotState(Sentinels[m])==PLAYER_SLOT_STATE_LEFT then
      set p1[n]=Sentinels[m]
      set n=n+1
    endif
    set m=m+1
  endloop
  set n=1
  set m=1
  loop
    exitwhen m>5
    if IsPlayer(Scourges[m])or GetPlayerSlotState(Scourges[m])==PLAYER_SLOT_STATE_LEFT then
      set p2[n]=Scourges[m]
      set n=n+1
    endif
    set m=m+1
  endloop
  set m=0
  set k=0
  loop
    exitwhen m>D6R
    set ZME=MultiboardGetItem(multiboard003,m,k)
    call MultiboardSetItemWidth(ZME,0.075)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set i=0
  set k=0
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME," ")
  call MultiboardReleaseItem(ZME)
  set k=0
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,false,false)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1727(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1727(p2[m],i,k)
    set m=m+1
  endloop
  set i=i+1
  set k=0
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,false,false)
  call MultiboardReleaseItem(ZME)
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1726(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1726(p2[m],i,k)
    set m=m+1
  endloop
  set i=i+1
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0EB')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1724(multiboard003,p1[m],i,k,0,0.015)
    set k=k+1
    call Func1724(multiboard003,p1[m],i,k,1,0.054)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1724(multiboard003,p2[m],i,k,0,0.015)
    set k=k+1
    call Func1724(multiboard003,p2[m],i,k,1,0.054)
    set m=m+1
  endloop
  set i=i+1
  set k=0
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+" "+D8R)
  call MultiboardReleaseItem(ZME)
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1724(multiboard003,p1[m],i,k,2,0.015)
    set k=k+1
    call Func1724(multiboard003,p1[m],i,k,3,0.054)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1724(multiboard003,p2[m],i,k,2,0.015)
    set k=k+1
    call Func1724(multiboard003,p2[m],i,k,3,0.054)
    set m=m+1
  endloop
  set i=i+1
  set k=0
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+" "+D8R)
  call MultiboardReleaseItem(ZME)
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1724(multiboard003,p1[m],i,k,4,0.015)
    set k=k+1
    call Func1724(multiboard003,p1[m],i,k,5,0.054)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1724(multiboard003,p2[m],i,k,4,0.015)
    set k=k+1
    call Func1724(multiboard003,p2[m],i,k,5,0.054)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('TX2V')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1725(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1725(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0E1')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1723(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1723(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DZ')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1722(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1722(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0E0')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1721(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1721(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DT')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1720(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1720(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DU')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1719(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1719(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DV')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1718(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1718(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DW')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1717(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1717(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DN')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1716(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1716(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0D8')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1715(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1715(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DM')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1714(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1714(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+"HeroDMG"+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1713(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1713(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+"TwrsDMG"+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1712(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1712(p2[m],i,k)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+"XPM"+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1711(p1[m],i,k)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1711(p2[m],i,k)
    set m=m+1
  endloop
  if D4R>0 and D5R>0 then
    set k=0
    set a=i
    set b=k
    set i=i+1
    set ZME=MultiboardGetItem(multiboard003,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0DL')+D8R)
    call MultiboardReleaseItem(ZME)
    set i=a
    set n=1
    loop
      exitwhen n>D4R
      set k=0
      set i=a
      set m=1
      loop
        exitwhen m>D5R
        set k=n+(n-1)
        set i=i+1
        set ZME=MultiboardGetItem(multiboard003,i,k)
        call MultiboardSetItemStyle(ZME,false,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p1[n])]))
        call MultiboardSetItemWidth(ZME,0.01)
        call MultiboardReleaseItem(ZME)
        set k=k+1
        set ZME=MultiboardGetItem(multiboard003,i,k)
        call MultiboardSetItemStyle(ZME,true,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p2[m])]))
        call MultiboardSetItemValue(ZME," "+Func1706(p1[n],p2[m]))
        call MultiboardSetItemWidth(ZME,0.059)
        call MultiboardReleaseItem(ZME)
        set m=m+1
      endloop
      set n=n+1
    endloop
    set n=D4R+1
    loop
      exitwhen n>(D5R+D4R)
      set k=0
      set i=a
      set m=1
      loop
        exitwhen m>D4R
        set k=n+(n-1)
        set i=i+1
        set ZME=MultiboardGetItem(multiboard003,i,k)
        call MultiboardSetItemStyle(ZME,false,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p2[n-D4R])]))
        call MultiboardSetItemWidth(ZME,0.01)
        call MultiboardReleaseItem(ZME)
        set k=k+1
        set ZME=MultiboardGetItem(multiboard003,i,k)
        call MultiboardSetItemStyle(ZME,true,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p1[m])]))
        call MultiboardSetItemValue(ZME," "+Func1706(p2[n-D4R],p1[m]))
        call MultiboardSetItemWidth(ZME,0.059)
        call MultiboardReleaseItem(ZME)
        set m=m+1
      endloop
      set n=n+1
    endloop
  endif
  set i=i+1
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0CZ')+D8R)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>D4R
    set k=k+1
    call Func1710(p1[m],i,k)
    set integer453=integer453+1
    set integers120[integer453]=i
    set integers121[integer453]=k
    set players007[integer453]=p1[m]
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>D5R
    set k=k+1
    call Func1710(p2[m],i,k)
    set integer453=integer453+1
    set integers120[integer453]=i
    set integers121[integer453]=k
    set players007[integer453]=p2[m]
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard003,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,D9R+GetObjectName('n0D9')+D8R)
  call MultiboardReleaseItem(ZME)
  set ZME=MultiboardGetItem(multiboard003,i,k+1)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,(string006))
  call MultiboardSetItemWidth(ZME,0.07)
  call MultiboardReleaseItem(ZME)
  call MultiboardMinimize(multiboard003,true)
  call MultiboardMinimize(multiboard003,false)
endfunction

function Func1729 takes player whichPlayer returns string
  return udg_Colors[GetPlayerId(whichPlayer)]+PlayerNames[GetPlayerId(whichPlayer)]+"|r"
endfunction

function Func1730 takes player whichPlayer returns string
  local integer ZAE=integers047[GetPlayerId(whichPlayer)]
  local integer QIE=integers045[GetPlayerId(whichPlayer)]
  if ZAE<1 then
    set ZAE=0
  endif
  if QIE<1 then
    set QIE=0
  endif
  return I2S(ZAE)+"/"+I2S(QIE)
endfunction

function Func1731 takes player whichPlayer returns string
  local integer ZAE=integers044[GetPlayerId(whichPlayer)]
  local string ZJE
  local integer QIE
  local integer ZBE
  set QIE=(ZAE/60)-0
  set ZBE=ModuloInteger(ZAE,60)
  if(ZBE<10)then
    set ZJE=I2S(QIE)+":0"+I2S(ZBE)
  else
    set ZJE=I2S(QIE)+":"+I2S(ZBE)
  endif
  return ZJE
endfunction

function Func1732 takes player whichPlayer,player FNO returns string
  local integer ZAE=(LoadInteger(HY,(400+GetPlayerId(whichPlayer)),(450+GetPlayerId(FNO))))
  local integer QIE=(LoadInteger(HY,(400+GetPlayerId(whichPlayer)),(500+GetPlayerId(FNO))))
  if ZAE<1 then
    set ZAE=0
  endif
  if QIE<1 then
    set QIE=0
  endif
  return I2S(ZAE)+"/"+I2S(QIE)
endfunction

function Func1733 takes player whichPlayer returns string
  local string ZJE
  if IsDead(udg_Hero[GetPlayerId(whichPlayer)])then
    set ZJE=I2S(R2I(TimerGetRemaining(HeroRespawnTimer[GetPlayerId(whichPlayer)])))
  else
    set ZJE=" "
  endif
  return ZJE
endfunction

function Func1734 takes player whichPlayer returns string
  local real result=(TimerGetRemaining(UltimateCDTimers[GetPlayerId(whichPlayer)]))
  local string ZJE
  if result>0 then
    set ZJE=I2S(R2I(result))
  else
    set ZJE=" "
  endif
  return ZJE
endfunction

function Func1735 takes integer ZAE,integer QIE returns nothing
  set multiboard004=CreateMultiboard()
  call MultiboardSetItemsWidth(multiboard004,0)
  call MultiboardSetRowCount(multiboard004,ZAE)
  call MultiboardSetColumnCount(multiboard004,QIE)
  call MultiboardSetTitleText(multiboard004,GetObjectName('n0E3')+" "+" - "+(NoHero))
  call MultiboardMinimize(multiboard004,true)
  call MultiboardSetItemsStyle(multiboard004,false,false)
  if PlayerObserver then
    call MultiboardDisplay(multiboard004,true)
  endif
endfunction

function Func1736 takes nothing returns nothing
  local integer FBR=integer077
  local integer FCR=integer078
  local player array p1
  local player array p2
  local integer i
  local integer k
  local integer D6R=1+22+IMaxIF(FBR,FCR)
  local integer D7R=1+(FBR+FCR)*2
  local multiboarditem ZME
  local integer m
  local integer n
  local string FDR="|r"
  local string FFR="|cff99ccff"
  local integer FJO
  local integer FKO
  local integer r=131
  local integer g=139
  local integer b=139
  local integer a=255
  local integer loc_integer17=0
  local string FGR=""
  local string FHR=""
  local integer loc_integer18=0
  local integer loc_integer19=0
  local integer loc_integer20
  local integer WVE
  if FBR>0 and FCR>0 then
    set D6R=D6R+2
  endif
  if GetTriggerExecCount(GetTriggeringTrigger())==1 then
    call Func1735(D6R,D7R)
  endif
  if PlayerObserver then
    call MultiboardDisplay(multiboard004,true)
  endif
  set m=1
  loop
    set FGR=Func1681(GetPlayerId(Sentinels[m]),FGR)
    set FHR=Func1681(GetPlayerId(Scourges[m]),FHR)
    set m=m+1
    exitwhen m>5
  endloop
  if FGR!="" then
    set FGR="|c00ffffff"+"[Sentinel: |r"+FGR+"|c00ffffff"+"]|r"
  endif
  if FHR!="" then
    set FHR="|c00ffffff"+"[Scourge: |r"+FHR+"|c00ffffff"+"]|r"
  endif
  call MultiboardSetTitleText(multiboard004,FGR+" "+FHR+" "+GetObjectName('n0E3')+" "+" - "+(NoHero)+" - "+("|c00ff0303"+I2S(Kills[GetPlayerId(Sentinels[0])])+"|r/|c0020c000"+I2S(Deaths[GetPlayerId(Sentinels[0])])+"|r"))
  set n=1
  set m=1
  loop
    if IsPlayerInGame(Sentinels[m])then
      set p1[n]=Sentinels[m]
      set n=n+1
    endif
    set m=m+1
    exitwhen m>5
  endloop
  set n=1
  set m=1
  loop
    if IsPlayerInGame(Scourges[m])then
      set p2[n]=Scourges[m]
      set n=n+1
    endif
    set m=m+1
    exitwhen m>5
  endloop
  set m=0
  set k=0
  if GetTriggerExecCount(GetTriggeringTrigger())==1 then
    loop
      exitwhen m>D6R
      set ZME=MultiboardGetItem(multiboard004,m,k)
      call MultiboardSetItemWidth(ZME,0.075)
      call MultiboardReleaseItem(ZME)
      set m=m+1
    endloop
  endif
  set i=0
  set k=0
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME," ")
  call MultiboardReleaseItem(ZME)
  set k=0
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,false,false)
  call MultiboardReleaseItem(ZME)
  if boolean018 then
    set k=0
    set m=1
    loop
      exitwhen m>FBR
      set k=k+1
      set ZME=MultiboardGetItem(multiboard004,i,k)
      call MultiboardSetItemStyle(ZME,true,false)
      call MultiboardSetItemValue(ZME,Func1729(p1[m]))
      call MultiboardSetItemWidth(ZME,0.07)
      call MultiboardReleaseItem(ZME)
      set m=m+1
    endloop
    set m=1
    loop
      exitwhen m>FCR
      set k=k+1
      set ZME=MultiboardGetItem(multiboard004,i,k)
      call MultiboardSetItemStyle(ZME,true,false)
      call MultiboardSetItemValue(ZME,Func1729(p2[m]))
      call MultiboardSetItemWidth(ZME,0.07)
      call MultiboardReleaseItem(ZME)
      set m=m+1
    endloop
    set boolean018=false
  endif
  set i=i+1
  set k=0
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,false,false)
  call MultiboardReleaseItem(ZME)
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set WVE=GetPlayerId(p1[m])
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,true)
    call MultiboardSetItemValue(ZME,"("+(I2S(GetUnitLevel(udg_Hero[WVE])))+")")
    call MultiboardSetItemIcon(ZME,(Func0518(udg_Hero[WVE])))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set WVE=GetPlayerId(p2[m])
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,true)
    call MultiboardSetItemValue(ZME,"("+(I2S(GetUnitLevel(udg_Hero[WVE])))+")")
    call MultiboardSetItemIcon(ZME,(Func0518(udg_Hero[WVE])))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set i=i+1
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0EB')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    call Func1724(multiboard004,p1[m],i,k,0,0.015)
    set k=k+1
    call Func1724(multiboard004,p1[m],i,k,1,0.054)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    call Func1724(multiboard004,p2[m],i,k,0,0.015)
    set k=k+1
    call Func1724(multiboard004,p2[m],i,k,1,0.054)
    set m=m+1
  endloop
  set i=i+1
  set k=0
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+" "+FDR)
  call MultiboardReleaseItem(ZME)
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    call Func1724(multiboard004,p1[m],i,k,2,0.015)
    set k=k+1
    call Func1724(multiboard004,p1[m],i,k,3,0.054)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    call Func1724(multiboard004,p2[m],i,k,2,0.015)
    set k=k+1
    call Func1724(multiboard004,p2[m],i,k,3,0.054)
    set m=m+1
  endloop
  set i=i+1
  set k=0
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+" "+FDR)
  call MultiboardReleaseItem(ZME)
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    call Func1724(multiboard004,p1[m],i,k,4,0.015)
    set k=k+1
    call Func1724(multiboard004,p1[m],i,k,5,0.054)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    call Func1724(multiboard004,p2[m],i,k,4,0.015)
    set k=k+1
    call Func1724(multiboard004,p2[m],i,k,5,0.054)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0E2')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(GetPlayerState(p1[m],PLAYER_STATE_RESOURCE_GOLD)))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(GetPlayerState(p2[m],PLAYER_STATE_RESOURCE_GOLD)))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0LT')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(BuybackUnitCost[DefineBuybackUnitIndex(p1[m],GetHeroLevel(udg_Hero[GetPlayerId(p1[m])]))]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(BuybackUnitCost[DefineBuybackUnitIndex(p2[m],GetHeroLevel(udg_Hero[GetPlayerId(p2[m])]))]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DZ')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers031[GetPlayerId(p1[m])])+"/"+I2S(integers032[GetPlayerId(p1[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers031[GetPlayerId(p2[m])])+"/"+I2S(integers032[GetPlayerId(p2[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0E1')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set WVE=GetPlayerId(p1[m])
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(Kills[WVE])+"/"+I2S(Deaths[WVE])+"/"+I2S(Assists[WVE]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set WVE=GetPlayerId(p2[m])
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(Kills[WVE])+"/"+I2S(Deaths[WVE])+"/"+I2S(Assists[WVE]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0JU')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1685(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1685(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0KF')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1686(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1686(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0E0')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1691(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1691(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DT')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1730(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1730(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DY')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(LoadInteger(HY,400+GetPlayerId(p1[m]),79)))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(LoadInteger(HY,400+GetPlayerId(p2[m]),79)))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DU')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers046[GetPlayerId(p1[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers046[GetPlayerId(p2[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DV')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1731(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1731(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DW')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers038[GetPlayerId(p1[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers038[GetPlayerId(p2[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DN')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers035[GetPlayerId(p1[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers035[GetPlayerId(p2[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0D8')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set WVE=GetPlayerId(p1[m])
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers040[WVE])+"/"+I2S(integers041[WVE])+"/"+I2S(integers042[WVE])+"/"+I2S(integers043[WVE]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set WVE=GetPlayerId(p2[m])
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers040[WVE])+"/"+I2S(integers041[WVE])+"/"+I2S(integers042[WVE])+"/"+I2S(integers043[WVE]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DM')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers039[GetPlayerId(p1[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers039[GetPlayerId(p2[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+"HeroDMG"+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers022[GetPlayerId(p1[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers022[GetPlayerId(p2[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+"TwrsDMG"+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers023[GetPlayerId(p1[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,I2S(integers023[GetPlayerId(p2[m])]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+"XPM"+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1708(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,Func1708(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  if FBR>0 and FCR>0 then
    set k=0
    set FJO=i
    set FKO=k
    set i=i+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemStyle(ZME,true,false)
    call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0DL')+FDR)
    call MultiboardReleaseItem(ZME)
    set i=FJO
    set n=1
    loop
      exitwhen n>FBR
      set k=0
      set i=FJO
      set m=1
      loop
        exitwhen m>FCR
        set k=n+(n-1)
        set i=i+1
        set ZME=MultiboardGetItem(multiboard004,i,k)
        call MultiboardSetItemStyle(ZME,false,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p1[n])]))
        call MultiboardSetItemWidth(ZME,0.01)
        call MultiboardReleaseItem(ZME)
        set k=k+1
        set ZME=MultiboardGetItem(multiboard004,i,k)
        call MultiboardSetItemStyle(ZME,true,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p2[m])]))
        call MultiboardSetItemValue(ZME," "+Func1732(p1[n],p2[m]))
        call MultiboardSetItemWidth(ZME,0.059)
        call MultiboardReleaseItem(ZME)
        set m=m+1
      endloop
      set n=n+1
    endloop
    set n=FBR+1
    loop
      exitwhen n>(FCR+FBR)
      set k=0
      set i=FJO
      set m=1
      loop
        exitwhen m>FBR
        set k=n+(n-1)
        set i=i+1
        set ZME=MultiboardGetItem(multiboard004,i,k)
        call MultiboardSetItemStyle(ZME,false,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p2[n-FBR])]))
        call MultiboardSetItemWidth(ZME,0.01)
        call MultiboardReleaseItem(ZME)
        set k=k+1
        set ZME=MultiboardGetItem(multiboard004,i,k)
        call MultiboardSetItemStyle(ZME,true,true)
        call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p1[m])]))
        call MultiboardSetItemValue(ZME," "+Func1732(p2[n-FBR],p1[m]))
        call MultiboardSetItemWidth(ZME,0.059)
        call MultiboardReleaseItem(ZME)
        set m=m+1
      endloop
      set n=n+1
    endloop
  endif
  set i=i+1
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0HS')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    if Func1733(p1[m])==" "then
      call MultiboardSetItemStyle(ZME,true,false)
    else
      call MultiboardSetItemStyle(ZME,true,false)
      call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p1[m])]))
    endif
    call MultiboardSetItemValue(ZME,Func1734(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    call MultiboardSetItemValueColor(ZME,r,g,b,a)
    if Func1733(p2[m])==" "then
      call MultiboardSetItemStyle(ZME,true,false)
    else
      call MultiboardSetItemStyle(ZME,true,false)
      call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p2[m])]))
    endif
    call MultiboardSetItemValue(ZME,Func1734(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set k=0
  set i=i+1
  set ZME=MultiboardGetItem(multiboard004,i,k)
  call MultiboardSetItemStyle(ZME,true,false)
  call MultiboardSetItemValue(ZME,FFR+GetObjectName('n0E4')+FDR)
  call MultiboardReleaseItem(ZME)
  set k=0
  set m=1
  loop
    exitwhen m>FBR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    if Func1733(p1[m])==" "then
      call MultiboardSetItemStyle(ZME,true,false)
    else
      call MultiboardSetItemStyle(ZME,true,true)
      call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p1[m])]))
    endif
    call MultiboardSetItemValue(ZME,Func1733(p1[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
  set m=1
  loop
    exitwhen m>FCR
    set k=k+1
    set ZME=MultiboardGetItem(multiboard004,i,k)
    if Func1733(p2[m])==" "then
      call MultiboardSetItemStyle(ZME,true,false)
    else
      call MultiboardSetItemStyle(ZME,true,true)
      call MultiboardSetItemIcon(ZME,Func0518(udg_Hero[GetPlayerId(p2[m])]))
    endif
    call MultiboardSetItemValue(ZME,Func1733(p2[m]))
    call MultiboardSetItemWidth(ZME,0.07)
    call MultiboardReleaseItem(ZME)
    set m=m+1
  endloop
endfunction

function Func1737 takes nothing returns nothing
  if udg_ObserverMode then
    set trigger040=CreateTrigger()
    call TriggerRegisterTimerEvent(trigger040,1,true)
    call TriggerAddAction(trigger040,function Func1736)
  endif
endfunction

function Func1738 takes nothing returns boolean
  local integer i=GetUnitTypeId(GetTriggerUnit())
  local string s
  if LocalPlayer==GetTriggerPlayer()then
    if i=='hC95' or i=='n01K' or i=='nC38' or i=='n00V' or i=='n00W' or i=='n002' or i=='n00X' or i=='n009' or i=='n0HE' or i=='nC35' or i=='u00Q' or i=='uC74' or i=='u010' or i=='u00Z' or i=='n12B' or i=='n12N' then
      call ResetUnitAnimation(GetTriggerUnit())
    endif
  endif
  return false
endfunction

function Func1739 takes nothing returns boolean
  local integer i=GetUnitTypeId(GetTriggerUnit())
  local string s=""
  if LocalPlayer==GetTriggerPlayer()then
    if i=='hC95' or i=='n00X' or i=='n12B' or i=='n12N' or i=='n009' or i=='nC35' or i=='u00Q' or i=='u010' or i=='u00Z' then
      set s="stand work"
    elseif i=='n01K' then
      set s="stand third"
    elseif i=='nC38' or i=='n002' then
      call SetUnitAnimationByIndex(GetTriggerUnit(),3)
    elseif i=='n00V' then
      set s="spell attack"
    elseif i=='n00W' then
      set s="spell"
    elseif i=='n0HE' then
      set s="stand victory"
    elseif i=='uC74' then
      set s="stand work gold"
    endif
    if s!=""then
      call SetUnitAnimation(GetTriggerUnit(),s)
      call QueueUnitAnimation(GetTriggerUnit(),s)
    endif
  endif
  return false
endfunction

function Func1740 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real dmg=LoadReal(HY,h,0)
  local real IIX=RMinIF(dmg,9.)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or IIX==0 then
    if IIX==0 then
      call Func0175(u,-LoadReal(HY,GetHandleId(u),'A3LE')*10.)
    endif
    call RemoveSavedReal(HY,GetHandleId(u),'A3LE')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call UnitRemoveAbility(u,'A3LE')
    call UnitRemoveAbility(u,'a3LE')
    call RemoveSavedHandle(HY,GetHandleId(u),'ABDR')
  else
    if IIX!=LoadReal(HY,GetHandleId(u),'A3LE')then
      call Func0175(u,(IIX-LoadReal(HY,GetHandleId(u),'A3LE'))*10.)
      call SaveReal(HY,GetHandleId(u),'A3LE',IIX)
    endif
    call SaveReal(HY,h,0,dmg-IIX)
  endif
  set t=null
  set u=null
endfunction

function Func1741 takes unit u,real dmg returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if GetUnitAbilityLevel(u,'A17R')>0 then
    return
  endif
  if HaveSavedHandle(HY,hu,'ABDR')then
    set t=LoadTriggerHandle(HY,hu,'ABDR')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,hu,'ABDR',t)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func1740))
    call SaveUnitHandle(HY,h,0,u)
  endif
  call UnitAddAbility(u,'A3LE')
  if IsUnitIllusion(GetEventDamageSource())then
    call Func0673(u,dmg*0.75)
    call SaveReal(HY,h,0,LoadReal(HY,h,0)+dmg*0.25)
    set integers023[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]=integers023[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]-R2I(dmg*0.75)
  else
    call Func0673(u,dmg*0.25)
    call SaveReal(HY,h,0,LoadReal(HY,h,0)+dmg*0.75)
    set integers023[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]=integers023[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]-R2I(dmg*0.25)
  endif
  set t=null
endfunction

function Func1742 takes unit u returns nothing
  if HaveSavedHandle(HY,GetHandleId(u),'ABDR')then
    call SaveReal(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(u),'ABDR')),0,0.)
  endif
endfunction

function Func1743 takes boolean FTR returns nothing
  local player p
  if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))then
    if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
      set p=Scourges[0]
    else
      set p=Sentinels[0]
    endif
    if FTR or GetOwningPlayer(GetEventDamageSource())==p then
      call Func1742(GetTriggerUnit())
    else
      call Func1741(GetTriggerUnit(),GetEventDamage())
    endif
  endif
endfunction

function Func1744 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean134)
  else
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func1745 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean135)
  else
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func1746 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean136)
  else
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func1747 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean133)
  else
    call SaveInteger(HY,GetHandleId(GetTriggeringTrigger()),0,LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),0)-1)
    if LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),0)==0 then
      call FlushChildHashtable(HY,GetHandleId(GetTriggeringTrigger()))
      call CleanTrigger(GetTriggeringTrigger())
    endif
  endif
  return false
endfunction

function Func1748 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean138)
  else
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func1749 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean139)
  else
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func1750 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean140)
  else
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func1751 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func1743(boolean137)
  else
    call SaveInteger(HY,GetHandleId(GetTriggeringTrigger()),0,LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),0)-1)
    if LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),0)==0 then
      call FlushChildHashtable(HY,GetHandleId(GetTriggeringTrigger()))
      call CleanTrigger(GetTriggeringTrigger())
    endif
  endif
  return false
endfunction

function Func1752 takes trigger t,unit u returns nothing
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call SaveInteger(HY,GetHandleId(t),0,LoadInteger(HY,GetHandleId(t),0)+1)
endfunction

function Func1753 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Scourges[0])then
    set boolean137=true
  endif
  return false
endfunction

function Func1754 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Scourges[0])then
    set boolean138=true
  endif
  return false
endfunction

function Func1755 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Scourges[0])then
    set boolean139=true
  endif
  return false
endfunction

function Func1756 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Scourges[0])then
    set boolean140=true
  endif
  return false
endfunction

function Func1757 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Sentinels[0])then
    set boolean133=true
  endif
  return false
endfunction

function Func1758 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Sentinels[0])then
    set boolean134=true
  endif
  return false
endfunction

function Func1759 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Sentinels[0])then
    set boolean135=true
  endif
  return false
endfunction

function Func1760 takes nothing returns boolean
  if IsUnitOwnedByPlayer(GetFilterUnit(),Sentinels[0])then
    set boolean136=true
  endif
  return false
endfunction

function Func1761 takes nothing returns boolean
  return IsCreepId(GetUnitTypeId(GetFilterUnit()))and GetUnitCurrentOrder(GetFilterUnit())==0
endfunction

function Func1762 takes nothing returns nothing
  call Func1610(GetEnumUnit(),locations001[GetUnitAbilityLevel(GetEnumUnit(),integer082)])
endfunction

function Func1763 takes nothing returns boolean
  local group g=GetAvailableGroup()
  set boolean133=false
  set boolean134=false
  set boolean135=false
  set boolean136=false
  set boolean137=false
  set boolean138=false
  set boolean139=false
  set boolean140=false
  call GroupEnumUnitsInRect(g,rect056,Condition(function Func1753))
  call GroupEnumUnitsInRect(g,rect057,Condition(function Func1753))
  call GroupEnumUnitsInRect(g,rect058,Condition(function Func1753))
  call GroupEnumUnitsInRect(g,rect068,Condition(function Func1753))
  call GroupEnumUnitsInRect(g,rect069,Condition(function Func1753))
  call GroupEnumUnitsInRect(g,rect070,Condition(function Func1753))
  call GroupEnumUnitsInRect(g,rect066,Condition(function Func1754))
  call GroupEnumUnitsInRect(g,rect074,Condition(function Func1755))
  call GroupEnumUnitsInRect(g,rect067,Condition(function Func1756))
  call GroupEnumUnitsInRect(g,rect059,Condition(function Func1757))
  call GroupEnumUnitsInRect(g,rect060,Condition(function Func1757))
  call GroupEnumUnitsInRect(g,rect061,Condition(function Func1757))
  call GroupEnumUnitsInRect(g,rect073,Condition(function Func1757))
  call GroupEnumUnitsInRect(g,rect071,Condition(function Func1757))
  call GroupEnumUnitsInRect(g,rect072,Condition(function Func1757))
  call GroupEnumUnitsInRect(g,rect063,Condition(function Func1758))
  call GroupEnumUnitsInRect(g,rect064,Condition(function Func1759))
  call GroupEnumUnitsInRect(g,rect065,Condition(function Func1760))
  call GroupClear(g)
  call GroupEnumUnitsOfPlayer(g,Sentinels[0],Condition(function Func1761))
  call ForGroup(g,function Func1762)
  call GroupEnumUnitsOfPlayer(g,Scourges[0],Condition(function Func1761))
  call ForGroup(g,function Func1762)
  call KillGroup(g)
  return false
endfunction

function Func1764 takes nothing returns boolean
  call CleanTrigger(GetTriggeringTrigger())
  call TriggerEvaluate(NeutralSpawnTrigger)
  return false
endfunction

function Func1765 takes nothing returns nothing
  call DestroyTimer(GetExpiredTimer())
endfunction

function Func1766 takes player whichPlayer returns nothing
  local integer ZAE
  local player FNO
  set ZAE=0
  loop
    set FNO=Player(ZAE)
    if(PlayersAreCoAllied(whichPlayer,FNO)and whichPlayer!=FNO)then
      call SetPlayerAlliance(whichPlayer,FNO,ALLIANCE_SHARED_VISION,true)
      call SetPlayerAlliance(whichPlayer,FNO,ALLIANCE_SHARED_CONTROL,true)
      call SetPlayerAlliance(FNO,whichPlayer,ALLIANCE_SHARED_CONTROL,true)
    endif
    set ZAE=ZAE+1
    exitwhen ZAE==12
  endloop
endfunction

function Func1767 takes player p returns nothing
  local string s
  if(integer073<10)then
    set s=I2S(integer072)+":0"+I2S(integer073)
  else
    set s=I2S(integer072)+":"+I2S(integer073)
  endif
  call DisplayTimedTextToPlayer(p,0,0,3600,"|c00ff0303"+GetObjectName('n05E')+"|r")
  call Func0977(p)
  set LeftAt[GetPlayerId(p)]="|c00555555"+s+"|r"
  call RemovePlayer(p,PLAYER_GAME_RESULT_DEFEAT)
  call Func1766(p)
  if Mode_SO then
    call Func0784(p)
  endif
  set booleans021[GetPlayerId(p)]=true
  call Func0976(p)
  call DisplayTimedTextToForceEx(AllPlayers,30.00,"|c00ff0303"+(PlayerNames[GetPlayerId(p)])+" "+GetObjectName('n05E')+"|r")
endfunction

function Func1768 takes nothing returns nothing
  local integer i=1
  call DestroyTimer(GetExpiredTimer())
  loop
    if IsPlayer(Player(i))and udg_Hero[i]==null then
      call Func1767(Player(i))
    endif
    set i=i+1
    if i==6 then
      set i=7
    endif
    exitwhen i>11
  endloop
endfunction

function Func1769 takes nothing returns boolean
  local real GFR=TimerGetRemaining(timer008)
  local real GGR=GFR
  local integer GHR=R2I(GGR)
  local integer DAR=GHR/60-0
  local integer DNR=ModuloInteger(GHR,60)
  local trigger t
  local integer i
  local player p
  if GFR==0 then
    set boolean141=true
    call Traffic_RegisterData("GameStart",1)
    call Func0797(DAR,DNR,true)
    set AFK_Check=true
    set GameStartsTime=TimerGetElapsed(GlobalTimer)
    call CleanTrigger(GetTriggeringTrigger())
    call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)
    call SuspendTimeOfDay(false)
    call SetTimeOfDayScale(0.625)
    if boolean014==false then
      call TimerStart(CreateTimer(),300,false,function Func1768)
    endif
    call TimerStart(CreateTimer(),180,false,function Func1765)
    if boolean070==false then
      call TriggerRegisterTimerEvent(RuneSpawnTrigger,120,true)
      call TriggerEvaluate(RuneSpawnTrigger)
    endif
    call TriggerRegisterTimerEvent(NeutralSpawnTrigger,60,true)
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,30,false)
    call TriggerAddCondition(t,Condition(function Func1764))
    set t=null
    call TriggerRegisterTimerEventPeriodic(trigger017,30.00)
    call TriggerExecute(trigger017)
    call TriggerRegisterTimerEventPeriodic(trigger018,450.00)
    call TriggerRegisterTimerEventSingle(trigger015,2699.00-30)
    call TriggerRegisterTimerEventSingle(trigger016,999.00-150)
    call TriggerRegisterTimerEventSingle(trigger016,1999.00-240)
    call TriggerRegisterTimerEventSingle(trigger016,2999.00-330)
    call TriggerRegisterTimerEvent(trigger036,240,true)
    call TriggerRegisterTimerEvent(trigger031,30,true)
    call TriggerEvaluate(trigger031)
    if boolean071 then
      set trigger021=CreateTrigger()
      call TriggerAddAction(trigger021,function Func1674)
      call TriggerRegisterTimerEvent(trigger021,600,true)
    endif
    call ExecuteFunc("Func2283")
    call ExecuteFunc("Func4803")
  elseif GFR==7 then
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,30,true)
    call TriggerAddCondition(t,Condition(function Func1629))
  elseif GGR<12 and boolean106==false then
    set boolean106=true
    call PlaySoundBJ(sound024)
    call Func0797(DAR,DNR,true)
  elseif GGR==20 then
    if GetRandomInt(0,10)<2 then
      call DisplayTimedTextToForceEx(AllPlayers,6,"|c006699CC"+GetObjectName('n0LG')+"|r")
    endif
  else
    call Func0797(DAR,DNR,true)
  endif
  if boolean067 and ModuloInteger(GetTriggerEvalCount(GetTriggeringTrigger()),4)==0 then
    if GFR==55 then
      if PlayerObserver==false and udg_Hero[PlayerId]==null then
        call DisplayTimedTextToPlayer(LocalPlayer,0,0,6,"|c006699CC"+GetObjectName('n0NJ')+"|r")
      endif
    elseif GFR==50 then
      if PlayerObserver==false and udg_Hero[PlayerId]==null then
        call DisplayTimedTextToPlayer(LocalPlayer,0,0,6,"|c006699CC"+GetObjectName('n0NK')+"|r")
      endif
    elseif GFR<45 and GFR>0 then
      if GFR==44 then
        if PlayerObserver==false and udg_Hero[PlayerId]==null then
          call DisplayTimedTextToPlayer(LocalPlayer,0,0,6,"|c006699CC"+GetObjectName('n0NL')+"|r")
        endif
      endif
      set i=1
      loop
        set p=Sentinels[i]
        if udg_Hero[GetPlayerId(p)]==null then
          call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-1)
        endif
        set p=Scourges[i]
        if udg_Hero[GetPlayerId(p)]==null then
          call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-1)
        endif
        set i=i+1
        exitwhen i>5
      endloop
    endif
  endif
  return false
endfunction

function Func1770 takes nothing returns boolean
  if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and GetOwningPlayer(GetFilterUnit())!=Neutrals then
    if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)then
      set unit166=GetFilterUnit()
    else
      set unit167=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func1771 takes nothing returns boolean
  local unit WXE=GetAttacker()
  local unit SGE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local boolean b=false
  call GroupEnumUnitsInRange(g,GetUnitX(WXE),GetUnitY(WXE),900,Condition(function Func1770))
  call KillGroup(g)
  call DisableTrigger(GetTriggeringTrigger())
  if unit166!=null then
    call IssueTargetOrder(WXE,"attack",unit166)
    call GroupAddUnit(group019,WXE)
    set b=true
  elseif IsUnitType(SGE,UNIT_TYPE_HERO)and unit167!=null then
    call IssueTargetOrder(WXE,"attack",unit167)
    call GroupAddUnit(group019,WXE)
    set b=true
  endif
  call EnableTrigger(GetTriggeringTrigger())
  set unit166=null
  set unit167=null
  set WXE=null
  set SGE=null
  return b
endfunction

function Func1772 takes nothing returns nothing
  if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<1 then
    call GroupRemoveUnit(group019,GetEnumUnit())
  endif
  if GetUnitCurrentOrder(GetEnumUnit())!=OrderId("attack")then
    call GroupRemoveUnit(group019,GetEnumUnit())
    call Func1610(GetEnumUnit(),locations001[GetUnitAbilityLevel(GetEnumUnit(),integer082)])
  endif
endfunction

function Func1773 takes nothing returns boolean
  call ForGroup(group019,function Func1772)
  return false
endfunction

function Func1774 takes string ZJE returns nothing
  set integer454=integer454+1
  set strings009[integer454]=ZJE
endfunction

function Func1775 takes nothing returns boolean
  local integer ZAE=1
  loop
    exitwhen ZAE>integer454
    call ExecuteFunc(strings009[ZAE])
    set ZAE=ZAE+1
  endloop
  call ExecuteFunc("Func1030")
  return false
endfunction

function Func1776 takes unit source returns nothing
  local trigger RBX=CreateTrigger()
  call SaveBoolean(HY,(GetHandleId(GetTriggerUnit())),38,(true))
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(RBX,Condition(function Func1775))
  set RBX=null
endfunction

function Func1777 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'B306')>0 and IsUnitAlly(GetFilterUnit(),tt_player1)and AliveNonBuildOrMarker(GetFilterUnit())and GetFilterUnit()!=Roshan
endfunction

function Func1778 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group D9X=LoadGroupHandle(HY,h,1)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit u2
  local group g
  local group gg
  local integer GZR
  local integer G_R
  if IsDead(u)or u==null then
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
    loop
      set u2=FirstOfGroup(D9X)
      exitwhen u2==null
      call GroupRemoveUnit(D9X,u2)
      call ManageBonusHP(u2,-1*LoadInteger(MHT,GetHandleId(u2),'BHPA'))
      call SaveInteger(MHT,GetHandleId(u2),'BHPA',0)
      call UnitRemoveAbility(u2,'B306')
    endloop
    call KillGroup(D9X)
  else
    set g=GetAvailableGroup()
    set tt_player1=GetOwningPlayer(u)
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func1777))
    set gg=GetAvailableGroup()
    call GroupAddGroup(D9X,gg)
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      if IsUnitInGroup(u2,g)==false then
        call GroupRemoveUnit(D9X,u2)
        call ManageBonusHP(u2,-1*LoadInteger(MHT,GetHandleId(u2),'BHPA'))
        call SaveInteger(MHT,GetHandleId(u2),'BHPA',0)
        call UnitRemoveAbility(u2,'B306')
      endif
      call GroupRemoveUnit(gg,u2)
    endloop
    call KillGroup(gg)
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      set G_R=LoadInteger(MHT,GetHandleId(u2),'BHPA')
      set GZR=R2I(R2I(GetUnitState(u2,UNIT_STATE_MAX_LIFE)-G_R)*0.15)
      if G_R!=0 then
        if G_R!=GZR then
          call ManageBonusHP(u2,GZR-G_R)
        endif
      else
        call ManageBonusHP(u2,GZR)
      endif
      call SaveInteger(MHT,GetHandleId(u2),'BHPA',GZR)
      call GroupRemoveUnit(g,u2)
      call GroupAddUnit(D9X,u2)
    endloop
    call KillGroup(g)
  endif
  set t=null
  set D9X=null
  set u=null
  set g=null
  set gg=null
endfunction

function Func1779 takes unit u returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.5,true,function Func1778)
  call SaveUnitHandle(HY,h,0,u)
  call SaveGroupHandle(HY,h,1,GetAvailableGroup())
  set t=null
endfunction

function Func1780 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'B3IK')>0 and IsUnitAlly(GetFilterUnit(),tt_player1)and AliveNonBuildOrMarker(GetFilterUnit())and GetFilterUnit()!=Roshan
endfunction

function Func1781 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group D9X=LoadGroupHandle(HY,h,1)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit u2
  local group g
  local group gg
  local integer GZR
  local integer G_R
  if IsDead(u)or u==null then
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
    loop
      set u2=FirstOfGroup(D9X)
      exitwhen u2==null
      call GroupRemoveUnit(D9X,u2)
      call Stat_Sub(u2,3,"+DEF")
    endloop
    call KillGroup(D9X)
  else
    set g=GetAvailableGroup()
    set tt_player1=GetOwningPlayer(u)
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func1780))
    set gg=GetAvailableGroup()
    call GroupAddGroup(D9X,gg)
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      if IsUnitInGroup(u2,g)==false then
        call GroupRemoveUnit(D9X,u2)
        call Stat_Sub(u2,3,"+DEF")
      endif
      call GroupRemoveUnit(gg,u2)
    endloop
    call KillGroup(gg)
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      if IsUnitInGroup(u2,D9X)==false then
        call Stat_Add(u2,3,"+DEF")
      endif
      call GroupRemoveUnit(g,u2)
      call GroupAddUnit(D9X,u2)
    endloop
    call KillGroup(g)
  endif
  set t=null
  set D9X=null
  set u=null
  set g=null
  set gg=null
endfunction

function Func1782 takes unit u returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.5,true,function Func1781)
  call SaveUnitHandle(HY,h,0,u)
  call SaveGroupHandle(HY,h,1,GetAvailableGroup())
  set t=null
endfunction

function Func1783 takes unit u returns nothing
  local integer i=0
  local integer base
  if IsHeroUnitId(GetUnitTypeId(u))then
    set base='A3MM'
  else
    set base='A3MC'
  endif
  loop
    exitwhen GetUnitAbilityLevel(u,base+i)==0 or i>10
    set i=i+1
  endloop
  if i<=10 then
    call UnitAddAbility2(u,base+i)
  endif
endfunction

function Func1784 takes unit u returns nothing
  local integer i=0
  local integer base
  if IsHeroUnitId(GetUnitTypeId(u))then
    set base='A3MM'
  else
    set base='A3MC'
  endif
  loop
    exitwhen GetUnitAbilityLevel(u,base+i)==1 or i>10
    set i=i+1
  endloop
  if i<=10 then
    call UnitRemoveAbility(u,base+i)
  endif
endfunction

function Func1785 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'a3MB')>0 and IsUnitAlly(GetFilterUnit(),tt_player1)and AliveNonBuildOrMarker(GetFilterUnit())and GetFilterUnit()!=Roshan
endfunction

function Func1786 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group D9X=LoadGroupHandle(HY,h,1)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit u2
  local group g
  local group gg
  local integer GZR
  local integer G_R
  if IsDead(u)or u==null then
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
    loop
      set u2=FirstOfGroup(D9X)
      exitwhen u2==null
      call GroupRemoveUnit(D9X,u2)
      call Func1784(u2)
    endloop
    call KillGroup(D9X)
  else
    set g=GetAvailableGroup()
    set tt_player1=GetOwningPlayer(u)
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func1785))
    set gg=GetAvailableGroup()
    call GroupAddGroup(D9X,gg)
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      if IsUnitInGroup(u2,g)==false then
        call GroupRemoveUnit(D9X,u2)
        call Func1784(u2)
      endif
      call GroupRemoveUnit(gg,u2)
    endloop
    call KillGroup(gg)
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      if IsUnitInGroup(u2,D9X)==false then
        call Func1783(u2)
      endif
      call GroupRemoveUnit(g,u2)
      call GroupAddUnit(D9X,u2)
    endloop
    call KillGroup(g)
  endif
  set t=null
  set D9X=null
  set u=null
  set g=null
  set gg=null
endfunction

function Func1787 takes unit u returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.5,true,function Func1786)
  call SaveUnitHandle(HY,h,0,u)
  call SaveGroupHandle(HY,h,1,GetAvailableGroup())
  set t=null
endfunction

function Func1788 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local player p=GetOwningPlayer(u)
  local integer id='A3QO'
  if IsPlayerAlly(p,LocalPlayer)then
    set id='A3QP'
  endif
  call UnitAddAbility2(u,id)
  set u=null
endfunction

function Func1789 takes nothing returns boolean
  local integer i
  if boolean007 or GetUnitAbilityLevel(GetTriggerUnit(),'Aloc')>0 then
    return false
  endif
  set i=GetUnitTypeId(GetTriggerUnit())
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and i!='H0B8' and i!='H07G' and i!='H00Y' and HaveSavedBoolean(HY,GetHandleId(GetTriggerUnit()),38)==false then
    if boolean142 and(i!='O00P' or boolean143)then
      call Func1776(GetTriggerUnit())
    endif
  endif
  if i=='nggr' then
    call Func1779(GetTriggerUnit())
  elseif i=='nbwm' then
    call Func1782(GetTriggerUnit())
  elseif i=='nfpc' or i=='ncen' then
    call Func1787(GetTriggerUnit())
  endif
  if boolean014==false and boolean010==false then
    call Func1788()
  endif
  return false
endfunction

function Func1790 takes nothing returns nothing
  call TechHeroForAll('N0M7')
  call TechHeroForAll('N0MK')
endfunction

function Func1791 takes string ZJE returns nothing
  local integer i
  local player p
  local integer WVE
  local string HOR
  local integer QIE=R2I(TimerGetElapsed(GlobalTimer)-GameStartsTime)
  local integer ZBE=QIE/60-0
  local integer ZCE=ModuloInteger(QIE,60)
  call RedefineModeTyper()
  set i=1
  loop
    exitwhen i>5
    set p=Sentinels[i]
    set WVE=GetPlayerId(p)
    set HOR=I2S(WVE)
    call StoreInteger(gamecache001,HOR,"1",(Kills[WVE]))
    call StoreInteger(gamecache001,HOR,"2",(Deaths[WVE]))
    call StoreInteger(gamecache001,HOR,"3",(integers031[WVE]))
    call StoreInteger(gamecache001,HOR,"4",(integers032[WVE]))
    call StoreInteger(gamecache001,HOR,"5",(Assists[WVE]))
    call StoreInteger(gamecache001,HOR,"6",NetWorths[WVE])
    call StoreInteger(gamecache001,HOR,"7",LoadInteger(HY,400+WVE,79))
    call StoreInteger(gamecache001,HOR,"8_0",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],0))))
    call StoreInteger(gamecache001,HOR,"8_1",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],1))))
    call StoreInteger(gamecache001,HOR,"8_2",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],2))))
    call StoreInteger(gamecache001,HOR,"8_3",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],3))))
    call StoreInteger(gamecache001,HOR,"8_4",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],4))))
    call StoreInteger(gamecache001,HOR,"8_5",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],5))))
    call StoreInteger(gamecache001,HOR,"9",(GetUnitTypeId(udg_Hero[WVE])))
    call StoreInteger(gamecache001,HOR,"id",i)
    call StoreInteger(gamecache001,HOR,"10",integers022[WVE])
    call StoreInteger(gamecache001,HOR,"11",integers023[WVE])
    call StoreInteger(gamecache001,HOR,"12",integers009[WVE])
    call StoreInteger(gamecache001,HOR,"13",integers010[WVE])
    call StoreInteger(gamecache001,HOR,"14",Func1707(p))
    call StoreInteger(gamecache001,HOR,"15",Func1709(p))
    set p=Scourges[i]
    set WVE=GetPlayerId(p)
    set HOR=I2S(WVE)
    call StoreInteger(gamecache001,HOR,"1",(Kills[WVE]))
    call StoreInteger(gamecache001,HOR,"2",(Deaths[WVE]))
    call StoreInteger(gamecache001,HOR,"3",(integers031[WVE]))
    call StoreInteger(gamecache001,HOR,"4",(integers032[WVE]))
    call StoreInteger(gamecache001,HOR,"5",(Assists[WVE]))
    call StoreInteger(gamecache001,HOR,"6",NetWorths[WVE])
    call StoreInteger(gamecache001,HOR,"7",(LoadInteger(HY,(400+WVE),79)))
    call StoreInteger(gamecache001,HOR,"8_0",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],0))))
    call StoreInteger(gamecache001,HOR,"8_1",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],1))))
    call StoreInteger(gamecache001,HOR,"8_2",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],2))))
    call StoreInteger(gamecache001,HOR,"8_3",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],3))))
    call StoreInteger(gamecache001,HOR,"8_4",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],4))))
    call StoreInteger(gamecache001,HOR,"8_5",(GetItemTypeId(UnitItemInSlot(udg_Hero[WVE],5))))
    call StoreInteger(gamecache001,HOR,"9",(GetUnitTypeId(udg_Hero[WVE])))
    call StoreInteger(gamecache001,HOR,"id",i+5)
    call StoreInteger(gamecache001,HOR,"10",integers022[WVE])
    call StoreInteger(gamecache001,HOR,"11",integers023[WVE])
    call StoreInteger(gamecache001,HOR,"12",integers009[WVE])
    call StoreInteger(gamecache001,HOR,"13",integers010[WVE])
    call StoreInteger(gamecache001,HOR,"14",Func1707(p))
    call StoreInteger(gamecache001,HOR,"15",Func1709(p))
    if LocalPlayer==PlayerModeTyper then
      set HOR=I2S(GetPlayerId(Sentinels[i]))
      call SyncStoredInteger(gamecache001,HOR,"1")
      call SyncStoredInteger(gamecache001,HOR,"2")
      call SyncStoredInteger(gamecache001,HOR,"3")
      call SyncStoredInteger(gamecache001,HOR,"4")
      call SyncStoredInteger(gamecache001,HOR,"5")
      call SyncStoredInteger(gamecache001,HOR,"6")
      call SyncStoredInteger(gamecache001,HOR,"7")
      call SyncStoredInteger(gamecache001,HOR,"8_0")
      call SyncStoredInteger(gamecache001,HOR,"8_1")
      call SyncStoredInteger(gamecache001,HOR,"8_2")
      call SyncStoredInteger(gamecache001,HOR,"8_3")
      call SyncStoredInteger(gamecache001,HOR,"8_4")
      call SyncStoredInteger(gamecache001,HOR,"8_5")
      call SyncStoredInteger(gamecache001,HOR,"9")
      call SyncStoredInteger(gamecache001,HOR,"id")
      call SyncStoredInteger(gamecache001,HOR,"10")
      call SyncStoredInteger(gamecache001,HOR,"11")
      call SyncStoredInteger(gamecache001,HOR,"12")
      call SyncStoredInteger(gamecache001,HOR,"13")
      call SyncStoredInteger(gamecache001,HOR,"14")
      call SyncStoredInteger(gamecache001,HOR,"15")
      set HOR=I2S(GetPlayerId(Scourges[i]))
      call SyncStoredInteger(gamecache001,HOR,"1")
      call SyncStoredInteger(gamecache001,HOR,"2")
      call SyncStoredInteger(gamecache001,HOR,"3")
      call SyncStoredInteger(gamecache001,HOR,"4")
      call SyncStoredInteger(gamecache001,HOR,"5")
      call SyncStoredInteger(gamecache001,HOR,"6")
      call SyncStoredInteger(gamecache001,HOR,"7")
      call SyncStoredInteger(gamecache001,HOR,"8_0")
      call SyncStoredInteger(gamecache001,HOR,"8_1")
      call SyncStoredInteger(gamecache001,HOR,"8_2")
      call SyncStoredInteger(gamecache001,HOR,"8_3")
      call SyncStoredInteger(gamecache001,HOR,"8_4")
      call SyncStoredInteger(gamecache001,HOR,"8_5")
      call SyncStoredInteger(gamecache001,HOR,"9")
      call SyncStoredInteger(gamecache001,HOR,"id")
      call SyncStoredInteger(gamecache001,HOR,"10")
      call SyncStoredInteger(gamecache001,HOR,"11")
      call SyncStoredInteger(gamecache001,HOR,"12")
      call SyncStoredInteger(gamecache001,HOR,"13")
      call SyncStoredInteger(gamecache001,HOR,"14")
      call SyncStoredInteger(gamecache001,HOR,"15")
    endif
    set i=i+1
  endloop
  if boolean144==false then
    call StoreInteger(gamecache001,"Global","Winner",integer455)
    call StoreInteger(gamecache001,"Global","m",ZBE)
    call StoreInteger(gamecache001,"Global","s",ZCE)
    if LocalPlayer==PlayerModeTyper then
      call SyncStoredInteger(gamecache001,"Global","Winner")
      call SyncStoredInteger(gamecache001,"Global","m")
      call SyncStoredInteger(gamecache001,"Global","s")
    endif
  endif
endfunction

function Func1792 takes nothing returns nothing
  call Func1791("1")
endfunction

function Func1793 takes nothing returns nothing
  local player whichPlayer=player016
  local string ZJE=I2S(GetPlayerId(whichPlayer))
  call StoreInteger(gamecache001,ZJE,"8_0",(GetItemTypeId(UnitItemInSlot(udg_Hero[GetPlayerId(whichPlayer)],0))))
  call StoreInteger(gamecache001,ZJE,"8_1",(GetItemTypeId(UnitItemInSlot(udg_Hero[GetPlayerId(whichPlayer)],1))))
  call StoreInteger(gamecache001,ZJE,"8_2",(GetItemTypeId(UnitItemInSlot(udg_Hero[GetPlayerId(whichPlayer)],2))))
  call StoreInteger(gamecache001,ZJE,"8_3",(GetItemTypeId(UnitItemInSlot(udg_Hero[GetPlayerId(whichPlayer)],3))))
  call StoreInteger(gamecache001,ZJE,"8_4",(GetItemTypeId(UnitItemInSlot(udg_Hero[GetPlayerId(whichPlayer)],4))))
  call StoreInteger(gamecache001,ZJE,"8_5",(GetItemTypeId(UnitItemInSlot(udg_Hero[GetPlayerId(whichPlayer)],5))))
  if LocalPlayer==PlayerModeTyper then
    call SyncStoredInteger(gamecache001,I2S(GetPlayerId(whichPlayer)),"8_0")
    call SyncStoredInteger(gamecache001,I2S(GetPlayerId(whichPlayer)),"8_1")
    call SyncStoredInteger(gamecache001,I2S(GetPlayerId(whichPlayer)),"8_2")
    call SyncStoredInteger(gamecache001,I2S(GetPlayerId(whichPlayer)),"8_3")
    call SyncStoredInteger(gamecache001,I2S(GetPlayerId(whichPlayer)),"8_4")
    call SyncStoredInteger(gamecache001,I2S(GetPlayerId(whichPlayer)),"8_5")
  endif
endfunction

function Func1794 takes nothing returns boolean
  call ExecuteFunc("Func1728")
  return false
endfunction

function Func1795 takes nothing returns nothing
  call UnitPlayWinAnim(GetEnumUnit())
endfunction

function Func1796 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,0,0,12000,Condition(function Func0812))
  call ForGroup(g,function Func1795)
  call KillGroup(g)
  set g=null
endfunction

function Func1797 takes nothing returns nothing
  set bj_changeLevelShowScores=true
  call DisableTrigger(trigger027)
  call DisableTrigger(trigger028)
  if udg_ObserverMode then
    call DisableTrigger(trigger040)
  endif
  call DisableTrigger(trigger035)
  call ClearTextMessages()
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,60,string006+" "+GetObjectName('n054')+" www.d1stats.ru.")
  set boolean094=true
  call GameEnd_PauseInit()
  call DisableTrigger(trigger017)
  call DisableTrigger(trigger023)
  call DisableTrigger(trigger034)
  call Func0508()
endfunction

function Func1798 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
  call TriggerRegisterTimerEvent(RBX,2.5,false)
  call TriggerAddCondition(RBX,Condition(function Func1794))
  set integer455=2
  set string006="|c0020c000"+GetObjectName('n03O')+"|r"
  call Func1797()
  call Func1796()
  call Func1791("2")
  set RBX=null
endfunction

function Func1799 takes nothing returns boolean
  call SetUnitVertexColorBJ(unit099,100,100,100,GetTriggerEvalCount(GetTriggeringTrigger()))
  if GetTriggerEvalCount(GetTriggeringTrigger())==100 then
    call ShowUnit(unit099,false)
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func1800 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
  call TriggerRegisterTimerEvent(RBX,1.5,false)
  call TriggerAddCondition(RBX,Condition(function Func1794))
  set integer455=1
  set string006="|c00ff0303"+GetObjectName('n03N')+"|r"
  call Func1797()
  call Func1796()
  call Func1791("1")
  call AddSpecialEffect("war3mapImported\\FrozenThronesDeath2.mdx",GetUnitX(unit099)+150,GetUnitY(unit099)+100)
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func1799))
  set RBX=null
endfunction

function Func1801 takes real result returns boolean
  return(100*GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE))<result
endfunction

function Func1802 takes unit u returns boolean
  return GetUnitAbilityLevel(u,'BNdo')>0 or GetUnitAbilityLevel(u,'BEsh')>0 or GetUnitAbilityLevel(u,'B001')>0 or GetUnitAbilityLevel(u,'B0AQ')>0 or GetUnitAbilityLevel(u,'B0AP')>0 or GetUnitAbilityLevel(u,'B05D')>0 or GetUnitAbilityLevel(u,'B05M')>0 or GetUnitAbilityLevel(u,'B05N')>0 or GetUnitAbilityLevel(u,'B05O')>0 or GetUnitAbilityLevel(u,'B32S')>0
endfunction

function Func1803 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  local boolean b=false
  if not((Func1801(10)and IsUnitType(u,UNIT_TYPE_STRUCTURE)and GetUnitTypeId(u)!='etol' and GetUnitTypeId(u)!='unpl')or(Func1801(25)and Func1802(u))or(Func1801(50)and IsHeroUnitId(GetUnitTypeId(u))==false and(IsUnitType(u,UNIT_TYPE_STRUCTURE)==false))or IsPowerCog(u)or LoadInteger(HY,GetHandleId(GetAttacker()),4328)==1)then
    call IssueImmediateOrderByIdExFunc(GetAttacker(),851972)
    set b=true
  endif
  set u=null
  return b
endfunction

function Func1804 takes nothing returns boolean
  return false
endfunction

function Func1805 takes nothing returns boolean
  if Func0795(GetSpellAbilityId())and Func0796(GetTriggerUnit())then
    call Func0656(GetTriggerUnit())
  endif
  return false
endfunction

function Func1806 takes unit u,real x,real y returns nothing
  if IsDead(u)==false then
    call SetUnitX(u,x)
    call SetUnitY(u,y)
    call SaveInteger(HY,GetHandleId(u),4259,1)
    call UnitAddAbility(u,'A04R')
    call SetUnitInvulnerable(u,true)
    call PauseUnit(u,true)
  endif
endfunction

function Func1807 takes unit u,integer h returns nothing
  call SaveBoolean(HY,GetHandleId(u),140,false)
  call SaveInteger(HY,GetHandleId(u),4259,1)
  call UnitAddAbility(u,'A04R')
  call SetUnitInvulnerable(u,true)
  call PauseUnit(u,true)
  call SaveUnitHandle(HY,h,14,u)
  call SaveReal(HY,h,6,GetUnitX(u))
  call SaveReal(HY,h,7,GetUnitY(u))
endfunction

function Func1808 takes unit u returns nothing
  if LoadBoolean(HY,GetHandleId(u),140)then
    call RemoveSavedBoolean(HY,GetHandleId(u),140)
  endif
  call SaveInteger(HY,GetHandleId(u),4259,2)
  call UnitRemoveAbility(u,'A04R')
  call SetUnitInvulnerable(u,false)
  call PauseUnit(u,false)
endfunction

function Func1809 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit WFX=LoadUnitHandle(HY,h,1)
  local unit u=LoadUnitHandle(HY,h,0)
  if LoadBoolean(HY,h,0)then
    if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
      call DisableTrigger(t)
      if DistanceBetweenUnits(WFX,u)<150 then
        call Func1807(u,h)
        call SaveBoolean(HY,h,0,false)
      else
        call ImminentTriggeredPointOrder(u,851986,GetUnitX(WFX),GetUnitY(WFX))
      endif
      call EnableTrigger(t)
    elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
      call FlushChildHashtable(HY,h)
      call RemoveSavedHandle(HY,GetHandleId(WFX),GetHandleId(u))
      call CleanTrigger(t)
    endif
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A0HX' and u==GetSpellTargetUnit()and(GetPlayerSlotState(GetOwningPlayer(u))==PLAYER_SLOT_STATE_LEFT or IsL1ch)and LoadInteger(HY,GetHandleId(u),4259)==1 then
      call Func1808(u)
      call FlushChildHashtable(HY,h)
      call RemoveSavedHandle(HY,GetHandleId(WFX),GetHandleId(u))
      call CleanTrigger(t)
    endif
  else
    call Func1806(u,LoadReal(HY,h,6),LoadReal(HY,h,7))
  endif
  set WFX=null
  set u=null
  set t=null
endfunction

function Func1810 takes nothing returns nothing
  local trigger t
  local integer h
  local unit HSR=GetSpellTargetUnit()
  local integer hu=GetHandleId(HSR)
  local unit SKE=GetTriggerUnit()
  local integer hc=GetHandleId(SKE)
  local boolean b=DistanceBetweenUnits(SKE,HSR)<150
  if HaveSavedHandle(HY,hc,hu)then
    set t=LoadTriggerHandle(HY,hc,hu)
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call SaveTriggerHandle(HY,hc,hu,t)
    call TriggerAddCondition(t,Condition(function Func1809))
    call SaveUnitHandle(HY,h,0,HSR)
    call SaveUnitHandle(HY,h,1,SKE)
  endif
  if b then
    call Func1807(HSR,h)
  else
    if LoadBoolean(HY,h,0)==false then
      call SaveBoolean(HY,h,0,true)
      call ImminentTriggeredPointOrder(HSR,851986,GetUnitX(SKE),GetUnitY(SKE))
      call TriggerRegisterUnitEvent(t,HSR,EVENT_UNIT_ISSUED_ORDER)
      call TriggerRegisterUnitEvent(t,HSR,EVENT_UNIT_ISSUED_TARGET_ORDER)
      call TriggerRegisterUnitEvent(t,HSR,EVENT_UNIT_ISSUED_POINT_ORDER)
    endif
  endif
  set SKE=null
  set t=null
  set HSR=null
endfunction

function Func1811 takes nothing returns nothing
  if mode_TT then
    return
  endif
  if GetSpellAbilityId()=='A0HU' and(GetPlayerSlotState(GetOwningPlayer(GetSpellTargetUnit()))==PLAYER_SLOT_STATE_LEFT or IsL1ch)and LoadInteger(HY,GetHandleId(GetSpellTargetUnit()),4259)!=1 then
    call Func1810()
  elseif(GetPlayerSlotState(GetOwningPlayer(GetSpellTargetUnit()))!=PLAYER_SLOT_STATE_LEFT)then
    call Error(GetOwningPlayer(GetTriggerUnit()),GetObjectName('n02N'))
  endif
endfunction

function Func1812 takes destructable Z2E returns boolean
  local real result=GetDestructableX(Z2E)
  local real ZEE=GetDestructableY(Z2E)
  local group g=GetAvailableGroup()
  local boolean ZSE
  call GroupEnumUnitsInRange(g,result,ZEE,250,Condition(function AllHeroesFilter))
  set ZSE=FirstOfGroup(g)!=null
  call KillGroup(g)
  set g=null
  return ZSE
endfunction

function GrowTreesTestMode takes nothing returns nothing
  if IsValidTree(GetEnumDestructable())and GetDestructableLife(GetEnumDestructable())<1 and GetDestructableTypeId(GetEnumDestructable())!='B002' and GetDestructableTypeId(GetEnumDestructable())!='B003' then
    if Func1812(GetEnumDestructable())==false then
      call DestructableRestoreLife(GetEnumDestructable(),GetDestructableMaxLife(GetEnumDestructable()),false)
      if integers066[PlayerId]==1 and GetDestructableTypeId(GetEnumDestructable())=='ATtr' then
        call SetDestructableAnimation(GetEnumDestructable(),"stand alternate")
      endif
    endif
  endif
endfunction

function Func1814 takes nothing returns boolean
  return GetUnitTypeId(GetEnteringUnit())=='e00E' or GetUnitTypeId(GetEnteringUnit())=='e022'
endfunction

function Func1815 takes nothing returns nothing
  call ShowUnit(GetEnteringUnit(),false)
  call UnitApplyTimedLife(GetEnteringUnit(),'BTLF',20.00)
endfunction

function Func1816 takes nothing returns boolean
  return GetDyingUnit()==unit062 and IsDead(unit063)
endfunction

function Func1817 takes nothing returns boolean
  return GetDyingUnit()==unit063 and IsDead(unit062)
endfunction

function Func1818 takes nothing returns nothing
  call ProvideTowerGold(GetKillingUnit(),3)
  call SetUnitInvulnerable(unit062,false)
  call SetUnitInvulnerable(unit063,false)
  call SetUnitInvulnerable(unit081,false)
  call SetUnitInvulnerable(unit082,false)
  call SetUnitInvulnerable(unit083,false)
  call SetUnitInvulnerable(unit084,false)
  call SetUnitInvulnerable(unit070,false)
  call SetUnitInvulnerable(unit071,false)
  call SetUnitInvulnerable(unit072,false)
  call SetUnitInvulnerable(unit073,false)
  call SetUnitInvulnerable(unit074,false)
  call SetUnitInvulnerable(unit075,false)
  call SetUnitInvulnerable(unit076,false)
  call SetUnitInvulnerable(unit077,false)
  call SetUnitInvulnerable(unit078,false)
  call SetUnitInvulnerable(unit079,false)
  call SetUnitInvulnerable(unit080,false)
endfunction

function Func1819 takes nothing returns nothing
  local player p=GetOwningPlayer(GetKillingUnit())
  local integer WVE=GetPlayerId(p)
  local unit u=GetDyingUnit()
  if IsUnitEnemy(GetTriggerUnit(),p)then
    set integers047[WVE]=integers047[WVE]+1
  endif
  if(u==unit053)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(1)+I2S(0),WVE)
    call SetUnitInvulnerable(unit056,false)
    call ProvideTowerGold(GetKillingUnit(),1)
    call RefreshCircles(true)
  elseif(u==unit054)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(1)+I2S(1),WVE)
    call SetUnitInvulnerable(unit057,false)
    call ProvideTowerGold(GetKillingUnit(),1)
    call RefreshCircles(true)
  elseif(u==unit055)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(1)+I2S(2),WVE)
    call SetUnitInvulnerable(unit058,false)
    call ProvideTowerGold(GetKillingUnit(),1)
    call RefreshCircles(true)
  elseif(u==unit056)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(2)+I2S(0),WVE)
    call SetUnitInvulnerable(Sentinels_Tier3_Top,false)
    call ProvideTowerGold(GetKillingUnit(),2)
  elseif(u==unit057)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(2)+I2S(1),WVE)
    call SetUnitInvulnerable(Sentinels_Tier3_Mid,false)
    call ProvideTowerGold(GetKillingUnit(),2)
  elseif(u==unit058)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(2)+I2S(2),WVE)
    call SetUnitInvulnerable(Sentinels_Tier3_Bot,false)
    call ProvideTowerGold(GetKillingUnit(),2)
  elseif(u==Sentinels_Tier3_Top)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(3)+I2S(0),WVE)
    call SetUnitInvulnerable(unit064,false)
    call SetUnitInvulnerable(unit067,false)
    call Func1818()
  elseif(u==Sentinels_Tier3_Mid)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(3)+I2S(1),WVE)
    call SetUnitInvulnerable(unit065,false)
    call SetUnitInvulnerable(unit068,false)
    call Func1818()
  elseif(u==Sentinels_Tier3_Bot)then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(3)+I2S(2),WVE)
    call SetUnitInvulnerable(unit066,false)
    call SetUnitInvulnerable(unit069,false)
    call Func1818()
  elseif u==unit062 or u==unit063 then
    call Traffic_RegisterData("Tower"+I2S(0)+I2S(4)+I2S(1),WVE)
    call ProvideTowerGold(GetKillingUnit(),4)
  endif
  if((GetDyingUnit()==unit062 and IsDead(unit063)))then
    call SetUnitInvulnerable(unit052,false)
  endif
  if((GetDyingUnit()==unit063 and IsDead(unit062)))then
    call SetUnitInvulnerable(unit052,false)
  endif
  set u=null
endfunction

function Func1820 takes nothing returns boolean
  return(IsDead(unit109)and GetTriggerUnit()==unit110)or(IsDead(unit110)and GetTriggerUnit()==unit109)
endfunction

function Func1821 takes nothing returns nothing
  call ProvideTowerGold(GetKillingUnit(),3)
  call SetUnitInvulnerable(unit109,false)
  call SetUnitInvulnerable(unit110,false)
  call SetUnitInvulnerable(unit117,false)
  call SetUnitInvulnerable(unit118,false)
  call SetUnitInvulnerable(unit119,false)
  call SetUnitInvulnerable(unit120,false)
  call SetUnitInvulnerable(unit121,false)
  call SetUnitInvulnerable(unit122,false)
  call SetUnitInvulnerable(unit123,false)
  call SetUnitInvulnerable(unit124,false)
  call SetUnitInvulnerable(unit125,false)
  call SetUnitInvulnerable(unit126,false)
  call SetUnitInvulnerable(unit127,false)
  call SetUnitInvulnerable(unit128,false)
  call SetUnitInvulnerable(unit129,false)
  call SetUnitInvulnerable(unit130,false)
  call SetUnitInvulnerable(unit131,false)
endfunction

function Func1822 takes nothing returns nothing
  local player p=GetOwningPlayer(GetKillingUnit())
  local integer WVE=GetPlayerId(p)
  local unit u=GetDyingUnit()
  if IsUnitEnemy(GetTriggerUnit(),p)then
    set integers047[WVE]=integers047[WVE]+1
  endif
  if(u==unit100)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(1)+I2S(0),WVE)
    call SetUnitInvulnerable(unit103,false)
    call ProvideTowerGold(GetKillingUnit(),1)
    call RefreshCircles(false)
  elseif(u==unit101)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(1)+I2S(1),WVE)
    call SetUnitInvulnerable(unit104,false)
    call ProvideTowerGold(GetKillingUnit(),1)
    call RefreshCircles(false)
  elseif(u==unit102)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(1)+I2S(2),WVE)
    call SetUnitInvulnerable(unit105,false)
    call ProvideTowerGold(GetKillingUnit(),1)
    call RefreshCircles(false)
  elseif(u==unit103)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(2)+I2S(0),WVE)
    call SetUnitInvulnerable(unit106,false)
    call ProvideTowerGold(GetKillingUnit(),2)
  elseif(u==unit104)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(2)+I2S(1),WVE)
    call SetUnitInvulnerable(unit107,false)
    call ProvideTowerGold(GetKillingUnit(),2)
  elseif(u==unit105)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(2)+I2S(2),WVE)
    call SetUnitInvulnerable(unit108,false)
    call ProvideTowerGold(GetKillingUnit(),2)
  elseif(u==unit106)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(3)+I2S(0),WVE)
    call SetUnitInvulnerable(unit111,false)
    call SetUnitInvulnerable(unit114,false)
    call Func1821()
  elseif(u==unit107)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(3)+I2S(1),WVE)
    call SetUnitInvulnerable(unit112,false)
    call SetUnitInvulnerable(unit115,false)
    call Func1821()
  elseif(u==unit108)then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(3)+I2S(2),WVE)
    call SetUnitInvulnerable(unit113,false)
    call SetUnitInvulnerable(unit116,false)
    call Func1821()
  elseif u==unit109 or u==unit110 then
    call Traffic_RegisterData("Tower"+I2S(1)+I2S(4)+I2S(1),WVE)
    call ProvideTowerGold(GetKillingUnit(),4)
  endif
  if(((IsDead(unit109)and GetTriggerUnit()==unit110)or(IsDead(unit110)and GetTriggerUnit()==unit109)))then
    call SetUnitInvulnerable(unit099,false)
  endif
  set u=null
endfunction

function Func1823 takes nothing returns boolean
  local integer ZAE=0
  if GetPlayerSlotState(Sentinels[1])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Sentinels[2])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Sentinels[3])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Sentinels[4])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Sentinels[5])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Scourges[1])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Scourges[2])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Scourges[3])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Scourges[4])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  if GetPlayerSlotState(Scourges[5])==PLAYER_SLOT_STATE_EMPTY then
    set ZAE=ZAE+1
  endif
  return ZAE==9
endfunction

function Func1824 takes nothing returns nothing
  set boolean145=false
  call BJDebugMsg("Creeps will spawn")
endfunction

function Func1825 takes nothing returns nothing
  set boolean146=true
endfunction

function Func1826 takes nothing returns nothing
  set boolean145=true
  call BJDebugMsg("Creeps won't spawn")
endfunction

function Func1827 takes nothing returns nothing
  call BJDebugMsg("No hero limit option state: "+Func0457(NoHeroLimitOff))
  set NoHeroLimitOff=not NoHeroLimitOff
  set boolean174=true
endfunction

function Func1828 takes nothing returns boolean
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'Aloc')==0 then
    call KillUnit(GetFilterUnit())
  endif
  return false
endfunction

function Func1829 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,Scourges[0],Condition(function Func1828))
  call KillGroup(g)
  set g=null
endfunction

function Func1830 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,Sentinels[0],Condition(function Func1828))
  call KillGroup(g)
  set g=null
endfunction

function Func1831 takes nothing returns boolean
  if Func1297(GetFilterUnit())then
    call KillUnit(GetFilterUnit())
  endif
  return false
endfunction

function Func1832 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,0,0,9999,Condition(function Func1831))
  call KillGroup(g)
  set g=null
endfunction

function Func1833 takes nothing returns nothing
  call Func1830()
  call Func1829()
endfunction

function Func1834 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString()))
  local integer QIE=IMaxIF(S2I(s),1)
  local group g=GetAvailableGroup()
  local unit u
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),Condition(function ReturnTrue))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if IsUnitType(u,UNIT_TYPE_HERO)then
      call SetHeroLevel(u,GetHeroLevel(u)+IMaxIF(QIE,1),true)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
endfunction

function Func1835 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),2,99)
  local integer QIE=IMaxIF(S2I(s),1)
  local group g
  local unit u
  if S2I(SubString(GetEventPlayerChatString(),2,4))==0 then
    if GetEventPlayerChatString()=="-l" then
      set QIE=25
    else
      return
    endif
  endif
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),Condition(function ReturnTrue))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if IsUnitType(u,UNIT_TYPE_HERO)then
      call SetHeroLevel(u,GetHeroLevel(u)+IMaxIF(QIE,1),true)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
endfunction

function Func1836 takes nothing returns nothing
  call TriggerExecute(trigger017)
  set boolean141=true
  call TriggerEvaluate(trigger031)
endfunction

function Func1837 takes nothing returns boolean
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)then
    call UnitResetCooldownFX(GetFilterUnit())
    call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE))
    call SetUnitState(GetFilterUnit(),UNIT_STATE_MANA,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_MANA))
  endif
  return false
endfunction

function Func1838 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function Func1837))
  call KillGroup(g)
endfunction

function Func1839 takes nothing returns nothing
  call KillUnit(udg_Hero[GetPlayerId(GetTriggerPlayer())])
endfunction

function Func1840 takes nothing returns nothing
  local string ZJE=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
  local integer ZAE=S2I(ZJE)
  if ZAE<0 or ZAE>24 then
    set ZAE=0
  endif
  call SetFloatGameState(GAME_STATE_TIME_OF_DAY,ZAE)
endfunction

function Func1841 takes nothing returns nothing
  local string ZJE=SubString(GetEventPlayerChatString(),5,14)
  local integer ZAE=S2I(ZJE)
  if GetEventPlayerChatString()=="-g" then
    call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,999999)
  else
    call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)+ZAE)
  endif
endfunction

function Func1842 takes nothing returns nothing
  local string ZJE=SubString(GetEventPlayerChatString(),2,11)
  local integer ZAE=S2I(ZJE)
  call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)+ZAE)
endfunction

function Func1843 takes nothing returns nothing
  local unit u=udg_Hero[GetPlayerId(GetTriggerPlayer())]
  local trigger t=LoadTriggerHandle(HY,GetHandleId(u),'RESP')
  if t!=null then
    call TriggerRegisterTimerEvent(t,0,false)
  endif
  set t=null
  set u=null
endfunction

function CreateDummyFunc takes nothing returns nothing
  local unit hero=udg_Hero[GetPlayerId(GetTriggerPlayer())]
  local player p
  local unit u
  local string s=SubString(GetEventPlayerChatString(),2,StringLength(GetEventPlayerChatString()))
  local integer i=1
  if(S2I(s)>0)then
    set i=S2I(s)
  endif
  if IsScourge(GetOwningPlayer(hero))then
    set p=Sentinels[1]
  else
    set p=Scourges[1]
  endif
  loop
    if i>1 then
      set u=CreateUnit(Scourges[1],MeleeHeroesArray[GetRandomInt(1,MeleeHeroesAmount)],-400,-400,0)
    else
      set u=CreateUnit(Scourges[1],'H000',-400,-400,0)
    endif
    call SetHeroLevel(u,10,false)
    set udg_Hero[GetPlayerId(Scourges[1])]=u
    set i=i-1
    exitwhen i==0
  endloop
  set hero=null
  set u=null
  set p=null
endfunction

function Testmode_Powerup takes nothing returns nothing
  set RuneCanSpawn=true
  call TriggerEvaluate(RuneSpawnTrigger)
endfunction

function Testmode_Neutrals takes nothing returns nothing
  call TriggerEvaluate(NeutralSpawnTrigger)
endfunction

function Testmode_Trees takes nothing returns nothing
  call EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function GrowTreesTestMode)
  call BJDebugMsg("Trees respawned")
endfunction

function Func1848 takes nothing returns boolean
  call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** "+GetObjectName('n06F')+" ****")
  call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,GetObjectName('n076')+" -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
  call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** "+GetObjectName('n06F')+" ****")
  return false
endfunction

function Func1849 takes trigger t,string s,boolean JUR returns nothing
  call TriggerRegisterPlayerChatEvent(t,Sentinels[1],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Sentinels[2],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Sentinels[3],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Sentinels[4],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Sentinels[5],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Scourges[1],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Scourges[2],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Scourges[3],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Scourges[4],s,JUR)
  call TriggerRegisterPlayerChatEvent(t,Scourges[5],s,JUR)
endfunction

function Func1850 takes nothing returns nothing
  set boolean147=not boolean147
  if boolean147 then
    call WTFActivation()
  endif
  call DisplayTimedTextToForceEx(AllPlayers,10,"WTF status: "+Func0457(boolean147))
endfunction

function Func1851 takes integer a returns nothing
  local integer k
  local integer offset=201
  local integer i=0
  if a>0 then
    set a=a/4
    loop
      set k=Memory[a+offset]
      if k!=0 then
        set Memory[k/4+1]=0
        set Memory[k/4+2]=0
      endif
      set offset=offset+0x1C/4
      set i=i+1
      exitwhen i>11
    endloop
  endif
endfunction

function Func1852 takes unit u returns nothing
  local integer a=GetUnitAbility(u,'Asel')
  local integer k
  local integer offset=0xCC
  local integer i=0
  if boolean014 then
    if a>0 then
      call Func1851(a)
    endif
    return
  endif
  if a>0 then
    set a=a/4
    loop
      set k=Memory[a+offset/4]
      if k!=0 then
        set k=GetUnitDataDefAddr(k)
        if k>0 then
          set Memory[k/4+0x50/4]=0x447A0000
        endif
      endif
      set offset=offset+4
      set i=i+1
      exitwhen offset>0xF8
    endloop
  endif
endfunction

function Func1853 takes nothing returns nothing
  call Func1852(unit142)
  call Func1852(unit143)
  call Func1852(unit144)
  call Func1852(unit145)
  call Func1852(unit146)
  call Func1852(unit147)
  call Func1852(unit148)
  call Func1852(unit149)
  call Func1852(unit150)
  call Func1852(unit151)
  call Func1852(unit152)
  call Func1852(unit153)
endfunction

function Func1854 takes nothing returns nothing
  local player p=PlayerModeTyper
  local trigger t
  set boolean014=true
  set boolean010=true
  if bj_isSinglePlayer==false then
    call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,GetObjectName('n076')+" -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
    set t=CreateTrigger()
    call TriggerAddCondition(t,Condition(function Func1848))
    call TriggerRegisterTimerEvent(t,GetRandomReal(60,100),false)
  endif
  set t=CreateTrigger()
  call Func1849(t,"-lvlup",false)
  call TriggerAddAction(t,function Func1834)
  set t=CreateTrigger()
  call Func1849(t,"-l",false)
  call TriggerAddAction(t,function Func1835)
  set t=CreateTrigger()
  call Func1849(t,"-spawncreeps",true)
  call Func1849(t,"-sc",true)
  call TriggerAddAction(t,function Func1836)
  set t=CreateTrigger()
  call Func1849(t,"-refresh",true)
  call TriggerAddAction(t,function Func1838)
  set t=CreateTrigger()
  call Func1849(t,"-kill",true)
  call TriggerAddAction(t,function Func1839)
  set t=CreateTrigger()
  call Func1849(t,"-gold",false)
  call Func1849(t,"-g",true)
  call TriggerAddAction(t,function Func1841)
  set t=CreateTrigger()
  call Func1849(t,"-g",false)
  call TriggerAddAction(t,function Func1842)
  set t=CreateTrigger()
  call Func1849(t,"-time",false)
  call TriggerAddAction(t,function Func1840)
  set t=CreateTrigger()
  call Func1849(t,"-powerup",true)
  call TriggerAddAction(t,function Testmode_Powerup)
  set t=CreateTrigger()
  call Func1849(t,"-killall",true)
  call Func1849(t,"-ka",true)
  call TriggerAddAction(t,function Func1833)
  set t=CreateTrigger()
  call Func1849(t,"-killsent",true)
  call TriggerAddAction(t,function Func1830)
  set t=CreateTrigger()
  call Func1849(t,"-killscourge",true)
  call TriggerAddAction(t,function Func1829)
  set t=CreateTrigger()
  call Func1849(t,"-neutrals",true)
  call Func1849(t,"-n",true)
  call TriggerAddAction(t,function Testmode_Neutrals)
  set t=CreateTrigger()
  call Func1849(t,"-noherolimit",true)
  call Func1849(t,"-nhl",true)
  call TriggerAddAction(t,function Func1827)
  set t=CreateTrigger()
  call Func1849(t,"-trees",true)
  call TriggerAddAction(t,function Testmode_Trees)
  set t=CreateTrigger()
  call Func1849(t,"-killwards",true)
  call TriggerAddAction(t,function Func1832)
  set t=CreateTrigger()
  call Func1849(t,"-spawnoff",true)
  call TriggerAddAction(t,function Func1826)
  set t=CreateTrigger()
  call Func1849(t,"-spawnon",true)
  call TriggerAddAction(t,function Func1824)
  set t=CreateTrigger()
  call Func1849(t,"-roshan",true)
  call TriggerAddAction(t,function Func1825)
  set t=CreateTrigger()
  call Func1849(t,"-respawn",true)
  call Func1849(t,"-res",true)
  call TriggerAddAction(t,function Func1843)
  set t=CreateTrigger()
  call Func1849(t,"-wtf",true)
  call TriggerAddAction(t,function Func1850)
  set t=CreateTrigger()
  call Func1849(t,"-dummy",true)
  call Func1849(t,"-d",true)
  call Func1849(t,"-d ",false)
  call TriggerAddAction(t,function CreateDummyFunc)
  set t=null
  set boolean038=false
endfunction

function Func1855 takes nothing returns boolean
  return not boolean063 and boolean038
endfunction

function Func1856 takes nothing returns nothing
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=CountPlayersInForce(Force_Elfs)+CountPlayersInForce(Force_Unds)
  local integer QIE=Func0464(ZAE,ZAE/2+1)
  local integer ZBE=GetHandleId(RBX)
  set boolean174=true
  if boolean151==false then
    set boolean147=true
    call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.00," ")
    call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.00,GetObjectName('n077'))
    call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.00,GetObjectName('n078'))
  endif
  set RBX=null
endfunction

function Func1857 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  if IsNotHeroID(u)==false and IsUnitIllusion(u)==false then
    call Func0929(GetOwningPlayer(u))
    call Traffic_RegisterData("Level"+I2S(GetHeroLevel(u)),GetPlayerId(GetOwningPlayer(u)))
    if GetHeroLevel(u)==25 then
      call SaveReal(HeroStats,GetHandleId(GetOwningPlayer(u)),'lv25',TimerGetElapsed(GlobalTimer)-GameStartsTime)
    endif
  endif
  set u=null
  return false
endfunction

function Func1858 takes nothing returns nothing
  if boolean151==false then
    call Func1854()
    call CleanTrigger(GetTriggeringTrigger())
  endif
endfunction

function Func1859 takes nothing returns boolean
  if boolean063==false and(bj_isSinglePlayer and Func1823())==false then
    call Func1858()
  endif
  return false
endfunction

function Func1860 takes unit source returns boolean
  return(GetOwningPlayer(source)==Sentinels[0])or(GetOwningPlayer(source)==Scourges[0])
endfunction

function Func1861 takes nothing returns nothing
  call SetUnitUserData(GetEnumUnit(),0)
  call Func1610(GetEnumUnit(),(locations001[GetUnitAbilityLevel(GetEnumUnit(),integer082)]))
endfunction

function Func1862 takes nothing returns nothing
  call IssueTargetOrder(GetEnumUnit(),"attack",unit168)
  call GroupAddUnit(group020,GetEnumUnit())
  call SetUnitUserData(GetEnumUnit(),integer456)
endfunction

function Func1863 takes nothing returns boolean
  if Func0607(GetFilterUnit())or IsDead(GetFilterUnit())or GetUnitAbilityLevel(GetFilterUnit(),'Aatk')==0 then
    return false
  endif
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(unit168))and(IsUnitOwnedByPlayer(GetFilterUnit(),Sentinels[0])or IsUnitOwnedByPlayer(GetFilterUnit(),Scourges[0]))and GetUnitUserData(GetFilterUnit())==0
endfunction

function Func1864 takes nothing returns nothing
  if GetUnitCurrentOrder(GetEnumUnit())==0 and IsUnitInRange(GetEnumUnit(),unit168,GetUnitAcquireRange(GetEnumUnit()))==false then
    call GroupRemoveUnit(group020,GetEnumUnit())
    call SetUnitUserData(GetEnumUnit(),0)
    call Func1610(GetEnumUnit(),(locations001[GetUnitAbilityLevel((GetEnumUnit()),integer082)]))
  endif
endfunction

function Func1865 takes nothing returns nothing
  local integer ZAE=GetHandleId((LoadUnitHandle(HY,(GetHandleId(GetExpiredTimer())),2)))
  local integer QIE=(LoadInteger(HY,(ZAE),143))
  local group g=(LoadGroupHandle(HY,(ZAE),144))
  set units006[QIE]=null
  call ForGroup(g,function Func1861)
  call GroupClear(g)
  set g=null
endfunction

function Func1866 takes unit SGE,unit KOR returns nothing
  local integer h=GetHandleId(SGE)
  local group g=(LoadGroupHandle(HY,h,144))
  local integer QIE=(LoadInteger(HY,h,143))
  local unit M_X=units006[QIE]
  local group gg
  if M_X!=null and M_X!=KOR then
    call ForGroup(g,function Func1861)
    call GroupClear(g)
  endif
  set units006[QIE]=KOR
  set group020=g
  set unit168=KOR
  set integer456=QIE
  call ForGroup(g,function Func1864)
  set gg=GetAvailableGroup()
  call GroupEnumUnitsInRange(gg,GetUnitX(KOR),GetUnitY(KOR),500,Condition(function Func1863))
  call ForGroup(gg,function Func1862)
  call KillGroup(gg)
  call TimerStart(LoadTimerHandle(HY,h,141),2.5,false,function Func1865)
  set g=null
  set M_X=null
  set gg=null
endfunction

function Func1867 takes nothing returns boolean
  local unit KOR=GetTriggerUnit()
  local unit SGE=GetOrderTargetUnit()
  local integer RTX=GetIssuedOrderId()
  local integer QIE
  if IsUnitType(SGE,UNIT_TYPE_HERO)and boolean060==false and IsUnitIllusion(SGE)==false and(RTX==851983 or RTX==851971)and IsUnitEnemy(SGE,GetOwningPlayer(KOR))and IsUnitVisibleEx(KOR,GetOwningPlayer(SGE))then
    set QIE=(LoadInteger(HY,(GetHandleId(SGE)),143))
    if units006[QIE]==null or units006[QIE]==SGE or IsDead(units006[QIE])then
      if QIE!=0 then
        call Func1866(SGE,KOR)
      endif
    endif
  endif
  set KOR=null
  set SGE=null
  return false
endfunction

function Func1868 takes nothing returns boolean
  local unit WXE=GetAttacker()
  local unit SGE=GetTriggerUnit()
  local integer i
  if Func1860(WXE)==false and GetUnitCurrentOrder(WXE)!=851985 then
    set i=(LoadInteger(HY,(GetHandleId(SGE)),143))
    if units006[i]==null or units006[i]==SGE or IsDead(units006[i])then
      if i!=0 then
        call Func1866(SGE,WXE)
      endif
    endif
  endif
  set WXE=null
  set SGE=null
  return false
endfunction

function Func1869 takes unit source returns nothing
  local group g
  local trigger RBX
  local timer AXX
  local integer ZAE=GetHandleId(source)
  set integer457=integer457+1
  call SaveBoolean(HY,(ZAE),142,(true))
  call SaveInteger(HY,(ZAE),143,(integer457))
  set g=GetAvailableGroup()
  call SaveGroupHandle(HY,(ZAE),144,(g))
  set RBX=CreateTrigger()
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddCondition(RBX,Condition(function Func1867))
  set RBX=CreateTrigger()
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_ATTACKED)
  call TriggerAddCondition(RBX,Condition(function Func1868))
  set AXX=CreateTimer()
  call SaveTimerHandle(HY,(GetHandleId(source)),141,(AXX))
  call SaveUnitHandle(HY,(GetHandleId(AXX)),2,(source))
  set g=null
  set RBX=null
  set AXX=null
endfunction

function Func1870 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer id
  local unit u
  if GetTriggerEventId()==EVENT_UNIT_CHANGE_OWNER then
    set u=GetTriggerUnit()
    set id=GetUnitTypeId(u)
    if id=='n026' or id=='n127' then
      call UnitAddAbility2(u,'A37I')
    elseif id=='ndtw' then
      call UnitAddAbility2(u,'ACen')
    elseif id=='nomg' then
      call UnitAddAbility2(u,'ACf2')
    elseif id=='n0HX' then
      call UnitAddAbility2(u,'ACcl')
    elseif id=='nsat' then
      call UnitAddAbility2(u,'ACpu')
    elseif id=='nstl' then
      call UnitAddAbility2(u,'Ambd')
    elseif id=='n0LC' then
      call UnitAddAbility2(u,'ACt2')
    elseif id=='nfsh' then
      call UnitAddAbility2(u,'Anh1')
    endif
    set u=null
    call DestroyTrigger(t)
  else
    call DestroyTrigger(t)
  endif
  set t=null
  return false
endfunction

function Func1871 takes nothing returns boolean
  set unit032=GetFilterUnit()
  return IsUnitAlly(unit032,GetOwningPlayer(tt_unit1))and IsDead(unit032)==false and GetWidgetLife(unit032)<GetUnitState(unit032,UNIT_STATE_MAX_LIFE)
endfunction

function Func1872 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local group g
  local unit u=null
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set tt_unit1=LoadUnitHandle(HY,h,0)
    if GetUnitState(tt_unit1,UNIT_STATE_MANA)>=5 then
      set g=GetAvailableGroup()
      call GroupEnumUnitsInRange(g,GetUnitX(tt_unit1),GetUnitY(tt_unit1),350,Condition(function Func1871))
      set u=GroupPickRandomUnit(g)
      if u!=null then
        call SetUnitState(tt_unit1,UNIT_STATE_MANA,GetUnitState(tt_unit1,UNIT_STATE_MANA)-5.)
        call SetWidgetLife(u,GetWidgetLife(u)+15.)
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl",u,"origin"))
      endif
      call KillGroup(g)
    endif
  else
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
endfunction

function Func1873 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_CHANGE_OWNER)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1872))
  call SaveUnitHandle(HY,h,0,u)
  set t=null
endfunction

function Func1874 takes unit u returns nothing
  local integer id=GetUnitTypeId(u)
  if id=='n127' or id=='n128' then
    call UnitApplyTimedLife(u,'BTLF',60)
  endif
  if IsUnitOwnedByPlayer(u,Neutrals)then
    if id=='ndtw' or id=='ndtr' or id=='nftb' or id=='nfsh' or id=='ngns' or id=='n0HX' then
      call SetUnitAcquireRange(u,300)
    endif
    if id=='nfsh' then
      call Func1873(u)
    endif
  endif
  call Func1106(u)
endfunction

function Func1875 takes nothing returns boolean
  if Func0583(GetTriggerUnit())and(LoadBoolean(HY,(GetHandleId(GetTriggerUnit())),142))==false then
    call Func1869(GetTriggerUnit())
  endif
  if HaveSavedInteger(UnitsData,GetUnitTypeId(GetTriggerUnit()),integer044)then
    call Func1874(GetTriggerUnit())
  endif
  if GetUnitTypeId(GetTriggerUnit())==HeroID[9]then
    set tt_unit1=GetTriggerUnit()
    call ExecuteFunc("RikiEnterMap")
  endif
  return false
endfunction

function Func1876 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
    call SetUnitAbilityLevel(GetTriggerUnit(),integer082,5)
    if units006[GetUnitUserData(GetTriggerUnit())]==null then
      call SetUnitUserData(GetTriggerUnit(),0)
      call Func1610(GetTriggerUnit(),(locations001[GetUnitAbilityLevel((GetTriggerUnit()),integer082)]))
    endif
  elseif GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    call SetUnitAbilityLevel(GetTriggerUnit(),integer082,1)
    if units006[GetUnitUserData(GetTriggerUnit())]==null then
      call SetUnitUserData(GetTriggerUnit(),0)
      call Func1610(GetTriggerUnit(),(locations001[GetUnitAbilityLevel((GetTriggerUnit()),integer082)]))
    endif
  endif
  return false
endfunction

function Func1877 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=(LoadUnitHandle(HY,(GetHandleId(source)),145))
  call RemoveUnit(RCX)
  set source=null
  set RCX=null
endfunction

function Func1878 takes nothing returns nothing
  local group g
  local unit source
  local unit RCX
  local trigger RBX
  local integer ZAE
  set RBX=CreateTrigger()
  call TriggerAddAction(RBX,function Func1877)
  set g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,Sentinels[0],Condition(function ReturnTrue))
  loop
    set source=FirstOfGroup(g)
    exitwhen source==null
    call GroupRemoveUnit(g,source)
    if GetUnitAbilityLevel(source,'Adts')>0 or GetUnitAbilityLevel(source,'Atru')>0 then
      call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
      set RCX=CreateUnit(Sentinels[1],('u00B'),-5000,-5100,0)
      call SetUnitScale(RCX,0,0,0)
      call SetUnitPathing(RCX,false)
      call SetUnitInvulnerable(RCX,true)
      call SetUnitX(RCX,GetUnitX(source))
      call SetUnitY(RCX,GetUnitY(source))
      call SaveUnitHandle(HY,(GetHandleId(source)),145,(RCX))
    endif
  endloop
  call KillGroup(g)
  set g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,Scourges[0],Condition(function ReturnTrue))
  loop
    set source=FirstOfGroup(g)
    exitwhen source==null
    call GroupRemoveUnit(g,source)
    if GetUnitAbilityLevel(source,'Adts')>0 or GetUnitAbilityLevel(source,'Atru')>0 then
      call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
      set RCX=CreateUnit(Scourges[1],('u00B'),3400,4400,0)
      call SetUnitScale(RCX,0,0,0)
      call SetUnitPathing(RCX,false)
      call SetUnitInvulnerable(RCX,true)
      call SetUnitX(RCX,GetUnitX(source))
      call SetUnitY(RCX,GetUnitY(source))
      call SaveUnitHandle(HY,(GetHandleId(source)),145,(RCX))
    endif
  endloop
  call KillGroup(g)
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func1879 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=units006[GetUnitUserData(source)]
  call SetUnitPosition(source,GetUnitX(source),GetUnitY(source))
  if RCX!=null and IsDead(RCX)==false and IsUnitVisibleEx(RCX,GetOwningPlayer(RCX))then
    call IssueTargetOrder(source,"attack",RCX)
  else
    call DisableTrigger(GetTriggeringTrigger())
    call Func1610(source,(locations001[GetUnitAbilityLevel((source),integer082)]))
    call EnableTrigger(GetTriggeringTrigger())
  endif
  set source=null
  set RCX=null
endfunction

function Func1880 takes nothing returns boolean
  if Func1860(GetTriggerUnit())then
    call Func1879()
  endif
  return false
endfunction

function Func1881 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit t=units006[GetUnitUserData(u)]
  call SetUnitPosition(u,GetUnitX(u),GetUnitY(u))
  if t!=null and IsDead(t)==false and IsUnitVisibleEx(t,GetOwningPlayer(t))then
    call IssueTargetOrderByIdFuckingEx(u,851983,t,false)
  else
    call DisableTrigger(GetTriggeringTrigger())
    call Func1610(u,locations001[GetUnitAbilityLevel(u,integer082)])
    call EnableTrigger(GetTriggeringTrigger())
  endif
  set u=null
  set t=null
endfunction

function Func1882 takes nothing returns boolean
  if GetIssuedOrderId()==851986 then
    call Func1881()
  endif
  return false
endfunction

function Func1883 takes nothing returns boolean
  if GetOwningPlayer(GetTriggerUnit())==Sentinels[0]then
    if IsUnitFogged(GetAttacker(),Sentinels[1])or IsUnitFogged(GetAttacker(),Scourges[1])then
      call Func0739(CreateFogModifierRadius(Sentinels[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),128,true,false),1)
    endif
  elseif GetOwningPlayer(GetTriggerUnit())==Scourges[0]then
    if IsUnitFogged(GetAttacker(),Sentinels[1])or IsUnitFogged(GetAttacker(),Scourges[1])then
      call Func0739(CreateFogModifierRadius(Scourges[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),128,true,false),1)
    endif
  endif
  return false
endfunction

function Func1884 takes nothing returns boolean
  local trigger t
  local group g
  local unit u
  if udg_ObserverMode and false then
    set t=CreateTrigger()
    call TriggerRegisterPlayerUnitEvent(t,Sentinels[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function ReturnTrue))
    call TriggerRegisterPlayerUnitEvent(t,Scourges[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function ReturnTrue))
    call TriggerAddCondition(t,Condition(function Func1882))
    set t=CreateTrigger()
    set g=GetAvailableGroup()
    call GroupEnumUnitsOfPlayer(g,Sentinels[0],Condition(function ReturnTrue))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call GroupRemoveUnit(g,u)
      if GetUnitAcquireRange(u)!=0 then
        call TriggerRegisterUnitInRange(t,u,600,Condition(function ReturnTrue))
      endif
    endloop
    call KillGroup(g)
    set g=GetAvailableGroup()
    call GroupEnumUnitsOfPlayer(g,Scourges[0],Condition(function ReturnTrue))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call GroupRemoveUnit(g,u)
      if GetUnitAcquireRange(u)!=0 and IsUnitType(u,UNIT_TYPE_STRUCTURE)then
        call TriggerRegisterUnitInRange(t,u,600,Condition(function ReturnTrue))
      endif
    endloop
    call KillGroup(g)
    call TriggerAddCondition(t,Condition(function Func1880))
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t,Condition(function Func1883))
  endif
  call CleanTrigger(GetTriggeringTrigger())
  set t=null
  return false
endfunction

function Func1885 takes unit source returns nothing
  local integer ZAE=0
  loop
    exitwhen(ZAE==16)
    if IsUnitAlly(source,Player(ZAE))then
      call UnitShareVision(source,Player(ZAE),true)
    endif
    set ZAE=ZAE+1
  endloop
endfunction

function Func1886 takes nothing returns nothing
  call Func1885(GetEnumUnit())
endfunction

function Func1887 takes nothing returns nothing
  local integer ZAE
  local group g
  set ZAE=1
  loop
    exitwhen ZAE>5
    call SetPlayerAlliance(Sentinels[0],Sentinels[ZAE],ConvertAllianceType(5),false)
    call SetPlayerAlliance(Scourges[0],Scourges[ZAE],ConvertAllianceType(5),false)
    set ZAE=ZAE+1
  endloop
  set g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,Sentinels[0],Condition(function ReturnTrue))
  call ForGroup(g,function Func1886)
  call KillGroup(g)
  set g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,Scourges[0],Condition(function ReturnTrue))
  call ForGroup(g,function Func1886)
  call KillGroup(g)
  set g=null
endfunction

function Func1888 takes nothing returns nothing
  local integer ZAE
  set ZAE=0
  loop
    exitwhen ZAE>5
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(0),false)
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(1),false)
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(2),false)
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(3),false)
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(4),false)
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(5),false)
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(6),false)
    call SetPlayerAlliance(Sentinels[ZAE],Neutrals,ConvertAllianceType(7),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(0),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(1),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(2),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(3),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(4),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(5),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(6),false)
    call SetPlayerAlliance(Scourges[ZAE],Neutrals,ConvertAllianceType(7),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(0),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(1),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(2),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(3),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(4),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(5),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(6),false)
    call SetPlayerAlliance(Neutrals,Sentinels[ZAE],ConvertAllianceType(7),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(0),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(1),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(2),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(3),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(4),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(5),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(6),false)
    call SetPlayerAlliance(Neutrals,Scourges[ZAE],ConvertAllianceType(7),false)
    set ZAE=ZAE+1
  endloop
endfunction

function Func1889 takes nothing returns boolean
  return Func1860(GetTriggerUnit())
endfunction

function Func1890 takes nothing returns nothing
  call Func1885(GetTriggerUnit())
endfunction

function Func1891 takes nothing returns nothing
  local trigger RBX
  if not udg_ObserverMode then
    return
  endif
  call Func1887()
  call Func1888()
  set RBX=CreateTrigger()
  call TriggerRegisterEnterRectSimple(RBX,GetWorldBounds())
  call TriggerAddCondition(RBX,Condition(function Func1889))
  call TriggerAddAction(RBX,function Func1890)
  set RBX=null
endfunction

function Func1892 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'BVA1')
  call UnitRemoveAbility(GetEnumUnit(),'BVA2')
  call UnitRemoveAbility(GetEnumUnit(),'BVA3')
  call UnitRemoveAbility(GetEnumUnit(),'BVA4')
endfunction

function Func1893 takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func1894 takes nothing returns boolean
  return (IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(IsNotHeroID(GetFilterUnit())==false or IsMeepo(GetFilterUnit()))
endfunction

function Func1895 takes nothing returns boolean
  if (IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(IsNotHeroID(GetFilterUnit())==false or IsMeepo(GetFilterUnit()))then
    return true
  endif
  return false
endfunction

function BreakSwitcher takes unit u,player p,boolean b returns nothing
  local group g
  local unit u2
  call SetPlayerAbilityAvailable(p,'A31S',b)
  if GetUnitAbilityLevel(u,'B03Y')==1 and b==false then
    call UnitRemoveAbility(u,'B03Y')
  endif
  call SetPlayerAbilityAvailable(p,'A0AH',b)
  call SetPlayerAbilityAvailable(p,'A36G',b)
  call SetPlayerAbilityAvailable(p,'A1J2',b)
  call SetPlayerAbilityAvailable(p,'A1IT',b)
  call SetPlayerAbilityAvailable(p,'A1J1',b)
  call SetPlayerAbilityAvailable(p,'A1J0',b)
  call SetPlayerAbilityAvailable(p,'A1IS',b)
  call SetPlayerAbilityAvailable(p,'A2XU',b)
  call SetPlayerAbilityAvailable(p,'A0MX',b)
  call SetPlayerAbilityAvailable(p,'A28J',b)
  call SetPlayerAbilityAvailable(p,'A1C5',b)
  call SetPlayerAbilityAvailable(p,'A28K',b)
  call SetPlayerAbilityAvailable(p,'A1C3',b)
  call SetPlayerAbilityAvailable(p,'A28I',b)
  call SetPlayerAbilityAvailable(p,'A1C4',b)
  call SetPlayerAbilityAvailable(p,'A28L',b)
  call SetPlayerAbilityAvailable(p,'A1B7',b)
  if GetUnitAbilityLevel(u,'A0FU')>0 and IsUnitIllusion(u)==false then
    if b==false then
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func0816))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call UnitRemoveAbility(u2,'B03R')
      endloop
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'AIcd')>0 and IsUnitIllusion(u)==false then
    if b==false then
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func0816))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call UnitRemoveAbility(u2,'B01L')
      endloop
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'B02L')==1 and b==false then
    call UnitRemoveAbility(u,'B02L')
  endif
  if GetUnitAbilityLevel(u,'A1E6')>0 or GetUnitAbilityLevel(u,'A36L')>0 and IsUnitIllusion(u)==false then
    if b then
      call UnitRemoveAbility(u,'A36M')
    else
      call UnitRemoveAbility(u,'B03X')
    endif
  endif
  if GetUnitAbilityLevel(u,'ACac')>0 or GetUnitAbilityLevel(u,'A36N')>0 and IsUnitIllusion(u)==false then
    if b==false then
      call UnitRemoveAbility(u,'BOac')
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func1893))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call UnitRemoveAbility(u2,'BOac')
      endloop
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'A0MM')>0 or GetUnitAbilityLevel(u,'A3BF')>0 and IsUnitIllusion(u)==false then
    if b then
      call UnitRemoveAbility(u,'A3BF')
    else
      call UnitAddAbility2(u,'A3BF')
      call HideAbility('A3BF')
    endif
  endif
  if GetUnitAbilityLevel(u,'A06A')>0 and IsUnitIllusion(u)==false then
    if b==false then
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func0816))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call UnitRemoveAbility(u2,'B01B')
      endloop
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'A062')>0 or GetUnitAbilityLevel(u,'A36T')>0 and IsUnitIllusion(u)==false then
    if b==false then
      call UnitRemoveAbility(u,'B01W')
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func1893))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call UnitRemoveAbility(u2,'B01W')
      endloop
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'A0BD')>0 and IsUnitIllusion(u)==false then
    if b then
      call UnitRemoveAbility(u,'A370')
    else
      call UnitRemoveAbility(u,'B00E')
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func1893))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call UnitRemoveAbility(u2,'B00E')
      endloop
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'A0KY')>0 and IsUnitIllusion(u)==false then
    if b then
      call UnitRemoveAbility(u,'A374')
    else
      call UnitAddAbility2(u,'A374')
      call HideAbility('A374')
    endif
  endif
  if GetUnitAbilityLevel(u,'AHab')>0 and IsUnitIllusion(u)==false then
    if b==false then
      call UnitRemoveAbility(u,'B07M')
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),99999,Condition(function Func1893))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call UnitRemoveAbility(u2,'B07M')
      endloop
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'A0CL')>0 and IsUnitIllusion(u)==false then
    if b then
      call UnitRemoveAbility(u,'A37F')
    else
      call UnitRemoveAbility(u,'B04D')
      call UnitAddAbility3(u,'A37F',GetUnitAbilityLevel(u,'A0CL'))
    endif
  endif
  call SetPlayerAbilityAvailable(p,'A0ZJ',b)
  call SetPlayerAbilityAvailable(p,'A0ZI',b)
  call SetPlayerAbilityAvailable(p,'A0ZH',b)
  call SetPlayerAbilityAvailable(p,'A0ZG',b)
  call SetPlayerAbilityAvailable(p,'A03E',b)
  if b==false then
    call UnitRemoveAbility(u,'B09B')
    call UnitRemoveAbility(u,'B09A')
    call UnitRemoveAbility(u,'B097')
    call UnitRemoveAbility(u,'B09D')
  endif
  if b==false then
    call UnitRemoveAbility(u,'BVA1')
    call UnitRemoveAbility(u,'BVA2')
    call UnitRemoveAbility(u,'BVA3')
    call UnitRemoveAbility(u,'BVA4')
  endif
  if GetUnitAbilityLevel(u,'AUav')>0 and IsUnitIllusion(u)==false then
    if b then
      call UnitRemoveAbility(u,'A3BH')
    else
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func1893))
      call UnitRemoveAbility(GetEnumUnit(),'BVA1')
      call UnitRemoveAbility(GetEnumUnit(),'BVA2')
      call UnitRemoveAbility(GetEnumUnit(),'BVA3')
      call UnitRemoveAbility(GetEnumUnit(),'BVA4')
      call KillGroup(g)
    endif
  endif
  if GetUnitAbilityLevel(u,'A041')>0 then
    if b then
      call UnitRemoveAbility(u,'A36F')
    else
      call UnitAddAbility2(u,'A36F')
      call HideAbility('A36F')
    endif
  endif
endfunction

function IfUnitIsMotherfuckerRiki takes unit u,boolean b returns nothing
  if GetUnitAbilityLevel(u,'A0MB')==0 then
    return
  endif
  if b then
    call UnitRemoveAbility(u,RikiPernamentInvises[1])
    call UnitRemoveAbility(u,RikiPernamentInvises[2])
    call UnitRemoveAbility(u,RikiPernamentInvises[3])
    call UnitRemoveAbility(u,RikiPernamentInvises[4])
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
    call UnitRemoveAbility(u,RikiPernamentInvises[6])
    call UnitRemoveAbility(u,RikiPernamentInvises[7])
    call UnitRemoveAbility(u,RikiPernamentInvises[8])
  else
    call UnitAddAbility2(u,RikiPernamentInvises[GetUnitAbilityLevel(u,'A0MB')])
    call UnitAddAbility2(u,RikiPernamentInvises[GetUnitAbilityLevel(u,'A0MB')+4])
  endif
endfunction

function BreakRemove takes unit u returns nothing
  call BreakSwitcher(u,GetOwningPlayer(u),true)
  call UnitRemoveAbility(u,'A36D')
  call UnitRemoveAbility(u,'B36D')
  if IsUnitType(u,UNIT_TYPE_HERO)then
    call BreakDummyCreate(u)
  endif
  call IfUnitIsMotherfuckerRiki(u,false)
endfunction

function BreakAdd takes unit u returns nothing
  call BreakSwitcher(u,GetOwningPlayer(u),false)
  if IsUnitType(u,UNIT_TYPE_HERO)then
    call BreakDummyKill(u)
  endif
endfunction

function BreakDur takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,0)
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if c<=1 then
      call RemoveSavedHandle(HY,GetHandleId(u),'BREK')
      call FlushChildHashtable(HY,h)
      call DisableTrigger(t)
      call DestroyTrigger(t)
      call BreakRemove(u)
    else
      call SaveInteger(HY,h,0,c-1)
    endif
  else
    call RemoveSavedHandle(HY,GetHandleId(u),'BREK')
    call FlushChildHashtable(HY,h)
    call DisableTrigger(t)
    call DestroyTrigger(t)
    call BreakRemove(u)
  endif
  set u=null
  set t=null
endfunction

function Break_Main takes unit u,real dur returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'BREK')then
    set t=LoadTriggerHandle(HY,hu,'BREK')
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,dur,false)
    call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,hu,'BREK',t)
    call TriggerRegisterTimerEvent(t,dur,false)
    call TriggerRegisterDeathEvent(t,u)
    call SaveInteger(HY,h,0,1)
    call SaveUnitHandle(HY,h,0,u)
    call UnitAddAbility2(u,'A36D')
    call TriggerAddCondition(t,Condition(function BreakDur))
    call BreakAdd(u)
  endif
  call IfUnitIsMotherfuckerRiki(u,true)
  set t=null
endfunction

function Func1902 takes nothing returns nothing
  call SetUnitMoveSpeed(GetEnumUnit(),(real018))
endfunction

function Func1903 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),7,999)
  local group g=GetAvailableGroup()
  set real018=S2R(LRR)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1902)
  call KillGroup(g)
endfunction

function Func1904 takes nothing returns nothing
  if IsItemPawnable(UnitItemInSlot(GetEnumUnit(),TestAddAbilID))then
    call Func0450("pawn")
  else
    call Func0450("unpawn")
  endif
endfunction

function Func1905 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,999)
  local group g=GetAvailableGroup()
  set TestAddAbilID=S2I(LRR)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1904)
  call KillGroup(g)
endfunction

function Func1906 takes nothing returns nothing
  local boolean b=IsUnitType(GetEnumUnit(),ConvertUnitType(TestAddAbilID))
  call UnitAddType(GetEnumUnit(),ConvertUnitType(TestAddAbilID))
  if IsUnitType(GetEnumUnit(),ConvertUnitType(TestAddAbilID))then
    call Func0450("before: "+Func0457(b)+", now added")
  else
    call Func0450("before: "+Func0457(b)+", NOT added")
  endif
endfunction

function Func1907 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,999)
  local group g=GetAvailableGroup()
  set TestAddAbilID=S2I(LRR)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1906)
  call KillGroup(g)
endfunction

function Func1908 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,999)
  local group g
  local unit u
  set TestAddAbilID=S2I(LRR)
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call Func0450(Func0457(IsUnitType(u,ConvertUnitType(TestAddAbilID))))
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set u=null
  set g=null
endfunction

function Func1909 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),6,999)
  local group g
  local integer i=S2I(s)
  local boolean b=false
  local unit u
  if I2S(i)!=s then
    set b=true
  endif
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if b then
      call SetUnitAnimation(u,s)
    else
      call SetUnitAnimationByIndex(u,i)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func1910 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),7,999)
  local group g
  local integer i=S2I(s)
  local unit u
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call SetUnitLookAt(u,s,u,0,0,270)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func1911 takes nothing returns nothing
  call SetWidgetLife(GetEnumUnit(),TestAddAbilID)
endfunction

function Func1912 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,999)
  local group g=GetAvailableGroup()
  local integer i=S2I(LRR)
  set TestAddAbilID=S2I(LRR)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1911)
  call KillGroup(g)
endfunction

function Func1913 takes nothing returns nothing
  call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,TestAddAbilID)
endfunction

function Func1914 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,999)
  local group g
  local integer i=S2I(LRR)
  set TestAddAbilID=S2I(LRR)
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1913)
  call KillGroup(g)
endfunction

function Func1915 takes nothing returns nothing
  call CreateItem(TestAddAbilID,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))
endfunction

function Func1916 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,9)
  local group g=GetAvailableGroup()
  local integer i=S2I(LRR)
  set TestAddAbilID=String2Id(LRR)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1915)
  call KillGroup(g)
endfunction

function AddAbilsFunc takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),4,10)
  local group g
  local unit u
  local integer k
  local integer i=S2I(s)
  local integer oldprotection
  local integer aa
  if GetEventPlayerChatString()=="-b" then
    set TestAddAbilID='A300'
  else
    set TestAddAbilID=String2Id(s)
  endif
  if SubString(s,0,1)=="R" then
    call SetPlayerTechResearched(GetTriggerPlayer(),TestAddAbilID,1)
    call echo("Researched "+s+" - "+I2S(GetPlayerTechCount(GetTriggerPlayer(),TestAddAbilID,true)))
    return
  endif
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call UnitAddAbility2(u,TestAddAbilID)
    set aa=GetUnitAbilityForAddresss(ConvertHandle(u),TestAddAbilID)
    if aa>0 then
      call echo("this abil structure "+Int2Hex(GetUnitAbilityForAddresss(ConvertHandle(u),TestAddAbilID)))
      call echo("0xC  = "+Int2Hex(GetSomeAddress(Memory[(aa+0xc)/4],Memory[(aa+0x10)/4])))
      call echo("0x24  = "+Int2Hex(GetSomeAddress(Memory[(aa+0x24)/4],Memory[(aa+0x28)/4])))
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call echo("abildata = "+Int2Hex(GetAbilityDataDefAddr(TestAddAbilID))+", ui = "+Int2Hex(GetAbilityUIDefAddr(TestAddAbilID)))
  call echo("unitdata = "+Int2Hex(GetUnitDataDefAddr(TestAddAbilID))+", ui = "+Int2Hex(GetUnitUIDefAddr(TestAddAbilID)))
  call KillGroup(g)
  set u=null
  set g=null
endfunction

function Func1918 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),TestAddAbilID)
endfunction

function Func1919 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,99999)
  local group g
  set TestAddAbilID=String2Id(LRR)
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1918)
  call KillGroup(g)
  set g=null
endfunction

function Func1920 takes nothing returns nothing
  call BJDebugMsg(GetObjectName(GetUnitTypeId(GetEnumUnit()))+"'s lvl of "+Id2String(TestAddAbilID)+" is "+I2S(GetUnitAbilityLevel(GetEnumUnit(),TestAddAbilID)))
  call echo("this abil structure "+Int2Hex(GetUnitAbilityForAddresss(ConvertHandle(GetEnumUnit()),TestAddAbilID)))
endfunction

function Func1921 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,99999)
  local group g
  set TestAddAbilID=String2Id(LRR)
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1920)
  call KillGroup(g)
  set g=null
endfunction

function Func1922 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),TestAddAbilID,false)
endfunction

function Func1923 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,99999)
  local group g=GetAvailableGroup()
  set TestAddAbilID=String2Id(LRR)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1922)
  call KillGroup(g)
endfunction

function Func1924 takes nothing returns nothing
  local item it=CreateItem(TestAddAbilID,1234,4321)
  if it!=null then
    call SetItemPlayer(it,GetOwningPlayer(GetEnumUnit()),false)
    call UnitAddItem(GetEnumUnit(),it)
    call BJDebugMsg("Item address: "+Int2Hex(ConvertHandle(it)))
  endif
  set it=null
endfunction

function Func1925 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,99999)
  local group g=GetAvailableGroup()
  set TestAddAbilID=String2Id(LRR)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1924)
  call KillGroup(g)
endfunction

function Func1926 takes nothing returns nothing
  if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
    if udg_Hero[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]==GetEnumUnit()then
      set udg_Hero[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=null
      set integers026[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=0
    endif
    set udg_Hero[TestAddAbilID]=GetEnumUnit()
    set integers026[TestAddAbilID]=GetUnitTypeId(GetEnumUnit())
  endif
  call SetUnitOwner(GetEnumUnit(),Player(TestAddAbilID),true)
endfunction

function Func1927 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),3,5)
  local group g
  set TestAddAbilID=S2I(LRR)
  if TestAddAbilID<0 or TestAddAbilID>15 then
    return
  endif
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1926)
  call KillGroup(g)
endfunction

function Func1928 takes nothing returns nothing
  call SetUnitAbilityLevel(GetEnumUnit(),TestAddAbilID,tt_int1)
endfunction

function Func1929 takes nothing returns nothing
  local string id=SubString(GetEventPlayerChatString(),4,8)
  local integer QIE=S2I(SubString(GetEventPlayerChatString(),9,11))
  local group g
  set TestAddAbilID=String2Id(id)
  set tt_int1=QIE
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1928)
  call KillGroup(g)
  set g=null
endfunction

function Func1930 takes nothing returns nothing
  local integer id=String2Id(SubString(GetEventPlayerChatString(),4,8))
  local unit u
  if id>0 then
    set boolean062=true
    set u=CreateUnit(Player(4),id,-510,-512,0)
    if GetWidgetLife(u)>0 then
      call Func0450(GetUnitName(u)+" entered")
    endif
    set boolean062=false
  endif
endfunction

function Func1931 takes nothing returns nothing
endfunction

function Func1932 takes nothing returns nothing
  local group g
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1931)
  call KillGroup(g)
  set g=null
endfunction

function Func1933 takes nothing returns nothing
endfunction

function Func1934 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),7,10)
  local integer i=S2I(LRR)
  local string L8R=SubString(GetEventPlayerChatString(),11,15)
  local integer i2=S2I(L8R)
  local group g
  local string s=SubString(GetEventPlayerChatString(),7,123)
  call SetDayNightModels("Environment\\DNC\\DNC"+s+"\\DNC"+s+"Terrain\\DNC"+s+"Terrain.mdl","Environment\\DNC\\DNC"+s+"\\DNC"+s+"Unit\\DNC"+s+"Unit.mdl")
  set TestAddAbilID=i
  set tt_int1=i2
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call KillGroup(g)
  set g=null
endfunction

function Func1935 takes nothing returns nothing
  call UnitResetCooldownFX(GetEnumUnit())
  call SetWidgetLife(GetEnumUnit(),99999999)
  call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,99999999)
endfunction

function Func1936 takes nothing returns nothing
  local group g
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1935)
  call KillGroup(g)
  set g=null
endfunction

function Func1937 takes nothing returns nothing
  if IssueTargetOrderById(GetEnumUnit(),TestAddAbilID,GetEnumUnit())then
    call Func0450(I2S(TestAddAbilID)+" is target skill")
  elseif IssueImmediateOrderById(GetEnumUnit(),TestAddAbilID)then
    call Func0450(I2S(TestAddAbilID)+" is immediate skill")
  elseif IssuePointOrderById(GetEnumUnit(),TestAddAbilID,LoadReal(TempHash,'wave','000x'),LoadReal(TempHash,'wave','000y'))then
    call Func0450(I2S(TestAddAbilID)+" is point skill")
  endif
endfunction

function Func1938 takes nothing returns nothing
  local group g
  set TestAddAbilID=S2I(SubString(GetEventPlayerChatString(),4,50))
  call Func0450("Started "+I2S(TestAddAbilID))
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1937)
  call KillGroup(g)
  set g=null
endfunction

function Func1939 takes nothing returns nothing
endfunction

function Func1940 takes nothing returns nothing
  local group g
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1939)
  call KillGroup(g)
endfunction

function Func1941 takes nothing returns nothing
  call SetDestructableOccluderHeight(GetEnumDestructable(),9999)
endfunction

function Func1942 takes nothing returns boolean
  return GetDestructableTypeId(GetFilterDestructable())=='YTlb' or GetDestructableTypeId(GetFilterDestructable())=='YTlc'
endfunction

function Func1943 takes nothing returns nothing
  set integer046=integer046+1
  set integers021[integer046]=GetDestructableTypeId(GetEnumDestructable())
endfunction

function Func1944 takes unit u returns nothing
  local player p=GetOwningPlayer(u)
  call SaveUnitHandle(HY,GetHandleId(p),'wrth',CreateUnit(p,'e00K',0,0,0))
  call ShowUnit(LoadUnitHandle(HY,GetHandleId(p),'wrth'),false)
  call PauseUnit(LoadUnitHandle(HY,GetHandleId(p),'wrth'),true)
  call UnitRemoveAbility(u,'A3DC')
endfunction

function Func1945 takes unit u returns nothing
  local player p=GetOwningPlayer(u)
  call KillUnit(LoadUnitHandle(HY,GetHandleId(p),'wrth'))
  call UnitAddAbility2(u,'A3DC')
  call SetPlayerAbilityAvailable(p,'A3DC',false)
endfunction

function Func1946 takes nothing returns nothing
  call SetUnitTurnSpeed(GetTriggerUnit(),GetUnitDefaultTurnSpeed(GetTriggerUnit()))
endfunction

function Func1947 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call Func0450(R2S(GetUnitX(u))+" : "+R2S(GetUnitY(u)))
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func1948 takes nothing returns nothing
  call SetPlayerAlliance(Player(0),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(1),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(2),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(3),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(4),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(5),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(6),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(7),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(8),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(9),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(10),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(11),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(12),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(13),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(14),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(1),ConvertAllianceType(6),true)
  call ClearTextMessages()
endfunction

function Func1949 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,99999)
  set TestAddAbilID=String2Id(LRR)
  call Func0450("Name of "+LRR+" is "+GetObjectName(TestAddAbilID))
endfunction

function Func1950 takes nothing returns nothing
  call RemoveUnit(GetEnumUnit())
endfunction

function Func1951 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1950)
  call KillGroup(g)
endfunction

function Func1952 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call Func0450(Id2String(GetUnitTypeId(u)))
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func1953 takes string s returns string
  local integer i=0
  local integer k=StringLength(s)
  local string ss=""
  local string s3
  loop
    set s3=SubString(s,i,i+1)
    if s3!=" " then
      set ss=ss+s3
    else
      return ss
    endif
    set i=i+1
    exitwhen i+1>k
  endloop
  return ss
endfunction

function testeffectsPointFn takes nothing returns nothing
  local string path=SubString(GetEventPlayerChatString(),4,99)
  local group g=GetAvailableGroup()
  local unit u
  call Func0450("PATH: ["+path+"]")
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call AddSpecialEffect(path,GetUnitX(u),GetUnitY(u))
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
endfunction

function Func1955 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),4,99)
  local string MLR=Func1953(s)
  local string G5E=SubString(s,StringLength(MLR)+1,99)
  local group g=GetAvailableGroup()
  local unit u
  call Func0450("ATTACH: ["+MLR+"]; PATH: ["+G5E+"]")
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call AddSpecialEffectTarget(G5E,u,MLR)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
endfunction

function Func1956 takes string s returns nothing
  local string MPR=""
  local string MQR=""
  local integer i=0
  local integer MSR=StringLength(s)
  local integer k=1
  loop
    exitwhen i>MSR
    if SubString(s,i,i+1)==" "then
      set k=k+1
    else
      if k==1 then
        set MPR=MPR+SubString(s,i,i+1)
      else
        set MQR=MQR+SubString(s,i,i+1)
      endif
    endif
    set i=i+1
  endloop
  set real018=S2R(MPR)
  set real019=S2R(MQR)
endfunction

function Func1957 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local string s=GetEventPlayerChatString()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call Func1956(SubString(s,5,999))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if IsUnitType(u,UNIT_TYPE_STRUCTURE)==false then
      call SetUnitX(u,real018)
      call SetUnitY(u,real019)
    else
      call SetUnitPosition(u,real018,real019)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
endfunction

function Func1958 takes string s returns nothing
  local string sr=""
  local string sg=""
  local string sb=""
  local string sa=""
  local integer i=0
  local integer k=StringLength(s)
  local integer MWR=1
  loop
    if SubString(s,i,i+1)==" "then
      set MWR=MWR+1
    else
      if MWR==1 then
        set sr=sr+SubString(s,i,i+1)
      elseif MWR==2 then
        set sg=sg+SubString(s,i,i+1)
      elseif MWR==3 then
        set sb=sb+SubString(s,i,i+1)
      else
        set sa=sa+SubString(s,i,i+1)
      endif
    endif
    set i=i+1
    exitwhen i>k
  endloop
  set integer459=S2I(sr)
  set integer460=S2I(sg)
  set integer461=S2I(sb)
  set tt_int1=S2I(sa)
endfunction

function Func1959 takes nothing returns nothing
  local integer r
  local integer g
  local integer b
  local integer a
  local string s=SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString()))
  local unit u
  local group gg=GetAvailableGroup()
  call Func1958(s)
  set r=integer459
  set g=integer460
  set b=integer461
  set a=tt_int1
  call echo("Colors: "+I2S(r)+" "+I2S(g)+" "+I2S(b)+" "+I2S(a))
  call GroupEnumUnitsSelected(gg,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(gg)
    exitwhen u==null
    call SetUnitVertexColor(u,r,g,b,a)
    call GroupRemoveUnit(gg,u)
  endloop
  call KillGroup(gg)
endfunction

function testBreakFn takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  set u=FirstOfGroup(g)
  loop
    exitwhen u==null
    call Break_Main(u,9)
    call GroupRemoveUnit(g,u)
    set u=FirstOfGroup(g)
  endloop
  call KillGroup(g)
endfunction

function Func1961 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  set u=FirstOfGroup(g)
  loop
    exitwhen u==null
    call UnitAddAbility2(u,'A300')
    call GroupRemoveUnit(g,u)
    set u=FirstOfGroup(g)
  endloop
  call KillGroup(g)
endfunction

function Func1962 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  set u=FirstOfGroup(g)
  loop
    exitwhen u==null
    call SetUnitPathing(u,true)
    call GroupRemoveUnit(g,u)
    set u=FirstOfGroup(g)
  endloop
  call KillGroup(g)
endfunction

function Func1963 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  set u=FirstOfGroup(g)
  loop
    exitwhen u==null
    call SetUnitPathing(u,false)
    call GroupRemoveUnit(g,u)
    set u=FirstOfGroup(g)
  endloop
  call KillGroup(g)
endfunction

function Func1964 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  local integer k=0
  local string s=SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString()))
  set i=Func0464(S2I(s),36)
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  set u=FirstOfGroup(g)
  if i>0 then
    loop
      exitwhen u==null
      set k=0
      loop
        exitwhen k==i
        set k=k+1
        call AddProjectile(CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u)+GetRandomReal(50,300)*Cos(GetRandomReal(0,6.14)),GetUnitY(u)+GetRandomReal(50,300)*Sin(GetRandomReal(0,6.14)),0),u,'h0CR',"Func3736",3000,false)
      endloop
      call GroupRemoveUnit(g,u)
      set u=FirstOfGroup(g)
    endloop
  endif
  call KillGroup(g)
endfunction

function Func1965 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  set u=FirstOfGroup(g)
  loop
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    set u=FirstOfGroup(g)
  endloop
  call KillGroup(g)
endfunction

function Func1966 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),7,99999)
  local real GVE=S2R(LRR)
  local group g=GetAvailableGroup()
  local unit u
  if GVE<=0 then
    set GVE=1
  endif
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  set u=FirstOfGroup(g)
  loop
    exitwhen u==null
    call SetUnitScale(u,GVE,0,0)
    call GroupRemoveUnit(g,u)
    set u=FirstOfGroup(g)
  endloop
endfunction

function Func1967 takes nothing returns nothing
  call KillUnit(GetEnumUnit())
endfunction

function Func1968 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1967)
  call KillGroup(g)
endfunction

function Func1969 takes nothing returns nothing
  call SetUnitTimeScale(GetEnumUnit(),tt_real1)
endfunction

function Func1970 takes nothing returns nothing
  local group g
  set tt_real1=S2R(SubString(GetEventPlayerChatString(),4,10))
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1969)
  call KillGroup(g)
endfunction

function Func1971 takes nothing returns nothing
  if DetailedSpellInfoDisplaying==false then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('TX1V'))
  else
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('TX1W'))
  endif
  set DetailedSpellInfoDisplaying=not DetailedSpellInfoDisplaying
endfunction

function Func1972 takes nothing returns nothing
  call TriggerEvaluate(trigger036)
endfunction

function Func1973 takes nothing returns nothing
  call FogEnable(IsFogEnabled()==false)
endfunction

function Func1974 takes real r returns string
  local real k
  local integer z
  local integer rz=R2I(r)
  local string s=""
  set z=rz/3600
  if z>=1 then
    set s=I2S(z)+" : "
  endif
  set rz=ModuloInteger(rz,3600)
  set z=rz/60
  set s=s+I2S(z)+" : "
  set z=ModuloInteger(rz,60)
  set s=s+I2S(z)
  return s
endfunction

function Func1975 takes nothing returns nothing
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,Func1974(TimerGetElapsed(GlobalTimer)))
endfunction

function Func1976 takes nothing returns nothing
  local group g
  local unit u2
  local integer k=S2I(SubString(GetEventPlayerChatString(),5,99))
  local integer PAR
  if k!=0 then
    set g=GetAvailableGroup()
    if SubString(GetEventPlayerChatString(),1,2)=="s" then
      set PAR=1
    elseif SubString(GetEventPlayerChatString(),1,2)=="a" then
      set PAR=2
    else
      set PAR=3
    endif
    call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      if PAR==1 then
        call SetHeroStr(u2,GetHeroStr(u2,false)+k,true)
      elseif PAR==2 then
        call SetHeroAgi(u2,GetHeroAgi(u2,false)+k,true)
      else
        call SetHeroInt(u2,GetHeroInt(u2,false)+k,true)
      endif
    endloop
    call KillGroup(g)
  endif
endfunction

function Func1977 takes nothing returns nothing
  local string LRR=SubString(GetEventPlayerChatString(),4,10)
  local group g
  local unit u
  local integer k
  local integer i=S2I(LRR)
  local boolean b=true
  if i<0 then
    set i=i*-1
    set b=false
  endif
  set g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  if CountUnitsInGroup(g)==0 then
    call GroupAddUnit(g,udg_Hero[1])
  endif
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call UnitShareVision(u,Player(i),b)
    call GroupRemoveUnit(g,u)
  endloop
  call BJDebugMsg("Shared vision: "+Func0457(b)+" for player "+I2S(i))
  call KillGroup(g)
  set u=null
endfunction

function Func1978 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),4,999)
  local integer k=Hex2Int(s)
  call Func0450("Add: "+s+" translated as "+I2S(k)+" or "+Int2Hex(k))
  if k==0 then
    set integer015=0
    set integer016=0
    return
  endif
  if integer015==0 then
    set integer015=k
  else
    set integer016=k
    call Func0450("GetSomeAddressForAbility: "+Int2Hex(integer015)+" & "+Int2Hex(integer016)+" = "+Int2Hex(GetSomeAddressForAbility(integer015,integer016)))
    set integer015=0
    set integer016=0
  endif
endfunction

function Func1979 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),4,999)
  local integer a=GetFrameItemAddress(s,0)
  local integer b=GetFrameTextAddress(s,0)
  local integer c=Func0236(s,0)
  if a==0 then
    call BJDebugMsg("Item frame: "+s+" - BAD!")
  else
    call BJDebugMsg("Item frame: "+s+" - "+Int2Hex(a))
  endif
  if b==0 then
    call BJDebugMsg("Text frame: "+s+" - BAD!")
  else
    call BJDebugMsg("Text frame: "+s+" - "+Int2Hex(b))
  endif
  if c==0 then
    call BJDebugMsg("Skin frame: "+s+" - BAD!")
  else
    call BJDebugMsg("Skin frame: "+s+" - "+Int2Hex(c))
  endif
endfunction

function Func1980 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),5,999)
  local string s1=Func1953(s)
  local string s2=SubString(s,StringLength(s1)+1,999)
  local integer a=GetFrameTextAddress(s1,0)
  call BJDebugMsg("Requested frame named ["+s1+"] and text = ["+s2+"]")
  if a==0 then
    call BJDebugMsg("Frame "+s1+" not found")
  else
    call Func0238(a,s2)
  endif
endfunction

function Func1981 takes boolean PGR,string a,string b returns string
  if(PGR)then
    return a
  endif
  return b
endfunction

function Func1982 takes nothing returns nothing
  local player PJR=GetTriggerPlayer()
  local unit PKR=GetEnumUnit()
  local string PLR=" '"+Id2String(GetUnitTypeId(PKR))+"'"
  set PLR=PLR+" "+GetUnitName(PKR)
  set PLR=PLR+" ("+R2SW(GetUnitX(PKR),0,0)+", "+R2SW(GetUnitY(PKR),0,0)
  set PLR=PLR+": "+R2SW(GetUnitFacing(PKR),0,0)+") "
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_HERO)," Hero","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_DEAD)," Dead","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_STRUCTURE)," Structure","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_GROUND)," Grnd","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_FLYING)," Air","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_ATTACKS_GROUND)," VsGrnd","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_ATTACKS_FLYING)," VsAir","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_MELEE_ATTACKER)," Melee","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_RANGED_ATTACKER)," Ranged","")
  set PLR=PLR+Func1981(IsUnitType(PKR,UNIT_TYPE_SUMMONED)," Summoned","")
  call DisplayTextToPlayer(PJR,0,0,PLR)
endfunction

function Func1983 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1982)
  call KillGroup(g)
endfunction

function Func1984 takes nothing returns nothing
  local player PJR=GetTriggerPlayer()
  local string PLR="Targ("+R2SW(GetCameraTargetPositionX(),0,0)
  set PLR=PLR+","+R2SW(GetCameraTargetPositionY(),0,0)
  set PLR=PLR+","+R2SW(GetCameraTargetPositionZ(),0,0)
  set PLR=PLR+")"
  set PLR=PLR+", Dist="+R2SW(GetCameraField(CAMERA_FIELD_TARGET_DISTANCE),0,0)
  set PLR=PLR+", FarZ="+R2SW(GetCameraField(CAMERA_FIELD_FARZ),0,0)
  set PLR=PLR+", AoA="+R2SW(GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)*bj_RADTODEG,0,2)
  set PLR=PLR+", FoV="+R2SW(GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW)*bj_RADTODEG,0,2)
  set PLR=PLR+", Roll="+R2SW(GetCameraField(CAMERA_FIELD_ROLL)*bj_RADTODEG,0,2)
  set PLR=PLR+", Rot="+R2SW(GetCameraField(CAMERA_FIELD_ROTATION)*bj_RADTODEG,0,2)
  call DisplayTextToPlayer(PJR,0,0,PLR)
endfunction

function Func1985 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),5,99)
  call Func0340(GetEnumUnit(),s)
endfunction

function Func1986 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  call ForGroup(g,function Func1985)
  call KillGroup(g)
endfunction

function Func1987 takes string s returns nothing
  local boolean refresh=s=="-r"
  local boolean PWR=s=="-cc"
  local boolean PYR=SubString(s,0,4)=="-gf "
  local boolean PZR=SubString(s,0,4)=="-gs "
  local boolean control=s=="-c" or s=="-control"
  local boolean blinktest=s=="-b"
  local boolean P1R=s=="-i"
  local boolean P2R=s=="-xy"
  local boolean SLE=s=="-remove"
  local boolean P3R=s=="-gi"
  local boolean P4R=s=="-fog"
  local boolean P5R=s=="-si"
  local boolean P6R=s=="-ru"
  local boolean P7R=s=="-b"
  local boolean P8R=s=="-br"
  local boolean P9R=s=="-path on"
  local boolean QVR=s=="-path off"
  local boolean QER=s=="-path"
  local boolean QXR=s=="-k"
  local boolean QOR=s=="-nerf"
  local string s7=SubString(s,0,7)
  local boolean QRR=s7=="-souls "
  local boolean QIR=s7=="-scale "
  local boolean QAR=s7=="-animb "
  local boolean QNR=s7=="-mytry "
  local boolean QBR=s7=="-setms "
  local boolean QCR=SubString(s,0,6)=="-anim "
  local string s5=SubString(s,0,5)
  local boolean QDR=s5=="-str " or s5=="-agi " or s5=="-int "
  local boolean QFR=s5=="-sxy "
  local boolean QGR=s5=="-sft "
  local boolean QHR=SubString(s,0,6)=="-tint "
  local boolean QJR=SubString(s,0,3)=="-o "
  local boolean QKR=s5=="-mis "
  local string s4=SubString(s,0,4)
  local boolean QLR=s4=="-ts "
  local boolean QMR=s4=="-et "
  local boolean QPR=s4=="-ep "
  local boolean QQR=s4=="-aa "
  local boolean QSR=s4=="-au "
  local boolean QTR=s4=="-sa "
  local boolean QUR=s4=="-at "
  local boolean QWR=s4=="-gt "
  local boolean QYR=s4=="-ra "
  local boolean QZR=s4=="-ga "
  local boolean Q_R=s4=="-gn "
  local boolean Q0R=s4=="-ha "
  local boolean Q1R=s4=="-ai "
  local boolean Q2R=s4=="-hp "
  local boolean Q3R=s4=="-mp "
  local boolean Q4R=s4=="-ar "
  local boolean Q5R=s4=="-ip "
  local boolean Q6R=s4=="-or "
  local boolean Q7R=s4=="-sv "
  local boolean Q8R=s=="-gud"
  local boolean Q9R=s=="-cams"
  call RunIfTrue("Func1986",QKR)
  call RunIfTrue("Func1984",Q9R)
  call RunIfTrue("Func1983",Q8R)
  call RunIfTrue("Func1976",QDR)
  call RunIfTrue("Func1980",QGR)
  call RunIfTrue("Func1977",Q7R)
  call RunIfTrue("Func1978",PZR)
  call RunIfTrue("Func1979",PYR)
  call RunIfTrue("Func1972",P6R)
  call RunIfTrue("Func1973",P4R)
  call RunIfTrue("Func1971",P5R)
  call RunIfTrue("Func1970",QLR)
  call RunIfTrue("Func1968",QXR)
  call RunIfTrue("Func1966",QIR)
  call RunIfTrue("Func1964",QRR)
  call RunIfTrue("Func1965",QER)
  call RunIfTrue("Func1962",P9R)
  call RunIfTrue("Func1963",QVR)
  call RunIfTrue("Func1961",blinktest)
  call RunIfTrue("testBreakFn",P8R)
  call RunIfTrue("Func1959",QHR)
  call RunIfTrue("Func1957",QFR)
  call RunIfTrue("testeffectsPointFn",QPR)
  call RunIfTrue("Func1955",QMR)
  call RunIfTrue("Func1952",P3R)
  call RunIfTrue("Func1951",SLE)
  call RunIfTrue("Func1947",P2R)
  call RunIfTrue("Func1940",P1R)
  call RunIfTrue("Func4689",PWR)
  call RunIfTrue("Func1948",control)
  call RunIfTrue("Func1938",Q6R)
  call RunIfTrue("Func1949",Q_R)
  call RunIfTrue("Func1934",QNR)
  call RunIfTrue("Func1936",refresh)
  call RunIfTrue("Func1932",QOR)
  call RunIfTrue("Func1930",QSR)
  call RunIfTrue("Func1929",QTR)
  call RunIfTrue("Func1912",Q2R)
  call RunIfTrue("Func1916",Q4R)
  call RunIfTrue("Func1914",Q3R)
  call RunIfTrue("Func1909",QCR)
  call RunIfTrue("Func1910",QAR)
  call RunIfTrue("Func1907",QUR)
  call RunIfTrue("Func1908",QWR)
  call RunIfTrue("Func1903",QBR)
  call RunIfTrue("Func1905",Q5R)
  call RunIfTrue("AddAbilsFunc",QQR)
  call RunIfTrue("Func1919",QYR)
  call RunIfTrue("Func1921",QZR)
  call RunIfTrue("Func1923",Q0R)
  call RunIfTrue("Func1927",QJR)
  call RunIfTrue("Func1925",Q1R)
  if P7R then
    call Func1987("-aa A300")
  endif
endfunction

function Func1988 takes nothing returns nothing
  local string s=GetEventPlayerChatString()
  local integer from=S2I(SubString(s,4,5))-1
  local integer to=S2I(SubString(s,6,7))-1
  local item i1
  local item i2
  local unit u
  if from<0 or from>5 or to<0 or to>5 or to==from or IsDead(udg_Hero[GetPlayerId(GetTriggerPlayer())])then
    return
  endif
  set u=udg_Hero[GetPlayerId(GetTriggerPlayer())]
  set i1=UnitItemInSlot(u,from)
  set i2=UnitItemInSlot(u,to)
  if GetItemTypeId(i1)==Item_Real[MixedWardsOrbs]or GetItemTypeId(i1)==Item_Real[MixedWardsSentry]or GetItemTypeId(i2)==Item_Real[MixedWardsOrbs]or GetItemTypeId(i2)==Item_Real[MixedWardsSentry]then
    return
  endif
  if i1!=null or i2!=null then
    if i1==null then
      call Func0766(u,UnitRemoveItemFromSlot(u,to),from)
    elseif i2==null then
      call Func0766(u,UnitRemoveItemFromSlot(u,from),to)
    else
      set i1=UnitRemoveItemFromSlot(u,from)
      set i2=UnitRemoveItemFromSlot(u,to)
      call Func0766(u,i2,from)
      call Func0766(u,i1,to)
    endif
  endif
  set u=null
  set i1=null
  set i2=null
endfunction

function Func1989 takes nothing returns nothing
  local real r=S2R(SubString(GetEventPlayerChatString(),5,9))*1.
  if boolean008 then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('TX2M'))
    return
  endif
  if StringLength(GetEventPlayerChatString())==4 then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('TX0J')+" "+I2S(R2I(GetCameraField(CAMERA_FIELD_TARGET_DISTANCE))))
  elseif r<=0 then
    call Func1556(GetTriggerPlayer(),1650.)
    call SaveReal(HeroStats,GetHandleId(GetTriggerPlayer()),'CAMD',1650.)
    call Error(GetTriggerPlayer(),GetObjectName('TX0K'))
  elseif r>0 and r<3 then
    call Func1556(GetTriggerPlayer(),1650.*r)
    call SaveReal(HeroStats,GetHandleId(GetTriggerPlayer()),'CAMD',1650.*r)
  elseif r>=1500 and r<=3000 then
    call Func1556(GetTriggerPlayer(),r)
    call SaveReal(HeroStats,GetHandleId(GetTriggerPlayer()),'CAMD',r)
  else
    call Error(GetTriggerPlayer(),GetObjectName('TX0L'))
  endif
endfunction

function Func1990 takes integer WVE returns string
  return"	 "+udg_Colors[WVE]+PlayerNames[WVE]+"|r: "+GetObjectName('n08P')+" "+I2S(integers031[WVE])+" "+GetObjectName('n08Q')+" "+I2S(integers032[WVE])+" "+GetObjectName('n08S')+" "+I2S(integers033[WVE])
endfunction

function Func1991 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  if IsSentinel(p)or IsObserver(p)then
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Sentinels[1])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Sentinels[2])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Sentinels[3])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Sentinels[4])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Sentinels[5])))
  endif
  if IsScourge(p)or IsObserver(p)then
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Scourges[1])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Scourges[2])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Scourges[3])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Scourges[4])))
    call DisplayTimedTextToPlayer(p,0,0,10,Func1990(GetPlayerId(Scourges[5])))
  endif
endfunction

function Func1992 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  call SaveBoolean(MHT,GetHandleId(p),'00UI',not LoadBoolean(MHT,GetHandleId(p),'00UI'))
  if LoadBoolean(MHT,GetHandleId(p),'00UI')then
    call DisplayTimedTextToPlayer(p,0,0,20,GetObjectName('TX0M'))
  else
    call DisplayTimedTextToPlayer(p,0,0,20,GetObjectName('TX0N'))
  endif
endfunction

function Func1993 takes nothing returns nothing
  local unit u=udg_Hero[GetPlayerId(GetTriggerPlayer())]
  call SaveInteger(HY,GetHandleId(u),449,0)
  call UnitRemoveAbility(u,'B0CJ')
  call UnitRemoveAbility(u,'A1HN')
  call UnitRemoveAbility(u,'A1IP')
  set u=null
endfunction

function Func1994 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local integer h=GetHandleId(p)
  call SaveBoolean(HeroStats,h,'SET0',LoadBoolean(HeroStats,h,'SET0')==false)
  if LoadBoolean(HeroStats,h,'SET0')==false then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0B'))
  else
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0C'))
  endif
endfunction

function Func1995 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local integer h=GetHandleId(p)
  call SaveBoolean(HeroStats,h,'SET2',LoadBoolean(HeroStats,h,'SET2')==false)
  if LoadBoolean(HeroStats,h,'SET2')==false then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0H'))
  else
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX0I'))
  endif
endfunction

function Func1996 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local integer h=GetHandleId(p)
  call SaveBoolean(HeroStats,h,'SET3',LoadBoolean(HeroStats,h,'SET3')==false)
  if LocalPlayer==p then
    call ToggleClickHelper(LoadBoolean(HeroStats,h,'SET3'))
  endif
  if LoadBoolean(HeroStats,h,'SET3')==false then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX32'))
  else
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('TX31'))
  endif
endfunction

function Func1997 takes nothing returns nothing
  local unit u=LoadUnitHandle(HY,GetHandleId(GetTriggeringTrigger()),0)
  call UnitRemoveAbility(u,'Avul')
  call DamageTarget(u,u,1,100)
  call DamageTarget(u,u,2,100)
  call DamageTarget(u,u,3,100)
endfunction

function Func1998 takes unit u returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func1997))
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  if IsSentinel(GetOwningPlayer(u))then
    call UnitShareVision(u,Scourges[0],true)
    call CreateFogModifierRadius(Scourges[0],FOG_OF_WAR_VISIBLE,0,0,99999,true,true)
  else
    call UnitShareVision(u,Sentinels[0],true)
    call CreateFogModifierRadius(Sentinels[0],FOG_OF_WAR_VISIBLE,0,0,99999,true,true)
  endif
  set t=null
endfunction

function Func1999 takes boolean SHR returns nothing
  local integer i=1
  local integer SJR=0
  if SHR then
    loop
      if LoadBoolean(UTable,GetPlayerId(Sentinels[i]),'00GG')or(GetPlayerSlotState(Sentinels[i])==PLAYER_SLOT_STATE_LEFT and GetPlayerController(Sentinels[i])==MAP_CONTROL_USER)then
        set SJR=SJR+1
      endif
      set i=i+1
      exitwhen i>5
    endloop
  else
    loop
      if LoadBoolean(UTable,GetPlayerId(Scourges[i]),'00GG')or(GetPlayerSlotState(Scourges[i])==PLAYER_SLOT_STATE_LEFT and GetPlayerController(Scourges[i])==MAP_CONTROL_USER)then
        set SJR=SJR+1
      endif
      set i=i+1
      exitwhen i>5
    endloop
  endif
  if SHR and SJR>=Func0544(Force_Elfs)then
    call DisplayTimedTextToForceEx(AllPlayers,10,GetObjectName('TX1H'))
    call Func1998(unit052)
  elseif SHR==false and SJR>=Func0544(Force_Unds)then
    call DisplayTimedTextToForceEx(AllPlayers,10,GetObjectName('TX1I'))
    call Func1998(unit099)
  endif
endfunction

function Func2000 takes nothing returns nothing
  call Func1999(IsSentinel(tt_player1))
endfunction

function Func2001 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local boolean SLR=LoadBoolean(UTable,GetPlayerId(p),'00GG')
  local integer WVE=GetPlayerId(p)
  if(GameStartsTime==0 or TimerGetElapsed(GlobalTimer)-GameStartsTime<900)and IsL1ch==false then
    call DisplayTimedTextToPlayer(p,0,0,5,GetObjectName('TX1J'))
    return
  endif
  if LoadReal(UTable,WVE,'00GG')+60>TimerGetElapsed(GlobalTimer)then
    call DisplayTimedTextToPlayer(p,0,0,5,GetObjectName('TX1G'))
  else
    call SaveReal(UTable,WVE,'00GG',TimerGetElapsed(GlobalTimer))
    call SaveBoolean(UTable,WVE,'00GG',not SLR)
    if SLR==false then
      call Traffic_RegisterData("FF+",WVE)
      if IsSentinel(p)then
        call DisplayTimedTextToForceEx(Force_Elfs,10,str_replace(GetObjectName('TX1E'),"$player",udg_Colors[WVE]+PlayerNames[WVE]+"|r"))
      else
        call DisplayTimedTextToForceEx(Force_Unds,10,str_replace(GetObjectName('TX1E'),"$player",udg_Colors[WVE]+PlayerNames[WVE]+"|r"))
      endif
      call Func1999(IsSentinel(p))
    else
      call Traffic_RegisterData("FF-",WVE)
      if IsSentinel(p)then
        call DisplayTimedTextToForceEx(Force_Elfs,10,str_replace(GetObjectName('TX1F'),"$player",udg_Colors[WVE]+PlayerNames[WVE]+"|r"))
      else
        call DisplayTimedTextToForceEx(Force_Unds,10,str_replace(GetObjectName('TX1F'),"$player",udg_Colors[WVE]+PlayerNames[WVE]+"|r"))
      endif
    endif
  endif
endfunction

function Func2002 takes nothing returns nothing
  local integer SPR=LoadInteger(UTable,GetPlayerId(GetTriggerPlayer()),'name')
  local integer i=S2I(SubString(GetEventPlayerChatString(),6,8))
  if i>2 then
    set i=0
  elseif i<0 then
    set i=0
  endif
  if StringLength(GetEventPlayerChatString())>6 then
    if i==0 then
      set SPR=2
    elseif i==1 then
      set SPR=0
    else
      set SPR=1
    endif
  endif
  if SPR==0 then
    call SaveInteger(UTable,GetPlayerId(GetTriggerPlayer()),'name',1)
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,8,GetObjectName('TX1K'))
  elseif SPR==1 then
    call SaveInteger(UTable,GetPlayerId(GetTriggerPlayer()),'name',2)
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,8,GetObjectName('TX1L'))
  else
    call SaveInteger(UTable,GetPlayerId(GetTriggerPlayer()),'name',0)
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,8,GetObjectName('TX1M'))
  endif
  call Func1010(GetTriggerPlayer())
endfunction

function Func2003 takes integer i,integer k returns nothing
  local integer oldprotection
  if integer023==-1 then
    call AddNewOffsetToRestore((GameDLL/4+0x55176C/4)*4,Memory[GameDLL/4+0x55176C/4])
    call AddNewOffsetToRestore((GameDLL/4+0x551770/4)*4,Memory[GameDLL/4+0x551770/4])
    call AddNewOffsetToRestore((GameDLL/4+0x553600/4)*4,Memory[GameDLL/4+0x553600/4])
  endif
  set integer023=k
  set oldprotection=ChangeOffsetProtection((GameDLL/4+0x55176C/4)*4,4,0x40)
  set Memory[GameDLL/4+0x55176C/4]=0x553c8d00+0x40000000
  call ChangeOffsetProtection((GameDLL/4+0x55176C/4)*4,4,oldprotection)
  set oldprotection=ChangeOffsetProtection((GameDLL/4+0x551770/4)*4,4,0x40)
  set Memory[GameDLL/4+0x551770/4]=i
  call ChangeOffsetProtection((GameDLL/4+0x551770/4)*4,4,oldprotection)
endfunction

function Func2004 takes nothing returns nothing
  local integer i=S2I(SubString(GetEventPlayerChatString(),5,8))
  local integer k
  if GameVersion!=0x26a then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"Latency change only supported by WC3 v1.26")
    return
  endif
  if GetEventPlayerChatString()=="-lat"then
    if integer023==-1 then
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"Latency hasn't been changed yet")
    else
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"Current latency - "+I2S(integer023))
    endif
    return
  endif
  if PlayerModeTyper==GetTriggerPlayer()and i<=100 and i>=0 then
    call DisplayTimedTextToForceEx(AllPlayers,10,"Latency changed to "+I2S(i))
    set k=i
    if i==0 then
      set i=11
    elseif i<=25 then
      set i=25
    elseif i<100 then
      set i=50
    endif
    call Func2003(i,k)
  endif
endfunction

function Func2005 takes integer i returns nothing
  if GameVersion==0x26a then
    set Memory[Memory[Memory[GameDLL/4+0xAB6214/4]/4+0x18/4]/4+0x7D0/4]=i
  endif
endfunction

function Func2006 takes nothing returns nothing
  local integer i=S2I(SubString(GetEventPlayerChatString(),4,7))
  set i=IMaxIF(Func0464(i,255),0)
  if LocalPlayer==GetTriggerPlayer()then
    call Func2005(i)
  endif
endfunction

function Func2007 takes nothing returns nothing
  local string s=StringCase(GetEventPlayerChatString(),false)
  local boolean SYR=s=="-random"or s=="-random int"or s=="-random agi"or s=="-random str"
  local boolean SZR=s=="-repick"
  local boolean S_R=s=="-gameinfo"
  local boolean S0R=s=="-unstuck"
  local boolean ma=s=="-matchup"or s=="-ma"
  local boolean ms=s=="-movespeed"or s=="-ms"
  local boolean S1R=s=="-hpbar"
  local boolean S3R=s=="-ws"
  local boolean S4R=s=="-msa"
  local boolean S5R=s=="-sta"
  local boolean S6R=s=="-disablehelp"
  local boolean S7R=s=="-enablehelp"
  local boolean cs=s=="-creepstats"or s=="-cs"
  local boolean S8R=s=="-csa"
  local boolean S9R=s=="-cson"or s=="-csoff"
  local boolean TVR=s=="-hidemsg"
  local boolean TER=s=="-showmsg"
  local boolean TXR=s=="-weather snow"or s=="-weather rain"or s=="-weather off"or s=="-weather random"or s=="-weather wind"or s=="-weather moonlight"
  local boolean TOR=s=="-showdeny"or s=="-hidedeny"
  local boolean TRR=s=="-denyinfo"or s=="-di"
  local boolean TIR=s=="-don"or s=="-deathon"or s=="-doff"or s=="-deathoff"
  local boolean TAR=s=="-hhn"or s=="-hideheronames"
  local boolean TNR=s=="-mute"
  local boolean TBR=s=="-afk"
  local boolean TCR=s=="-apm"
  local boolean TDR=s=="-clear" or s=="-c"
  local boolean VZO=s=="-courier"
  local boolean TFR=s=="-invokelist"or s=="-il"
  local boolean TGR=s=="-rolloff"
  local boolean THR=s=="-rollon"
  local boolean FXE=s=="-bonus"
  local boolean rh=s=="-rollhero"or s=="-rh"
  local boolean ii=s=="-ii"or s=="-iteminfo"
  local boolean TJR=s=="-unlock"
  local boolean ds=s=="-disableselection"or s=="-ds"
  local boolean es=s=="-enableselection"or s=="-es"
  local boolean TKR=s=="-sleep"
  local boolean TLR=s=="-calm"
  local boolean st=s=="-st"
  local boolean ui=s=="-ui"
  local boolean TMR=s=="-d"
  local boolean TPR=s=="-md"
  local boolean TQR=s=="-dch"
  local boolean TSR=s=="-hold"
  local boolean TTR=s=="-gg" or s=="!ff"
  local boolean TUR=s=="-cap"
  local boolean TWR=s=="-t"
  local boolean cm=SubString(s,0,3)=="-cm"
  local boolean TYR=SubString(s,0,4)=="-cam"
  local boolean TZR=SubString(s,0,4)=="-si "
  local boolean T_R=SubString(s,0,4)=="-lat"
  local boolean T0R=SubString(s,0,5)=="-swap"
  local boolean T1R=SubString(s,0,6)=="-names"
  local boolean T2R=SubString(s,0,6)=="-music"
  local boolean T3R=SubString(s,0,6)=="-water"
  local boolean T4R=SubString(s,0,7)=="-switch"or s=="-ok"or s=="-no"
  local boolean T5R=SubString(s,0,8)=="-kickafk"
  local boolean T6R=SubString(s,0,5)=="-roll"and s!="-rollhero"
  local boolean T7R=SubString(s,0,9)=="-terrain "
  local boolean T8R=SubString(s,0,9)=="-rickroll"
  local boolean T9R=SubString(s,0,4)=="-fd "
  call RunIfTrue("Func0353",S3R)
  call RunIfTrue("Func4682",S1R)
  call RunIfTrue("Func2006",T9R)
  call RunIfTrue("Func1975",TWR)
  call RunIfTrue("Func2316",TUR)
  call RunIfTrue("Func2004",T_R)
  call RunIfTrue("Func2001",TTR)
  call RunIfTrue("Func2002",T1R)
  call RunIfTrue("Func1994",TPR)
  call RunIfTrue("Func1995",TSR)
  call RunIfTrue("Func1996",TQR)
  call RunIfTrue("Func1993",TMR)
  call RunIfTrue("Func1992",ui)
  call RunIfTrue("Func2091",S5R)
  call RunIfTrue("Func1989",TYR)
  call RunIfTrue("Func2018",S_R)
  call RunIfTrue("Func2053",TVR)
  call RunIfTrue("Func2054",TER)
  call RunIfTrue("Func2057",TXR)
  call RunIfTrue("Func2063",TAR)
  call RunIfTrue("Func2064",TNR)
  call RunIfTrue("Func2071",TBR)
  call RunIfTrue("Func2066",TCR)
  call RunIfTrue("RollChatCmd",T6R)
  call RunIfTrue("Func2067",TDR)
  call RunIfTrue("Func2079",TFR)
  call RunIfTrue("Func2061",TGR)
  call RunIfTrue("Func2062",THR)
  call RunIfTrue("Func2081",T2R)
  call RunIfTrue("Func2084",T3R)
  call RunIfTrue("Func2059",rh)
  call RunIfTrue("Func2009",T8R)
  call RunIfTrue("Func2090",st)
  call RunIfTrue("Func1991",S8R)
  call RunIfTrue("Func2121",T7R)
  call RunIfTrue("Func1988",TZR)
  call RunIfTrue("Func2012",SYR)
  call RunIfTrue("Func2016",SZR)
  call RunIfTrue("Func2028",T0R)
  call RunIfTrue("Func2032",S0R)
  call RunIfTrue("Func2034",ma)
  call RunIfTrue("Func2037",ms)
  call RunIfTrue("Func2038",S4R)
  call RunIfTrue("Func2039",S6R)
  call RunIfTrue("Func2040",S7R)
  call RunIfTrue("Func2041",cs)
  call RunIfTrue("Func2042",S9R)
  call RunIfTrue("Func2051",TOR)
  call RunIfTrue("Func2052",TRR)
  call RunIfTrue("Func2049",TIR)
  call RunIfTrue("Func2070",T5R)
  call RunIfTrue("Func2078",VZO)
  call RunIfTrue("Func2060",cm)
  call RunIfTrue("Func2085",FXE)
  call RunIfTrue("Func2112",T4R)
  call RunIfTrue("Func2065",ii)
  call RunIfTrue("Func2045",TJR)
  call RunIfTrue("Func2043",ds)
  call RunIfTrue("Func2044",es)
  call RunIfTrue("ChatCommand_Sleep",TKR)
  call RunIfTrue("ChatCommand_Calm",TLR)
endfunction

function Func2008 takes nothing returns nothing
  if SubString(GetEventPlayerChatString(),0,1)=="-" then
    call Func2007()
    if boolean014 then
      call Func1987(StringCase(GetEventPlayerChatString(),false))
    endif
  endif
endfunction

function Func2009 takes nothing returns nothing
  local integer i=S2I(SubString(GetEventPlayerChatString(),10,StringLength(GetEventPlayerChatString())))
  local integer WVE=GetPlayerId(GetTriggerPlayer())
  set integers122[WVE]=integers122[WVE]+1
  if integers122[WVE]>10 then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0DQ'))
    return
  endif
  if i<1 or i>8 then
    set i=GetRandomInt(1,8)
  endif
  if i==1 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna give you up")
  elseif i==2 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna let you down")
  elseif i==3 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna run around")
  elseif i==4 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna desert you")
  elseif i==5 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna make you cry")
  elseif i==6 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna say goodbye")
  elseif i==7 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna tell a lie")
  elseif i==8 then
    call DisplayTimedTextToForceEx(AllPlayers,5,udg_Colors[WVE]+(PlayerNames[WVE])+"|r's never gonna hurt you")
  endif
endfunction

function Func2010 takes nothing returns boolean
  if boolean095==false or HasUsedRandom[GetPlayerId(TempPlayer_OnRandom)]or boolean063==false or booleans007[GetPlayerId(TempPlayer_OnRandom)]then
    return false
  endif
  if boolean097==false then
    if(udg_Hero[GetPlayerId(TempPlayer_OnRandom)]!=null or booleans010[GetPlayerId(TempPlayer_OnRandom)])then
      return false
    endif
  else
    if booleans011[GetPlayerId(TempPlayer_OnRandom)]then
      return false
    endif
  endif
  return true
endfunction

function Func2011 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local player p=(LoadPlayerHandle(HY,(h),54))
  local string s=(LoadStr(HY,(h),146))
  set TempPlayer_OnRandom=p
  if Func2010()then
    set HasUsedRandom[GetPlayerId(p)]=true
    if s=="-random int"then
      call GetRandomHeroByAttr(p,2)
      call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
    elseif s=="-random str"then
      call GetRandomHeroByAttr(p,1)
      call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
    elseif s=="-random agi"then
      call GetRandomHeroByAttr(p,3)
      call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
    else
      call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-50)
      call GetRandomHeroByAttr(p,0)
    endif
  else
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n079'))
  endif
  set t=null
  set p=null
  return false
endfunction

function Func2012 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local trigger t
  set TempPlayer_OnRandom=p
  if Func2010()and booleans012[GetPlayerId(p)]==false then
    set booleans012[GetPlayerId(p)]=true
    call TechAll_ForPlayer(p)
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n07A'))
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,0.0,false)
    call TriggerAddCondition(t,Condition(function Func2011))
    call SavePlayerHandle(HY,(GetHandleId(t)),54,(p))
    call SaveStr(HY,(GetHandleId(t)),146,(StringCase(GetEventPlayerChatString(),false)))
  endif
  set t=null
endfunction

function Func2013 takes nothing returns boolean
  local unit u
  local player p=GetTriggerPlayer()
  if boolean168 or mode_TT then
    call Error(p,GetObjectName('n030'))
    return false
  endif
  if Repick_Allowed==false then
    if boolean157==false and boolean093==false and boolean154==false and boolean114==false and boolean158==false and boolean159==false and boolean097==false and boolean086==false then
      call DisplayTimedTextToPlayer(p,0,0,10,"-repick "+GetObjectName('n05B'))
    endif
    return false
  endif
  if(booleans007[GetPlayerId(p)]or udg_Hero[GetPlayerId(p)]==null or Mode_DM or boolean093 or boolean097)then
    return false
  endif
  if(boolean099)then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n050'))
    return false
  endif
  if(GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)<integer074)then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n059'))
    return false
  endif
  if boolean067 and GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)<integer074+250 then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n05U'))
    return false
  endif
  set u=udg_Hero[GetPlayerId(p)]
  if GetUnitState(u,UNIT_STATE_MANA)!=GetUnitState(u,UNIT_STATE_MAX_MANA)or GetUnitState(u,UNIT_STATE_LIFE)!=GetUnitState(u,UNIT_STATE_MAX_LIFE)then
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n05J'))
    set u=null
    return false
  endif
  set u=null
  return true
endfunction

function Func2014 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local integer WVE
  local string s
  if(IsUnitType(u,UNIT_TYPE_HERO))then
    if(GetUnitTypeId(u)=='U006' or GetUnitTypeId(u)=='U007')then
      call ExecuteFunc("Func1068")
    elseif GetUnitTypeId(u)=='U008' or GetUnitTypeId(u)=='E015' then
      set unit035=u
      call ExecuteFunc("Func3620")
    endif
    call DisplayTimedTextToForceEx(GetForceOfEnemies(GetTriggerPlayer()),10.00,GetObjectName('n05L')+" "+GetUnitName(u)+".")
    set WVE=GetPlayerId(GetTriggerPlayer())
    set s=str_replace(GetObjectName('TX2N'),"%p",udg_Colors[WVE]+PlayerNames[WVE]+"|r")
    set s=str_replace(s,"%h",GetUnitName(u))
    call DisplayTimedTextToForceEx(GetForceOfEnemies(GetTriggerPlayer()),10.00,s)
  elseif IsUnitSpiritBear(u)then
    call RemoveUnit(u)
  endif
  set u=null
endfunction

function Func2015 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local integer WVE=GetPlayerId(p)
  local group g=GetAvailableGroup()
  local integer i
  local integer k
  local location WLR
  local integer z
  local integer m
  local integer n
  local unit d
  local location WMR=GetRectCenter(gg_rct_Allpick_Sent)
  local location WPR=GetRectCenter(gg_rct_Allpick_Scourge)
  set bj_groupEnumOwningPlayer=p
  call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
  call ForGroup(g,function Func2014)
  call KillGroup(g)
  if(IsSentinel(p))then
    set i=FirstHeroIndexid
    set k=LastScourgeHeroIndexid
    set WLR=GetRectCenter(rect022)
  else
    set i=FirstSentinelHeroIndexid
    set k=LastHeroIndexid
    set WLR=GetRectCenter(rect021)
  endif
  if boolean065 then
    if(GetRandomInt(1,2)==1)then
      set i=FirstHeroIndexid
      set k=LastScourgeHeroIndexid
    else
      set i=FirstSentinelHeroIndexid
      set k=LastHeroIndexid
    endif
  endif
  set d=LoadUnitHandle(HY,GetHandleId(p),147)
  if d!=null and GetUnitTypeId(d)=='e00C' then
    call RemoveUnit(d)
  endif
  set d=null
  call AdjustPlayerStateBJ(-integer074,p,PLAYER_STATE_RESOURCE_GOLD)
  set booleans007[WVE]=true
  if HasUsedRandom[WVE]then
    call Func0548(GetUnitTypeId(udg_Hero[WVE]))
  endif
  call Func0669(udg_Hero[WVE])
  set udg_Hero[WVE]=null
  if boolean067 then
    call DisplayTimedTextToPlayer(p,0,0,60,GetObjectName('N05Y'))
    set m=FirstHeroIndexid
    set n=LastHeroIndexid
    call CreateUnitAtLoc(p,'n00C',WMR,bj_UNIT_FACING)
    call CreateUnitAtLoc(p,'n00C',WPR,bj_UNIT_FACING)
    loop
      exitwhen m>n
      if b_isHeroPicked[m]==false then
        call SetPlayerTechMaxAllowed(p,HeroID[m],1)
      endif
      set m=m+1
    endloop
    call RemoveLocation(WMR)
    call RemoveLocation(WPR)
  else
    loop
      set z=GetRandomInt(i,k)
      if(b_isHeroPicked[z]==false)then
        set b_isHeroPicked[z]=true
        set udg_Hero[WVE]=CreateUnitAtLoc(p,HeroID[z],WLR,bj_UNIT_FACING)
        call TechHeroForAll(HeroID[z])
      endif
      exitwhen udg_Hero[WVE]!=null
    endloop
  endif
  call RemoveLocation(WLR)
  call RemoveLocation(WMR)
  call RemoveLocation(WPR)
  set WLR=null
  set WMR=null
  set WPR=null
endfunction

function Func2016 takes nothing returns nothing
  if Func2013()then
    call Func2015()
  endif
endfunction

function Func2017 takes string s returns nothing
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20,s)
endfunction

function Func2018 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local string s="|c006699CC"
  if Mode_DM then
    call Func2017(s+"Death Match"+"|r:				"+GetObjectName('n06Z'))
    call Func2017("															"+GetObjectName('n06Y')+" "+I2S(Func0464(LastScourgeHeroIndexid,LastHeroIndexid-FirstSentinelHeroIndexid+1))+" "+GetObjectName('n07C'))
  endif
  if boolean086 then
    call Func2017(s+"Mirror Match"+"|r:			 "+GetObjectName('n06W'))
  endif
  if boolean067 then
    call Func2017(s+"All Pick"+"|r:								 "+GetObjectName('n06V'))
  endif
  if boolean154 then
    call Func2017(s+"Random Draft"+"|r:								 "+GetObjectName('n072'))
  endif
  if boolean157 then
    call Func2017(s+"Single Draft"+"|r:								 "+GetObjectName('n07G'))
  endif
  if boolean065 then
    call Func2017(s+"All Random"+"|r:					"+GetObjectName('n071'))
  endif
  if boolean093 then
    call Func2017(s+"Vote Random"+"|r:				 "+GetObjectName('n074'))
  endif
  if boolean066 then
    call Func2017(s+"Team Random"+"|r:		 "+GetObjectName('n06M'))
  endif
  if boolean097 then
    call Func2017(s+"Reverse"+"|r:								 "+GetObjectName('n073'))
  endif
  if boolean084 then
    call Func2017(s+"Shuffle Players"+"|r:		 "+GetObjectName('n07H'))
  endif
  if boolean088 then
    call Func2017(s+"All Agility"+"|r:						 "+GetObjectName('n07L'))
  endif
  if boolean090 then
    call Func2017(s+"All Strength"+"|r:				 "+GetObjectName('n07K'))
  endif
  if boolean089 then
    call Func2017(s+"All Intelligence"+"|r:		"+GetObjectName('n07J'))
  endif
  if boolean161 then
    call Func2017(s+"Range Only"+"|r:		"+GetObjectName('n0G4'))
  endif
  if boolean160 then
    call Func2017(s+"Melee Only"+"|r:		"+GetObjectName('n0G5'))
  endif
  if boolean087 then
    call Func2017(s+"Duplicate Mode"+"|r:	 "+GetObjectName('n07I'))
  endif
  if boolean068 then
    call Func2017(s+"Item Drop"+"|r:						 "+GetObjectName('n07F'))
  endif
  if boolean070 then
    call Func2017(s+"No Powerups"+"|r:				"+GetObjectName('n07M'))
  endif
  if boolean071 then
    call Func2017(s+"Super Creeps"+"|r:				"+GetObjectName('n07N'))
    call Func2017("														 "+GetObjectName('n07O'))
  endif
  if boolean069 then
    call Func2017(s+"Easy Mode"+"|r:					 "+GetObjectName('n07T'))
  endif
  if boolean091 then
    call Func2017(s+"Same Hero"+"|r:					 "+GetObjectName('n07U')+" "+(PlayerNames[GetPlayerId(PlayerModeTyper)])+"|r"+" "+GetObjectName('n07W'))
  endif
  if boolean162 then
    call Func2017(s+"Only Mid"+"|r:					 "+GetObjectName('n080'))
  endif
  if boolean164 then
    call Func2017(s+"No Bot"+"|r:					 "+GetObjectName('n07V'))
  endif
  if boolean166 then
    call Func2017(s+"No Mid"+"|r:					 "+GetObjectName('n07S'))
  endif
  if boolean167 then
    call Func2017(s+"No Top"+"|r:					 "+GetObjectName('n07R'))
  endif
  if boolean107 then
    call Func2017(s+"No Swap"+"|r:					 "+GetObjectName('n07X'))
  endif
  if boolean107 then
    call Func2017(s+"No Repick"+"|r:					 "+GetObjectName('n07Q'))
  endif
  if boolean109 then
    call Func2017(s+"Pool Mode"+"|r:					 "+GetObjectName('n07Y'))
  endif
  if boolean169 then
    call Func2017(s+"Mini Heroes"+"|r:					 "+GetObjectName('n0EC'))
  endif
  if boolean170 then
    call Func2017(s+"Fast Respawn"+"|r:					 "+GetObjectName('n0DP'))
  endif
  if boolean115 then
    call Func2017(s+"Captains Mode"+"|r:					 "+GetObjectName('n0ED'))
  endif
  if boolean114 then
    call Func2017(s+"Captains Draft"+"|r:					 "+GetObjectName('n0GF'))
  endif
  if boolean172 then
    call Func2017(s+"Capture Point"+"|r:					 "+GetObjectName('n0KH'))
  endif
  if boolean171 then
    call Func2017(s+"Zoom Mode"+"|r:					 "+GetObjectName('n0KI'))
  endif
  if boolean008 then
    call Func2017(s+"No camera settings"+"|r:					 "+GetObjectName('TX2L'))
  endif
endfunction

function Func2019 takes nothing returns nothing
  if GetUnitTypeId(GetEnumUnit())=='n004' then
    call RemoveUnit(GetEnumUnit())
  endif
  if GetUnitTypeId(GetEnumUnit())=='n036' then
    call KillUnit(GetEnumUnit())
    call RemoveUnit(GetEnumUnit())
  endif
endfunction

function Func2020 takes unit u1,unit u2 returns nothing
  local player p1=GetOwningPlayer(u1)
  local player p2=GetOwningPlayer(u2)
  local integer WUR=GetPlayerId(p1)
  local integer WWR=GetPlayerId(p2)
  local unit WYR
  local group g
  local item it
  local integer WOX
  local integer i
  if(HasUsedRandom[WUR]and GetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD)<100)or(HasUsedRandom[WWR]and GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)<100)then
    return
  endif
  set WYR=CreateUnit(p1,'e01F',0,0,0)
  if HasUsedRandom[WUR]and booleans007[WUR]==false and integers123[WUR]==0 then
    set integers123[WUR]=1
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD)-100)
  endif
  if HasUsedRandom[WWR]and booleans007[WWR]==false and integers123[WWR]==0 then
    set integers123[WWR]=1
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)-100)
  endif
  set WOX=ReliableGold[WUR]
  set ReliableGold[WUR]=ReliableGold[WWR]
  set ReliableGold[WWR]=WOX
  call DisableTrigger(t_manipulateitem)
  if GetUnitAbilityLevel(u1,'A03E')>0 then
    set unit036=u1
    set unit037=u2
    call ExecuteFunc("Func3619")
  elseif GetUnitAbilityLevel(u2,'A03E')>0 then
    set unit036=u2
    set unit037=u1
    call ExecuteFunc("Func3619")
  endif
  call FlushChildHashtable(HY,800+GetPlayerId(p1))
  call FlushChildHashtable(HY,800+GetPlayerId(GetOwningPlayer(u2)))
  set g=GetAvailableGroup()
  set bj_groupEnumOwningPlayer=p1
  call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
  call ForGroup(g,function Func2019)
  call KillGroup(g)
  set g=GetAvailableGroup()
  set bj_groupEnumOwningPlayer=p2
  call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
  call ForGroup(g,function Func2019)
  call KillGroup(g)
  if GetUnitAbilityLevel(u1,'A0A5')>0 then
    call UnitResetCooldownFX(u1)
  endif
  if GetUnitAbilityLevel(u2,'A0A5')>0 then
    call UnitResetCooldownFX(u2)
  endif
  if GetUnitAbilityLevel(u2,'A2UO')>0 then
    call SetPlayerAbilityAvailable(p1,'AHfa',true)
    call SetPlayerAbilityAvailable(p2,'AHfa',false)
  endif
  if GetUnitAbilityLevel(u1,'A2UO')>0 then
    call SetPlayerAbilityAvailable(p2,'AHfa',true)
    call SetPlayerAbilityAvailable(p1,'AHfa',false)
  endif
  call SetUnitOwner(u2,p1,true)
  call SetUnitOwner(u1,p2,true)
  set udg_Hero[WUR]=u2
  set udg_Hero[WWR]=u1
  call Func1009(p1)
  call Func1009(p2)
  call UnitAddItem(WYR,UnitItemInSlot(u2,0))
  call UnitAddItem(WYR,UnitItemInSlot(u2,1))
  call UnitAddItem(WYR,UnitItemInSlot(u2,2))
  call UnitAddItem(WYR,UnitItemInSlot(u2,3))
  call UnitAddItem(WYR,UnitItemInSlot(u2,4))
  call UnitAddItem(WYR,UnitItemInSlot(u2,5))
  set it=UnitItemInSlot(u1,0)
  if it!=null then
    call SetItemPlayer(it,p1,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u2,it)
  endif
  set it=UnitItemInSlot(u1,1)
  if it!=null then
    call SetItemPlayer(it,p1,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u2,it)
  endif
  set it=UnitItemInSlot(u1,2)
  if it!=null then
    call SetItemPlayer(it,p1,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u2,it)
  endif
  set it=UnitItemInSlot(u1,3)
  if it!=null then
    call SetItemPlayer(it,p1,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u2,it)
  endif
  set it=UnitItemInSlot(u1,4)
  if it!=null then
    call SetItemPlayer(it,p1,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u2,it)
  endif
  set it=UnitItemInSlot(u1,5)
  if it!=null then
    call SetItemPlayer(it,p1,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u2,it)
  endif
  set it=UnitItemInSlot(WYR,0)
  if it!=null then
    call SetItemPlayer(it,p2,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u1,it)
  endif
  set it=UnitItemInSlot(WYR,1)
  if it!=null then
    call SetItemPlayer(it,p2,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u1,it)
  endif
  set it=UnitItemInSlot(WYR,2)
  if it!=null then
    call SetItemPlayer(it,p2,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u1,it)
  endif
  set it=UnitItemInSlot(WYR,3)
  if it!=null then
    call SetItemPlayer(it,p2,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u1,it)
  endif
  set it=UnitItemInSlot(WYR,4)
  if it!=null then
    call SetItemPlayer(it,p2,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u1,it)
  endif
  set it=UnitItemInSlot(WYR,5)
  if it!=null then
    call SetItemPlayer(it,p2,false)
    call SetItemUserData(it,1)
    call UnitAddItem(u1,it)
  endif
  call RemoveUnit(WYR)
  call EnableTrigger(t_manipulateitem)
  set it=FindItemOfType(u1,Item_Real[integer304])
  if IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER)and it!=null then
    call UnitRemoveItem(u1,it)
  endif
  set it=FindItemOfType(u1,Item_Real[integer303])
  if IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER)==false and it!=null then
    call UnitRemoveItem(u1,it)
  endif
  set it=FindItemOfType(u2,Item_Real[integer304])
  if IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER)and it!=null then
    call UnitRemoveItem(u2,it)
  endif
  set it=FindItemOfType(u2,Item_Real[integer303])
  if IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER)==false and it!=null then
    call UnitRemoveItem(u2,it)
  endif
  call ClearSelectionForPlayer(p1)
  call SelectUnitAddForPlayer(u2,p1)
  call ClearSelectionForPlayer(p2)
  call SelectUnitAddForPlayer(u1,p2)
  call FlushChildHashtable(HY,(800+WUR))
  call FlushChildHashtable(HY,(800+WWR))
  set tt_unit1=u1
  call ExecuteFunc("Func3506")
  set tt_unit1=u2
  call ExecuteFunc("Func3506")
  set i=integers026[WWR]
  set integers026[WWR]=integers026[WUR]
  set integers026[WUR]=i
  call Func0914(p2,"9",integers026[WWR])
  call Func0914(p1,"9",integers026[WUR])
  call Traffic_RegisterData("SWAP_"+I2S(WWR)+"_"+I2S(WUR),GetUnitTypeId(u1))
  call Traffic_RegisterData("SWAP_"+I2S(WUR)+"_"+I2S(WWR),GetUnitTypeId(u2))
  call Func0929(p1)
  call Func0929(p2)
  set p1=null
  set p2=null
  set g=null
  set WYR=null
  set it=null
endfunction

function Func2021 takes unit source,unit RCX returns boolean
  return(LoadBoolean(HY,800+GetPlayerId(GetOwningPlayer(RCX)),GetUnitTypeId(source)+GetUnitTypeId(RCX)))
endfunction

function Func2022 takes player p returns integer
  local integer i=1
  loop
    if Sentinels[i]==p or Scourges[i]==p then
      return i
    endif
    set i=i+1
    exitwhen i>5
  endloop
  return-1
endfunction

function Func2023 takes unit source,unit RCX,boolean ZSE returns boolean
  call SaveBoolean(HY,(800+GetPlayerId(GetOwningPlayer(source))),(GetUnitTypeId(source)+GetUnitTypeId(RCX)),(true))
  if Func2021(source,RCX)then
    call Func2020(source,RCX)
    return true
  else
    call DisplayTimedTextToPlayer(GetOwningPlayer(RCX),0,0,30,"	")
    call DisplayTimedTextToPlayer(GetOwningPlayer(RCX),0,0,30,"												 "+udg_Colors[GetPlayerId(GetOwningPlayer(source))]+GetUnitName(source)+"|r |cff99ccff"+GetObjectName('n082')+" "+GetObjectName('n083')+"|r |c00ff0303-swap "+I2S(Func2022(GetOwningPlayer(source)))+"|r |cff99ccff"+GetObjectName('n081')+"|r")
    call DisplayTimedTextToPlayer(GetOwningPlayer(RCX),0,0,30,"	")
    if ZSE then
      call DisplayTimedTextToPlayer(GetOwningPlayer(source),0,0,30,"	")
      call DisplayTimedTextToPlayer(GetOwningPlayer(source),0,0,30,"|cff99ccff"+GetObjectName('n08C')+" |r"+udg_Colors[GetPlayerId(GetOwningPlayer(RCX))]+GetUnitName(RCX)+"|r")
      call DisplayTimedTextToPlayer(GetOwningPlayer(source),0,0,30,"	")
    endif
  endif
  return false
endfunction

function Func2024 takes nothing returns nothing
  local integer slot=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
  if GetEventPlayerChatString()=="-swapall"then
    set slot=1
    set tt_unit3=udg_Hero[GetPlayerId(GetTriggerPlayer())]
    loop
      exitwhen slot>5
      if IsSentinel(GetTriggerPlayer())then
        set tt_player1=Sentinels[slot]
      else
        set tt_player1=Scourges[slot]
      endif
      set tt_unit1=udg_Hero[GetPlayerId(tt_player1)]
      if not(tt_unit3==null or GetOwningPlayer(tt_unit3)!=GetTriggerPlayer()or tt_unit1==null or GetOwningPlayer(tt_unit1)!=tt_player1 or tt_player1==GetTriggerPlayer())then
        if Func2023(tt_unit3,tt_unit1,false)then
          return
        endif
      endif
      set slot=slot+1
    endloop
    return
  elseif slot<1 or slot>5 then
    call Error(GetTriggerPlayer(),GetObjectName('n02Z'))
    return
  endif
  set tt_unit3=udg_Hero[GetPlayerId(GetTriggerPlayer())]
  if IsSentinel(GetTriggerPlayer())then
    set tt_player1=Sentinels[slot]
  else
    set tt_player1=Scourges[slot]
  endif
  set tt_unit1=udg_Hero[GetPlayerId(tt_player1)]
  if tt_unit3==null or GetOwningPlayer(tt_unit3)!=GetTriggerPlayer()or tt_unit1==null or GetOwningPlayer(tt_unit1)!=tt_player1 or tt_player1==GetTriggerPlayer()then
    call Error(GetTriggerPlayer(),GetObjectName('n02Z'))
    return
  endif
  call Func2023(tt_unit3,tt_unit1,true)
endfunction

function Func2025 takes nothing returns nothing
  local integer i
  local player p
  local unit u
  local string s
  local player p2=GetTriggerPlayer()
  if LocalPlayer==GetTriggerPlayer()then
    call ClearTextMessages()
  endif
  call DisplayTimedTextToPlayer(p2,0,0,45,"|cff99ccff"+GetObjectName('n08B')+"|r")
  call DisplayTimedTextToPlayer(p2,0,0,45," ")
  set i=1
  loop
    set p=Sentinels[i]
    set u=udg_Hero[GetPlayerId(p)]
    if IsPlayerAlly(p2,p)and p2!=p and u!=null and IsUnitOwnedByPlayer(u,p)then
      set s=" "
      if Func2021(udg_Hero[GetPlayerId(p2)],u)then
        set s=" |c00ff0303("+GetObjectName('n085')+")|r"
      endif
      call DisplayTimedTextToPlayer(p2,0,0,45,udg_Colors[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
    endif
    set p=Scourges[i]
    set u=udg_Hero[GetPlayerId(p)]
    if IsPlayerAlly(p2,p)and p2!=p and u!=null and IsUnitOwnedByPlayer(u,p)then
      set s=" "
      if Func2021(udg_Hero[GetPlayerId(p2)],u)then
        set s=" |c00ff0303("+GetObjectName('n085')+")|r"
      endif
      call DisplayTimedTextToPlayer(p2,0,0,45,udg_Colors[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
    endif
    set i=i+1
    exitwhen i>5
  endloop
  call DisplayTimedTextToPlayer(p2,0,0,45," ")
  call DisplayTimedTextToPlayer(p2,0,0,45,"|cff99ccff"+GetObjectName('n083')+"|r |c00ff0303-swap #|r |cff99ccff"+GetObjectName('n086')+" -swapcancel "+GetObjectName('n087')+"|r")
  call DisplayTimedTextToPlayer(p2,0,0,45," ")
  set u=null
endfunction

function Func2026 takes player p returns boolean
  local integer k=1
  local integer i=0
  loop
    if IsSentinel(p)then
      if udg_Hero[GetPlayerId(Sentinels[k])]!=null and Sentinels[k]!=p and GetHeroLevel(udg_Hero[GetPlayerId(Sentinels[k])])==1 then
        set i=i+1
      endif
    else
      if udg_Hero[GetPlayerId(Scourges[k])]!=null and Scourges[k]!=p and GetHeroLevel(udg_Hero[GetPlayerId(Scourges[k])])==1 then
        set i=i+1
      endif
    endif
    set k=k+1
    exitwhen k>5
  endloop
  return i>0
endfunction

function Func2027 takes nothing returns boolean
  if boolean107 or SwapCommand_Enabled==false then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"-swaphero "+GetObjectName('n088'))
    return false
  endif
  if HasUsedRandom[GetPlayerId(GetTriggerPlayer())]then
    if GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<100 then
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0MT'))
      return false
    endif
  endif
  if GetUnitState(udg_Hero[GetPlayerId(GetTriggerPlayer())],UNIT_STATE_LIFE)<1 then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08F'))
    return false
  endif
  if AFK_Check then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08G')+" -swaphero.")
    return false
  endif
  if Func2026(GetTriggerPlayer())==false then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08H'))
    return false
  endif
  return true
endfunction

function Func2028 takes nothing returns nothing
  if Func2027()then
    if GetEventPlayerChatString()=="-swap"or GetEventPlayerChatString()=="-swaphero"then
      call Func2025()
    elseif GetEventPlayerChatString()=="-swapcancel"then
      call FlushChildHashtable(HY,(800+GetPlayerId(GetTriggerPlayer())))
    else
      call Func2024()
    endif
  endif
endfunction

function Func2029 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local integer QIE=GetTriggerEvalCount(RBX)
  local real result
  local real ZEE
  if GetTriggerEventId()==EVENT_UNIT_DEATH or QIE>60 then
    if(LoadInteger(HY,GetHandleId(source),4259)!=1)then
      if IsSentinel(GetOwningPlayer(source))then
        set result=GetRectCenterX(gg_rct_Hero_Creation_NE)
        set ZEE=GetRectCenterY(gg_rct_Hero_Creation_NE)
      else
        set result=GetRectCenterX(gg_rct_Hero_Creation_UD)
        set ZEE=GetRectCenterY(gg_rct_Hero_Creation_UD)
      endif
      call SetUnitPosition(source,result,ZEE)
      call PauseUnit(source,false)
    endif
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call PauseUnit(source,true)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func2030 takes player whichPlayer returns nothing
  local unit source=udg_Hero[GetPlayerId(whichPlayer)]
  local trigger RBX
  if IsDead(source)==false then
    set RBX=CreateTrigger()
    call DisplayTimedTextToPlayer(whichPlayer,0,0,30.0,GetObjectName('n08K'))
    call UnitRemoveBuffs(source,true,false)
    call UnitRemoveAbility(source,'Bcyc')
    call UnitRemoveAbility(source,'Bcy2')
    call UnitRemoveAbility(source,'B02J')
    call UnitRemoveAbility(source,'BUsp')
    call UnitRemoveAbility(source,'Bust')
    call UnitRemoveAbility(source,'B02F')
    call PauseUnit(source,true)
    call TriggerRegisterTimerEvent(RBX,1,true)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
    call TriggerAddCondition(RBX,Condition(function Func2029))
    call SaveUnitHandle(HY,(GetHandleId(RBX)),14,(source))
  endif
  set whichPlayer=null
  set source=null
  set RBX=null
endfunction

function Func2031 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
    call Func2030(whichPlayer)
  endif
  set RBX=null
  return false
endfunction

function Func2032 takes nothing returns nothing
  local player whichPlayer=GetTriggerPlayer()
  local unit source=udg_Hero[GetPlayerId(whichPlayer)]
  local trigger RBX
  if IsDead(source)==false then
    set RBX=CreateTrigger()
    call TriggerRegisterTimerEvent(RBX,3.5,false)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
    call TriggerAddCondition(RBX,Condition(function Func2031))
    call SavePlayerHandle(HY,(GetHandleId(RBX)),54,(whichPlayer))
  endif
  set whichPlayer=null
  set source=null
  set RBX=null
endfunction

function Func2033 takes player whichPlayer returns string
  local string ZJE=LeftAt[GetPlayerId(whichPlayer)]
  if LeftAt[GetPlayerId(whichPlayer)]!="Here"then
    return" |c00ff0303("+GetObjectName('n089')+" at "+SubString(ZJE,10,StringLength(ZJE))+"|c00ff0303)|r"
  endif
  return" "
endfunction

function Func2034 takes nothing returns nothing
  local integer ZAE=1
  local integer QIE=5
  local integer ZBE
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20," ")
  if(IsScourge(GetTriggerPlayer()))then
    loop
      exitwhen ZAE>QIE
      set ZBE=GetPlayerId(Sentinels[ZAE])
      if(udg_Hero[ZBE]!=null)then
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20,udg_Colors[ZBE]+(PlayerNames[GetPlayerId((Sentinels[ZAE]))])+"|r "+GetObjectName('n08M')+" "+GetUnitName(udg_Hero[ZBE])+" ("+GetObjectName('n08L')+" "+I2S(GetUnitLevel(udg_Hero[ZBE]))+")"+Func2033(Sentinels[ZAE]))
      endif
      set ZAE=ZAE+1
    endloop
  else
    loop
      exitwhen ZAE>QIE
      set ZBE=GetPlayerId(Scourges[ZAE])
      if(udg_Hero[ZBE]!=null)then
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20,udg_Colors[ZBE]+(PlayerNames[GetPlayerId((Scourges[ZAE]))])+"|r "+GetObjectName('n08M')+" "+GetUnitName(udg_Hero[ZBE])+" ("+GetObjectName('n08L')+" "+I2S(GetUnitLevel(udg_Hero[ZBE]))+")"+Func2033(Scourges[ZAE]))
      endif
      set ZAE=ZAE+1
    endloop
  endif
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20," ")
endfunction

function Func2035 takes unit source returns boolean
  return GetUnitTypeId(source)=='N01O' or GetUnitTypeId(source)=='N013' or GetUnitTypeId(source)=='N014' or GetUnitTypeId(source)=='N015'
endfunction

function Func2036 takes unit source returns unit
  local integer ZAE=GetHandleId(GetOwningPlayer(source))
  return(LoadUnitHandle(HY,(ZAE),333))
endfunction

function Func2037 takes nothing returns nothing
  local unit source
  local integer ZAE=0
  if(udg_Hero[GetPlayerId(GetTriggerPlayer())]==null)then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,GetObjectName('n08A'))
  else
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,GetUnitName(udg_Hero[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName('n08N')+" "+I2S(R2I(0.5+Func0940(udg_Hero[GetPlayerId(GetTriggerPlayer())]))))
    if Func2035(udg_Hero[GetPlayerId(GetTriggerPlayer())])then
      set source=Func2036(udg_Hero[GetPlayerId(GetTriggerPlayer())])
      if source!=null then
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,GetUnitName(source)+" "+GetObjectName('n08N')+" "+I2S(R2I(0.5+GetUnitMoveSpeed(source))))
        set source=null
      endif
    endif
  endif
endfunction

function Func2038 takes nothing returns nothing
  local unit source
  local integer ZAE=0
  if(udg_Hero[GetPlayerId(GetTriggerPlayer())]==null)then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,GetObjectName('n08A'))
  else
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,GetUnitName(udg_Hero[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName('n08N')+" "+I2S(R2I(0.5+Func0943(udg_Hero[GetPlayerId(GetTriggerPlayer())]))))
    if Func2035(udg_Hero[GetPlayerId(GetTriggerPlayer())])then
      set source=Func2036(udg_Hero[GetPlayerId(GetTriggerPlayer())])
      if source!=null then
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,GetUnitName(source)+" "+GetObjectName('n08N')+" "+I2S(R2I(0.5+GetUnitMoveSpeed(source))))
      endif
    endif
    loop
      exitwhen ZAE>16
      set source=udg_Hero[ZAE]
      if source!=null and source!=udg_Hero[GetPlayerId(GetTriggerPlayer())]and IsUnitAlly(source,GetTriggerPlayer())then
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,GetUnitName(source)+" "+GetObjectName('n08N')+" "+I2S(R2I(0.5+GetUnitMoveSpeed(source))))
      endif
      set ZAE=ZAE+1
    endloop
  endif
  set source=null
endfunction

function Func2039 takes nothing returns nothing
  call SaveBoolean(HY,(GetHandleId(GetTriggerPlayer())),139,(true))
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08R'))
endfunction

function Func2040 takes nothing returns nothing
  call SaveBoolean(HY,(GetHandleId(GetTriggerPlayer())),139,(false))
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08O'))
endfunction

function Func2041 takes nothing returns nothing
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,Func1990(GetPlayerId(GetTriggerPlayer())))
endfunction

function Func2042 takes nothing returns nothing
  set booleans027[GetPlayerId(GetTriggerPlayer())]=GetEventPlayerChatString()=="-cson"
endfunction

function Func2043 takes nothing returns nothing
  set SelectionHelperEnabled[GetPlayerId(GetTriggerPlayer())]=false
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName('n0JZ'))
endfunction

function Func2044 takes nothing returns nothing
  set SelectionHelperEnabled[GetPlayerId(GetTriggerPlayer())]=true
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName('n0K0'))
endfunction

function Func2045 takes nothing returns nothing
  local integer ZAE=0
  local integer QIE=GetPlayerId(GetTriggerPlayer())
  local integer ZBE=0
  local integer ZCE=0
  local player whichPlayer
  if boolean148==false or Mode_SO==false then
    return
  endif
  if real032+90<(TimerGetElapsed(GlobalTimer))then
    loop
      exitwhen ZAE>15
      set booleans025[ZAE]=false
      set ZAE=ZAE+1
    endloop
  endif
  set real032=(TimerGetElapsed(GlobalTimer))+90
  set booleans025[QIE]=true
  set ZAE=0
  loop
    exitwhen ZAE>15
    if IsSentinel(GetTriggerPlayer())then
      if IsSentinel(Player(ZAE))and IsPlayer(Player(ZAE))then
        set ZCE=ZCE+1
        if booleans025[ZAE]then
          set ZBE=ZBE+1
        endif
      endif
    else
      if IsScourge(Player(ZAE))and IsPlayer(Player(ZAE))then
        set ZCE=ZCE+1
        if booleans025[ZAE]then
          set ZBE=ZBE+1
        endif
      endif
    endif
    set ZAE=ZAE+1
  endloop
  if ZBE*2>ZCE then
    if IsSentinel(GetTriggerPlayer())then
      set ZAE=0
      loop
        exitwhen ZAE>5
        set whichPlayer=Sentinels[ZAE]
        if booleans021[GetPlayerId(whichPlayer)]and HeroHasBeenUnlocked[GetPlayerId(whichPlayer)]==false then
          call DisplayTimedTextToForceEx(Force_Elfs,10,GetObjectName('n0KD')+" "+(PlayerNames[GetPlayerId(whichPlayer)]))
          call Func0785(whichPlayer)
          set HeroHasBeenUnlocked[GetPlayerId(whichPlayer)]=true
        endif
        set ZAE=ZAE+1
      endloop
    else
      set ZAE=0
      loop
        exitwhen ZAE>5
        set whichPlayer=Scourges[ZAE]
        if booleans021[GetPlayerId(whichPlayer)]and HeroHasBeenUnlocked[GetPlayerId(whichPlayer)]==false then
          call DisplayTimedTextToForceEx(Force_Unds,10,GetObjectName('n0KD')+" "+(PlayerNames[GetPlayerId(whichPlayer)]))
          call Func0785(whichPlayer)
          set HeroHasBeenUnlocked[GetPlayerId(whichPlayer)]=true
        endif
        set ZAE=ZAE+1
      endloop
    endif
  else
    if IsSentinel(GetTriggerPlayer())then
      call DisplayTimedTextToForceEx(Force_Elfs,10,GetObjectName('n0KB')+" "+I2S(ZBE)+"/"+I2S(ZCE)+" ("+(PlayerNames[GetPlayerId((GetTriggerPlayer()))])+")")
    else
      call DisplayTimedTextToForceEx(Force_Unds,10,GetObjectName('n0KB')+" "+I2S(ZBE)+"/"+I2S(ZCE)+" ("+(PlayerNames[GetPlayerId((GetTriggerPlayer()))])+")")
    endif
  endif
endfunction

function Func2046 takes nothing returns nothing
  local integer i=1
  local integer YOR
  local player p
  loop
    exitwhen i>5
    set p=Sentinels[i]
    set YOR=R2I(TimerGetRemaining(HeroRespawnTimer[GetPlayerId(p)]))
    if YOR>0 and booleans026[GetPlayerId(p)]and boolean111==false and boolean094==false then
      call PlayerSetLeaderboard(p,leaderboards002[GetPlayerId(p)])
      call LeaderboardDisplay(leaderboards002[GetPlayerId(p)],true)
      call LeaderboardSetLabel(leaderboards002[GetPlayerId(p)],"	 "+GetObjectName('n08V')+" "+I2S(YOR)+" "+GetObjectName('n095'))
    else
      call LeaderboardDisplay(leaderboards002[GetPlayerId(p)],false)
    endif
    set p=Scourges[i]
    set YOR=R2I(TimerGetRemaining(HeroRespawnTimer[GetPlayerId(p)]))
    if YOR>0 and booleans026[GetPlayerId(p)]and boolean111==false and boolean094==false then
      call PlayerSetLeaderboard(p,leaderboards002[GetPlayerId(p)])
      call LeaderboardDisplay(leaderboards002[GetPlayerId(p)],true)
      call LeaderboardSetLabel(leaderboards002[GetPlayerId(p)],"	 "+GetObjectName('n08V')+" "+I2S(YOR)+" "+GetObjectName('n095'))
    else
      call LeaderboardDisplay(leaderboards002[GetPlayerId(p)],false)
    endif
    set i=i+1
  endloop
endfunction

function Func2047 takes player p returns nothing
  local integer WVE=GetPlayerId(p)
  set leaderboards002[WVE]=CreateLeaderboard()
  call PlayerSetLeaderboard(p,leaderboards002[WVE])
  call LeaderboardDisplay(leaderboards002[WVE],false)
  call LeaderboardSetLabel(leaderboards002[WVE],GetObjectName('n0E4')+": ")
endfunction

function Func2048 takes nothing returns nothing
  call Func2047(Sentinels[1])
  call Func2047(Sentinels[2])
  call Func2047(Sentinels[3])
  call Func2047(Sentinels[4])
  call Func2047(Sentinels[5])
  call Func2047(Scourges[1])
  call Func2047(Scourges[2])
  call Func2047(Scourges[3])
  call Func2047(Scourges[4])
  call Func2047(Scourges[5])
endfunction

function Func2049 takes nothing returns nothing
  local integer ZAE=GetPlayerId(GetTriggerPlayer())
  if GetEventPlayerChatString()=="-don"or GetEventPlayerChatString()=="-deathon"then
    set booleans026[ZAE]=true
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08W'))
  else
    set booleans026[ZAE]=false
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08X'))
  endif
endfunction

function Func2050 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerAddAction(RBX,function Func2048)
  call TriggerRegisterTimerEvent(RBX,.5,false)
  set RBX=CreateTrigger()
  call TriggerAddAction(RBX,function Func2046)
  call TriggerRegisterTimerEvent(RBX,1,true)
  set RBX=null
endfunction

function Func2051 takes nothing returns nothing
  if(GetEventPlayerChatString()=="-showdeny")then
    set booleans027[GetPlayerId(GetTriggerPlayer())]=true
  else
    set booleans027[GetPlayerId(GetTriggerPlayer())]=false
  endif
endfunction

function Func2052 takes nothing returns nothing
  call Error(GetTriggerPlayer(),GetObjectName('n0HG'))
endfunction

function Func2053 takes nothing returns nothing
  call ForceRemovePlayer(AllPlayers,GetTriggerPlayer())
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08U'))
endfunction

function Func2054 takes nothing returns nothing
  call ForceAddPlayer(AllPlayers,GetTriggerPlayer())
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08Z'))
endfunction

function Func2055 takes nothing returns boolean
  local integer ZAE=GetRandomInt(1,4)
  if ZAE==1 then
    set weathereffect005=weathereffect001
  elseif ZAE==2 then
    set weathereffect005=weathereffect002
  elseif ZAE==3 then
    set weathereffect005=weathereffect003
  elseif ZAE==4 then
    set weathereffect005=weathereffect004
  endif
  if booleans028[PlayerId]then
    call EnableWeatherEffect(weathereffect001,false)
    call EnableWeatherEffect(weathereffect002,false)
    call EnableWeatherEffect(weathereffect003,false)
    call EnableWeatherEffect(weathereffect004,false)
    call EnableWeatherEffect(weathereffect005,true)
  endif
  return false
endfunction

function Func2056 takes nothing returns nothing
  local integer ZAE=GetRandomInt(1,4)
  local trigger RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,300,true)
  call TriggerAddCondition(RBX,Condition(function Func2055))
  set booleans028[GetPlayerId(Sentinels[1])]=false
  set booleans028[GetPlayerId(Sentinels[2])]=false
  set booleans028[GetPlayerId(Sentinels[3])]=false
  set booleans028[GetPlayerId(Sentinels[4])]=false
  set booleans028[GetPlayerId(Sentinels[5])]=false
  set booleans028[GetPlayerId(Scourges[1])]=false
  set booleans028[GetPlayerId(Scourges[2])]=false
  set booleans028[GetPlayerId(Scourges[3])]=false
  set booleans028[GetPlayerId(Scourges[4])]=false
  set booleans028[GetPlayerId(Scourges[5])]=false
  if udg_ObserverMode then
    set booleans028[GetPlayerId(udg_Observer1)]=false
    set booleans028[GetPlayerId(udg_Observer2)]=false
  endif
  if ZAE==1 then
    set weathereffect005=weathereffect001
  elseif ZAE==2 then
    set weathereffect005=weathereffect002
  elseif ZAE==3 then
    set weathereffect005=weathereffect003
  elseif ZAE==4 then
    set weathereffect005=weathereffect004
  endif
  set RBX=null
endfunction

function Func2057 takes nothing returns nothing
  local string ZJE=StringCase(GetEventPlayerChatString(),false)
  local boolean b=GetObjectName('SPCL')=="normal"
  if boolean149 then
    set boolean149=false
    call Func2056()
  endif
  if ZJE=="-weather snow"and LocalPlayer==GetTriggerPlayer()and b then
    set booleans028[GetPlayerId(GetTriggerPlayer())]=false
    call EnableWeatherEffect(weathereffect001,true)
    call EnableWeatherEffect(weathereffect002,false)
    call EnableWeatherEffect(weathereffect003,false)
    call EnableWeatherEffect(weathereffect004,false)
  endif
  if ZJE=="-weather rain"and LocalPlayer==GetTriggerPlayer()and b then
    set booleans028[GetPlayerId(GetTriggerPlayer())]=false
    call EnableWeatherEffect(weathereffect001,false)
    call EnableWeatherEffect(weathereffect002,true)
    call EnableWeatherEffect(weathereffect003,false)
    call EnableWeatherEffect(weathereffect004,false)
  endif
  if ZJE=="-weather moonlight"and LocalPlayer==GetTriggerPlayer()and b then
    set booleans028[GetPlayerId(GetTriggerPlayer())]=false
    call EnableWeatherEffect(weathereffect001,false)
    call EnableWeatherEffect(weathereffect002,false)
    call EnableWeatherEffect(weathereffect003,true)
    call EnableWeatherEffect(weathereffect004,false)
  endif
  if ZJE=="-weather wind"and LocalPlayer==GetTriggerPlayer()and b then
    set booleans028[GetPlayerId(GetTriggerPlayer())]=false
    call EnableWeatherEffect(weathereffect001,false)
    call EnableWeatherEffect(weathereffect002,false)
    call EnableWeatherEffect(weathereffect003,false)
    call EnableWeatherEffect(weathereffect004,true)
  endif
  if ZJE=="-weather off"and LocalPlayer==GetTriggerPlayer()and b then
    set booleans028[GetPlayerId(GetTriggerPlayer())]=false
    call EnableWeatherEffect(weathereffect001,false)
    call EnableWeatherEffect(weathereffect002,false)
    call EnableWeatherEffect(weathereffect003,false)
    call EnableWeatherEffect(weathereffect004,false)
  endif
  if ZJE=="-weather random"then
    set booleans028[GetPlayerId(GetTriggerPlayer())]=true
    if LocalPlayer==GetTriggerPlayer()and b then
      call EnableWeatherEffect(weathereffect001,false)
      call EnableWeatherEffect(weathereffect002,false)
      call EnableWeatherEffect(weathereffect003,false)
      call EnableWeatherEffect(weathereffect004,false)
      call EnableWeatherEffect(weathereffect005,true)
    endif
  endif
endfunction

function RollChatCmd takes nothing returns nothing
  local integer a=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
  local integer pid=GetPlayerId(GetTriggerPlayer())
  if LoadReal(HY,GetHandleId(GetTriggerPlayer()),'00rl')>TimerGetElapsed(GlobalTimer)then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('TX0O'))
    return
  endif
  call SaveReal(HY,GetHandleId(GetTriggerPlayer()),'00rl',TimerGetElapsed(GlobalTimer)+1.)
  set RollCounter[pid]=RollCounter[pid]+1
  if RollCounter[pid]>20 then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0DQ'))
    return
  endif
  if GetEventPlayerChatString()=="-rollon"or GetEventPlayerChatString()=="-rolloff"then
    return
  endif
  if a==0 then
    set a=100
  endif
  if a>0 and a<2001 then
    call RollCommand(AllPlayers,5,udg_Colors[GetPlayerId(GetTriggerPlayer())]+(PlayerNames[GetPlayerId((GetTriggerPlayer()))])+"|r "+GetObjectName('n05I')+" "+I2S(GetRandomInt(1,a))+" "+GetObjectName('n05M')+" "+I2S(a))
  else
    call Error(GetTriggerPlayer(),GetObjectName('n02Y'))
  endif
endfunction

function Func2059 takes nothing returns nothing
  local integer i
  if LoadReal(HY,GetHandleId(GetTriggerPlayer()),'00rh')>TimerGetElapsed(GlobalTimer)then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('TX0O'))
    return
  endif
  call SaveReal(HY,GetHandleId(GetTriggerPlayer()),'00rh',TimerGetElapsed(GlobalTimer)+1.)
  if GetRandomInt(1,2)==1 then
    set i=GetRandomInt(FirstSentinelHeroIndexid,LastHeroIndexid)
  else
    set i=GetRandomInt(FirstHeroIndexid,LastScourgeHeroIndexid)
  endif
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0GS')+" "+GetHeroNameByPoints(i))
endfunction

function Func2060 takes nothing returns nothing
  local integer ZAE=S2I(SubString(GetEventPlayerChatString(),4,StringLength(GetEventPlayerChatString())))
  if GetTriggerPlayer()!=Sentinels[1]or ZAE>2 or ZAE<1 or boolean115==false or TimerGetElapsed(GlobalTimer)>14 or boolean153 then
    return
  endif
  set ModeCM_Order=ZAE
  set ModeCM_Current=ZAE
  set ModeCM_Manual=true
  if ZAE==1 then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(Sentinels[1])]+(PlayerNames[GetPlayerId((Sentinels[1]))])+"|r "+GetObjectName('n0DS'))
  else
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(Scourges[1])]+(PlayerNames[GetPlayerId((Scourges[1]))])+"|r "+GetObjectName('n0DS'))
  endif
  if ModeCM_Order==1 then
    set player018=Sentinels[1]
    set player019=Scourges[1]
  else
    set player018=Scourges[1]
    set player019=Sentinels[1]
  endif
endfunction

function Func2061 takes nothing returns nothing
  set ShowRollNumbers[GetPlayerId(GetTriggerPlayer())]=false
endfunction

function Func2062 takes nothing returns nothing
  set ShowRollNumbers[GetPlayerId(GetTriggerPlayer())]=true
endfunction

function Func2063 takes nothing returns nothing
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n090'))
  set booleans029[GetPlayerId(GetTriggerPlayer())]=true
  call Func1010(GetTriggerPlayer())
endfunction

function Func2064 takes nothing returns nothing
  local integer ZAE=GetPlayerId(GetTriggerPlayer())
  if SoundsMuted[ZAE]then
    set SoundsMuted[ZAE]=false
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n08T'))
  else
    set SoundsMuted[ZAE]=true
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n091'))
  endif
endfunction

function Func2065 takes nothing returns nothing
  local integer ZAE=GetPlayerId(GetTriggerPlayer())
  set booleans030[ZAE]=booleans030[ZAE]==false
endfunction

function Func2066 takes nothing returns nothing
  local integer i=1
  local player p
  local integer WVE
  loop
    exitwhen i>5
    set p=Sentinels[i]
    if IsPlayer(p)then
      set WVE=GetPlayerId(p)
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,udg_Colors[WVE]+(PlayerNames[WVE])+"|r"+" "+GetObjectName('n084')+" "+R2S(integers048[WVE]/(TimerGetElapsed(GlobalTimer))*60))
    endif
    set p=Scourges[i]
    if IsPlayer(p)then
      set WVE=GetPlayerId(p)
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,udg_Colors[WVE]+(PlayerNames[WVE])+"|r"+" "+GetObjectName('n084')+" "+R2S(integers048[WVE]/(TimerGetElapsed(GlobalTimer))*60))
    endif
    set i=i+1
  endloop
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00," ")
  set p=null
endfunction

function Func2067 takes nothing returns nothing
  call Func0754(GetTriggerPlayer())
endfunction

function Func2068 takes nothing returns boolean
  call CleanTrigger(GetTriggeringTrigger())
  set boolean150=true
  return false
endfunction

function Func2069 takes real result returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,result,false)
  call TriggerAddCondition(RBX,Condition(function Func2068))
  set RBX=null
endfunction

function Func2070 takes nothing returns nothing
  local integer id=S2I(SubString(GetEventPlayerChatString(),9,12))
  local integer i=1
  local player p
  local string s
  local integer WVE
  if AFK_Check then
    if id<1 or booleans031[id]==false then
      loop
        exitwhen i>5
        set p=Sentinels[i]
        set WVE=GetPlayerId(p)
        if IsPlayer(p)and((TimerGetElapsed(GlobalTimer))-LastTimeActivity[WVE])>300.0 and booleans031[WVE]==false then
          set booleans031[WVE]=true
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,udg_Colors[WVE]+(PlayerNames[WVE])+"|r"+" "+GetObjectName('n05G'))
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,GetObjectName('n05O')+" |cff99ccff-kickafk "+I2S(WVE)+" |r "+GetObjectName('n05P'))
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00," ")
        endif
        set p=Scourges[i]
        set WVE=GetPlayerId(p)
        if IsPlayer(p)and((TimerGetElapsed(GlobalTimer))-LastTimeActivity[WVE])>300.0 and booleans031[WVE]==false then
          set booleans031[WVE]=true
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,udg_Colors[WVE]+(PlayerNames[WVE])+"|r"+" "+GetObjectName('n05G'))
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,GetObjectName('n05O')+" |cff99ccff-kickafk "+I2S(WVE)+" |r "+GetObjectName('n05P'))
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00," ")
        endif
        set i=i+1
      endloop
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00," ")
    elseif IsPlayer(Player(id))and IsPlayerAlly(GetTriggerPlayer(),Player(id))then
      call Func1767(Player(id))
    endif
  endif
endfunction

function Func2071 takes nothing returns nothing
  local integer i=1
  local player p
  local integer c=0
  if AFK_Check then
    loop
      exitwhen i>5
      set p=Sentinels[i]
      if IsPlayer(p)and((TimerGetElapsed(GlobalTimer))-LastTimeActivity[GetPlayerId(p)])/60>0.2 then
        set c=c+1
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,udg_Colors[GetPlayerId(p)]+(PlayerNames[GetPlayerId(p)])+"|r"+" "+GetObjectName('n05D')+" "+R2S(((TimerGetElapsed(GlobalTimer))-LastTimeActivity[GetPlayerId(p)])/60)+" "+GetObjectName('N05F'))
      endif
      set p=Scourges[i]
      if IsPlayer(p)and((TimerGetElapsed(GlobalTimer))-LastTimeActivity[GetPlayerId(p)])/60>0.2 then
        set c=c+1
        call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,udg_Colors[GetPlayerId(p)]+(PlayerNames[GetPlayerId(p)])+"|r"+" "+GetObjectName('n05D')+" "+R2S(((TimerGetElapsed(GlobalTimer))-LastTimeActivity[GetPlayerId(p)])/60)+" "+GetObjectName('N05F'))
      endif
      set i=i+1
    endloop
    if c<1 then
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00,GetObjectName('N05Q'))
    else
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15.00," ")
    endif
  endif
endfunction

function Func2072 takes nothing returns nothing
  local integer i=1
  local player p
  local integer WVE
  local real WNE=TimerGetElapsed(GlobalTimer)
  loop
    set p=Sentinels[i]
    set WVE=GetPlayerId(p)
    if IsPlayer(p)and udg_Hero[WVE]!=null then
      if integers012[WVE]!=GetHeroXP(udg_Hero[WVE])then
        set integers012[WVE]=GetHeroXP(udg_Hero[WVE])
        set reals002[WVE]=WNE
      endif
      if reals003[WVE]!=integers022[WVE]then
        set reals003[WVE]=integers022[WVE]
        set reals004[WVE]=WNE
      endif
    endif
    set p=Scourges[i]
    set WVE=GetPlayerId(p)
    if IsPlayer(p)and udg_Hero[WVE]!=null then
      if integers012[WVE]!=GetHeroXP(udg_Hero[WVE])then
        set integers012[WVE]=GetHeroXP(udg_Hero[WVE])
        set reals002[WVE]=WNE
      endif
      if reals003[WVE]!=integers022[WVE]then
        set reals003[WVE]=integers022[WVE]
        set reals004[WVE]=WNE
      endif
    endif
  endloop
endfunction

function Func2073 takes nothing returns real
  if boolean115 or boolean154 or boolean114 then
    return GameStartsTime
  endif
  return 0.
endfunction

function Func2074 takes integer WVE returns boolean
  local real WNE=TimerGetElapsed(GlobalTimer)
  return integers011[WVE]>1 or(WNE-GameStartsTime-reals002[WVE]>330 and GetHeroLevel(udg_Hero[WVE])<25)or(WNE-Func2073()-LastTimeActivity[WVE]>300)
endfunction

function Func2075 takes nothing returns boolean
  local integer i=1
  local player p
  local integer WVE
  local real WNE=(TimerGetElapsed(GlobalTimer))
  if AFK_Check then
    loop
      exitwhen i>5
      set p=Sentinels[i]
      if IsPlayer(p)then
        set WVE=GetPlayerId(p)
        if udg_Hero[WVE]!=null then
          if integers012[WVE]!=GetHeroXP(udg_Hero[WVE])then
            set integers012[WVE]=GetHeroXP(udg_Hero[WVE])
            set reals002[WVE]=WNE
          endif
          if reals003[WVE]!=integers022[WVE]then
            set reals003[WVE]=integers022[WVE]
            set reals004[WVE]=WNE
          endif
        endif
        if Func2074(WVE)and booleans031[WVE]==false and boolean014==false then
          set booleans031[WVE]=true
          call DisplayTimedTextToForceEx(Force_Elfs,15,udg_Colors[WVE]+(PlayerNames[WVE])+"|r"+" "+GetObjectName('n05G')+" "+R2S((WNE-LastTimeActivity[WVE])/60)+" "+GetObjectName('N05F'))
          call DisplayTimedTextToForceEx(Force_Elfs,15,GetObjectName('n05O')+" |cff99ccff-kickafk "+I2S(WVE)+" |r "+GetObjectName('n05P'))
          call DisplayTimedTextToForceEx(Force_Elfs,15," ")
        endif
      endif
      set p=Scourges[i]
      if IsPlayer(p)then
        set WVE=GetPlayerId(p)
        if udg_Hero[WVE]!=null then
          if integers012[WVE]!=GetHeroXP(udg_Hero[WVE])then
            set integers012[WVE]=GetHeroXP(udg_Hero[WVE])
            set reals002[WVE]=WNE
          endif
          if reals003[WVE]!=integers022[WVE]then
            set reals003[WVE]=integers022[WVE]
            set reals004[WVE]=WNE
          endif
        endif
        if Func2074(WVE)and booleans031[WVE]==false and boolean014==false then
          set booleans031[WVE]=true
          call DisplayTimedTextToForceEx(Force_Unds,15,udg_Colors[WVE]+(PlayerNames[WVE])+"|r"+" "+GetObjectName('n05G')+" "+R2S((WNE-LastTimeActivity[WVE])/60)+" "+GetObjectName('N05F'))
          call DisplayTimedTextToForceEx(Force_Unds,15,GetObjectName('n05O')+" |cff99ccff-kickafk "+I2S(WVE)+" |r "+GetObjectName('n05P'))
          call DisplayTimedTextToForceEx(Force_Unds,15," ")
        endif
      endif
      set i=i+1
    endloop
  endif
  return false
endfunction

function Func2076 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  local player p=GetOwningPlayer(u)
  local integer id
  local item it
  if p!=Sentinels[0]and p!=Scourges[0]and IsCourier(u)==false and GetUnitTypeId(u)!='ncop' and GetUnitTypeId(u)!='n12M' then
    set id=GetIssuedOrderId()
    if id!=851973 then
      set integers048[GetPlayerId(p)]=integers048[GetPlayerId(p)]+1
      if id!=851983 then
        set LastTimeActivity[GetPlayerId(p)]=(TimerGetElapsed(GlobalTimer))
        if Func2074(GetPlayerId(p))==false then
          set booleans031[GetPlayerId(p)]=false
        endif
      endif
      if(id==851983 or id==851971)and GetOrderTargetItem()!=null then
        set it=GetOrderTargetItem()
        if id==851983 or(id==851971 and(LoadBoolean(HY,(GetHandleId(GetItemPlayer(it))),139)))then
          if GetItemPlayer(it)!=p and Func0883(it)==false and IsPointInRegion(region006,GetItemX(it),GetItemY(it))and IsPlayer(GetItemPlayer(it))then
            call Func0658('n0G7')
          endif
        endif
        set it=null
      endif
    endif
  endif
  set u=null
  return false
endfunction

function Func2077 takes nothing returns boolean
  return IsCourier(GetFilterUnit())and GetOwningPlayer(GetFilterUnit())==GetTriggerPlayer()
endfunction

function Func2078 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,0,0,12000,Condition(function Func2077))
  call KillGroup(g)
  set g=null
endfunction

function Func2079 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local unit u=udg_Hero[GetPlayerId(p)]
  local integer w=LoadInteger(HY,GetHandleId(u),3000)
  local integer q=LoadInteger(HY,GetHandleId(u),3001)
  local integer e=LoadInteger(HY,GetHandleId(u),3002)
  if w+q+e>0 then
    set w=IMaxIF(1,w)
    set q=IMaxIF(1,q)
    set e=IMaxIF(1,e)
    if Func0898(u)then
      set w=w+1
      set q=q+1
      set e=e+1
    endif
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CV')+" [|cffff0000E|r|cffff0000E|r|cffff0000E|r] - [|cffffcc00T|r]"+" [|cffff0000Damage:|r "+I2S(R2I(e*62.5+12.5+25))+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CU')+" [|cffff0000E|r|cffff0000E|r|cff00ffffW|r] - [|cffffcc00D|r]"+" [|cffff0000Damage:|r "+I2S(R2I(80+e*35.0))+"] [|cff00ffffDistance:|r "+I2S(R2I(325+w*175.0))+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CT')+" [|cffff0000E|r|cffff0000E|r|cff0000ffQ|r] - [|cffffcc00F|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0C6')+" [|cff0000ffQ|r|cff0000ffQ|r|cff0000ffQ|r] - [|cffffcc00Y|r]"+" [|cff0000ffDuration:|r "+I2S(R2I(2.5+q*0.5))+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CL')+" [|cff0000ffQ|r|cff0000ffQ|r|cff00ffffW|r] - [|cffffcc00V|r]"+" [|cff00ffffSelfslow:|r "+I2S(R2I((w-1)*10-30))+"%] [|cff00ffffEnemy slow:|r "+I2S(R2I(20+(q-1)*5))+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CN')+" [|cff0000ffQ|r|cff0000ffQ|r|cffff0000E|r] - [|cffffcc00G|r]"+" [|cff00ffffSlow:|r "+I2S(R2I(q*20))+"%] [|cffff0000Damage:|r "+I2S(R2I(6*e))+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CS')+" [|cff00ffffW|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00Z|r]"+" [|cffff0000Damage:|r "+I2S(R2I((e+2)*10))+"] [|cff00ffffBonus AS:|r "+I2S(R2I((w+2)*10))+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CO')+" [|cff00ffffW|r|cff00ffffW|r|cff0000ffQ|r] - [|cffffcc00X|r]"+" [|cff00ffffDamage:|r "+I2S(R2I((2*w+q)*15+70))+"] [|cff00ffffDistance:|r "+I2S(R2I((w+1)*400))+"] [|cff0000ffDuration:|r "+R2S(q*0.3+0.5)+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CP')+" [|cff00ffffW|r|cff00ffffW|r|cff00ffffW|r] - [|cffffcc00C|r]"+" [|cff00ffffMana drain:|r "+I2S(R2I(w*75+25))+"]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CQ')+" [|cff0000ffQ|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00B|r]"+" [|cffff0000Damage:|r "+I2S(R2I(e*40))+"] [|cff00ffffDisarm duration:|r "+R2S((w+1)*0.5)+"] [|cff0000ffKnockback duraion:|r "+R2S(q*0.25)+"]")
  else
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CV')+" [|cffff0000E|r|cffff0000E|r|cffff0000E|r] - [|cffffcc00T|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CU')+" [|cffff0000E|r|cffff0000E|r|cff00ffffW|r] - [|cffffcc00D|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CT')+" [|cffff0000E|r|cffff0000E|r|cff0000ffQ|r] - [|cffffcc00F|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0C6')+" [|cff0000ffQ|r|cff0000ffQ|r|cff0000ffQ|r] - [|cffffcc00Y|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CL')+" [|cff0000ffQ|r|cff0000ffQ|r|cff00ffffW|r] - [|cffffcc00V|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CN')+" [|cff0000ffQ|r|cff0000ffQ|r|cffff0000E|r] - [|cffffcc00G|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CS')+" [|cff00ffffW|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00Z|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CO')+" [|cff00ffffW|r|cff00ffffW|r|cff0000ffQ|r] - [|cffffcc00X|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CP')+" [|cff00ffffW|r|cff00ffffW|r|cff00ffffW|r] - [|cffffcc00C|r]")
    call DisplayTimedTextToPlayer(p,0,0,10,GetObjectName('n0CQ')+" [|cff0000ffQ|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00B|r]")
  endif
  set u=null
endfunction

function Func2080 takes string ZJE returns nothing
  call StopMusic(true)
  call PlayMusic(ZJE)
endfunction

function Func2081 takes nothing returns nothing
  local string s=GetEventPlayerChatString()
  local integer i
  if LoadReal(HY,GetHandleId(GetTriggerPlayer()),'0mus')>TimerGetElapsed(GlobalTimer)then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('TX0O'))
    return
  endif
  call SaveReal(HY,GetHandleId(GetTriggerPlayer()),'0mus',TimerGetElapsed(GlobalTimer))
  set i=GetRandomInt(1,integer458)
  if LocalPlayer==GetTriggerPlayer()then
    if s=="-music off"then
      call StopMusic(false)
    elseif s=="-music random"then
      call Func2080(strings010[i])
    elseif s=="-music nightelf1"then
      call Func2080("Sound\\Music\\mp3Music\\NightElf1.mp3")
    elseif s=="-music nightelf2"then
      call Func2080("Sound\\Music\\mp3Music\\NightElf2.mp3")
    elseif s=="-music nightelf3"then
      call Func2080("Sound\\Music\\mp3Music\\NightElf3.mp3")
    elseif s=="-music human1"then
      call Func2080("Sound\\Music\\mp3Music\\Human1.mp3")
    elseif s=="-music human2"then
      call Func2080("Sound\\Music\\mp3Music\\Human2.mp3")
    elseif s=="-music human3"then
      call Func2080("Sound\\Music\\mp3Music\\Human3.mp3")
    elseif s=="-music orc1"then
      call Func2080("Sound\\Music\\mp3Music\\Orc1.mp3")
    elseif s=="-music orc2"then
      call Func2080("Sound\\Music\\mp3Music\\Orc2.mp3")
    elseif s=="-music orc3"then
      call Func2080("Sound\\Music\\mp3Music\\Orc3.mp3")
    elseif s=="-music undead1"then
      call Func2080("Sound\\Music\\mp3Music\\Undead1.mp3")
    elseif s=="-music undead2"then
      call Func2080("Sound\\Music\\mp3Music\\Undead2.mp3")
    elseif s=="-music undead3"then
      call Func2080("Sound\\Music\\mp3Music\\Undead3.mp3")
    elseif s=="-music other1"then
      call Func2080("Sound\\Music\\mp3Music\\BloodElfTheme.mp3")
    elseif s=="-music other2"then
      call Func2080("Sound\\Music\\mp3Music\\DarkAgents.mp3")
    elseif s=="-music other3"then
      call Func2080("Sound\\Music\\mp3Music\\TragicConfrontation.mp3")
    elseif s=="-music other4"then
      call Func2080("Sound\\Music\\mp3Music\\SadMystery.mp3")
    elseif s=="-music other5"then
      call Func2080("Sound\\Music\\mp3Music\\IllidansTheme.mp3")
    elseif s=="-music other6"then
      call Func2080("Sound\\Music\\mp3Music\\Tension.mp3")
    elseif s=="-music other7"then
      call Func2080("Sound\\Music\\mp3Music\\ArthasTheme.mp3")
    elseif s=="-music other8"then
      call Func2080("Sound\\Music\\mp3Music\\NightElfDefeat.mp3")
    elseif s=="-music other9"then
      call Func2080("Sound\\Music\\mp3Music\\NightElfVictory.mp3")
    elseif s=="-music special"then
      call Func2080("Sound\\Music\\mp3Music\\PH1.mp3")
    else
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0CW')+" ")
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"off, random, nightelf1, nightelf2, nightelf3, human1, human2, human3, orc1, orc2, orc3, undead1, undead2, undead3, other1, other2, other3, other4, other5, other6, other7, other8, other9, special")
    endif
  endif
endfunction

function Func2082 takes nothing returns boolean
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\NightElf1.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\NightElf2.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\NightElf3.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Human1.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Human2.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Human3.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Orc1.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Orc2.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Orc3.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Undead1.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Undead2.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Undead3.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\BloodElfTheme.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\DarkAgents.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\TragicConfrontation.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\SadMystery.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\IllidansTheme.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\Tension.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\ArthasTheme.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\NightElfDefeat.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\NightElfVictory.mp3"
  set integer458=integer458+1
  set strings010[integer458]="Sound\\Music\\mp3Music\\PH1.mp3"
  return false
endfunction

function Func2083 takes player whichPlayer,integer ZAE,integer QIE,integer ZBE,integer ZCE returns nothing
  if LocalPlayer==whichPlayer then
    call SetWaterBaseColor(ZAE,QIE,ZBE,ZCE)
  endif
endfunction

function Func2084 takes nothing returns nothing
  local string s=SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString()))
  local player p=GetTriggerPlayer()
  local integer r
  local integer g
  local integer b
  if s=="red"then
    call Func2083(p,255,0,0,255)
  elseif s=="blue"then
    call Func2083(p,0,0,255,255)
  elseif s=="green"then
    call Func2083(p,0,255,0,255)
  elseif s=="default"then
    call Func2083(p,0,0,255,255)
  elseif s=="random"then
    set r=GetRandomInt(0,255)
    set g=GetRandomInt(0,255)
    set b=GetRandomInt(0,255)
    call Func2083(p,r,g,b,255)
    call DisplayTimedTextToPlayer(p,0,0,5,GetObjectName('n0HD')+" r="+I2S(r)+" g="+I2S(g)+" b="+I2S(b))
  else
    call Func1958(s)
    set r=integer459
    set g=integer460
    set b=integer461
    if r==0 and g==0 and b==0 and s!="0 0 0"then
      return
    endif
    if r>=0 and r<=255 and g>=0 and g<=255 and b>=0 and b<=255 then
      call Func2083(p,r,g,b,255)
    endif
  endif
endfunction

function Func2085 takes nothing returns boolean
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,"Total Bonus XP/Gold: "+I2S(integers096[GetPlayerId(GetTriggerPlayer())])+"/"+I2S(integers097[GetPlayerId(GetTriggerPlayer())]))
  return false
endfunction

function Func2086 takes unit u returns integer
  local integer YSR=GetUnitAbilityLevel(u,'A0BR')+GetUnitAbilityLevel(u,'A3T6')
  if YSR==0 then
    return 0
  endif
  if Func0898(u)then
    return 14+8*YSR
  endif
  return 12+6*YSR
endfunction

function Func2087 takes player p,player YUR returns nothing
  local unit u=udg_Hero[GetPlayerId(p)]
  local integer YWR=GetUnitAbilityLevel(u,'A0CQ')-1
  local integer XXO=Func2086(u)
  set YWR=IMaxBJ(IMinBJ(YWR,XXO),0)
  if GetUnitTypeId(u)=='Nfir' then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('n0KE')+" "+I2S(YWR)+"/"+I2S(XXO))
  endif
endfunction

function Func2088 takes player p,player YUR returns boolean
  local integer h=GetHandleId(p)
  local string s1
  local string s2
  local string s3
  local string s4
  local string s5
  local string s6
  local integer i=LoadInteger(HeroStats,h,'0MC0')
  local integer k
  if i>0 then
    set s1=GetObjectName('n0JH')+" "+I2S(i)
    set k=LoadInteger(HeroStats,h,'0MC0'+2)
    set s2=GetObjectName('n0JM')+" "+I2S(k+LoadInteger(HeroStats,h,'0MC0'+3)+LoadInteger(HeroStats,h,'0MC0'+4))+" ("+I2S((k+LoadInteger(HeroStats,h,'0MC0'+3)+LoadInteger(HeroStats,h,'0MC0'+4))*100/i)+"%)"
    set s3=GetObjectName('n0JL')+" "+I2S(k)+" ("+I2S(100*k/i)+"%)"
    set k=LoadInteger(HeroStats,h,'0MC0'+3)
    set s4=GetObjectName('n0JK')+" "+I2S(k)+" ("+I2S(100*k/i)+"%)"
    set k=LoadInteger(HeroStats,h,'0MC0'+4)
    set s5=GetObjectName('n0JJ')+" "+I2S(k)+" ("+I2S(100*k/i)+"%)"
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,s1)
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,s2)
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,s3)
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,s4)
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,s5)
  endif
  return false
endfunction

function Func2089 takes player p,player YUR returns nothing
  local integer h=GetHandleId(p)
  local integer i
  local integer k
  if LoadInteger(HeroStats,h,'TRCK')>0 then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('n0LO')+": "+I2S(LoadInteger(HeroStats,h,'TRCK')))
  endif
  if LoadInteger(HeroStats,h,'INTS')>0 or GetUnitAbilityLevel(udg_Hero[GetPlayerId(p)],'A3HQ')>0 then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('n0HM')+" "+I2S(LoadInteger(HeroStats,GetHandleId(GetTriggerPlayer()),'INTS')))
  endif
  if LoadInteger(HeroStats,h,'GGRD')>0 then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('n0GQ')+" "+I2S(LoadInteger(HeroStats,h,'GGRD')))
  endif
  if LoadInteger(HeroStats,h,'DUEL')>0 then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('TX0P')+" "+I2S(LoadInteger(HeroStats,h,'DUEL')))
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('TX0Q')+" "+I2S(LoadInteger(HeroStats,h,'DUEL'+1)))
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('TX0R')+" "+I2S(LoadInteger(HeroStats,h,'DUEL'+2)))
  endif
  set k=LoadInteger(HeroStats,h,'HOOK')
  set i=LoadInteger(HeroStats,h,'HOOK'+1)
  if i>0 then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('n0EL')+" "+R2S(I2R(k)/I2R(i)*100)+"% ("+I2S(k)+"/"+I2S(i)+")")
  endif
  if LoadInteger(HeroStats,h,'FLSH')>0 then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('n09R')+" "+I2S(LoadInteger(HeroStats,h,'FLSH'))+" "+GetObjectName('n09S'))
  endif
  call Func2087(p,YUR)
  set i=LoadInteger(HeroStats,h,'ARRW')
  set k=LoadInteger(HeroStats,h,'ARRW'+1)
  if k>0 then
    call DisplayTimedTextToPlayer(YUR,0,0,10.00,GetObjectName('n0GM')+" "+R2S(I2R(i)/I2R(k)*100)+"% ("+I2S(i)+"/"+I2S(k)+")")
  endif
  call Func2088(p,YUR)
endfunction

function Func2090 takes nothing returns nothing
  call Func2089(GetTriggerPlayer(),GetTriggerPlayer())
endfunction

function Func2091 takes nothing returns nothing
  if IsSentinel(GetTriggerPlayer())then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Sentinels[1])]+PlayerNames[GetPlayerId(Sentinels[1])]+"|r: ")
    call Func2089(Sentinels[1],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Sentinels[2])]+PlayerNames[GetPlayerId(Sentinels[2])]+"|r: ")
    call Func2089(Sentinels[2],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Sentinels[3])]+PlayerNames[GetPlayerId(Sentinels[3])]+"|r: ")
    call Func2089(Sentinels[3],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Sentinels[4])]+PlayerNames[GetPlayerId(Sentinels[4])]+"|r: ")
    call Func2089(Sentinels[4],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Sentinels[5])]+PlayerNames[GetPlayerId(Sentinels[5])]+"|r: ")
    call Func2089(Sentinels[5],GetTriggerPlayer())
  endif
  if IsScourge(GetTriggerPlayer())then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Scourges[1])]+PlayerNames[GetPlayerId(Scourges[1])]+"|r: ")
    call Func2089(Scourges[1],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Scourges[2])]+PlayerNames[GetPlayerId(Scourges[2])]+"|r: ")
    call Func2089(Scourges[2],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Scourges[3])]+PlayerNames[GetPlayerId(Scourges[3])]+"|r: ")
    call Func2089(Scourges[3],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Scourges[4])]+PlayerNames[GetPlayerId(Scourges[4])]+"|r: ")
    call Func2089(Scourges[4],GetTriggerPlayer())
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,udg_Colors[GetPlayerId(Scourges[5])]+PlayerNames[GetPlayerId(Scourges[5])]+"|r: ")
    call Func2089(Scourges[5],GetTriggerPlayer())
  endif
endfunction

function Func2092 takes player whichPlayer returns string
  local string ZJE=GetObjectName('n0GB')
  set ZJE=str_replace(ZJE,"$c1","|c00ff0303")
  set ZJE=str_replace(ZJE,"$p1",udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r")
  return ZJE
endfunction

function Func2093 takes nothing returns string
  local string ZJE=GetObjectName('n0GA')
  set ZJE=str_replace(ZJE,"$c1","|c006699CC")
  set ZJE=str_replace(ZJE,"$c2","|c00ff0303")
  return ZJE
endfunction

function Func2094 takes nothing returns nothing
  local integer ZAE=1
  local unit source
  if boolean103 then
    loop
      exitwhen ZAE>5
      set source=udg_Hero[GetPlayerId(Sentinels[ZAE])]
      if source!=null then
        if integer094==2 then
          call PA_RestoreUnitColor(source)
        endif
        call UnitSetUsesAltIcon(source,false)
      endif
      set source=udg_Hero[GetPlayerId(Scourges[ZAE])]
      if source!=null then
        if integer094==2 then
          call PA_RestoreUnitColor(source)
        endif
        call UnitSetUsesAltIcon(source,false)
      endif
      set ZAE=ZAE+1
    endloop
    set source=null
  endif
endfunction

function Func2095 takes player whichPlayer,player FNO returns string
  local string ZJE=GetObjectName('n0G2')
  set ZJE=str_replace(ZJE,"$c1","|c006699CC")
  set ZJE=str_replace(ZJE,"$c1","|c006699CC")
  set ZJE=str_replace(ZJE,"$c1","|c006699CC")
  set ZJE=str_replace(ZJE,"$c1","|c006699CC")
  set ZJE=str_replace(ZJE,"$c2","|c00ff0303")
  set ZJE=str_replace(ZJE,"$c2","|c00ff0303")
  set ZJE=str_replace(ZJE,"$p1",udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r")
  set ZJE=str_replace(ZJE,"$p2",udg_Colors[GetPlayerId(FNO)]+(PlayerNames[GetPlayerId(FNO)])+"|r")
  return ZJE
endfunction

function Func2096 takes string ZJE,string I3X returns string
  local string VDO=GetObjectName('n0FV')
  set VDO=str_replace(VDO,"$c1","|c006699CC")
  set VDO=str_replace(VDO,"$c1","|c006699CC")
  set VDO=str_replace(VDO,"$c1","|c006699CC")
  set VDO=str_replace(VDO,"$c1","|c006699CC")
  set VDO=str_replace(VDO,"$p1",ZJE)
  set VDO=str_replace(VDO,"$p2",I3X)
  return VDO
endfunction

function Func2097 takes player whichPlayer returns string
  local string ZJE=GetObjectName('n0FS')
  set ZJE=str_replace(ZJE,"$p2",udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r")
  set ZJE=str_replace(ZJE,"$c1","|c006699CC")
  return ZJE
endfunction

function Func2098 takes player whichPlayer returns nothing
  local integer ZAE
  local integer QIE
  if(IsSentinel(whichPlayer))then
    set ZAE=1
    set QIE=5
    loop
      exitwhen ZAE>QIE
      if(Sentinels[ZAE]!=whichPlayer)then
        if(IsPlayer(Sentinels[ZAE]))then
          call SetPlayerAllianceStateBJ(whichPlayer,Sentinels[ZAE],4)
        endif
      endif
      set ZAE=ZAE+1
    endloop
  else
    set ZAE=1
    set QIE=5
    loop
      exitwhen ZAE>QIE
      if(Scourges[ZAE]!=whichPlayer)then
        if(IsPlayer(Scourges[ZAE]))then
          call SetPlayerAllianceStateBJ(whichPlayer,Scourges[ZAE],4)
        endif
      endif
      set ZAE=ZAE+1
    endloop
  endif
endfunction

function Func2099 takes nothing returns nothing
  if GetOwningPlayer(GetEnumUnit())==player008 then
    call SetUnitOwner(GetEnumUnit(),player009,true)
  elseif GetOwningPlayer(GetEnumUnit())==player009 then
    call SetUnitOwner(GetEnumUnit(),player008,true)
  endif
endfunction

function Func2100 takes unit source,player whichPlayer returns nothing
  local real result
  local real ZEE
  local real ZWE
  local real ZYE
  local integer ZAE
  local item AVX
  if IsSentinel(whichPlayer)then
    set result=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_UD)
    set ZWE=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set ZYE=GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    set result=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_NE)
    set ZWE=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set ZYE=GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
  call SetUnitX(source,result)
  call SetUnitY(source,ZEE)
  if IsCourier(source)then
    call IssueImmediateOrderByIdExFunc(source,852246)
  endif
  if IsUnitType(source,UNIT_TYPE_HERO)then
    call SaveBoolean(HY,(GetHandleId(source)),140,(true))
    call SaveInteger(HY,(GetHandleId(source)),4259,2)
    call UnitRemoveAbility(source,'A04R')
    call SetUnitInvulnerable(source,false)
    call PauseUnit(source,false)
    set ZAE=0
    loop
      exitwhen ZAE>5
      set AVX=UnitItemInSlot(source,ZAE)
      if GetUnitTypeId(source)!='H00J' and AVX!=null and(GetItemPlayer(AVX)!=GetOwningPlayer(source)and GetIndex(AVX)!=integer265 and GetIndex(AVX)!=integer266)and GetItemTypeId(AVX)!=Item_Real[Aegis]then
        call UnitRemoveItem(source,AVX)
      endif
      set ZAE=ZAE+1
    endloop
  endif
  call SetUnitX(source,ZWE)
  call SetUnitY(source,ZYE)
  call SetUnitColor(source,GetPlayerColor(whichPlayer))
  set AVX=null
endfunction

function Func2101 takes nothing returns boolean
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or IsCourier(GetFilterUnit())then
    call Func2100(GetFilterUnit(),player010)
  elseif GetUnitTypeId(GetFilterUnit())=='ncop' then
    call IssueImmediateOrderByIdExFunc(GetFilterUnit(),852246)
  elseif GetUnitTypeId(GetFilterUnit())=='u00B' then
    return true
  endif
  return false
endfunction

function Func2102 takes item AVX,player whichPlayer returns nothing
  local real result
  local real ZEE
  if IsSentinel(whichPlayer)then
    set result=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_NE)
  else
    set result=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_UD)
  endif
  call SetItemPosition(AVX,result,ZEE)
endfunction

function Func2103 takes nothing returns nothing
  if GetItemPlayer(GetEnumItem())==player010 then
    call Func2102(GetEnumItem(),player010)
  endif
endfunction

function Func2104 takes player p1,player p2 returns nothing
  local group g=GetAvailableGroup()
  local group gg=GetAvailableGroup()
  set player010=p1
  call GroupEnumUnitsOfPlayer(g,p1,Condition(function Func2101))
  set player010=p2
  call GroupEnumUnitsOfPlayer(gg,p2,Condition(function Func2101))
  call ForGroup(g,function Func2099)
  call ForGroup(gg,function Func2099)
  set player010=p1
  call EnumItemsInRect(GetWorldBounds(),Condition(function ReturnTrue),function Func2103)
  set player010=p2
  call EnumItemsInRect(GetWorldBounds(),Condition(function ReturnTrue),function Func2103)
  call KillGroup(g)
  call KillGroup(gg)
  set g=null
  set gg=null
endfunction

function Func2105 takes player whichPlayer,player FNO returns nothing
  local integer ZAE
  local integer QIE
  local integer ZBE
  local integer ZCE
  local integer JUX
  local real result
  local real ZEE
  local real ZWE
  local real ZYE
  local player FBO
  local string ZJE=udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r"
  local string I3X=udg_Colors[GetPlayerId(FNO)]+(PlayerNames[GetPlayerId(FNO)])+"|r"
  local integer XPO
  if IsPlayer(whichPlayer)then
    call SaveBoolean(UTable,GetPlayerId(whichPlayer),'00GG',false)
  endif
  if IsPlayer(FNO)then
    call SaveBoolean(UTable,GetPlayerId(FNO),'00GG',false)
  endif
  set XPO=ReliableGold[GetPlayerId(whichPlayer)]
  set ReliableGold[GetPlayerId(whichPlayer)]=ReliableGold[GetPlayerId(FNO)]
  set ReliableGold[GetPlayerId(FNO)]=XPO
  if IsSentinel(whichPlayer)then
    set result=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_UD)
  else
    set result=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set ZEE=GetRectCenterY(gg_rct_Hero_Creation_NE)
  endif
  if IsSentinel(FNO)then
    set ZWE=GetRectCenterX(gg_rct_Hero_Creation_UD)
    set ZYE=GetRectCenterY(gg_rct_Hero_Creation_UD)
  else
    set ZWE=GetRectCenterX(gg_rct_Hero_Creation_NE)
    set ZYE=GetRectCenterY(gg_rct_Hero_Creation_NE)
  endif
  set ZBE=1
  loop
    exitwhen ZBE>5
    if Sentinels[ZBE]==whichPlayer or Scourges[ZBE]==whichPlayer then
      set ZCE=ZBE
    endif
    if Sentinels[ZBE]==FNO or Scourges[ZBE]==FNO then
      set JUX=ZBE
    endif
    set ZBE=ZBE+1
  endloop
  if IsSentinel(whichPlayer)then
    set Scourges[JUX]=whichPlayer
    set Sentinels[ZCE]=FNO
  else
    set Sentinels[JUX]=whichPlayer
    set Scourges[ZCE]=FNO
  endif
  call SetPlayerTeam(Sentinels[0],0)
  call SetPlayerTeam(Sentinels[1],0)
  call SetPlayerTeam(Sentinels[2],0)
  call SetPlayerTeam(Sentinels[3],0)
  call SetPlayerTeam(Sentinels[4],0)
  call SetPlayerTeam(Sentinels[5],0)
  call SetPlayerTeam(Scourges[0],1)
  call SetPlayerTeam(Scourges[1],1)
  call SetPlayerTeam(Scourges[2],1)
  call SetPlayerTeam(Scourges[3],1)
  call SetPlayerTeam(Scourges[4],1)
  call SetPlayerTeam(Scourges[5],1)
  call Func0948()
  set ZAE=0
  set QIE=0
  loop
    exitwhen ZAE>5
    loop
      exitwhen QIE>5
      call SetPlayerAllianceStateBJ(Sentinels[ZAE],Sentinels[QIE],3)
      call SetPlayerAllianceStateBJ(Scourges[ZAE],Scourges[QIE],3)
      call SetPlayerAllianceStateBJ(Sentinels[ZAE],Scourges[QIE],0)
      call SetPlayerAllianceStateBJ(Scourges[ZAE],Sentinels[QIE],0)
      set QIE=QIE+1
    endloop
    set QIE=0
    set ZAE=ZAE+1
  endloop
  call ForceClear(Force_Elfs)
  call ForceClear(Force_Unds)
  call ForceAddPlayer(Force_Elfs,Sentinels[0])
  call ForceAddPlayer(Force_Elfs,Sentinels[1])
  call ForceAddPlayer(Force_Elfs,Sentinels[2])
  call ForceAddPlayer(Force_Elfs,Sentinels[3])
  call ForceAddPlayer(Force_Elfs,Sentinels[4])
  call ForceAddPlayer(Force_Elfs,Sentinels[5])
  call ForceAddPlayer(Force_Unds,Scourges[0])
  call ForceAddPlayer(Force_Unds,Scourges[1])
  call ForceAddPlayer(Force_Unds,Scourges[2])
  call ForceAddPlayer(Force_Unds,Scourges[3])
  call ForceAddPlayer(Force_Unds,Scourges[4])
  call ForceAddPlayer(Force_Unds,Scourges[5])
  call ExecuteFunc("Func0949")
  call Func2104(whichPlayer,FNO)
  set boolean113=true
  call PanCameraToTimedForPlayer(whichPlayer,result,ZEE,0)
  call PanCameraToTimedForPlayer(FNO,ZWE,ZYE,0)
  call StorePlayersColorValues()
  set boolean112=false
  if trigger029!=null then
    call TriggerEvaluate(trigger029)
  endif
  if GetPlayerSlotState(FNO)==PLAYER_SLOT_STATE_EMPTY then
    set PlayerNames[GetPlayerId(FNO)]=GetPlayerName(FNO)
  endif
  set ZBE=1
  loop
    exitwhen ZBE>5
    set FBO=Sentinels[ZBE]
    if IsPlayerLeaver(FBO)then
      call Func2098(FBO)
    endif
    set FBO=Scourges[ZBE]
    if IsPlayerLeaver(FBO)then
      call Func2098(FBO)
    endif
    set ZBE=ZBE+1
  endloop
  call Func2094()
  call Trig_display_leaderboard_Actions()
  call ClearTextMessages()
  call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20," ")
  call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,Func2096(ZJE,I3X))
  call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20," ")
  call Func0928(whichPlayer)
  call Func0928(FNO)
  set boolean018=true
endfunction

function Func2106 takes nothing returns nothing
  local integer ZAE=1
  local player whichPlayer
  set integer099=0
  set integer100=0
  loop
    exitwhen ZAE>5
    set whichPlayer=Sentinels[ZAE]
    if IsPlayer(whichPlayer)then
      set integer100=integer100+1
      if booleans019[GetPlayerId(whichPlayer)]then
        set integer099=integer099+1
      endif
    endif
    set whichPlayer=Scourges[ZAE]
    if IsPlayer(whichPlayer)then
      set integer100=integer100+1
      if booleans019[GetPlayerId(whichPlayer)]then
        set integer099=integer099+1
      endif
    endif
    set ZAE=ZAE+1
  endloop
endfunction

function Func2107 takes nothing returns nothing
  set boolean112=false
  if trigger029!=null then
    call TriggerEvaluate(trigger029)
  endif
  call ClearTextMessages()
  call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,Func2092(GetTriggerPlayer()))
endfunction

function Func2108 takes nothing returns nothing
  local integer ZAE=1
  local player whichPlayer
  local integer QIE=0
  local integer ZBE=0
  local integer ZCE=0
  if booleans019[GetPlayerId(GetTriggerPlayer())]==false then
    set booleans019[GetPlayerId(GetTriggerPlayer())]=true
    call Func2106()
    call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,udg_Colors[GetPlayerId(GetTriggerPlayer())]+(PlayerNames[GetPlayerId((GetTriggerPlayer()))])+"|r|c006699CC "+GetObjectName('n0FT')+"|r ("+I2S(integer099)+"/"+I2S(integer100)+")")
  endif
  loop
    exitwhen ZAE>5
    set whichPlayer=Sentinels[ZAE]
    if IsPlayer(whichPlayer)and booleans019[GetPlayerId(whichPlayer)]==false then
      set QIE=QIE+1
      set ZCE=ZCE+1
    endif
    if IsPlayer(whichPlayer)and booleans019[GetPlayerId(whichPlayer)]then
      set ZBE=ZBE+1
      set ZCE=ZCE+1
    endif
    set whichPlayer=Scourges[ZAE]
    if IsPlayer(whichPlayer)and booleans019[GetPlayerId(whichPlayer)]==false then
      set QIE=QIE+1
      set ZCE=ZCE+1
    endif
    if IsPlayer(whichPlayer)and booleans019[GetPlayerId(whichPlayer)]then
      set ZBE=ZBE+1
      set ZCE=ZCE+1
    endif
    set ZAE=ZAE+1
  endloop
  if QIE<2 and ZBE>=R2I(ZCE/2)then
    if(ZCE==2 and ZBE>1)or ZCE!=2 then
      call Func2105(player008,player009)
    endif
  endif
endfunction

function Func2109 takes nothing returns nothing
  local integer ZAE=1
  local player whichPlayer=GetTriggerPlayer()
  local player FNO
  local string ZJE
  local string I3X
  loop
    exitwhen ZAE>5
    set ZJE=""
    set I3X=""
    if IsSentinel(whichPlayer)then
      set FNO=Scourges[ZAE]
    else
      set FNO=Sentinels[ZAE]
    endif
    if GetPlayerSlotState(FNO)==PLAYER_SLOT_STATE_LEFT and GetPlayerController(FNO)==MAP_CONTROL_USER then
      set ZJE="|c00ff0303["+GetObjectName('n0FY')+"]|r"
    endif
    if udg_Hero[GetPlayerId(FNO)]!=null then
      set I3X=" ("+GetUnitName(udg_Hero[GetPlayerId(FNO)])+")"
    endif
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,GetObjectName('n083')+"|c006699CC "+"-switch "+I2S(ZAE)+"|r "+GetObjectName('n0FQ')+" "+udg_Colors[GetPlayerId(FNO)]+(PlayerNames[GetPlayerId(FNO)])+I3X+"|r "+ZJE)
    set ZAE=ZAE+1
  endloop
endfunction

function Func2110 takes nothing returns boolean
  local integer ZAE=0
  if boolean112 then
    call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,"|c00ff0303"+GetObjectName('n0FU')+"|r")
  endif
  set boolean148=true
  set boolean112=false
  set player008=null
  set player009=null
  loop
    exitwhen ZAE>16
    set booleans019[ZAE]=false
    set ZAE=ZAE+1
  endloop
  call CleanTrigger(GetTriggeringTrigger())
  set trigger029=null
  return false
endfunction

function Func2111 takes player whichPlayer,player FNO returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=0
  local string ZJE
  local string I3X
  local string VDO
  local string ZCR
  local player FBO
  local string ZDR
  set boolean148=false
  set boolean112=true
  set player008=whichPlayer
  set player009=FNO
  loop
    exitwhen ZAE>16
    set booleans019[ZAE]=false
    set ZAE=ZAE+1
  endloop
  set booleans019[GetPlayerId(player008)]=true
  call TriggerRegisterTimerEvent(RBX,60,false)
  call TriggerAddCondition(RBX,Condition(function Func2110))
  set trigger029=RBX
  set ZJE=Func2095(whichPlayer,FNO)
  set ZDR=Func2093()
  set ZAE=1
  loop
    exitwhen ZAE>5
    set FBO=Sentinels[ZAE]
    if FBO!=whichPlayer then
      call DisplayTimedTextToPlayer(FBO,0,0,20,ZJE)
      call DisplayTimedTextToPlayer(FBO,0,0,20,ZDR)
    endif
    set FBO=Scourges[ZAE]
    if FBO!=whichPlayer then
      call DisplayTimedTextToPlayer(FBO,0,0,20,ZJE)
      call DisplayTimedTextToPlayer(FBO,0,0,20,ZDR)
    endif
    set ZAE=ZAE+1
  endloop
  set ZJE=Func2097(FNO)
  call DisplayTimedTextToPlayer(whichPlayer,0,0,20,ZJE)
  set RBX=null
endfunction

function Func2112 takes nothing returns nothing
  if Mode_SO==false then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0GX'))
    return
  endif
  if GetEventPlayerChatString()=="-switch accept"or GetEventPlayerChatString()=="-ok"then
    if boolean112 then
      call Func2108()
    endif
  elseif GetEventPlayerChatString()=="-no"then
    if boolean112 then
      call Func2107()
    endif
  elseif GetEventPlayerChatString()=="-switch"then
    if boolean112==false then
      call Func2109()
    endif
  elseif boolean112==false then
    set integer098=S2I(SubString(GetEventPlayerChatString(),8,StringLength(GetEventPlayerChatString())))
    if integer098>0 and integer098<6 then
      if IsSentinel(GetTriggerPlayer())then
        if HeroHasBeenUnlocked[GetPlayerId(Scourges[integer098])]==false then
          call Func2111(GetTriggerPlayer(),Scourges[integer098])
        else
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0HY'))
        endif
      else
        if HeroHasBeenUnlocked[GetPlayerId(Sentinels[integer098])]==false then
          call Func2111(GetTriggerPlayer(),Sentinels[integer098])
        else
          call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0HY'))
        endif
      endif
    endif
  endif
endfunction

function Func2113 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  set RBX=null
  return false
endfunction

function ChatCommand_Sleep takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=udg_Hero[GetPlayerId(GetTriggerPlayer())]
  call SaveEffectHandle(HY,(h),32,(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Sleep\\SleepTarget.mdl",u,"overhead")))
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerAddCondition(t,Condition(function Func2113))
  call SetUnitAnimation(u,"sleep")
  set t=null
  set u=null
endfunction

function ChatCommand_Calm takes nothing returns nothing
  call SetUnitAnimationByIndex(udg_Hero[GetPlayerId(GetTriggerPlayer())],23)
endfunction

function Func2116 takes integer ZAE,integer QIE returns integer
  if QIE==0 then
    return ZAE
  elseif QIE==1 then
    if ZAE=='Cdrt' then
      return'Cdrt'
    endif
    if ZAE=='Cdrd' then
      return'Idki'
    endif
    if ZAE=='Cvin' then
      return'Isnw'
    endif
    if ZAE=='Cgrs' then
      return'Isnw'
    endif
    if ZAE=='Clvg' then
      return'Isnw'
    endif
    if ZAE=='Zvin' then
      return'Idki'
    endif
    if ZAE=='Zbks' then
      return'Ibsq'
    endif
    if ZAE=='Ndrd' then
      return'Ibsq'
    endif
  elseif QIE==2 then
    if ZAE=='Cdrt' then
      return'Cdrt'
    endif
    if ZAE=='Cdrd' then
      return'Yblm'
    endif
    if ZAE=='Cvin' then
      return'Ybtl'
    endif
    if ZAE=='Cgrs' then
      return'Cgrs'
    endif
    if ZAE=='Clvg' then
      return'Clvg'
    endif
    if ZAE=='Zvin' then
      return'Yrtl'
    endif
    if ZAE=='Zbks' then
      return'Ywmb'
    endif
    if ZAE=='Ndrd' then
      return'Jbtl'
    endif
  elseif QIE==3 then
    if ZAE=='Cdrt' then
      return'Cdrt'
    endif
    if ZAE=='Cdrd' then
      return'Yblm'
    endif
    if ZAE=='Cvin' then
      return'Ybtl'
    endif
    if ZAE=='Cgrs' then
      return'Yrtl'
    endif
    if ZAE=='Clvg' then
      return'Clvg'
    endif
    if ZAE=='Zvin' then
      return'Yrtl'
    endif
    if ZAE=='Zbks' then
      return'Ybtl'
    endif
    if ZAE=='Ndrd' then
      return'Jbtl'
    endif
  elseif QIE==4 then
    if ZAE=='Cdrt' then
      return'Cdrt'
    endif
    if ZAE=='Cdrd' then
      return'Crck'
    endif
    if ZAE=='Cvin' then
      return'Avin'
    endif
    if ZAE=='Cgrs' then
      return'Agrd'
    endif
    if ZAE=='Clvg' then
      return'Alvd'
    endif
    if ZAE=='Zvin' then
      return'Agrd'
    endif
    if ZAE=='Zbks' then
      return'Crck'
    endif
    if ZAE=='Ndrd' then
      return'Cvin'
    endif
  elseif QIE==5 then
    if ZAE=='Cdrt' then
      return'Cdrt'
    endif
    if ZAE=='Cdrd' then
      return'Qdrr'
    endif
    if ZAE=='Cvin' then
      return'Qcbp'
    endif
    if ZAE=='Cgrs' then
      return'Qgrt'
    endif
    if ZAE=='Clvg' then
      return'Qgrs'
    endif
    if ZAE=='Zvin' then
      return'Qgrt'
    endif
    if ZAE=='Zbks' then
      return'Qcbp'
    endif
    if ZAE=='Ndrd' then
      return'Qstp'
    endif
  elseif QIE==6 then
    if ZAE=='Cdrt' then
      return'Cdrt'
    endif
    if ZAE=='Cdrd' then
      return'Dbrk'
    endif
    if ZAE=='Cvin' then
      return'Dgrs'
    endif
    if ZAE=='Cgrs' then
      return'Odrt'
    endif
    if ZAE=='Clvg' then
      return'Ofst'
    endif
    if ZAE=='Zvin' then
      return'Drds'
    endif
    if ZAE=='Zbks' then
      return'Dsqd'
    endif
    if ZAE=='Ndrd' then
      return'Osmb'
    endif
  elseif QIE==7 then
    if ZAE=='Cdrt' then
      return'Cdrt'
    endif
    if ZAE=='Cdrd' then
      return'Gbrk'
    endif
    if ZAE=='Cvin' then
      return'Glvc'
    endif
    if ZAE=='Cgrs' then
      return'Gdrt'
    endif
    if ZAE=='Clvg' then
      return'Gdkr'
    endif
    if ZAE=='Zvin' then
      return'Grds'
    endif
    if ZAE=='Zbks' then
      return'Gsqd'
    endif
    if ZAE=='Ndrd' then
      return'Ggrs'
    endif
  endif
  return 0
endfunction

function Func2117 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=(LoadReal(HY,(ZAE),149))
  local real ZEE=(LoadReal(HY,(ZAE),150))
  local real ZWE=(LoadReal(HY,(ZAE),151))
  local real ZYE=128
  local real ICX
  local real N1X
  local integer QIE=(LoadInteger(HY,(ZAE),152))
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  local integer ZBE=(LoadInteger(HY,(ZAE),153))
  loop
    exitwhen result>ZWE
    loop
      exitwhen ZEE>8192
      if LocalPlayer==whichPlayer then
        set ZBE=ZBE+1
        set ICX=result
        set N1X=ZEE
        call SetTerrainType(ICX,N1X,Func2116(integers058[ZBE],QIE),integers062[ZBE],1,0)
        set ICX=-result
        set N1X=ZEE
        call SetTerrainType(ICX,N1X,Func2116(integers059[ZBE],QIE),integers063[ZBE],1,0)
        set ICX=-result
        set N1X=-ZEE
        call SetTerrainType(ICX,N1X,Func2116(integers060[ZBE],QIE),integers064[ZBE],1,0)
        set ICX=result
        set N1X=-ZEE
        call SetTerrainType(ICX,N1X,Func2116(integers061[ZBE],QIE),integers065[ZBE],1,0)
      endif
      set ZEE=ZEE+ZYE
    endloop
    set ZEE=0
    set result=result+ZYE
  endloop
  set ZWE=ZWE+256
  call SaveReal(HY,(ZAE),149,((result)*1.0))
  call SaveReal(HY,(ZAE),150,((ZEE)*1.0))
  call SaveInteger(HY,(ZAE),153,(ZBE))
  call SaveReal(HY,(ZAE),151,((ZWE)*1.0))
  if ZWE>8192 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  return false
endfunction

function Func2118 takes nothing returns nothing
  if GetTriggerPlayer()==LocalPlayer and(GetDestructableTypeId(GetEnumDestructable())=='ATtr' or GetDestructableTypeId(GetEnumDestructable())=='B002')then
    call SetDestructableAnimation(GetEnumDestructable(),"stand alternate")
  endif
endfunction

function Func2119 takes nothing returns nothing
  if GetTriggerPlayer()==LocalPlayer and(GetDestructableTypeId(GetEnumDestructable())=='ATtr' or GetDestructableTypeId(GetEnumDestructable())=='B002')then
    call SetDestructableAnimation(GetEnumDestructable(),"stand")
  endif
endfunction

function Func2120 takes integer ZAE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  if ZAE==1 then
    call EnumDestructablesInRectAll(GetWorldBounds(),function Func2118)
  else
    call EnumDestructablesInRectAll(GetWorldBounds(),function Func2119)
  endif
  set integers066[GetPlayerId(GetTriggerPlayer())]=ZAE
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func2117))
  call SaveInteger(HY,(QIE),152,(ZAE))
  call SaveReal(HY,(QIE),149,(0*1.0))
  call SaveReal(HY,(QIE),150,(0*1.0))
  call SaveReal(HY,(QIE),151,(160*1.0))
  call SavePlayerHandle(HY,(QIE),54,(GetTriggerPlayer()))
  set RBX=null
endfunction

function Func2121 takes nothing returns nothing
  if booleans015[GetPlayerId(GetTriggerPlayer())]==false then
    set integers057[GetPlayerId(GetTriggerPlayer())]=integers057[GetPlayerId(GetTriggerPlayer())]+1
    if integers057[GetPlayerId(GetTriggerPlayer())]<9 then
      if GetEventPlayerChatString()=="-terrain"or GetEventPlayerChatString()=="-terrain default"then
        call Func2120(0)
      elseif GetEventPlayerChatString()=="-terrain snow"then
        call Func2120(1)
      elseif GetEventPlayerChatString()=="-terrain city1"then
        call Func2120(2)
      elseif GetEventPlayerChatString()=="-terrain city2"then
        call Func2120(3)
      elseif GetEventPlayerChatString()=="-terrain jungle"then
        call Func2120(4)
      elseif GetEventPlayerChatString()=="-terrain highlands"then
        call Func2120(5)
      elseif GetEventPlayerChatString()=="-terrain reddungeon"then
        call Func2120(6)
      elseif GetEventPlayerChatString()=="-terrain bluedungeon"then
        call Func2120(7)
      endif
    else
      call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0GL'))
    endif
  endif
endfunction

function Func2122 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real FYX=(LoadReal(HY,(h),149))
  local real FZX=(LoadReal(HY,(h),150))
  local real XXO=(LoadReal(HY,(h),151))
  local real FGE=128
  local real x
  local real y
  loop
    exitwhen FYX>XXO
    loop
      exitwhen FZX>8192
      set integer097=integer097+1
      set x=FYX
      set y=FZX
      set integers058[integer097]=GetTerrainType(x,y)
      set integers062[integer097]=GetTerrainVariance(x,y)
      set x=-FYX
      set y=FZX
      set integers059[integer097]=GetTerrainType(x,y)
      set integers063[integer097]=GetTerrainVariance(x,y)
      set x=-FYX
      set y=-FZX
      set integers060[integer097]=GetTerrainType(x,y)
      set integers064[integer097]=GetTerrainVariance(x,y)
      set x=FYX
      set y=-FZX
      set integers061[integer097]=GetTerrainType(x,y)
      set integers065[integer097]=GetTerrainVariance(x,y)
      set FZX=FZX+FGE
    endloop
    set FZX=0
    set FYX=FYX+FGE
  endloop
  set XXO=XXO+256
  call SaveReal(HY,(h),149,FYX)
  call SaveReal(HY,(h),150,FZX)
  call SaveReal(HY,(h),151,XXO)
  if XXO>8192 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  return false
endfunction

function Func2123 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.25,true)
  call TriggerAddCondition(t,Condition(function Func1769))
  set timer008=CreateTimer()
  call TimerStart(timer008,integer095+1,false,null)
  call AddUnitToStock(unit039,'h02C',2,4)
  call AddUnitToStock(unit086,'h02C',2,4)
  if boolean014 then
    call Func1196(unit044,Item_SellerUnit[RecipeFlyingCourier],-999.,201)
    call Func1196(unit091,Item_SellerUnit[RecipeFlyingCourier],-999.,201)
  else
    call Func1196(unit044,Item_SellerUnit[RecipeFlyingCourier],-1000.+integer095+60*3.+TimerGetElapsed(GlobalTimer),201)
    call Func1196(unit091,Item_SellerUnit[RecipeFlyingCourier],-1000.+integer095+60*3.+TimerGetElapsed(GlobalTimer),201)
  endif
  call Func1196(unit039,Item_SellerUnit[integer012],-1000.+integer095+60*10.+TimerGetElapsed(GlobalTimer),201)
  call Func1196(unit086,Item_SellerUnit[integer012],-1000.+integer095+60*10.+TimerGetElapsed(GlobalTimer),201)
  set t=null
endfunction

function Func2124 takes string ZJE returns boolean
  if ZJE=="-ma"or ZJE=="-ms"or ZJE=="-cs"or ZJE=="-cson"or ZJE=="-disablehelp"or ZJE=="-enablehelp"or ZJE=="-unstuck"then
    return true
  elseif ZJE=="-swaphero"or ZJE=="-showmsg"or ZJE=="-hidemsg"or ZJE=="-showdeny"or ZJE=="-hidedeny"or ZJE=="-weather rain"or ZJE=="-weather snow"or ZJE=="-weather moonlight"or ZJE=="-weather wind"or ZJE=="-weather random"or ZJE=="-weather off"or ZJE=="-denyinfo"or ZJE=="-di"or ZJE=="-deathon"or ZJE=="-don"or ZJE=="-deathoff"or ZJE=="-doff"or ZJE=="-roll"or ZJE=="-hideheronames"or ZJE=="-hhn"or ZJE=="-test"or ZJE=="-mute"or ZJE=="-wtf"or ZJE=="-fleshstr"or ZJE=="-fs"or ZJE=="-switchon"then
    return true
  endif
  return false
endfunction

function Func2125 takes nothing returns boolean
  return not boolean063
endfunction

function Func2126 takes string ZJE returns nothing
  if string005==""then
    set string005="|c006699CC"+ZJE+"|r"
  else
    set string005=string005+"/|c006699CC"+ZJE+"|r"
  endif
endfunction

function Func2127 takes string ZJE,integer ZAE,integer QIE returns string
  return SubString(ZJE,0,ZAE)+SubString(ZJE,QIE,StringLength(ZJE))
endfunction

function Func2128 takes string s returns string
  local integer l=StringLength(s)
  local string ls
  local string f=""
  local integer i=0
  loop
    exitwhen(i==l)
    set ls=StringCase(SubString(s,i,i+1),false)
    if not(ls==StringCase(ls,true))then
      set f=f+ls
    endif
    set i=i+1
  endloop
  return f
endfunction

function Func2129 takes boolean b returns integer
  if b then
    return 1
  endif
  return 0
endfunction

function Func2130 takes string s,integer Z_R returns nothing
  local string s1=Func2128(s)
  local string array s2
  local boolean array boolean_mode
  local integer k
  local integer length=StringLength(s1)
  local integer i=0
  local integer n=0
  local integer c=0
  local boolean AP
  local boolean AR
  local boolean MM
  local boolean TR
  local boolean DM
  local boolean MR
  local boolean SP
  local boolean AA
  local boolean AI
  local boolean AS
  local boolean ID
  local boolean NP
  local boolean SC
  local boolean EM
  local boolean DU
  local boolean SH
  local boolean VR
  local boolean RV
  local boolean RD
  local boolean OM
  local boolean NT
  local boolean NB
  local boolean NM
  local boolean NS
  local boolean SO
  local boolean NR
  local boolean SD
  local boolean PM
  local boolean MI
  local boolean CM
  local boolean FR
  local boolean MO
  local boolean RO
  local boolean CD
  local boolean RS
  local boolean CP
  local boolean ZM
  local boolean UB
  local boolean TT
  local boolean NC
  local boolean V6I=false
  local boolean V7I=false
  local boolean V8I=false
  set s2[1]="ap"
  set s2[2]="ar"
  set s2[3]="mm"
  set s2[4]="tr"
  set s2[5]="dm"
  set s2[6]="mr"
  set s2[7]="sp"
  set s2[8]="aa"
  set s2[9]="ai"
  set s2[10]="as"
  set s2[11]="id"
  set s2[12]="np"
  set s2[13]="sc"
  set s2[14]="em"
  set s2[15]="du"
  set s2[16]="sh"
  set s2[17]="vr"
  set s2[18]="rv"
  set s2[19]="rd"
  set s2[20]="om"
  set s2[21]="nm"
  set s2[22]="nt"
  set s2[23]="nb"
  set s2[24]="ns"
  set s2[25]="nr"
  set s2[26]="cd"
  set s2[27]="sd"
  set s2[28]="pm"
  set s2[29]="mi"
  set s2[30]="cm"
  set s2[31]="fr"
  set s2[32]="mo"
  set s2[33]="ro"
  set s2[34]="rs"
  set s2[35]="so"
  set s2[36]="zm"
  set s2[37]="cp"
  set s2[38]="ub"
  set s2[39]="tt"
  set s2[40]="nc"
  set k=40
  set i=-1
  loop
    exitwhen i==length-1
    set i=i+1
    set n=i
    loop
      exitwhen n==length
      set n=n+1
      set c=1
      loop
        exitwhen c>k
        if s2[c]==SubString(s1,i,n)then
          set boolean_mode[c]=true
          set c=k+1
          set s1=Func2127(s1,i,n)
          set i=-1
          set length=StringLength(s1)
          set n=length
        else
          set c=c+1
        endif
      endloop
    endloop
  endloop
  set AP=boolean_mode[1]
  set AR=boolean_mode[2]
  set MM=boolean_mode[3]
  set TR=boolean_mode[4]
  set DM=boolean_mode[5]
  set MR=boolean_mode[6]
  set SP=boolean_mode[7]
  set AA=boolean_mode[8]
  set AI=boolean_mode[9]
  set AS=boolean_mode[10]
  set ID=boolean_mode[11]
  set NP=boolean_mode[12]
  set SC=boolean_mode[13]
  set EM=boolean_mode[14]
  set DU=boolean_mode[15]
  set SH=boolean_mode[16]
  set VR=boolean_mode[17]
  set RV=boolean_mode[18]
  set RD=boolean_mode[19]
  set OM=boolean_mode[20]
  set NM=boolean_mode[21]
  set NT=boolean_mode[22]
  set NB=boolean_mode[23]
  set NS=boolean_mode[24]
  set NR=boolean_mode[25]
  set CD=boolean_mode[26]
  set SD=boolean_mode[27]
  set PM=boolean_mode[28]
  set MI=boolean_mode[29]
  set CM=boolean_mode[30]
  set FR=boolean_mode[31]
  set MO=boolean_mode[32]
  set RO=boolean_mode[33]
  set RS=boolean_mode[34]
  set SO=boolean_mode[35]
  set ZM=boolean_mode[36]
  set CP=boolean_mode[37]
  set UB=boolean_mode[38]
  set TT=boolean_mode[39]
  set NC=boolean_mode[40]
  if s1!=""or Func2124(s)then
    return
  endif
  set V7I=MO or RO
  set V8I=AI or AA or AS
  if Func2129(AR)+Func2129(CM)+Func2129(AP)+Func2129(TR)+Func2129(MR)+Func2129(RV)+Func2129(VR)+Func2129(RD)+Func2129(CD)+Func2129(SD)+Func2129(TT)>1 or Func2129(MM)+Func2129(SH)>1 then
    set V6I=true
  endif
  if DM and(CM or TR or MR or SH or RV or RD or CD or SD or TT or VR or MM or SH or V8I or V7I)then
    call Error(PlayerModeTyper,GetObjectName('n02T'))
    return
  endif
  if CM and(SP or ID or NP or SC or EM or DU or OM or NB or NM or NT)then
    set V6I=true
  endif
  if(CM or RD or CD or SD or MR or VR or TT)and(SH or V8I or V7I)then
    set V6I=true
  endif
  if TT and SO then
    set V6I=true
  endif
  if(MM or VR or RV)and CountPlayersInForce(Force_Elfs)!=CountPlayersInForce(Force_Unds)then
    call Error(PlayerModeTyper,GetObjectName('n034'))
    return
  endif
  if V6I then
    call Error(PlayerModeTyper,GetObjectName('n02U'))
    return
  endif
  if TT or ZM or CP or FR or CM or AP or AR or MM or TR or DM or MR or SP or V8I or ID or NP or SC or DU or EM or SH or VR or RV or RD or CD or OM or NB or NM or NT or NS or NR or SD or PM or MI or V7I or RS or SO then
    call DisableTrigger(trigger041)
  else
    return
  endif
  if CM==false then
    call Trig_display_leaderboard_Actions()
    call Func1737()
  endif
  call Func2050()
  set NoHero=Func2128(s)
  if boolean151 then
    call Traffic_RegisterData("Mode"+NoHero,0)
  else
    call Traffic_RegisterData("Mode"+NoHero,GetPlayerId(PlayerModeTyper))
  endif
  set boolean092=false
  if NC then
    call Func2126(GetObjectName('TX2K'))
  endif
  if CM then
    call Func2126(GetObjectName('n0IK'))
  endif
  if TT then
    call Func2126(GetObjectName('n0MQ'))
  endif
  if RD then
    call Func2126(GetObjectName('n0IF'))
  endif
  if CD then
    call Func2126(GetObjectName('n0I1'))
  endif
  if DM then
    call Func2126(GetObjectName('n0IA'))
  endif
  if MM then
    call Func2126(GetObjectName('n0I0'))
  endif
  if AP then
    call Func2126("All Pick")
  endif
  if AR then
    call Func2126(GetObjectName('n0IQ'))
  endif
  if VR then
    call Func2126(GetObjectName('n0IM'))
  endif
  if MR then
    call Func2126(GetObjectName('n0IE'))
  endif
  if TR then
    call Func2126(GetObjectName('n0IB'))
  endif
  if SP then
    call Func2126(GetObjectName('n0IO'))
  endif
  if AA then
    call Func2126(GetObjectName('n0IU'))
  endif
  if AS then
    call Func2126(GetObjectName('n0IP'))
  endif
  if AI then
    call Func2126(GetObjectName('n0IS'))
  endif
  if RO then
    call Func2126(GetObjectName('n0IT'))
  endif
  if MO then
    call Func2126(GetObjectName('n032'))
  endif
  if DU then
    call Func2126(GetObjectName('n0IX'))
  endif
  if ID then
    call Func2126(GetObjectName('n0IZ'))
  endif
  if NP then
    call Func2126(GetObjectName('n0J6'))
  endif
  if SC then
    call Func2126(GetObjectName('n0J7'))
  endif
  if EM then
    call Func2126(GetObjectName('n0J9'))
  endif
  if SH then
    call Func2126(GetObjectName('n0JA'))
  endif
  if RV then
    call Func2126(GetObjectName('n0IW'))
  endif
  if OM then
    call Func2126(GetObjectName('n0IV'))
  endif
  if NM then
    call Func2126(GetObjectName('n0IR'))
  endif
  if NB then
    call Func2126(GetObjectName('n0JB'))
  endif
  if NT then
    call Func2126(GetObjectName('n0J8'))
  endif
  if NS then
    call Func2126(GetObjectName('n0JC'))
  endif
  if NR then
    call Func2126(GetObjectName('n0JF'))
  endif
  if SD then
    call Func2126(GetObjectName('n0J0'))
  endif
  if PM then
    call Func2126(GetObjectName('n0IY'))
  endif
  if MI then
    call Func2126(GetObjectName('n0J4'))
  endif
  if FR then
    call Func2126(GetObjectName('n0JD'))
  endif
  if RS then
    call Func2126(GetObjectName('n0J1'))
  endif
  if SO then
    call Func2126(GetObjectName('n0J2'))
  endif
  if ZM then
    call Func2126(GetObjectName('n0KA'))
  endif
  if CP then
    call Func2126(GetObjectName('n0KC'))
  endif
  if UB then
    call Func2126(GetObjectName('n0L2'))
  endif
  call RunIfTrue("Func2135",AP)
  call RunIfTrue("Func2243",SP)
  call RunIfTrue("Func2244",RS)
  call RunIfTrue("Func2261",UB)
  call RunIfTrue("Func2240",DM)
  call RunIfTrue("Func2233",MM)
  call RunIfTrue("Func2247",SH)
  call RunIfTrue("Func2248",AA)
  call RunIfTrue("Func2250",AI)
  call RunIfTrue("Func2249",AS)
  call RunIfTrue("Func2252",RO)
  call RunIfTrue("Func2251",MO)
  call RunIfTrue("Func2242",DU)
  call RunIfTrue("Func2216",AR)
  call RunIfTrue("Func2223",VR)
  call RunIfTrue("Func2234",TR)
  call RunIfTrue("Func2226",RV)
  call RunIfTrue("Func2170",CM)
  call RunIfTrue("Func2192",RD)
  call RunIfTrue("Func2214",SD)
  call RunIfTrue("Func2241",MR)
  call RunIfTrue("Func2253",ID)
  call RunIfTrue("Func2254",NP)
  call RunIfTrue("Func2255",SC)
  call RunIfTrue("Func2259",OM)
  call RunIfTrue("Func2260",NB)
  call RunIfTrue("Func2263",NT)
  call RunIfTrue("Func2262",NM)
  call RunIfTrue("Func2266",SO)
  call RunIfTrue("Func2264",NS)
  call RunIfTrue("Func2265",NR)
  call RunIfTrue("Func2267",PM)
  call RunIfTrue("Func2273",MI)
  call RunIfTrue("Func2274",FR)
  call RunIfTrue("Func2208",CD)
  call RunIfTrue("Func2276",ZM)
  call RunIfTrue("Func2284",CP)
  call RunIfTrue("modeTT_Init",TT)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00," ")
  if Z_R==1 then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00,udg_Colors[GetPlayerId(PlayerModeTyper)]+(PlayerNames[GetPlayerId(PlayerModeTyper)])+"|r"+" "+GetObjectName('n061')+" "+string005)
  else
    if Z_R!=3 or boolean025==false then
      call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName('n0HN')+" "+string005)
    endif
    set boolean038=false
  endif
  if Z_R!=3 or boolean025==false then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName('n063')+" -gameinfo.")
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00," ")
  endif
  set boolean104=true
  call Func0797(0,0,false)
  if boolean115==false and boolean114==false then
    call Func2123()
  endif
  if SO==false then
    set HeroHasBeenUnlocked[0]=true
    set HeroHasBeenUnlocked[1]=true
    set HeroHasBeenUnlocked[2]=true
    set HeroHasBeenUnlocked[3]=true
    set HeroHasBeenUnlocked[4]=true
    set HeroHasBeenUnlocked[5]=true
    set HeroHasBeenUnlocked[6]=true
    set HeroHasBeenUnlocked[7]=true
    set HeroHasBeenUnlocked[8]=true
    set HeroHasBeenUnlocked[9]=true
    set HeroHasBeenUnlocked[10]=true
    set HeroHasBeenUnlocked[11]=true
    set HeroHasBeenUnlocked[12]=true
    set HeroHasBeenUnlocked[13]=true
    set HeroHasBeenUnlocked[14]=true
    set HeroHasBeenUnlocked[15]=true
    set HeroHasBeenUnlocked[16]=true
  endif
endfunction

function Func2131 takes nothing returns nothing
  call Func2130(GetEventPlayerChatString(),1)
endfunction

function Func2132 takes nothing returns boolean
  call FuncSetMainFuncWork(false)
  if(HCLstring)!=""and boolean104==false then
    set boolean151=true
    call Func2130("-"+(HCLstring),2)
  else
    call TriggerRegisterPlayerChatEvent(trigger041,PlayerModeTyper,"-",false)
  endif
  call SetAttackSpeedLimit(6.)
  call TestLockedPing()
  call DisableOPLimit()
  call ExecuteFunc("Func1853")
  if PlayerId==15 then
    set Memory[1]=1
  endif
  call Func0402()
  return false
endfunction

function Func2133 takes nothing returns nothing
  set boolean007=false
  call Func1014()
  call DelayedCallBackClean()
endfunction

function Func2134 takes nothing returns nothing
  local real JOX=-20+30.-TimerGetElapsed(GlobalTimer)
  set boolean007=true
  call HTE(GetObjectName('TX2U'),JOX)
  call DisplayTimedTextToForceEx(AllPlayers,1.,"  ")
  call DisplayTimedTextToForceEx(AllPlayers,15.,GetObjectName('TX2Q'))
  call DisplayTimedTextToForceEx(AllPlayers,15.,GetObjectName('TX2T'))
  call DisplayTimedTextToForceEx(AllPlayers,1.,"  ")
  call DelayedCallBack(JOX,function Func2133)
endfunction

function Func2135 takes nothing returns nothing
  local location l1=GetRectCenter(gg_rct_Allpick_Sent)
  local location l2=GetRectCenter(gg_rct_Allpick_Scourge)
  local integer i=1
  set boolean067=true
  if false and boolean014==false then
    call Func2134()
  endif
  set integer095=135
  loop
    if IsPlayer(Sentinels[i])then
      call CreateUnitAtLoc(Sentinels[i],'n00C',l2,bj_UNIT_FACING)
    endif
    if IsPlayer(Scourges[i])then
      call CreateUnitAtLoc(Scourges[i],'n00C',l1,bj_UNIT_FACING)
    endif
    set i=i+1
    exitwhen i>5
  endloop
  call RemoveLocation(l1)
  call RemoveLocation(l2)
  set l1=null
  set l2=null
endfunction

function Func2136 takes nothing returns integer
  if player017==Sentinels[1]then
    return 1
  endif
  return 2
endfunction

function Func2137 takes string ZJE,real result,real ZEE,real ZWE,real ZYE,real ICX,boolean ZSE,integer ZAE,integer QIE,integer ZBE returns image
  set image001=CreateImage(ZJE,result,ZEE,0,ZWE-(result/2),ZYE-(ZEE/2),ICX,0,0,0,2)
  call SetImageRenderAlways(image001,true)
  call ShowImage(image001,ZSE)
  call SetImageColor(image001,ZAE,QIE,ZBE,255)
  return image001
endfunction

function Func2138 takes image XNI returns nothing
  call ShowImage(XNI,false)
  call DestroyImage(XNI)
endfunction

function Func2139 takes integer ZAE returns nothing
  local real result=real035+40
  local real ZEE=real036-50
  local integer QIE=255
  local integer ZBE=0
  local integer ZCE=0
  local integer JUX=0
  local integer XPO=0
  local integer XQO=255
  local integer FAO
  local integer FGO
  local integer FHO
  if ZAE==1 then
    set FAO=QIE
    set FGO=ZBE
    set FHO=ZCE
    set image002=Func2137("Fonts\\B.blp",90,90,result-40,ZEE,0,true,FAO,FGO,FHO)
    set image003=Func2137("Fonts\\A.blp",90,90,result,ZEE,0,true,FAO,FGO,FHO)
    set image004=Func2137("Fonts\\N.blp",90,90,result+50,ZEE,0,true,FAO,FGO,FHO)
  elseif ZAE==2 then
    set FAO=JUX
    set FGO=XPO
    set FHO=XQO
    call Func2138(image002)
    call Func2138(image003)
    call Func2138(image004)
    set image002=Func2137("Fonts\\P.blp",90,90,result-60,ZEE,0,true,FAO,FGO,FHO)
    set image003=Func2137("Fonts\\I.blp",90,90,result-20,ZEE,0,true,FAO,FGO,FHO)
    set image004=Func2137("Fonts\\C.blp",90,90,result,ZEE,0,true,FAO,FGO,FHO)
    set image005=Func2137("Fonts\\K.blp",90,90,result+45,ZEE,0,true,FAO,FGO,FHO)
  elseif ZAE==3 then
    set FAO=QIE
    set FGO=ZBE
    set FHO=ZCE
    call Func2138(image002)
    call Func2138(image003)
    call Func2138(image004)
    call Func2138(image005)
    set image002=Func2137("Fonts\\B.blp",90,90,result-40,ZEE,0,true,FAO,FGO,FHO)
    set image003=Func2137("Fonts\\A.blp",90,90,result,ZEE,0,true,FAO,FGO,FHO)
    set image004=Func2137("Fonts\\N.blp",90,90,result+50,ZEE,0,true,FAO,FGO,FHO)
  elseif ZAE==4 then
    set FAO=JUX
    set FGO=XPO
    set FHO=XQO
    call Func2138(image002)
    call Func2138(image003)
    call Func2138(image004)
    set image002=Func2137("Fonts\\P.blp",90,90,result-60,ZEE,0,true,FAO,FGO,FHO)
    set image003=Func2137("Fonts\\I.blp",90,90,result-20,ZEE,0,true,FAO,FGO,FHO)
    set image004=Func2137("Fonts\\C.blp",90,90,result,ZEE,0,true,FAO,FGO,FHO)
    set image005=Func2137("Fonts\\K.blp",90,90,result+45,ZEE,0,true,FAO,FGO,FHO)
  elseif ZAE==5 then
    set FAO=QIE
    set FGO=ZBE
    set FHO=ZCE
    call Func2138(image002)
    call Func2138(image003)
    call Func2138(image004)
    call Func2138(image005)
    set image002=Func2137("Fonts\\B.blp",90,90,result-40,ZEE,0,true,FAO,FGO,FHO)
    set image003=Func2137("Fonts\\A.blp",90,90,result,ZEE,0,true,FAO,FGO,FHO)
    set image004=Func2137("Fonts\\N.blp",90,90,result+50,ZEE,0,true,FAO,FGO,FHO)
  elseif ZAE==6 then
    set FAO=JUX
    set FGO=XPO
    set FHO=XQO
    call Func2138(image002)
    call Func2138(image003)
    call Func2138(image004)
    set image002=Func2137("Fonts\\P.blp",90,90,result-60,ZEE,0,true,FAO,FGO,FHO)
    set image003=Func2137("Fonts\\I.blp",90,90,result-20,ZEE,0,true,FAO,FGO,FHO)
    set image004=Func2137("Fonts\\C.blp",90,90,result,ZEE,0,true,FAO,FGO,FHO)
    set image005=Func2137("Fonts\\K.blp",90,90,result+45,ZEE,0,true,FAO,FGO,FHO)
  elseif ZAE==7 then
    call Func2138(image002)
    call Func2138(image003)
    call Func2138(image004)
    call Func2138(image005)
  endif
endfunction

function Func2140 takes integer ZAE,integer QIE returns string
  if ZAE<0 then
    set ZAE=0
  endif
  if TimerGetElapsed(GlobalTimer)<15 then
    return"|c00555555"+I2S(ZAE)
  endif
  if ModeCM_Current==3 then
    return"|c00555555"+I2S(ZAE)
  endif
  if ModeCM_Current==1 and QIE!=Func2136()then
    return"|c00555555"+I2S(ZAE)
  elseif ModeCM_Current==2 and QIE!=Func2136()then
    return"|c00555555"+I2S(ZAE)
  elseif ZAE==0 then
    return"|c00555555"+I2S(ZAE)
  elseif ZAE<6 then
    return"|c00ff0303"+I2S(ZAE)
  else
    return I2S(ZAE)
  endif
endfunction

function Func2141 takes nothing returns boolean
  local multiboarditem MOX
  local integer ZAE
  local integer QIE
  local integer ZBE
  local integer ZCE=7
  local integer JUX=0
  set QIE=1
  set ZBE=JUX
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemWidth(MOX,0.5)
  call MultiboardSetItemValue(MOX,udg_Colors[GetPlayerId(Sentinels[1])]+(PlayerNames[GetPlayerId((Sentinels[1]))])+"|r")
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=JUX
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0EV'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZAE=0
  set QIE=QIE
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers126[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers126[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=1
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers126[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers126[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=2
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers126[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers126[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=3
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers126[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers126[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=4
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers126[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers126[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=JUX
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0EX'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZAE=0
  set QIE=QIE
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers128[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers128[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=1
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers128[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers128[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=2
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers128[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers128[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=3
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers128[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers128[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=4
  set ZBE=JUX+ZAE+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers128[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers128[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=JUX
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0EU'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZBE=JUX+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  if player017==Sentinels[1]then
    call MultiboardSetItemValue(MOX,Func2140(integer462,1))
  else
    call MultiboardSetItemValue(MOX," ")
  endif
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+1
  set ZBE=JUX
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0ET'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZBE=JUX+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,Func2140(integers125[1],1))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=JUX
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0EY'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZBE=JUX+1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  if TimerGetElapsed(GlobalTimer)<15 then
    call MultiboardSetItemValue(MOX,"|c00555555"+GetObjectName('n0F1'))
  elseif ModeCM_Current==1 then
    call MultiboardSetItemValue(MOX,GetObjectName('n0F4'))
  elseif ModeCM_Current==2 then
    call MultiboardSetItemValue(MOX,"|c00555555"+GetObjectName('n0F1'))
  else
    call MultiboardSetItemValue(MOX,"|c00555555"+GetObjectName('n0F2'))
  endif
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set QIE=1
  set ZBE=ZCE
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemWidth(MOX,1.5)
  call MultiboardSetItemValue(MOX,"	 "+udg_Colors[GetPlayerId(Scourges[1])]+(PlayerNames[GetPlayerId((Scourges[1]))])+"|r")
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=ZCE-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+" "+GetObjectName('n0EV'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZAE=0
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers127[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers127[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=1
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers127[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers127[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=2
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers127[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers127[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=3
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers127[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers127[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=4
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers127[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers127[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=ZCE-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+" "+GetObjectName('n0EX'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZAE=0
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers129[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers129[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=1
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers129[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers129[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=2
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers129[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers129[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=3
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers129[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers129[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set ZAE=4
  set ZBE=ZCE+ZAE+1-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemWidth(MOX,0.015)
  if integers129[ZAE]>0 then
    call MultiboardSetItemStyle(MOX,false,true)
    call MultiboardSetItemIcon(MOX,HeroIcon[integers129[ZAE]])
  endif
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=ZCE-2
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0EU'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZBE=ZCE-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  if player017==Scourges[1]then
    call MultiboardSetItemValue(MOX,Func2140(integer462,2))
  else
    call MultiboardSetItemValue(MOX," ")
  endif
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+1
  set ZBE=ZCE-2
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0ET'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZBE=ZCE-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,Func2140(integers125[2],2))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set QIE=QIE+2
  set ZBE=ZCE-2
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  call MultiboardSetItemValue(MOX,"|c006699CC"+GetObjectName('n0EY'))
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  set ZBE=ZCE-1
  set MOX=MultiboardGetItem(multiboard005,QIE,ZBE)
  call MultiboardSetItemStyle(MOX,true,false)
  if TimerGetElapsed(GlobalTimer)<15 then
    call MultiboardSetItemValue(MOX,"|c00555555"+GetObjectName('n0F1'))
  elseif ModeCM_Current==2 then
    call MultiboardSetItemValue(MOX,GetObjectName('n0F4'))
  elseif ModeCM_Current==1 then
    call MultiboardSetItemValue(MOX,"|c00555555"+GetObjectName('n0F1'))
  else
    call MultiboardSetItemValue(MOX,"|c00555555"+GetObjectName('n0F2'))
  endif
  call MultiboardSetItemWidth(MOX,0.035)
  call MultiboardReleaseItem(MOX)
  return false
endfunction

function Func2142 takes nothing returns nothing
  local integer ZAE=12
  local integer QIE=14
  local trigger RBX=CreateTrigger()
  local integer ZBE
  local multiboarditem MOX
  call TriggerRegisterTimerEvent(RBX,0.5,true)
  call TriggerAddCondition(RBX,Condition(function Func2141))
  set multiboard005=CreateMultiboard()
  call MultiboardSetItemsWidth(multiboard005,0.015)
  call MultiboardSetRowCount(multiboard005,ZAE)
  call MultiboardSetColumnCount(multiboard005,QIE)
  call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6'))
  call MultiboardSetItemsStyle(multiboard005,false,false)
  call MultiboardMinimize(multiboard005,false)
  call MultiboardDisplay(multiboard005,true)
  set ZBE=0
  loop
    exitwhen ZBE>QIE
    set MOX=MultiboardGetItem(multiboard005,0,ZBE)
    call MultiboardSetItemWidth(MOX,0.015)
    call MultiboardReleaseItem(MOX)
    set ZBE=ZBE+1
  endloop
  set RBX=null
  set MOX=null
endfunction

function Func2143 takes nothing returns boolean
  local unit source=GetSoldUnit()
  local player whichPlayer=GetOwningPlayer(source)
  local integer ZAE
  local real result
  local real ZEE
  local real ZWE
  if GetUnitTypeId(source)=='h06N' and IsPlayerAlly(GetOwningPlayer(source),GetOwningPlayer(GetSellingUnit()))then
    if udg_Hero[GetPlayerId(whichPlayer)]!=null then
      call Error(whichPlayer,GetObjectName('n0F3'))
      call KillUnit(source)
      set source=null
      set whichPlayer=null
      return false
    endif
    set result=GetUnitX(GetSellingUnit())
    set ZEE=GetUnitY(GetSellingUnit())
    set ZAE=Func0584(GetUnitTypeId(GetSellingUnit()))
    set ZWE=GetUnitFacing(GetSellingUnit())
    call RemoveUnit(GetSellingUnit())
    call CreateUnit(whichPlayer,ZAE,result,ZEE,ZWE)
  endif
  if GetUnitTypeId(source)=='h06N' then
    call KillUnit(source)
  endif
  if udg_Hero[GetPlayerId(Sentinels[1])]!=null and udg_Hero[GetPlayerId(Sentinels[2])]!=null and udg_Hero[GetPlayerId(Sentinels[3])]!=null and udg_Hero[GetPlayerId(Sentinels[4])]!=null and udg_Hero[GetPlayerId(Sentinels[5])]!=null and udg_Hero[GetPlayerId(Scourges[1])]!=null and udg_Hero[GetPlayerId(Scourges[2])]!=null and udg_Hero[GetPlayerId(Scourges[3])]!=null and udg_Hero[GetPlayerId(Scourges[4])]!=null and udg_Hero[GetPlayerId(Scourges[5])]!=null then
    call CleanTrigger(GetTriggeringTrigger())
  endif
  set source=null
  set whichPlayer=null
  return false
endfunction

function Func2144 takes nothing returns boolean
  call CleanTrigger(GetTriggeringTrigger())
  call DestroyMultiboard(multiboard005)
  call Trig_display_leaderboard_Actions()
  call Func1737()
  return false
endfunction

function Func2145 takes nothing returns boolean
  local trigger RBX=CreateTrigger()
  local integer ZAE
  local integer QIE
  local string ZJE
  local unit source
  local real result
  local real ZEE
  local integer ZBE
  local real ZWE
  local real ZYE=GetRectCenterX(gg_rct_Hero_Creation_NE)
  local real ICX=GetRectCenterY(gg_rct_Hero_Creation_NE)
  local real N1X=GetRectCenterX(gg_rct_Hero_Creation_UD)
  local real N2X=GetRectCenterY(gg_rct_Hero_Creation_UD)
  set ModeCM_Current=3
  set boolean142=true
  call CleanTrigger(GetTriggeringTrigger())
  set ZBE=0
  loop
    exitwhen ZBE==5
    set result=ZYE-300+ZBE*150
    set ZEE=ICX
    set source=CreateUnit(Sentinels[0],integers092[integers128[ZBE]],result,ZEE,270)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SELL)
    call PanCameraToTimedForPlayer(Sentinels[ZBE+1],ZYE,ICX,0)
    call CreateUnit(Sentinels[ZBE+1],'n00C',ZYE,ICX,bj_UNIT_FACING)
    call SetPlayerState(Sentinels[ZBE+1],PLAYER_STATE_RESOURCE_GOLD,integers124[GetPlayerId(Sentinels[ZBE+1])]-250)
    set ZBE=ZBE+1
  endloop
  set ZBE=0
  loop
    exitwhen ZBE==5
    set result=N1X-300+ZBE*150
    set ZEE=N2X
    set source=CreateUnit(Scourges[0],integers092[integers129[ZBE]],result,ZEE,270)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SELL)
    call PanCameraToTimedForPlayer(Scourges[ZBE+1],N1X,N2X,0)
    call CreateUnit(Scourges[ZBE+1],'n00C',N1X,N2X,bj_UNIT_FACING)
    call SetPlayerState(Scourges[ZBE+1],PLAYER_STATE_RESOURCE_GOLD,integers124[GetPlayerId(Scourges[ZBE+1])]-250)
    set ZBE=ZBE+1
  endloop
  call TriggerAddCondition(RBX,Condition(function Func2143))
  call SuspendTimeOfDay(false)
  call EnableTrigger(trigger033)
  call EnableTrigger(trigger030)
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,10,false)
  call TriggerAddCondition(RBX,Condition(function Func2144))
  set integer095=90
  call Func2123()
  call TechAll()
  set RBX=null
  set source=null
  return false
endfunction

function Func2146 takes integer E1X,integer QIE returns nothing
  call TechHeroForAll(HeroID[QIE])
  if E1X==1 then
    set integers128[integer467]=QIE
    set integer467=integer467+1
  else
    set integers129[integer468]=QIE
    set integer468=integer468+1
  endif
endfunction

function Func2147 takes integer E1X returns nothing
  local integer QIE=GetSetElement()
  loop
    if b_isHeroPicked[QIE]==false then
      set b_isHeroPicked[QIE]=true
      call Func2146(E1X,QIE)
      return
    endif
  endloop
endfunction

function Func2148 takes integer E1X,integer QIE returns nothing
  call Traffic_RegisterData("Ban"+I2S(GetPlayerId(GetOwningPlayer(GetSoldUnit()))),HeroID[QIE])
  call TechHeroForAll(HeroID[QIE])
  if E1X==1 then
    set integers126[integer465]=QIE
    set integer465=integer465+1
  else
    set integers127[integer466]=QIE
    set integer466=integer466+1
  endif
endfunction

function Func2149 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,1,false)
    call TriggerAddCondition(t,Condition(function Func2145))
    call Func2139(7)
    call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6'))
    call SetPlayerState(Sentinels[1],PLAYER_STATE_RESOURCE_GOLD,0)
    call SetPlayerState(Scourges[1],PLAYER_STATE_RESOURCE_GOLD,0)
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2150 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2149))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2151 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call Func2139(6)
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2150))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
    call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6')+" - |c00ffffff"+GetObjectName('n0MY'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName('n0MZ')+"|r")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2152 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2151))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2153 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call Func2139(5)
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2152))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
    call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6')+" - |c00ffffff"+GetObjectName('n0N0'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName('n0N1')+"|r")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2154 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2153))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2155 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2154))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2156 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2155))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2157 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call Func2139(4)
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2156))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
    call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6')+" - |c00ffffff"+GetObjectName('n0L8'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName('n0L3')+"|r")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2158 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2157))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2159 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2158))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2160 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2159))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2161 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call Func2139(3)
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2160))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
    call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6')+" - |c00ffffff"+GetObjectName('n0L7'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName('n0L4')+"|r")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2162 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2161))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2163 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2162))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2164 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2146(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2147(E1X)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2163))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2165 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call Func2139(2)
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2164))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
    call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6')+" - |c00ffffff"+GetObjectName('n0L9'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName('n0L5')+"|r")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2166 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2165))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2167 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player019
  local player p2=player018
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2166))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2168 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer E1X=ModeCM_Current
  local player p1=player018
  local player p2=player019
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and integers125[E1X]==0)then
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
      set t=null
      return false
    endif
    if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
      call Func2148(E1X,GetUnitPointValue(GetSoldUnit()))
      call RemoveUnit(GetSoldUnit())
    else
      call Func2148((E1X),-1)
    endif
    call CleanTrigger(t)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2167))
    set integer462=30
    set player017=p2
    set ModeCM_Current=Func2136()
    call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,250)
    call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,0)
    call Func0649(p2,"Sound\\Interface\\Rescue.wav")
  else
    if GetTriggerEvalCount(t)>30 then
      if integers125[E1X]>0 then
        set integers125[E1X]=integers125[E1X]-1
      endif
    else
      set integer462=integer462-1
    endif
  endif
  set t=null
  set p2=null
  return false
endfunction

function Func2169 takes nothing returns boolean
  local trigger t=CreateTrigger()
  set boolean153=true
  call CleanTrigger(GetTriggeringTrigger())
  if ModeCM_Manual==false then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player018)]+(PlayerNames[GetPlayerId(player018)])+"|r "+GetObjectName('n0EA'))
  endif
  set player017=player018
  set integer462=30
  call SetPlayerState(player018,PLAYER_STATE_RESOURCE_GOLD,250)
  call Func0649(player018,"Sound\\Interface\\Rescue.wav")
  call Func2139(1)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName('n0L6')+"|r")
  call MultiboardSetTitleText(multiboard005,GetObjectName('n0K6')+" - |c00ffffff"+GetObjectName('n0LA'))
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func2168))
  set t=null
  return false
endfunction

function Func2170 takes nothing returns nothing
  local trigger t
  local location IGX=GetRectCenter(gg_rct_Allpick_Sent)
  local location OXI=GetRectCenter(gg_rct_Allpick_Scourge)
  local integer E1X=1
  local player p1
  loop
    exitwhen E1X>5
    if IsPlayer(Sentinels[E1X])then
      call CreateUnitAtLoc(Sentinels[E1X],'n00C',OXI,bj_UNIT_FACING)
    endif
    if IsPlayer(Scourges[E1X])then
      call CreateUnitAtLoc(Scourges[E1X],'n00C',IGX,bj_UNIT_FACING)
    endif
    set E1X=E1X+1
  endloop
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  set boolean115=true
  set Repick_Allowed=false
  set boolean095=false
  set boolean142=false
  set boolean150=false
  call SuspendTimeOfDay(true)
  call DisableTrigger(trigger033)
  call DisableTrigger(trigger030)
  if boolean165==false then
    call Func1790()
  endif
  set integers124[GetPlayerId(Sentinels[1])]=GetPlayerState(Sentinels[1],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Sentinels[2])]=GetPlayerState(Sentinels[2],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Sentinels[3])]=GetPlayerState(Sentinels[3],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Sentinels[4])]=GetPlayerState(Sentinels[4],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Sentinels[5])]=GetPlayerState(Sentinels[5],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Scourges[1])]=GetPlayerState(Scourges[1],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Scourges[2])]=GetPlayerState(Scourges[2],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Scourges[3])]=GetPlayerState(Scourges[3],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Scourges[4])]=GetPlayerState(Scourges[4],PLAYER_STATE_RESOURCE_GOLD)
  set integers124[GetPlayerId(Scourges[5])]=GetPlayerState(Scourges[5],PLAYER_STATE_RESOURCE_GOLD)
  call SetPlayerState(Sentinels[1],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Sentinels[2],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Sentinels[3],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Sentinels[4],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Sentinels[5],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Scourges[1],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Scourges[2],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Scourges[3],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Scourges[4],PLAYER_STATE_RESOURCE_GOLD,0)
  call SetPlayerState(Scourges[5],PLAYER_STATE_RESOURCE_GOLD,0)
  set ModeCM_Order=GetRandomInt(1,2)
  set ModeCM_Manual=false
  set ModeCM_Current=ModeCM_Order
  if ModeCM_Order==1 then
    set player018=Sentinels[1]
    set player019=Scourges[1]
  else
    set player018=Scourges[1]
    set player019=Sentinels[1]
  endif
  set integers125[1]=130
  set integers125[2]=130
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(GlobalTimer),false)
  call TriggerAddCondition(t,Condition(function Func2169))
  call Func2142()
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,4.00,GetObjectName('n0ES'))
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,4.00,GetObjectName('n0ER'))
  set t=null
  set IGX=null
  set OXI=null
  set p1=null
endfunction

function Func2171 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  set boolean116=true
  call CleanTrigger(RBX)
  call DestroyFogModifier(CreateFogModifierRadius(Sentinels[0],FOG_OF_WAR_FOGGED,real041,real042,700,false,false))
  call DestroyFogModifier(CreateFogModifierRadius(Scourges[0],FOG_OF_WAR_FOGGED,real041,real042,700,false,false))
  set RBX=null
  return false
endfunction

function Func2172 takes nothing returns nothing
  local integer ZAE=0
  loop
    exitwhen ZAE>integer470
    call RemoveUnit(units009[ZAE])
    set ZAE=ZAE+1
  endloop
endfunction

function Func2173 takes string ZJE,real result,real ZEE,real ZWE,real ZYE,real ICX,boolean ZSE returns nothing
  set image001=CreateImage(ZJE,result,ZEE,0,ZWE-(result/2),ZYE-(ZEE/2),ICX,0,0,0,2)
  call SetImageRenderAlways(image001,true)
  call ShowImage(image001,ZSE)
endfunction

function Func2174 takes integer ZAE,integer QIE,integer ZBE,integer ZCE,integer JUX,real result,real ZEE,integer XPO returns nothing
  if StringLength(I2S(ZAE))>1 then
    call Func2173("Fonts\\"+SubString(I2S(ZAE),0,1)+".blp",90,90,result-20,ZEE,0,true)
    call SetImageColor(image001,QIE,ZBE,ZCE,JUX)
    call SaveImageHandle(HY,(XPO),158,(image001))
    call Func2173("Fonts\\"+SubString(I2S(ZAE),1,2)+".blp",90,90,result+20,ZEE,0,true)
    call SetImageColor(image001,QIE,ZBE,ZCE,JUX)
    call SaveImageHandle(HY,(XPO),159,(image001))
  else
    call Func2173("Fonts\\0.blp",90,90,result-20,ZEE,0,true)
    call SetImageColor(image001,QIE,ZBE,ZCE,JUX)
    call SaveImageHandle(HY,(XPO),158,(image001))
    call Func2173("Fonts\\"+SubString(I2S(ZAE),0,1)+".blp",90,90,result+20,ZEE,0,true)
    call SetImageColor(image001,QIE,ZBE,ZCE,JUX)
    call SaveImageHandle(HY,(XPO),159,(image001))
  endif
endfunction

function Func2175 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),57))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local integer ZBE=GetTriggerEvalCount(RBX)
  local integer ZCE=QIE-ZBE
  local image XNI=(LoadImageHandle(HY,(ZAE),158))
  local image ONI=(LoadImageHandle(HY,(ZAE),159))
  local integer JUX
  local integer XPO
  local integer XQO
  local integer FAO
  if ZBE>0 then
    call ShowImage(XNI,false)
    call DestroyImage(XNI)
    call ShowImage(ONI,false)
    call DestroyImage(ONI)
  endif
  if ZBE==QIE then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    if ZCE<6 then
      set JUX=255
      set XPO=0
      set XQO=0
    elseif LocalPlayer==player020 or LocalPlayer==player021 then
      set JUX=PlayerColors_R[PlayerId]
      set XPO=PlayerColors_G[PlayerId]
      set XQO=PlayerColors_B[PlayerId]
    else
      set JUX=255
      set XPO=255
      set XQO=255
    endif
    if IsPlayerAlly(player020,LocalPlayer)then
      set FAO=255
    else
      set FAO=125
    endif
    call Func2174(ZCE,JUX,XPO,XQO,FAO,result,ZEE,ZAE)
  endif
  set RBX=null
  set XNI=null
  set ONI=null
  return false
endfunction

function Func2176 takes integer ZAE,real result,real ZEE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerAddCondition(RBX,Condition(function Func2175))
  call SaveInteger(HY,(QIE),57,(ZAE))
  call SaveReal(HY,(QIE),6,((result)*1.0))
  call SaveReal(HY,(QIE),7,((ZEE)*1.0))
  call TriggerEvaluate(RBX)
  set RBX=null
endfunction

function Func2177 takes integer ZAE,real result,real ZEE,integer QIE returns nothing
  call Func2173("Fonts\\Y.blp",90,90,result-150,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),158,(image001))
  call Func2173("Fonts\\O.blp",90,90,result-110,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),159,(image001))
  call Func2173("Fonts\\U.blp",90,90,result-70,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),160,(image001))
  call Func2173("Fonts\\R.blp",90,90,result-30,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),161,(image001))
  call Func2173("Fonts\\T.blp",90,90,result+30,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),162,(image001))
  call Func2173("Fonts\\U.blp",90,90,result+70,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),163,(image001))
  call Func2173("Fonts\\R.blp",90,90,result+110,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),164,(image001))
  call Func2173("Fonts\\N.blp",90,90,result+150,ZEE,0,true)
  call SetImageColor(image001,255,0,0,ZAE)
  call SaveImageHandle(HY,(QIE),165,(image001))
endfunction

function Func2178 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result
  local real ZEE
  local integer QIE=GetTriggerEvalCount(RBX)
  local image XNI=(LoadImageHandle(HY,(ZAE),158))
  local image ONI=(LoadImageHandle(HY,(ZAE),159))
  local image OFI=(LoadImageHandle(HY,(ZAE),160))
  local image OGI=(LoadImageHandle(HY,(ZAE),161))
  local image OHI=(LoadImageHandle(HY,(ZAE),162))
  local image OJI=(LoadImageHandle(HY,(ZAE),163))
  local image OKI=(LoadImageHandle(HY,(ZAE),164))
  local image OLI=(LoadImageHandle(HY,(ZAE),165))
  local integer XPO
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  if IsSentinel(whichPlayer)then
    set result=real041
    set ZEE=real042+250
  else
    set result=real043
    set ZEE=real044+250
  endif
  if QIE>0 then
    call ShowImage(XNI,false)
    call DestroyImage(XNI)
    call ShowImage(ONI,false)
    call DestroyImage(ONI)
    call ShowImage(OFI,false)
    call DestroyImage(OFI)
    call ShowImage(OGI,false)
    call DestroyImage(OGI)
    call ShowImage(OHI,false)
    call DestroyImage(OHI)
    call ShowImage(OJI,false)
    call DestroyImage(OJI)
    call ShowImage(OKI,false)
    call DestroyImage(OKI)
    call ShowImage(OLI,false)
    call DestroyImage(OLI)
  endif
  if QIE==20 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    if LocalPlayer==player020 or LocalPlayer==player021 then
      set XPO=255
    else
      set XPO=0
    endif
    call Func2177(XPO,result,ZEE,ZAE)
  endif
  set RBX=null
  set XNI=null
  set ONI=null
  set OFI=null
  set OGI=null
  set OHI=null
  set OJI=null
  set OKI=null
  set OLI=null
  set whichPlayer=null
  return false
endfunction

function Func2179 takes player whichPlayer returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerAddCondition(RBX,Condition(function Func2178))
  call SavePlayerHandle(HY,(ZAE),54,(whichPlayer))
  call TriggerEvaluate(RBX)
  set RBX=null
endfunction

function Func2180 takes unit u,real x,real y,real a returns nothing
  local real r=Func0468(Func0531(u)-0.3,0.5)
  call SetUnitPosition(u,x,y)
  call SetUnitScale(u,r,r,r)
  call SetUnitFacing(u,a)
  call UnitRemoveAbility(u,'Amov')
endfunction

function Func2181 takes player p returns integer
  if p==Sentinels[1]or p==Scourges[1]then
    return 1
  elseif p==Sentinels[2]or p==Scourges[2]then
    return 2
  elseif p==Sentinels[3]or p==Scourges[3]then
    return 3
  elseif p==Sentinels[4]or p==Scourges[4]then
    return 4
  elseif p==Sentinels[5]or p==Scourges[5]then
    return 5
  endif
  return 0
endfunction

function Func2182 takes player p,integer OTI,boolean b returns nothing
  local integer i=Func2181(p)
  if IsPlayer(p)==false then
    return
  endif
  if IsSentinel(p)then
    call Func2180(units008[OTI],reals015[i],reals016[i],270)
  else
    call Func2180(units008[OTI],reals017[i],reals018[i],90)
  endif
  call SetUnitColor(units008[OTI],GetPlayerColor(p))
  call PauseUnit(units008[OTI],true)
  call SetUnitOwner(units008[OTI],p,true)
  set booleans033[GetPlayerId(p)]=true
  set booleans032[OTI]=true
  if IsSentinel(p)then
    set udg_Hero[GetPlayerId(p)]=CreateUnit(p,HeroID[integers130[OTI]],GetRectCenterX(gg_rct_Hero_Creation_NE),GetRectCenterY(gg_rct_Hero_Creation_NE),0)
  else
    set udg_Hero[GetPlayerId(p)]=CreateUnit(p,HeroID[integers130[OTI]],GetRectCenterX(gg_rct_Hero_Creation_UD),GetRectCenterY(gg_rct_Hero_Creation_UD),0)
  endif
endfunction

function Func2183 takes nothing returns integer
  local integer ZAE=1
  loop
    exitwhen ZAE>24
    if booleans032[ZAE]==false then
      return ZAE
    endif
    set ZAE=ZAE+1
  endloop
  return 0
endfunction

function Func2184 takes player whichPlayer returns nothing
  local integer ZAE=1
  local boolean ZSE=IsSentinel(whichPlayer)
  loop
    exitwhen ZAE==24
    if GetOwningPlayer(units008[ZAE])==Sentinels[0]or GetOwningPlayer(units008[ZAE])==Scourges[0]then
      if ZSE then
        call SetUnitOwner(units008[ZAE],Sentinels[0],false)
      else
        call SetUnitOwner(units008[ZAE],Scourges[0],false)
      endif
    endif
    set ZAE=ZAE+1
  endloop
endfunction

function Func2185 takes player whichPlayer,unit source returns nothing
  local integer ZAE=80
  if LocalPlayer==whichPlayer then
    set ZAE=255
  endif
  call SetUnitVertexColor(source,255,255,255,ZAE)
endfunction

function Func2186 takes player whichPlayer,player FNO returns nothing
  local unit source
  local real result
  local real ZEE
  call Func2179(whichPlayer)
  call Func0649(whichPlayer,"Sound\\Interface\\Rescue.wav")
  if IsSentinel(whichPlayer)then
    if LocalPlayer==whichPlayer then
      call nPngMinimapEx(real035,real036,5,255,255,255,false)
    endif
    set source=CreateUnit(whichPlayer,'n02A',real035-250,real036,0)
    call UnitApplyTimedLife(source,'BTLF',20)
    call UnitAddAbility(source,'Aloc')
    set units010[GetPlayerId(whichPlayer)]=source
    call Func2185(whichPlayer,source)
    if LocalPlayer==whichPlayer then
      call ClearTextMessages()
    endif
    call DisplayTimedTextToPlayer(whichPlayer,0,0,10," ")
    call DisplayTimedTextToPlayer(whichPlayer,0,0,10," ")
    call DisplayTimedTextToPlayer(whichPlayer,0,0,20,GetObjectName('n068'))
    call DisplayTimedTextToPlayer(whichPlayer,0,0,10," ")
  else
    call Func2179(whichPlayer)
    if LocalPlayer==whichPlayer then
      call nPngMinimapEx(real037,real038,5,255,255,255,false)
    endif
    set source=CreateUnit(whichPlayer,'n02A',real035-250,real036,0)
    call SetUnitVertexColor(source,255,255,255,175)
    call UnitApplyTimedLife(source,'BTLF',20)
    call UnitAddAbility(source,'Aloc')
    set units011[GetPlayerId(whichPlayer)]=source
    call Func2185(whichPlayer,source)
    if LocalPlayer==whichPlayer then
      call ClearTextMessages()
    endif
    call DisplayTimedTextToPlayer(whichPlayer,0,0,10," ")
    call DisplayTimedTextToPlayer(whichPlayer,0,0,10," ")
    call DisplayTimedTextToPlayer(whichPlayer,0,0,20,GetObjectName('n068'))
    call DisplayTimedTextToPlayer(whichPlayer,0,0,10," ")
  endif
  if FNO!=null then
    call Func2179(FNO)
    call Func0649(FNO,"Sound\\Interface\\Rescue.wav")
    if IsSentinel(FNO)then
      if LocalPlayer==FNO then
        call nPngMinimapEx(real035,real036,5,255,255,255,false)
      endif
      set source=CreateUnit(FNO,'n02A',real035+250,real036,0)
      call UnitApplyTimedLife(source,'BTLF',20)
      call UnitAddAbility(source,'Aloc')
      set units010[GetPlayerId(FNO)]=source
      call Func2185(FNO,source)
      if LocalPlayer==FNO then
        call ClearTextMessages()
      endif
      call DisplayTimedTextToPlayer(FNO,0,0,10," ")
      call DisplayTimedTextToPlayer(FNO,0,0,10," ")
      call DisplayTimedTextToPlayer(FNO,0,0,20,GetObjectName('n068'))
      call DisplayTimedTextToPlayer(FNO,0,0,10," ")
    else
      if LocalPlayer==FNO then
        call nPngMinimapEx(real037,real038,5,255,255,255,false)
      endif
      set source=CreateUnit(FNO,'n02A',real035+250,real036,0)
      call UnitApplyTimedLife(source,'BTLF',20)
      call UnitAddAbility(source,'Aloc')
      set units011[GetPlayerId(FNO)]=source
      call Func2185(FNO,source)
      if LocalPlayer==FNO then
        call ClearTextMessages()
      endif
      call DisplayTimedTextToPlayer(FNO,0,0,10," ")
      call DisplayTimedTextToPlayer(FNO,0,0,10," ")
      call DisplayTimedTextToPlayer(FNO,0,0,20,GetObjectName('n068'))
      call DisplayTimedTextToPlayer(FNO,0,0,10," ")
    endif
  endif
  set source=null
endfunction

function Func2187 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),25))
  local player whichPlayer=player020
  local player FNO=player021
  local integer ZBE
  set player020=null
  set player021=null
  if QIE==0 then
    if integer469==1 then
      set player020=Sentinels[1]
    else
      set player020=Scourges[1]
    endif
    call Func2184(player020)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player020)]+(PlayerNames[GetPlayerId(player020)])+"|r"+" "+GetObjectName('n064'))
    call Func2186(player020,player021)
    call Func2176(20,real041,real042)
  elseif QIE==1 then
    if integer469==1 then
      if boolean155==false then
        set player020=Scourges[1]
        set player021=Scourges[2]
      else
        set player020=Scourges[1]
        set player021=Scourges[1]
      endif
    else
      if boolean155==false then
        set player020=Sentinels[1]
        set player021=Sentinels[2]
      else
        set player020=Sentinels[1]
        set player021=Sentinels[1]
      endif
    endif
    if booleans033[GetPlayerId(whichPlayer)]==false then
      call Func2182(whichPlayer,Func2183(),true)
    endif
    call Func2184(player020)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player020)]+(PlayerNames[GetPlayerId(player020)])+"|r"+" "+GetObjectName('n064'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player021)]+(PlayerNames[GetPlayerId(player021)])+"|r"+" "+GetObjectName('n064'))
    call Func2186(player020,player021)
    call Func2176(20,real041,real042)
  elseif QIE==2 then
    if integer469==1 then
      if boolean155==false then
        set player020=Sentinels[2]
        set player021=Sentinels[3]
      else
        set player020=Sentinels[1]
        set player021=Sentinels[1]
      endif
    else
      if boolean155==false then
        set player020=Scourges[2]
        set player021=Scourges[3]
      else
        set player020=Scourges[1]
        set player021=Scourges[1]
      endif
    endif
    if booleans033[GetPlayerId(whichPlayer)]==false then
      call Func2182(whichPlayer,Func2183(),true)
    endif
    if booleans033[GetPlayerId(FNO)]==false then
      call Func2182(FNO,Func2183(),true)
    endif
    call Func2184(player020)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player020)]+(PlayerNames[GetPlayerId(player020)])+"|r"+" "+GetObjectName('n064'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player021)]+(PlayerNames[GetPlayerId(player021)])+"|r"+" "+GetObjectName('n064'))
    call Func2186(player020,player021)
    call Func2176(20,real041,real042)
  elseif QIE==3 then
    if integer469==1 then
      if boolean155==false then
        set player020=Scourges[3]
        set player021=Scourges[4]
      else
        set player020=Scourges[1]
        set player021=Scourges[1]
      endif
    else
      if boolean155==false then
        set player020=Sentinels[3]
        set player021=Sentinels[4]
      else
        set player020=Sentinels[1]
        set player021=Sentinels[1]
      endif
    endif
    if booleans033[GetPlayerId(whichPlayer)]==false then
      call Func2182(whichPlayer,Func2183(),true)
    endif
    if booleans033[GetPlayerId(FNO)]==false then
      call Func2182(FNO,Func2183(),true)
    endif
    call Func2184(player020)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player020)]+(PlayerNames[GetPlayerId(player020)])+"|r"+" "+GetObjectName('n064'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player021)]+(PlayerNames[GetPlayerId(player021)])+"|r"+" "+GetObjectName('n064'))
    call Func2186(player020,player021)
    call Func2176(20,real041,real042)
  elseif QIE==4 then
    if integer469==1 then
      if boolean155==false then
        set player020=Sentinels[4]
        set player021=Sentinels[5]
      else
        set player020=Sentinels[1]
        set player021=Sentinels[1]
      endif
    else
      if boolean155==false then
        set player020=Scourges[4]
        set player021=Scourges[5]
      else
        set player020=Scourges[1]
        set player021=Scourges[1]
      endif
    endif
    if booleans033[GetPlayerId(whichPlayer)]==false then
      call Func2182(whichPlayer,Func2183(),true)
    endif
    if booleans033[GetPlayerId(FNO)]==false then
      call Func2182(FNO,Func2183(),true)
    endif
    call Func2184(player020)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player020)]+(PlayerNames[GetPlayerId(player020)])+"|r"+" "+GetObjectName('n064'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player021)]+(PlayerNames[GetPlayerId(player021)])+"|r"+" "+GetObjectName('n064'))
    call Func2186(player020,player021)
    call Func2176(20,real041,real042)
  elseif QIE==5 then
    if integer469==1 then
      if boolean155==false then
        set player020=Scourges[5]
      else
        set player020=Scourges[1]
      endif
    else
      if boolean155==false then
        set player020=Sentinels[5]
      else
        set player021=Sentinels[1]
      endif
    endif
    if booleans033[GetPlayerId(whichPlayer)]==false then
      call Func2182(whichPlayer,Func2183(),true)
    endif
    if booleans033[GetPlayerId(FNO)]==false then
      call Func2182(FNO,Func2183(),true)
    endif
    call Func2184(player020)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,udg_Colors[GetPlayerId(player020)]+(PlayerNames[GetPlayerId(player020)])+"|r"+" "+GetObjectName('n064'))
    call Func2186(player020,player021)
    call Func2176(20,real041,real042)
  elseif QIE==6 then
    if booleans033[GetPlayerId(whichPlayer)]==false then
      call Func2182(whichPlayer,Func2183(),true)
    endif
    call SuspendTimeOfDay(false)
  endif
  if QIE==8 then
    set ZBE=1
    loop
      exitwhen ZBE>24
      call RemoveUnit(units008[ZBE])
      set ZBE=ZBE+1
    endloop
    call Func1004()
    call Func2069(60)
    call UnitApplyTimedLife(units007[1],'BTLF',2)
    call UnitApplyTimedLife(units007[2],'BTLF',2)
    call UnitApplyTimedLife(units007[3],'BTLF',2)
    call UnitApplyTimedLife(units007[4],'BTLF',2)
    call UnitApplyTimedLife(units007[5],'BTLF',2)
    call UnitApplyTimedLife(units007[6],'BTLF',2)
    call UnitApplyTimedLife(units007[7],'BTLF',2)
    call UnitApplyTimedLife(units007[8],'BTLF',2)
    call UnitApplyTimedLife(units007[9],'BTLF',2)
    call UnitApplyTimedLife(units007[10],'BTLF',2)
    call UnitApplyTimedLife(units007[11],'BTLF',2)
    call UnitApplyTimedLife(units007[12],'BTLF',2)
    call CleanTrigger(trigger042)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    set RBX=CreateTrigger()
    call TriggerRegisterTimerEvent(RBX,7,false)
    call TriggerAddCondition(RBX,Condition(function Func2171))
  else
    call SaveInteger(HY,(ZAE),25,(QIE+1))
  endif
  set RBX=null
  set whichPlayer=null
  set FNO=null
  return false
endfunction

function Func2188 takes unit source returns integer
  local integer ZAE=1
  loop
    exitwhen ZAE>24
    if units008[ZAE]==source then
      return ZAE
    endif
    set ZAE=ZAE+1
  endloop
  return 0
endfunction

function Func2189 takes nothing returns boolean
  local unit source=GetSoldUnit()
  local player whichPlayer=GetOwningPlayer(source)
  call KillUnit(source)
  if booleans033[GetPlayerId(whichPlayer)]then
    call Error(whichPlayer,GetObjectName('n0D7'))
    set source=null
    set whichPlayer=null
    return false
  endif
  if whichPlayer!=player020 and whichPlayer!=player021 then
    call Error(whichPlayer,GetObjectName('n0CR'))
    set source=null
    set whichPlayer=null
    return false
  endif
  if GetUnitTypeId(source)=='h06N' then
    call Func2182(whichPlayer,Func2188(GetSellingUnit()),false)
    call KillUnit(units010[GetPlayerId(whichPlayer)])
    call KillUnit(units011[GetPlayerId(whichPlayer)])
  endif
  set source=null
  set whichPlayer=null
  return false
endfunction

function Func2190 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE
  local integer QIE=1
  call CleanTrigger(RBX)
  call SuspendTimeOfDay(true)
  set integer469=GetRandomInt(1,2)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00," ")
  if integer469==1 then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName('n05K')+" "+udg_Colors[GetPlayerId(Sentinels[0])]+GetObjectName('n065')+"|r"+" "+GetObjectName('n066'))
  else
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName('n05K')+" "+udg_Colors[GetPlayerId(Scourges[0])]+GetObjectName('n06C')+"|r"+" "+GetObjectName('n066'))
  endif
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00," ")
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,20,true)
  call TriggerAddCondition(RBX,Condition(function Func2187))
  call SaveInteger(HY,(ZAE),25,0)
  call TriggerEvaluate(RBX)
  set RBX=null
  return false
endfunction

function Func2191 takes nothing returns nothing
  call ShowUnit(unit142,false)
  call ShowUnit(unit143,false)
  call ShowUnit(unit144,false)
  call ShowUnit(unit145,false)
  call ShowUnit(unit150,false)
  call ShowUnit(unit151,false)
  call ShowUnit(unit152,false)
  call ShowUnit(unit153,false)
  call ShowUnit(unit146,false)
  call ShowUnit(unit147,false)
  call ShowUnit(unit148,false)
  call ShowUnit(unit149,false)
endfunction

function Func2192 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer i=1
  local real x
  local real y
  local real a
  local integer QIE
  local integer OTI
  local boolean array O4I
  local player p
  local real O5I
  local boolean O6I=false
  set boolean154=true
  set integer095=180
  set Repick_Allowed=false
  set boolean095=false
  call Func2191()
  set boolean150=false
  set trigger042=CreateTrigger()
  call TriggerAddCondition(trigger042,Condition(function Func2189))
  call Func0649(LocalPlayer,"Sound\\Interface\\Rescue.wav")
  call SetPlayerState(Sentinels[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Sentinels[1],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Sentinels[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Sentinels[2],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Sentinels[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Sentinels[3],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Sentinels[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Sentinels[4],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Sentinels[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Sentinels[5],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Scourges[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Scourges[1],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Scourges[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Scourges[2],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Scourges[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Scourges[3],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Scourges[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Scourges[4],PLAYER_STATE_RESOURCE_GOLD)-250)
  call SetPlayerState(Scourges[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Scourges[5],PLAYER_STATE_RESOURCE_GOLD)-250)
  call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(GlobalTimer),false)
  call TriggerAddCondition(t,Condition(function Func2190))
  set i=1
  loop
    set OTI=(GetRandomInt(FirstHeroIndexid,LastHeroIndexid))
    if O4I[OTI]==false and((OTI)!=23)then
      set O4I[OTI]=true
      set integers130[i]=OTI
      set i=i+1
    endif
    exitwhen i>24
  endloop
  set units007[1]=CreateUnit(Sentinels[0],'n0DC',real035,real036,0)
  set units007[2]=CreateUnit(Sentinels[1],'n0DC',real035,real036,0)
  set units007[3]=CreateUnit(Sentinels[2],'n0DC',real035,real036,0)
  set units007[4]=CreateUnit(Sentinels[3],'n0DC',real035,real036,0)
  set units007[5]=CreateUnit(Sentinels[4],'n0DC',real035,real036,0)
  set units007[6]=CreateUnit(Sentinels[5],'n0DC',real035,real036,0)
  set units007[7]=CreateUnit(Scourges[0],'n0DC',real037,real038,0)
  set units007[8]=CreateUnit(Scourges[1],'n0DC',real037,real038,0)
  set units007[9]=CreateUnit(Scourges[2],'n0DC',real037,real038,0)
  set units007[10]=CreateUnit(Scourges[3],'n0DC',real037,real038,0)
  set units007[11]=CreateUnit(Scourges[4],'n0DC',real037,real038,0)
  set units007[12]=CreateUnit(Scourges[5],'n0DC',real037,real038,0)
  call PanCameraToTimed(real035,real036,0)
  set real041=real035
  set real042=real036
  set real043=real037
  set real044=real038
  set reals015[1]=real035+real039*(-2)
  set reals016[1]=real036+real040
  set reals015[2]=real035+real039*(-1)
  set reals016[2]=real036+real040
  set reals015[3]=real035+real039*0
  set reals016[3]=real036+real040
  set reals015[4]=real035+real039*1
  set reals016[4]=real036+real040
  set reals015[5]=real035+real039*2
  set reals016[5]=real036+real040
  set reals017[1]=real035+real039*(-2)
  set reals018[1]=real036-real040
  set reals017[2]=real035+real039*(-1)
  set reals018[2]=real036-real040
  set reals017[3]=real035+real039*0
  set reals018[3]=real036-real040
  set reals017[4]=real035+real039*1
  set reals018[4]=real036-real040
  set reals017[5]=real035+real039*2
  set reals018[5]=real036-real040
  set O5I=400.
  set i=1
  set boolean010=true
  loop
    set O6I=not O6I
    set a=i/I2R(24)*360.0
    set x=real035+O5I*Cos(a*bj_DEGTORAD)
    set y=real036+O5I*Sin(a*bj_DEGTORAD)
    set units008[i]=CreateUnit(Sentinels[0],integers092[integers130[i]],x,y, AngleBetweenXY(x,y,real035,real036))
    if O6I then
      call SetUnitColor(units008[i],GetPlayerColor(Scourges[5]))
    else
      call SetUnitColor(units008[i],GetPlayerColor(Scourges[4]))
    endif
    call TriggerRegisterUnitEvent(trigger042,units008[i],EVENT_UNIT_SELL)
    set i=i+1
    exitwhen i>24
  endloop
  set boolean010=false
  call TechAll()
  set t=null
  set p=null
endfunction

function Func2193 takes nothing returns boolean
  local unit source=GetSoldUnit()
  local player whichPlayer=GetOwningPlayer(source)
  local integer ZAE
  local real result
  local real ZEE
  local real ZWE
  if GetUnitTypeId(source)=='h06N' and IsPlayerAlly(GetOwningPlayer(source),GetOwningPlayer(GetSellingUnit()))then
    if udg_Hero[GetPlayerId(whichPlayer)]!=null then
      call Error(whichPlayer,GetObjectName('n0F3'))
      call KillUnit(source)
      set source=null
      set whichPlayer=null
      return false
    endif
    set result=GetUnitX(GetSellingUnit())
    set ZEE=GetUnitY(GetSellingUnit())
    set ZAE=Func0584(GetUnitTypeId(GetSellingUnit()))
    set ZWE=GetUnitFacing(GetSellingUnit())
    call RemoveUnit(GetSellingUnit())
    call CreateUnit(whichPlayer,ZAE,result,ZEE,ZWE)
  endif
  if GetUnitTypeId(source)=='h06N' then
    call KillUnit(source)
  endif
  if udg_Hero[GetPlayerId(Sentinels[1])]!=null and udg_Hero[GetPlayerId(Sentinels[2])]!=null and udg_Hero[GetPlayerId(Sentinels[3])]!=null and udg_Hero[GetPlayerId(Sentinels[4])]!=null and udg_Hero[GetPlayerId(Sentinels[5])]!=null and udg_Hero[GetPlayerId(Scourges[1])]!=null and udg_Hero[GetPlayerId(Scourges[2])]!=null and udg_Hero[GetPlayerId(Scourges[3])]!=null and udg_Hero[GetPlayerId(Scourges[4])]!=null and udg_Hero[GetPlayerId(Scourges[5])]!=null then
    call CleanTrigger(GetTriggeringTrigger())
  endif
  set source=null
  set whichPlayer=null
  return false
endfunction

function Func2194 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE
  local integer QIE
  local string ZJE
  local unit source
  local real result
  local real ZEE
  local integer ZBE
  local real ZWE
  local real ZYE=GetRectCenterX(gg_rct_Hero_Creation_NE)+125
  local real ICX=GetRectCenterY(gg_rct_Hero_Creation_NE)+75
  local real N1X=GetRectCenterX(gg_rct_Hero_Creation_UD)+100
  local real N2X=GetRectCenterY(gg_rct_Hero_Creation_UD)
  set boolean142=true
  set ZBE=1
  loop
    exitwhen ZBE>5
    set result=ZYE-290+(ZBE-1)*100
    set ZEE=ICX
    call CreateUnit(Sentinels[ZBE+1],'n00C',ZYE,ICX,bj_UNIT_FACING)
    set source=CreateUnit(Sentinels[0],integers092[integers133[ZBE+2]],result,ZEE,270)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SELL)
    call PanCameraToTimedForPlayer(Sentinels[ZBE],ZYE,ICX,0)
    set ZBE=ZBE+1
  endloop
  set ZBE=1
  loop
    exitwhen ZBE>5
    set result=N1X-290+(ZBE-1)*100
    set ZEE=N2X
    call CreateUnit(Scourges[ZBE+1],'n00C',N1X,N2X,bj_UNIT_FACING)
    set source=CreateUnit(Scourges[0],integers092[integers134[ZBE+2]],result,ZEE,270)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SELL)
    call PanCameraToTimedForPlayer(Scourges[ZBE],N1X,N2X,0)
    set ZBE=ZBE+1
  endloop
  call TriggerAddCondition(RBX,Condition(function Func2193))
  call SuspendTimeOfDay(false)
  call EnableTrigger(trigger033)
  call EnableTrigger(trigger030)
  set integer095=90
  call Func2123()
  set RBX=null
  set source=null
endfunction

function Func2195 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  set boolean116=true
  call CleanTrigger(RBX)
  call DestroyFogModifier(CreateFogModifierRadius(Sentinels[0],FOG_OF_WAR_FOGGED,real033,real034,700,false,false))
  call DestroyFogModifier(CreateFogModifierRadius(Scourges[0],FOG_OF_WAR_FOGGED,real033,real034,700,false,false))
  set RBX=null
  return false
endfunction

function Func2196 takes string ZJE,real result,real ZEE,real ZWE,real ZYE,real ICX,boolean ZSE returns nothing
  set image001=CreateImage(ZJE,result,ZEE,0,ZWE-(result/2),ZYE-(ZEE/2),ICX,0,0,0,2)
  call SetImageRenderAlways(image001,true)
  call ShowImage(image001,ZSE)
endfunction

function Func2197 takes string ZJE,integer ZAE,integer QIE,integer ZBE,integer ZCE,real result,real ZEE returns image
  call Func2196("Fonts\\"+ZJE+".blp",60,60,result-20,ZEE,0,true)
  call SetImageColor(image001,ZAE,QIE,ZBE,ZCE)
  return image001
endfunction

function Func2198 takes boolean ZSE,boolean ZTE returns nothing
  local integer ZAE
  local integer QIE
  local integer ZBE
  local integer ZCE
  local integer JUX
  local integer XPO
  local integer XQO
  local integer FAO
  local integer FGO
  local integer FHO
  local integer FJO=0
  set ZAE=integers132[1]
  set QIE=ZAE/60
  set ZBE=(ZAE-QIE*60)/10
  set ZCE=ZAE-QIE*60-ZBE*10
  set JUX=integers132[2]
  set XPO=JUX/60
  set XQO=(JUX-XPO*60)/10
  set FAO=JUX-XPO*60-XQO*10
  if ZSE==false then
    call ShowImage(image006,false)
    call DestroyImage(image006)
    call ShowImage(image007,false)
    call DestroyImage(image007)
    call ShowImage(image008,false)
    call DestroyImage(image008)
    call ShowImage(image009,false)
    call DestroyImage(image009)
    call ShowImage(image010,false)
    call DestroyImage(image010)
    call ShowImage(image011,false)
    call DestroyImage(image011)
    call ShowImage(image012,false)
    call DestroyImage(image012)
    call ShowImage(image013,false)
    call DestroyImage(image013)
    call ShowImage(image014,false)
    call DestroyImage(image014)
    call ShowImage(image015,false)
    call DestroyImage(image015)
    call ShowImage(image016,false)
    call DestroyImage(image016)
    call ShowImage(image017,false)
    call DestroyImage(image017)
    call ShowImage(image018,false)
    call DestroyImage(image018)
    call ShowImage(image019,false)
    call DestroyImage(image019)
    call ShowImage(image020,false)
    call DestroyImage(image020)
    call ShowImage(image021,false)
    call DestroyImage(image021)
  endif
  if ZTE==false then
    set FGO=255
    set FHO=255
    if integer473==1 then
      if IsPlayerAlly(Sentinels[1],LocalPlayer)then
        set FJO=255
        set FGO=0
      endif
    else
      if IsPlayerAlly(Scourges[1],LocalPlayer)then
        set FJO=255
        set FHO=0
      endif
    endif
    set image006=Func2197(I2S(QIE),255,FGO,FGO,255,real033-40,real034+300)
    set image007=Func2197("58",255,FGO,FGO,255,real033-0,real034+300)
    set image008=Func2197(I2S(ZBE),255,FGO,FGO,255,real033+20,real034+300)
    set image009=Func2197(I2S(ZCE),255,FGO,FGO,255,real033+60,real034+300)
    set image010=Func2197(I2S(XPO),255,FHO,FHO,255,real033-40,real034-300)
    set image011=Func2197("58",255,FHO,FHO,255,real033-0,real034-300)
    set image012=Func2197(I2S(XQO),255,FHO,FHO,255,real033+20,real034-300)
    set image013=Func2197(I2S(FAO),255,FHO,FHO,255,real033+60,real034-300)
    if integer474==1 or integer474==2 or integer474==3 or integer474==4 then
      set image014=Func2197("Y",255,0,0,FJO,real033-130,real034)
      set image015=Func2197("O",255,0,0,FJO,real033-90,real034)
      set image016=Func2197("U",255,0,0,FJO,real033-50,real034)
      set image017=Func2197("R",255,0,0,FJO,real033-10,real034)
      set image018=Func2197("B",255,0,0,FJO,real033+70,real034)
      set image019=Func2197("A",255,0,0,FJO,real033+110,real034)
      set image020=Func2197("N",255,0,0,FJO,real033+150,real034)
      set image021=Func2197("K",255,0,0,0,real033+170,real034)
    else
      set image014=Func2197("Y",255,0,0,FJO,real033-150,real034)
      set image015=Func2197("O",255,0,0,FJO,real033-110,real034)
      set image016=Func2197("U",255,0,0,FJO,real033-70,real034)
      set image017=Func2197("R",255,0,0,FJO,real033-30,real034)
      set image018=Func2197("P",255,0,0,FJO,real033+50,real034)
      set image019=Func2197("I",255,0,0,FJO,real033+90,real034)
      set image020=Func2197("C",255,0,0,FJO,real033+130,real034)
      set image021=Func2197("K",255,0,0,FJO,real033+170,real034)
    endif
  endif
endfunction

function Func2199 takes nothing returns nothing
  local integer ZAE=0
  loop
    exitwhen ZAE>integer471
    call RemoveUnit(units014[ZAE])
    set ZAE=ZAE+1
  endloop
endfunction

function Func2200 takes real result,real ZEE returns nothing
  set units014[integer471]=CreateUnit(Player(0),'h06I',result,ZEE,0)
  set integer471=integer471+1
endfunction

function Func2201 takes integer ZAE,boolean ZSE returns nothing
  local player whichPlayer
  local real result
  set booleans034[ZAE]=true
  set integers135[integer473]=integers135[integer473]-1
  if integer473==1 then
    set whichPlayer=Sentinels[1]
    set integer475=integer475+1
    set integers133[integer475]=integers131[ZAE]
    if integer475<3 then
      call UnitAddAbility(units013[ZAE],'Aetl')
      call UnitAddAbility(units013[ZAE],'Aloc')
    endif
    call SetUnitPosition(units013[ZAE],reals019[integer475],reals020[integer475])
    set result=RMaxBJ(Func0531(units013[ZAE])-0.3,0.5)
    call Func2200(reals019[integer475],reals020[integer475])
    call SetUnitScale(units013[ZAE],result,result,result)
    call SetUnitFacing(units013[ZAE],270)
    if ZSE==false then
      if integer474==1 or integer474==2 or integer474==3 or integer474==4 then
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H5')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Ban"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      else
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H6')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Pick"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      endif
    else
      if integer474==1 or integer474==2 or integer474==3 or integer474==4 then
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H7')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Ban"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      else
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H8')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Pick"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      endif
    endif
  else
    set whichPlayer=Scourges[1]
    set integer476=integer476+1
    set integers134[integer476]=integers131[ZAE]
    if integer476<3 then
      call UnitAddAbility(units013[ZAE],'Aetl')
      call UnitAddAbility(units013[ZAE],'Aloc')
    endif
    call SetUnitPosition(units013[ZAE],reals021[integer476],reals022[integer476])
    set result=RMaxBJ(Func0531(units013[ZAE])-0.3,0.5)
    call Func2200(reals021[integer476],reals022[integer476])
    call SetUnitScale(units013[ZAE],result,result,result)
    call SetUnitFacing(units013[ZAE],90)
    if ZSE==false then
      if integer474==1 or integer474==2 or integer474==3 or integer474==4 then
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H5')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Ban"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      else
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H6')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Pick"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      endif
    else
      if integer474==1 or integer474==2 or integer474==3 or integer474==4 then
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H7')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Ban"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      else
        call DisplayTimedTextToForceEx(AllPlayers,10,udg_Colors[GetPlayerId(whichPlayer)]+(PlayerNames[GetPlayerId(whichPlayer)])+"|r "+GetObjectName('n0H8')+" "+GetUnitName(units013[ZAE]))
        call Traffic_RegisterData("Pick"+I2S(GetPlayerId(whichPlayer)),HeroID[integers131[ZAE]])
      endif
    endif
  endif
  call PauseUnit(units013[ZAE],true)
  call SetUnitOwner(units013[ZAE],whichPlayer,true)
endfunction

function Func2202 takes unit source returns integer
  local integer ZAE=1
  loop
    exitwhen ZAE>28
    if units013[ZAE]==source then
      return ZAE
    endif
    set ZAE=ZAE+1
  endloop
  return 0
endfunction

function Func2203 takes nothing returns nothing
  local integer ZAE
  loop
    set ZAE=GetRandomInt(1,28)
    exitwhen booleans034[ZAE]==false
  endloop
  call Func2201(ZAE,true)
endfunction

function Func2204 takes nothing returns boolean
  local unit source=GetSoldUnit()
  local player whichPlayer=GetOwningPlayer(source)
  local integer ZAE=GetPlayerId(whichPlayer)
  local player FNO
  if integer473==1 then
    set FNO=Sentinels[1]
  else
    set FNO=Scourges[1]
  endif
  call KillUnit(source)
  if boolean156 or integers135[integer473]<1 or whichPlayer!=FNO then
    call Error(whichPlayer,GetObjectName('n0CR'))
  elseif GetUnitTypeId(source)=='h06N' then
    call Func2201(Func2202(GetSellingUnit()),false)
  endif
  set source=null
  return false
endfunction

function Func2205 takes nothing returns boolean
  local integer ZAE=1
  local trigger RBX
  call CleanTrigger(GetTriggeringTrigger())
  loop
    exitwhen ZAE>28
    call RemoveUnit(units013[ZAE])
    set ZAE=ZAE+1
  endloop
  call SuspendTimeOfDay(false)
  call Func2199()
  call Func1004()
  call Func2069(90)
  call UnitApplyTimedLife(units012[1],'BTLF',2)
  call UnitApplyTimedLife(units012[2],'BTLF',2)
  call UnitApplyTimedLife(units012[3],'BTLF',2)
  call UnitApplyTimedLife(units012[4],'BTLF',2)
  call UnitApplyTimedLife(units012[5],'BTLF',2)
  call UnitApplyTimedLife(units012[6],'BTLF',2)
  call UnitApplyTimedLife(units012[7],'BTLF',2)
  call UnitApplyTimedLife(units012[8],'BTLF',2)
  call UnitApplyTimedLife(units012[9],'BTLF',2)
  call UnitApplyTimedLife(units012[10],'BTLF',2)
  call UnitApplyTimedLife(units012[11],'BTLF',2)
  call UnitApplyTimedLife(units012[12],'BTLF',2)
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,7,false)
  call TriggerAddCondition(RBX,Condition(function Func2195))
  set RBX=null
  call Func2194()
  return false
endfunction

function Func2206 takes nothing returns boolean
  local integer ZAE
  local trigger RBX
  local force ZHE
  local string ZJE="|c006699CC"
  set integers132[integer473]=IMaxBJ(integers132[integer473]-1,0)
  call Func2198(false,false)
  if integers135[integer473]<1 then
    if integer473==1 then
      call Func0649(Sentinels[1],"Sound\\Interface\\Rescue.wav")
      call Func0649(Sentinels[2],"Sound\\Interface\\Rescue.wav")
      call Func0649(Sentinels[3],"Sound\\Interface\\Rescue.wav")
      call Func0649(Sentinels[4],"Sound\\Interface\\Rescue.wav")
      call Func0649(Sentinels[5],"Sound\\Interface\\Rescue.wav")
    else
      call Func0649(Scourges[1],"Sound\\Interface\\Rescue.wav")
      call Func0649(Scourges[2],"Sound\\Interface\\Rescue.wav")
      call Func0649(Scourges[3],"Sound\\Interface\\Rescue.wav")
      call Func0649(Scourges[4],"Sound\\Interface\\Rescue.wav")
      call Func0649(Scourges[5],"Sound\\Interface\\Rescue.wav")
    endif
    set integer474=integer474+1
    if integer473==1 then
      set integer473=2
      set ZHE=Force_Unds
    else
      set integer473=1
      set ZHE=Force_Elfs
    endif
    set integers132[integer473]=IMaxBJ(integers132[integer473],6)
    if integer474==1 or integer474==2 or integer474==3 or integer474==4 then
      set integers135[integer473]=1
      call DisplayTimedTextToForceEx(ZHE,15,ZJE+GetObjectName('n0H2')+"|r")
    elseif integer474==5 then
      set integers135[integer473]=1
      call DisplayTimedTextToForceEx(ZHE,15,ZJE+GetObjectName('n0H3')+"|r")
    elseif integer474==6 or integer474==7 or integer474==8 or integer474==9 then
      set integers135[integer473]=2
      call DisplayTimedTextToForceEx(ZHE,15,ZJE+GetObjectName('n0H4')+"|r")
    elseif integer474==10 then
      set integers135[integer473]=1
      call DisplayTimedTextToForceEx(ZHE,15,ZJE+GetObjectName('n0H3')+"|r")
    else
      call Func2198(false,true)
      call CleanTrigger(GetTriggeringTrigger())
      call CleanTrigger(trigger043)
      set RBX=CreateTrigger()
      call TriggerRegisterTimerEvent(RBX,6,false)
      call TriggerAddCondition(RBX,Condition(function Func2205))
      set RBX=null
      call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName('n0H9'))
    endif
  elseif integers132[integer473]==0 then
    call Func2203()
  endif
  return false
endfunction

function Func2207 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local force ZHE
  local string ZJE="|c006699CC"
  call CleanTrigger(RBX)
  set integer472=GetRandomInt(1,2)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00," ")
  if integer472==1 then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName('n05K')+" "+udg_Colors[GetPlayerId(Sentinels[0])]+GetObjectName('n065')+"|r"+" "+GetObjectName('n066'))
  else
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName('n05K')+" "+udg_Colors[GetPlayerId(Scourges[0])]+GetObjectName('n06C')+"|r"+" "+GetObjectName('n066'))
  endif
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00," ")
  set integer473=integer472
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerAddCondition(RBX,Condition(function Func2206))
  set integers132[1]=150
  set integers132[2]=150
  set integer474=1
  set integers135[integer473]=1
  call Func2198(true,false)
  if integer473==1 then
    set ZHE=Force_Elfs
  else
    set ZHE=Force_Unds
  endif
  call DisplayTimedTextToForceEx(ZHE,15,ZJE+GetObjectName('n0H2')+"|r")
  set boolean156=false
  set RBX=null
  return false
endfunction

function Func2208 takes nothing returns nothing
  local integer ZAE
  local player whichPlayer
  local boolean ZSE=false
  local real result
  local real ZEE
  local real ZWE
  local trigger RBX
  local integer QIE
  local boolean ZTE=false
  local boolean ABO=false
  local boolean RGI=false
  local boolean RHI=false
  local boolean RJI=false
  local boolean RKI=false
  local boolean RLI=false
  local boolean RMI=false
  local boolean RPI=false
  local integer ZBE
  local string ZJE="|c006699CC"
  local boolean array DSO
  call Func1790()
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,15,false)
  call TriggerAddCondition(RBX,Condition(function Func2207))
  set RBX=null
  set integer473=-1
  set boolean150=false
  set boolean114=true
  set Repick_Allowed=false
  set boolean095=false
  set boolean142=false
  call Func0649(LocalPlayer,"Sound\\Interface\\Rescue.wav")
  call SuspendTimeOfDay(true)
  set trigger043=CreateTrigger()
  call Func2191()
  set whichPlayer=Sentinels[1]
  set units012[1]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Sentinels[2]
  set units012[2]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Sentinels[3]
  set units012[3]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Sentinels[4]
  set units012[4]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Sentinels[5]
  set units012[5]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Scourges[1]
  set units012[6]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Scourges[2]
  set units012[7]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Scourges[3]
  set units012[8]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Scourges[4]
  set units012[9]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set whichPlayer=Scourges[5]
  set units012[10]=CreateUnit(whichPlayer,'n0DC',real033,real034,0)
  call PanCameraToTimedForPlayer(whichPlayer,real033,real034,0)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)-250)
  set reals019[1]=real033+real046*(-3.5)
  set reals020[1]=real034+real047
  set reals019[2]=real033+real046*(3.5)
  set reals020[2]=real034+real047
  set reals019[3]=real033+real046*(-2)
  set reals020[3]=real034+real047
  set reals019[4]=real033+real046*(-1)
  set reals020[4]=real034+real047
  set reals019[5]=real033+real046*0
  set reals020[5]=real034+real047
  set reals019[6]=real033+real046*1
  set reals020[6]=real034+real047
  set reals019[7]=real033+real046*2
  set reals020[7]=real034+real047
  set reals021[1]=real033+real046*(-3.5)
  set reals022[1]=real034-real047
  set reals021[2]=real033+real046*(3.5)
  set reals022[2]=real034-real047
  set reals021[3]=real033+real046*(-2)
  set reals022[3]=real034-real047
  set reals021[4]=real033+real046*(-1)
  set reals022[4]=real034-real047
  set reals021[5]=real033+real046*0
  set reals022[5]=real034-real047
  set reals021[6]=real033+real046*1
  set reals022[6]=real034-real047
  set reals021[7]=real033+real046*2
  set reals022[7]=real034-real047
  call KillTrees(real033,real034,600)
  set ZAE=1
  loop
    exitwhen ZAE>28
    set QIE=(GetRandomInt(FirstHeroIndexid,LastHeroIndexid))
    if ZTE then
      set ZTE=false
      set QIE=50
    elseif ABO then
      set ABO=false
      set QIE=51
    elseif RGI then
      set RGI=false
      set QIE=104
    elseif RHI then
      set RHI=false
      set QIE=65
    elseif RJI then
      set RJI=false
      set QIE=49
    elseif RKI then
      set RKI=false
      if GetRandomInt(1,2)==1 then
        set QIE=16
      else
        set QIE=86
      endif
    elseif RLI then
      set RLI=false
      if GetRandomInt(1,2)==1 then
        set QIE=73
      else
        set QIE=83
      endif
    elseif RMI then
      set RMI=false
    elseif RPI then
      set RPI=false
    endif
    if DSO[QIE]==false then
      set DSO[QIE]=true
      set integers131[ZAE]=QIE
      call Traffic_RegisterData("Pool"+I2S(ZAE),HeroID[integers131[ZAE]])
      if ZSE==false then
        set ZSE=true
      else
        set ZSE=false
      endif
      set result=(ZAE/I2R(28))*360.0
      set ZEE=real033+real045*Cos(result*bj_DEGTORAD)
      set ZWE=real034+real045*Sin(result*bj_DEGTORAD)
      set boolean010=true
      set units013[ZAE]=CreateUnit(Sentinels[0],integers092[integers131[ZAE]],ZEE,ZWE, AngleBetweenXY(ZEE,ZWE,real033,real034))
      set boolean010=false
      call SetUnitPathing(units013[ZAE],false)
      call SetUnitX(units013[ZAE],ZEE)
      call SetUnitY(units013[ZAE],ZWE)
      call Func2200(ZEE,ZWE)
      if ZSE then
        call SetUnitColor(units013[ZAE],GetPlayerColor(Scourges[5]))
      else
        call SetUnitColor(units013[ZAE],GetPlayerColor(Scourges[4]))
      endif
      set booleans034[ZAE]=false
      call TriggerRegisterUnitEvent(trigger043,units013[ZAE],EVENT_UNIT_SELL)
      set ZAE=ZAE+1
    endif
  endloop
  call TriggerAddCondition(trigger043,Condition(function Func2204))
  call TechAll()
endfunction

function Func2209 takes player p,integer id returns nothing
  local integer i=1
  loop
    exitwhen i>5
    if p!=Sentinels[i]then
      call SetPlayerTechMaxAllowed(Sentinels[i],id,0)
    endif
    if p!=Scourges[i]then
      call SetPlayerTechMaxAllowed(Scourges[i],id,0)
    endif
    set i=i+1
  endloop
endfunction

function Func2210 takes integer ZAE returns integer
  local integer QIE
  if ZAE==1 then
    set QIE=GetUnitPointValueByType(integers087[GetRandomInt(1,integer107)])
  elseif ZAE==2 then
    set QIE=GetUnitPointValueByType(integers088[GetRandomInt(1,integer108)])
  elseif ZAE==3 then
    set QIE=GetUnitPointValueByType(integers089[GetRandomInt(1,integer109)])
  endif
  return QIE
endfunction

function Func2211 takes integer ZAE,integer QIE,integer ZBE returns integer
  local integer ZCE
  local integer JUX
  local integer XPO
  set XPO=Func2210(ZBE)
  if boolean087 and ZAE!=XPO and QIE!=XPO then
    return XPO
  endif
  loop
    exitwhen b_isHeroPicked[XPO]==false and ZAE!=XPO and QIE!=XPO
    set XPO=Func2210(ZBE)
  endloop
  set b_isHeroPicked[XPO]=true
  return XPO
endfunction

function Func2212 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local unit u
  if HaveSavedHandle(HeroStats,GetHandleId(p),'COUR')then
    set u=LoadUnitHandle(HeroStats,GetHandleId(p),'COUR')
  else
    set u=Func0880(p,false,true,false)
  endif
  if u!=null then
    if IsDead(u)then
      if LocalPlayer==p then
        call nPngMinimapEx(LoadReal(HY,GetHandleId(u),6),LoadReal(HY,GetHandleId(u),7),1,255,255,255,false)
      endif
    else
      if LocalPlayer==p then
        call nPngMinimapEx(GetUnitX(u),GetUnitY(u),1,255,255,255,false)
      endif
    endif
  else
    call DisplayTimedTextToPlayer(p,0,0,8,GetObjectName('A14G'))
  endif
  set u=null
endfunction

function Func2213 takes nothing returns nothing
  local string RUI=""
  local string RWI=""
  local string RYI=""
  local player p=GetOwningPlayer(GetTriggerUnit())
  local integer WVE=GetPlayerId(p)
  local integer h=GetHandleId(p)
  if HaveSavedInteger(HY,h,'00SD'+1)then
    set RUI=GetObjectName(LoadInteger(HY,h,'00SD'+1))
    set RWI=GetObjectName(LoadInteger(HY,h,'00SD'+2))
    set RYI=GetObjectName(LoadInteger(HY,h,'00SD'+3))
  endif
  if RUI!="" then
    if IsPlayerAlly(p,LocalPlayer)then
      call DisplayTimedTextToPlayer(LocalPlayer,0,0,8,udg_Colors[WVE]+PlayerNames[WVE]+"|r has |c0096FF96"+RUI+"|r, |c00dd0303"+RWI+"|r and |c006969FF"+RYI+"|r.")
    endif
  endif
endfunction

function Func2214 takes nothing returns nothing
  local player p
  local integer c=1
  local integer i
  local integer k
  local integer m
  local trigger t
  local integer JUX
  set boolean157=true
  set integer095=120
  set boolean095=false
  set Repick_Allowed=false
  call Func2191()
  loop
    exitwhen c>5
    set p=Sentinels[c]
    set i=0
    set k=0
    set m=0
    if IsPlayer(p)then
      call UnitAddAbility(CirclesOfPower[GetPlayerId(p)],'A14E')
      set i=Func2211(i,k,1)
      set k=Func2211(i,k,2)
      set m=Func2211(i,k,3)
      call AddUnitToStock(CirclesOfPower[GetPlayerId(p)],HeroID[i],1,1)
      call Func2209(p,HeroID[i])
      call AddUnitToStock(CirclesOfPower[GetPlayerId(p)],HeroID[k],1,1)
      call Func2209(p,HeroID[k])
      call AddUnitToStock(CirclesOfPower[GetPlayerId(p)],HeroID[m],1,1)
      call Func2209(p,HeroID[m])
      call SaveInteger(HY,GetHandleId(p),'00SD'+1,HeroID[i])
      call SaveInteger(HY,GetHandleId(p),'00SD'+2,HeroID[k])
      call SaveInteger(HY,GetHandleId(p),'00SD'+3,HeroID[m])
      call ClearSelectionForPlayer(p)
      call SelectUnitAddForPlayer(CirclesOfPower[GetPlayerId(p)],p)
      call PanCameraToTimedForPlayer(p,GetRectCenterX(gg_rct_Hero_Creation_NE),GetRectCenterY(gg_rct_Hero_Creation_NE),0)
      call DisplayTimedTextToPlayer(p,0,0,15," ")
      call DisplayTimedTextToPlayer(p,0,0,15," ")
      call DisplayTimedTextToPlayer(p,0,0,15," ")
      call DisplayTimedTextToPlayer(p,0,0,15,"|cff99ccff"+GetObjectName('n0E6')+"|r")
      call DisplayTimedTextToPlayer(p,0,0,15," ")
    endif
    set p=Scourges[c]
    set i=0
    set k=0
    set m=0
    if IsPlayer(p)then
      call UnitAddAbility(CirclesOfPower[GetPlayerId(p)],'A14E')
      set i=Func2211(i,k,1)
      set k=Func2211(i,k,2)
      set m=Func2211(i,k,3)
      call AddUnitToStock(CirclesOfPower[GetPlayerId(p)],HeroID[i],1,1)
      call Func2209(p,HeroID[i])
      call AddUnitToStock(CirclesOfPower[GetPlayerId(p)],HeroID[k],1,1)
      call Func2209(p,HeroID[k])
      call AddUnitToStock(CirclesOfPower[GetPlayerId(p)],HeroID[m],1,1)
      call Func2209(p,HeroID[m])
      call SaveInteger(HY,GetHandleId(p),'00SD'+1,HeroID[i])
      call SaveInteger(HY,GetHandleId(p),'00SD'+2,HeroID[k])
      call SaveInteger(HY,GetHandleId(p),'00SD'+3,HeroID[m])
      call ClearSelectionForPlayer(p)
      call SelectUnitAddForPlayer(CirclesOfPower[GetPlayerId(p)],p)
      call PanCameraToTimedForPlayer(p,GetRectCenterX(gg_rct_Hero_Creation_UD),GetRectCenterY(gg_rct_Hero_Creation_UD),0)
      call DisplayTimedTextToPlayer(p,0,0,15," ")
      call DisplayTimedTextToPlayer(p,0,0,15," ")
      call DisplayTimedTextToPlayer(p,0,0,15," ")
      call DisplayTimedTextToPlayer(p,0,0,15,"|cff99ccff"+GetObjectName('n0E6')+"|r")
      call DisplayTimedTextToPlayer(p,0,0,15," ")
    endif
    set c=c+1
  endloop
  set p=null
  set t=null
endfunction

function Func2215 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),55))
  local player whichPlayer
  local integer ZBE
  local location IGX=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location OXI=GetRectCenter(gg_rct_Hero_Creation_UD)
  if QIE<6 then
    set whichPlayer=Sentinels[QIE]
  elseif QIE<11 then
    set whichPlayer=Scourges[QIE-5]
  endif
  if QIE>10 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    if Mode_DM==false then
      set Repick_Allowed=true
    endif
  elseif QIE<6 then
    call SaveInteger(HY,(ZAE),55,(QIE+1))
    set udg_Hero[GetPlayerId(whichPlayer)]=null
    if IsPlayer(whichPlayer)then
      loop
        exitwhen udg_Hero[GetPlayerId(whichPlayer)]!=null
        set ZBE=GetSetElement()
        if b_isHeroPicked[ZBE]==false then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[GetPlayerId(whichPlayer)]=CreateUnitAtLoc(whichPlayer,HeroID[ZBE],IGX,bj_UNIT_FACING)
        endif
      endloop
    endif
  elseif QIE<11 then
    call SaveInteger(HY,(ZAE),55,(QIE+1))
    set udg_Hero[GetPlayerId(whichPlayer)]=null
    if IsPlayer(whichPlayer)then
      loop
        exitwhen udg_Hero[GetPlayerId(whichPlayer)]!=null
        set ZBE=GetSetElement()
        if b_isHeroPicked[ZBE]==false then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[GetPlayerId(whichPlayer)]=CreateUnitAtLoc(whichPlayer,HeroID[ZBE],OXI,bj_UNIT_FACING)
        endif
      endloop
    endif
  endif
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  set IGX=null
  set OXI=null
  set whichPlayer=null
  set RBX=null
  return false
endfunction

function Func2216 takes nothing returns nothing
  local location IGX=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location OXI=GetRectCenter(gg_rct_Hero_Creation_UD)
  local location R_I=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location R0I=GetRectCenter(gg_rct_Hero_Creation_UD)
  local integer ZAE=1
  local integer QIE=5
  local integer ZBE
  local trigger RBX
  set boolean065=true
  set boolean095=false
  if not boolean087 then
    call TechAll()
  endif
  set integer074=400
  call PanCameraToTimedLocForPlayer(Sentinels[1],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[2],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[3],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[4],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[5],R_I,0)
  call PanCameraToTimedLocForPlayer(Scourges[1],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[2],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[3],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[4],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[5],R0I,0)
  if boolean091 then
    loop
      set ZBE=GetSetElement()
      exitwhen b_isHeroPicked[ZBE]==false
    endloop
    if IsSentinel(PlayerModeTyper)then
      set udg_Hero[GetPlayerId(PlayerModeTyper)]=CreateUnit(PlayerModeTyper,HeroID[ZBE],GetLocationX(IGX),GetLocationY(IGX),270)
    else
      set udg_Hero[GetPlayerId(PlayerModeTyper)]=CreateUnit(PlayerModeTyper,HeroID[ZBE],GetLocationX(OXI),GetLocationY(OXI),270)
    endif
    call RemoveLocation(IGX)
    call RemoveLocation(OXI)
    call RemoveLocation(R_I)
    call RemoveLocation(R0I)
    set IGX=null
    set OXI=null
    set R_I=null
    set R0I=null
    set RBX=null
    return
  endif
  set Repick_Allowed=false
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,.5,true)
  call TriggerAddCondition(RBX,Condition(function Func2215))
  call SaveInteger(HY,(GetHandleId(RBX)),55,1)
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  call RemoveLocation(R_I)
  call RemoveLocation(R0I)
  set IGX=null
  set OXI=null
  set R_I=null
  set R0I=null
  set RBX=null
endfunction

function Func2217 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func2218 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local trigger R4I=(LoadTriggerHandle(HY,(ZAE),35))
  local integer QIE
  local integer ZBE
  local integer ZCE
  local integer JUX=CountPlayersInForce(Force_Elfs)
  local integer XPO=CountPlayersInForce(Force_Unds)
  local location IGX=GetRectCenter(rect022)
  local location OXI=GetRectCenter(rect021)
  local location R_I=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location R0I=GetRectCenter(gg_rct_Hero_Creation_UD)
  call CleanTrigger(R4I)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set integer477=(LoadInteger(HY,2001,126))
  set integer478=(LoadInteger(HY,2001,127))
  set integer479=(LoadInteger(HY,2001,128))
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers019[QIE]=integers136[QIE]
    set QIE=QIE+1
  endloop
  set ZBE=GetRandomInt(1,3)
  if ZBE==1 then
    if JUX==1 then
      set integers019[1]=integers136[1]
    elseif JUX==2 then
      set integers019[1]=integers136[2]
      set integers019[2]=integers136[1]
    elseif JUX==3 then
      set integers019[1]=integers136[3]
      set integers019[2]=integers136[1]
      set integers019[3]=integers136[2]
    elseif JUX==4 then
      set integers019[1]=integers136[4]
      set integers019[2]=integers136[3]
      set integers019[3]=integers136[2]
      set integers019[4]=integers136[1]
    elseif JUX==5 then
      set integers019[1]=integers136[5]
      set integers019[2]=integers136[4]
      set integers019[3]=integers136[1]
      set integers019[4]=integers136[2]
      set integers019[5]=integers136[3]
    endif
  elseif ZBE==2 then
    if JUX==1 then
      set integers019[1]=integers136[1]
    elseif JUX==2 then
      set integers019[1]=integers136[2]
      set integers019[2]=integers136[1]
    elseif JUX==3 then
      set integers019[1]=integers136[2]
      set integers019[2]=integers136[3]
      set integers019[3]=integers136[1]
    elseif JUX==4 then
      set integers019[1]=integers136[3]
      set integers019[2]=integers136[1]
      set integers019[3]=integers136[4]
      set integers019[4]=integers136[2]
    elseif JUX==5 then
      set integers019[1]=integers136[4]
      set integers019[2]=integers136[3]
      set integers019[3]=integers136[2]
      set integers019[4]=integers136[5]
      set integers019[5]=integers136[1]
    endif
  else
    if JUX==1 then
      set integers019[1]=integers136[1]
    elseif JUX==2 then
      set integers019[1]=integers136[1]
      set integers019[2]=integers136[2]
    elseif JUX==3 then
      set integers019[1]=integers136[3]
      set integers019[2]=integers136[2]
      set integers019[3]=integers136[1]
    elseif JUX==4 then
      set integers019[1]=integers136[2]
      set integers019[2]=integers136[4]
      set integers019[3]=integers136[3]
      set integers019[4]=integers136[1]
    elseif JUX==5 then
      set integers019[1]=integers136[5]
      set integers019[2]=integers136[1]
      set integers019[3]=integers136[3]
      set integers019[4]=integers136[4]
      set integers019[5]=integers136[2]
    endif
  endif
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers136[QIE]=integers019[QIE]
    set QIE=QIE+1
  endloop
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers019[QIE]=integers137[QIE]
    set QIE=QIE+1
  endloop
  set ZBE=GetRandomInt(1,3)
  if ZBE==1 then
    if JUX==1 then
      set integers019[1]=integers137[1]
    elseif JUX==2 then
      set integers019[1]=integers137[2]
      set integers019[2]=integers137[1]
    elseif JUX==3 then
      set integers019[1]=integers137[3]
      set integers019[2]=integers137[1]
      set integers019[3]=integers137[2]
    elseif JUX==4 then
      set integers019[1]=integers137[4]
      set integers019[2]=integers137[3]
      set integers019[3]=integers137[2]
      set integers019[4]=integers137[1]
    elseif JUX==5 then
      set integers019[1]=integers137[5]
      set integers019[2]=integers137[4]
      set integers019[3]=integers137[1]
      set integers019[4]=integers137[2]
      set integers019[5]=integers137[3]
    endif
  elseif ZBE==2 then
    if JUX==1 then
      set integers019[1]=integers137[1]
    elseif JUX==2 then
      set integers019[1]=integers137[2]
      set integers019[2]=integers137[1]
    elseif JUX==3 then
      set integers019[1]=integers137[2]
      set integers019[2]=integers137[3]
      set integers019[3]=integers137[1]
    elseif JUX==4 then
      set integers019[1]=integers137[3]
      set integers019[2]=integers137[1]
      set integers019[3]=integers137[4]
      set integers019[4]=integers137[2]
    elseif JUX==5 then
      set integers019[1]=integers137[4]
      set integers019[2]=integers137[3]
      set integers019[3]=integers137[2]
      set integers019[4]=integers137[5]
      set integers019[5]=integers137[1]
    endif
  else
    if JUX==1 then
      set integers019[1]=integers137[1]
    elseif JUX==2 then
      set integers019[1]=integers137[1]
      set integers019[2]=integers137[2]
    elseif JUX==3 then
      set integers019[1]=integers137[3]
      set integers019[2]=integers137[2]
      set integers019[3]=integers137[1]
    elseif JUX==4 then
      set integers019[1]=integers137[2]
      set integers019[2]=integers137[4]
      set integers019[3]=integers137[3]
      set integers019[4]=integers137[1]
    elseif JUX==5 then
      set integers019[1]=integers137[5]
      set integers019[2]=integers137[1]
      set integers019[3]=integers137[3]
      set integers019[4]=integers137[4]
      set integers019[5]=integers137[2]
    endif
  endif
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers137[QIE]=integers019[QIE]
    set QIE=QIE+1
  endloop
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers019[QIE]=integers138[QIE]
    set QIE=QIE+1
  endloop
  set ZBE=GetRandomInt(1,3)
  if ZBE==1 then
    if JUX==1 then
      set integers019[1]=integers138[1]
    elseif JUX==2 then
      set integers019[1]=integers138[2]
      set integers019[2]=integers138[1]
    elseif JUX==3 then
      set integers019[1]=integers138[3]
      set integers019[2]=integers138[1]
      set integers019[3]=integers138[2]
    elseif JUX==4 then
      set integers019[1]=integers138[4]
      set integers019[2]=integers138[3]
      set integers019[3]=integers138[2]
      set integers019[4]=integers138[1]
    elseif JUX==5 then
      set integers019[1]=integers138[5]
      set integers019[2]=integers138[4]
      set integers019[3]=integers138[1]
      set integers019[4]=integers138[2]
      set integers019[5]=integers138[3]
    endif
  elseif ZBE==2 then
    if JUX==1 then
      set integers019[1]=integers138[1]
    elseif JUX==2 then
      set integers019[1]=integers138[2]
      set integers019[2]=integers138[1]
    elseif JUX==3 then
      set integers019[1]=integers138[2]
      set integers019[2]=integers138[3]
      set integers019[3]=integers138[1]
    elseif JUX==4 then
      set integers019[1]=integers138[3]
      set integers019[2]=integers138[1]
      set integers019[3]=integers138[4]
      set integers019[4]=integers138[2]
    elseif JUX==5 then
      set integers019[1]=integers138[4]
      set integers019[2]=integers138[3]
      set integers019[3]=integers138[2]
      set integers019[4]=integers138[5]
      set integers019[5]=integers138[1]
    endif
  else
    if JUX==1 then
      set integers019[1]=integers138[1]
    elseif JUX==2 then
      set integers019[1]=integers138[1]
      set integers019[2]=integers138[2]
    elseif JUX==3 then
      set integers019[1]=integers138[3]
      set integers019[2]=integers138[2]
      set integers019[3]=integers138[1]
    elseif JUX==4 then
      set integers019[1]=integers138[2]
      set integers019[2]=integers138[4]
      set integers019[3]=integers138[3]
      set integers019[4]=integers138[1]
    elseif JUX==5 then
      set integers019[1]=integers138[5]
      set integers019[2]=integers138[1]
      set integers019[3]=integers138[3]
      set integers019[4]=integers138[4]
      set integers019[5]=integers138[2]
    endif
  endif
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers138[QIE]=integers019[QIE]
    set QIE=QIE+1
  endloop
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers019[QIE]=integers139[QIE]
    set QIE=QIE+1
  endloop
  set ZBE=GetRandomInt(1,3)
  if ZBE==1 then
    if JUX==1 then
      set integers019[1]=integers139[1]
    elseif JUX==2 then
      set integers019[1]=integers139[2]
      set integers019[2]=integers139[1]
    elseif JUX==3 then
      set integers019[1]=integers139[3]
      set integers019[2]=integers139[1]
      set integers019[3]=integers139[2]
    elseif JUX==4 then
      set integers019[1]=integers139[4]
      set integers019[2]=integers139[3]
      set integers019[3]=integers139[2]
      set integers019[4]=integers139[1]
    elseif JUX==5 then
      set integers019[1]=integers139[5]
      set integers019[2]=integers139[4]
      set integers019[3]=integers139[1]
      set integers019[4]=integers139[2]
      set integers019[5]=integers139[3]
    endif
  elseif ZBE==2 then
    if JUX==1 then
      set integers019[1]=integers139[1]
    elseif JUX==2 then
      set integers019[1]=integers139[2]
      set integers019[2]=integers139[1]
    elseif JUX==3 then
      set integers019[1]=integers139[2]
      set integers019[2]=integers139[3]
      set integers019[3]=integers139[1]
    elseif JUX==4 then
      set integers019[1]=integers139[3]
      set integers019[2]=integers139[1]
      set integers019[3]=integers139[4]
      set integers019[4]=integers139[2]
    elseif JUX==5 then
      set integers019[1]=integers139[4]
      set integers019[2]=integers139[3]
      set integers019[3]=integers139[2]
      set integers019[4]=integers139[5]
      set integers019[5]=integers139[1]
    endif
  else
    if JUX==1 then
      set integers019[1]=integers139[1]
    elseif JUX==2 then
      set integers019[1]=integers139[1]
      set integers019[2]=integers139[2]
    elseif JUX==3 then
      set integers019[1]=integers139[3]
      set integers019[2]=integers139[2]
      set integers019[3]=integers139[1]
    elseif JUX==4 then
      set integers019[1]=integers139[2]
      set integers019[2]=integers139[4]
      set integers019[3]=integers139[3]
      set integers019[4]=integers139[1]
    elseif JUX==5 then
      set integers019[1]=integers139[5]
      set integers019[2]=integers139[1]
      set integers019[3]=integers139[3]
      set integers019[4]=integers139[4]
      set integers019[5]=integers139[2]
    endif
  endif
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers139[QIE]=integers019[QIE]
    set QIE=QIE+1
  endloop
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers019[QIE]=integers140[QIE]
    set QIE=QIE+1
  endloop
  set ZBE=GetRandomInt(1,3)
  if ZBE==1 then
    if JUX==1 then
      set integers019[1]=integers140[1]
    elseif JUX==2 then
      set integers019[1]=integers140[2]
      set integers019[2]=integers140[1]
    elseif JUX==3 then
      set integers019[1]=integers140[3]
      set integers019[2]=integers140[1]
      set integers019[3]=integers140[2]
    elseif JUX==4 then
      set integers019[1]=integers140[4]
      set integers019[2]=integers140[3]
      set integers019[3]=integers140[2]
      set integers019[4]=integers140[1]
    elseif JUX==5 then
      set integers019[1]=integers140[5]
      set integers019[2]=integers140[4]
      set integers019[3]=integers140[1]
      set integers019[4]=integers140[2]
      set integers019[5]=integers140[3]
    endif
  elseif ZBE==2 then
    if JUX==1 then
      set integers019[1]=integers140[1]
    elseif JUX==2 then
      set integers019[1]=integers140[2]
      set integers019[2]=integers140[1]
    elseif JUX==3 then
      set integers019[1]=integers140[2]
      set integers019[2]=integers140[3]
      set integers019[3]=integers140[1]
    elseif JUX==4 then
      set integers019[1]=integers140[3]
      set integers019[2]=integers140[1]
      set integers019[3]=integers140[4]
      set integers019[4]=integers140[2]
    elseif JUX==5 then
      set integers019[1]=integers140[4]
      set integers019[2]=integers140[3]
      set integers019[3]=integers140[2]
      set integers019[4]=integers140[5]
      set integers019[5]=integers140[1]
    endif
  else
    if JUX==1 then
      set integers019[1]=integers140[1]
    elseif JUX==2 then
      set integers019[1]=integers140[1]
      set integers019[2]=integers140[2]
    elseif JUX==3 then
      set integers019[1]=integers140[3]
      set integers019[2]=integers140[2]
      set integers019[3]=integers140[1]
    elseif JUX==4 then
      set integers019[1]=integers140[2]
      set integers019[2]=integers140[4]
      set integers019[3]=integers140[3]
      set integers019[4]=integers140[1]
    elseif JUX==5 then
      set integers019[1]=integers140[5]
      set integers019[2]=integers140[1]
      set integers019[3]=integers140[3]
      set integers019[4]=integers140[4]
      set integers019[5]=integers140[2]
    endif
  endif
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers140[QIE]=integers019[QIE]
    set QIE=QIE+1
  endloop
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers019[QIE]=integers141[QIE]
    set QIE=QIE+1
  endloop
  set ZBE=GetRandomInt(1,3)
  if ZBE==1 then
    if JUX==1 then
      set integers019[1]=integers141[1]
    elseif JUX==2 then
      set integers019[1]=integers141[2]
      set integers019[2]=integers141[1]
    elseif JUX==3 then
      set integers019[1]=integers141[3]
      set integers019[2]=integers141[1]
      set integers019[3]=integers141[2]
    elseif JUX==4 then
      set integers019[1]=integers141[4]
      set integers019[2]=integers141[3]
      set integers019[3]=integers141[2]
      set integers019[4]=integers141[1]
    elseif JUX==5 then
      set integers019[1]=integers141[5]
      set integers019[2]=integers141[4]
      set integers019[3]=integers141[1]
      set integers019[4]=integers141[2]
      set integers019[5]=integers141[3]
    endif
  elseif ZBE==2 then
    if JUX==1 then
      set integers019[1]=integers141[1]
    elseif JUX==2 then
      set integers019[1]=integers141[2]
      set integers019[2]=integers141[1]
    elseif JUX==3 then
      set integers019[1]=integers141[2]
      set integers019[2]=integers141[3]
      set integers019[3]=integers141[1]
    elseif JUX==4 then
      set integers019[1]=integers141[3]
      set integers019[2]=integers141[1]
      set integers019[3]=integers141[4]
      set integers019[4]=integers141[2]
    elseif JUX==5 then
      set integers019[1]=integers141[4]
      set integers019[2]=integers141[3]
      set integers019[3]=integers141[2]
      set integers019[4]=integers141[5]
      set integers019[5]=integers141[1]
    endif
  else
    if JUX==1 then
      set integers019[1]=integers141[1]
    elseif JUX==2 then
      set integers019[1]=integers141[1]
      set integers019[2]=integers141[2]
    elseif JUX==3 then
      set integers019[1]=integers141[3]
      set integers019[2]=integers141[2]
      set integers019[3]=integers141[1]
    elseif JUX==4 then
      set integers019[1]=integers141[2]
      set integers019[2]=integers141[4]
      set integers019[3]=integers141[3]
      set integers019[4]=integers141[1]
    elseif JUX==5 then
      set integers019[1]=integers141[5]
      set integers019[2]=integers141[1]
      set integers019[3]=integers141[3]
      set integers019[4]=integers141[4]
      set integers019[5]=integers141[2]
    endif
  endif
  set QIE=1
  loop
    exitwhen QIE>JUX
    set integers141[QIE]=integers019[QIE]
    set QIE=QIE+1
  endloop
  set ZCE=GetRandomInt(1,2)
  if integer477>=integer478 and integer477>=integer479 then
    call ClearTextMessages()
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,45,GetObjectName('n05Z')+" "+string011)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,45," ")
    set QIE=1
    set ZBE=1
    loop
      exitwhen QIE>5
      if IsPlayer(Sentinels[QIE])then
        if ZCE==1 then
          set udg_Hero[GetPlayerId(Sentinels[QIE])]=CreateUnitAtLoc(Sentinels[QIE],integers136[ZBE],IGX,bj_UNIT_FACING)
        else
          set udg_Hero[GetPlayerId(Sentinels[QIE])]=CreateUnitAtLoc(Sentinels[QIE],integers137[ZBE],IGX,bj_UNIT_FACING)
        endif
        set ZBE=ZBE+1
      endif
      set QIE=QIE+1
    endloop
    set QIE=1
    set ZBE=1
    loop
      exitwhen QIE>5
      if IsPlayer(Scourges[QIE])then
        if ZCE==1 then
          set udg_Hero[GetPlayerId(Scourges[QIE])]=CreateUnitAtLoc(Scourges[QIE],integers137[ZBE],OXI,bj_UNIT_FACING)
        else
          set udg_Hero[GetPlayerId(Scourges[QIE])]=CreateUnitAtLoc(Scourges[QIE],integers136[ZBE],OXI,bj_UNIT_FACING)
        endif
        set ZBE=ZBE+1
      endif
      set QIE=QIE+1
    endloop
  elseif integer478>=integer477 and integer478>=integer479 then
    call ClearTextMessages()
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,45,GetObjectName('n05Z')+" "+string012)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,45," ")
    set QIE=1
    set ZBE=1
    loop
      exitwhen QIE>5
      if IsPlayer(Sentinels[QIE])then
        if ZCE==1 then
          set udg_Hero[GetPlayerId(Sentinels[QIE])]=CreateUnitAtLoc(Sentinels[QIE],integers138[ZBE],IGX,bj_UNIT_FACING)
        else
          set udg_Hero[GetPlayerId(Sentinels[QIE])]=CreateUnitAtLoc(Sentinels[QIE],integers139[ZBE],IGX,bj_UNIT_FACING)
        endif
        set ZBE=ZBE+1
      endif
      set QIE=QIE+1
    endloop
    set QIE=1
    set ZBE=1
    loop
      exitwhen QIE>5
      if IsPlayer(Scourges[QIE])then
        if ZCE==1 then
          set udg_Hero[GetPlayerId(Scourges[QIE])]=CreateUnitAtLoc(Scourges[QIE],integers139[ZBE],OXI,bj_UNIT_FACING)
        else
          set udg_Hero[GetPlayerId(Scourges[QIE])]=CreateUnitAtLoc(Scourges[QIE],integers138[ZBE],OXI,bj_UNIT_FACING)
        endif
        set ZBE=ZBE+1
      endif
      set QIE=QIE+1
    endloop
  elseif integer479>=integer477 and integer479>=integer478 then
    call ClearTextMessages()
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,45,GetObjectName('n05Z')+" "+string013)
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,45," ")
    set QIE=1
    set ZBE=1
    loop
      exitwhen QIE>5
      if IsPlayer(Sentinels[QIE])then
        if ZCE==1 then
          set udg_Hero[GetPlayerId(Sentinels[QIE])]=CreateUnitAtLoc(Sentinels[QIE],integers140[ZBE],IGX,bj_UNIT_FACING)
        else
          set udg_Hero[GetPlayerId(Sentinels[QIE])]=CreateUnitAtLoc(Sentinels[QIE],integers141[ZBE],IGX,bj_UNIT_FACING)
        endif
        set ZBE=ZBE+1
      endif
      set QIE=QIE+1
    endloop
    set QIE=1
    set ZBE=1
    loop
      exitwhen QIE>5
      if IsPlayer(Scourges[QIE])then
        if ZCE==1 then
          set udg_Hero[GetPlayerId(Scourges[QIE])]=CreateUnitAtLoc(Scourges[QIE],integers141[ZBE],OXI,bj_UNIT_FACING)
        else
          set udg_Hero[GetPlayerId(Scourges[QIE])]=CreateUnitAtLoc(Scourges[QIE],integers140[ZBE],OXI,bj_UNIT_FACING)
        endif
        set ZBE=ZBE+1
      endif
      set QIE=QIE+1
    endloop
  endif
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,70,false)
  call TriggerAddCondition(RBX,Condition(function Func2217))
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  call RemoveLocation(R_I)
  call RemoveLocation(R0I)
  set IGX=null
  set OXI=null
  set R_I=null
  set R0I=null
  set RBX=null
  set R4I=null
  return false
endfunction

function Func2219 takes integer ZAE returns integer
  if ZAE==1 then
    return Func0585(integers089[GetRandomInt(1,integer109)])
  elseif ZAE==2 then
    return Func0585(integers087[GetRandomInt(1,integer107)])
  elseif ZAE==3 then
    return Func0585(integers088[GetRandomInt(1,integer108)])
  elseif ZAE==4 then
    return Func0585(MeleeHeroesArray[GetRandomInt(1,MeleeHeroesAmount)])
  elseif ZAE==5 then
    return Func0585(integers090[GetRandomInt(1,integer110)])
  endif
  return 0
endfunction

function Func2220 takes integer ZAE returns integer
  local integer QIE
  local integer ZBE
  local integer ZCE
  set ZCE=Func2219(ZAE)
  if boolean087 then
    return ZCE
  endif
  loop
    exitwhen booleans009[ZCE]==false
    set ZCE=Func2219(ZAE)
  endloop
  set booleans009[ZCE]=true
  return ZCE
endfunction

function Func2221 takes nothing returns nothing
  local integer ZAE=FirstHeroIndexid
  loop
    exitwhen ZAE>LastHeroIndexid
    set booleans009[ZAE]=false
    set ZAE=ZAE+1
  endloop
endfunction

function Func2222 takes nothing returns boolean
  local integer ZAE=GetPlayerId(GetTriggerPlayer())
  local string ZJE=SubString(GetEventPlayerChatString(),8,9)
  local integer QIE=0
  if ZJE=="1"then
    set QIE=1
  elseif ZJE=="2"then
    set QIE=2
  elseif ZJE=="3"then
    set QIE=3
  endif
  if QIE==0 then
    call Func0652(GetTriggerPlayer(),GetObjectName('n03D'))
    return false
  endif
  if(LoadBoolean(HY,2001,(950+ZAE)))then
    call Func0652(GetTriggerPlayer(),GetObjectName('n03A'))
    return false
  endif
  call SaveBoolean(HY,2001,(950+ZAE),(true))
  if QIE==1 then
    call SaveInteger(HY,2001,126,(1+(LoadInteger(HY,2001,126))))
  elseif QIE==2 then
    call SaveInteger(HY,2001,127,(1+(LoadInteger(HY,2001,127))))
  else
    call SaveInteger(HY,2001,128,(1+(LoadInteger(HY,2001,128))))
  endif
  call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20,GetObjectName('n09M')+" Option "+I2S(QIE)+".")
  return false
endfunction

function Func2223 takes nothing returns nothing
  local integer ZAE=CountPlayersInForce(Force_Elfs)
  local integer QIE=CountPlayersInForce(Force_Unds)
  local integer ZBE
  local integer ZCE
  local trigger RBX=CreateTrigger()
  local location IGX=GetRectCenter(rect022)
  local location OXI=GetRectCenter(rect021)
  local location R_I=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location R0I=GetRectCenter(gg_rct_Hero_Creation_UD)
  local integer JUX
  local trigger R4I
  set boolean093=true
  set boolean095=false
  set Repick_Allowed=false
  call TechAll()
  call PanCameraToTimedLocForPlayer(Sentinels[1],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[2],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[3],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[4],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[5],R_I,0)
  call PanCameraToTimedLocForPlayer(Scourges[1],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[2],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[3],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[4],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[5],R0I,0)
  call Func1849(RBX,"-Option",false)
  call TriggerAddCondition(RBX,Condition(function Func2222))
  call Func2221()
  set ZBE=1
  loop
    exitwhen ZBE>ZAE
    set integers136[ZBE]=HeroID[Func2220(ZBE)]
    set string011=string011+GetObjectName(integers136[ZBE])
    set ZBE=ZBE+1
    if ZBE<=ZAE then
      set string011=string011+"|c005BFEEA-|r"
    endif
  endloop
  set string011=string011+" |c00FF0000vs |r"
  set ZBE=1
  loop
    exitwhen ZBE>QIE
    set integers137[ZBE]=HeroID[Func2220(ZBE)]
    set string011=string011+GetObjectName(integers137[ZBE])
    set ZBE=ZBE+1
    if ZBE<=QIE then
      set string011=string011+"|c005BFEEA-|r"
    endif
  endloop
  call Func2221()
  set ZBE=1
  loop
    exitwhen ZBE>ZAE
    set integers138[ZBE]=HeroID[Func2220(ZBE)]
    set string012=string012+GetObjectName(integers138[ZBE])+" "
    set ZBE=ZBE+1
    if ZBE<=ZAE then
      set string012=string012+"|c005BFEEA-|r"
    endif
  endloop
  set string012=string012+" |c00FF0000vs |r"
  set ZBE=1
  loop
    exitwhen ZBE>QIE
    set integers139[ZBE]=HeroID[Func2220(ZBE)]
    set string012=string012+GetObjectName(integers139[ZBE])+" "
    set ZBE=ZBE+1
    if ZBE<=QIE then
      set string012=string012+"|c005BFEEA-|r"
    endif
  endloop
  call Func2221()
  set ZBE=1
  loop
    exitwhen ZBE>ZAE
    set integers140[ZBE]=HeroID[Func2220(ZBE)]
    set string013=string013+GetObjectName(integers140[ZBE])+" "
    set ZBE=ZBE+1
    if ZBE<=ZAE then
      set string013=string013+"|c005BFEEA-|r"
    endif
  endloop
  set string013=string013+" |c00FF0000vs |r"
  set ZBE=1
  loop
    exitwhen ZBE>QIE
    set integers141[ZBE]=HeroID[Func2220(ZBE)]
    set string013=string013+GetObjectName(integers141[ZBE])+" "
    set ZBE=ZBE+1
    if ZBE<=QIE then
      set string013=string013+"|c005BFEEA-|r"
    endif
  endloop
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75," ")
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75,GetObjectName('n06T'))
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75,GetObjectName('n06I')+" "+GetObjectName('n06D'))
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75," ")
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75,string011)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75," ")
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75,string012)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75," ")
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,75,string013)
  set R4I=CreateTrigger()
  call TriggerRegisterTimerEvent(R4I,30,false)
  call TriggerAddCondition(R4I,Condition(function Func2218))
  call SaveTriggerHandle(HY,(GetHandleId(R4I)),35,(RBX))
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  call RemoveLocation(R_I)
  call RemoveLocation(R0I)
  set IGX=null
  set OXI=null
  set R_I=null
  set R0I=null
  set RBX=null
  set R4I=null
endfunction

function Func2224 takes nothing returns boolean
  local player whichPlayer
  set boolean098=true
  set whichPlayer=Sentinels[1]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Sentinels[2]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Sentinels[3]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Sentinels[4]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Sentinels[5]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Scourges[1]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Scourges[2]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Scourges[3]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Scourges[4]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  set whichPlayer=Scourges[5]
  if(GetPlayerSlotState(whichPlayer)==PLAYER_SLOT_STATE_EMPTY)==false and booleans010[GetPlayerId(whichPlayer)]==false then
    call GetRandomHeroByAttr(whichPlayer,0)
  endif
  return false
endfunction

function Func2225 takes nothing returns boolean
  set boolean095=false
  set Repick_Allowed=false
  call TechAll()
  return false
endfunction

function Func2226 takes nothing returns nothing
  local integer ZAE=2000
  local player array IEI
  local player array IXI
  local integer QIE=0
  local integer ZBE=0
  local integer ZCE=0
  local trigger RBX=CreateTrigger()
  set boolean097=true
  call TriggerAddCondition(RBX,Condition(function Func2224))
  call TriggerRegisterTimerEvent(RBX,60-TimerGetElapsed(GlobalTimer),false)
  set RBX=CreateTrigger()
  call TriggerAddCondition(RBX,Condition(function Func2225))
  call TriggerRegisterTimerEvent(RBX,57-TimerGetElapsed(GlobalTimer),false)
  set RBX=null
  if IsPlayer(Sentinels[1])then
    set QIE=QIE+1
    set IEI[QIE]=Sentinels[1]
  endif
  if IsPlayer(Sentinels[2])then
    set QIE=QIE+1
    set IEI[QIE]=Sentinels[2]
  endif
  if IsPlayer(Sentinels[3])then
    set QIE=QIE+1
    set IEI[QIE]=Sentinels[3]
  endif
  if IsPlayer(Sentinels[4])then
    set QIE=QIE+1
    set IEI[QIE]=Sentinels[4]
  endif
  if IsPlayer(Sentinels[5])then
    set QIE=QIE+1
    set IEI[QIE]=Sentinels[5]
  endif
  if IsPlayer(Scourges[1])then
    set ZBE=ZBE+1
    set IXI[ZBE]=Scourges[1]
  endif
  if IsPlayer(Scourges[2])then
    set ZBE=ZBE+1
    set IXI[ZBE]=Scourges[2]
  endif
  if IsPlayer(Scourges[3])then
    set ZBE=ZBE+1
    set IXI[ZBE]=Scourges[3]
  endif
  if IsPlayer(Scourges[4])then
    set ZBE=ZBE+1
    set IXI[ZBE]=Scourges[4]
  endif
  if IsPlayer(Scourges[5])then
    set ZBE=ZBE+1
    set IXI[ZBE]=Scourges[5]
  endif
  set ZCE=1
  loop
    exitwhen ZCE>QIE
    call SavePlayerHandle(HY,2000,(550+GetPlayerId(IEI[ZCE])),(IXI[ZCE]))
    call SavePlayerHandle(HY,2000,(550+GetPlayerId(IXI[ZCE])),(IEI[ZCE]))
    set ZCE=ZCE+1
  endloop
endfunction

function Func2227 takes nothing returns nothing
  call Func0669(GetEnumUnit())
endfunction

function Func2228 takes unit source returns nothing
  local integer ZAE=GetPlayerId(GetOwningPlayer(source))
  set items001[ZAE]=UnitItemInSlot(source,0)
  set items002[ZAE]=UnitItemInSlot(source,1)
  set items003[ZAE]=UnitItemInSlot(source,2)
  set items004[ZAE]=UnitItemInSlot(source,3)
  set items005[ZAE]=UnitItemInSlot(source,4)
  set items006[ZAE]=UnitItemInSlot(source,5)
endfunction

function Func2229 takes player p1,player p2 returns integer
  local unit u1=udg_Hero[GetPlayerId(p1)]
  local unit u2=udg_Hero[GetPlayerId(p2)]
  call UnitRemoveBuffs(u1,true,true)
  call UnitRemoveBuffs(u2,true,true)
  if u1==null and u2==null then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15,udg_Colors[GetPlayerId(Sentinels[0])]+(PlayerNames[GetPlayerId(p1)])+" "+GetObjectName('n067')+" "+(PlayerNames[GetPlayerId(p2)])+" "+GetObjectName('n0A0')+"|r")
  elseif GetRandomInt(1,2)==1 then
    if(u1!=null)then
      return GetUnitTypeId(u1)
    else
      return GetUnitTypeId(u2)
    endif
  else
    if(u2!=null)then
      return GetUnitTypeId(u2)
    else
      return GetUnitTypeId(u1)
    endif
  endif
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15,udg_Colors[GetPlayerId(Sentinels[0])]+(PlayerNames[GetPlayerId(p1)])+" "+GetObjectName('n067')+" "+(PlayerNames[GetPlayerId(p2)])+" "+GetObjectName('n09B'))
  set u1=null
  set u2=null
  return GetSetElement()
endfunction

function Func2230 takes nothing returns nothing
  if(GetUnitTypeId(GetEnumUnit())=='n004')then
    call RemoveUnit(GetEnumUnit())
  endif
  if(GetUnitTypeId(GetEnumUnit())=='n036')then
    call KillUnit(GetEnumUnit())
    call RemoveUnit(GetEnumUnit())
  endif
endfunction

function Func2231 takes nothing returns boolean
  local integer ZAE
  local group g=GetAvailableGroup()
  local unit source
  local location IGX=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location OXI=GetRectCenter(gg_rct_Hero_Creation_UD)
  local integer QIE=CountPlayersInForce(Force_Elfs)
  local player array IEI
  local player array IXI
  local integer ZBE
  local integer ZCE
  local real result
  local real ZEE
  local real ZWE
  local integer JUX
  local group IBI=GetAvailableGroup()
  call GroupEnumUnitsInRect(IBI,GetWorldBounds(),Condition(function ReturnTrue))
  call ForGroup(IBI,function Func2230)
  call KillGroup(IBI)
  set ZAE=1
  set ZBE=1
  set ZCE=1
  loop
    exitwhen ZAE>5
    if(IsPlayer(Sentinels[ZAE]))then
      call Func2228(udg_Hero[GetPlayerId(Sentinels[ZAE])])
      call GroupAddUnit(g,udg_Hero[GetPlayerId(Sentinels[ZAE])])
      set IEI[ZBE]=Sentinels[ZAE]
      set ZBE=ZBE+1
    endif
    if(IsPlayer(Scourges[ZAE]))then
      call Func2228(udg_Hero[GetPlayerId(Scourges[ZAE])])
      call GroupAddUnit(g,udg_Hero[GetPlayerId(Scourges[ZAE])])
      set IXI[ZCE]=Scourges[ZAE]
      set ZCE=ZCE+1
    endif
    set ZAE=ZAE+1
  endloop
  set ZBE=1
  loop
    exitwhen ZBE>QIE
    set JUX=Func2229(IEI[ZBE],IXI[ZBE])
    if(udg_Hero[GetPlayerId(IEI[ZBE])]==null)then
      set result=GetLocationX(IGX)+GetRandomReal(1,40)
      set ZEE=GetLocationY(IGX)+GetRandomReal(1,40)
      set ZWE=270
    else
      set result=GetUnitX(udg_Hero[GetPlayerId(IEI[ZBE])])
      set ZEE=GetUnitY(udg_Hero[GetPlayerId(IEI[ZBE])])
      set ZWE=GetUnitFacing(udg_Hero[GetPlayerId(IEI[ZBE])])
      call SetUnitPathing(udg_Hero[GetPlayerId(IEI[ZBE])],false)
    endif
    set udg_Hero[GetPlayerId(IEI[ZBE])]=CreateUnit(IEI[ZBE],JUX,result,ZEE,ZWE)
    call SetUnitPathing(udg_Hero[GetPlayerId(IEI[ZBE])],false)
    call SetUnitPosition(udg_Hero[GetPlayerId(IEI[ZBE])],result,ZEE)
    call UnitAddItem(udg_Hero[GetPlayerId(IEI[ZBE])],items001[GetPlayerId(IEI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IEI[ZBE])],items002[GetPlayerId(IEI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IEI[ZBE])],items003[GetPlayerId(IEI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IEI[ZBE])],items004[GetPlayerId(IEI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IEI[ZBE])],items005[GetPlayerId(IEI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IEI[ZBE])],items006[GetPlayerId(IEI[ZBE])])
    call ClearSelectionForPlayer(IEI[ZBE])
    call SelectUnitAddForPlayer(udg_Hero[GetPlayerId(IEI[ZBE])],IEI[ZBE])
    call PanCameraToTimedForPlayer(IEI[ZBE],result,ZEE,0)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",result,ZEE))
    if(udg_Hero[GetPlayerId(IXI[ZBE])]==null)then
      set result=GetLocationX(OXI)
      set ZEE=GetLocationY(OXI)
      set ZWE=270
    else
      set result=GetUnitX(udg_Hero[GetPlayerId(IXI[ZBE])])
      set ZEE=GetUnitY(udg_Hero[GetPlayerId(IXI[ZBE])])
      set ZWE=GetUnitFacing(udg_Hero[GetPlayerId(IXI[ZBE])])
      call SetUnitPathing(udg_Hero[GetPlayerId(IXI[ZBE])],false)
    endif
    set udg_Hero[GetPlayerId(IXI[ZBE])]=CreateUnit(IXI[ZBE],JUX,result,ZEE,ZWE)
    call SetUnitPathing(udg_Hero[GetPlayerId(IXI[ZBE])],false)
    call SetUnitPosition(udg_Hero[GetPlayerId(IXI[ZBE])],result,ZEE)
    call UnitAddItem(udg_Hero[GetPlayerId(IXI[ZBE])],items001[GetPlayerId(IXI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IXI[ZBE])],items002[GetPlayerId(IXI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IXI[ZBE])],items003[GetPlayerId(IXI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IXI[ZBE])],items004[GetPlayerId(IXI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IXI[ZBE])],items005[GetPlayerId(IXI[ZBE])])
    call UnitAddItem(udg_Hero[GetPlayerId(IXI[ZBE])],items006[GetPlayerId(IXI[ZBE])])
    call ClearSelectionForPlayer(IXI[ZBE])
    call SelectUnitAddForPlayer(udg_Hero[GetPlayerId(IXI[ZBE])],IXI[ZBE])
    call PanCameraToTimedForPlayer(IXI[ZBE],result,ZEE,0)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",result,ZEE))
    set ZBE=ZBE+1
  endloop
  call ForGroup(g,function Func2227)
  call KillGroup(g)
  set ZBE=1
  loop
    exitwhen ZBE>QIE
    call SetUnitPathing(udg_Hero[GetPlayerId(IEI[ZBE])],true)
    call SetUnitPathing(udg_Hero[GetPlayerId(IXI[ZBE])],true)
    set ZBE=ZBE+1
  endloop
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  set g=null
  set source=null
  set IGX=null
  set OXI=null
  set IBI=null
  return false
endfunction

function Func2232 takes nothing returns boolean
  set Repick_Allowed=false
  set boolean095=false
  call TechAll()
  return false
endfunction

function Func2233 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call DisplayTimedTextToForceEx(AllPlayers,10,GetObjectName('n09H'))
  call DisplayTimedTextToForceEx(AllPlayers,10,GetObjectName('n09E'))
  set boolean086=true
  call TechHeroForAll('H00I')
  call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(GlobalTimer),false)
  call TriggerAddCondition(t,Condition(function Func2231))
  set t=CreateTrigger()
  call TriggerAddCondition(t,Condition(function Func2232))
  call TriggerRegisterTimerEvent(t,57-TimerGetElapsed(GlobalTimer),false)
  set t=null
endfunction

function Func2234 takes nothing returns nothing
  local location IGX=GetRectCenter(rect022)
  local location OXI=GetRectCenter(rect021)
  local location R_I=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location R0I=GetRectCenter(gg_rct_Hero_Creation_UD)
  local integer ZAE
  local integer QIE
  local integer ZBE
  if not boolean087 then
    call TechAll()
  endif
  set boolean066=true
  set integer074=400
  set boolean095=false
  call PanCameraToTimedLocForPlayer(Sentinels[1],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[2],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[3],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[4],R_I,0)
  call PanCameraToTimedLocForPlayer(Sentinels[5],R_I,0)
  call PanCameraToTimedLocForPlayer(Scourges[1],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[2],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[3],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[4],R0I,0)
  call PanCameraToTimedLocForPlayer(Scourges[5],R0I,0)
  if boolean091 then
    if IsSentinel(PlayerModeTyper)then
      loop
        set ZBE=GetRandomInt(FirstHeroIndexid,LastScourgeHeroIndexid)
        exitwhen b_isHeroPicked[ZBE]==false
      endloop
      set udg_Hero[GetPlayerId(PlayerModeTyper)]=CreateUnit(PlayerModeTyper,HeroID[ZBE],GetLocationX(IGX),GetLocationY(IGX),270)
    else
      loop
        set ZBE=GetRandomInt(FirstSentinelHeroIndexid,LastHeroIndexid)
        exitwhen b_isHeroPicked[ZBE]==false
      endloop
      set udg_Hero[GetPlayerId(PlayerModeTyper)]=CreateUnit(PlayerModeTyper,HeroID[ZBE],GetLocationX(OXI),GetLocationY(OXI),270)
    endif
    call RemoveLocation(IGX)
    call RemoveLocation(OXI)
    call RemoveLocation(R_I)
    call RemoveLocation(R0I)
    return
  endif
  set Repick_Allowed=false
  set ZAE=1
  set QIE=5
  loop
    exitwhen ZAE>QIE
    set udg_Hero[GetPlayerId(Sentinels[ZAE])]=null
    if(IsPlayer(Sentinels[ZAE]))then
      loop
        set ZBE=GetRandomInt(FirstHeroIndexid,LastScourgeHeroIndexid)
        if(b_isHeroPicked[ZBE]==false)then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[GetPlayerId(Sentinels[ZAE])]=CreateUnitAtLoc(Sentinels[ZAE],HeroID[ZBE],IGX,bj_UNIT_FACING)
        endif
        exitwhen(udg_Hero[GetPlayerId(Sentinels[ZAE])]!=null)
      endloop
    endif
    set ZAE=ZAE+1
  endloop
  set ZAE=1
  set QIE=5
  loop
    exitwhen ZAE>QIE
    set udg_Hero[GetPlayerId(Scourges[ZAE])]=null
    if(IsPlayer(Scourges[ZAE]))then
      loop
        set ZBE=GetRandomInt(FirstSentinelHeroIndexid,LastHeroIndexid)
        if(b_isHeroPicked[ZBE]==false)then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[GetPlayerId(Scourges[ZAE])]=CreateUnitAtLoc(Scourges[ZAE],HeroID[ZBE],OXI,bj_UNIT_FACING)
        endif
        exitwhen(udg_Hero[GetPlayerId(Scourges[ZAE])]!=null)
      endloop
    endif
    set ZAE=ZAE+1
  endloop
  set Repick_Allowed=true
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  call RemoveLocation(R_I)
  call RemoveLocation(R0I)
  set IGX=null
  set OXI=null
  set R_I=null
  set R0I=null
endfunction

function Func2235 takes nothing returns nothing
  set boolean111=true
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10,GetObjectName('n06K')+" "+GetObjectName('n06L'))
  call DisableTrigger(GetTriggeringTrigger())
endfunction

function Func2236 takes nothing returns nothing
  local integer ZAE=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
  if ZAE>integer096 then
    call Error(PlayerModeTyper,GetObjectName('n03C'))
  elseif ZAE<10 then
    call Error(PlayerModeTyper,GetObjectName('n02I'))
  else
    set integer096=ZAE
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10,GetObjectName('n06X')+" "+I2S(integer096)+" "+GetObjectName('n06N'))
    call DisableTrigger(GetTriggeringTrigger())
  endif
endfunction

function Func2237 takes nothing returns nothing
  call DisableTrigger((LoadTriggerHandle(HY,(GetHandleId(GetTriggeringTrigger())),170)))
  call DisableTrigger((LoadTriggerHandle(HY,(GetHandleId(GetTriggeringTrigger())),171)))
  call DisableTrigger(GetTriggeringTrigger())
endfunction

function Func2238 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local trigger R4I=CreateTrigger()
  local trigger IJI=CreateTrigger()
  set integer096=Func0464(LastScourgeHeroIndexid,LastHeroIndexid-FirstSentinelHeroIndexid+1)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00," ")
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName('n06O')+" -nd "+GetObjectName('n067')+" -lives xx "+GetObjectName('n06Q'))
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName('n060')+" "+I2S(integer096))
  call TriggerRegisterTimerEvent(RBX,15,false)
  call TriggerAddAction(RBX,function Func2237)
  call SaveTriggerHandle(HY,(GetHandleId(RBX)),170,(IJI))
  call SaveTriggerHandle(HY,(GetHandleId(RBX)),171,(R4I))
  call TriggerRegisterPlayerChatEvent(IJI,PlayerModeTyper,"-nd",true)
  call TriggerAddAction(IJI,function Func2235)
  call TriggerRegisterPlayerChatEvent(R4I,PlayerModeTyper,"-lives",false)
  call TriggerAddAction(R4I,function Func2236)
  set RBX=null
  set R4I=null
  set IJI=null
endfunction

function Func2239 takes nothing returns nothing
  local integer j=(LoadInteger(HY,(GetHandleId(GetTriggeringTrigger())),173))
  local integer i
  local integer k
  local integer ZCE
  local integer E1X
  local location LOX=GetRectCenter(gg_rct_Allpick_Sent)
  local location LRX=GetRectCenter(gg_rct_Allpick_Scourge)
  if boolean094 then
    return
  endif
  if IsSentinel(Player(j))then
    set i=FirstHeroIndexid
    set k=LastScourgeHeroIndexid
    set E1X=0
  else
    set i=FirstSentinelHeroIndexid
    set k=LastHeroIndexid
    set E1X=1
  endif
  if boolean067 then
    set i=FirstHeroIndexid
    set k=LastHeroIndexid
    call CreateUnitAtLoc(Player(j),'n00C',LOX,bj_UNIT_FACING)
    call CreateUnitAtLoc(Player(j),'n00C',LRX,bj_UNIT_FACING)
  else
    set i=FirstHeroIndexid
    set k=LastHeroIndexid
    if IsSentinel(Player(j))then
      call CreateUnitAtLoc(Player(j),'n00C',LOX,bj_UNIT_FACING)
    else
      call CreateUnitAtLoc(Player(j),'n00C',LRX,bj_UNIT_FACING)
    endif
  endif
  if not boolean065 then
    loop
      exitwhen i>k
      if b_isHeroPicked[i]==false then
        call SetPlayerTechMaxAllowed(Player(j),HeroID[i],1)
      endif
      set i=i+1
    endloop
    if(GetPlayerState(Player(j),PLAYER_STATE_RESOURCE_GOLD)<250)then
      call SetPlayerState(Player(j),PLAYER_STATE_RESOURCE_GOLD,250)
    endif
  elseif(integers053[E1X]<integer096)then
    set udg_Hero[j]=null
    if IsPlayer(Player(j))then
      loop
        set ZCE=GetSetElement()
        if b_isHeroPicked[ZCE]==false then
          set b_isHeroPicked[ZCE]=true
          if IsSentinel(Player(j))then
            set udg_Hero[j]=CreateUnitAtLoc(Player(j),HeroID[ZCE],LOX,bj_UNIT_FACING)
          else
            set udg_Hero[j]=CreateUnitAtLoc(Player(j),HeroID[ZCE],LRX,bj_UNIT_FACING)
          endif
        endif
        exitwhen udg_Hero[j]!=null
      endloop
    endif
  endif
  call RemoveLocation(LOX)
  call RemoveLocation(LRX)
  set LOX=null
  set LRX=null
endfunction

function Func2240 takes nothing returns nothing
  local real result
  local trigger RBX
  local integer ZAE
  local integer QIE
  set Mode_DM=true
  call TechHeroForAll('H00I')
  set QIE=1
  loop
    exitwhen QIE>5
    set ZAE=GetPlayerId(Sentinels[QIE])
    set RBX=CreateTrigger()
    call TriggerRegisterTimerExpireEvent(RBX,HeroRespawnTimer[ZAE])
    call TriggerAddAction(RBX,function Func2239)
    call SaveInteger(HY,(GetHandleId(RBX)),173,(ZAE))
    set ZAE=GetPlayerId(Scourges[QIE])
    set RBX=CreateTrigger()
    call TriggerRegisterTimerExpireEvent(RBX,HeroRespawnTimer[ZAE])
    call TriggerAddAction(RBX,function Func2239)
    call SaveInteger(HY,(GetHandleId(RBX)),173,(ZAE))
    set QIE=QIE+1
    set RBX=null
  endloop
  call UnitRemoveAbility(SentCircleOfPower1,'Aawa')
  call UnitRemoveAbility(SentCircleOfPower2,'Aawa')
  call UnitRemoveAbility(SentCircleOfPower3,'Aawa')
  call UnitRemoveAbility(SentCircleOfPower4,'Aawa')
  call UnitRemoveAbility(SentCircleOfPower5,'Aawa')
  call UnitRemoveAbility(ScrgCircleOfPower1,'Aawa')
  call UnitRemoveAbility(ScrgCircleOfPower2,'Aawa')
  call UnitRemoveAbility(ScrgCircleOfPower3,'Aawa')
  call UnitRemoveAbility(ScrgCircleOfPower4,'Aawa')
  call UnitRemoveAbility(ScrgCircleOfPower5,'Aawa')
  call ExecuteFunc("Func2238")
endfunction

function Func2241 takes nothing returns nothing
  local integer ZAE=GetRandomInt(1,4)
  if(ZAE==1)then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName('n0FD'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00," ")
    call ExecuteFunc("Func2192")
  endif
  if(ZAE==2)then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName('n0FE'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00," ")
    call ExecuteFunc("Func2214")
  endif
  if(ZAE==3)then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName('n0FK'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00," ")
    call ExecuteFunc("Func2223")
  endif
  if(ZAE==4)then
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName('n0FM'))
    call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,20.00," ")
    call ExecuteFunc("Func2250")
    call ExecuteFunc("Func2216")
  endif
endfunction

function Func2242 takes nothing returns nothing
  set boolean087=true
  call TechHeroForAll('H00I')
  call TechHeroForAll('N0MU')
endfunction

function Func2243 takes nothing returns nothing
  local integer ZAE=CountPlayersInForce(Force_Elfs)
  local integer QIE=CountPlayersInForce(Force_Unds)
  local integer ILI=ZAE+QIE
  local integer j
  local integer JUX
  local integer i
  local integer k
  local integer IMI
  local player array p1
  local player array p2
  local integer IPI
  local integer FHO
  local integer FJO
  local location IGX=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location OXI=GetRectCenter(gg_rct_Hero_Creation_UD)
  local location R_I=GetRectCenter(gg_rct_Allpick_Sent)
  local location R0I=GetRectCenter(gg_rct_Allpick_Scourge)
  set boolean084=true
  call Func1003(Sentinels[1])
  call Func1003(Sentinels[2])
  call Func1003(Sentinels[3])
  call Func1003(Sentinels[4])
  call Func1003(Sentinels[5])
  call Func1003(Scourges[1])
  call Func1003(Scourges[2])
  call Func1003(Scourges[3])
  call Func1003(Scourges[4])
  call Func1003(Scourges[5])
  set i=1
  loop
    exitwhen i>5
    if IsPlayer(Sentinels[i])then
      call CreateUnitAtLoc(Sentinels[i],'n00C',R_I,bj_UNIT_FACING)
      call CreateUnitAtLoc(Sentinels[i],'n00C',R0I,bj_UNIT_FACING)
    endif
    if IsPlayer(Scourges[i])then
      call CreateUnitAtLoc(Scourges[i],'n00C',R_I,bj_UNIT_FACING)
      call CreateUnitAtLoc(Scourges[i],'n00C',R0I,bj_UNIT_FACING)
    endif
    set i=i+1
  endloop
  call RemoveLocation(R_I)
  call RemoveLocation(R0I)
  set FHO=GetPlayerState(Sentinels[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[5],PLAYER_STATE_RESOURCE_GOLD)
  set FJO=GetPlayerState(Scourges[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[5],PLAYER_STATE_RESOURCE_GOLD)
  set p1[1]=null
  set p1[2]=null
  set p1[3]=null
  set p1[4]=null
  set p1[5]=null
  set p1[6]=null
  set p1[7]=null
  set p1[8]=null
  set p1[9]=null
  set p1[10]=null
  set IMI=1
  set IPI=1
  set j=1
  loop
    exitwhen j>5
    if(IsPlayer(Sentinels[j]))then
      set p1[IPI]=Sentinels[j]
      set IPI=IPI+1
    else
      set p2[IMI]=Sentinels[j]
      set IMI=IMI+1
    endif
    set j=j+1
  endloop
  set j=1
  loop
    exitwhen j>5
    if(IsPlayer(Scourges[j]))then
      set p1[IPI]=Scourges[j]
      set IPI=IPI+1
    else
      set p2[IMI]=Scourges[j]
      set IMI=IMI+1
    endif
    set j=j+1
  endloop
  set Sentinels[1]=null
  set Sentinels[2]=null
  set Sentinels[3]=null
  set Sentinels[4]=null
  set Sentinels[5]=null
  set Scourges[1]=null
  set Scourges[2]=null
  set Scourges[3]=null
  set Scourges[4]=null
  set Scourges[5]=null
  set j=1
  loop
    exitwhen j>(ILI/2)
    set JUX=GetRandomInt(1,ILI)
    if(p1[JUX]!=null)then
      set Sentinels[j]=p1[JUX]
      set p1[JUX]=null
      set j=j+1
    endif
  endloop
  set i=j
  set j=1
  loop
    exitwhen j>ILI-i+1
    set JUX=GetRandomInt(1,ILI)
    if(p1[JUX]!=null)then
      set Scourges[j]=p1[JUX]
      set p1[JUX]=null
      set j=j+1
    endif
  endloop
  set IMI=j
  set j=i
  set k=1
  loop
    exitwhen j>5
    set Sentinels[j]=p2[k]
    set k=k+1
    set j=j+1
  endloop
  set j=IMI
  loop
    exitwhen j>5
    set Scourges[j]=p2[k]
    set k=k+1
    set j=j+1
  endloop
  set j=0
  loop
    exitwhen j>5
    set j=j+1
  endloop
  call SetPlayerTeam(Sentinels[0],0)
  call SetPlayerTeam(Sentinels[1],0)
  call SetPlayerTeam(Sentinels[2],0)
  call SetPlayerTeam(Sentinels[3],0)
  call SetPlayerTeam(Sentinels[4],0)
  call SetPlayerTeam(Sentinels[5],0)
  call SetPlayerTeam(Scourges[0],1)
  call SetPlayerTeam(Scourges[1],1)
  call SetPlayerTeam(Scourges[2],1)
  call SetPlayerTeam(Scourges[3],1)
  call SetPlayerTeam(Scourges[4],1)
  call SetPlayerTeam(Scourges[5],1)
  call Func0948()
  set i=0
  set k=0
  loop
    exitwhen i>5
    loop
      exitwhen k>5
      call SetPlayerAllianceStateBJ(Sentinels[i],Sentinels[k],3)
      call SetPlayerAllianceStateBJ(Scourges[i],Scourges[k],3)
      call SetPlayerAllianceStateBJ(Sentinels[i],Scourges[k],0)
      call SetPlayerAllianceStateBJ(Scourges[i],Sentinels[k],0)
      set k=k+1
    endloop
    set k=0
    set i=i+1
  endloop
  call ForceClear(Force_Elfs)
  call ForceClear(Force_Unds)
  call ForceAddPlayer(Force_Elfs,Sentinels[0])
  call ForceAddPlayer(Force_Elfs,Sentinels[1])
  call ForceAddPlayer(Force_Elfs,Sentinels[2])
  call ForceAddPlayer(Force_Elfs,Sentinels[3])
  call ForceAddPlayer(Force_Elfs,Sentinels[4])
  call ForceAddPlayer(Force_Elfs,Sentinels[5])
  call ForceAddPlayer(Force_Unds,Scourges[0])
  call ForceAddPlayer(Force_Unds,Scourges[1])
  call ForceAddPlayer(Force_Unds,Scourges[2])
  call ForceAddPlayer(Force_Unds,Scourges[3])
  call ForceAddPlayer(Force_Unds,Scourges[4])
  call ForceAddPlayer(Force_Unds,Scourges[5])
  call ExecuteFunc("Func0949")
  call Trig_display_leaderboard_Actions()
  set ZAE=CountPlayersInForce(Force_Elfs)
  set QIE=CountPlayersInForce(Force_Unds)
  set j=1
  loop
    exitwhen j>5
    if(IsPlayer(Sentinels[j]))then
      call SetPlayerStateBJ(Sentinels[j],PLAYER_STATE_RESOURCE_GOLD,(4375/ZAE))
      call SetPlayerStateBJ(Sentinels[j],PLAYER_STATE_RESOURCE_LUMBER,0)
    endif
    if(IsPlayer(Scourges[j]))then
      call SetPlayerStateBJ(Scourges[j],PLAYER_STATE_RESOURCE_GOLD,(4375/QIE))
      call SetPlayerStateBJ(Scourges[j],PLAYER_STATE_RESOURCE_LUMBER,0)
    endif
    set j=j+1
  endloop
  if udg_ObserverMode then
    set i=0
    loop
      exitwhen i>5
      call SetPlayerAlliance(Player(0),Sentinels[i],ConvertAllianceType(0),true)
      call SetPlayerAlliance(Player(0),Sentinels[i],ConvertAllianceType(4),true)
      call SetPlayerAlliance(Player(0),Scourges[i],ConvertAllianceType(0),false)
      call SetPlayerAlliance(Player(0),Scourges[i],ConvertAllianceType(4),false)
      set i=i+1
    endloop
  endif
  call StorePlayersColorValues()
  set IGX=null
  set OXI=null
  set R_I=null
  set R0I=null
endfunction

function Func2244 takes nothing returns nothing
  local integer IQI=CountPlayersInForce(Force_Elfs)
  local integer ISI=CountPlayersInForce(Force_Unds)
  local integer ILI=IQI+ISI
  local integer k
  local integer i
  local integer j
  local player array p1
  local integer ITI
  local integer IUI
  local location IWI
  local location IYI
  local location IZI
  local location I_I
  local integer YIE
  set YIE=GetRandomInt(1,2)
  call DisplayTimedTextToForceEx(AllPlayers,10,GetObjectName('n0GY'))
  if YIE==1 then
    return
  endif
  set IWI=GetRectCenter(gg_rct_Hero_Creation_NE)
  set IYI=GetRectCenter(gg_rct_Hero_Creation_UD)
  set IZI=GetRectCenter(gg_rct_Allpick_Sent)
  set I_I=GetRectCenter(gg_rct_Allpick_Scourge)
  call Func1003(Sentinels[1])
  call Func1003(Sentinels[2])
  call Func1003(Sentinels[3])
  call Func1003(Sentinels[4])
  call Func1003(Sentinels[5])
  call Func1003(Scourges[1])
  call Func1003(Scourges[2])
  call Func1003(Scourges[3])
  call Func1003(Scourges[4])
  call Func1003(Scourges[5])
  set i=1
  loop
    if IsPlayer(Sentinels[i])then
      call CreateUnitAtLoc(Sentinels[i],'n00C',IZI,bj_UNIT_FACING)
      call CreateUnitAtLoc(Sentinels[i],'n00C',I_I,bj_UNIT_FACING)
    endif
    if IsPlayer(Scourges[i])then
      call CreateUnitAtLoc(Scourges[i],'n00C',IZI,bj_UNIT_FACING)
      call CreateUnitAtLoc(Scourges[i],'n00C',I_I,bj_UNIT_FACING)
    endif
    set i=i+1
    exitwhen i>5
  endloop
  call RemoveLocation(IZI)
  call RemoveLocation(I_I)
  set ITI=GetPlayerState(Sentinels[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Sentinels[5],PLAYER_STATE_RESOURCE_GOLD)
  set IUI=GetPlayerState(Scourges[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Scourges[5],PLAYER_STATE_RESOURCE_GOLD)
  set p1[1]=Sentinels[1]
  set p1[2]=Sentinels[2]
  set p1[3]=Sentinels[3]
  set p1[4]=Sentinels[4]
  set p1[5]=Sentinels[5]
  set p1[6]=Scourges[1]
  set p1[7]=Scourges[2]
  set p1[8]=Scourges[3]
  set p1[9]=Scourges[4]
  set p1[10]=Scourges[5]
  set Sentinels[1]=p1[6]
  set Sentinels[2]=p1[7]
  set Sentinels[3]=p1[8]
  set Sentinels[4]=p1[9]
  set Sentinels[5]=p1[10]
  set Scourges[1]=p1[1]
  set Scourges[2]=p1[2]
  set Scourges[3]=p1[3]
  set Scourges[4]=p1[4]
  set Scourges[5]=p1[5]
  call SetPlayerTeam(Sentinels[0],0)
  call SetPlayerTeam(Sentinels[1],0)
  call SetPlayerTeam(Sentinels[2],0)
  call SetPlayerTeam(Sentinels[3],0)
  call SetPlayerTeam(Sentinels[4],0)
  call SetPlayerTeam(Sentinels[5],0)
  call SetPlayerTeam(Scourges[0],1)
  call SetPlayerTeam(Scourges[1],1)
  call SetPlayerTeam(Scourges[2],1)
  call SetPlayerTeam(Scourges[3],1)
  call SetPlayerTeam(Scourges[4],1)
  call SetPlayerTeam(Scourges[5],1)
  call Func0948()
  set i=0
  set j=0
  loop
    loop
      call SetPlayerAllianceStateBJ(Sentinels[i],Sentinels[j],3)
      call SetPlayerAllianceStateBJ(Scourges[i],Scourges[j],3)
      call SetPlayerAllianceStateBJ(Sentinels[i],Scourges[j],0)
      call SetPlayerAllianceStateBJ(Scourges[i],Sentinels[j],0)
      set j=j+1
      exitwhen j>5
    endloop
    set j=0
    set i=i+1
    exitwhen i>5
  endloop
  call ForceClear(Force_Elfs)
  call ForceClear(Force_Unds)
  call ForceAddPlayer(Force_Elfs,Sentinels[0])
  call ForceAddPlayer(Force_Elfs,Sentinels[1])
  call ForceAddPlayer(Force_Elfs,Sentinels[2])
  call ForceAddPlayer(Force_Elfs,Sentinels[3])
  call ForceAddPlayer(Force_Elfs,Sentinels[4])
  call ForceAddPlayer(Force_Elfs,Sentinels[5])
  call ForceAddPlayer(Force_Unds,Scourges[0])
  call ForceAddPlayer(Force_Unds,Scourges[1])
  call ForceAddPlayer(Force_Unds,Scourges[2])
  call ForceAddPlayer(Force_Unds,Scourges[3])
  call ForceAddPlayer(Force_Unds,Scourges[4])
  call ForceAddPlayer(Force_Unds,Scourges[5])
  call ExecuteFunc("Func0949")
  set IQI=CountPlayersInForce(Force_Elfs)
  set ISI=CountPlayersInForce(Force_Unds)
  set i=1
  loop
    exitwhen i>5
    if(IsPlayer(Sentinels[i]))then
      call SetPlayerStateBJ(Sentinels[i],PLAYER_STATE_RESOURCE_GOLD,(4375/IQI))
      call SetPlayerStateBJ(Sentinels[i],PLAYER_STATE_RESOURCE_LUMBER,0)
    endif
    if(IsPlayer(Scourges[i]))then
      call SetPlayerStateBJ(Scourges[i],PLAYER_STATE_RESOURCE_GOLD,(4375/ISI))
      call SetPlayerStateBJ(Scourges[i],PLAYER_STATE_RESOURCE_LUMBER,0)
    endif
    set i=i+1
  endloop
  call PanCameraToTimedLocForPlayer(Sentinels[1],IWI,0)
  call PanCameraToTimedLocForPlayer(Sentinels[2],IWI,0)
  call PanCameraToTimedLocForPlayer(Sentinels[3],IWI,0)
  call PanCameraToTimedLocForPlayer(Sentinels[4],IWI,0)
  call PanCameraToTimedLocForPlayer(Sentinels[5],IWI,0)
  call PanCameraToTimedLocForPlayer(Scourges[1],IYI,0)
  call PanCameraToTimedLocForPlayer(Scourges[2],IYI,0)
  call PanCameraToTimedLocForPlayer(Scourges[3],IYI,0)
  call PanCameraToTimedLocForPlayer(Scourges[4],IYI,0)
  call PanCameraToTimedLocForPlayer(Scourges[5],IYI,0)
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Sentinels[1],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Sentinels[2],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Sentinels[3],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Sentinels[4],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Sentinels[5],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Scourges[1],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Scourges[2],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Scourges[3],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Scourges[4],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  call DestroyFogModifier(CreateFogModifierRectBJ(true,Scourges[5],FOG_OF_WAR_FOGGED,bj_mapInitialPlayableArea))
  if udg_ObserverMode then
    set i=0
    loop
      exitwhen i>5
      call SetPlayerAlliance(Player(0),Sentinels[i],ConvertAllianceType(0),true)
      call SetPlayerAlliance(Player(0),Sentinels[i],ConvertAllianceType(4),true)
      call SetPlayerAlliance(Player(0),Scourges[i],ConvertAllianceType(0),false)
      call SetPlayerAlliance(Player(0),Scourges[i],ConvertAllianceType(4),false)
      set i=i+1
    endloop
  endif
  call StorePlayersColorValues()
  call Trig_display_leaderboard_Actions()
  set IWI=null
  set IYI=null
  set IZI=null
  set I_I=null
endfunction

function Func2245 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),172))
  local player whichPlayer
  local integer ZBE=1
  loop
    exitwhen ZBE>5
    set whichPlayer=Sentinels[ZBE]
    if IsPlayer(whichPlayer)and whichPlayer!=PlayerModeTyper then
      set udg_Hero[GetPlayerId(whichPlayer)]=CreateUnit(whichPlayer,QIE,GetRectCenterX(gg_rct_Hero_Creation_NE),GetRectCenterY(gg_rct_Hero_Creation_NE),270)
    endif
    set whichPlayer=Scourges[ZBE]
    if IsPlayer(whichPlayer)and whichPlayer!=PlayerModeTyper then
      set udg_Hero[GetPlayerId(whichPlayer)]=CreateUnit(whichPlayer,QIE,GetRectCenterX(gg_rct_Hero_Creation_UD),GetRectCenterY(gg_rct_Hero_Creation_UD),270)
    endif
    set ZBE=ZBE+1
  endloop
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set whichPlayer=null
  return false
endfunction

function Func2246 takes nothing returns nothing
  local integer ZAE=1
  local player whichPlayer
  local unit source=GetTriggerUnit()
  local integer QIE=GetUnitTypeId(source)
  local trigger RBX
  local integer ZBE
  if(GetOwningPlayer(source)==PlayerModeTyper and IsUnitType(source,UNIT_TYPE_HERO))then
    call DisableTrigger(GetTriggeringTrigger())
    if HasUsedRandom[GetPlayerId(PlayerModeTyper)]==false and boolean065==false and boolean066==false then
      call SetPlayerState(PlayerModeTyper,PLAYER_STATE_RESOURCE_GOLD,250+GetPlayerState(PlayerModeTyper,PLAYER_STATE_RESOURCE_GOLD))
    endif
    set booleans007[GetPlayerId(PlayerModeTyper)]=true
    set RBX=CreateTrigger()
    set ZBE=GetHandleId(RBX)
    call TriggerRegisterTimerEvent(RBX,0.01,false)
    call TriggerAddCondition(RBX,Condition(function Func2245))
    call SaveInteger(HY,(ZBE),172,(QIE))
  endif
  set whichPlayer=null
  set source=null
  set RBX=null
endfunction

function Func2247 takes nothing returns nothing
  local integer ZAE=1
  local trigger RBX=CreateTrigger()
  local region I2I=CreateRegion()
  set boolean091=true
  call TechHeroForAll('H00I')
  call TechHeroForAll('N0MU')
  loop
    exitwhen ZAE>5
    if(Sentinels[ZAE]!=PlayerModeTyper)then
      call TechAll_ForPlayer(Sentinels[ZAE])
      set HasUsedRandom[GetPlayerId(Sentinels[ZAE])]=true
      set booleans007[GetPlayerId(Sentinels[ZAE])]=true
    endif
    if(Scourges[ZAE]!=PlayerModeTyper)then
      call TechAll_ForPlayer(Scourges[ZAE])
      set HasUsedRandom[GetPlayerId(Scourges[ZAE])]=true
      set booleans007[GetPlayerId(Scourges[ZAE])]=true
    endif
    set ZAE=ZAE+1
  endloop
  call RegionAddRect(I2I,bj_mapInitialPlayableArea)
  call TriggerRegisterEnterRegion(RBX,I2I,Condition(function ReturnTrue))
  call TriggerAddAction(RBX,function Func2246)
  set RBX=null
endfunction

function Func2248 takes nothing returns nothing
  local integer i=1
  set boolean088=true
  loop
    exitwhen i>integer109
    call TechHeroForAll(integers089[i])
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>integer108
    call TechHeroForAll(integers088[i])
    set i=i+1
  endloop
endfunction

function Func2249 takes nothing returns nothing
  local integer i=1
  set boolean090=true
  loop
    exitwhen i>integer109
    call TechHeroForAll(integers089[i])
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>integer107
    call TechHeroForAll(integers087[i])
    set i=i+1
  endloop
endfunction

function Func2250 takes nothing returns nothing
  local integer i=1
  set boolean089=true
  loop
    exitwhen i>integer107
    call TechHeroForAll(integers087[i])
    set i=i+1
  endloop
  set i=1
  loop
    exitwhen i>integer108
    call TechHeroForAll(integers088[i])
    set i=i+1
  endloop
endfunction

function Func2251 takes nothing returns nothing
  local integer i=1
  set boolean160=true
  loop
    exitwhen i>integer110
    call TechHeroForAll(integers090[i])
    set i=i+1
  endloop
endfunction

function Func2252 takes nothing returns nothing
  local integer i=1
  set boolean161=true
  loop
    exitwhen i>MeleeHeroesAmount
    call TechHeroForAll(MeleeHeroesArray[i])
    set i=i+1
  endloop
endfunction

function Func2253 takes nothing returns nothing
  set boolean068=true
endfunction

function Func2254 takes nothing returns nothing
  set boolean070=true
  call DisableTrigger(RuneSpawnTrigger)
endfunction

function Func2255 takes nothing returns nothing
  set boolean071=true
endfunction

function Func2256 takes nothing returns nothing
  set boolean163=false
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10,GetObjectName('n0HA'))
  call DisableTrigger(GetTriggeringTrigger())
endfunction

function Func2257 takes nothing returns nothing
  call DisableTrigger((LoadTriggerHandle(HY,(GetHandleId(GetTriggeringTrigger())),174)))
  call DisableTrigger(GetTriggeringTrigger())
endfunction

function Func2258 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local trigger R4I=CreateTrigger()
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00," ")
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName('TX0S'))
  call TriggerRegisterTimerEvent(RBX,15,false)
  call TriggerAddAction(RBX,function Func2257)
  call SaveTriggerHandle(HY,(GetHandleId(RBX)),174,(R4I))
  call TriggerRegisterPlayerChatEvent(R4I,PlayerModeTyper,"-noneutrals",true)
  call TriggerAddAction(R4I,function Func2256)
  set RBX=null
  set R4I=null
endfunction

function Func2259 takes nothing returns nothing
  set boolean162=true
  call ExecuteFunc("Func2258")
endfunction

function Func2260 takes nothing returns nothing
  set boolean164=true
endfunction

function Func2261 takes nothing returns nothing
  set boolean165=true
endfunction

function Func2262 takes nothing returns nothing
  set boolean166=true
endfunction

function Func2263 takes nothing returns nothing
  set boolean167=true
endfunction

function Func2264 takes nothing returns nothing
  set boolean107=true
  set SwapCommand_Enabled=false
endfunction

function Func2265 takes nothing returns nothing
  set boolean168=true
endfunction

function Func2266 takes nothing returns nothing
  set Mode_SO=true
endfunction

function Func2267 takes nothing returns nothing
  set boolean109=not boolean109
endfunction

function Func2268 takes nothing returns nothing
  local integer i=0
  local integer WVE
  loop
    set WVE=GetPlayerId(Sentinels[i])
    call SetPlayerName(Sentinels[i],PlayerNames[WVE]+" ("+I2S(Kills[WVE])+"/"+I2S(Deaths[WVE])+" | "+I2S(integers031[WVE])+"-"+I2S(integers032[WVE])+")")
    set WVE=GetPlayerId(Scourges[i])
    call SetPlayerName(Scourges[i],PlayerNames[WVE]+" ("+I2S(Kills[WVE])+"/"+I2S(Deaths[WVE])+" | "+I2S(integers031[WVE])+"-"+I2S(integers032[WVE])+")")
    set i=i+1
    exitwhen i>5
  endloop
endfunction

function Func2269 takes nothing returns nothing
  local integer I8I=0
  local integer I9I=0
  local integer i=1
  local real AVI=0.04
  local real AEI=0.035
  local real AXI
  local real AOI
  local integer c1
  local integer c2
  loop
    set I8I=I8I+NetWorths[GetPlayerId(Sentinels[i])]
    set I9I=I9I+NetWorths[GetPlayerId(Scourges[i])]
    set i=i+1
    exitwhen i>5
  endloop
  if I8I>9999 then
    set c1=5
  elseif I8I>999 then
    set c1=4
  elseif I8I>99 then
    set c1=3
  else
    set c1=2
  endif
  if I9I>9999 then
    set c2=5
  elseif I9I>999 then
    set c2=4
  elseif I9I>99 then
    set c2=3
  else
    set c2=2
  endif
  if I8I>I9I then
    set AXI=AVI
    set AOI=AEI
  else
    set AXI=AEI
    set AOI=AVI
  endif
  call SetTextTagText(texttag002,I2S(I8I),AXI)
  call SetTextTagPos(texttag002,-7050-(10.0*c1),7500,64)
  call SetTextTagColor(texttag002,237,35,35,255)
  call SetTextTagText(texttag001,I2S(I9I),AOI)
  call SetTextTagPos(texttag001,-7050-(10.0*c2),7180,64)
  call SetTextTagColor(texttag001,6,122,6,255)
  call SetTextTagVisibility(texttag002,IsPlayerObserver(LocalPlayer)or IsL1ch)
  call SetTextTagVisibility(texttag001,IsPlayerObserver(LocalPlayer)or IsL1ch)
endfunction

function Func2270 takes nothing returns boolean
  if LocalPlayer==udg_Observer1 or LocalPlayer==udg_Observer2 then
    call Func2268()
  endif
  call Func2269()
  return false
endfunction

function Func2271 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  call SetUnitScale(source,Func0531(source)*real048,Func0531(source)*real048,Func0531(source)*real048)
  set source=null
endfunction

function Func2272 takes nothing returns boolean
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
    call Func2271()
  endif
  return false
endfunction

function Func2273 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterEnterRectSimple(RBX,bj_mapInitialPlayableArea)
  call TriggerAddCondition(RBX,Condition(function Func2272))
  set boolean169=true
  set real048=0.5
  set RBX=null
endfunction

function Func2274 takes nothing returns nothing
  set boolean170=true
endfunction

function Func2275 takes nothing returns boolean
  if LocalPlayer==udg_Observer1 or LocalPlayer==udg_Observer2 then
    if GetTriggerEvalCount(GetTriggeringTrigger())==1 then
      call CameraSetupSetDestPosition(camerasetup001,0,0,0.0)
    else
      call CameraSetupSetDestPosition(camerasetup001,GetCameraTargetPositionX(),GetCameraTargetPositionY(),0.0)
    endif
    call CameraSetupApplyForPlayer(true,camerasetup001,LocalPlayer,0)
    call SetTerrainFogEx(0,0.0,100000.0,0.500,0.353,0.314,0.235)
  endif
  return false
endfunction

function Func2276 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  set boolean171=true
  set camerasetup001=CreateCameraSetup()
  call CameraSetupSetField(camerasetup001,CAMERA_FIELD_ZOFFSET,0.0,0.0)
  call CameraSetupSetField(camerasetup001,CAMERA_FIELD_ROTATION,90.0,0.0)
  call CameraSetupSetField(camerasetup001,CAMERA_FIELD_ANGLE_OF_ATTACK,304.0,0.0)
  call CameraSetupSetField(camerasetup001,CAMERA_FIELD_TARGET_DISTANCE,2500.0,0.0)
  call CameraSetupSetField(camerasetup001,CAMERA_FIELD_ROLL,0.0,0.0)
  call CameraSetupSetField(camerasetup001,CAMERA_FIELD_FIELD_OF_VIEW,70.0,0.0)
  call CameraSetupSetField(camerasetup001,CAMERA_FIELD_FARZ,16000.0,0.0)
  call CameraSetupSetDestPosition(camerasetup001,0.0,0.0,0.0)
  call TriggerRegisterTimerEvent(RBX,180,true)
  call TriggerRegisterTimerEvent(RBX,0.1,false)
  call TriggerAddCondition(RBX,Condition(function Func2275))
  set RBX=null
endfunction

function Func2277 takes nothing returns boolean
  return IsSentinel(GetOwningPlayer(GetFilterUnit()))and Func0583(GetFilterUnit())and GetUnitTypeId(GetFilterUnit())!='H00J'
endfunction

function Func2278 takes nothing returns boolean
  return IsScourge(GetOwningPlayer(GetFilterUnit()))and Func0583(GetFilterUnit())and GetUnitTypeId(GetFilterUnit())!='H00J'
endfunction

function Func2279 takes nothing returns nothing
  local unit source=GetEnumUnit()
  call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_LIFE)+200)
  call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MANA)+200)
  if LoadReal(HeroStats,GetHandleId(GetOwningPlayer(source)),25)>TimerGetElapsed(GlobalTimer)then
    call SetPlayerState(GetOwningPlayer(source),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(source),PLAYER_STATE_RESOURCE_GOLD)+R2I(150*0.4))
  else
    call SetPlayerState(GetOwningPlayer(source),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(source),PLAYER_STATE_RESOURCE_GOLD)+150)
  endif
  call AddHeroXP(source,248,true)
  set source=null
endfunction

function Func2280 takes integer ZAE,integer QIE,integer ZBE,integer ZCE,integer JUX,integer XPO,real result,real ZEE,boolean ZSE returns nothing
  local integer XQO=GetHandleId(GetTriggeringTrigger())
  local image XNI=(LoadImageHandle(HY,(XQO),(476+ZAE)))
  local image ONI=(LoadImageHandle(HY,(XQO),(484+ZAE)))
  if XNI!=null then
    call DestroyImage(XNI)
    call SaveImageHandle(HY,(XQO),(476+ZAE),(null))
    set XNI=null
  endif
  if ONI!=null then
    call DestroyImage(ONI)
    call SaveImageHandle(HY,(XQO),(484+ZAE),(null))
    set ONI=null
  endif
  if ZSE==false or QIE<1 then
    return
  endif
  if StringLength(I2S(QIE))>1 then
    call Func2173("Fonts\\"+SubString(I2S(QIE),0,1)+".blp",120,120,result-30,ZEE,0,true)
    call SetImageColor(image001,ZBE,ZCE,JUX,XPO)
    set XNI=image001
    call Func2173("Fonts\\"+SubString(I2S(QIE),1,2)+".blp",120,120,result+30,ZEE,0,true)
    call SetImageColor(image001,ZBE,ZCE,JUX,XPO)
    set ONI=image001
  else
    call Func2173("Fonts\\0.blp",120,120,result-30,ZEE,0,true)
    call SetImageColor(image001,ZBE,ZCE,JUX,XPO)
    set XNI=image001
    call Func2173("Fonts\\"+SubString(I2S(QIE),0,1)+".blp",120,120,result+30,ZEE,0,true)
    call SetImageColor(image001,ZBE,ZCE,JUX,XPO)
    set ONI=image001
  endif
  call SaveImageHandle(HY,(XQO),(476+ZAE),(XNI))
  call SaveImageHandle(HY,(XQO),(484+ZAE),(ONI))
  set XNI=null
  set ONI=null
endfunction

function Func2281 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local group g=GetAvailableGroup()
  local group IBI=GetAvailableGroup()
  local integer QIE
  local integer ZBE
  local real result
  local real ZEE
  local rect AUX
  local player whichPlayer
  local player FNO
  local integer ZCE=0
  local integer JUX
  local unit source
  local real ZWE
  local real ZYE=(TimerGetElapsed(GlobalTimer))
  loop
    exitwhen ZCE>5
    set AUX=(LoadRectHandle(HY,(ZAE),(460+ZCE)))
    set JUX=(LoadInteger(HY,(ZAE),(492+ZCE)))
    set source=(LoadUnitHandle(HY,(ZAE),(452+ZCE)))
    set whichPlayer=GetOwningPlayer(source)
    set FNO=(LoadPlayerHandle(HY,(ZAE),(468+ZCE)))
    set result=GetRectCenterX(AUX)
    set ZEE=GetRectCenterY(AUX)
    call GroupEnumUnitsInRect(g,AUX,Condition(function Func2277))
    call GroupEnumUnitsInRect(IBI,AUX,Condition(function Func2278))
    set QIE=CountUnitsInGroup(g)
    set ZBE=CountUnitsInGroup(IBI)
    if(QIE>0 and ZBE>0)or(QIE==0 and ZBE==0)then
      if whichPlayer==player004 then
        set FNO=player004
        call SavePlayerHandle(HY,(ZAE),(468+ZCE),(FNO))
      endif
      set JUX=61
      call SaveInteger(HY,(ZAE),(492+ZCE),(JUX))
    elseif QIE>0 and ZBE==0 then
      set FNO=Sentinels[1]
      call SavePlayerHandle(HY,(ZAE),(468+ZCE),(FNO))
      set JUX=JUX-QIE
      call SaveInteger(HY,(ZAE),(492+ZCE),(JUX))
    elseif ZBE>0 and QIE==0 then
      set FNO=Scourges[1]
      call SavePlayerHandle(HY,(ZAE),(468+ZCE),(FNO))
      set JUX=JUX-ZBE
      call SaveInteger(HY,(ZAE),(492+ZCE),(JUX))
    endif
    if FNO==player004 and whichPlayer!=player004 then
      call SetUnitColor(source,GetPlayerColor(FNO))
      call SetUnitOwner(source,FNO,false)
      call Func2280(ZCE,JUX,255,0,0,255,result,ZEE,false)
    elseif FNO==whichPlayer then
      call Func2280(ZCE,JUX,255,0,0,255,result,ZEE,false)
      set JUX=61
      call SaveInteger(HY,(ZAE),(492+ZCE),(JUX))
    elseif FNO!=player004 then
      if JUX<61 then
        call Func2280(ZCE,JUX,255,0,0,255,result,ZEE,true)
      else
        call Func2280(ZCE,JUX,255,0,0,255,result,ZEE,false)
      endif
      if JUX<1 then
        call nPngMinimapEx(result,ZEE,2,255,255,255,false)
        call Func0650(FNO,"Sound\\Interface\\Rescue.wav")
        call SetUnitOwner(source,FNO,false)
        set JUX=61
        call SaveInteger(HY,(ZAE),(492+ZCE),(JUX))
        call SaveReal(HY,(ZAE),(500+ZCE),((ZYE)*1.0))
        if IsSentinel(FNO)then
          call SetUnitColor(source,GetPlayerColor(Sentinels[0]))
          call DisplayTimedTextToForceEx(AllPlayers,10,"|c00ff0303The Sentinel now controls a Capture Point.|r")
          call ForGroup(g,function Func2279)
        else
          call SetUnitColor(source,GetPlayerColor(Scourges[0]))
          call DisplayTimedTextToForceEx(AllPlayers,10,"|c00ff0303The Scourge now controls a Capture Point.|r")
          call ForGroup(IBI,function Func2279)
        endif
      endif
    endif
    set ZCE=ZCE+1
  endloop
  call KillGroup(g)
  call KillGroup(IBI)
  set g=null
  set IBI=null
  set RBX=null
  set source=null
  return false
endfunction

function Func2282 takes nothing returns boolean
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local fogmodifier A3X
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerAddCondition(RBX,Condition(function Func2281))
  call nPngMinimapEx(GetRectCenterX(rect077),GetRectCenterY(rect077),4,255,255,255,false)
  call nPngMinimapEx(GetRectCenterX(rect079),GetRectCenterY(rect079),4,255,255,255,false)
  call nPngMinimapEx(GetRectCenterX(rect081),GetRectCenterY(rect081),4,255,255,255,false)
  call nPngMinimapEx(GetRectCenterX(rect078),GetRectCenterY(rect078),4,255,255,255,false)
  call nPngMinimapEx(GetRectCenterX(rect080),GetRectCenterY(rect080),4,255,255,255,false)
  call nPngMinimapEx(GetRectCenterX(rect082),GetRectCenterY(rect082),4,255,255,255,false)
  set unit169=CreateUnit(player004,'ncp2',GetRectCenterX(rect077),GetRectCenterY(rect077),0)
  set unit170=CreateUnit(player004,'ncp2',GetRectCenterX(rect079),GetRectCenterY(rect079),0)
  set unit171=CreateUnit(player004,'ncp2',GetRectCenterX(rect081),GetRectCenterY(rect081),0)
  set unit172=CreateUnit(player004,'ncp2',GetRectCenterX(rect078),GetRectCenterY(rect078),0)
  set unit173=CreateUnit(player004,'ncp2',GetRectCenterX(rect080),GetRectCenterY(rect080),0)
  set unit174=CreateUnit(player004,'ncp2',GetRectCenterX(rect082),GetRectCenterY(rect082),0)
  set A3X=CreateFogModifierRadius(Sentinels[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect077),GetRectCenterY(rect077),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Scourges[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect077),GetRectCenterY(rect077),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Sentinels[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect079),GetRectCenterY(rect079),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Scourges[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect079),GetRectCenterY(rect079),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Sentinels[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect081),GetRectCenterY(rect081),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Scourges[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect081),GetRectCenterY(rect081),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Sentinels[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect078),GetRectCenterY(rect078),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Scourges[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect078),GetRectCenterY(rect078),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Sentinels[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect080),GetRectCenterY(rect080),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Scourges[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect080),GetRectCenterY(rect080),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Sentinels[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect082),GetRectCenterY(rect082),600,true,true)
  call FogModifierStart(A3X)
  set A3X=CreateFogModifierRadius(Scourges[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(rect082),GetRectCenterY(rect082),600,true,true)
  call FogModifierStart(A3X)
  call Func0703("Speed",unit169)
  call Func0703("Speed",unit172)
  call Func0703("Combat",unit170)
  call Func0703("Combat",unit173)
  call Func0703("Regen",unit171)
  call Func0703("Regen",unit174)
  call UnitAddAbility(unit169,'S00O')
  call UnitAddAbility(unit172,'S00R')
  call UnitAddAbility(unit170,'A1PO')
  call UnitAddAbility(unit170,'A1PL')
  call UnitAddAbility(unit173,'A1PN')
  call UnitAddAbility(unit173,'A1PJ')
  call UnitAddAbility(unit171,'A1PV')
  call UnitAddAbility(unit171,'A1PF')
  call UnitAddAbility(unit174,'A1PD')
  call UnitAddAbility(unit174,'A1PE')
  call SaveUnitHandle(HY,(ZAE),452,(unit169))
  call SaveUnitHandle(HY,(ZAE),453,(unit170))
  call SaveUnitHandle(HY,(ZAE),454,(unit171))
  call SaveUnitHandle(HY,(ZAE),455,(unit172))
  call SaveUnitHandle(HY,(ZAE),456,(unit173))
  call SaveUnitHandle(HY,(ZAE),457,(unit174))
  call SaveReal(HY,(ZAE),500,((-1)*1.0))
  call SaveReal(HY,(ZAE),501,((-1)*1.0))
  call SaveReal(HY,(ZAE),502,((-1)*1.0))
  call SaveReal(HY,(ZAE),503,((-1)*1.0))
  call SaveReal(HY,(ZAE),504,((-1)*1.0))
  call SaveReal(HY,(ZAE),505,((-1)*1.0))
  call SaveRectHandle(HY,(ZAE),460,(rect077))
  call SaveRectHandle(HY,(ZAE),461,(rect079))
  call SaveRectHandle(HY,(ZAE),462,(rect081))
  call SaveRectHandle(HY,(ZAE),463,(rect078))
  call SaveRectHandle(HY,(ZAE),464,(rect080))
  call SaveRectHandle(HY,(ZAE),465,(rect082))
  call SavePlayerHandle(HY,(ZAE),468,(player004))
  call SavePlayerHandle(HY,(ZAE),469,(player004))
  call SavePlayerHandle(HY,(ZAE),470,(player004))
  call SavePlayerHandle(HY,(ZAE),471,(player004))
  call SavePlayerHandle(HY,(ZAE),472,(player004))
  call SavePlayerHandle(HY,(ZAE),473,(player004))
  call SaveInteger(HY,(ZAE),492,61)
  call SaveInteger(HY,(ZAE),493,61)
  call SaveInteger(HY,(ZAE),494,61)
  call SaveInteger(HY,(ZAE),495,61)
  call SaveInteger(HY,(ZAE),496,61)
  call SaveInteger(HY,(ZAE),497,61)
  call SaveImageHandle(HY,(ZAE),476,(null))
  call SaveImageHandle(HY,(ZAE),484,(null))
  call SaveImageHandle(HY,(ZAE),477,(null))
  call SaveImageHandle(HY,(ZAE),485,(null))
  call SaveImageHandle(HY,(ZAE),478,(null))
  call SaveImageHandle(HY,(ZAE),486,(null))
  call SaveImageHandle(HY,(ZAE),479,(null))
  call SaveImageHandle(HY,(ZAE),487,(null))
  call SaveImageHandle(HY,(ZAE),480,(null))
  call SaveImageHandle(HY,(ZAE),488,(null))
  call SaveImageHandle(HY,(ZAE),481,(null))
  call SaveImageHandle(HY,(ZAE),489,(null))
  call CleanTrigger(GetTriggeringTrigger())
  set RBX=null
  return false
endfunction

function Func2283 takes nothing returns nothing
  local trigger RBX
  if boolean172 then
    set RBX=CreateTrigger()
    call TriggerRegisterTimerEvent(RBX,600,false)
    call TriggerAddCondition(RBX,Condition(function Func2282))
    set RBX=null
  endif
endfunction

function Func2284 takes nothing returns nothing
  set boolean172=true
endfunction

function Func2285 takes nothing returns nothing
  local integer ZAE=GetIndex(GetEnumItem())
  if GetWidgetLife(GetEnumItem())>0 and GetItemPlayer(GetEnumItem())==player022 and ZAE!=Aegis and ZAE!=integer265 and ZAE!=integer266 and ZAE!=integer135 and ZAE!=integer136 then
    if IsItemVisible(GetEnumItem())then
      call SetItemVisible(GetEnumItem(),false)
    else
      call SetItemVisible(GetEnumItem(),true)
    endif
  endif
endfunction

function Func2286 takes nothing returns nothing
  local player whichPlayer=player022
  local region I2I=CreateRegion()
  local unit source=GetEnumUnit()
  local integer ZAE
  local integer QIE=0
  local item AVX
  local integer ZBE
  local real result
  local real ZEE
  if IsSentinel(whichPlayer)then
    call RegionAddRect(I2I,SentFountainForItemsRect)
    set result=GetRectCenterX(SentFountainForItemsRect)
    set ZEE=GetRectCenterY(SentFountainForItemsRect)
  else
    call RegionAddRect(I2I,ScrgFountainForItemsRect)
    set result=GetRectCenterX(ScrgFountainForItemsRect)
    set ZEE=GetRectCenterY(ScrgFountainForItemsRect)
  endif
  loop
    exitwhen QIE>5
    set AVX=UnitItemInSlot(source,QIE)
    set ZAE=GetIndex(AVX)
    if GetItemPlayer(AVX)==player022 and ZAE!=Aegis and ZAE!=integer265 and ZAE!=integer266 and ZAE!=integer135 and ZAE!=integer136 then
      call UnitRemoveItemFromSlot(source,QIE)
      set ZBE=GetPlayerId(GetItemPlayer(AVX))
      call SetItemPosition(AVX,result,ZEE)
    endif
    set QIE=QIE+1
  endloop
  call RemoveRegion(I2I)
  set source=null
  set I2I=null
  set AVX=null
endfunction

function Func2287 takes nothing returns boolean
  return(GetUnitTypeId(GetFilterUnit())=='ncop' or IsCourier(GetFilterUnit())or(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and GetOwningPlayer(GetFilterUnit())!=player022 and GetOwningPlayer(GetFilterUnit())!=Sentinels[0]and GetOwningPlayer(GetFilterUnit())!=Scourges[0]))and IsUnitAlly(GetFilterUnit(),player022)
endfunction

function Func2288 takes player whichPlayer returns nothing
  local integer ZAE=0
  local integer QIE=GetPlayerId(whichPlayer)
  local group g=GetAvailableGroup()
  set player022=whichPlayer
  call GroupEnumUnitsInRange(g,0,0,99999,Condition(function Func2287))
  call ForGroup(g,function Func2286)
  call KillGroup(g)
endfunction

function Func2289 takes player whichPlayer returns nothing
  set player022=whichPlayer
  call EnumItemsInRectBJ(bj_mapInitialPlayableArea,function Func2285)
endfunction

function Func2290 takes unit source returns nothing
  local unit RCX=source
  local player whichPlayer=GetOwningPlayer(source)
  local location IGX
  if IsScourge(whichPlayer)then
    set IGX=GetRectCenter(gg_rct_Hero_Creation_UD)
  else
    set IGX=GetRectCenter(gg_rct_Hero_Creation_NE)
  endif
  if boolean094==false and IsDead(RCX)then
    call Func0987(RCX,whichPlayer,GetLocationX(IGX),GetLocationY(IGX),true)
    if IsMeepo(RCX)==false or GetUnitAbilityLevel(RCX,'A0MW')==0 then
      call ReviveHeroLoc(RCX,IGX,true)
    else
      call Func1045(RCX,IGX)
    endif
  endif
  call RemoveLocation(IGX)
  set RCX=null
  set whichPlayer=null
  set IGX=null
endfunction

function Func2291 takes unit source,unit RCX returns nothing
  local player whichPlayer=GetOwningPlayer(RCX)
  local integer ZAE=GetPlayerId(whichPlayer)
  call SetHeroXP(RCX,GetHeroXP(source),true)
  call SetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD,(LoadInteger(HY,(GetHandleId(RCX)),787))+modeTT_Gold2[ZAE])
  set integers142[ZAE]=GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)
  set modeTT_Gold2[ZAE]=0
endfunction

function Func2292 takes integer ZAE,unit source returns boolean
  return Func0527(HeroID[ZAE])!=GetHeroPrimaryAttribute_Act(source)
endfunction

function Func2293 takes unit source,integer ZAE,player whichPlayer returns nothing
  local player FNO=GetOwningPlayer(source)
  local player FBO
  local integer QIE
  local item AVX
  if IsSentinel(GetOwningPlayer(source))then
    set FBO=Sentinels[0]
  else
    set FBO=Scourges[0]
  endif
  call SaveInteger(HY,(GetHandleId(source)),787,(GetPlayerState(GetOwningPlayer(source),PLAYER_STATE_RESOURCE_GOLD)))
  call SaveBoolean(HY,(GetHandleId(source)),140,(false))
  call SaveInteger(HY,(GetHandleId(source)),4259,1)
  call UnitAddAbility(source,'A04R')
  call SetUnitInvulnerable(source,true)
  call PauseUnit(source,true)
  call SetUnitVertexColor(source,255,255,255,150)
  call SelectUnitRemoveForPlayer(source,GetOwningPlayer(source))
  call SetUnitOwner(source,FBO,false)
  call SetUnitPathing(source,false)
  call SetUnitX(source,GetUnitX(CirclesOfPower[ZAE]))
  call SetUnitY(source,GetUnitY(CirclesOfPower[ZAE]))
  set QIE=0
  loop
    exitwhen QIE>5
    if UnitItemInSlot(source,QIE)==null then
      set AVX=CreateItem('I02M',GetUnitX(source),GetUnitY(source))
      call UnitAddItem(source,AVX)
    endif
    set QIE=QIE+1
  endloop
  set FNO=null
  set FBO=null
  set AVX=null
endfunction

function Func2294 takes unit source,integer ZAE,player whichPlayer returns nothing
  local integer QIE
  set udg_Hero[ZAE]=source
  call SaveBoolean(HY,(GetHandleId(source)),140,(false))
  call SaveInteger(HY,(GetHandleId(source)),4259,2)
  call UnitRemoveAbility(source,'A04R')
  call SetUnitInvulnerable(source,false)
  call PauseUnit(source,false)
  call SetUnitVertexColor(source,255,255,255,255)
  call SelectUnitAddForPlayer(source,GetOwningPlayer(source))
  call SetUnitOwner(source,whichPlayer,false)
  call SetUnitPathing(source,true)
  if IsSentinel(Player(ZAE))then
    call SetUnitPosition(source,GetRectCenterX(gg_rct_Hero_Creation_NE),GetRectCenterY(gg_rct_Hero_Creation_NE))
  else
    call SetUnitPosition(source,GetRectCenterX(gg_rct_Hero_Creation_UD),GetRectCenterY(gg_rct_Hero_Creation_UD))
  endif
  set QIE=0
  loop
    exitwhen QIE>5
    if GetItemTypeId(UnitItemInSlot(source,QIE))=='I02M' then
      call Func0888(UnitItemInSlot(source,QIE))
    endif
    set QIE=QIE+1
  endloop
endfunction

function Func2295 takes integer ZAE returns boolean
  local region I2I=CreateRegion()
  local boolean ZSE=false
  if IsSentinel(Player(ZAE))then
    call RegionAddRect(I2I,rect022)
  else
    call RegionAddRect(I2I,rect021)
  endif
  if IsUnitInRegion(I2I,units015[ZAE])and IsUnitInRegion(I2I,units016[ZAE])then
    set ZSE=true
  endif
  call RemoveRegion(I2I)
  return ZSE or IsDead(units015[ZAE])or IsDead(units016[ZAE])
endfunction

function Func2296 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local integer ZBE=GetTriggerEvalCount(RBX)
  local player whichPlayer=Player(QIE)
  if ZBE==1 then
    call Func2288(whichPlayer)
  elseif ZBE==2 then
    call Func2289(whichPlayer)
  elseif ZBE==3 then
    if udg_Hero[QIE]==units015[QIE]then
      call Func2290(units015[QIE])
      call Func2293(units015[QIE],QIE,whichPlayer)
      call Func2294(units016[QIE],QIE,whichPlayer)
      call Func2291(units015[QIE],units016[QIE])
    else
      call Func2290(units016[QIE])
      call Func2293(units016[QIE],QIE,whichPlayer)
      call Func2294(units015[QIE],QIE,whichPlayer)
      call Func2291(units016[QIE],units015[QIE])
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  return false
endfunction

function Func2297 takes nothing returns boolean
  local integer ZAE=GetPlayerId(GetTriggerPlayer())
  local real result=(TimerGetElapsed(GlobalTimer))
  local trigger RBX
  local integer QIE
  if(result-modeTT_CD[ZAE])<180 then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0MR')+": "+I2S(R2I(180-(result-modeTT_CD[ZAE]))))
  elseif Func2295(ZAE)==false then
    call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName('n0MS'))
  else
    set modeTT_CD[ZAE]=result
    set RBX=CreateTrigger()
    set QIE=GetHandleId(RBX)
    call TriggerRegisterTimerEvent(RBX,0.2,true)
    call TriggerAddCondition(RBX,Condition(function Func2296))
    call SaveInteger(HY,(QIE),34,(ZAE))
    set RBX=null
  endif
  return false
endfunction

function Func2298 takes nothing returns boolean
  local integer ZAE=1
  local integer QIE
  local integer ZBE
  local integer ZCE
  local player whichPlayer
  loop
    exitwhen ZAE>5
    set whichPlayer=Sentinels[ZAE]
    set QIE=GetPlayerId(whichPlayer)
    set ZCE=GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)
    if integers142[QIE]<ZCE and booleans035[QIE]==false then
      set modeTT_Gold2[QIE]=modeTT_Gold2[QIE]+ZCE-integers142[QIE]
    endif
    set integers142[QIE]=ZCE
    if booleans035[QIE]then
      set booleans035[QIE]=false
    endif
    set whichPlayer=Scourges[ZAE]
    set QIE=GetPlayerId(whichPlayer)
    set ZCE=GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)
    if integers142[QIE]<ZCE and booleans035[QIE]==false then
      set modeTT_Gold2[QIE]=modeTT_Gold2[QIE]+ZCE-integers142[QIE]
    endif
    set integers142[QIE]=ZCE
    if booleans035[QIE]then
      set booleans035[QIE]=false
    endif
    set ZAE=ZAE+1
  endloop
  return false
endfunction

function Func2299 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),55))
  local player whichPlayer
  local integer ZBE
  local location IGX=GetRectCenter(gg_rct_Hero_Creation_NE)
  local location OXI=GetRectCenter(gg_rct_Hero_Creation_UD)
  local integer ZCE
  if QIE<6 then
    set whichPlayer=Sentinels[QIE]
    set ZCE=GetPlayerId(whichPlayer)
  elseif QIE<11 then
    set whichPlayer=Scourges[QIE-5]
    set ZCE=GetPlayerId(whichPlayer)
  endif
  if QIE>10 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call TriggerRegisterTimerEvent(trigger044,0.1,true)
    call TriggerAddCondition(trigger044,Condition(function Func2298))
  elseif QIE<6 then
    call SaveInteger(HY,(ZAE),55,(QIE+1))
    set udg_Hero[GetPlayerId(whichPlayer)]=null
    if IsPlayer(whichPlayer)then
      loop
        exitwhen udg_Hero[GetPlayerId(whichPlayer)]!=null
        set ZBE=GetSetElement()
        if b_isHeroPicked[ZBE]==false then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[ZCE]=CreateUnitAtLoc(whichPlayer,HeroID[ZBE],IGX,bj_UNIT_FACING)
          set units015[ZCE]=udg_Hero[ZCE]
          call Func2293(udg_Hero[ZCE],ZCE,whichPlayer)
        endif
      endloop
    endif
  elseif QIE<11 then
    call SaveInteger(HY,(ZAE),55,(QIE+1))
    set udg_Hero[GetPlayerId(whichPlayer)]=null
    if IsPlayer(whichPlayer)then
      loop
        exitwhen udg_Hero[ZCE]!=null
        set ZBE=GetSetElement()
        if b_isHeroPicked[ZBE]==false then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[ZCE]=CreateUnitAtLoc(whichPlayer,HeroID[ZBE],OXI,bj_UNIT_FACING)
          set units015[ZCE]=udg_Hero[ZCE]
          call Func2293(udg_Hero[ZCE],ZCE,whichPlayer)
        endif
      endloop
    endif
  endif
  if QIE<6 then
    set whichPlayer=Sentinels[QIE]
  elseif QIE<11 then
    set whichPlayer=Scourges[QIE-5]
  endif
  if QIE<6 then
    call SaveInteger(HY,(ZAE),55,(QIE+1))
    set udg_Hero[GetPlayerId(whichPlayer)]=null
    if IsPlayer(whichPlayer)then
      loop
        exitwhen udg_Hero[ZCE]!=null
        set ZBE=GetSetElement()
        if b_isHeroPicked[ZBE]==false and Func2292(ZBE,units015[ZCE])then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[ZCE]=CreateUnitAtLoc(whichPlayer,HeroID[ZBE],IGX,bj_UNIT_FACING)
          set units016[ZCE]=udg_Hero[ZCE]
          set integers142[ZCE]=GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)
          call Func2294(udg_Hero[ZCE],ZCE,whichPlayer)
          call SaveUnitHandle(HY,(GetHandleId(units016[ZCE])),788,(units015[ZCE]))
          call SaveUnitHandle(HY,(GetHandleId(units015[ZCE])),788,(units016[ZCE]))
        endif
      endloop
    endif
  elseif QIE<11 then
    call SaveInteger(HY,(ZAE),55,(QIE+1))
    set udg_Hero[ZCE]=null
    if IsPlayer(whichPlayer)then
      loop
        exitwhen udg_Hero[ZCE]!=null
        set ZBE=GetSetElement()
        if b_isHeroPicked[ZBE]==false and Func2292(ZBE,units015[ZCE])then
          if not boolean087 then
            set b_isHeroPicked[ZBE]=true
          endif
          set udg_Hero[ZCE]=CreateUnitAtLoc(whichPlayer,HeroID[ZBE],OXI,bj_UNIT_FACING)
          set units016[ZCE]=udg_Hero[ZCE]
          set integers142[ZCE]=GetPlayerState(whichPlayer,PLAYER_STATE_RESOURCE_GOLD)
          call Func2294(udg_Hero[ZCE],ZCE,whichPlayer)
          call SaveUnitHandle(HY,(GetHandleId(units016[ZCE])),788,(units015[ZCE]))
          call SaveUnitHandle(HY,(GetHandleId(units015[ZCE])),788,(units016[ZCE]))
        endif
      endloop
    endif
  endif
  call RemoveLocation(IGX)
  call RemoveLocation(OXI)
  set IGX=null
  set OXI=null
  set whichPlayer=null
  set RBX=null
  return false
endfunction

function modeTT_Init takes nothing returns nothing
  local integer h=1
  local integer i
  local real r=(TimerGetElapsed(GlobalTimer))
  local trigger t
  set mode_TT=true
  set Repick_Allowed=false
  set SwapCommand_Enabled=false
  call TechHeroForAll('H00I')
  call TechHeroForAll('O00P')
  call TechHeroForAll('H00U')
  loop
    exitwhen h>5
    set i=GetPlayerId(Sentinels[h])
    set booleans035[i]=false
    set modeTT_CD[i]=r-180
    set modeTT_Gold2[i]=0
    set i=GetPlayerId(Scourges[h])
    set booleans035[i]=false
    set modeTT_CD[i]=r-180
    set modeTT_Gold2[i]=0
    set h=h+1
  endloop
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,.5,true)
  call TriggerAddCondition(t,Condition(function Func2299))
  call SaveInteger(HY,(GetHandleId(t)),55,1)
  set t=CreateTrigger()
  call Func1849(t,"-tt",true)
  call TriggerAddCondition(t,Condition(function Func2297))
  set t=null
endfunction

function Func2301 takes nothing returns nothing
  local integer i=1
  local string s
  local player p
  loop
    set p=Sentinels[i]
    set s=I2S(GetPlayerId(p))
    call StoreInteger(gamecache001,s,"id",i)
    set p=Scourges[i]
    set s=I2S(GetPlayerId(p))
    call StoreInteger(gamecache001,s,"id",i+5)
    if LocalPlayer==PlayerModeTyper then
      call SyncStoredInteger(gamecache001,I2S(GetPlayerId(Sentinels[i])),"id")
      call SyncStoredInteger(gamecache001,I2S(GetPlayerId(Scourges[i])),"id")
    endif
    set i=i+1
    exitwhen i>5
  endloop
endfunction

function Func2302 takes nothing returns boolean
  if boolean092 then
    call Func2130("-ap",3)
  endif
  call Func2301()
  if bj_isSinglePlayer==false then
    call Func0302()
  endif
  call CleanTrigger(GetTriggeringTrigger())
  return false
endfunction

function Func2303 takes nothing returns boolean
  set boolean063=true
  call CleanTrigger(GetTriggeringTrigger())
  return false
endfunction

function Func2304 takes nothing returns nothing
  set boolean099=true
endfunction

function Func2305 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real JOX=LoadReal(HY,h,0)
  local integer JXX=LoadInteger(HY,h,0)
  local unit d
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call RemoveSavedHandle(HY,GetHandleId(u),'STFU')
    call RemoveAbilityForSure(u,'B32P')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if JOX<TimerGetElapsed(GlobalTimer)or GetUnitAbilityLevel(u,JXX)==0 or LoadBoolean(HY,h,'SLDR')then
      call RemoveSavedHandle(HY,GetHandleId(u),'STFU')
      call RemoveAbilityForSure(u,'B32P')
      call FlushChildHashtable(HY,h)
      call CleanTrigger(t)
    elseif GetUnitAbilityLevel(u,JXX)>0 and GetUnitAbilityLevel(u,'B32P')==0 then
      set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
      call UnitAddAbility(d,'A32P')
      call IssueTargetOrder(d,"soulburn",u)
      set d=null
    endif
  else
    if GetUnitAbilityLevel(u,JXX)>0 then
      if GetIssuedOrderId()>=852008 and GetIssuedOrderId()<=852013 then
        call Func0656(u)
      endif
    endif
  endif
  set u=null
  set t=null
endfunction

function Func2306 takes unit u,integer JXX,real D1E returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  local unit d
  local real JOX
  if HaveSavedHandle(HY,hu,'STFU')then
    set t=LoadTriggerHandle(HY,hu,'STFU')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,hu,'STFU',t)
    call TriggerRegisterTimerEvent(t,0.02,true)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
    call SaveUnitHandle(HY,h,0,u)
    call TriggerAddCondition(t,Condition(function Func2305))
    set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
    call UnitAddAbility(d,'A32P')
    call IssueTargetOrder(d,"soulburn",u)
    set d=null
  endif
  set JOX=TimerGetElapsed(GlobalTimer)+D1E*1.
  if JOX>LoadReal(HY,h,0)then
    call SaveInteger(HY,h,0,JXX)
    call SaveReal(HY,h,0,JOX)
  endif
  set t=null
endfunction

function Func2307 takes nothing returns nothing
  local integer i=integer027
  local integer k=0
  local integer z=50+i
  loop
    set k=0
    loop
      call SaveInteger(HY,i,k+100,k)
      call SaveInteger(HY,i,k,1)
      set k=k+1
      exitwhen k>80
    endloop
    set i=i+1
    exitwhen i>z
  endloop
  set integer027=i
  call BJDebugMsg(I2S(i*80))
endfunction

function Func2308 takes nothing returns nothing
endfunction

function Func2309 takes player p returns nothing
  call SetCineFilterTexture("DamageMask.blp")
  call SetCineFilterBlendMode(BLEND_MODE_BLEND)
  call SetCineFilterTexMapFlags(TEXMAP_FLAG_NONE)
  call SetCineFilterStartUV(0,0,1,1)
  call SetCineFilterEndUV(0,0,1,1)
  call SetCineFilterStartColor(128,226,255,200)
  call SetCineFilterEndColor(128,226,255,0)
  call SetCineFilterDuration(1.)
  call DisplayCineFilter(p==LocalPlayer)
endfunction

function Func2310 takes unit u,player p,real dmg returns nothing
  local real NVI=GetUnitState(u,UNIT_STATE_MAX_LIFE)
  local real NEI=RMinIF(dmg/ NVI,1.)
  local real KXE
  if NEI>0.025 then
    set KXE=1.75*NEI
    if KXE>TimerGetRemaining(timers001[GetPlayerId(p)])then
      if p==LocalPlayer then
        call SetCineFilterTexture("DamageMask.blp")
        call SetCineFilterBlendMode(BLEND_MODE_BLEND)
        call SetCineFilterTexMapFlags(TEXMAP_FLAG_NONE)
        call SetCineFilterStartUV(0,0,1,1)
        call SetCineFilterEndUV(0,0,1,1)
        call SetCineFilterStartColor(200,0,0,R2I(250*NEI))
        call SetCineFilterEndColor(200,0,0,0)
        call SetCineFilterDuration(KXE)
        call DisplayCineFilter(true)
      endif
      call TimerStart(timers001[GetPlayerId(p)],KXE,false,null)
    endif
  endif
endfunction

function Func2311 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  if IsKeyPressed(0xA4)then
    call SetUnitVertexColor(LoadUnitHandle(HY,h,0),0,0,0,255)
    call SetUnitVertexColor(LoadUnitHandle(HY,h,1),0,0,0,255)
    call SetUnitVertexColor(LoadUnitHandle(HY,h,2),0,0,0,255)
  else
    call SetUnitVertexColor(LoadUnitHandle(HY,h,0),255,0,255,255)
    call SetUnitVertexColor(LoadUnitHandle(HY,h,1),255,0,255,255)
    call SetUnitVertexColor(LoadUnitHandle(HY,h,2),255,0,255,255)
  endif
endfunction

function Func2312 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local lightning l
  call TimerStart(t,0.02,true,function Func2311)
  call SaveUnitHandle(HY,h,0,CreateUnit(Neutrals,'H00S',0,0,0))
  call SaveUnitHandle(HY,h,1,CreateUnit(Neutrals,'H00S',0,0,0))
  call SaveUnitHandle(HY,h,2,CreateUnit(Neutrals,'H00S',0,0,0))
endfunction

function Func2313 takes nothing returns nothing
endfunction

function Func2314 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(261))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(263))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(265))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(267))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(269))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(271))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(55))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(67))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(71))
  call TriggerRegisterPlayerEvent(t,Player(1),ConvertPlayerEvent(64))
  call TriggerAddAction(t,function Func2313)
endfunction

function Func2315 takes unit u,real NII returns integer
  local integer i=0
  local integer k
  local integer z
  local integer hu=GetHandleId(u)
  local integer id
  call GetAllUnitAbilities(u)
  set k=LoadInteger(TempHash,'abil',0)
  loop
    exitwhen k<1
    set k=k-1
    set id=LoadInteger(TempHash,hu+1,k)
    if IsItemAbility(id)==false and LoadInteger(AbilitiesHashtable,hu,id)>0 then
      set z=LoadInteger(AbilitiesHashtable,hu,id)
      if IsFlagBitSet(Memory[(z+0x20)/4],512)and GetAbilityCurrentCooldownConverted(z/4)>0 then
        set i=i+1
        if NII>0. then
          call AddAbilityCooldownConverted(z/4,NII)
        endif
      endif
    endif
  endloop
  return i
endfunction

function Func2316 takes nothing returns nothing
  local integer a=integer675/4
  local integer b
  local integer c
  local integer oldprotection
  if GameVersion==0x26a then
    set b=0x74016041
    set c=0x01000000
  elseif GameVersion==0x27a then
    set b=0x51740038
    set c=0x00010000
  endif
  if a>0 and LocalPlayer==GetTriggerPlayer()then
    set oldprotection=ChangeOffsetProtection(a*4,4,0x40)
    if booleans003[GetPlayerId(GetTriggerPlayer())]==false then
      set Memory[a]=b
    else
      set Memory[a]=b+c
    endif
    call ChangeOffsetProtection(a*4,4,oldprotection)
  endif
  set booleans003[GetPlayerId(GetTriggerPlayer())]=not booleans003[GetPlayerId(GetTriggerPlayer())]
endfunction

function Func2317 takes nothing returns boolean
  return Func0599(GetFilterUnit())
endfunction

function Func2318 takes unit u,real cost returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1625,Condition(function Func2317))
  if FirstOfGroup(g)!=null then
    call CreateLightningOnUnit("MFPB",FirstOfGroup(g),u,85,1,1,1,0.5,0.3,.1)
    call DamageTarget(FirstOfGroup(g),u,1,cost*(0.75+0.25*GetUnitAbilityLevel(FirstOfGroup(g),'A08T')))
  endif
  call KillGroup(g)
endfunction

function ManaFlareCheck takes unit u,real cost returns nothing
  if GetUnitAbilityLevel(u,'B01O')>0 then
    call Func2318(u,cost)
  endif
  if boolean147 then
    call SetUnitState(u,UNIT_STATE_MANA,9999999)
  endif
endfunction

function Func2320 takes nothing returns nothing
  local integer id=GetSpellAbilityId()
  local real NDI=0
  if id=='A2KQ' then
    set NDI=GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)*0.6
  elseif id=='A14O' then
    set NDI=GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)*0.08+30.
  endif
  if NDI>0 then
    call Func2318(GetTriggerUnit(),NDI)
  endif
endfunction

function Func2321 takes unit u,unit D2O,boolean NGI returns boolean
  return(NGI or IsUnitEnemy(D2O,GetOwningPlayer(u))and(AliveNonBuildOrMarker(u)))!=null
endfunction

function Func2322 takes unit u,unit FKX,integer dt,real dmg,string UPE,integer QIE,boolean NGI returns nothing
  if Func2321(FKX,u,NGI)then
    if NGI==false or IsUnitEnemy(u,GetOwningPlayer(FKX))then
      call DamageTarget(u,FKX,dt,dmg)
    endif
    if UPE!=null then
      set tt_unit1=FKX
      set tt_unit3=u
      set tt_int1=QIE
      call ExecuteFunc(UPE)
    endif
  endif
endfunction

function Func2323 takes nothing returns boolean
  return AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func2324 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real dmg=LoadReal(HY,h,0)
  local real GXE=LoadReal(HY,h,3)*bj_DEGTORAD
  local real NBX=LoadReal(HY,h,4)
  local real tX=LoadReal(HY,h,5)
  local real tY=LoadReal(HY,h,6)
  local real NLI=LoadReal(HY,h,8)
  local real FGE=LoadReal(HY,h,9)
  local unit FKX
  local group g
  local group gg
  local boolean NMI=LoadBoolean(HY,h,10)
  local boolean NPI=false
  local integer dt=LoadInteger(HY,h,1)
  local boolean FHX=LoadBoolean(HY,h,0)
  local string UPE=LoadStr(HY,h,0)
  local integer QIE=LoadInteger(HY,h,5)
  local boolean NQI=GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED
  local boolean NGI=LoadBoolean(HY,h,'ally')
  if NQI then
    call SetUnitX(u,SafeX50(GetUnitX(u)+NBX*Cos(GXE)))
    call SetUnitY(u,SafeY50(GetUnitY(u)+NBX*Sin(GXE)))
    call SaveInteger(HY,h,12,LoadInteger(HY,h,12)+1)
    if DistanceBetweenXY(GetUnitX(u),GetUnitY(u),tX,tY)<100 or LoadInteger(HY,h,12)>LoadInteger(HY,h,13)then
      set NPI=true
      call SetUnitX(u,tX)
      call SetUnitY(u,tY)
    endif
  else
    set FKX=GetTriggerUnit()
  endif
  if NMI then
    set g=LoadGroupHandle(HY,h,2)
    set gg=GetAvailableGroup()
    set tt_unit1=u
    if NGI then
      call GroupEnumUnitsInRange(gg,GetUnitX(u),GetUnitY(u),NLI+FGE*(GetTriggerEvalCount(t)-1),Condition(function Func2323))
    else
      call GroupEnumUnitsInRange(gg,GetUnitX(u),GetUnitY(u),NLI+FGE*(GetTriggerEvalCount(t)-1),Condition(function Func0824))
    endif
    call GroupRemoveGroup(g,gg)
    loop
      set FKX=FirstOfGroup(gg)
      exitwhen FKX==null
      call GroupRemoveUnit(gg,FKX)
      call GroupAddUnit(g,FKX)
      call Func2322(u,FKX,dt,dmg,UPE,QIE,NGI)
    endloop
    call KillGroup(gg)
    set gg=null
    if NPI then
      call KillGroup(g)
    endif
  elseif NQI==false then
    call Func2322(u,FKX,dt,dmg,UPE,QIE,NGI)
  endif
  if NPI then
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call KillUnit(u)
  endif
  set FKX=null
  set u=null
  set g=null
  set gg=null
  set t=null
endfunction

function Func2325 takes unit SKE,integer NFX,real dmg,real NTI,real NLI,real A7X,real fX,real fY,real tX,real tY,real NBX,integer dt,boolean FHX,string UPE,integer QIE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real GXE= AngleBetweenXY(fX,fY,tX,tY)
  local unit u=CreateUnit(GetOwningPlayer(SKE),NFX,fX,fY,GXE)
  local real NUI=0.02
  if LoadBoolean(TempHash,'wave','ally')then
    call RemoveSavedBoolean(TempHash,'wave','ally')
    call SaveBoolean(HY,h,'ally',true)
  endif
  call SetUnitX(u,SafeX50(fX+NLI/2.*Cos(GXE*bj_DEGTORAD)))
  call SetUnitY(u,SafeY50(fY+NLI/2.*Sin(GXE*bj_DEGTORAD)))
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,dmg)
  call SaveReal(HY,h,1,NTI)
  call SaveReal(HY,h,2,A7X)
  if NLI!=A7X then
    call SaveReal(HY,h,8,NLI)
    call SaveReal(HY,h,9,(A7X-NLI)*NUI)
    call SaveGroupHandle(HY,h,2,GetAvailableGroup())
    call SaveBoolean(HY,h,10,true)
  else
    call TriggerRegisterUnitInRange(t,u,A7X+25,Condition(function ReturnTrue))
  endif
  call SaveReal(HY,h,3,GXE)
  call SaveReal(HY,h,4,NBX*NUI)
  call SaveInteger(HY,h,13,R2I(NTI/ LoadReal(HY,h,4))+1)
  call SaveReal(HY,h,5,SafeX50(GetUnitX(u)+NTI*Cos(GXE*bj_DEGTORAD)))
  call SaveReal(HY,h,6,SafeY50(GetUnitY(u)+NTI*Sin(GXE*bj_DEGTORAD)))
  call SaveInteger(HY,h,1,dt)
  call SaveBoolean(HY,h,0,FHX)
  if UPE!=null then
    call SaveStr(HY,h,0,UPE)
    call SaveInteger(HY,h,5,QIE)
  endif
  call TriggerRegisterTimerEvent(t,NUI,true)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerAddCondition(t,Condition(function Func2324))
  set u=null
  set t=null
endfunction

function Func2326 takes unit WXE,real dmg returns nothing
  local texttag tt
  if Func0590(WXE)==false then
    return
  endif
  set tt=CreateTextTag()
  call SetTextTagText(tt,I2S(R2I(dmg))+"!",.025)
  call SetTextTagColor(tt,255,0,0,255)
  call SetTextTagPos(tt,GetUnitX(WXE),GetUnitY(WXE),32.)
  call SetTextTagVelocity(tt,.0,.04)
  call SetTextTagVisibility(tt,true)
  call SetTextTagFadepoint(tt,2.)
  call SetTextTagLifespan(tt,5.)
  call SetTextTagPermanent(tt,false)
  set tt=null
endfunction

function Func2327 takes nothing returns nothing
  call StunTargetEx(GetSpellTargetUnit(),0.1,true)
  call Func0847(GetSpellTargetUnit(),1.75,'A3P8','a3P8',0)
endfunction

function Func2328 takes unit u,integer id,integer i returns nothing
  if i<0 then
    if GetUnitAbilityLevel(u,id)<=i then
      call UnitRemoveAbility(u,id)
    else
      loop
        call DecUnitAbilityLevel(u,id)
        set i=i+1
        exitwhen i>=0
      endloop
    endif
  elseif i>0 then
    if GetUnitAbilityLevel(u,id)==0 then
      call UnitAddAbility3(u,id,i)
    else
      loop
        call IncUnitAbilityLevel(u,id)
        set i=i-1
        exitwhen i<=0
      endloop
    endif
  endif
endfunction

function Func2329 takes nothing returns nothing
  if GetOwningPlayer(GetTriggerUnit())!=GetOwningPlayer(GetSpellTargetUnit())and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and Func1474(GetSpellTargetUnit())then
    call Func0658('n038')
  endif
endfunction

function Func2330 takes unit u,integer N_I returns nothing
  local trigger t=LoadTriggerHandle(HY,GetHandleId(u),N_I)
  call RemoveSavedHandle(HY,GetHandleId(u),N_I)
  call FlushChildHashtable(HY,GetHandleId(t))
  call CleanTrigger(t)
  set t=null
endfunction

function Func2331 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),tt_int1)!=0 and IsUnitAlly(GetFilterUnit(),tt_player1)
endfunction

function Func2332 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit u=LoadUnitHandle(HY,h,0)
  local integer N_I=LoadInteger(HY,h,0)
  local integer N2I=LoadInteger(HY,h,1)
  local group g
  local unit u2
  local string s=LoadStr(HY,h,0)
  if GetUnitAbilityLevel(u,N_I)==0 then
    call Func2330(u,N_I)
  else
    set g=GetAvailableGroup()
    set tt_int1=N2I
    set tt_unit3=u
    set tt_player1=GetOwningPlayer(u)
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),950,Condition(function Func2331))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      set tt_unit1=u2
      call ExecuteFunc(s)
    endloop
    call KillGroup(g)
  endif
  set u=null
endfunction

function Func2333 takes unit HDE,integer N4I,integer N2I,string UPE returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(HDE)
  if HaveSavedHandle(HY,hu,N4I)then
    return
  endif
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call SaveTriggerHandle(HY,hu,N4I,t)
  call TriggerRegisterTimerEvent(t,0.3,true)
  call TriggerAddCondition(t,Condition(function Func2332))
  call SaveUnitHandle(HY,h,0,HDE)
  call SaveStr(HY,h,0,UPE)
  call SaveInteger(HY,h,0,N4I)
  call SaveInteger(HY,h,1,N2I)
  if IsUnitIllusion(HDE)then
    call TriggerRegisterDeathEvent(t,HDE)
  endif
  set t=null
endfunction

function Func2334 takes nothing returns nothing
  local unit u2=tt_unit1
  if GetUnitState(u2,UNIT_STATE_MAX_MANA)>0 then
    call SetUnitState(u2,UNIT_STATE_MANA,GetUnitState(u2,UNIT_STATE_MANA)+.8/real006)
  endif
  call SetWidgetLife(u2,GetWidgetLife(u2)+3./real006)
  call UnitAddAbilityTimedExF(u2,'A3QS',2,1.,0)
  set u2=null
endfunction

function Func2335 takes nothing returns nothing
  local unit u2=tt_unit1
  if GetUnitAbilityLevel(u2,'B07O')!=1 then
    if GetUnitState(u2,UNIT_STATE_MAX_MANA)>0 then
      call SetUnitState(u2,UNIT_STATE_MANA,GetUnitState(u2,UNIT_STATE_MANA)+.65/real006)
    endif
    if GetUnitAbilityLevel(tt_unit3,'AIad')==1 or(IsUnitOwnedByPlayer(u2,Sentinels[0])==false and IsUnitOwnedByPlayer(u2,Scourges[0])==false)then
      call UnitAddAbilityTimedExF(u2,'A3QS',1,1.,0)
    endif
  endif
  set u2=null
endfunction

function Func2336 takes string s returns nothing
  local unit u
  local integer a
  if integer026==0 then
    set u=CreateUnit(Player(0),'h02C',0,0,0)
    call ShowUnit(u,false)
    call KillUnit(u)
    set u=null
    set a=GetUnitUIDefAddr('h02C')
    if a>0 then
      set integer026=a
    else
      call FatalErrorNote("model switch failed")
      return
    endif
  endif
  call SetUnitModelUFAddress(integer026,s)
endfunction

function Func2337 takes string s returns nothing
  local integer a=GetUnitUIDefAddr('h02C')
  if a>0 then
    call WriteNullTerminatedString(s,a+0x44)
  endif
endfunction

function Func2338 takes nothing returns nothing
  if integer026!=0 then
    call SetUnitModelUFAddress(integer026,"effects\\SonicBreathStream.mdx")
  endif
endfunction

function Func2339 takes string s,real F6O,real BEI,real BXI,real dmg,real NBX returns nothing
  set unit002=GetTriggerUnit()
  if GetUnitAbilityLevel(unit002,'A3O3')>0 then
    set F6O=F6O+200.
  endif
  if s!=null then
    call Func2336(s)
  endif
  call Func2325(unit002,'h02C',dmg,F6O,BEI,BXI,GetUnitX(unit002),GetUnitY(unit002),GetSpellTargetX(),GetSpellTargetY(),NBX,1,false,null,1)
  if s!=null then
    call Func2338()
  endif
endfunction

function Func2340 takes unit WXE,unit SGE,real dmg returns nothing
  local real ls=Func1431(WXE)
  if IsUnitIllusion(SGE)==false and ls>0 and GetWidgetLife(WXE)>1 then
    call SetWidgetLife(WXE,GetWidgetLife(WXE)+dmg*ls)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",WXE,"origin"))
  else
    call Func1433(WXE,SGE)
  endif
endfunction

function Func2341 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real hp
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==LoadUnitHandle(HY,h,1)then
      set hp=GetWidgetLife(u)
      call UnitAddAbility2(u,'A3TL')
      call SetWidgetLife(u,hp)
      if hp+1<GetEventDamage()then
        call SetWidgetLife(u,GetEventDamage()+1)
      endif
    endif
  else
    if GetUnitAbilityLevel(u,'A3TL')==1 then
      set hp=GetWidgetLife(u)
      call UnitRemoveAbility(u,'A3TL')
      call SetWidgetLife(u,hp)
    endif
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set u=null
  set t=null
endfunction

function Func2342 takes unit u,unit u2 returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterTimerEvent(t,0.,false)
  call TriggerAddCondition(t,Condition(function Func2341))
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,h,1,u2)
  set t=null
endfunction

function Func2343 takes unit u,real D1E returns nothing
  call UnitAddAbilityTimedExF(u,'A3FP',1,D1E,'B3FP')
endfunction

function Func2344 takes unit u returns boolean
  return IsHeroUnitId(GetUnitTypeId(u))or Func0632(u)or GetUnitAbilityLevel(u,'ACrk')>0 or GetUnitAbilityLevel(u,'ACsk')>0 or LoadInteger(UnitsData,GetUnitTypeId(u),integer044)>300
endfunction

function Func2345 takes unit HDE,unit TWX,integer BCI,boolean BDI returns nothing
  local integer i=0
  local integer k
  local item it
  local integer BFI='I02M'
  loop
    set it=UnitItemInSlot(HDE,i)
    set k=GetItemTypeId(it)
    if BDI==false then
      call RemoveItem(UnitRemoveItemFromSlot(TWX,i))
    endif
    if it!=null and k!=Item_Real[MixedWardsOrbs]and k!=Item_Real[MixedWardsSentry]and k!=Item_Real[integer203]and k!=Item_Real[integer287]and k!=Item_Real[Aegis]and k!=Item_Real[integer198]and k!=Item_Real[integer199]and k!=Item_Real[integer207]and(BCI!=1 or(k!=Item_Real[integer265]and k!=Item_Real[integer266]and k!=Item_Real[integer135]and k!=Item_Mute[integer135]))then
      set k=GetIndex(it)
      if IsBottleWithRune(k)then
        set k=Item_Real[integer170]
      else
        set k=GetItemTypeId(it)
      endif
      if k>0 then
        set it=CreateItem(k,0,0)
        if GetItemCharges(UnitItemInSlot(HDE,i))>0 then
          call SetItemCharges(it,GetItemCharges(UnitItemInSlot(HDE,i)))
        endif
        call UnitAddItem(TWX,it)
        call SetItemPlayer(it,GetOwningPlayer(TWX),false)
        if k==Item_Real[integer265]or k==Item_Real[integer266]or k==Item_Real[integer135]then
          call SetItemDropOnDeath(it,false)
        endif
      endif
    else
      call UnitAddItem(TWX,CreateItem(BFI,0,0))
    endif
    set i=i+1
    exitwhen i>5
  endloop
endfunction

function Func2346 takes unit HDE,unit TWX,integer BCI returns nothing
  local integer i=0
  local integer k=1
  local integer BHI=GetUnitPointValue(HDE)
  local boolean BJI=BHI==53
  local integer array BKI
  local integer id=GetUnitTypeId(HDE)
  local integer r1
  call SetAbilityHidden(Memory[ConvertHandle(TWX)/4+0x1F0/4],0)
  if BJI then
    set BKI[1]='A27F'
    set BKI[2]='A27G'
    set BKI[3]='A27V'
    set BKI[4]='A27H'
    set BKI[5]='A2V9'
  else
    if id==HeroID[110]then
      set BKI[1]='A2M1'
      set BKI[2]='A2LM'
      set BKI[3]='A2LL'
      set BKI[4]='A2M0'
      set BKI[5]=0
    elseif id==HeroID[1]then
      set BKI[1]='A02A'
      set BKI[2]='A17O'
      set BKI[3]='ACac'
      set BKI[4]='A0IN'
      set BKI[5]='A1AW'
    endif
  endif
  call SuspendHeroXP(TWX,false)
  call UnitModifySkillPoints(TWX,25)
  if GetHeroLevel(HDE)>GetHeroLevel(TWX)then
    call SetHeroLevel(TWX,GetHeroLevel(HDE),false)
  endif
  set i=1
  set r1=GetUnitAbilityLevel(HDE,'A0NR')-GetUnitAbilityLevel(TWX,'A0NR')
  loop
    exitwhen r1==0
    call SelectHeroSkill(TWX,'A0NR')
    set r1=r1-1
  endloop
  loop
    exitwhen BKI[k]==0
    set r1=GetUnitAbilityLevel(HDE,BKI[k])-GetUnitAbilityLevel(TWX,BKI[k])
    loop
      exitwhen r1==0
      call SelectHeroSkill(TWX,BKI[k])
      set r1=r1-1
    endloop
    set k=k+1
  endloop
  if BCI==1 then
    call UnitRemoveAbility(TWX,BKI[4])
    call UnitRemoveAbility(TWX,BKI[5])
  endif
  call SuspendHeroXP(TWX,true)
  call UnitModifySkillPoints(TWX,-25)
  call UnitModifySkillPoints(TWX,-25)
  call SetAbilityHidden(Memory[ConvertHandle(TWX)/4+0x1F0/4],1)
endfunction

function Func2347 takes unit HDE,integer BCI returns unit
  local integer i=0
  local integer k=0
  local integer id=GetUnitTypeId(HDE)
  local integer BHI=GetUnitPointValue(HDE)
  local boolean BJI=BHI==53
  local unit TWX=null
  local integer array BKI
  local integer BFI='I02M'
  local item it
  if id==HeroID[110]then
    set id='N0MM'
  endif
  set TWX=CreateUnit(GetOwningPlayer(HDE),id,GetUnitX(HDE),GetUnitY(HDE),0)
  call SaveBoolean(HY,GetHandleId(TWX),'HBRD',true)
  call SaveUnitHandle(HY,GetHandleId(TWX),'HBRD',HDE)
  set tt_unit1=TWX
  call ExecuteFunc("Func4744")
  call Func1242(TWX)
  call Func2346(HDE,TWX,BCI)
  call Func2345(HDE,TWX,BCI,true)
  call Func1012(HDE,TWX)
  call SuspendHeroXP(TWX,true)
  if GetUnitTypeId(TWX)==GetUnitTypeId(HDE)then
    call SetUnitVertexColor(TWX,255,255,255,100)
  endif
  call SelectUnitAddForPlayer(TWX,GetOwningPlayer(TWX))
  call SetAbilityHidden(Memory[ConvertHandle(TWX)/4+0x1F0/4],1)
  set tt_unit1=TWX
  set TWX=null
  set it=null
  return tt_unit1
endfunction

function Func2348 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer c=GetTriggerEvalCount(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local integer QIE=(LoadInteger(HY,h,5))
  local real AHX
  local unit d
  set AHX=0.6*(c-27)*(c-27)
  if c<54 and GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    if ModuloInteger(c,7)==0 or c==1 then
      call DamageTarget(SKE,SGE,1,(60.+60.*QIE)/8.)
    endif
    if IsBuggyFlying(SGE)==false then
      call SetUnitFlyHeight(SGE,500-AHX,0)
    endif
  else
    if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
      call UnitAddAbilityTimedExF(SGE,'A3TM',1,1.+0.75*QIE,'B09Q')
    endif
    if IsBuggyFlying(SGE)==false then
      call SetUnitFlyHeight(SGE,GetUnitDefaultFlyHeight(SGE),0)
    endif
    if LoadBoolean(HY,h,0)==false then
      call UnitRemoveAbility(SGE,'Aeth')
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  return false
endfunction

function Func2349 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit source=tt_unit1
  local unit RCX=GetEnumUnit()
  local integer QIE=integer089
  call StunTargetEx(RCX,1.6,false)
  if IsBuggyFlying(RCX)==false then
    call UnitAddAbility2(RCX,'Amrf')
    call UnitRemoveAbility(RCX,'Amrf')
  endif
  call SaveBoolean(HY,h,0,GetUnitAbilityLevel(RCX,'Aeth')==1)
  call UnitAddAbility(RCX,'Aeth')
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerRegisterDeathEvent(t,RCX)
  call TriggerAddCondition(t,Condition(function Func2348))
  call SaveUnitHandle(HY,h,2,(source))
  call SaveUnitHandle(HY,h,30,RCX)
  call SaveInteger(HY,h,5,(QIE))
  set t=null
  set source=null
  set RCX=null
endfunction

function Func2350 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and IsMagicImmune(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false
endfunction

function Func2351 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local integer QIE=(LoadInteger(HY,(h),5))
  local group g=GetAvailableGroup()
  local ubersplat ub=Func0681(x,y,"THNN",255,255,255,255,false,false)
  call Func0683(ub,true)
  call DestroyEffect(LoadEffectHandle(HY,(h),175))
  call DestroyEffect(LoadEffectHandle(HY,(h),176))
  call DestroyEffect(LoadEffectHandle(HY,(h),177))
  call DestroyEffect(LoadEffectHandle(HY,(h),178))
  call DestroyEffect(LoadEffectHandle(HY,(h),179))
  call DestroyEffect(LoadEffectHandle(HY,(h),180))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",x,y))
  call DestroyEffect(AddSpecialEffect("effects\\TidalErruption.mdx",x,y))
  set tt_unit1=SKE
  set integer089=QIE
  call GroupEnumUnitsInRange(g,x,y,250,Condition(function Func2350))
  call ForGroup(g,function Func2349)
  call KillGroup(g)
  set t=null
  set SKE=null
  set ub=null
  return false
endfunction

function Func2352 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(u,'A136')
  local string s=""
  local real a
  if HaveSavedHandle(HY,GetHandleId(u),'A136')then
    set x=LoadReal(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(u),'A136')),0)
    set y=LoadReal(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(u),'A136')),1)
  endif
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(u))then
    set s="Objects\\Spawnmodels\\Other\\IllidanFootprint\\IllidanWaterSpawnFootPrint.mdl"
  endif
  call SaveInteger(HY,h,5,(QIE))
  call SaveUnitHandle(HY,h,14,(u))
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call SaveInteger(HY,h,5,(QIE))
  set a=0
  call SaveEffectHandle(HY,h,175,(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
  set a=1
  call SaveEffectHandle(HY,h,176,(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
  set a=2
  call SaveEffectHandle(HY,h,177,(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
  set a=3
  call SaveEffectHandle(HY,h,178,(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
  set a=4
  call SaveEffectHandle(HY,h,179,(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
  set a=5
  call SaveEffectHandle(HY,h,180,(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
  call TimedReveal(GetOwningPlayer(u),6,x,y,400)
  call TriggerRegisterTimerEvent(t,1.6,false)
  call TriggerAddCondition(t,Condition(function Func2351))
  set u=null
  set t=null
endfunction

function Func2353 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  local integer c=LoadInteger(HY,h,0)
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if c<=0 then
      call RemoveSavedHandle(HY,GetHandleId(u),'A136')
      call FlushChildHashtable(HY,h)
      call DisableTrigger(t)
      call DestroyTrigger(t)
    else
      call SaveInteger(HY,h,0,c-1)
    endif
  else
    call TriggerRegisterTimerEvent(t,0,false)
    call SaveInteger(HY,h,0,0)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func2354 takes nothing returns nothing
  local trigger t
  local integer h
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'A136')==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
    call SaveTriggerHandle(HY,hu,'A136',t)
    call TriggerAddCondition(t,Condition(function Func2353))
    call SaveUnitHandle(HY,h,0,u)
  else
    set t=LoadTriggerHandle(HY,hu,'A136')
    set h=GetHandleId(t)
    call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
  endif
  call TriggerRegisterTimerEvent(t,0.5,false)
  call SaveReal(HY,h,0,GetOrderPointX())
  call SaveReal(HY,h,1,GetOrderPointY())
  call DisableTrigger(GetTriggeringTrigger())
  call ImminentTriggeredPointOrder(u,852089,GetUnitX(u)+10*Cos(GetUnitFacing(u)*bj_DEGTORAD),GetUnitY(u)+10*Sin(GetUnitFacing(u)*bj_DEGTORAD))
  call EnableTrigger(GetTriggeringTrigger())
  set t=null
  set u=null
endfunction

function Func2355 takes nothing returns boolean
  local real F6O
  if GetUnitAbilityLevel(GetTriggerUnit(),'A136')>0 and GetIssuedOrderId()==852089 then
    set F6O=1500.
    if GetUnitAbilityLevel(GetTriggerUnit(),'A3O3')>0 then
      set F6O=F6O+200.
    endif
    if DistanceBetweenXY(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetOrderPointX(),GetOrderPointY())<F6O then
      call Func2354()
    endif
  endif
  return false
endfunction

function Func2356 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
  call TriggerAddCondition(t,Condition(function Func2355))
  set t=null
  call PreloadAbility('A11L')
  call AddDispellableBuff('B09Q')
  call AddToPurgeList('A3RX','PRGE')
  call AddToPurgeList('a3RX','PRGE')
endfunction

function Func2357 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit u=LoadUnitHandle(HY,h,0)
  call UnitRemoveAbility(u,'A145')
  call UnitRemoveAbility(u,'A146')
  call UnitRemoveAbility(u,'A144')
  call UnitRemoveAbility(u,'A11S')
  set u=null
  call DelayedCallBackClean()
endfunction

function Func2358 takes unit u returns nothing
  local integer h=DelayedCallBack(0.02,function Func2357)
  call SaveUnitHandle(HY,h,0,u)
endfunction

function Func2359 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=LoadUnitHandle(HY,(ZAE),30)
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==RCX and(GetEventDamage()>40 or IsUnitType(source,UNIT_TYPE_STRUCTURE)or Func0607(source))and(LoadBoolean(HY,(GetHandleId(RCX)),183))then
      call SaveBoolean(HY,(GetHandleId(RCX)),183,(false))
      call SaveReal(HY,(GetHandleId(RCX)),184,(((TimerGetElapsed(GlobalTimer)))*1.0))
      call UnitRemoveAbility(RCX,'A11O')
      call UnitRemoveAbility(RCX,'A11R')
      call Func2358(RCX)
      call FlushChildHashtable(HY,(GetHandleId((LoadTriggerHandle(HY,(ZAE),35)))))
      call CleanTrigger((LoadTriggerHandle(HY,(ZAE),35)))
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set RCX=null
  set source=null
  return false
endfunction

function Func2360 takes nothing returns boolean
  local trigger RBX
  local integer ZAE
  local unit source
  local unit RCX
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call SaveBoolean(HY,(GetHandleId(GetTriggerUnit())),183,(false))
    call SaveReal(HY,(GetHandleId(GetTriggerUnit())),184,(((TimerGetElapsed(GlobalTimer)))*1.0))
    call UnitRemoveAbility(GetTriggerUnit(),'A11O')
    call UnitRemoveAbility(GetTriggerUnit(),'A11R')
    call UnitRemoveAbility(GetTriggerUnit(),'A146')
    call UnitRemoveAbility(GetTriggerUnit(),'A145')
    call UnitRemoveAbility(GetTriggerUnit(),'A11S')
    call UnitRemoveAbility(GetTriggerUnit(),'A144')
    call FlushChildHashtable(HY,(GetHandleId(GetTriggeringTrigger())))
    call CleanTrigger(GetTriggeringTrigger())
  elseif GetAttacker()==(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),182))then
    if IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
      set RBX=CreateTrigger()
      set ZAE=GetHandleId(RBX)
      set source=GetTriggerUnit()
      set RCX=GetAttacker()
      call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
      call TriggerRegisterTimerEvent(RBX,2.5,false)
      call TriggerAddCondition(RBX,Condition(function Func2359))
      call SaveUnitHandle(HY,(ZAE),30,source)
      call SaveUnitHandle(HY,(ZAE),2,(RCX))
      call SaveTriggerHandle(HY,(ZAE),35,(GetTriggeringTrigger()))
      set source=null
      set RCX=null
      set RBX=null
    endif
  endif
  return false
endfunction

function Func2361 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local real result=(TimerGetElapsed(GlobalTimer))
  local integer QIE=GetUnitAbilityLevel(source,'A13T')
  local real ZEE=(LoadReal(HY,(GetHandleId(source)),184))
  local boolean ZSE=(LoadBoolean(HY,(GetHandleId(source)),183))
  if result-ZEE>16-QIE*3 and ZSE==false and GetUnitTypeId(source)=='H06S' and IsDead(source)==false and GetUnitAbilityLevel(source,'A36D')==0 then
    call SaveBoolean(HY,(GetHandleId(source)),183,(true))
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
    call TriggerAddCondition(RBX,Condition(function Func2360))
    call SaveUnitHandle(HY,(ZAE),182,(source))
    call UnitAddAbility3(source,'A11O',QIE)
    call UnitAddAbility2(source,'A11R')
    if QIE==1 then
      call UnitAddAbility2(source,'A146')
    elseif QIE==2 then
      call UnitAddAbility2(source,'A145')
    elseif QIE==3 then
      call UnitAddAbility2(source,'A11S')
    elseif QIE==4 then
      call UnitAddAbility2(source,'A144')
    endif
  elseif ZSE==false or GetUnitAbilityLevel(source,'A36D')==1 then
    call UnitRemoveAbility(source,'A11O')
    call UnitRemoveAbility(source,'A11R')
    call UnitRemoveAbility(source,'A146')
    call UnitRemoveAbility(source,'A145')
    call UnitRemoveAbility(source,'A11S')
    call UnitRemoveAbility(source,'A144')
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func2362 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.5,true)
  call TriggerAddCondition(RBX,Condition(function Func2361))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call SaveInteger(HY,(ZAE),181,0)
  set source=null
  set RBX=null
endfunction

function Func2363 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,30)
  local image im=(LoadImageHandle(HY,h,185))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real B5I=LoadReal(HY,h,0)
  local real B6I=TimerGetElapsed(GlobalTimer)
  local real B7I=B5I-B6I
  local real B8I=LoadReal(HY,h,10)
  local real B9I=LoadReal(HY,h,11)
  local real CVI
  local real CEI
  local integer i
  local string s
  local image fx
  local real a=90
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set s=""
    set CVI=GetUnitX(SGE)
    set CEI=GetUnitY(SGE)
    if DistanceBetweenXY(B8I,B9I,CVI,CEI)>50 then
      set i=LoadInteger(HY,h,0)+1
      call SaveReal(HY,h,10,CVI)
      call SaveReal(HY,h,11,CEI)
      set fx=CreateImage("war3mapImported\\red_circle.blp",a,a,0,CVI-a/2,CEI-a/2,0,0,0,0,2)
      call SetImageRenderAlways(fx,true)
      call SaveImageHandle(HY,h,1000+i,fx)
      call SaveInteger(HY,h,0,i)
      set fx=null
    endif
  endif
  if(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A13D')or B7I<=0 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if GetTriggerEventId()!=EVENT_WIDGET_DEATH and(IsUnitAlly(SGE,GetOwningPlayer(SKE))or(IsMagicImmune(SGE)==false and IsUnitInvulnerable(SGE)==false))and Func0792(SGE)==false then
      if IsUnitHidden(SGE)then
        call SetUnitX(SGE,x)
        call SetUnitY(SGE,y)
      else
        call SetUnitPosition(SGE,x,y)
      endif
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A13D',false)
    if(LoadInteger(HY,(GetHandleId(SKE)),704))==0 or(LoadInteger(HY,(GetHandleId(SKE)),704))=='A11N' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A11N',true)
    endif
    set i=1
    loop
      call DestroyImage(LoadImageHandle(HY,h,1000+i))
      set i=i+1
      exitwhen HaveSavedHandle(HY,h,1000+i)==false
    endloop
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call ShowImage(im,false)
    call DestroyImage(im)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  set im=null
  set SKE=null
  return false
endfunction

function Func2364 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  local real a=90
  local image fx=CreateImage("war3mapImported\\red_cross.blp",a,a,0,x-a/2,y-a/2,0,0,0,0,2)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local string s="effects\\BlackTide.mdx"
  local integer QIE=GetUnitAbilityLevel(SKE,'A11N')
  call AddTimedKeyToAgent(SGE,4401,5)
  call UnitAddAbility2(SKE,'A13D')
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A13D',true)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A11N',false)
  call SetImageRenderAlways(fx,true)
  call ShowImage(fx,true)
  call SetImageColor(fx,255,0,0,255)
  call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(SKE),'o01Z',x,y,0),'BTLF',5)
  if IsUnitAlly(SGE,GetOwningPlayer(SKE))then
    call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+8)
    call FuckingAssistBuffWrap(SKE,SGE)
  else
    call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+4)
  endif
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func2363))
  call SaveImageHandle(HY,h,185,(fx))
  call SaveUnitHandle(HY,h,30,SGE)
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call SaveReal(HY,h,10,x)
  call SaveReal(HY,h,11,y)
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget(s,SGE,"overhead")))
  call SaveUnitHandle(HY,h,2,(SKE))
  set SKE=null
  set SGE=null
  set fx=null
  set t=null
endfunction

function Func2365 takes nothing returns nothing
  if(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or IsBlocked(GetSpellTargetUnit())==false)then
    call Func2364()
  endif
endfunction

function Func2366 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A13D',false)
  call UnitAddAbility2(GetTriggerUnit(),'A13D')
endfunction

function Func2367 takes nothing returns nothing
  if(LoadBoolean(HY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),139))and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and GetOwningPlayer(GetSpellTargetUnit())!=GetOwningPlayer(GetTriggerUnit())then
    call Func0658('n038')
  elseif IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and IsMagicImmune(GetSpellTargetUnit())then
    call Func0658('TX13')
  endif
endfunction

function Func2368 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer i=1
  local player p
  local real dmg
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer CRI=(LoadInteger(HY,h,136))
  local integer CII=(LoadInteger(HY,h,188))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>CII then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    loop
      exitwhen i>CRI
      set p=(LoadPlayerHandle(HY,h,(1300+i)))
      set dmg=(LoadReal(HY,h,(1200+i)))
      if p==null then
        set i=CRI
      else
        call SetUnitState(SGE,UNIT_STATE_LIFE,Func0468(1,GetUnitState(SGE,UNIT_STATE_LIFE)-dmg/CII))
      endif
      set i=i+1
    endloop
  endif
  set t=null
  set p=null
  set SGE=null
  return false
endfunction

function Func2369 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local trigger tt=(LoadTriggerHandle(HY,h,135))
  local integer c=GetTriggerEvalCount(t)
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
      call TriggerRegisterTimerEvent(tt,1,true)
      call TriggerRegisterDeathEvent(tt,SGE)
      call TriggerAddCondition(tt,Condition(function Func2368))
      call UnitRemoveAbility(SGE,'B09U')
    else
      call FlushChildHashtable(HY,GetHandleId(tt))
      call CleanTrigger(tt)
    endif
  else
    set h=GetHandleId(tt)
    call SavePlayerHandle(HY,h,(1300+c),(GetOwningPlayer(GetEventDamageSource())))
    call SaveReal(HY,h,(1200+c),0.5*GetEventDamage())
    call SaveInteger(HY,h,136,(c))
  endif
  set t=null
  set SGE=null
  set tt=null
  return false
endfunction

function Func2370 takes nothing returns nothing
  local unit SGE=GetEnumUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer D1E=10
  local trigger tt=CreateTrigger()
  call  DamageBlockActiveTracking(D1E)
  call UnitAddAbilityTimedExF(SGE,'A12D',1,D1E*1.0,'B09U')
  call TriggerRegisterTimerEvent(t,D1E+0.01,false)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func2369))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveTriggerHandle(HY,h,135,(tt))
  call SaveUnitHandle(HY,(GetHandleId(tt)),17,(SGE))
  call SaveInteger(HY,(GetHandleId(tt)),188,(D1E))
  set SGE=null
  set t=null
  set tt=null
endfunction

function Func2371 takes nothing returns boolean
  if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),group021)==false then
    call GroupAddUnit(group021,GetFilterUnit())
    return true
  endif
  return false
endfunction

function Func2372 takes nothing returns nothing
  local unit source=unit175
  local unit RCX=GetEnumUnit()
  local integer ZAE=integer480
  call StunTargetEx(RCX,1.4,false)
  call DamageTarget(source,RCX,1,300+100*ZAE)
  set source=null
  set RCX=null
endfunction

function Func2373 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit CFI=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,0)+1
  call SetUnitVertexColor(CFI,255,255,255,IMaxIF(200-7*c,0))
  if c>=30 then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    call SaveInteger(HY,h,0,c)
  endif
  set CFI=null
  set t=null
endfunction

function Func2374 takes unit u returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call FlushChildHashtable(HY,h)
  call TimerStart(t,0.1,true,function Func2373)
  call SaveUnitHandle(HY,h,0,u)
  call SetUnitTimeScale(u,1.5)
  set t=null
endfunction

function Func2375 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))and IsMagicImmune(GetFilterUnit())==false and IsUnitInGroup(GetFilterUnit(),group014)==false
endfunction

function Func2376 takes nothing returns nothing
  local real x=GetUnitX(tt_unit1)
  local real y=GetUnitY(tt_unit1)
  if GetUnitAbilityLevel(GetEnumUnit(),'A3RX')>0 then
    call SetUnitX(GetEnumUnit(),x)
    call SetUnitY(GetEnumUnit(),y)
  endif
endfunction

function Func2377 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'A3RX')
  call UnitRemoveAbility(GetEnumUnit(),'a3RX')
endfunction

function Func2378 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit CFI=(LoadUnitHandle(HY,h,45))
  local unit CMI
  local real a=(LoadReal(HY,h,13))
  local real x=GetUnitX(CFI)
  local real y=GetUnitY(CFI)
  local real CPI=(LoadReal(HY,h,66))
  local real CQI=(LoadReal(HY,h,67))
  local integer c=GetTriggerEvalCount(t)
  local real KEO=LoadReal(HY,h,14)
  local real KXO=LoadReal(HY,h,15)
  local real nx=SafeX50(CPI+13.33*c*KEO)
  local real ny=SafeY50(CQI+13.33*c*KXO)
  local integer QIE=(LoadInteger(HY,h,5))
  local group g=(LoadGroupHandle(HY,h,187))
  local group gg
  local integer CSI=LoadInteger(HY,h,6)
  local boolean CTI=LoadBoolean(HY,h,5)
  local group CUI
  local unit u
  if CTI==false then
    if c<19 then
      call SetUnitVertexColor(CFI,255,255,255,5+c*10)
      call SetUnitVertexColor(LoadUnitHandle(HY,h,186),255,255,255,5+c*10)
    elseif c<125 then
      call SetUnitVertexColor(CFI,255,255,255,190)
    endif
  else
    if c<10 then
      call SetUnitVertexColor(CFI,255,255,255,5+c*20)
      call SetUnitVertexColor(LoadUnitHandle(HY,h,186),255,255,255,5+c*20)
    elseif c<62 then
      call SetUnitVertexColor(CFI,255,255,255,190)
    endif
  endif
  set gg=GetAvailableGroup()
  set group021=g
  set tt_unit1=CFI
  set unit175=CFI
  set integer480=QIE
  call GroupEnumUnitsInRange(gg,GetUnitX(CFI),GetUnitY(CFI),425,Condition(function Func2371))
  call ForGroup(gg,function Func2370)
  call SetUnitX(CFI,nx)
  call SetUnitY(CFI,ny)
  if CTI then
    set CSI=70
    set CUI=LoadGroupHandle(HY,h,188)
    set tt_unit1=CFI
    set group014=CUI
    call GroupEnumUnitsInRange(gg,GetUnitX(CFI),GetUnitY(CFI),225,Condition(function Func2375))
    loop
      set u=FirstOfGroup(gg)
      exitwhen u==null
      call GroupRemoveUnit(gg,u)
      call GroupAddUnit(CUI,u)
      call UnitAddAbility(u,'A3RX')
    endloop
    set tt_unit1=CFI
    call ForGroup(CUI,function Func2376)
  else
    set CSI=140
  endif
  if c==CSI then
    call KillUnit(LoadUnitHandle(HY,h,186))
  elseif c<CSI then
    set CMI=(LoadUnitHandle(HY,h,186))
    call SetUnitX(CMI,nx)
    call SetUnitY(CMI,ny)
  endif
  if c==LoadInteger(HY,h,6)then
    set tt_unit1=CFI
    call GroupEnumUnitsInRange(gg,nx,ny,450,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(gg,function Func2372)
    call Func2374(CFI)
    if CTI then
      call ForGroup(LoadGroupHandle(HY,h,188),function Func2377)
      call KillGroup(LoadGroupHandle(HY,h,188))
    endif
    call KillUnit(CFI)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  call KillGroup(gg)
  set t=null
  set CFI=null
  set CMI=null
  set g=null
  set gg=null
  return false
endfunction

function Func2379 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a
  local real CPI
  local real CQI
  local real CWI
  local real CYI
  local trigger t
  local integer h
  local integer QIE
  local unit CFI
  local unit CMI
  local string s=""
  local integer CZI='h06U'
  local boolean CTI=GetSpellAbilityId()=='A3OF'
  local integer c=150
  local real KEO
  local real KXO
  if GetRandomInt(0,5)==0 then
    set CZI='h0DJ'
  endif
  if IsPlayerAlly(GetOwningPlayer(SKE),LocalPlayer)or PlayerObserver then
    set s="war3mapImported\\Whirlpool.mdx"
  endif
  if tx==GetUnitX(SKE)and ty==GetUnitY(SKE)then
    set tx=tx+50*Cos(GetUnitFacing(SKE)*bj_DEGTORAD)
    set ty=ty+50*Sin(GetUnitFacing(SKE)*bj_DEGTORAD)
  endif
  set a=Atan2(ty-y,tx-x)
  set KXO=Sin(a)
  set KEO=Cos(a)
  if CTI then
    set CPI=x
    set CQI=y
    set c=c/2
  else
    set CPI=x-1000*KEO
    set CQI=y-1000*KXO
  endif
  set CWI=x+1000*KEO
  set CYI=y+1000*KXO
  set t=CreateTrigger()
  set h=GetHandleId(t)
  set QIE=GetUnitAbilityLevel(SKE,'A11K')+GetUnitAbilityLevel(SKE,'A3OF')
  set CFI=CreateUnit(GetOwningPlayer(SKE),CZI,CPI,CQI, AngleBetweenXY(x,y,tx,ty))
  set CMI=CreateUnit(GetOwningPlayer(SKE),'h06V',CPI,CQI, AngleBetweenXY(x,y,tx,ty))
  call SetUnitVertexColor(CFI,255,255,255,0)
  call SetUnitPathing(CFI,false)
  call SaveInteger(HY,h,5,QIE)
  call SaveReal(HY,h,13,a)
  call SaveReal(HY,h,14,KEO)
  call SaveReal(HY,h,15,KXO)
  call SaveUnitHandle(HY,h,45,CFI)
  call SaveUnitHandle(HY,h,186,CMI)
  call SaveReal(HY,h,66,CPI)
  call SaveReal(HY,h,67,CQI)
  call SaveBoolean(HY,h,5,CTI)
  call SaveInteger(HY,h,6,c)
  call SaveGroupHandle(HY,h,187,GetAvailableGroup())
  call SaveGroupHandle(HY,h,188,GetAvailableGroup())
  call DestroyEffect(AddSpecialEffect(s,SafeX50(CWI),SafeY50(CYI)))
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func2378))
  set SKE=null
  set t=null
  set CFI=null
  set CMI=null
endfunction

function Func2380 takes unit SKE,unit SGE,real D1E,integer QIE returns nothing
  local group g
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
  local unit u2
  if GetUnitAbilityLevel(SGE,'A3E9')==1 and SKE!=SGE and LoadBoolean(HY,GetHandleId(GetTriggeringTrigger()),5)==false and IsMagicImmune(SKE)==false then
    call SaveInteger(TempHash,'A3E9','0lvl',QIE)
    call SaveUnitHandle(TempHash,'A3E9','targ',SKE)
    call SaveUnitHandle(TempHash,'A3E9','cstr',SGE)
    call SaveReal(TempHash,'A3E9','0dur',D1E)
    call ExecuteFunc("Func2383")
  endif
  set real050=(80+70*QIE)*D1E/5.0
  set real049=(1+0.75*QIE)*D1E/5.0
  set tt_unit1=SKE
  set g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),200,Condition(function DefaultEnemyFilter))
  if GetUnitTypeId(SGE)!='h0BD' then
    call GroupAddUnit(g,SGE)
  endif
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(SKE,u2,23,real050)
    call StunTargetEx(u2,real049,false)
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",GetUnitX(SGE),GetUnitY(SGE)))
  set d=null
endfunction

function Func2381 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=(LoadUnitHandle(HY,h,45))
  local real C3I=(LoadReal(HY,h,444))
  local real C4I=(LoadReal(HY,h,445))
  local real GXE= AngleBetweenXY(GetUnitX(d),GetUnitY(d),GetUnitX(SGE),GetUnitY(SGE))
  local real nx=GetUnitX(d)+18*Cos(GXE*bj_DEGTORAD)
  local real ny=GetUnitY(d)+18*Sin(GXE*bj_DEGTORAD)
  call SetUnitX(d,nx)
  call SetUnitY(d,ny)
  if DistanceBetweenXY(nx,ny,GetUnitX(SGE),GetUnitY(SGE))<=18 or(GetUnitX(d)==0 and GetUnitY(d)==0)then
    call KillUnit(d)
    call Func2380(SKE,SGE,C3I,LoadInteger(HY,h,5))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  return false
endfunction

function Func2382 takes unit from,unit to,real C3I,integer QIE,boolean C6I returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(from),'h0BD',GetUnitX(from),GetUnitY(from),GetUnitFacing(from))
  call SaveUnitHandle(HY,h,2,(from))
  call SaveUnitHandle(HY,h,17,(to))
  call SaveUnitHandle(HY,h,45,(d))
  call SaveReal(HY,h,444,C3I*1.0)
  call SaveInteger(HY,h,5,QIE)
  call SaveBoolean(HY,h,5,C6I)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func2381))
  set t=null
  set d=null
endfunction

function Func2383 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9','cstr')
  local unit SGE=LoadUnitHandle(TempHash,'A3E9','targ')
  local real C7I=LoadReal(TempHash,'A3E9','0dur')
  local integer QIE=LoadInteger(TempHash,'A3E9','0lvl')
  call Func2382(SKE,SGE,C7I,QIE,true)
  call LotusOrbFX(SKE)
  call FlushChildHashtable(TempHash,'A3E9')
  set SKE=null
  set SGE=null
endfunction

function Func2384 takes string ZJE,unit source,unit RCX returns nothing
  local texttag VQO=CreateTextTag()
  call SetTextTagText(VQO,ZJE,0.033)
  call SetTextTagPosUnit(VQO,source,64)
  call SetTextTagColor(VQO,255,0,0,255)
  call SetTextTagVelocity(VQO,0,0.0355)
  call SetTextTagFadepoint(VQO,0.15)
  call SetTextTagPermanent(VQO,false)
  call SetTextTagLifespan(VQO,0.65)
  call SetTextTagVisibility(VQO,IsUnitVisibleEx(source,LocalPlayer))
  set VQO=null
endfunction

function Func2385 takes real r returns string
  if r>4.5 then
    return"5.0"
  elseif r>4.0 then
    return"4.5"
  elseif r>3.5 then
    return"4.0"
  elseif r>3.0 then
    return"3.5"
  elseif r>2.5 then
    return"3.0"
  elseif r>2.0 then
    return"2.5"
  elseif r>1.5 then
    return"2.0"
  elseif r>1.0 then
    return"1.5"
  elseif r>0.5 then
    return"1.0"
  elseif r>0.0 then
    return"0.5"
  else
    return"0.0"
  endif
  return" "
endfunction

function Func2386 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real C4I=(LoadReal(HY,h,442))
  local real WNE=(TimerGetElapsed(GlobalTimer))
  local real DEI=5.0-(WNE-C4I)
  local real DXI=RMinIF(WNE-C4I,5.0)
  local integer QIE=(LoadInteger(HY,h,34))+1
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func2380(SKE,SKE,5.0,GetUnitAbilityLevel(SKE,'A1NI'))
    if(LoadInteger(HY,(GetHandleId(SKE)),704))==0 or(LoadInteger(HY,(GetHandleId(SKE)),704))=='A1NI' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1NI',true)
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1NH',false)
    call SetUnitVertexColor(SKE,255,255,255,255)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A1NH' then
      if IsBlocked(GetSpellTargetUnit())==false then
        call Func2382(SKE,GetSpellTargetUnit(),DXI,GetUnitAbilityLevel(SKE,'A1NI'),false)
      endif
      if(LoadInteger(HY,(GetHandleId(SKE)),704))==0 or(LoadInteger(HY,(GetHandleId(SKE)),704))=='A1NI' then
        call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1NI',true)
      endif
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1NH',false)
      call SetUnitVertexColor(SKE,255,255,255,255)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  elseif GetUnitAbilityLevel(SKE,'A1NH')>0 then
    call SaveInteger(HY,h,34,(QIE))
    if DEI>=0 then
      call Func2384(Func2385(DEI),SKE,SKE)
      if ModuloInteger(QIE,2)==0 then
        call SetUnitVertexColor(SKE,255,125,125,255)
      else
        call SetUnitVertexColor(SKE,255,175,175,255)
      endif
    else
      call SetUnitVertexColor(SKE,255,0,0,255)
    endif
    if WNE-C4I>(5.0+0.5)then
      call Func2380(SKE,SKE,5.0,GetUnitAbilityLevel(SKE,'A1NI'))
      if(LoadInteger(HY,(GetHandleId(SKE)),704))==0 or(LoadInteger(HY,(GetHandleId(SKE)),704))=='A1NI' then
        call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1NI',true)
      endif
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1NH',false)
      call SetUnitVertexColor(SKE,255,255,255,255)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  else
    call SetUnitVertexColor(SKE,255,255,255,255)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  return false
endfunction

function Func2387 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,2,(u))
  call SaveReal(HY,h,442,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func2386))
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A1NI',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A1NH',true)
  call UnitAddAbility2(u,'A1NH')
  call UnitMakeAbilityPermanent(u,true,'A1NH')
  call SaveInteger(HY,GetHandleId(u),'A1NH',h)
  call TriggerEvaluate(t)
  set u=null
  set t=null
endfunction

function Func2388 takes nothing returns boolean
  set bj_lastCreatedUnit=GetKillingUnit()
  if GetUnitAbilityLevel(bj_lastCreatedUnit,'Aloc')==1 then
    set bj_lastCreatedUnit=udg_Hero[GetPlayerId(GetOwningPlayer(bj_lastCreatedUnit))]
  endif
  return GetUnitAbilityLevel(bj_lastCreatedUnit,'A0O3')>0 and GetUnitAbilityLevel(bj_lastCreatedUnit,'A36D')==0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(bj_lastCreatedUnit))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),'A04R')==0
endfunction

function Func2389 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),26))
  call SaveInteger(HY,(GetHandleId(source)),27,((LoadInteger(HY,(GetHandleId(source)),27))-1))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set source=null
  set RBX=null
  return false
endfunction

function Func2390 takes nothing returns nothing
  local unit E3X=bj_lastCreatedUnit
  local unit SGE=GetTriggerUnit()
  local integer hu=GetHandleId(E3X)
  local integer DAI=(LoadInteger(HY,(hu),27))
  local integer QIE=GetUnitAbilityLevel(E3X,'A0O3')
  local integer g=Func0464(DAI*3+QIE*2+4,4+8*QIE)
  local player p=GetOwningPlayer(E3X)
  local trigger t=CreateTrigger()
  local texttag tt
  if LoadReal(HeroStats,GetHandleId(p),25)>TimerGetElapsed(GlobalTimer)then
    set g=R2I(g*0.4)
  endif
  call TriggerRegisterTimerEvent(t,30,false)
  call TriggerAddCondition(t,Condition(function Func2389))
  call SaveUnitHandle(HY,(GetHandleId(t)),26,(E3X))
  call SaveInteger(HY,(hu),27,(DAI+1))
  if IsUnitType(SGE,UNIT_TYPE_HERO)then
    call DestroyEffect(AddSpecialEffect("war3mapImported\\GoblinCoin.mdx",GetUnitX(SGE),GetUnitY(SGE)))
    call SaveInteger(HeroStats,GetHandleId(p),'GGRD',LoadInteger(HeroStats,GetHandleId(p),'GGRD')+g)
    set tt=CreateTextTag()
    call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,g+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD))
    call SetTextTagText(tt,"+"+I2S(g),0.025)
    call SetTextTagPosUnit(tt,SGE,0)
    call SetTextTagColor(tt,255,220,0,255)
    call SetTextTagVelocity(tt,0,0.03)
    call SetTextTagVisibility(tt,LocalPlayer==p)
    call SetTextTagFadepoint(tt,2)
    call SetTextTagLifespan(tt,3)
    call SetTextTagPermanent(tt,false)
  endif
  set t=null
  set E3X=null
  set SGE=null
endfunction

function Func2391 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(RBX,Condition(function Func2388))
  call TriggerAddAction(RBX,function Func2390)
  set RBX=null
  set boolean023=true
  call PreloadAbility('A0J4')
endfunction

function Func2392 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(TmpUnit376))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitTypeId(GetFilterUnit())!='n0F5'
endfunction

function Func2393 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local unit d=(LoadUnitHandle(HY,h,19))
  local integer c=(LoadInteger(HY,h,28))
  local real x=GetUnitX(d)
  local real y=GetUnitY(d)
  local group g
  local unit u
  local real dmg
  if c>16 then
    call KillUnit(d)
    call PauseTimer(t)
    call FlushChildHashtable(HY,(h))
    call DestroyTimer(t)
  else
    set TmpUnit376=d
    set dmg=10+GetUnitAbilityLevel(SKE,('A0IL'))*5
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,x,y,650,Condition(function Func2392))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call DamageTarget(SKE,u,23,dmg)
      call GroupRemoveUnit(g,u)
    endloop
    call KillGroup(g)
    set c=c+1
    call SaveInteger(HY,h,28,(c))
  endif
  set d=null
  set t=null
  set SKE=null
endfunction

function Func2394 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e01E',x,y,0)
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call PlaySoundAtPos(sound059,x,y)
  call UnitAddAbility2(d,('A0J4'))
  call SetUnitAbilityLevel(d,('A0J4'),GetUnitAbilityLevel(SKE,('A0IL')))
  call UnitAddAbility2(d,'Aloc')
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveInteger(HY,h,28,0)
  call TimerStart(t,1,true,function Func2393)
  set t=null
  set d=null
  set SKE=null
endfunction

function ManaVoid_DamageTarget takes nothing returns nothing
  call DamageTarget(unit176,GetEnumUnit(),1,ManaVoid_Damage_Count)
endfunction

function Func2396 takes nothing returns boolean
  return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false)
endfunction

function AM_ManaVoid takes nothing returns nothing
  local unit hero=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local integer lvl=GetUnitAbilityLevel(hero,'A2WE')
  local real damage=(0.35+0.25*lvl)*(GetUnitState(target,UNIT_STATE_MAX_MANA)-GetUnitState(target,UNIT_STATE_MANA))
  local group g=GetAvailableGroup()
  call StunTargetEx(target,0.3,true)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",target,"chest"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",target,"chest"))
  call DestroyEffect(AddSpecialEffect("war3mapImported\\Enchantment.mdx",GetUnitX(target),GetUnitY(target)))
  call GroupEnumUnitsInRange(g,GetUnitX(target),GetUnitY(target),525,Condition(function Func2396))
  set ManaVoid_Damage_Count=damage
  set unit176=hero
  call ForGroup(g,function ManaVoid_DamageTarget)
  call PlaySoundOnUnitBJ(sound017,100,target)
  call KillGroup(g)
  set hero=null
  set target=null
  set g=null
endfunction

function Func2398 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,h,19))
  local integer c=GetTriggerEvalCount(t)
  local integer XXO=R2I(((0.9-0.3)/0.5)/0.03)
  local integer DGI=R2I((175/XXO))
  local integer DHI=R2I((255/XXO)*1.75)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  if c>XXO then
    call SetUnitVertexColor(d,255,255,255,0)
    call SetUnitVertexColor(SKE,255,255,255,255)
    call ShowUnit(d,false)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call SetUnitVertexColor(d,255,255,255,175-DGI*c)
    call SetUnitX(d,x)
    call SetUnitY(d,y)
    call SetUnitVertexColor(SKE,255,255,255,DHI*c)
  endif
  set SKE=null
  set t=null
  set d=null
  set d=null
  return false
endfunction

function Func2399 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit d=(LoadUnitHandle(HY,(GetHandleId(SKE)),293))
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  call SetUnitX(d,x)
  call SetUnitY(d,y)
  call SetUnitX(SKE,x)
  call SetUnitY(SKE,y)
  call SetUnitVertexColor(SKE,255,255,255,0)
  call SetUnitVertexColor(d,255,255,255,175)
  call SetUnitTimeScale(d,0.5)
  call SaveUnitHandle(HY,h,19,(d))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerAddCondition(t,Condition(function Func2398))
  set SKE=null
  set d=null
  set t=null
endfunction

function Func2400 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit d
  local integer h=GetHandleId(SKE)
  local real a= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetSpellTargetX(),GetSpellTargetY())
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  call UnitAddAbility2(SKE,'Aeth')
  set d=CreateUnit(GetOwningPlayer(SKE),'h06K',GetUnitX(SKE),GetUnitY(SKE),a)
  call Func0746(d,5)
  call SetUnitVertexColor(d,255,255,255,0)
  call SetUnitX(d,x)
  call SetUnitY(d,y)
  call SetUnitX(SKE,x)
  call SetUnitY(SKE,y)
  call SetUnitAnimation(d,"Spell Throw")
  call SaveUnitHandle(HY,h,293,d)
  set SKE=null
  set d=null
endfunction

function AM_Preload takes nothing returns nothing
  call PreloadUnit('h06K')
endfunction

function Func2402 takes unit SKE,real x,real y,group g,integer QIE returns nothing
  local group gg=GetAvailableGroup()
  local unit u2
  call KillTrees(x,y,150)
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(gg,x,y,150,Condition(function Func0816))
  loop
    set u2=FirstOfGroup(gg)
    exitwhen u2==null
    call GroupRemoveUnit(gg,u2)
    if(IsUnitInGroup(u2,g)==false)then
      call GroupAddUnit(g,u2)
      call DamageTarget(SKE,u2,2,40+QIE*30)
      call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",u2,"overhead"))
    endif
  endloop
  call KillGroup(gg)
endfunction

function Func2403 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit DLI=(LoadUnitHandle(HY,(h),290))
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  local real x=(LoadReal(HY,(h),284))
  local real y=(LoadReal(HY,(h),285))
  local real tx=(LoadReal(HY,(h),286))
  local real ty=(LoadReal(HY,(h),287))
  local real DMI=(LoadReal(HY,(h),288))
  local real DPI=(LoadReal(HY,(h),289))
  local real DQI=(LoadReal(HY,(h),137))
  local real N3X=1-DQI
  local boolean DSI=(LoadBoolean(HY,(h),291))
  local group g=(LoadGroupHandle(HY,(h),133))
  local real N4X=RMaxBJ(DistanceBetweenXY(x,y,tx,ty)/LoadReal(HY,h,11),0.4)
  call SetUnitX(DLI,SafeX50(x*DQI*DQI+DMI*2*DQI*N3X+tx*N3X*N3X))
  call SetUnitY(DLI,SafeY50(y*DQI*DQI+DPI*2*DQI*N3X+ty*N3X*N3X))
  call Func2402(SKE,GetUnitX(DLI),GetUnitY(DLI),g,LoadInteger(HY,h,5))
  if(DSI)then
    call SaveReal(HY,(h),137,((DQI-.02/N4X)*1.0))
  else
    call SaveReal(HY,(h),137,((DQI+.02/N4X)*1.0))
    call SaveReal(HY,(h),284,GetUnitX(SKE))
    call SaveReal(HY,(h),285,GetUnitY(SKE))
  endif
  if(DQI<0 and DSI)then
    call SaveBoolean(HY,(h),291,(false))
    call SaveReal(HY,(h),288,(x+300*Cos(Atan2(ty-y,tx-x)+(LoadReal(HY,(h),292))))*1.0)
    call SaveReal(HY,(h),289,(y+300*Sin(Atan2(ty-y,tx-x)+(LoadReal(HY,(h),292))))*1.0)
  endif
  if(DQI>1 and DSI==false)then
    call PauseTimer(GetExpiredTimer())
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call RemoveUnit(DLI)
    call DestroyTimer(GetExpiredTimer())
  endif
  set DLI=null
  set SKE=null
endfunction

function Func2404 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local unit DTI=CreateUnit(GetOwningPlayer(SKE),'e01T',x,y,270.0)
  local unit DUI=CreateUnit(GetOwningPlayer(SKE),'e01T',x,y,270.0)
  local integer h1
  local integer h2
  local timer t1=CreateTimer()
  local timer t2=CreateTimer()
  local real a=Atan2(ty-y,tx-x)
  local boolean DWI=GetUnitAbilityLevel(SKE,'A3O3')>0
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  call UnitAddAbility(DTI,'Amrf')
  call UnitRemoveAbility(DTI,'Amrf')
  call SetUnitFlyHeight(DTI,150,0)
  call UnitAddAbility(DUI,'Amrf')
  call UnitRemoveAbility(DUI,'Amrf')
  call SetUnitFlyHeight(DUI,150,0)
  set h1=GetHandleId(t1)
  call SaveUnitHandle(HY,(h1),14,SKE)
  call SaveUnitHandle(HY,(h1),290,DTI)
  call SaveGroupHandle(HY,(h1),133,(GetAvailableGroup()))
  call SaveReal(HY,(h1),284,x)
  call SaveReal(HY,(h1),285,y)
  call SaveReal(HY,(h1),286,tx)
  call SaveReal(HY,(h1),287,ty)
  call SaveReal(HY,(h1),288,((x+300.*Cos(a+45.))*1.0))
  call SaveReal(HY,(h1),289,((y+300.*Sin(a+45.))*1.0))
  call SaveReal(HY,(h1),137,1.)
  call SaveReal(HY,(h1),292,-45.)
  call SaveBoolean(HY,(h1),291,true)
  set h2=GetHandleId(t2)
  call SaveUnitHandle(HY,(h2),14,SKE)
  call SaveUnitHandle(HY,(h2),290,DUI)
  call SaveGroupHandle(HY,(h2),133,(GetAvailableGroup()))
  call SaveReal(HY,(h2),284,x)
  call SaveReal(HY,(h2),285,y)
  call SaveReal(HY,(h2),286,tx)
  call SaveReal(HY,(h2),287,ty)
  call SaveReal(HY,(h2),288,((x+300.*Cos(a-45.))*1.0))
  call SaveReal(HY,(h2),289,((y+300.*Sin(a-45.))*1.0))
  call SaveReal(HY,(h2),137,1.)
  call SaveReal(HY,(h2),292,45.)
  call SaveBoolean(HY,(h2),291,true)
  call TimerStart(t1,.025,true,function Func2403)
  call TimerStart(t2,.025,true,function Func2403)
  if DWI then
    call SaveReal(HY,h1,11,1300.+200.)
    call SaveReal(HY,h2,11,1300.+200.)
  else
    call SaveReal(HY,h1,11,1300.)
    call SaveReal(HY,h2,11,1300.)
  endif
  call SaveInteger(HY,h1,5,QIE)
  call SaveInteger(HY,h2,5,QIE)
  set SKE=null
  set DTI=null
  set DUI=null
  set t1=null
  set t2=null
endfunction

function Func2405 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local real result=GetUnitX(u)
  local real ZEE=GetUnitY(u)
  local real ZWE=bj_RADTODEG*Atan2(ZEE-real024,result-real023)
  local real x
  local real y
  local integer c=GetTriggerEvalCount(GetTriggeringTrigger())
  if Sin((ZWE-real025)*bj_DEGTORAD)<0 then
    set x=GetUnitX(u)+12*Cos((real025-90)*bj_DEGTORAD)
    set y=GetUnitY(u)+12*Sin((real025-90)*bj_DEGTORAD)
    call ForceMovements(u,x,y,ModuloInteger(c,8)==1,false)
    if ModuloInteger(c,15)==1 then
      call SetUnitFacingTimed(u,real025+90,0.3)
    endif
  else
    set x=GetUnitX(u)+12*Cos((real025+90)*bj_DEGTORAD)
    set y=GetUnitY(u)+12*Sin((real025+90)*bj_DEGTORAD)
    call ForceMovements(u,x,y,ModuloInteger(c,8)==1,false)
    if ModuloInteger(c,15)==1 then
      call SetUnitFacingTimed(u,real025-90,0.3)
    endif
  endif
  if ModuloInteger(c,10)==1 then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
  endif
  set u=null
endfunction

function Func2406 takes nothing returns nothing
  if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
    call CurrentSafestLocationWrapper(GetEnumUnit())
  endif
endfunction

function Func2407 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=(LoadReal(HY,(ZAE),13))
  local real ZEE=(LoadReal(HY,(ZAE),6))
  local real ZWE=(LoadReal(HY,(ZAE),7))
  local group g=(LoadGroupHandle(HY,(ZAE),22))
  if GetTriggerEvalCount(RBX)>24 then
    call ForGroup(g,function Func2406)
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set real023=ZEE
    set real024=ZWE
    set real025=result
    call ForGroup(g,function Func2405)
  endif
  set RBX=null
  set g=null
  return false
endfunction

function Func2408 takes nothing returns nothing
  call DamageTarget(tt_unit1,GetEnumUnit(),1,real023)
  if IsDead(GetEnumUnit())==false and IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
    call Func0433(GetEnumUnit())
  endif
endfunction

function Func2409 takes nothing returns boolean
  return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false
endfunction

function Func2410 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0O2')
  local unit d
  local real a=bj_RADTODEG*Atan2(GetUnitY(SGE)-GetUnitY(SKE),GetUnitX(SGE)-GetUnitX(SKE))
  local real x
  local real y
  local group g=GetAvailableGroup()
  local group gg=GetAvailableGroup()
  local real ILX=DistanceBetweenUnits(SGE,SKE)
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A289')
  endif
  call DamageTarget(SKE,SGE,1,75+75*QIE)
  call SaveGroupHandle(HY,h,22,(g))
  call SaveReal(HY,h,13,((a)*1.0))
  call SaveReal(HY,h,6,((GetUnitX(SKE))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(SKE))*1.0))
  call TriggerRegisterTimerEvent(t,0.025,true)
  call TriggerAddCondition(t,Condition(function Func2407))
  set x=GetUnitX(SKE)+50*Cos(a*bj_DEGTORAD)
  set y=GetUnitY(SKE)+50*Sin(a*bj_DEGTORAD)
  call GroupEnumUnitsInRange(gg,x,y,300,Condition(function Func2409))
  call GroupAddGroup(gg,g)
  call GroupClear(gg)
  set d=CreateUnit(GetOwningPlayer(SKE),'o00Y',x,y,a)
  call UnitApplyTimedLife(d,'BTLF',1)
  call UnitAddAbility2(d,'A0NY')
  call SetUnitAbilityLevel(d,'A0NY',QIE)
  call IssueImmediateOrderByIdExFunc(d,852096)
  if ILX>300 then
    set x=GetUnitX(SKE)+250*Cos(a*bj_DEGTORAD)
    set y=GetUnitY(SKE)+250*Sin(a*bj_DEGTORAD)
    call GroupEnumUnitsInRange(gg,x,y,300,Condition(function Func2409))
    call GroupAddGroup(gg,g)
    call GroupClear(gg)
    set d=CreateUnit(GetOwningPlayer(SKE),'o00Y',x,y,a)
    call UnitApplyTimedLife(d,'BTLF',1)
    call UnitAddAbility2(d,'A0NY')
    call SetUnitAbilityLevel(d,'A0NY',QIE)
    call IssueImmediateOrderByIdExFunc(d,852096)
  endif
  if ILX>500 then
    set x=GetUnitX(SKE)+450*Cos(a*bj_DEGTORAD)
    set y=GetUnitY(SKE)+450*Sin(a*bj_DEGTORAD)
    call GroupEnumUnitsInRange(gg,x,y,300,Condition(function Func2409))
    call GroupAddGroup(gg,g)
    call GroupClear(gg)
    set d=CreateUnit(GetOwningPlayer(SKE),'o00Y',x,y,a)
    call UnitApplyTimedLife(d,'BTLF',1)
    call UnitAddAbility2(d,'A0NY')
    call SetUnitAbilityLevel(d,'A0NY',QIE)
    call IssueImmediateOrderByIdExFunc(d,852096)
  endif
  if ILX>700 and GetUnitAbilityLevel(SKE,'A0O2')==0 then
    set x=GetUnitX(SKE)+650*Cos(a*bj_DEGTORAD)
    set y=GetUnitY(SKE)+650*Sin(a*bj_DEGTORAD)
    call GroupEnumUnitsInRange(gg,x,y,300,Condition(function Func2409))
    call GroupAddGroup(gg,g)
    call GroupClear(gg)
    set d=CreateUnit(GetOwningPlayer(SKE),'o00Y',x,y,a)
    call UnitApplyTimedLife(d,'BTLF',1)
    call UnitAddAbility2(d,'A0NY')
    call SetUnitAbilityLevel(d,'A0NY',QIE)
    call IssueImmediateOrderByIdExFunc(d,852096)
  endif
  call KillGroup(gg)
  call GroupRemoveUnit(g,SGE)
  set real023=75+75*QIE
  set tt_unit1=SKE
  call ForGroup(g,function Func2408)
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  set g=null
  set gg=null
endfunction

function Func2411 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local real ox=(LoadReal(HY,h,6))
  local real oy=(LoadReal(HY,h,7))
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if ox==x and oy==y then
      if GetUnitAbilityLevel(u,'A1WG')==0 then
        call UnitAddAbility2(u,'A1WG')
      endif
    else
      if GetUnitAbilityLevel(u,'A1WG')>0 then
        call UnitRemoveAbility(u,'A1WG')
      endif
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func2412 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local player p=GetOwningPlayer(SKE)
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local unit u
  local trigger t
  local integer h
  local boolean D3I=GetSpellAbilityId()=='A0OO'
  local boolean D4I=GetSpellAbilityId()=='A2U5'
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",x,y))
  if(D3I)then
    if(QIE==1)then
      set u=CreateUnit(p,'n01Q',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    elseif(QIE==2)then
      set u=CreateUnit(p,'n01R',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    elseif(QIE==3)then
      set u=CreateUnit(p,'u021',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    elseif(QIE==4)then
      set u=CreateUnit(p,'u022',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    endif
    if QIE>2 then
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call TriggerRegisterTimerEvent(t,0.05,true)
      call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
      call SaveReal(HY,h,6,((GetUnitX(u))*1.0))
      call SaveReal(HY,h,7,((GetUnitY(u))*1.0))
      call SaveUnitHandle(HY,h,2,(u))
      call TriggerAddCondition(t,Condition(function Func2411))
      set t=null
    endif
  elseif(D4I)then
    if(QIE==1)then
      set u=CreateUnit(p,'n01M',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    elseif(QIE==2)then
      set u=CreateUnit(p,'n01S',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    elseif(QIE==3)then
      set u=CreateUnit(p,'u023',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    elseif(QIE==4)then
      set u=CreateUnit(p,'u024',x,y,270)
      call UnitApplyTimedLife(u,'BTLF',60)
    endif
  endif
  call SelectSummons(u)
  set u=null
  set SKE=null
endfunction

function Func2413 takes nothing returns nothing
  if GetUnitAbilityLevel(GetTriggerUnit(),'A2U5')==0 then
    call UnitAddAbility2(GetTriggerUnit(),'A2U5')
  endif
  call SetUnitAbilityLevel(GetTriggerUnit(),'A2U5',GetUnitAbilityLevel(GetTriggerUnit(),'A0OO'))
endfunction

function Func2414 takes integer id returns integer
  if id=='n01M' then
    return'A0OP'
  elseif id=='n01S' then
    return'A0OQ'
  elseif id=='u023' then
    return'A30D'
  endif
  return'A30E'
endfunction

function Func2415 takes nothing returns nothing
  local integer id=GetUnitTypeId(CastedUnit)
  local integer BHX
  if id=='n01M' or id=='n01S' or id=='u023' or id=='u024' then
    set BHX=Func2414(id)
    if IsMagicImmune(TriggeredUnit)then
      call UnitRemoveAbility(CastedUnit,BHX)
    else
      call UnitAddAbility(CastedUnit,BHX)
    endif
  endif
endfunction

function Func2416 takes nothing returns nothing
  call PreloadUnit('n01M')
  call PreloadUnit('n01S')
  call PreloadUnit('u023')
  call PreloadUnit('u024')
  call PreloadUnit('n01Q')
  call PreloadUnit('n01R')
  call PreloadUnit('u021')
  call PreloadUnit('u022')
  call AddToPurgeList('B06Z','PRGE')
  call AddWrapper("Func2415",-1)
endfunction

function Func2417 takes nothing returns nothing
  local unit FKX=GetTriggerUnit()
  local integer hu=GetHandleId(FKX)
  local player p=(LoadPlayerHandle(HY,(hu),54))
  local integer QIE=(LoadInteger(HY,(hu),5))
  local texttag tt=CreateTextTag()
  local integer g=0
  local integer ZCE=1
  local unit RCX
  local player FNO
  if QIE==1 then
    set g=150
  elseif QIE==2 then
    set g=250
  else
    set g=350
  endif
  if LoadReal(HeroStats,GetHandleId(p),25)>TimerGetElapsed(GlobalTimer)then
    set g=R2I(g*0.4)
  endif
  call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+g)
  call SetTextTagText(tt,"+"+I2S(g),0.025)
  call SetTextTagPosUnit(tt,udg_Hero[GetPlayerId(p)],100)
  call SetTextTagColor(tt,255,220,0,255)
  call SetTextTagVelocity(tt,0,0.03)
  call SetTextTagVisibility(tt,LocalPlayer==p)
  call SetTextTagFadepoint(tt,2)
  call SetTextTagLifespan(tt,3)
  call SetTextTagPermanent(tt,false)
  set ReliableGold[GetPlayerId(p)]=ReliableGold[GetPlayerId(p)]+g
  call SaveInteger(HeroStats,GetHandleId(p),'TRCK',LoadInteger(HeroStats,GetHandleId(p),'TRCK')+g)
  loop
    if QIE==1 then
      set g=40
    elseif QIE==2 then
      set g=80
    else
      set g=120
    endif
    exitwhen ZCE>5
    if IsSentinel(p)then
      set FNO=Sentinels[ZCE]
    else
      set FNO=Scourges[ZCE]
    endif
    if FNO!=p then
      set RCX=udg_Hero[GetPlayerId(FNO)]
      if DistanceBetweenUnits(RCX,FKX)<950 then
        set tt=CreateTextTag()
        if LoadReal(HeroStats,GetHandleId(FNO),25)>TimerGetElapsed(GlobalTimer)then
          set g=R2I(g*0.4)
        endif
        call SetPlayerState(FNO,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(FNO,PLAYER_STATE_RESOURCE_GOLD)+g)
        call SetTextTagText(tt,"+"+I2S(g),0.025)
        call SetTextTagPosUnit(tt,RCX,100)
        call SetTextTagColor(tt,255,220,0,255)
        call SetTextTagVelocity(tt,0,0.03)
        call SetTextTagVisibility(tt,false)
        if LocalPlayer==FNO then
          call SetTextTagVisibility(tt,true)
        endif
        call SetTextTagFadepoint(tt,2)
        call SetTextTagLifespan(tt,3)
        call SetTextTagPermanent(tt,false)
        set ReliableGold[GetPlayerId(FNO)]=ReliableGold[GetPlayerId(FNO)]+g
        call SaveInteger(HeroStats,GetHandleId(FNO),'TRCK',LoadInteger(HeroStats,GetHandleId(FNO),'TRCK')+g)
      endif
    endif
    set ZCE=ZCE+1
  endloop
  set RCX=null
  set FKX=null
  set p=null
  set tt=null
endfunction

function Func2418 takes nothing returns nothing
  if LoadReal(HY,GetHandleId(GetTriggerUnit()),314)>TimerGetElapsed(GlobalTimer)then
    call Func2417()
  endif
endfunction

function Func2419 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit SKE=(LoadUnitHandle(HY,h,19))
  call SetUnitX(SKE,GetUnitX(SGE))
  call SetUnitY(SKE,GetUnitY(SGE))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SaveBoolean(HY,h,0,true)
  elseif LoadBoolean(HY,h,0)or(GetTriggerEvalCount(t)>10 and GetUnitAbilityLevel(SGE,'B00L')==0)then
    call SaveReal(HY,GetHandleId(SGE),314,0)
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    if LoadBoolean(HY,h,1)then
      call UnitShareVision(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),GetOwningPlayer(LoadUnitHandle(HY,h,2)),false)
    endif
    call KillUnit(SKE)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  set SKE=null
  return false
endfunction

function Func2420 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local unit d=CreateUnit(GetOwningPlayer(SGE),'e01V',GetUnitX(SGE),GetUnitY(SGE),0)
  local string s="war3mapImported\\TrackBuff.mdx"
  local unit FVI=LoadUnitHandle(HY,GetHandleId(SGE),'VisD')
  call UnitRemoveAbility(SGE,'B00L')
  if IsPlayerAlly(LocalPlayer,GetOwningPlayer(SGE))and PlayerObserver==false then
    set s=""
  endif
  call UnitAddAbility2(d,'A115')
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,GetSpellTargetUnit())
  call TriggerAddCondition(t,Condition(function Func2419))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveUnitHandle(HY,h,2,(SKE))
  if FVI!=null then
    call UnitShareVision(FVI,GetOwningPlayer(SKE),true)
    call SaveBoolean(HY,h,1,true)
  endif
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget(s,SGE,"overhead")))
  call SaveReal(HY,(GetHandleId(GetSpellTargetUnit())),314,(((TimerGetElapsed(GlobalTimer))+30)*1.0))
  call SavePlayerHandle(HY,GetHandleId(GetSpellTargetUnit()),54,GetOwningPlayer(GetTriggerUnit()))
  call SaveInteger(HY,GetHandleId(GetSpellTargetUnit()),5,GetUnitAbilityLevel(GetTriggerUnit(),'A0B4'))
  set t=null
  set FVI=null
  set SGE=null
  set SKE=null
  set d=null
endfunction

function Func2421 takes nothing returns nothing
  call AddToPurgeList('B00L','PRGE')
  call AddToPurgeList('A1IX','PRGE')
  call AddToPurgeList('B0CA','PRGE')
  call AddWrapper("Func2424",3)
  call AddWrapper("Func2433",'preA')
  set boolean005=true
endfunction

function Func2422 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,(h),30)
  local unit WXE=(LoadUnitHandle(HY,(h),2))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==WXE and(GetEventDamage()>40 or IsUnitType(SGE,UNIT_TYPE_STRUCTURE)or Func0607(SGE))and(LoadBoolean(HY,(GetHandleId(WXE)),183))then
      call UnitAddAbilityTimedExF(SGE,'A3N0'-1+GetUnitAbilityLevel(WXE,'A1IQ'),1,3,'B0CA')
      call SaveBoolean(HY,(GetHandleId(WXE)),183,(false))
      call SaveReal(HY,(GetHandleId(WXE)),184,(((TimerGetElapsed(GlobalTimer)))*1.0))
      call UnitRemoveAbility(WXE,'A1IS')
      call UnitRemoveAbility(WXE,'A1J2')
      call FlushChildHashtable(HY,(GetHandleId((LoadTriggerHandle(HY,(h),35)))))
      call CleanTrigger((LoadTriggerHandle(HY,(h),35)))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  else
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set WXE=null
  set SGE=null
  return false
endfunction

function Func2423 takes nothing returns boolean
  local trigger t
  local integer h
  local unit u
  local unit WXE
  local integer QIE
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    set u=GetTriggerUnit()
    call SaveBoolean(HY,(GetHandleId(u)),183,(false))
    call SaveReal(HY,(GetHandleId(u)),184,(((TimerGetElapsed(GlobalTimer)))*1.0))
    call UnitRemoveAbility(u,'A1IS')
    call UnitRemoveAbility(u,'A1J2')
    call FlushChildHashtable(HY,(GetHandleId(GetTriggeringTrigger())))
    call CleanTrigger(GetTriggeringTrigger())
    set u=null
  elseif GetAttacker()==(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),182))then
    set WXE=GetAttacker()
    if GetUnitAbilityLevel(WXE,'A36D')==0 and IsUnitAlly(WXE,GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false then
      set t=CreateTrigger()
      set h=GetHandleId(t)
      set u=GetTriggerUnit()
      call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
      call TriggerRegisterTimerEvent(t,2.5,false)
      call TriggerAddCondition(t,Condition(function Func2422))
      call SaveUnitHandle(HY,(h),30,u)
      call SaveUnitHandle(HY,(h),2,(WXE))
      call SaveTriggerHandle(HY,(h),35,(GetTriggeringTrigger()))
      set QIE=GetUnitAbilityLevel(WXE,'A1IQ')
      if QIE==0 then
        call UnitRemoveAbility(WXE,'A1J2')
      else
        call SetUnitAbilityLevel(WXE,'A1J2',QIE)
      endif
      set u=null
      set t=null
    endif
    set WXE=null
  endif
  return false
endfunction

function Func2424 takes nothing returns nothing
  local unit WXE=CastedUnit
  local unit SGE=TriggeredUnit
  if GetUnitAbilityLevel(WXE,'A1J2')>0 and LoadBoolean(HY,(GetHandleId(WXE)),183)and GetUnitAbilityLevel(WXE,'A36D')==0 then
    call UnitAddAbilityTimedExF(SGE,'A3N0'-1+GetUnitAbilityLevel(WXE,'A1IQ'),1,3,'B0CA')
    call SaveBoolean(HY,(GetHandleId(WXE)),183,(false))
    call SaveReal(HY,(GetHandleId(WXE)),184,TimerGetElapsed(GlobalTimer))
    call UnitRemoveAbility(WXE,'A1IS')
    call UnitRemoveAbility(WXE,'A1J2')
  endif
  set WXE=null
  set SGE=null
endfunction

function Func2425 takes nothing returns nothing
endfunction

function Func2426 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  local real WNE=(TimerGetElapsed(GlobalTimer))
  local integer QIE=GetUnitAbilityLevel(u,'A1IQ')
  local real FII=(LoadReal(HY,(GetHandleId(u)),184))
  local boolean b=(LoadBoolean(HY,(GetHandleId(u)),183))
  if GetTriggerEvalCount(t)==1 then
    call TriggerRegisterTimerEvent(t,0.5,true)
  endif
  if b==false then
    if WNE-FII>14-QIE*2. and GetUnitTypeId(u)=='Naka' and IsDead(u)==false then
      call SaveBoolean(HY,(GetHandleId(u)),183,(true))
      call UnitAddAbility2(u,'A1IS')
      if GetUnitAbilityLevel(u,'B068')==0 then
        call UnitAddAbility3(u,'A1J2',QIE)
      endif
    elseif GetUnitAbilityLevel(u,'B068')==0 then
      call UnitRemoveAbility(u,'A1IS')
      call UnitRemoveAbility(u,'A1J2')
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func2427 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.,false)
  call TriggerAddCondition(t,Condition(function Func2426))
  call SaveUnitHandle(HY,(h),14,(u))
  call SaveInteger(HY,(h),181,0)
  set u=null
  set t=null
endfunction

function Func2428 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'B00L')>0 and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false and IsMagicImmune(GetFilterUnit())==false
endfunction

function Func2429 takes nothing returns nothing
  local unit SKE=tt_unit1
  local unit SGE=tt_unit3
  local group g
  local group tg
  local unit u
  local real dmg=0.
  local integer QIE
  local boolean FBI=false
  local integer h
  if LoadUnitHandle(MHT,GetHandleId(SKE),'A004'+1)!=null then
    set SKE=LoadUnitHandle(MHT,GetHandleId(SKE),'A004'+1)
    set FBI=true
    call RemoveSavedHandle(MHT,GetHandleId(tt_unit1),'A004'+1)
  endif
  set h=GetHandleId(SKE)
  set g=LoadGroupHandle(MHT,h,'A004')
  set QIE=LoadInteger(MHT,h,'A005')
  set dmg=75*(QIE+1)
  call StunTargetEx(SGE,0.1,false)
  call GroupAddUnit(g,SGE)
  call DamageTarget(SKE,SGE,1,dmg)
  if GetUnitAbilityLevel(SGE,'A3E9')==1 and LoadBoolean(MHT,h,'A004')==false then
    if IsMagicImmune(SKE)==false and GetUnitAbilityLevel(SKE,'Aloc')==0 then
      call SaveUnitHandle(TempHash,'A3E9',0,SGE)
      call SaveUnitHandle(TempHash,'A3E9',1,SKE)
      call SaveInteger(TempHash,'A3E9',0,QIE)
      call ExecuteFunc("Func2430")
    endif
  endif
  set tg=GetAvailableGroup()
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(tg,GetUnitX(SGE),GetUnitY(SGE),1225,Condition(function Func2428))
  call GroupRemoveGroup(g,tg)
  set u=FirstOfGroup(tg)
  if u!=null then
    if IsBlocked(u)==false then
      call AddProjectile(SGE,u,'h02K',"Func2429",1000,true)
      call SaveUnitHandle(MHT,GetHandleId(SGE),'A004'+1,SKE)
    else
      call RemoveLinkenBuff(u)
      call KillGroup(g)
      call RemoveSavedInteger(MHT,h,'A004')
      call RemoveSavedHandle(MHT,h,'A004')
      call RemoveSavedBoolean(MHT,h,'A004')
      call RemoveSavedInteger(MHT,h,'A005')
    endif
  else
    call KillGroup(g)
    call RemoveSavedInteger(MHT,h,'A004')
    call RemoveSavedHandle(MHT,h,'A004')
    call RemoveSavedBoolean(MHT,h,'A004')
    call RemoveSavedInteger(MHT,h,'A005')
  endif
  call KillGroup(tg)
  set tg=null
  set SKE=null
  set SGE=null
  set u=null
  set g=null
  set tg=null
endfunction

function Func2430 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  if IsBlocked(SGE)==false then
    call AddProjectile(SKE,SGE,'h02K',"Func2429",1000,true)
    call SaveInteger(MHT,GetHandleId(SKE),'A004',QIE-1)
    call SaveInteger(MHT,GetHandleId(SKE),'A005',QIE)
    call SaveGroupHandle(MHT,GetHandleId(SKE),'A004',GetAvailableGroup())
    call SaveBoolean(MHT,GetHandleId(SKE),'A004',true)
  else
    call RemoveLinkenBuff(SGE)
  endif
  call FlushChildHashtable(TempHash,'A3E9')
  set SKE=null
  set SGE=null
endfunction

function Func2431 takes nothing returns nothing
  call AddProjectile(GetTriggerUnit(),GetSpellTargetUnit(),'h02K',"Func2429",1000,true)
  call SaveInteger(MHT,GetHandleId(GetTriggerUnit()),'A004',GetUnitAbilityLevel(GetTriggerUnit(),'A004')-1)
  call SaveGroupHandle(MHT,GetHandleId(GetTriggerUnit()),'A004',GetAvailableGroup())
  call SaveInteger(MHT,GetHandleId(GetTriggerUnit()),'A005',GetUnitAbilityLevel(GetTriggerUnit(),'A004'))
endfunction

function Func2432 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(RCX,'A07A')
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==RCX then
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
      if(LoadInteger(HY,GetHandleId(RCX),2487)!=1)then
        call AddTimedKeyToAgent(RCX,2487,0.5)
        if IsUnitType(source,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(source,GetOwningPlayer(RCX))then
          call DamageTarget(RCX,source,2,30*QIE)
          call TextTagOnUnit(I2S(R2I(30*QIE)),1,RCX,0.027,216,0,0,216,Func0590(RCX)or PlayerObserver)
        endif
      endif
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set RCX=null
  set source=null
  return false
endfunction

function Func2433 takes nothing returns nothing
  local unit WXE=CastedUnit
  local unit SGE=TriggeredUnit
  local integer QIE
  if GetUnitAbilityLevel(WXE,'B068')==1 and AliveNonBuildOrMarker(SGE)and IsUnitEnemy(SGE,GetOwningPlayer(WXE))then
    call UnitRemoveAbility(WXE,'B068')
    set QIE=GetUnitAbilityLevel(WXE,'A07A')
    call Func0648(WXE,SGE,2,30*QIE,0.02)
    call TextTagOnUnit(I2S(R2I(30*QIE)),1,WXE,0.027,216,0,0,216,Func0590(WXE)or PlayerObserver)
  endif
  set WXE=null
  set SGE=null
endfunction

function Func2434 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local unit source=GetTriggerUnit()
  local unit RCX=GetAttacker()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(RBX,2,false)
  call TriggerAddCondition(RBX,Condition(function Func2432))
  call SaveUnitHandle(HY,(ZAE),17,(source))
  call SaveUnitHandle(HY,(ZAE),2,(RCX))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func2435 takes nothing returns boolean
  local integer QIE
  local unit u
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    set u=(LoadUnitHandle(HY,(h),14))
    set QIE=GetUnitAbilityLevel(u,'A1IQ')
    if(LoadBoolean(HY,(GetHandleId(u)),183))then
      set QIE=GetUnitAbilityLevel(u,'A1IQ')
      if QIE==0 then
        call UnitRemoveAbility(u,'A1J2')
      else
        call SetUnitAbilityLevel(u,'A1J2',QIE)
      endif
    else
      call UnitRemoveAbility(u,'A1J2')
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set u=(LoadUnitHandle(HY,(h),14))
    if(LoadBoolean(HY,(GetHandleId(u)),183))==false then
      call UnitRemoveAbility(u,'A1J2')
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func2436 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A07A')
  call Func0379(u,'A07A')
  call AddTimedKeyToAgent(u,2488,1.25-0.25*QIE-0.01)
  call TriggerRegisterTimerEvent(t,15+5*QIE,false)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_CAST)
  call TriggerRegisterDeathEvent(t,u)
  call SaveBoolean(HY,h,0,true)
  call TriggerAddCondition(t,Condition(function Func2435))
  call SaveUnitHandle(HY,(h),14,(u))
  set t=null
  set u=null
endfunction

function Func2437 takes nothing returns boolean
  return GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0 and GetSpellAbilityId()==('A0GP')or GetSpellAbilityId()==('A0FW')or GetSpellAbilityId()=='A3OD'
endfunction

function Func2438 takes integer FJI,integer QIE returns integer
  if QIE==0 then
    return 1
  else
    if FJI==1 then
      return QIE+1
    elseif FJI==2 then
      return QIE+6
    elseif FJI==3 then
      return QIE+12
    endif
  endif
  return 1
endfunction

function Func2439 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='e00X'
endfunction

function Func2440 takes nothing returns nothing
  call RemoveUnit(GetEnumUnit())
endfunction

function Func2441 takes player whichPlayer returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,whichPlayer,Condition(function Func2439))
  call ForGroup(g,function Func2440)
  call KillGroup(g)
  set g=null
endfunction

function Func2442 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local unit source=(LoadUnitHandle(HY,(GetHandleId(RBX)),14))
  local integer ZAE=GetHandleId(source)
  local integer QIE=GetUnitAbilityLevel(source,('A0FV'))
  local integer ZBE=(LoadInteger(HY,(ZAE),315))-1
  local integer ZCE=Func0466(ZBE,0,4+QIE)
  local unit RCX=(LoadUnitHandle(HY,(ZAE),316))
  local integer JUX
  if QIE==1 then
    set JUX=ZCE*20
  elseif QIE==2 then
    set JUX=ZCE*25
  elseif QIE==3 then
    set JUX=ZCE*30
  endif
  if ZBE==0 then
    set JUX=0
  endif
  call AddBonusDamage(source,JUX)
  if GetUnitTypeId(RCX)=='e00X' then
    call SetUnitAbilityLevel(RCX,('A0EF'),Func2438(QIE,ZCE))
    call SaveInteger(HY,(ZAE),315,(ZBE))
  else
    call Func2441((LoadPlayerHandle(HY,(GetHandleId(RBX)),54)))
  endif
  call FlushChildHashtable(HY,(GetHandleId(RBX)))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func2443 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer hu=GetHandleId(SKE)
  local unit d=(LoadUnitHandle(HY,(hu),316))
  local integer QIE=GetUnitAbilityLevel(SKE,'A0FV')
  local integer F6X=(LoadInteger(HY,(hu),315))+1
  local integer FSI=Func0466(F6X,0,4+QIE)
  local integer FJI=Func2438(QIE,FSI)
  local trigger t=CreateTrigger()
  local integer dmg
  if QIE==1 then
    set dmg=FSI*20
  elseif QIE==2 then
    set dmg=FSI*25
  elseif QIE==3 then
    set dmg=FSI*30
  endif
  call AddBonusDamage(SKE,dmg)
  call SetUnitAbilityLevel(d,'A0EF',FJI)
  call SaveInteger(HY,(hu),315,(F6X))
  call SaveUnitHandle(HY,(GetHandleId(t)),14,(SKE))
  call SavePlayerHandle(HY,(GetHandleId(t)),54,(GetOwningPlayer(SKE)))
  call TriggerRegisterTimerEvent(t,14,false)
  call TriggerAddCondition(t,Condition(function Func2442))
  set t=null
  set SKE=null
  set d=null
endfunction

function Func2444 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,('A0FV'))
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00X',0,0,0)
  local trigger t=CreateTrigger()
  call UnitAddAbility2(d,('A0EF'))
  call SaveUnitHandle(HY,(GetHandleId(SKE)),316,(d))
  call SetUnitInvulnerable(d,true)
  call UnitAddAbility2(d,'Aloc')
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func2437))
  call TriggerAddAction(t,function Func2443)
  set t=null
  set d=null
  set SKE=null
endfunction

function Func2445 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func2446 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer ht=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(ht),0))
  local integer hc=GetHandleId(SKE)
  local integer i=0
  local unit u
  local integer hu
  loop
    set i=i+1
    exitwhen HaveSavedHandle(HY,ht,i)==false
    set u=LoadUnitHandle(HY,ht,i)
    set hu=GetHandleId(u)
    if hu<1 then
      set hu=LoadInteger(HY,ht,i)
      call FlushChildHashtable(HY,hu)
    else
      call SaveReal(HY,hc,hu,Func0468(LoadReal(HY,hc,hu)-LoadReal(HY,ht,i),0))
    endif
  endloop
  call FlushChildHashtable(HY,(ht))
  call CleanTrigger(t)
  set u=null
  set SKE=null
  set t=null
  return false
endfunction

function Func2447 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer hc=GetHandleId(SKE)
  local group g=GetAvailableGroup()
  local trigger t=CreateTrigger()
  local integer ht=GetHandleId(t)
  local unit u
  local integer h
  local real FWI
  local real dmg
  local integer QIE=GetUnitAbilityLevel(SKE,'A0GP')
  local integer FYI=28+2*QIE
  local integer i=0
  if IsUnitType(SKE,UNIT_TYPE_HERO)==false then
    set SKE=udg_Hero[GetPlayerId(GetOwningPlayer(SKE))]
    set hc=GetHandleId(SKE)
  endif
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),650,Condition(function Func2445))
  set TmpUnit376=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
  set real021=QIE*20
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    set i=i+1
    set h=GetHandleId(u)
    set FWI=LoadReal(HY,hc,h)
    set dmg=RMinIF(QIE*20+FWI,450)
    call TextTagOnUnit("+"+I2S(R2I(dmg)),1,u,0.023,255,0,0,216,Func0590(u)or PlayerObserver)
    call SaveReal(HY,ht,i,FYI)
    call SaveUnitHandle(HY,ht,i,u)
    call SaveInteger(HY,ht,i,h)
    call DamageTarget(SKE,u,23,dmg)
    call SaveReal(HY,hc,h,FWI+FYI)
    call GroupRemoveUnit(g,u)
  endloop
  call SaveUnitHandle(HY,ht,0,(SKE))
  call KillGroup(g)
  call TriggerRegisterTimerEvent(t,14,false)
  call TriggerAddCondition(t,Condition(function Func2446))
  set SKE=null
  set t=null
endfunction

function Func2448 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=LoadInteger(HY,h,0)
  local integer F_I=LoadInteger(HY,hu,'A0Fw')
  call RemoveSavedHandle(HY,hu,'A0FW')
  call RemoveSavedInteger(HY,hu,'A0FW')
  call RemoveSavedInteger(HY,hu,'A0Fw')
  if GetHandleId(u)!=0 then
    call UnitRemoveAbility(u,F_I)
    call UnitRemoveAbility(u,'B37Y')
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set u=null
endfunction

function Func2449 takes nothing returns nothing
  local integer h
  local unit SKE=tt_unit1
  local unit SGE=tt_unit3
  local integer QIE=GetUnitAbilityLevel(SKE,'A0FW')+GetUnitAbilityLevel(SKE,'A3OD')
  local integer F1I
  local integer F2I
  local integer F3I
  local timer t
  local integer hu=GetHandleId(SGE)
  local boolean F4I=false
  local boolean CTI=false
  if QIE==0 and GetUnitAbilityLevel(SGE,'A0FW')>0 then
    set QIE=GetUnitAbilityLevel(SGE,'A0FW')
    set F4I=true
  endif
  if GetUnitAbilityLevel(SKE,'A3OD')>0 then
    set CTI=true
  endif
  if QIE==0 then
    set QIE=1
  endif
  set F1I='A37U'-1+QIE
  set F2I='A3F0'+4*(QIE-1)-1
  if GetUnitAbilityLevel(SGE,'B37Y')==0 then
    set F3I=0
  else
    set F3I=LoadInteger(HY,hu,'A0FW')
  endif
  if QIE>0 and IsMagicImmune(SGE)==false then
    if F3I>0 then
      call UnitRemoveAbility(SGE,'A37U')
      call UnitRemoveAbility(SGE,'A37V')
      call UnitRemoveAbility(SGE,'A37W')
      call UnitRemoveAbility(SGE,'A37X')
      call UnitRemoveAbility(SGE,LoadInteger(HY,hu,'A0Fw'))
      call UnitRemoveAbility(SGE,'B37Y')
    endif
    if HaveSavedHandle(HY,hu,'A0FW')then
      set t=LoadTimerHandle(HY,hu,'A0FW')
    else
      set t=CreateTimer()
      call SaveTimerHandle(HY,hu,'A0FW',t)
      call SaveUnitHandle(HY,GetHandleId(t),0,SGE)
      call SaveInteger(HY,GetHandleId(t),0,hu)
    endif
    call SaveInteger(HY,hu,'A0FW',Func0464(4,F3I+1))
    call TimerStart(t,5.,false,function Func2448)
    set t=null
    set F2I=F2I+Func0464(4,F3I+1)
    call UnitAddAbility2(SGE,F2I)
    call Func1032(SKE,SGE)
    call SaveInteger(HY,hu,'A0Fw',F2I)
    call UnitAddAbilityTimedExF(SGE,F1I,F3I+1,5,0)
    if CTI==false and GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)and F4I==false then
      if IsBlocked(SKE)==false then
        call AddProjectile(SGE,SKE,'h01K',"Func2449",1000,true)
      else
        call RemoveLinkenBuff(SKE)
      endif
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func2450 takes nothing returns nothing
  call AddProjectile(GetTriggerUnit(),GetSpellTargetUnit(),'h01K',"Func2449",1000,true)
endfunction

function Func2451 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  set tt_unit1=GetTriggerUnit()
  call GroupEnumUnitsInRange(g,GetUnitX(tt_unit1),GetUnitY(tt_unit1),725,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call AddProjectile(GetTriggerUnit(),u,'h01K',"Func2449",1000,true)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
endfunction

function Func2452 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer id=GetUnitTypeId(LoadUnitHandle(HY,h,0))
  if id==HeroID[52]then
    call SetUnitAnimationByIndex(LoadUnitHandle(HY,h,0),4)
  else
    call SetUnitAnimation(LoadUnitHandle(HY,h,0),"spell")
  endif
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func2453 takes nothing returns nothing
  call SaveUnitHandle(HY,DelayedCallBack(0,function Func2452),0,GetTriggerUnit())
endfunction

function Func2454 takes nothing returns nothing
  call PreloadAbility('A0EF')
  call AddToPurgeList('A3F0','PRGE')
  call AddToPurgeList('A3F1','PRGE')
  call AddToPurgeList('A3F2','PRGE')
  call AddToPurgeList('A3F3','PRGE')
  call AddToPurgeList('A3F4','PRGE')
  call AddToPurgeList('A3F5','PRGE')
  call AddToPurgeList('A3F6','PRGE')
  call AddToPurgeList('A3F7','PRGE')
  call AddToPurgeList('A3F8','PRGE')
  call AddToPurgeList('A3F9','PRGE')
  call AddToPurgeList('A3F:','PRGE')
  call AddToPurgeList('A3F;','PRGE')
  call AddToPurgeList('A3F<','PRGE')
  call AddToPurgeList('A3F=','PRGE')
  call AddToPurgeList('A3F>','PRGE')
  call AddToPurgeList('A3F?','PRGE')
  call AddToPurgeList('B37Y','PRGE')
  call AddToPurgeList('A37U','PRGE')
  call AddToPurgeList('A37V','PRGE')
  call AddToPurgeList('A37W','PRGE')
  call AddToPurgeList('A37X','PRGE')
endfunction

function Func2455 takes unit source returns nothing
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),0)
  call UnitAddAbility2(RCX,'A0GP')
  call SetUnitAbilityLevel(RCX,'A0GP',GetUnitAbilityLevel(source,'A0GP'))
  call IssueImmediateOrderByIdExFunc(RCX,852526)
  set RCX=null
endfunction

function Func2456 takes unit source,real result returns nothing
  local integer ZAE=GetHandleId(source)
  local real ZEE=(LoadReal(HY,(ZAE),278))
  if ZEE+result>210 then
    call SaveReal(HY,(ZAE),278,(0*1.0))
    call Func2455(source)
  else
    call SaveReal(HY,(ZAE),278,((ZEE+result)*1.0))
  endif
endfunction

function Func2457 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit HDE=GetEventDamageSource()
  local real F9I=AngleBetweenUnits(HDE,u)
  local real FOO=GetUnitFacing(u)
  local real a
  local real dmg=GetEventDamage()
  local real IIX
  local real GVI
  if((FOO-F9I)<(-180.00))then
    set a=(FOO-F9I+360)
  else
    if((FOO-F9I)>180.00)then
      set a=(FOO-F9I-360)
    else
      set a=(FOO-F9I)
    endif
  endif
  set GVI=RAbsBJ(a)
  if GVI<=70 then
    set IIX=(GetUnitAbilityLevel(u,'A0M3')*0.08+0.08)*dmg
    call Func2456(u,dmg-IIX)
    call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+IIX)
  elseif GVI<=110 then
    set IIX=(GetUnitAbilityLevel(u,'A0M3')*0.04+0.04)*dmg
    call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+IIX)
  endif
  set u=null
  set HDE=null
endfunction

function Func2458 takes nothing returns boolean
  return IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false and GetEventDamage()>5 and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>1 and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0
endfunction

function Func2459 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func2458))
  call TriggerAddAction(t,function Func2457)
  set t=null
  set boolean013=true
endfunction

function Func2460 takes unit WXE,unit SGE returns nothing
  local integer YGX=GetUnitAbilityLevel(SGE,'A00V')
  call DamageTarget(SGE,WXE,23,(14+2*YGX)+(.15+.15*YGX)*GetHeroStr(SGE,true))
endfunction

function Func2461 takes unit u,unit t,integer QIE,boolean GRI returns nothing
  local real x=GetWidgetX(t)
  local real y=GetWidgetY(t)
  local real d
  local group g=GetAvailableGroup()
  local unit u2
  local real dmg=100+QIE*75
  if GetUnitTypeId(u)=='e00E'then
    set u=LoadUnitHandle(HY,GetHandleId(u),0)
  endif
  if GetUnitAbilityLevel(t,'A3E9')==1 and not GRI and GetUnitAbilityLevel(u,'A04R')==0 then
    call SaveUnitHandle(TempHash,'A3E9',0,t)
    call SaveUnitHandle(TempHash,'A3E9',1,u)
    call SaveInteger(TempHash,'A3E9',0,QIE)
    call ExecuteFunc("Func2463")
  endif
  if IsBlocked(t)==false then
    set g=GetAvailableGroup()
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,x,y,215,Condition(function Func0821))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call DamageTarget(u,u2,1,dmg)
      call GroupRemoveUnit(g,u2)
    endloop
    set d=dmg
    call Func2342(u,u)
    call DestroyEffect(AddSpecialEffect("war3mapImported\\DoubleEdgeTarget.mdx",x,y))
    call DamageTarget(u,u,1,d)
    call KillGroup(g)
  elseif GRI then
    call RemoveLinkenBuff(t)
  endif
endfunction

function Func2462 takes nothing returns nothing
  call Func2461(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A2ON'),false)
endfunction

function Func2463 takes nothing returns nothing
  call LotusOrbFX(LoadUnitHandle(TempHash,'A3E9',0))
  call Func2461(LoadUnitHandle(TempHash,'A3E9',0),LoadUnitHandle(TempHash,'A3E9',1),LoadInteger(TempHash,'A3E9',0),true)
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func2464 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\DoubleEdgeCaster.mdx",GetTriggerUnit(),"hand, right"))
endfunction

function Func2465 takes nothing returns nothing
  local integer ZAE
  if((LoadInteger(HY,(GetHandleId((GetEnumUnit()))),4332))!=1)then
    call AddTimedKeyToAgent(GetEnumUnit(),4332,4.0)
    set ZAE=integer481
    call DamageTarget(unit178,GetEnumUnit(),1,(ZAE)*GetHeroStr(unit177,true))
    call UnitAddAbilityTimedExF(GetEnumUnit(),'A2OL',1,1.8,'B0GF')
  endif
endfunction

function Func2466 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local group g
  if GetTriggerEvalCount(RBX)>=R2I(80)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call SetUnitPathing2(source,true)
    call UnitRemoveAbility(source,'A2O4')
    call UnitRemoveAbility(source,'B0GB')
  else
    set g=GetAvailableGroup()
    set tt_unit1=source
    set unit177=RCX
    set unit178=source
    set integer481=QIE
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),130,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func2465)
    call KillGroup(g)
    call KillTrees(GetUnitX(source),GetUnitY(source),100)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set g=null
  return false
endfunction

function Func2467 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local integer QIE=GetUnitAbilityLevel(unit177,'A2O6')+GetUnitAbilityLevel(unit177,'A384')
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local boolean CTI=GetUnitAbilityLevel(unit177,'A384')>0
  call SetUnitPathing2(u,false)
  call FuckingAssistBuffWrap(unit177,u)
  call  DamageBlockActiveTracking(7.)
  call UnitAddAbility2(u,'A2O4')
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,u)
  if CTI then
    call SetUnitAbilityLevel(u,'A2O4',2)
  endif
  call TriggerAddCondition(t,Condition(function Func2466))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,19,(unit177))
  call SaveInteger(HY,h,5,(QIE))
  set u=null
  set t=null
endfunction

function Func2468 takes nothing returns boolean
  return(AliveNonBuildOrMarker(GetFilterUnit())or GetUnitAbilityLevel(GetFilterUnit(),'Bpsh')==1)and GetUnitAbilityLevel(GetFilterUnit(),'Aloc')==0
endfunction

function Func2469 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local group g=GetAvailableGroup()
  local integer i=1
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set unit177=SKE
  set tt_unit1=SKE
  loop
    if IsPlayerAlly(GetOwningPlayer(SKE),Player(i))then
      call GroupEnumUnitsOfPlayer(g,Player(i),Condition(function Func2468))
      call ForGroup(g,function Func2467)
    endif
    set i=i+1
    if i==6 then
      set i=7
    endif
    exitwhen i>11
  endloop
  call KillGroup(g)
  set t=null
  set SKE=null
  set g=null
  return false
endfunction

function Func2470 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local sound s=CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,10,10,"DefaultEAXON")
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call StartSound(s)
  call KillSoundWhenDone(s)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerAddCondition(t,Condition(function Func2469))
  call SaveUnitHandle(HY,(h),2,(SKE))
  set t=null
  set SKE=null
  set s=null
endfunction

function Func2471 takes nothing returns nothing
  call PreloadAbility('A2O4')
  call AddWrapper("Func4639",0)
  call CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,10,10,"DefaultEAXON")
endfunction

function Func2472 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,26))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH and GetUnitAbilityLevel(SGE,'A3IA')>0 and(LoadBoolean(HY,(GetHandleId(SGE)),80))==false and(GetUnitAbilityLevel(SGE,'A04R')==0 or GetUnitAbilityLevel(SGE,'Bpsh')==1)then
    call AddTimedKeyToAgent(SGE,4409,1)
    call SetUnitPosition(SGE,x,y)
    call AddTimedKeyToAgent(SGE,'gtot',0.2)
  endif
  call UnitRemoveAbility(SGE,'A3IA')
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func2473 takes nothing returns boolean
  return(GetUnitAbilityLevel(GetFilterUnit(),'A0KO')==1 or(IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)or GetUnitAbilityLevel(GetFilterUnit(),'A04R')+GetUnitAbilityLevel(GetFilterUnit(),'Aloc')==0)))and GetUnitAbilityLevel(GetFilterUnit(),'Amov')>0 and IsDead(GetFilterUnit())==false
endfunction

function Func2474 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'A0KO')==1 and IsDead(GetFilterUnit())==false
endfunction

function Func2475 takes unit source,unit RCX,integer ZAE,real result,real ZEE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  if IsUnitOwnedByPlayer(source,GetOwningPlayer(RCX))then
    call TriggerRegisterTimerEvent(t,0.1,false)
  else
    call TriggerRegisterTimerEvent(t,7-ZAE,false)
  endif
  call TriggerRegisterDeathEvent(t,source)
  call TriggerAddCondition(t,Condition(function Func2472))
  call UnitAddAbility2(source,'A3IA')
  call SaveUnitHandle(HY,h,26,(source))
  call SaveUnitHandle(HY,h,2,(RCX))
  call SaveReal(HY,h,6,((result)*1.0))
  call SaveReal(HY,h,7,((ZEE)*1.0))
  set t=null
endfunction

function Func2476 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit GMI=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local real x=GetUnitX(GMI)
  local real y=GetUnitY(GMI)
  if GetTriggerEventId()!=EVENT_GAME_TIMER_EXPIRED then
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  else
    call SetUnitPosition(SGE,x+GetRandomReal(50,100)*Cos(GetRandomReal(0,359)*bj_DEGTORAD),y+GetRandomReal(50,100)*Sin(GetRandomReal(0,359)*bj_DEGTORAD))
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  endif
  set GMI=null
  set SGE=null
  set t=null
  return false
endfunction

function Func2477 takes unit GMI,unit SGE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer UME=7-GetUnitAbilityLevel(GMI,'A0LV')
  call TriggerRegisterTimerEvent(t,UME,false)
  call TriggerRegisterDeathEvent(t,GMI)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func2476))
  call SaveEffectHandle(HY,h,32,AddSpecialEffectTarget("effects\\Test_of_Faith_FX.mdx",SGE,"overhead"))
  call SaveUnitHandle(HY,h,0,GMI)
  call SaveUnitHandle(HY,h,1,SGE)
  set t=null
endfunction

function Func2478 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit GMI=GetTriggerUnit()
  local location l1=GetUnitLoc(GMI)
  local integer QIE=GetUnitAbilityLevel(GMI,'A0LV')
  local real dmg
  local location l2
  local group g
  local unit u
  if(IsSentinel(GetOwningPlayer(GMI)))then
    set l2=GetRectCenter(gg_rct_Hero_Creation_NE)
  else
    set l2=GetRectCenter(gg_rct_Hero_Creation_UD)
  endif
  if(IsUnitAlly(SGE,GetOwningPlayer(GMI))==false)then
    if IsBlocked(GetSpellTargetUnit())==false then
      set dmg=GetRandomInt(50*QIE,100*QIE)
      call TextTagOnUnit(I2S(R2I(dmg)),1,SGE,0.023,255,255,0,216,Func0590(SGE)or PlayerObserver)
      call DamageTarget(GMI,SGE,3,dmg)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",SGE,"chest"))
    endif
  else
    if IsUnitType(SGE,UNIT_TYPE_HERO)then
      if SGE!=GMI then
        if(Func1474(SGE)==false)then
          call Func2475(SGE,GMI,QIE,GetLocationX(l2),GetLocationY(l2))
        endif
      else
        set g=GetAvailableGroup()
        call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GMI),Condition(function Func2473))
        loop
          set u=FirstOfGroup(g)
          exitwhen u==null
          call Func2477(GMI,u)
          call GroupRemoveUnit(g,u)
        endloop
        call KillGroup(g)
      endif
    elseif(IsUnitOwnedByPlayer(SGE,GetOwningPlayer(GMI)))then
      call SetUnitPositionLoc(SGE,l2)
    else
      if(GetOwningPlayer(SGE)==GetOwningPlayer(GMI)or Func1474(SGE)==false)then
        call Func2475(SGE,GMI,QIE,GetLocationX(l2),GetLocationY(l2))
      endif
    endif
  endif
  call RemoveLocation(l1)
  call RemoveLocation(l2)
  set SGE=null
  set GMI=null
  set l1=null
  set l2=null
endfunction

function Func2479 takes nothing returns nothing
  call UnitAddAbility2(GetTriggerUnit(),'A2MC')
  call SetUnitAbilityLevel(GetTriggerUnit(),'A2MC',GetUnitAbilityLevel(GetTriggerUnit(),'A0LV'))
endfunction

function Func2480 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,h,5))
  local unit SGE=LoadUnitHandle(HY,h,0)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>80 or GetUnitAbilityLevel(SGE,'B05H')==0 then
    call UnitRemoveAbility(SGE,LoadInteger(HY,h,1))
    call UnitRemoveAbility(SGE,'B05H')
    call Func0670(SGE,-LoadReal(HY,h,0))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set SGE=null
  set t=null
  return false
endfunction

function Func2481 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=GetSpellTargetUnit()
  local unit GMI=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(GMI,'A0KM')
  local real dmg=0.1+0.05*QIE
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",GMI,"chest"))
  call SaveInteger(HY,h,5,(QIE))
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call SaveInteger(HY,h,0,GetHandleId(SGE))
  call UnitAddAbility2(SGE,'A3QU'-1+QIE)
  call SaveInteger(HY,h,1,'A3QU'-1+QIE)
  call Func0670(SGE,dmg)
  call SaveReal(HY,h,0,dmg)
  call SaveUnitHandle(HY,h,0,SGE)
  call TriggerAddCondition(t,Condition(function Func2480))
  set t=null
  set SGE=null
  set GMI=null
endfunction

function Func2482 takes nothing returns nothing
  call AddToPurgeList('B05H','PRGE')
  call AddToPurgeList('A3QU','PRGE')
  call AddToPurgeList('A3QV','PRGE')
  call AddToPurgeList('A3QW','PRGE')
  call AddToPurgeList('A3QX','PRGE')
  call AddToPurgeList('A3IA','PRGA')
endfunction

function Func2483 takes nothing returns boolean
  return (GetUnitAbilityLevel(GetFilterUnit(),'A0KO')==1 and IsDead(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)
endfunction

function Func2484 takes group g returns unit
  local unit u
  local real GUI=99999.
  set tt_unit1=null
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if LoadReal(HY,GetHandleId(u),'0age')<GUI then
      set tt_unit1=u
      set GUI=LoadReal(HY,GetHandleId(u),'0age')
    endif
    call GroupRemoveUnit(g,u)
  endloop
  set u=null
  return tt_unit1
endfunction

function Func2485 takes unit SGE returns nothing
  local unit GMI=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(GMI,'A28T')+GetUnitAbilityLevel(GMI,'A361')
  local integer Y2E=QIE
  local integer i
  local integer GYI
  local group g=GetAvailableGroup()
  local integer GZI
  local real hp
  if IsUnitType(SGE,UNIT_TYPE_ANCIENT)then
    call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GMI),Condition(function Func2483))
    set GYI=CountUnitsInGroup(g)
    set GZI=Func0464(GetUnitAbilityLevel(GMI,'A0LT'),3)
    if GYI>=GZI then
      call KillUnit(Func2484(g))
    endif
  endif
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GMI),Condition(function Func2474))
  set i=CountUnitsInGroup(g)
  if i>=Y2E then
    call KillUnit(Func2484(g))
  endif
  call KillGroup(g)
  call Func0680(SGE)
  call UnitAddAbility2(SGE,'A0KO')
  if GetUnitState(SGE,UNIT_STATE_MAX_LIFE)<600+100*QIE then
    call Func0798(SGE,R2I(600+100*QIE-GetUnitState(SGE,UNIT_STATE_MAX_LIFE)))
  endif
  call SaveReal(HY,GetHandleId(SGE),'0age',TimerGetElapsed(GlobalTimer))
  call UnitAddAbility2(SGE,'A12G')
  set GMI=null
endfunction

function Func2486 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local unit M_X
  local real result
  local real ZEE
  set M_X=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
  call UnitAddAbility3(M_X,'A069',GetUnitAbilityLevel(source,'A28T'))
  call IssueTargetOrder(M_X,"charm",RCX)
  call Func1406(RCX)
  call SelectSummons(RCX)
  call Func2485(RCX)
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func2487 takes nothing returns nothing
  if Func0630(GetSpellTargetUnit())or(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_ANCIENT)and(GetUnitAbilityLevel(GetTriggerUnit(),'A361')==0 or GetUnitAbilityLevel(GetTriggerUnit(),'A0LT')==0))then
    call Func0658('n0K9')
  endif
endfunction

function Func2488 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsDead(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction

function Func2489 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0LT')
  local group g=GetAvailableGroup()
  local unit u
  local player p=GetOwningPlayer(SKE)
  set bj_groupEnumOwningPlayer=p
  call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
  call GroupAddGroup(group004,g)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    if IsDead(u)==false and IsUnitAlly(u,p)then
      call SetWidgetLife(u,GetWidgetLife(u)+100+100*QIE)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl",u,"origin"))
      if IsUnitType(u,UNIT_TYPE_HERO)then
        call Func1033(p,GetOwningPlayer(u))
      endif
    endif
  endloop
  set SKE=null
  call KillGroup(g)
endfunction

function Func2490 takes nothing returns nothing
  if IsCourier(GetEnumUnit())==false then
    call DamageTarget(unit179,GetEnumUnit(),1,real052)
  endif
endfunction

function Func2491 takes unit source,real result,real ZEE returns nothing
  local real ZWE
  local real ZYE
  local group g=GetAvailableGroup()
  local integer ZAE=GetUnitAbilityLevel(source,'A0Z6')
  local real ICX=40+40*ZAE
  set tt_unit1=source
  set unit179=source
  set real052=ICX
  call GroupEnumUnitsInRange(g,result,ZEE,625,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(g,function Func2490)
  call KillGroup(g)
  set ZWE=result
  set ZYE=ZEE
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",ZWE,ZYE))
  set ZWE=result+200
  set ZYE=ZEE+200
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",ZWE,ZYE))
  set ZWE=result+200
  set ZYE=ZEE-200
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",ZWE,ZYE))
  set ZWE=result-200
  set ZYE=ZEE+200
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",ZWE,ZYE))
  set ZWE=result-200
  set ZYE=ZEE-200
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",ZWE,ZYE))
  call TimedReveal(GetOwningPlayer(source),10,result,ZEE,625)
  set g=null
endfunction

function Func2492 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  local unit G2I=(LoadUnitHandle(HY,(h),45))
  local real tx=(LoadReal(HY,(h),47))
  local real ty=(LoadReal(HY,(h),48))
  local real a=(LoadReal(HY,(h),13))
  local real cx=(LoadReal(HY,(h),189))
  local real cy=(LoadReal(HY,(h),190))
  local real dx=SafeX50(cx+44*Cos(a))
  local real dy=SafeY50(cy+44*Sin(a))
  call SetUnitX(G2I,dx)
  call SetUnitY(G2I,dy)
  call SaveReal(HY,(h),189,((dx)*1.0))
  call SaveReal(HY,(h),190,((dy)*1.0))
  if DistanceBetweenXY(tx,ty,dx,dy)<=45 or LoadInteger(HY,h,11)<GetTriggerEvalCount(t)then
    call KillUnit(G2I)
    set u=(LoadUnitHandle(HY,(h),14))
    call Func2491(u,tx,ty)
    call DestroyEffect(LoadEffectHandle(HY,h,5))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  set G2I=null
  return false
endfunction

function Func2493 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real cx=SafeX50(GetUnitX(u))
  local real cy=SafeY50(GetUnitY(u))
  local real tx=SafeX50(GetSpellTargetX())
  local real ty=SafeY50(GetSpellTargetY())
  local real a=Atan2(ty-cy,tx-cx)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit G2I=CreateUnit(GetOwningPlayer(u),'h03Y',cx,cy,a*bj_RADTODEG)
  local string s=""
  if IsUnitAlly(u,LocalPlayer)then
    set s="effects\\Snipe Target.mdx"
  endif
  call SaveEffectHandle(HY,h,5,AddSpecialEffect(s,tx,ty))
  call SetUnitFacing(G2I,a*bj_RADTODEG)
  call SetUnitPathing(G2I,false)
  call UnitAddAbility2(G2I,'Aloc')
  call ShowUnit(G2I,false)
  call UnitRemoveAbility(G2I,'Aloc')
  call ShowUnit(G2I,true)
  call SaveReal(HY,(h),191,((cx)*1.0))
  call SaveReal(HY,(h),192,((cy)*1.0))
  call SaveReal(HY,(h),189,((cx)*1.0))
  call SaveReal(HY,(h),190,((cy)*1.0))
  call SaveReal(HY,(h),47,((tx)*1.0))
  call SaveReal(HY,(h),48,((ty)*1.0))
  call SaveReal(HY,(h),13,((a)*1.0))
  call SaveInteger(HY,h,11,R2I(DistanceBetweenXY(GetUnitX(G2I),GetUnitY(G2I),tx,ty)/45.+2))
  call SaveUnitHandle(HY,(h),14,(u))
  call SaveUnitHandle(HY,(h),45,(G2I))
  call TriggerRegisterTimerEvent(t,0.025,true)
  call TriggerAddCondition(t,Condition(function Func2492))
  set u=null
  set t=null
  set G2I=null
endfunction

function Func2494 takes real result,real ZEE,real ZWE,real ZYE returns boolean
  return result<=ZEE and result<=ZWE and result<=ZYE
endfunction

function Func2495 takes unit source,real result,real ZEE,real ZWE returns real
  local real ZYE=GetUnitX(source)
  local real ICX=GetUnitY(source)
  local real N1X=DistanceBetweenXY(result-ZWE,ZEE,ZYE,ICX)
  local real N2X=DistanceBetweenXY(result+ZWE,ZEE,ZYE,ICX)
  local real N3X=DistanceBetweenXY(result,ZEE+ZWE,ZYE,ICX)
  local real N4X=DistanceBetweenXY(result,ZEE-ZWE,ZYE,ICX)
  if Func2494(N1X,N2X,N4X,N3X)then
    return 180.0
  elseif Func2494(N2X,N1X,N4X,N3X)then
    return 0.0
  elseif Func2494(N4X,N2X,N1X,N3X)then
    return 270.0
  endif
  return 90.0
endfunction

function Func2496 takes real result,real ZEE,real ZWE,real ZYE,real ICX,real N1X,real N2X,real N3X returns boolean
  return result<=ZEE and result<=ZWE and result<=ZYE and result<=ICX and result<=N1X and result<=N2X and result<=N3X
endfunction

function Func2497 takes unit u,integer h returns unit
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local unit G7I=(LoadUnitHandle(HY,h,1101))
  local unit G8I=(LoadUnitHandle(HY,h,1102))
  local unit G9I=(LoadUnitHandle(HY,h,1103))
  local unit HVI=(LoadUnitHandle(HY,h,1104))
  local unit HEI=(LoadUnitHandle(HY,h,1105))
  local unit HXI=(LoadUnitHandle(HY,h,1106))
  local unit HOI=(LoadUnitHandle(HY,h,1107))
  local unit HRI=(LoadUnitHandle(HY,h,1108))
  local real ZWE=DistanceBetweenXY(x,y,GetUnitX(G7I),GetUnitY(G7I))
  local real ZYE=DistanceBetweenXY(x,y,GetUnitX(G8I),GetUnitY(G8I))
  local real ICX=DistanceBetweenXY(x,y,GetUnitX(G9I),GetUnitY(G9I))
  local real N1X=DistanceBetweenXY(x,y,GetUnitX(HVI),GetUnitY(HVI))
  local real N2X=DistanceBetweenXY(x,y,GetUnitX(HEI),GetUnitY(HEI))
  local real N3X=DistanceBetweenXY(x,y,GetUnitX(HXI),GetUnitY(HXI))
  local real N4X=DistanceBetweenXY(x,y,GetUnitX(HOI),GetUnitY(HOI))
  local real N5X=DistanceBetweenXY(x,y,GetUnitX(HRI),GetUnitY(HRI))
  set tt_unit1=null
  if Func2496(ZWE,ZYE,ICX,N1X,N2X,N3X,N4X,N5X)then
    set tt_unit1=G7I
  elseif Func2496(ZYE,ZWE,ICX,N1X,N2X,N3X,N4X,N5X)then
    set tt_unit1=G8I
  elseif Func2496(ICX,ZYE,ZWE,N1X,N2X,N3X,N4X,N5X)then
    set tt_unit1=G9I
  elseif Func2496(N1X,ZYE,ICX,ZWE,N2X,N3X,N4X,N5X)then
    set tt_unit1=HVI
  elseif Func2496(N2X,ZYE,ICX,N1X,ZWE,N3X,N4X,N5X)then
    set tt_unit1=HEI
  elseif Func2496(N3X,ZYE,ICX,N1X,N2X,ZWE,N4X,N5X)then
    set tt_unit1=HXI
  elseif Func2496(N4X,ZYE,ICX,N1X,N2X,N3X,ZWE,N5X)then
    set tt_unit1=HOI
  elseif Func2496(N5X,ZYE,ICX,N1X,N2X,N3X,N4X,ZWE)then
    set tt_unit1=HRI
  endif
  set u=null
  set G7I=null
  set G8I=null
  set G9I=null
  set HVI=null
  set HEI=null
  set HXI=null
  set HOI=null
  set HRI=null
  return tt_unit1
endfunction

function Func2498 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real a=(LoadReal(HY,h,13))
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  local real ILX=12
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local integer QIE=(LoadInteger(HY,h,5))
  local integer dmg=40+40*QIE
  local integer c=GetTriggerEvalCount(t)
  if c>21 then
    call CurrentSafestLocationWrapper(SGE)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call SaveInteger(HY,(GetHandleId(SGE)),4260,2)
    call DamageTarget(SKE,SGE,1,I2R(dmg))
    call SetUnitState(SGE,UNIT_STATE_MANA,Func0468(GetUnitState(SGE,UNIT_STATE_MANA)-dmg,0))
    call KillTrees(GetUnitX(SGE),GetUnitY(SGE),100)
  else
    if ModuloInteger(c,5)==1 then
      call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",x,y))
    endif
    if(LoadInteger(HY,GetHandleId(SGE),4261)!=1)then
      call SetUnitPosition(SGE,x+ILX*Cos(a*bj_DEGTORAD),y+ILX*Sin(a*bj_DEGTORAD))
    endif
  endif
  set t=null
  set SGE=null
  set SKE=null
  return false
endfunction

function Func2499 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetEnumUnit()
  local real result=real023
  local real ZEE=real024
  local real ZWE=real025
  local real ZYE=Func2495(source,result,ZEE,ZWE)
  local real ICX=200
  local real N1X=ZWE-DistanceBetweenXY(GetUnitX(source),GetUnitY(source),result,ZEE)+ICX/2
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",source,"chest"))
  call SaveInteger(HY,(GetHandleId(source)),4260,1)
  call Func0433(source)
  if N1X>0 then
    call SetUnitX(source,GetUnitX(source)+N1X*Cos(ZYE*bj_DEGTORAD))
    call SetUnitY(source,GetUnitY(source)+N1X*Sin(ZYE*bj_DEGTORAD))
  endif
  call SaveUnitHandle(HY,(ZAE),17,(source))
  call SaveReal(HY,(ZAE),13,((ZYE)*1.0))
  call SaveInteger(HY,(ZAE),5,(integer089))
  call SaveUnitHandle(HY,(ZAE),2,(tt_unit1))
  call TriggerRegisterTimerEvent(RBX,0.04,true)
  call TriggerAddCondition(RBX,Condition(function Func2498))
  set RBX=null
  set source=null
endfunction

function Func2500 takes unit source,integer ZAE returns boolean
  local unit RCX=Func2497(source,ZAE)
  local boolean ZSE=true
  if IsDead(RCX)or(LoadInteger(HY,(GetHandleId(RCX)),156))==1 then
    set ZSE=false
  endif
  call SaveInteger(HY,(GetHandleId(RCX)),156,1)
  call SetUnitVertexColor(RCX,25,25,25,175)
  set RCX=null
  return ZSE
endfunction

function Func2501 takes nothing returns nothing
  if GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)>0 and IsUnitInGroup(GetEnumUnit(),group016)==false and((LoadInteger(HY,GetHandleId(GetEnumUnit()),4260))!=1)and Func2500(GetEnumUnit(),integer482)then
    call SaveInteger(HY,(GetHandleId((GetEnumUnit()))),4260,1)
    call GroupAddUnit(group017,GetEnumUnit())
  endif
endfunction

function Func2502 takes trigger RBX,unit source,real result,real ZEE,real ZWE,integer ZAE returns nothing
  local integer QIE=GetHandleId(RBX)
  local real ZYE=200
  local rect AUX=Rect(result-ZWE,ZEE-ZWE,result+ZWE,ZEE+ZWE)
  local rect HDI=Rect(result-ZWE-ZYE,ZEE-ZWE-ZYE,result+ZWE+ZYE,ZEE+ZWE+ZYE)
  local group g=GetAvailableGroup()
  local group IBI=GetAvailableGroup()
  local group HFI=GetAvailableGroup()
  set tt_unit1=source
  call GroupEnumUnitsInRect(g,AUX,Condition(function Func0821))
  call GroupEnumUnitsInRect(IBI,HDI,Condition(function Func0821))
  set group016=g
  set group017=HFI
  set real023=result
  set real024=ZEE
  set real025=ZWE
  set integer482=QIE
  call ForGroup(IBI,function Func2501)
  set integer089=ZAE
  call ForGroup(HFI,function Func2499)
  call KillGroup(g)
  call KillGroup(IBI)
  call KillGroup(HFI)
  call RemoveRect(AUX)
  call RemoveRect(HDI)
  set g=null
  set IBI=null
  set HFI=null
  set AUX=null
  set HDI=null
endfunction

function Func2503 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  local boolean ZSE=(LoadBoolean(HY,(ZAE),155))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  if ZSE then
    call TimedReveal(whichPlayer,.2,result,ZEE,500)
  endif
  set RBX=null
  set whichPlayer=null
  return false
endfunction

function Func2504 takes unit u returns nothing
  if IsDead(u)==false then
    call PlaySoundAtPos(sound057,GetUnitX(u),GetUnitY(u))
    call DestroyEffect(AddSpecialEffect("buildings\\other\\PowerGenerator\\PowerGenerator.mdl",GetUnitX(u),GetUnitY(u)))
  endif
endfunction

function Func2505 takes integer ZAE,real result,real ZEE,boolean ZSE,player whichPlayer returns nothing
  local unit source=(LoadUnitHandle(HY,(ZAE),1101))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),1102))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),1103))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),1104))
  local unit M1X=(LoadUnitHandle(HY,(ZAE),1105))
  local unit M2X=(LoadUnitHandle(HY,(ZAE),1106))
  local unit M3X=(LoadUnitHandle(HY,(ZAE),1107))
  local unit HKI=(LoadUnitHandle(HY,(ZAE),1108))
  local trigger RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,0.1,false)
  call TriggerAddCondition(RBX,Condition(function Func2503))
  call SaveReal(HY,(GetHandleId(RBX)),6,((result)*1.0))
  call SaveReal(HY,(GetHandleId(RBX)),7,((ZEE)*1.0))
  call SavePlayerHandle(HY,(GetHandleId(RBX)),54,(whichPlayer))
  call SaveBoolean(HY,(GetHandleId(RBX)),155,(ZSE))
  call Func2504(source)
  call RemoveUnit(source)
  call Func2504(RCX)
  call RemoveUnit(RCX)
  call Func2504(M_X)
  call RemoveUnit(M_X)
  call Func2504(M0X)
  call RemoveUnit(M0X)
  call Func2504(M1X)
  call RemoveUnit(M1X)
  call Func2504(M2X)
  call RemoveUnit(M2X)
  call Func2504(M3X)
  call RemoveUnit(M3X)
  call Func2504(HKI)
  call RemoveUnit(HKI)
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  set M2X=null
  set M3X=null
  set HKI=null
  set RBX=null
endfunction

function Func2506 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),19))
  local group g
  call PlaySoundAtPos(sound057,GetUnitX(source),GetUnitY(source))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set g=null
  set source=null
  return false
endfunction

function Func2507 takes unit source,integer ZAE,integer QIE,player whichPlayer returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZBE=GetHandleId(RBX)
  call TriggerRegisterDeathEvent(RBX,source)
  call SaveUnitHandle(HY,(ZBE),19,(source))
  call TriggerAddCondition(RBX,Condition(function Func2506))
  if IsUnitVisibleEx(source,whichPlayer)then
    call SaveBoolean(HY,(ZAE),155,(true))
  endif
  call SaveUnitHandle(HY,(ZAE),(1100+QIE),(source))
  set RBX=null
endfunction

function Func2508 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=(LoadReal(HY,(ZAE),57))
  local integer QIE=GetTriggerEvalCount(RBX)
  if QIE>R2I(result*100)then
    call Func2505(ZAE,(LoadReal(HY,(ZAE),6)),(LoadReal(HY,(ZAE),7)),(LoadBoolean(HY,(ZAE),155)),(LoadPlayerHandle(HY,(ZAE),154)))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call Func2502(RBX,(LoadUnitHandle(HY,(ZAE),14)),(LoadReal(HY,(ZAE),6)),(LoadReal(HY,(ZAE),7)),(LoadReal(HY,(ZAE),138)),(LoadInteger(HY,(ZAE),5)))
  endif
  set RBX=null
  return false
endfunction

function Func2509 takes nothing returns nothing
  call SetUnitX(GetEnumUnit(),GetUnitX(tt_unit1))
  call SetUnitY(GetEnumUnit(),GetUnitY(tt_unit1))
endfunction

function Func2510 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local integer QIE=GetUnitAbilityLevel(SKE,'A0Z5')
  local integer NFX='u00S'
  local integer HTI='h0GC'
  local real x=R2I(GetUnitX(SKE))-ModuloInteger(R2I(GetUnitX(SKE)),64)
  local real y=R2I(GetUnitY(SKE))-ModuloInteger(R2I(GetUnitY(SKE)),64)
  local real nx
  local real ny
  local real offset=128
  local unit HUI
  local real D1E=4+QIE
  local real N2X=5
  local group g
  local rect AUX
  local player p
  local integer WRE=2
  local boolean HWI=QIE==4
  call PlaySoundAtPos(sound056,x,y)
  if IsSentinel(GetOwningPlayer(SKE))then
    set p=Scourges[0]
  else
    set p=Sentinels[0]
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call SaveBoolean(HY,h,155,(false))
  call SetUnitFacing(SKE,0)
  set nx=x+offset+32
  set ny=y
  set HUI=CreateUnit(GetOwningPlayer(SKE),HTI,nx,ny,0)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,1,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  set nx=x+offset
  set ny=y+offset
  set HUI=CreateUnit(GetOwningPlayer(SKE),NFX,nx,ny,0)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,2,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  set nx=x
  set ny=y+offset+32
  set HUI=CreateUnit(GetOwningPlayer(SKE),HTI,nx,ny,90)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,3,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  set nx=x-offset
  set ny=y+offset
  set HUI=CreateUnit(GetOwningPlayer(SKE),NFX,nx,ny,0)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,4,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  set nx=x-offset-32
  set ny=y
  set HUI=CreateUnit(GetOwningPlayer(SKE),HTI,nx,ny,0)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,5,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  set nx=x-offset
  set ny=y-offset
  set HUI=CreateUnit(GetOwningPlayer(SKE),NFX,nx,ny,0)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,6,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  set nx=x
  set ny=y-offset-32
  set HUI=CreateUnit(GetOwningPlayer(SKE),HTI,nx,ny,90)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,7,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  set nx=x+offset
  set ny=y-offset
  set HUI=CreateUnit(GetOwningPlayer(SKE),NFX,nx,ny,0)
  call SetUnitPosition(HUI,nx,ny)
  call Func2507(HUI,h,8,p)
  if HWI then
    call Func0798(HUI,1)
  endif
  call TriggerRegisterTimerEvent(t,0.01,true)
  call TriggerAddCondition(t,Condition(function Func2508))
  call SaveReal(HY,h,57,((D1E)*1.0))
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call SaveReal(HY,h,138,((offset)*1.0))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveInteger(HY,h,5,(QIE))
  call SavePlayerHandle(HY,h,154,(p))
  set offset=offset+110
  set g=GetAvailableGroup()
  set AUX=Rect(x-offset,y-offset,x+offset,y+offset)
  set tt_unit1=SKE
  call GroupEnumUnitsInRect(g,AUX,Condition(function Func0835))
  call ForGroup(g,function Func2509)
  call KillGroup(g)
  set t=null
  set g=null
  set SKE=null
  set HUI=null
  set AUX=null
  set p=null
  return false
endfunction

function Func2511 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterTimerEvent(RBX,0.1,false)
  call TriggerAddCondition(RBX,Condition(function Func2510))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  set RBX=null
  set source=null
endfunction

function Func2512 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  local unit d=(LoadUnitHandle(HY,(h),17))
  local integer HZI=(LoadInteger(HY,(h),18))
  local integer c=GetTriggerEvalCount(t)
  local unit u
  local group g=(LoadGroupHandle(HY,(h),16))
  local group gg
  local real A7X=200
  local unit u2
  local integer QIE=LoadInteger(HY,h,5)
  local real H_I
  local real dmg
  if d==null then
    set u=(LoadUnitHandle(HY,(h),(700+HZI+1-c)))
    call RemoveUnit(u)
  else
    set u=(LoadUnitHandle(HY,(h),(700+c)))
    if TimerGetElapsed(GlobalTimer)-LoadReal(HY,h,10)>0.6 then
      call StunTargetEx(d,0.1,true)
      call SaveReal(HY,h,10,TimerGetElapsed(GlobalTimer))
    endif
    call SetUnitX(SKE,GetUnitX(u))
    call SetUnitY(SKE,GetUnitY(u))
    call RemoveUnit(u)
    if c==HZI then
      set A7X=225
    endif
    set gg=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(gg,GetUnitX(SKE),GetUnitY(SKE),A7X,Condition(function Func0816))
    set H_I=.5+.5*QIE
    set dmg=100.*QIE
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      call GroupRemoveUnit(gg,u2)
      if IsUnitInGroup(u2,g)==false then
        call GroupAddUnit(g,u2)
        call StunTargetEx(u2,H_I,d==u2)
        call DamageTarget(SKE,u2,1,dmg)
      endif
    endloop
    call KillGroup(gg)
  endif
  if c==(HZI)then
    call KillTrees(GetUnitX(SKE),GetUnitY(SKE),100)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set d=null
  set u=null
  set g=null
  set gg=null
  return false
endfunction

function Func2513 takes nothing returns boolean
  return(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func2514 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  local real a=(LoadReal(HY,(h),13))
  local integer F4X=(LoadInteger(HY,(h),12))
  local integer c=GetTriggerEvalCount(t)
  local real x=GetUnitX(SKE)+c*50*Cos(a*bj_DEGTORAD)
  local real y=GetUnitY(SKE)+c*50*Sin(a*bj_DEGTORAD)
  local unit u
  local trigger tt=(LoadTriggerHandle(HY,(h),11))
  local integer h2=GetHandleId(tt)
  local group g=GetAvailableGroup()
  local unit d=null
  local integer H2I='u00V'
  local real A7X=125
  if c==1 then
    set A7X=100
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,A7X,Condition(function Func2513))
  call GroupRemoveUnit(g,SKE)
  set d=GroupPickRandomUnit(g)
  call KillGroup(g)
  if d!=null or c>=F4X-2 then
    set H2I='u00U'
  endif
  set u=CreateUnit(GetOwningPlayer(SKE),H2I,x,y,a)
  call SaveUnitHandle(HY,(h2),(700+c),(u))
  if d!=null or c>F4X then
    call SaveInteger(HY,h2,5,LoadInteger(HY,h,5))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if d!=null and IsUnitAlly(d,GetOwningPlayer(SKE))==false then
      call StunTargetEx(d,0.1,true)
    endif
    call TriggerRegisterTimerEvent(tt,0.5/F4X,true)
    call TriggerAddCondition(tt,Condition(function Func2512))
    call SaveInteger(HY,(h2),18,(c))
    call SaveReal(HY,h2,10,TimerGetElapsed(GlobalTimer))
    call SaveUnitHandle(HY,(h2),17,(d))
    call SaveUnitHandle(HY,(h2),14,(SKE))
    call SaveGroupHandle(HY,(h2),16,(GetAvailableGroup()))
  endif
  set t=null
  set SKE=null
  set u=null
  set tt=null
  set g=null
  set d=null
  return false
endfunction

function Func2515 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real a= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetSpellTargetX(),GetSpellTargetY())
  local integer QIE=GetUnitAbilityLevel(SKE,'A0Z8')
  local integer H3I
  local integer F4X
  local trigger tt=CreateTrigger()
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A1CV')
  endif
  set H3I=1500+500*QIE
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set H3I=H3I+R2I(200.)
  endif
  set F4X=H3I/50
  call SaveUnitHandle(HY,(h),14,(SKE))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveReal(HY,(h),13,a)
  call SaveInteger(HY,(h),12,(F4X))
  call SaveTriggerHandle(HY,(h),11,(tt))
  call TriggerRegisterTimerEvent(t,0.5/F4X,true)
  call TriggerAddCondition(t,Condition(function Func2514))
  set t=null
  set tt=null
  set SKE=null
endfunction

function Func2516 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and IsMagicImmune(GetFilterUnit())==false and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func2517 takes unit source,integer ZAE returns nothing
  local group g=GetAvailableGroup()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit RCX
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,result,ZEE,300,Condition(function Func2516))
  set RCX=GroupPickRandomUnit(g)
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",source,"origin"))
  if RCX!=null then
    call StunTargetEx(RCX,0.1,false)
    call DamageTarget(source,RCX,1,25*ZAE-5)
  endif
  set g=null
  set RCX=null
endfunction

function Func2518 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer c=GetTriggerEvalCount(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local integer QIE=LoadInteger(HY,ZAE,5)
  if c>15 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call Func2517(source,QIE)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func2519 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterTimerEvent(RBX,.7,true)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerAddCondition(RBX,Condition(function Func2518))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call TriggerEvaluate(RBX)
  call SaveInteger(HY,ZAE,5,GetUnitAbilityLevel(source,'A0Z4'))
  set RBX=null
  set source=null
endfunction

function Func2520 takes unit SKE,real x,real y,integer QIE returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local real dmg=0
  if QIE==1 then
    set dmg=105
  elseif QIE==2 then
    set dmg=170
  elseif QIE==3 then
    set dmg=250
  elseif QIE==4 then
    set dmg=310
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,325,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call DamageTarget(SKE,u,1,dmg)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func2521 takes nothing returns nothing
  local unit u=CreateUnit(GetOwningPlayer(GetEnumUnit()),'e00E',GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
  if GetUnitAbilityLevel(tt_unit1,'A03R')>0 then
    call UnitAddAbility2(u,'A10T')
  else
    call UnitAddAbility2(u,'A2S6')
  endif
  if IssueTargetOrder(u,"slow",GetEnumUnit())then
    set boolean035=true
  endif
  set u=null
endfunction

function Func2522 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local integer QIE=(LoadInteger(HY,h,5))
  local integer c=ModuloInteger(GetTriggerEvalCount(t),4)+1
  local real a
  local real d
  local real x
  local real y
  local group g=GetAvailableGroup()
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),800,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  set boolean035=false
  call ForGroup(g,function Func2521)
  call KillGroup(g)
  if c==1 then
    set a=GetRandomReal(0,90)
  elseif c==2 then
    set a=GetRandomReal(90,180)
  elseif c==3 then
    set a=GetRandomReal(180,270)
  else
    set a=GetRandomReal(270,360)
  endif
  set d=GetRandomReal(195,785)
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()=='A03R' or GetSpellAbilityId()=='A0AV')then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call StopSound(sound005,false,true)
  else
    set x=GetUnitX(SKE)+d*Cos(a*bj_DEGTORAD)
    set y=GetUnitY(SKE)+d*Sin(a*bj_DEGTORAD)
    call DestroyEffect(AddSpecialEffect("effects\\SnowyBlizzardTarget.mdx",x,y))
    if boolean035 then
      call Func2520(SKE,x,y,QIE)
    endif
  endif
  set t=null
  set SKE=null
  return false
endfunction

function Func2523 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE
  call PlaySoundAtPos(sound005,GetUnitX(SKE),GetUnitY(SKE))
  if GetSpellAbilityId()=='A03R' then
    set QIE=GetUnitAbilityLevel(SKE,'A03R')
  else
    set QIE=GetUnitAbilityLevel(SKE,'A0AV')+1
  endif
  call TriggerRegisterTimerEvent(t,0.10,true)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func2522))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveInteger(HY,h,5,(QIE))
  set t=null
  set SKE=null
endfunction

function Func2524 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  if GetUnitAbilityLevel(SGE,'A3P6')>0 then
    call DamageTarget(SKE,SGE,1,50)
  else
    call UnitRemoveAbility(SGE,'A362')
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  endif
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func2525 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local timer t=CreateTimer()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A04C')
  if Func2344(SGE)then
    call Func0847(SGE,1.+0.5*QIE,'A3P6','a3P6','A3P7')
  else
    call Func0847(SGE,10.,'A3P6','a3P6','A3P7')
  endif
  call StunTargetEx(SGE,0.1,false)
  call Func1330(SKE,SGE,'A3P6')
  call TimerStart(t,0.5,true,function Func2524)
  call SaveUnitHandle(HY,GetHandleId(t),0,SKE)
  call SaveUnitHandle(HY,GetHandleId(t),1,SGE)
  call DamageTarget(SKE,SGE,1,50)
  set t=null
  set SGE=null
  set SKE=null
endfunction

function Func2526 takes nothing returns nothing
  call AddToPurgeList('B386','PRGE')
  call AddToPurgeList('A3EO','PRGE')
  call AddToPurgeList('A3EP','PRGE')
  call AddToPurgeList('A3EQ','PRGE')
  call AddToPurgeList('A3ER','PRGE')
  call AddToPurgeList('A362','PRGE')
  call AddToPurgeList('B017','PRGE')
  call AddToPurgeList('A3P6','PRGE')
  call AddToPurgeList('a3P6','PRGE')
  call AddToPurgeList('A3P7','PRGE')
  call AddToPurgeList('B09J','PRGE')
endfunction

function Func2527 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local integer QIE=GetUnitAbilityLevel(SKE,'A1E9')
  local group g=GetAvailableGroup()
  local unit u2
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,450,Condition(function Func0821))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(SKE,u2,1,50+50*QIE)
    call UnitAddAbilityTimedExF(u2,'A3EO'-1+QIE,1,4.5,'B386')
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffect("war3mapImported\\IceNova.mdx",x,y))
  set SKE=null
endfunction

function Func2528 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(source,'AHab')
  if IsDead(source)==false and GetUnitAbilityLevel(source,'A36D')==0 then
    if QIE==4 then
      set QIE=9
    endif
    call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MANA)+(0.5+0.5*QIE)*0.25)
  endif
  set source=null
  set RBX=null
  return false
endfunction

function Func2529 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterTimerEvent(RBX,0.25,true)
  call TriggerAddCondition(RBX,Condition(function Func2528))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set RBX=null
  set source=null
endfunction

function Func2530 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call SetUnitAnimationByIndex(source,8)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func2531 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SetUnitAnimationByIndex(source,7)
  call TriggerRegisterTimerEvent(RBX,2.5,false)
  call TriggerAddCondition(RBX,Condition(function Func2530))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set RBX=null
  set source=null
endfunction

function Func2532 takes nothing returns boolean
  if GetUnitTypeId(GetTriggerUnit())=='N0M0' then
    call Func2531()
  endif
  return false
endfunction

function Func2533 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
  call DamageTarget(unit180,GetEnumUnit(),1,real053)
endfunction

function Func2534 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func2535 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local trigger R4I=(LoadTriggerHandle(HY,(ZAE),9))
  local integer QIE=GetHandleId(R4I)
  local unit source=(LoadUnitHandle(HY,(ZAE),8))
  local group g
  local integer ZBE=(LoadInteger(HY,(ZAE),5))
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call ShowUnit(source,false)
    call KillUnit(source)
    call FlushChildHashtable(HY,(QIE))
    call CleanTrigger(R4I)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(source))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetTriggerUnit(),'A04R')==0 then
    set g=GetAvailableGroup()
    set tt_unit1=source
    set unit180=source
    set real053=100+40*ZBE
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),285,Condition(function Func2534))
    call ForGroup(g,function Func2533)
    call KillGroup(g)
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(source),GetUnitY(source)))
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(source),GetUnitY(source)))
    call ShowUnit(source,false)
    call KillUnit(source)
    call FlushChildHashtable(HY,(QIE))
    call CleanTrigger(R4I)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set R4I=null
  set RBX=null
  set source=null
  set g=null
  return false
endfunction

function Func2536 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local trigger R4I
  local integer QIE
  local unit source
  local integer ZBE
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local real ZWE
  local integer ZCE=GetTriggerEvalCount(RBX)
  if ZCE==1 then
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),3))
  elseif ZCE==2 then
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),4))
    set R4I=CreateTrigger()
    set QIE=GetHandleId(R4I)
    set ZBE=(LoadInteger(HY,(ZAE),5))
    set ZWE=(LoadReal(HY,(ZAE),1))
    set source=CreateUnit(GetOwningPlayer((LoadUnitHandle(HY,(ZAE),2))),'h07F',result,ZEE,ZWE)
    call SetUnitVertexColor(source,255,255,255,100)
    call UnitApplyTimedLife(source,'BTLF',12)
    call SaveUnitHandle(HY,(ZAE),8,(source))
    call SaveUnitHandle(HY,(QIE),8,(source))
    call SaveTriggerHandle(HY,(QIE),9,(RBX))
    call SaveInteger(HY,(QIE),5,(ZBE))
    call TriggerRegisterUnitInRange(R4I,source,235,Condition(function ReturnTrue))
    call TriggerRegisterUnitEvent(R4I,source,EVENT_UNIT_DEATH)
    call TriggerAddCondition(R4I,Condition(function Func2535))
    call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",source,"origin"))
  elseif ZCE>2 then
    set source=(LoadUnitHandle(HY,(ZAE),8))
    call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",source,"origin"))
  endif
  set RBX=null
  set R4I=null
  set source=null
  return false
endfunction

function Func2537 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  call TriggerRegisterTimerEvent(RBX,0.5,true)
  call TriggerAddCondition(RBX,Condition(function Func2536))
  call SaveReal(HY,(ZAE),6,((result)*1.0))
  call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
  call SaveInteger(HY,(ZAE),5,(GetUnitAbilityLevel(source,'A14P')))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveReal(HY,(ZAE),1,((GetUnitFacing(source))*1.0))
  call SaveEffectHandle(HY,(ZAE),3,(AddSpecialEffect("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",result,ZEE)))
  call SaveEffectHandle(HY,(ZAE),4,(AddSpecialEffect("effects\\Static_Remnant_FX.mdx",result,ZEE)))
  set source=null
  set RBX=null
endfunction

function Func2538 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetEnumUnit(),'A3T7',1,.7,'B08B')
  call DamageTarget(unit181,GetEnumUnit(),1,real054)
endfunction

function Func2539 takes unit JFI,unit SGE returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=JFI
  set unit181=JFI
  set real054=GetUnitAbilityLevel(JFI,'A0QW')*20+20
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),325,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(g,function Func2538)
  call KillGroup(g)
  call UnitRemoveAbility(JFI,'A3JL')
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(SGE),GetUnitY(SGE)))
endfunction

function Func2540 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A3JL')==1 and GetUnitAbilityLevel(CastedUnit,'A36D')==0 then
    call Func2539(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func2541 takes nothing returns boolean
  if(GetSpellAbilityId()=='A14O' or GetSpellAbilityId()=='A14P' or GetSpellAbilityId()=='A14R')and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0 and GetUnitAbilityLevel(GetTriggerUnit(),'A3JL')==0 then
    call UnitAddAbility2(GetTriggerUnit(),'A3JL')
  endif
  return false
endfunction

function Func2542 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func2541))
  set source=null
  set RBX=null
endfunction

function Func2543 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local real result=(LoadReal(HY,(ZAE),13))
  local real ZEE=GetUnitX(source)-5*Cos(result)
  local real ZWE=GetUnitY(source)-5*Sin(result)
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local real ZYE=(LoadReal(HY,(ZAE),6))
  local real ICX=(LoadReal(HY,(ZAE),7))
  if((ZYE-ZEE)*(ZYE-ZEE))+((ICX-ZWE)*(ICX-ZWE))<100 then
    set ZEE=ZYE
    set ZWE=ICX
  endif
  call SetUnitX(source,ZEE)
  call SetUnitY(source,ZWE)
  if GetTriggerEvalCount(RBX)==(10+10*QIE)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func2544 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local unit M_X=CreateUnit(GetOwningPlayer(source),'u00X',GetUnitX(source),GetUnitY(source),GetUnitFacing(source))
  local integer ZAE=GetUnitAbilityLevel(source,'A14R')
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  if GetUnitTypeId(source)=='e00E' then
    set source=LoadUnitHandle(HY,GetHandleId(source),0)
  endif
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerAddCondition(RBX,Condition(function Func2543))
  call SaveUnitHandle(HY,(QIE),17,(RCX))
  call SaveReal(HY,(QIE),13,((Atan2(GetUnitY(RCX)-GetUnitY(source),GetUnitX(RCX)-GetUnitX(source)))*1.0))
  call SaveInteger(HY,(QIE),5,(ZAE))
  call SaveReal(HY,(QIE),6,((GetUnitX(source))*1.0))
  call SaveReal(HY,(QIE),7,((GetUnitY(source))*1.0))
  call UnitAddAbility2(M_X,'A14Q')
  call SetUnitAbilityLevel(M_X,'A14Q',ZAE)
  call IssueTargetOrder(M_X,"magicleash",RCX)
  call UnitApplyTimedLife(M_X,'BTLF',0.5+0.5*ZAE)
  set M_X=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),GetUnitFacing(source))
  call UnitAddAbility2(M_X,'A14S')
  call IssueTargetOrder(M_X,"slow",source)
  set source=null
  set RCX=null
  set M_X=null
  set RBX=null
endfunction

function Func2545 takes nothing returns nothing
  if GetSpellTargetUnit()!=Roshan then
    call Func2544()
  endif
endfunction

function Func2546 takes nothing returns nothing
  if(LoadBoolean(HY,(integer483),(GetHandleId(GetEnumUnit()))))==false then
    call SaveBoolean(HY,(integer483),(GetHandleId(GetEnumUnit())),(true))
    if IsHeroUnitId(GetUnitTypeId(GetEnumUnit()))then
      call TextTagOnUnit(I2S(R2I(real055*(integer484*4+4)/100)),1.5,GetEnumUnit(),0.025,50,50,225,255,IsNeutralsOrObserversOrAllies(GetOwningPlayer(unit182)))
    endif
    call DamageTarget(unit182,GetEnumUnit(),1,real055*(integer484*4+4)/100)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetEnumUnit(),"origin"))
  endif
endfunction

function Func2547 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,(h),5))
  local unit JPI=(LoadUnitHandle(HY,(h),19))
  local unit u=(LoadUnitHandle(HY,(h),2))
  local unit JQI=(LoadUnitHandle(HY,(h),195))
  local integer ZBE=(LoadInteger(HY,(h),194))
  local real result=(LoadReal(HY,(h),6))
  local real ZEE=(LoadReal(HY,(h),7))
  local real ZWE=GetUnitX(u)
  local real ZYE=GetUnitY(u)
  local real ICX=Atan2(ZEE-ZYE,result-ZWE)
  local real FGE=LoadReal(HY,h,0)
  local real N1X=ZWE+(FGE)*Cos(ICX)
  local real N2X=ZYE+(FGE)*Sin(ICX)
  local lightning JSI=(LoadLightningHandle(HY,(h),196))
  local real N3X=(LoadReal(HY,(h),197))
  local real N4X=(LoadReal(HY,(h),198))
  local real N5X=GetUnitState(u,UNIT_STATE_MANA)
  local real N6X=(FGE)*(12+0.007*GetUnitState(u,UNIT_STATE_MAX_MANA))/100
  local group g=GetAvailableGroup()
  local real JTI=(LoadReal(HY,(h),199))
  set JTI=JTI+FGE
  call SaveReal(HY,(h),199,((JTI)*1.0))
  if GetTriggerEvalCount(t)>25 then
    set N3X=N3X+(FGE)*Cos(ICX)
    set N4X=N4X+(FGE)*Sin(ICX)
    call SaveReal(HY,(h),197,((N3X)*1.0))
    call SaveReal(HY,(h),198,((N4X)*1.0))
  endif
  if boolean147==false then
    call SetUnitState(u,UNIT_STATE_MANA,RMaxBJ(N5X-N6X,0))
  endif
  call MoveLightning(JSI,true,N3X,N4X,N1X,N2X)
  call SetUnitX(u,N1X)
  call SetUnitY(u,N2X)
  if Func0789(u)then
    call Func0788(u)
  endif
  call SetUnitPosition(JPI,N1X,N2X)
  call SetUnitPosition(JQI,N1X,N2X)
  set tt_unit1=u
  set unit182=u
  set integer483=h
  set integer484=QIE
  set real055=JTI
  call GroupEnumUnitsInRange(g,N1X,N2X,75+75*QIE,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(g,function Func2546)
  call KillGroup(g)
  set ZBE=ZBE-1
  call SaveInteger(HY,(h),194,(ZBE))
  call SetUnitVertexColor(u,255,255,255,0)
  if ZBE==0 or GetUnitState(u,UNIT_STATE_MANA)<1 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call DestroyLightning(JSI)
    call KillTrees(N1X,N2X,75)
    call DestroyEffect(LoadEffectHandle(HY,(h),32))
    call RemoveUnit(JPI)
    call RemoveUnit(JQI)
    call SetUnitVertexColor(u,255,255,255,255)
    call SetUnitPathing2(u,true)
    call SetUnitInvulnerable(u,false)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call RemoveSavedBoolean(HY,GetHandleId(u),'a14O')
  else
    call KillTrees(N1X,N2X,75)
  endif
  set t=null
  set JPI=null
  set u=null
  set JSI=null
  set g=null
  set JQI=null
  return false
endfunction

function Func2548 takes nothing returns nothing
  local timer tt=GetExpiredTimer()
  local integer ht=GetHandleId(tt)
  local unit u=LoadUnitHandle(HY,ht,0)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local unit JWI
  local unit JQI
  local real tx=LoadReal(HY,ht,0)
  local real ty=LoadReal(HY,ht,1)
  local trigger t
  local integer h
  local lightning JYI
  local integer QIE=GetUnitAbilityLevel(u,'A14O')
  local real JZI=GetUnitState(u,UNIT_STATE_MANA)
  local real NDI=30+0.08*GetUnitState(u,UNIT_STATE_MAX_MANA)
  local real ILX
  call DestroyTimer(tt)
  call FlushChildHashtable(HY,ht)
  set tt=null
  if IsDead(u)or IsUnitSilenced(u)or IsUnitDisabledSomehow(u)then
    set u=null
    return
  endif
  if boolean147==false then
    call SetUnitState(u,UNIT_STATE_MANA,RMaxBJ(JZI-NDI,0))
  endif
  if GetUnitState(u,UNIT_STATE_MANA)>10 then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set JWI=CreateUnit(GetOwningPlayer(u),'o010',x,y,0)
    set JQI=CreateUnit(GetOwningPlayer(u),'H07G',x,y,0)
    set JYI=AddLightning("FORK",true,x,y,x,y)
    set ILX=DistanceBetweenXY(tx,ty,x,y)
    if ILX<25+25*QIE then
      call SaveReal(HY,h,0,ILX)
    else
      call SaveReal(HY,h,0,25+25*QIE)
    endif
    call SetUnitVertexColor(u,255,255,255,0)
    call SetUnitVertexColor(JQI,255,255,255,0)
    call SetUnitPathing2(u,false)
    call SetUnitPathing(JWI,false)
    call SetUnitInvulnerable(u,true)
    call SaveUnitHandle(HY,h,19,(JWI))
    call SaveUnitHandle(HY,h,2,(u))
    call SaveUnitHandle(HY,h,195,(JQI))
    call SaveLightningHandle(HY,h,196,(JYI))
    call SaveInteger(HY,h,5,(QIE))
    call SaveReal(HY,h,6,((tx)*1.0))
    call SaveReal(HY,h,7,((ty)*1.0))
    call SaveReal(HY,h,197,((x)*1.0))
    call SaveReal(HY,h,198,((y)*1.0))
    call SaveReal(HY,h,199,(0*1.0))
    call SaveInteger(HY,h,194,(IMaxIF(R2I(SquareRoot((tx-x)*(tx-x)+(ty-y)*(ty-y))/(25+25*QIE)),1)))
    call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",JQI,"origin")))
    call TriggerRegisterTimerEvent(t,0.04,true)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func2547))
    call SaveBoolean(HY,GetHandleId(u),'a14O',true)
    call Func0770(u,false,0,0)
  endif
  set u=null
  set JWI=null
  set JQI=null
  set t=null
  set JYI=null
endfunction

function Func2549 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func2548)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveReal(HY,h,0,GetSpellTargetX())
  call SaveReal(HY,h,1,GetSpellTargetY())
endfunction

function Func2550 takes unit u returns real
  return 30+0.08*GetUnitState(u,UNIT_STATE_MAX_MANA)
endfunction

function Func2551 takes nothing returns nothing
  local item it
  local real x
  local real y
  local unit u=GetTriggerUnit()
  if GetUnitState(u,UNIT_STATE_MANA)<Func2550(u)then
    call Func0658('n0G8')
  else
    set x=GetSpellTargetX()
    set y=GetSpellTargetY()
    set it=CreateItem('I000',x,y)
    set x=GetItemX(it)
    set y=GetItemY(it)
    call RemoveItem(it)
    if x!=x and y!=y then
      call Func0656(u)
      call IssuePointOrderById(u,852600,x,y)
    endif
    set it=null
  endif
  set u=null
endfunction

function Func2552 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit u=LoadUnitHandle(HY,h,0)
  local integer a=LoadInteger(HY,h,0)
  local real mp
  if u!=null then
    set mp=Func2550(u)
    if GetUnitState(u,UNIT_STATE_MANA)<mp then
      if LoadBoolean(HY,GetHandleId(u),'A14O')==false then
        call SaveBoolean(HY,GetHandleId(u),'A14O',true)
        if a==0 then
          set a=GetUnitAbility(u,'A14O')
          if a>0 then
            call SaveInteger(HY,h,0,a)
          endif
        endif
        if a>0 then
          call SetAbilityDisabled(a,GetAbilityDisabledCount(a)+1)
        endif
      endif
    else
      if LoadBoolean(HY,GetHandleId(u),'A14O')then
        call RemoveSavedBoolean(HY,GetHandleId(u),'A14O')
        if a==0 then
          set a=GetUnitAbility(u,'A14O')
          if a>0 then
            call SaveInteger(HY,h,0,a)
          endif
        endif
        if a>0 then
          call SetAbilityDisabled(a,GetAbilityDisabledCount(a)-1)
        endif
      endif
    endif
  endif
  set u=null
endfunction

function Func2553 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.05,true,function Func2552)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  set t=null
endfunction

function Func2554 takes unit u returns nothing
  local integer i=GetUnitAbilityLevel(u,'A2AI')
  if GetUnitTypeId(u)!='Hlgr' then
    call UnitAddAbility2(u,'A3RQ')
  else
    call UnitRemoveAbility(u,'A3RQ')
  endif
  call SetUnitAbilityLevel(u,'A0AR',i)
  call SetUnitAbilityLevel(u,'A0Ar',i)
endfunction

function Func2555 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  if GetUnitAbilityLevel(u,'A2AI')==1 then
    call UnitAddAbility2(u,'A0AR')
  endif
  call Func2554(u)
  set u=null
endfunction

function Func2556 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(u,GetSpellAbilityId())
  local integer id=GetUnitTypeId(u)
  if id=='H00G' or id=='H00F' or id=='H00E' then
    call SetUnitAnimation(u,"stand")
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"head"))
  elseif id=='Hlgr' then
    call SetUnitAnimation(u,"stand defend")
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"origin"))
  endif
  call StunTargetEx(SGE,0.25*QIE+2.25,false)
  call DamageTarget(u,SGE,1,25*QIE)
  set u=null
  set SGE=null
endfunction

function Func2557 takes unit  source,unit  target returns nothing
  local real dmg
  local integer  lvl=GetUnitAbilityLevel( source,'A388')
  if  lvl>0 then
    set dmg=90
    if  lvl==4 then
      set dmg=300
    elseif  lvl==3 then
      set dmg=240
    elseif  lvl==2 then
      set dmg=170
    endif
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer( source))], target,1,dmg)
    call UnitAddAbilityTimedExF( target,'A3OW',1,11,'B387')
  endif
endfunction

function  BreatheFire_SpellEffect takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call DummyDamageTracking(2)
  call Func0375(d,'A388',GetUnitAbilityLevel(u,GetSpellAbilityId()),GetSpellTargetX(),GetSpellTargetY(),false)
  set u=null
  set d=null
endfunction

function Func2559 takes nothing returns nothing
  call PreloadAbility('A0AR')
  call HideAbility('A389')
  call AddToPurgeList('A389','PRGE')
  call AddToPurgeList('B387','PRGE')
  call AddWrapper("Func4611",1)
  call AddToPurgeList('A3IG','PRGE')
  call AddToPurgeList('B3IG','PRGE')
endfunction

function Func2560 takes nothing returns nothing
  call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),'R006',GetLearnedSkillLevel())
endfunction

function Func2561 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local real result=(LoadReal(HY,(GetHandleId(RCX)),805))
  local real dmg=20
  if GetUnitAbilityLevel(RCX,'A3IG')>0 then
    call DamageTarget(source,RCX,1,20)
  endif
  if(TimerGetElapsed(GlobalTimer))>=result or GetUnitAbilityLevel(RCX,'A3IG')==0 then
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),0))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func2562 takes unit WXE,unit SGE returns nothing
  local trigger t
  local integer h
  local real YOR=(LoadReal(HY,(GetHandleId(SGE)),805))
  if YOR<TimerGetElapsed(GlobalTimer)then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2561))
    call SaveUnitHandle(HY,h,2,(WXE))
    call SaveUnitHandle(HY,h,17,(SGE))
    call SaveEffectHandle(HY,h,0,AddSpecialEffectTarget("Abilities\\Weapons\\PoisonSting\\PoisonStingTarget.mdl",SGE,"origin"))
  endif
  call UnitAddAbilityTimedExF(SGE,'A3IG',1,5,'B3IG')
  call SaveReal(HY,(GetHandleId(SGE)),805,TimerGetElapsed(GlobalTimer)+5.)
  set t=null
endfunction

function Func2563 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call Func2554(source)
  call CleanTrigger(RBX)
  call FlushChildHashtable(HY,(ZAE))
  set RBX=null
  set source=null
  return false
endfunction

function Func2564 takes nothing returns nothing
  if GetUnitAbilityLevel(tt_unit1,'A0Ar')>0 then
    call Func2554(tt_unit1)
  endif
endfunction

function Func2565 takes nothing returns nothing
  call Func2554(LoadUnitHandle(HY,GetHandleId(GetExpiredTimer()),0))
  call DelayedCallBackClean()
endfunction

function Func2566 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,DelayedCallBack(0.01,function Func2565),0,u)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func2563))
  call SaveUnitHandle(HY,h,2,(u))
  if GetUnitTypeId(u)=='E02X'then
    call SetUnitVertexColor(u,255,255,255,255)
  endif
  set u=null
  set t=null
endfunction

function Func2567 takes nothing returns boolean
  return GetUnitAbilityLevel(GetTriggerUnit(),'A0DJ')>0 and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0 and(GetSpellAbilityId()=='A0SK' or GetSpellAbilityId()=='A0DL' or GetSpellAbilityId()=='A0DH' or GetSpellAbilityId()=='A1OB')
endfunction

function Func2568 takes nothing returns nothing
  set bj_lastCreatedUnit=CreateUnit(GetTriggerPlayer(),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
  call UnitAddAbility(bj_lastCreatedUnit,'A0DI')
  call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0DI',GetUnitAbilityLevel(GetTriggerUnit(),'A0DJ'))
  call IssueImmediateOrderByIdExFunc(bj_lastCreatedUnit,852127)
  set bj_lastCreatedUnit=null
endfunction

function Func2569 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func2567))
  call TriggerAddAction(t,function Func2568)
  set t=null
  call PreloadAbility('A0DM')
  call AddToPurgeList('Broa','PRGA')
  call AddToPurgeList('A3R0','PRGA')
  call AddToPurgeList('A3R1','PRGA')
  call AddToPurgeList('A3R2','PRGA')
  call AddToPurgeList('A3R3','PRGA')
  call PreloadAbility('A0SJ')
  call AddWrapper("Func4608",1)
endfunction

function Func2570 takes unit HDE,unit SGE,integer QIE,real dmg returns nothing
  local unit d
  call DamageTarget(HDE,SGE,1,dmg)
  if IsDead(SGE)==false then
    set d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
    call UnitAddAbility(d,'A0SJ')
    call SetUnitAbilityLevel(d,'A0SJ',QIE)
    call IssueTargetOrderByIdFuckingEx(d,852095,SGE,false)
    set d=null
  endif
endfunction

function Func2571 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer i=1
  local real cx=GetUnitX(u)
  local real cy=GetUnitY(u)
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real x
  local real y
  local integer QIE=GetUnitAbilityLevel(u,'A0SK')
  local real a=bj_DEGTORAD* AngleBetweenXY(cx,cy,tx,ty)
  local group g=GetAvailableGroup()
  local group gg=GetAvailableGroup()
  local real KEO=60*Cos(a)
  local real KXO=60*Sin(a)
  local integer XXO=24
  local real dmg=QIE*50+60
  local unit u2
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    set XXO=XXO+3
  endif
  loop
    set x=(cx+i*KEO)
    set y=(cy+i*KXO)
    set tt_unit1=u
    call GroupEnumUnitsInRange(gg,x,y,250,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call GroupAddGroup(gg,g)
    call SetDestructableLifespan(CreateDestructable('B000',x,y,GetRandomReal(0,360),0.5,GetRandomInt(0,2)),8)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",x,y))
    set i=i+1
    exitwhen i>XXO
  endloop
  call KillGroup(gg)
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call Func2570(u,u2,QIE,dmg)
  endloop
  call KillGroup(g)
  set u=null
endfunction

function Func2572 takes nothing returns nothing
  call UnitShareVision(GetEnumUnit(),GetOwningPlayer(unit005),false)
endfunction

function Func2573 takes nothing returns nothing
  call UnitShareVision(GetEnumUnit(),GetOwningPlayer(unit005),true)
endfunction

function Func2574 takes nothing returns nothing
  local real x=GetUnitX(GetEnumUnit())
  local real y=GetUnitY(GetEnumUnit())
  local integer WVE=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
  call SetUnitX(units017[WVE],x)
  call SetUnitY(units017[WVE],y)
  call IssueImmediateOrderByIdExFunc(units017[WVE],852526)
endfunction

function Func2575 takes nothing returns nothing
  local real x=GetUnitX(GetEnumUnit())
  local real y=GetUnitY(GetEnumUnit())
  local integer WVE=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
  if IsHeroUnitId(GetUnitTypeId(GetEnumUnit()))then
    call SetUnitX(units017[WVE],x)
    call SetUnitY(units017[WVE],y)
    call IssueImmediateOrderByIdExFunc(units017[WVE],852526)
  endif
endfunction

function Func2576 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func2577 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local group g=GetAvailableGroup()
  local integer WVE=GetPlayerId(GetOwningPlayer(SKE))
  local integer QIE=GetUnitAbilityLevel(SKE,'A0DH')+GetUnitAbilityLevel(SKE,'A1OB')
  call GroupEnumUnitsInRange(g,x,y,625,Condition(function Func2576))
  set unit005=SKE
  call ForGroup(g,function Func2573)
  set units017[WVE]=CreateUnit(GetOwningPlayer(SKE),'e00E',x,y,0)
  call UnitAddAbility(units017[WVE],'A3L7')
  call SetUnitAbilityLevel(units017[WVE],'A3L7',QIE)
  call IssueImmediateOrderByIdExFunc(units017[WVE],852526)
  call UnitRemoveAbility(units017[WVE],'A3L7')
  call SetUnitScale(units017[WVE],0.25,0.25,0.25)
  call UnitAddAbility3(units017[WVE],'A0DM',QIE)
  if GetUnitAbilityLevel(SKE,'A1OB')>0 then
    call ForGroup(g,function Func2575)
  endif
  call ForGroup(g,function Func2574)
  call ForGroup(g,function Func2572)
  call KillGroup(g)
  set SKE=null
  set g=null
endfunction

function Func2578 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetTriggerUnit(),'A3R0'-1+GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),1,14.,'Broa')
endfunction

function Func2579 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
    return GetUnitAbilityLevel(GetSpellTargetUnit(),'A0DW')>0 and GetUnitAbilityLevel(GetSpellTargetUnit(),'A36D')==0
  else
    return GetUnitAbilityLevel(GetTriggerUnit(),'A0DW')>0 and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0
  endif
  return false
endfunction

function Func2580 takes nothing returns nothing
  local unit LBO
  local unit LCO
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
    set LBO=GetSpellTargetUnit()
    set LCO=GetTriggerUnit()
  else
    set LBO=GetTriggerUnit()
    set LCO=GetAttacker()
  endif
  if IsUnitEnemy(LCO,GetOwningPlayer(LBO))and IsUnitType(LCO,UNIT_TYPE_STRUCTURE)==false and IsMagicImmune(LCO)==false then
    call UnitAddAbilityTimedExF(LCO,'A3EK'-1+GetUnitAbilityLevel(LBO,'A0DW'),1,4.,'B38B')
    call Func1032(LBO,LCO)
  endif
  set LBO=null
  set LCO=null
endfunction

function Func2581 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func2579))
  call TriggerAddAction(RBX,function Func2580)
  call AddToPurgeList('B38B','PRGE')
  call AddToPurgeList('A3EK','PRGE')
  call AddToPurgeList('A3EL','PRGE')
  call AddToPurgeList('A3EM','PRGE')
  call AddToPurgeList('A3EN','PRGE')
  call AddToPurgeList('Bslo','PRGE')
  call AddWrapper("Func4614",3)
  set RBX=null
endfunction

function Func2582 takes nothing returns boolean
  return(IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and GetWidgetLife(GetFilterUnit())!=GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE)
endfunction

function Func2583 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local integer c=(LoadInteger(HY,(h),28))
  local group g
  local unit u
  if c>10 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call SaveInteger(HY,(h),28,(c+1))
    set tt_unit1=SKE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),300,Condition(function Func2582))
    set u=GroupPickRandomUnit(g)
    call KillGroup(g)
    if u!=null then
      call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+10)
      call FuckingAssistBuffWrap(SKE,u)
      set u=null
    endif
  endif
  set t=null
  set SKE=null
  return false
endfunction

function Func2584 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call AddUnitAnimationProperties(source,"alternate",false)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func2585 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer i=1
  local trigger t
  local integer h
  loop
    exitwhen i>(2+2*GetUnitAbilityLevel(SKE,'A01B'))
    set t=CreateTrigger()
    call SaveUnitHandle(HY,(GetHandleId(t)),2,(SKE))
    call SaveInteger(HY,(GetHandleId(t)),28,0)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2583))
    set i=i+1
  endloop
  if GetUnitTypeId(SKE)=='E02X' then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerAddCondition(t,Condition(function Func2584))
    call SaveUnitHandle(HY,(h),2,(SKE))
    set t=null
  endif
  set t=null
  set SKE=null
endfunction

function Func2586 takes unit WXE,unit SGE returns nothing
  local real ILX=RMinIF(DistanceBetweenXY(GetUnitX(SGE),GetUnitY(SGE),GetUnitX(WXE),GetUnitY(WXE)),1750)
  local integer QIE=GetUnitAbilityLevel(WXE,'A0DY')+GetUnitAbilityLevel(WXE,'A1WB')
  local real d=(.1+.04*QIE)*ILX
  call UnitRemoveAbility(SGE,'B03U')
  call Func2340(WXE,SGE,GetEventDamage())
  call TextTagOnUnit("+"+I2S(R2I(d)),1,SGE,.023,3,216,216,216,Func0590(SGE)or PlayerObserver)
  call DamageTarget(WXE,SGE,7,d)
endfunction

function Func2587 takes unit source returns boolean
  return IsUnitType(source,UNIT_TYPE_HERO)==false and IsUnitType(source,UNIT_TYPE_ANCIENT)==false
endfunction

function Func2588 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call UnitRemoveAbility(LoadUnitHandle(HY,h,17),'Bslo')
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func2589 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetIssuedOrderId()==852482 then
    call UnitRemoveAbility(u,'Aphx')
    call UnitApplyTimedLife(u,'BTLF',80)
  else
    call SetUnitState(u,UNIT_STATE_LIFE,LoadReal(HY,h,0))
    call SetUnitState(u,UNIT_STATE_MANA,LoadReal(HY,h,1))
    call DestroyTrigger(t)
    call FlushChildHashtable(HY,h)
  endif
  set u=null
  set t=null
endfunction

function Func2590 takes unit u returns nothing
  local trigger t
  local integer h
  local integer D1E
  local real hp
  local real mp
  if GetUnitAbilityLevel(u,'BTLF')==1 then
    set hp=GetUnitState(u,UNIT_STATE_LIFE)
    set mp=GetUnitState(u,UNIT_STATE_MANA)
    call UnitAddAbility2(u,'Aphx')
    set t=CreateTrigger()
    call SaveReal(HY,GetHandleId(t),0,hp)
    call SaveReal(HY,GetHandleId(t),1,mp)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
    call TriggerRegisterTimerEvent(t,0.01,false)
    call SaveUnitHandle(HY,GetHandleId(t),0,u)
    call TriggerAddCondition(t,Condition(function Func2589))
    call UnitRemoveAbility(u,'BTLF')
    set t=null
  endif
endfunction

function Func2591 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.01,false,function Func2588)
  call SaveUnitHandle(HY,(h),17,(SGE))
  if GetOwningPlayer(SGE)!=GetOwningPlayer(SKE)then
    call Func1406(SGE)
    call SetUnitOwner(SGE,GetOwningPlayer(SKE),true)
    call Func0680(SGE)
    call SelectSummons(SGE)
    call UnitApplyTimedLife(SGE,'BTLF',80)
    call UnitAddAbility2(SGE,'A12G')
  else
    call Func2590(SGE)
  endif
  set t=null
  set SGE=null
  set SKE=null
endfunction

function Func2592 takes nothing returns nothing
  if Func2587(GetSpellTargetUnit())then
    call Func2591()
  endif
endfunction

function MidnightPulse_Tick takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit HDE=LoadUnitHandle(HY,h,0)
  local integer QIE=LoadInteger(HY,h,0)
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  local group g
  local unit u2
  local real FRX=QIE*0.75+2.25
  local real dmg
  if LoadInteger(HY,h,1)==0 then
    call SaveInteger(HY,h,1,1)
    call TimerStart(t,1,true,function MidnightPulse_Tick)
  else
    call SaveInteger(HY,h,1,LoadInteger(HY,h,1)+1)
  endif
  if LoadInteger(HY,h,1)==12 then
    call DestroyEffect(LoadEffectHandle(HY,h,1))
    call FlushChildHashtable(HY,h)
    call DestroyTimer(t)
  endif
  set g=GetAvailableGroup()
  set tt_unit1=HDE
  call GroupEnumUnitsInRange(g,x,y,566,Condition(function DefaultEnemyFilter))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    set dmg=FRX*GetUnitState(u2,UNIT_STATE_MAX_LIFE)/100.
    call DamageTarget(HDE,u2,7,dmg)
  endloop
  call KillGroup(g)
  set HDE=null
  set t=null
endfunction

function MidnightPulse_SpellEffect takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local effect fx=AddSpecialEffect("war3mapImported\\MagneticField04.mdl",x,y)
  call SaveEffectColor(fx,0xffff00ff)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(GetTriggerUnit(),'A0B1'))
  set bj_lastCreatedUnit=CreateUnit(GetTriggerPlayer(),'e00E',x,y,0)
  call UnitAddAbility(bj_lastCreatedUnit,'A0B2')
  call ImminentTriggeredPointOrder(bj_lastCreatedUnit,852221,x,y)
  call TimerStart(t,0,false,function MidnightPulse_Tick)
  call Func0181(fx,1.55)
  call SaveReal(HY,h,0,x)
  call SaveReal(HY,h,1,y)
  call SaveEffectHandle(HY,h,1,fx)
  set fx=null
  set bj_lastCreatedUnit=null
  set t=null
endfunction

function Func2595 takes unit SKE,unit SGE,integer QIE returns nothing
  call StunTargetEx(SGE,0.25*QIE,false)
  call DamageTarget(SKE,SGE,1,20*QIE+10)
endfunction

function Func2596 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call Func2595(LoadUnitHandle(HY,h,2),LoadUnitHandle(HY,h,17),LoadInteger(HY,h,5))
  if LoadBoolean(HY,h,0)or GetUnitAbilityLevel(LoadUnitHandle(HY,h,17),'A3S3')==0 then
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  endif
  call SaveBoolean(HY,h,0,true)
  set t=null
endfunction

function Func2597 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A0I7')
  call UnitAddAbilityTimedExF(SGE,'A3S3',1,4.01,'a3S3')
  call Func2595(SKE,SGE,QIE)
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,(h),5,(QIE))
  call TimerStart(t,2,true,function Func2596)
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func2598 takes unit u returns nothing
  call RemoveSavedReal(HY,GetHandleId(u),'B0AR')
endfunction

function Func2599 takes unit u returns nothing
  call SaveReal(HY,GetHandleId(u),'B0AR',TimerGetElapsed(GlobalTimer))
endfunction

function Func2600 takes unit WXE,unit SGE returns nothing
  local unit u
  if GetUnitUserData(WXE)==6 then
    set u=CreateUnit(GetOwningPlayer(WXE),GetUnitTypeId(WXE),GetUnitX(WXE),GetUnitY(WXE),GetUnitFacing(WXE))
    call SetUnitUserData(u,-100)
    call SetUnitUserData(WXE,-100)
    call UnitApplyTimedLife(u,'B0AR',LoadReal(HY,GetHandleId(WXE),'B0AR')+36-TimerGetElapsed(GlobalTimer))
    if IsDead(WXE)==false then
      call SetWidgetLife(WXE,9999)
    endif
    if IsDead(SGE)==false then
      call IssueTargetOrderByIdFuckingEx(u,851983,SGE,false)
    endif
    set u=null
  endif
endfunction

function Func2601 takes unit WXE,unit SGE returns nothing
  if IsUnitType(SGE,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(WXE,GetOwningPlayer(SGE))then
    call SetUnitUserData(WXE,GetUnitUserData(WXE)+1)
  endif
endfunction

function Func2602 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local real result=GetUnitX(RCX)
  local real ZEE=GetUnitY(RCX)
  local integer ZAE=GetUnitAbilityLevel(source,'A180')
  local unit M_X=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call SetUnitState(RCX,UNIT_STATE_LIFE,1)
  call DamageTarget(source,RCX,2,20)
  call DamageTarget(source,RCX,1,20)
  call DamageTarget(source,RCX,3,20)
  call UnitAddAbility2(M_X,'A17Z')
  call SetUnitAbilityLevel(M_X,'A17Z',ZAE)
  call IssueImmediateOrderByIdExFunc(M_X,852667)
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func2603 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  if GetOwningPlayer(SGE)!=Sentinels[0]and GetOwningPlayer(SGE)!=Scourges[0]and(GetUnitLevel(SGE)>4 and GetUnitTypeId(SGE)!='n026')then
    call InterruptUnitError(SKE,'n0CX')
  endif
  set SKE=null
  set SGE=null
  call Func2329()
endfunction

function Func2604 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),318))))
endfunction

function Func2605 takes unit SKE,unit u,real dmg,integer K1I,unit bh,integer c returns nothing
  local real a=AngleBetweenUnits(bh,u)
  local real d=DistanceBetweenUnits(bh,u)
  local real x=GetUnitX(u)-2*Cos(a*bj_DEGTORAD)
  local real y=GetUnitY(u)-2*Sin(a*bj_DEGTORAD)
  call ForceMovements(u,x,y,ModuloInteger(c,2)==1,false)
  if ModuloInteger(c,4)==1 and IsUnitType(u,UNIT_TYPE_HERO)then
    call StunTargetEx(u,0.2,true)
  endif
  if dmg>0 then
    call Func0690("Abilities\\Spells\\Items\\HealingSalve\\HealingSalveTarget.mdl",u,"origin",0.9)
    call DamageTarget(SKE,u,7,dmg)
    if K1I>0 then
      call DamageTarget(SKE,u,7,GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.01*(K1I*0.75+2.25))
    endif
  endif
endfunction

function Func2606 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local group g
  local integer h=GetHandleId(t)
  local unit K3I=(LoadUnitHandle(HY,(h),318))
  local unit u=(LoadUnitHandle(HY,(h),2))
  local unit d
  local real x
  local real y
  local real dmg=0
  local integer QIE=LoadInteger(HY,h,5)
  local unit u2
  if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()=='A1BX' or GetSpellAbilityId()=='A2TX'))or GetTriggerEvalCount(t)>90 then
    set x=GetUnitX(K3I)
    set y=GetUnitY(K3I)
    call KillUnit(K3I)
    call Func0479(K3I,0.1)
    set d=(LoadUnitHandle(HY,(h),19))
    call UnitApplyTimedLife((LoadUnitHandle(HY,(h),250)),'BTLF',1)
    call UnitApplyTimedLife((LoadUnitHandle(HY,(h),251)),'BTLF',1)
    call UnitApplyTimedLife((LoadUnitHandle(HY,(h),252)),'BTLF',1)
    call UnitApplyTimedLife((LoadUnitHandle(HY,(h),253)),'BTLF',1)
    call Func0479(LoadUnitHandle(HY,h,250),1.1)
    call Func0479(LoadUnitHandle(HY,h,251),1.1)
    call Func0479(LoadUnitHandle(HY,h,252),1.1)
    call Func0479(LoadUnitHandle(HY,h,253),1.1)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
  else
    set integer485=0
    set unit183=u
    if ModuloInteger(GetTriggerEvalCount(t),20)==0 then
      set dmg=50.*QIE
      if GetUnitAbilityLevel(u,'A2TX')>0 then
        set integer485=GetUnitAbilityLevel(u,'A0B1')
      endif
    endif
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(K3I),GetUnitY(K3I),425,Condition(function Func2604))
    set QIE=GetTriggerEvalCount(GetTriggeringTrigger())
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call Func2605(u,u2,dmg,integer485,K3I,QIE)
    endloop
    call KillGroup(g)
  endif
  set d=null
  set u=null
  set K3I=null
  set t=null
  return false
endfunction

function Func2607 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',x,y,0)
  local unit K3I=CreateUnit(GetOwningPlayer(u),'u004',x,y,0)
  local integer QIE=GetUnitAbilityLevel(u,'A1BX')
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(u,'A2TX')
  endif
  if IsScourge(GetOwningPlayer(u))then
    call UnitAddAbility2(d,'A0X4')
  else
    call UnitAddAbility2(d,'A0X3')
  endif
  call ImminentTriggeredPointOrder(d,852473,x,y)
  call SaveUnitHandle(HY,(h),19,(d))
  call SaveUnitHandle(HY,(h),250,(CreateUnit(GetOwningPlayer(u),'h06R',x,y,0)))
  call SaveUnitHandle(HY,(h),251,(CreateUnit(GetOwningPlayer(u),'h06R',x,y,0)))
  call SaveUnitHandle(HY,(h),252,(CreateUnit(GetOwningPlayer(u),'h06R',x,y,0)))
  call SaveUnitHandle(HY,(h),253,(CreateUnit(GetOwningPlayer(u),'h06R',x,y,0)))
  call SaveUnitHandle(HY,(h),318,(K3I))
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveInteger(HY,h,5,QIE)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerAddCondition(t,Condition(function Func2606))
  set u=null
  set d=null
  set K3I=null
  set t=null
endfunction

function Func2608 takes nothing returns nothing
  call PreloadUnit('h06R')
  call PreloadUnit('u004')
  call AddToPurgeList('A3S3','PRGE')
  call AddToPurgeList('a3S3','PRGE')
  call AddWrapper("Func4651",-1)
  call AddWrapper("Func4652",0)
endfunction

function Func2609 takes nothing returns nothing
  call DamageTarget(GetTriggerUnit(),GetEnumUnit(),1,real023)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdx",GetEnumUnit(),"chest"))
endfunction

function Func2610 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u=GetTriggerUnit()
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local integer QIE=GetUnitAbilityLevel(u,'A0SC')
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',x,y,0)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdx",x,y))
  call UnitAddAbility3(d,'A0SD',QIE)
  call ImminentTriggeredPointOrder(d,852592,x,y)
  set real023=QIE*60+40
  call GroupEnumUnitsInRange(g,x,y,425,Condition(function Func0813))
  call ForGroup(g,function Func2609)
  call KillGroup(g)
  set d=null
  set g=null
  set u=null
endfunction

function Func2611 takes unit SKE,unit SGE,integer k,boolean K8I returns nothing
  if K8I then
    call DamageTarget(SKE,SGE,1,k*50+50+100)
    call StunTargetEx(SGE,1.5*k,true)
  else
    call DamageTarget(SKE,SGE,1,k*50+50)
    call StunTargetEx(SGE,0.75+0.75*k,false)
  endif
endfunction

function Func2612 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,h,5))
  local boolean CTI=(LoadBoolean(HY,h,152))
  local unit d=(LoadUnitHandle(HY,h,2))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local lightning l=(LoadLightningHandle(HY,h,196))
  if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call DestroyLightning(l)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call MoveLightning(l,false,GetUnitX(d),GetUnitY(d),GetUnitX(SGE),GetUnitY(SGE))
    if DistanceBetweenXY(GetUnitX(d),GetUnitY(d),GetUnitX(SGE),GetUnitY(SGE))>600 then
      call DestroyLightning(l)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call Func2611(d,SGE,QIE,CTI)
    endif
  endif
  set t=null
  set d=null
  set SGE=null
  set l=null
  return false
endfunction

function Func2613 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local lightning l=AddLightning("HWPB",false,GetUnitX(unit184),GetUnitY(unit184),GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))
  call SetLightningColor(l,0,.7,1,1)
  call SaveLightningHandle(HY,h,196,(l))
  call SaveUnitHandle(HY,h,2,(unit184))
  call SaveUnitHandle(HY,h,30,GetEnumUnit())
  call SaveInteger(HY,h,5,(integer486))
  call SaveBoolean(HY,h,152,LoadBoolean(TempHash,'A1QP',0))
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerRegisterDeathEvent(t,GetEnumUnit())
  call TriggerRegisterUnitEvent(t,unit184,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func2612))
  call DamageTarget(GetTriggerUnit(),GetEnumUnit(),1,real056)
  call StunTargetEx(GetEnumUnit(),0.5,false)
  set t=null
  set l=null
endfunction

function Func2614 takes nothing returns boolean
  local integer i=GetUnitTypeId(GetFilterUnit())
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and(IsHeroUnitId(i)or Func0631(i))
endfunction

function Func2615 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00U',x,y,0)
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0S8')
  local real D1E=6
  local boolean CTI=false
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A1QP')
    set D1E=8
    set CTI=true
  endif
  call SetUnitAnimation(d,"channel")
  call UnitApplyTimedLife(d,'BTLF',D1E)
  set unit184=d
  set real056=QIE*50+50
  set integer486=QIE
  set tt_unit1=SKE
  call SaveBoolean(TempHash,'A1QP',0,CTI)
  call GroupEnumUnitsInRange(g,x,y,400,Condition(function Func2614))
  call ForGroup(g,function Func2613)
  call KillGroup(g)
  set g=null
  set d=null
  set SKE=null
  call FlushChildHashtable(TempHash,'A1QP')
endfunction

function Func2616 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  local integer QIE
  local integer c
  local integer k
  if GetTriggerEventId()!=EVENT_GAME_TIMER_EXPIRED and GetIssuedOrderId()!=852514 then
    call SetUnitInvulnerable(u,false)
    call UnitRemoveAbility(u,'A04R')
    call UnitRemoveAbility(u,'Bpsh')
    call RemoveSavedHandle(HY,GetHandleId(u),'A0SB')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set QIE=(LoadInteger(HY,h,5))
    set c=(LoadInteger(HY,h,28))+1
    call SaveInteger(HY,h,28,(c))
    set k=3*QIE
    if QIE==4 then
      set k=k+1
    endif
    if c>k or DistanceBetweenXY(GetUnitX(u),GetUnitY(u),(LoadReal(HY,h,6)),(LoadReal(HY,h,7)))>125 then
      call SetUnitInvulnerable(u,false)
      call UnitRemoveAbility(u,'A04R')
      call UnitRemoveAbility(u,'Bpsh')
      call RemoveSavedHandle(HY,GetHandleId(u),'A0SB')
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func2617 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  local trigger t
  local integer h
  if HaveSavedHandle(HY,hu,'A0SB')then
    set t=LoadTriggerHandle(HY,hu,'A0SB')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,(h),14,(u))
    call TriggerRegisterTimerEvent(t,0.25,true)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
    call TriggerAddCondition(t,Condition(function Func2616))
    call SaveTriggerHandle(HY,hu,'A0SB',t)
  endif
  call SetUnitInvulnerable(u,true)
  call UnitAddAbility2(u,'A04R')
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(u,'A0SB'))
  call SaveReal(HY,h,6,GetUnitX(u))
  call SaveReal(HY,h,7,GetUnitY(u))
  call SaveInteger(HY,h,28,0)
  set t=null
  set u=null
endfunction

function Func2618 takes nothing returns nothing
  call IssueImmediateOrderByIdExFunc(LoadUnitHandle(HY,GetHandleId(GetExpiredTimer()),0),852516)
  call DelayedCallBackClean()
endfunction

function Func2619 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func2618)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
endfunction

function Func2620 takes nothing returns nothing
  call AddToPurgeList('B08O','PRGE')
endfunction

function Func2621 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group016)==false then
    call GroupAddUnit(group016,GetEnumUnit())
    call DamageTarget(tt_unit1,GetEnumUnit(),1,real023)
  endif
endfunction

function Func2622 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,(h),22))
  local unit LII=LoadUnitHandle(HY,(h),19)
  local unit SKE=LoadUnitHandle(HY,(h),14)
  local integer QIE=(LoadInteger(HY,(h),5))
  local real a=(LoadReal(HY,(h),13))
  local group gg
  local real x
  local real y
  local unit u2
  local real dmg
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    set tt_unit1=CreateUnit(GetOwningPlayer(LII),'h06O',GetUnitX(SKE),GetUnitY(SKE),0)
    call SetUnitScale(tt_unit1,2.5,2.5,2.5)
    call KillUnit(tt_unit1)
    call Func0770(SKE,true,GetUnitX(LII),GetUnitY(LII))
    call IssueImmediateOrderByIdExFunc(SKE,851972)
    set units018[GetPlayerId(GetOwningPlayer(LII))]=null
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEvalCount(t)>120 then
    set units018[GetPlayerId(GetOwningPlayer(LII))]=null
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call SetUnitScale(LII,2.5,2.5,2.5)
    call KillUnit(LII)
  else
    set x=GetUnitX(LII)
    set y=GetUnitY(LII)
    set gg=GetAvailableGroup()
    set tt_unit1=SKE
    set dmg=QIE*70.
    if ModuloInteger(GetTriggerEvalCount(t),30)==0 then
      call TimedReveal(GetOwningPlayer(SKE),3.34,x,y,800)
    endif
    call GroupEnumUnitsInRange(gg,x,y,250,Condition(function Func0824))
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      call GroupRemoveUnit(gg,u2)
      if IsUnitInGroup(u2,g)==false then
        call GroupAddUnit(g,u2)
        call DamageTarget(SKE,u2,1,dmg)
      endif
    endloop
    call KillGroup(gg)
    call SetUnitX(LII,SafeX50(x+16.275*Cos(a*bj_DEGTORAD)))
    call SetUnitY(LII,SafeY50(y+16.275*Sin(a*bj_DEGTORAD)))
  endif
  set t=null
  set g=null
  set gg=null
  set LII=null
  set SKE=null
  return false
endfunction

function Func2623 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local group g=GetAvailableGroup()
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a= AngleBetweenXY(x,y,tx,ty)
  local integer QIE=GetUnitAbilityLevel(SKE,'A0S9')
  local unit LII=CreateUnit(GetOwningPlayer(SKE),'h06O',x,y,a)
  call PlaySoundAtPos(sound014,x,y)
  call UnitAddAbility2(GetTriggerUnit(),'A0SA')
  set units018[GetPlayerId(GetOwningPlayer(SKE))]=LII
  call SetUnitScale(LII,3.5,3.5,3.5)
  call SaveUnitHandle(HY,(h),19,(LII))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveGroupHandle(HY,(h),22,(g))
  call SaveReal(HY,(h),13,((a)*1.0))
  call SaveUnitHandle(HY,(h),14,(SKE))
  call TriggerRegisterTimerEvent(t,0.025,true)
  call TriggerRegisterUnitEvent(t,LII,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func2622))
  set t=null
  set LII=null
  set g=null
  set SKE=null
endfunction

function Func2624 takes nothing returns nothing
  local integer i=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
  if units018[i]==null then
    call Error(GetOwningPlayer(GetTriggerUnit()),GetObjectName('n037'))
  else
    call SetUnitScale(units018[i],2.5,2.5,2.5)
    call KillUnit(units018[i])
  endif
endfunction

function Func2625 takes nothing returns nothing
  call SetUnitX(GetEnumUnit(),real057)
  call SetUnitY(GetEnumUnit(),real058)
endfunction

function Func2626 takes nothing returns nothing
  local destructable ds
  local integer i
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real x
  local real y
  local group g=GetAvailableGroup()
  local integer QIE
  local real dx
  local real dy
  local string s="Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl"
  local real D1E
  if SGE==null then
    set x=GetSpellTargetX()
    set y=GetSpellTargetY()
  else
    set x=GetUnitX(SGE)
    set y=GetUnitY(SGE)
  endif
  set real057=x
  set real058=y
  if IsUnitAlly(SKE,GetOwningPlayer(SGE))or IsBlocked(GetSpellTargetUnit())==false then
    set QIE=GetUnitAbilityLevel(SKE,'A21E')
    set D1E=QIE*1.+2.
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,x,y,150,Condition(function Func0816))
    call TimedReveal(GetOwningPlayer(SKE),10,x,y,1000)
    set i=1
    loop
      set dx=x+150*Cos(i*45.*bj_DEGTORAD)
      set dy=y+150*Sin(i*45.*bj_DEGTORAD)
      set ds=CreateDestructable('B005',dx,dy,GetRandomReal(0,360),1,0)
      call DestroyEffect(AddSpecialEffect(s,GetDestructableX(ds),GetDestructableY(ds)))
      call SetDestructableLifespan(ds,D1E)
      set ds=null
      set i=i+1
      exitwhen i>8
    endloop
  endif
  call ForGroup(g,function Func2625)
  call KillGroup(g)
  set SKE=null
  set SGE=null
  set g=null
endfunction

function Func2627 takes nothing returns nothing
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  if IsPlayerAlly(LocalPlayer,GetOwningPlayer(GetTriggerUnit()))then
    call nPngMinimapEx(x,y,3,255,255,255,false)
  endif
  call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",x,y))
  call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endfunction

function Func2628 takes nothing returns nothing
endfunction

function Func2629 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local real r=DistanceBetweenXY(GetUnitX(u),GetUnitY(u),real060,real061)
  if r<real059 and IsUnitVisibleEx(u,GetOwningPlayer(unit186))then
    set unit185=GetEnumUnit()
    set real059=r
  endif
  set u=null
endfunction

function Func2630 takes nothing returns nothing
  if LoadInteger(HY,GetHandleId(unit008),'A3IT')>0 then
    if IsUnitType(unit008,UNIT_TYPE_HERO)then
      call UnitApplyTimedLife(CreateUnit(Player(LoadInteger(HY,GetHandleId(unit008),'A3IT')),'efo2',GetUnitX(unit008),GetUnitY(unit008),0),'BEfn',60)
    else
      call UnitApplyTimedLife(CreateUnit(Player(LoadInteger(HY,GetHandleId(unit008),'A3IT')),'efon',GetUnitX(unit008),GetUnitY(unit008),0),'BEfn',60)
    endif
    call DestroyEffect(AddSpecialEffect("war3mapImported\\NatureExplosion.mdx",GetUnitX(unit008),GetUnitY(unit008)))
  endif
endfunction

function Func2631 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  call UnitAddAbilityTimedExF(LoadUnitHandle(HY,h,'targ'),'A3IT',1,4,'B3IT')
  call Func0759(LoadUnitHandle(HY,h,'targ'),'A3IT',GetPlayerId(GetOwningPlayer(LoadUnitHandle(HY,h,'0src'))),4.01)
endfunction

function Func2632 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A1W8')
  local integer BHX='A07X'
  local group g
  local code UPE=null
  local real dmg
  local integer j=16
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A1W9')
    set BHX='A0AL'
    set UPE=function Func2631
    set j=18
    set dmg=90+65*QIE
  else
    if QIE==1 then
      set dmg=140
    elseif QIE==2 then
      set dmg=180
    elseif QIE==3 then
      set dmg=225
    endif
  endif
  if SGE==null then
    set unit185=null
    set unit186=SKE
    set real059=999999
    set real060=GetSpellTargetX()
    set real061=GetSpellTargetY()
    set tt_unit1=SKE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,0,0,9999,Condition(function Func0816))
    call ForGroup(g,function Func2629)
    call KillGroup(g)
    set SGE=unit185
    set g=null
  endif
  if SGE!=null and IsBlocked(SGE)==false then
    call Func0843(SKE,SGE,dmg,j,1.07,99999.,0.25,"MFPB",true,UPE)
  endif
  set SKE=null
  set SGE=null
endfunction

function Func2633 takes unit source,unit target returns nothing
  local integer lvl=GetUnitAbilityLevel(source,'A0QR')
  local real LGI=0.35
  local real dmg=0.35
  if lvl==0 then
    set lvl=GetUnitAbilityLevel(source,'A1B3')
    set dmg=0.65
  endif
  call UnitAddAbilityTimedExF(target,'A3RU'-1+lvl,1,(lvl+3)*1.,'B083')
  call DamageTarget(source,source,1,GetUnitState(source,UNIT_STATE_LIFE)*LGI)
  call DamageTarget(source,target,1,GetUnitState(target,UNIT_STATE_LIFE)*dmg)
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",source,"chest"))
  call DestroyEffect(AddSpecialEffectTarget("effects\\LifeBreak.mdx",target,"chest"))
endfunction

function Huskar_LifeBreakStart takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit caster=(LoadUnitHandle(HY,h,2))
  local unit target=(LoadUnitHandle(HY,h,17))
  local real tx=(LoadReal(HY,h,23))
  local real ty=(LoadReal(HY,h,24))
  local real nx
  local real ny
  local real cx=GetUnitX(caster)
  local real cy=GetUnitY(caster)
  local real trx=GetUnitX(target)
  local real try=GetUnitY(target)
  local real a=Atan2(try-cy,trx-cx)
  if GetUnitTypeId(caster)=='E02X' then
    call SetUnitAnimationByIndex(caster,1)
  else
    call SetUnitAnimationByIndex(caster,17)
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or DistanceBetweenXY(tx,ty,trx,try)>1400 or IsUnitDisabledSomehow(caster)then
    call SetUnitPathing2(caster,true)
    call UnitRemoveAbility(caster,'A0ST')
    call SetUnitTimeScale(caster,1.0)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif DistanceBetweenXY(cx,cy,trx,try)<125 then
    call SetUnitPathing2(caster,true)
    call UnitRemoveAbility(caster,'A0ST')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call SetUnitTimeScale(caster,1.0)
    if target!=null and IsDead(target)==false then
      call IssueTargetOrderByIdFuckingEx(caster,851983,target,false)
      call Func2633(caster,target)
    endif
  else
    set tx=trx
    set ty=try
    call SaveReal(HY,h,23,((tx)*1.0))
    call SaveReal(HY,h,24,((ty)*1.0))
    set nx=cx+15*Cos(a)
    set ny=cy+15*Sin(a)
    call SetUnitPosition(caster,nx,ny)
    call SetUnitFacing(caster,a*bj_RADTODEG)
  endif
  set t=null
  set caster=null
  set target=null
  return false
endfunction

function Huskar_LifeBreak_Wrapper takes nothing returns nothing
  local unit caster=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  if GetUnitTypeId(caster)=='e00E'then
    set caster=LoadUnitHandle(HY,GetHandleId(caster),0)
  endif
  call TriggerRegisterTimerEvent(t,0.015,true)
  call TriggerRegisterDeathEvent(t,caster)
  call TriggerAddCondition(t,Condition(function Huskar_LifeBreakStart))
  call SaveUnitHandle(HY,h,2,(caster))
  call SaveUnitHandle(HY,h,17,(target))
  call SaveReal(HY,h,23,((GetUnitX(target))*1.0))
  call SaveReal(HY,h,24,((GetUnitY(target))*1.0))
  call SetUnitPathing2(caster,false)
  call UnitAddAbility2(caster,'A0ST')
  call Func0860(caster)
  call SetPlayerAbilityAvailable(GetOwningPlayer(caster),'A0ST',false)
  call PurgingTriggered(caster,false)
  call SetUnitAnimationByIndex(caster,17)
  call SetUnitTimeScale(caster,3.0)
  set caster=null
  set target=null
  set t=null
endfunction

function Func2636 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer lvl=(LoadInteger(HY,h,5))
  local unit target=(LoadUnitHandle(HY,h,17))
  local integer stat=GetHeroMainStatValue(target)
  local real hp=GetWidgetLife(target)
  local real maxhp=GetUnitState(target,UNIT_STATE_MAX_LIFE)
  local real heal
  if hp/maxhp>0.4 then
    set heal=lvl*.25*0.2*stat+10.
  else
    set heal=lvl*0.2*stat+10.
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>LoadInteger(HY,h,0)or GetUnitAbilityLevel(target,'A0QO')==0 then
    call RemoveSavedHandle(HY,GetHandleId(target),'A0QP')
    call UnitRemoveAbility(target,'A0QO')
    call Func0175(target,-LoadReal(HY,h,'rega'))
    call UnitRemoveAbility(target,'B080')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if heal!=LoadReal(HY,h,'rega')then
      call Func0175(target,heal-LoadReal(HY,h,'rega'))
      call SaveReal(HY,h,'rega',heal)
    endif
  endif
  set target=null
  set t=null
  return false
endfunction

function InnerVitality_Start takes nothing returns nothing
  local unit target=GetSpellTargetUnit()
  local unit caster=GetTriggerUnit()
  local integer lvl=GetUnitAbilityLevel(caster,'A0QP')
  local trigger t
  local integer h
  if HaveSavedHandle(HY,GetHandleId(target),'A0QP')then
    set t=LoadTriggerHandle(HY,GetHandleId(target),'A0QP')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,GetHandleId(target),'A0QP',t)
    call TriggerRegisterTimerEvent(t,.1,true)
    call TriggerAddCondition(t,Condition(function Func2636))
    call TriggerRegisterDeathEvent(t,target)
    call SaveUnitHandle(HY,h,17,(target))
  endif
  call SaveInteger(HY,h,5,(lvl))
  call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+16*10)
  call UnitAddAbility3(target,'A0QO',lvl)
  call FuckingAssistBuffWrap(caster,target)
  set target=null
  set caster=null
  set t=null
endfunction

function Func2638 takes nothing returns boolean
  local eventid id=GetTriggerEventId()
  local unit u=GetTriggerUnit()
  local integer RTX=GetIssuedOrderId()
  if GetUnitAbilityLevel(u,'A0QN')>0 then
    if id==EVENT_UNIT_ISSUED_ORDER then
      if RTX==852255 or RTX==852458 then
        call SaveBoolean(MHT,GetHandleId(u),'A0QN',true)
        call UnitAddAbility2(u,'A32O')
      elseif RTX==852256 or RTX==852459 then
        call SaveBoolean(MHT,GetHandleId(u),'A0QN',false)
        call UnitRemoveAbility(u,'A32O')
      endif
    else
      if RTX==852225 then
        call Func0656(u)
        set boolean060=true
        call IssueTargetOrder(u,"attack",GetOrderTargetUnit())
        set boolean060=false
        call UnitAddAbility2(u,'A32O')
        call SaveBoolean(MHT,GetHandleId(u),'A0QN'+1,true)
        call SaveUnitHandle(MHT,GetHandleId(u),'A0QN'+1,GetOrderTargetUnit())
      endif
    endif
  endif
  set id=null
  set u=null
  return false
endfunction

function Func2639 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LCO=LoadUnitHandle(HY,h,30)
  local unit LBO=LoadUnitHandle(HY,h,2)
  call DamageTarget(LBO,LCO,1,5*LoadInteger(HY,h,5))
  if GetTriggerEvalCount(t)>=8 or IsDead(LCO)then
    call DestroyEffect(LoadEffectHandle(HY,h,31))
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
  set LCO=null
  set LBO=null
  return false
endfunction

function Func2640 takes unit WXE,unit LCO returns nothing
  local integer h=GetHandleId(WXE)
  local integer LTI
  local trigger t
  if LoadBoolean(MHT,GetHandleId(WXE),'A0QN'+1)then
    call UnitRemoveAbility(WXE,'A32O')
    call SaveBoolean(MHT,GetHandleId(WXE),'A0QN'+1,false)
  endif
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func2639))
  set LTI=GetHandleId(t)
  call SaveUnitHandle(HY,LTI,2,WXE)
  call SaveUnitHandle(HY,LTI,30,LCO)
  call SaveInteger(HY,LTI,5,GetUnitAbilityLevel(WXE,'A0QN'))
  call SetWidgetLife(WXE,Func0468(GetWidgetLife(WXE)-15,1))
  call SaveEffectHandle(HY,LTI,31,AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",LCO,"chest"))
  call UnitAddAbilityTimedExF(LCO,'A3L9',1,8,'B3L9')
  set t=null
endfunction

function Func2641 takes unit WXE,unit SGE returns nothing
  local integer h=GetHandleId(WXE)
  if GetUnitAbilityLevel(WXE,'A0QN')>0 and IsUnitSilenced(WXE)==false then
    if LoadBoolean(MHT,h,'A0QN')then
      call Func2640(WXE,SGE)
    endif
    if LoadBoolean(MHT,h,'A0QN'+1)then
      if LoadUnitHandle(MHT,h,'A0QN'+1)==SGE then
        call Func2640(WXE,SGE)
      else
        call SaveBoolean(MHT,h,'A0QN'+1,false)
        call UnitRemoveAbility(WXE,'A32O')
      endif
    endif
  endif
endfunction

function Huskar_BurningSpears_OnAttack takes unit WXE,unit SGE returns nothing
  if LoadBoolean(MHT,GetHandleId(WXE),'A0QN'+1)then
    if LoadUnitHandle(MHT,GetHandleId(WXE),'A0QN'+1)!=SGE then
      call SaveBoolean(MHT,GetHandleId(WXE),'A0QN'+1,false)
      call UnitRemoveAbility(WXE,'A32O')
    endif
  endif
endfunction

function Func2643 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddCondition(t,Condition(function Func2638))
  call SaveUnitHandle(HY,(GetHandleId(t)),14,(GetTriggerUnit()))
  set t=null
endfunction

function Huskar_BerserkerBlood_Resist takes unit u,integer c returns nothing
  local integer i=0
  loop
    exitwhen i>24
    if i!=c/4 and GetUnitAbilityLevel(u,BerserkerBloodResistCont[i])>0 then
      call UnitRemoveAbility(u,BerserkerBloodResistCont[i])
    endif
    set i=i+1
  endloop
  if GetUnitAbilityLevel(u,BerserkerBloodResistCont[c/4])==0 then
    call UnitAddAbility2(u,BerserkerBloodResistCont[c/4])
  endif
endfunction

function Func2645 takes nothing returns boolean
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit u=(LoadUnitHandle(HY,h,14))
  local real curLife=GetUnitState(u,UNIT_STATE_LIFE)
  local real maxLife=GetUnitState(u,UNIT_STATE_MAX_LIFE)
  local integer F6X
  local integer L_I
  local integer QIE=GetUnitAbilityLevel(u,'A0QQ')
  local boolean b=(LoadBoolean(HY,h,319))
  local integer oldstacks=LoadInteger(HY,h,0)
  local integer oldlvl=LoadInteger(HY,h,1)
  local real L0I=LoadReal(HY,h,0)
  local real L1I=LoadReal(HY,h,1)
  local real L2I
  local real L3I
  local integer i
  local integer k
  if IsUnitType(u,UNIT_TYPE_HERO)and QIE>0 and(GetTriggerEventId()!=EVENT_UNIT_DAMAGED or GetEventDamage()>0)then
    if IsDead(u)==false then
      if(GetUnitAbilityLevel(u,'A36D')>0)then
        set F6X=0
        set L_I=100
        set L2I=0
        set L3I=0
      else
        set L_I=R2I(100.*GetUnitState(u,UNIT_STATE_LIFE)/GetUnitState(u,UNIT_STATE_MAX_LIFE))
        set L2I=(Func0464(100-L_I,90))*(180+40*QIE)*1.1/100
        set L3I=(Func0464(100-L_I,90))*(10+10*QIE)*1.1/100
      endif
      set i=R2I(L2I)
      set k=R2I(L3I)
      if i!=R2I(L0I)or k!=R2I(L1I)then
        call SaveReal(HY,h,0,i)
        call SaveReal(HY,h,1,k)
        call AddBonusAttackSpeed(u,i)
        call Huskar_BerserkerBlood_Resist(u,k)
        if L_I<40 then
          if b==false then
            call SaveBoolean(HY,h,319,(true))
            call SaveEffectHandle(HY,h,175,(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl",u,"left weapon")))
            call SaveEffectHandle(HY,h,176,(AddSpecialEffectTarget("effects\\HeadhunterWEAPONSRight_NoSound.mdx",u,"right weapon")))
          endif
        else
          if b then
            call SaveBoolean(HY,h,319,(false))
            call DestroyEffect(LoadEffectHandle(HY,h,175))
            call DestroyEffect(LoadEffectHandle(HY,h,176))
          endif
        endif
      endif
    endif
  endif
  set u=null
  return false
endfunction

function Func2646 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func2645))
  call SaveUnitHandle(HY,(GetHandleId(t)),14,(GetTriggerUnit()))
  call SaveBoolean(HY,(GetHandleId(t)),319,(false))
  set t=null
endfunction

function Func2647 takes nothing returns nothing
  call AddToPurgeList('A0QO','PRGA')
  call AddToPurgeList('B080','PRGA')
  call PreloadAbility('A0QO')
  call PreloadAbility('A3RU')
  call PreloadAbility('A3RW')
  call PreloadAbility('A3RV')
  call AddToPurgeList('A3RU','PRGE')
  call AddToPurgeList('A3RV','PRGE')
  call AddToPurgeList('A3RW','PRGE')
  call AddToPurgeList('B083','PRGE')
  call AddWrapper("Func4627",4)
  call AddWrapper("Func4629",-2)
  set BerserkerBloodResistCont[1]='A2PD'
  set BerserkerBloodResistCont[2]='A2PA'
  set BerserkerBloodResistCont[3]='A2P9'
  set BerserkerBloodResistCont[4]='A2P8'
  set BerserkerBloodResistCont[5]='A2PE'
  set BerserkerBloodResistCont[6]='A2PC'
  set BerserkerBloodResistCont[7]='A2PB'
  set BerserkerBloodResistCont[8]='A2OW'
  set BerserkerBloodResistCont[9]='A2OX'
  set BerserkerBloodResistCont[10]='A2OY'
  set BerserkerBloodResistCont[11]='A2P0'
  set BerserkerBloodResistCont[12]='A2P1'
  set BerserkerBloodResistCont[13]='A2P2'
  call HideAbility(BerserkerBloodResistCont[1])
  call HideAbility(BerserkerBloodResistCont[2])
  call HideAbility(BerserkerBloodResistCont[3])
  call HideAbility(BerserkerBloodResistCont[4])
  call HideAbility(BerserkerBloodResistCont[5])
  call HideAbility(BerserkerBloodResistCont[6])
  call HideAbility(BerserkerBloodResistCont[7])
  call HideAbility(BerserkerBloodResistCont[8])
  call HideAbility(BerserkerBloodResistCont[9])
  call HideAbility(BerserkerBloodResistCont[10])
  call HideAbility(BerserkerBloodResistCont[11])
  call HideAbility(BerserkerBloodResistCont[12])
  call HideAbility(BerserkerBloodResistCont[13])
endfunction

function Func2648 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local real a=(LoadReal(HY,(h),137))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local integer c=GetTriggerEvalCount(t)
  local real dx=x+150*c*Cos(a)
  local real dy=y+150*c*Sin(a)
  local integer XXO=LoadInteger(HY,h,11)
  call ImminentTriggeredPointOrder(units019[GetPlayerId(GetOwningPlayer(u))],852488,dx,dy)
  if c==(XXO)then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func2649 takes unit d,real x,real y,real D1E returns nothing
  call ImminentTriggeredPointOrder(d,852488,x,y)
  call Func0526("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",x,y,D1E)
  call Func0181(effect001,3.)
endfunction

function Func2650 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real a=Atan2(y-GetUnitY(u),x-GetUnitX(u))
  local integer QIE=GetUnitAbilityLevel(u,'A0O5')
  local integer BHX='A0OE'
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  local integer XXO=6
  local integer i=0
  local real D1E=10.
  local unit d
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(u,'A1B1')
    set XXO=11
    set D1E=30.
    set BHX='A1B2'
  endif
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    set XXO=XXO+1
  endif
  call SetUnitAnimation(u,"spell")
  set d=CreateUnit(GetOwningPlayer(u),'e00E',x,y,0)
  call UnitAddAbility3(d,BHX,QIE)
  set x=GetUnitX(u)
  set y=GetUnitY(u)
  loop
    set i=i+1
    exitwhen i>XXO
    set x=x+150*Cos(a)
    set y=y+150*Sin(a)
    call Func2649(d,x,y,D1E)
  endloop
  set u=null
endfunction

function Func2651 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,h,5))
  local unit L8I=(LoadUnitHandle(HY,h,2))
  local unit u=(LoadUnitHandle(HY,h,17))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(u,LoadInteger(HY,h,0))==0 or LoadReal(HY,h,0)<TimerGetElapsed(GlobalTimer)then
    if GetHandleId(u)<1 then
      call FlushChildHashtable(HY,LoadInteger(HY,h,1))
    else
      call RemoveSavedHandle(HY,GetHandleId(u),'A2VO')
      call UnitRemoveAbility(u,LoadInteger(HY,h,0))
      call UnitRemoveAbility(u,'B1G5')
    endif
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call DamageTarget(L8I,u,1,(QIE*4+8)/2)
  endif
  set t=null
  set L8I=null
  set u=null
  return false
endfunction

function Func2652 takes nothing returns nothing
  local trigger t
  local integer h
  local integer QIE=integer487
  local unit L8I=unit187
  local unit u=GetEnumUnit()
  local integer hu=GetHandleId(u)
  local integer id
  if QIE==1 then
    set id='A1G3'
  elseif QIE==2 then
    set id='A1G4'
  elseif QIE==3 then
    set id='A1G5'
  elseif QIE==4 then
    set id='A1G6'
  endif
  if HaveSavedHandle(HY,hu,'A2VO')then
    set t=LoadTriggerHandle(HY,hu,'A2VO')
    set h=GetHandleId(t)
    if id!=LoadInteger(HY,h,0)then
      call UnitRemoveAbility(u,LoadInteger(HY,h,0))
      call UnitAddAbility2(u,id)
      call SaveInteger(HY,h,5,(QIE))
      call SaveInteger(HY,h,0,id)
    endif
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'A2VO',t)
    call UnitAddAbility2(u,id)
    call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",u,"chest")))
    call SaveUnitHandle(HY,h,2,(L8I))
    call SaveUnitHandle(HY,h,17,(u))
    call SaveInteger(HY,h,5,(QIE))
    call SaveInteger(HY,h,0,id)
    call SaveInteger(HY,h,1,hu)
    call TriggerRegisterTimerEvent(t,0.5,true)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func2651))
  endif
  call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+5.)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",GetUnitX(u),GetUnitY(u)))
  set t=null
  set L8I=null
  set u=null
endfunction

function Func2653 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false and IsMagicImmune(GetFilterUnit())==false
endfunction

function Func2654 takes unit L8I,unit SGE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(L8I,'A2VO')
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  local group g=GetAvailableGroup()
  set integer487=QIE
  set unit187=L8I
  set tt_unit1=L8I
  call GroupEnumUnitsInRange(g,x,y,325,Condition(function Func2653))
  call ForGroup(g,function Func2652)
  call KillGroup(g)
  set t=null
endfunction

function Func2655 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetUnitAbilityLevel(GetTriggerUnit(),'B0GX')>0 and GetUnitAbilityLevel(GetEventDamageSource(),'A2UM')>0 and(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),2))==GetEventDamageSource()then
      call UnitRemoveAbility(GetTriggerUnit(),'B0GX')
      call FlushChildHashtable(HY,(GetHandleId(GetTriggeringTrigger())))
      call CleanTrigger(GetTriggeringTrigger())
      call Func2654(GetEventDamageSource(),GetTriggerUnit())
    endif
  else
    call FlushChildHashtable(HY,(GetHandleId(GetTriggeringTrigger())))
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func2656 takes unit SKE,unit SGE returns nothing
  local trigger t=CreateTrigger()
  call SaveUnitHandle(HY,(GetHandleId(t)),2,(SKE))
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func2655))
  call TriggerRegisterTimerEvent(t,4,false)
  set t=null
endfunction

function Func2657 takes nothing returns boolean
  local unit u
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    set u=GetAttacker()
    if GetUnitAbilityLevel(u,'A2UM')>0 and(LoadBoolean(HY,(GetHandleId(GetTriggeringTrigger())),263))and u==(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),14))then
      if GetUnitCurrentOrder(u)==0 then
        call IssueTargetOrder(u,"attack",GetTriggerUnit())
      endif
      call Func2656(u,GetTriggerUnit())
    endif
    set u=null
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
    if(GetIssuedOrderId()==OrderId("poisonarrows"))then
      call SaveBoolean(HY,(GetHandleId(GetTriggeringTrigger())),263,(true))
    elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
      call SaveBoolean(HY,(GetHandleId(GetTriggeringTrigger())),263,(false))
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A2UM' then
    call Func2656(GetTriggerUnit(),GetSpellTargetUnit())
  endif
  return false
endfunction

function Func2658 takes nothing returns nothing
  local trigger t
  if GetUnitAbilityLevel(GetTriggerUnit(),'A2VO')==1 then
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
    call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t,Condition(function Func2657))
    call SaveUnitHandle(HY,GetHandleId(t),14,GetTriggerUnit())
    set t=null
  endif
  if GetUnitAbilityLevel(GetTriggerUnit(),'A2UM')==0 then
    call UnitAddAbility2(GetTriggerUnit(),'A2UM')
  endif
  call SetUnitAbilityLevel(GetTriggerUnit(),'A2UM',GetUnitAbilityLevel(GetTriggerUnit(),'A2VO'))
endfunction

function Func2659 takes nothing returns nothing
  local unit SKE=unit188
  local unit u=GetEnumUnit()
  if IsUnitInGroup(u,group022)==false and IsUnitCycloned(u)==false then
    call GroupAddUnit(group022,u)
    call DamageTarget(SKE,u,1,50)
    call StunTargetEx(u,real062,false)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(u),GetUnitY(u)))
  endif
  set SKE=null
  set u=null
endfunction

function Func2660 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local real a=(LoadReal(HY,h,137))
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local integer c=GetTriggerEvalCount(t)
  local real dx
  local real dy
  local group g
  local integer i
  local group gg=(LoadGroupHandle(HY,h,187))
  local integer QIE=LoadInteger(HY,h,5)
  local integer XXO=LoadInteger(HY,h,11)
  set i=0
  set real062=(1+0.5*(QIE-1))-(c*0.05)
  set g=GetAvailableGroup()
  loop
    set dx=x+100*i*Cos(a*bj_DEGTORAD)
    set dy=y+100*i*Sin(a*bj_DEGTORAD)
    set tt_unit1=SKE
    set unit188=SKE
    set group022=gg
    call GroupEnumUnitsInRange(g,dx,dy,175,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func2659)
    set i=i+1
    exitwhen i>XXO
  endloop
  call KillGroup(g)
  if c==20*(0.5+0.5*QIE)then
    call KillGroup(gg)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set g=null
  set gg=null
  return false
endfunction

function Func2661 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local real a=(LoadReal(HY,h,137))
  local integer c=GetTriggerEvalCount(t)
  local real dx=x+100*c*Cos(a*bj_DEGTORAD)
  local real dy=y+100*c*Sin(a*bj_DEGTORAD)
  local unit SKE=LoadUnitHandle(HY,h,2)
  local integer QIE=LoadInteger(HY,h,5)
  local ubersplat ub
  local integer i
  local integer XXO=LoadInteger(HY,h,11)
  if c<XXO then
    call SaveEffectHandle(HY,h,(609+c),(AddSpecialEffect("effects\\IcePath.mdx",dx,dy)))
    set ub=Func0681(dx,dy,"IPTH",255,255,255,255,false,false)
    call Func0683(ub,true)
    call SaveUbersplatHandle(HY,h,(760+c),(ub))
    call SaveReal(HY,h,760+c,dx)
    call SaveReal(HY,h,960+c,dy)
  endif
  if c==XXO then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.05,true)
    call TriggerAddCondition(t,Condition(function Func2660))
    call SaveReal(HY,h,6,x)
    call SaveReal(HY,h,7,y)
    call SaveReal(HY,h,137,a)
    call SaveInteger(HY,h,5,QIE)
    call SaveInteger(HY,h,11,XXO)
    call SaveUnitHandle(HY,h,2,(SKE))
    call SaveGroupHandle(HY,h,187,(GetAvailableGroup()))
    call TriggerEvaluate(t)
  elseif c>=(1+0.5*QIE)/.05 then
    set i=0
    loop
      exitwhen i==XXO
      call DestroyEffect(LoadEffectHandle(HY,h,(609+i)))
      call Func0682((LoadUbersplatHandle(HY,h,(760+i))))
      set i=i+1
    endloop
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set i=0
    loop
      call Func0683(LoadUbersplatHandle(HY,h,760+i),IsVisibleToPlayer(LoadReal(HY,h,760+i),LoadReal(HY,h,960+i),LocalPlayer))
      set i=i+1
      exitwhen i==XXO
    endloop
  endif
  set t=null
  set SKE=null
  return false
endfunction

function Func2662 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real a= AngleBetweenXY(x,y,GetSpellTargetX(),GetSpellTargetY())
  local integer XXO=11
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set XXO=XXO+2
  endif
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerAddCondition(t,Condition(function Func2661))
  call SaveReal(HY,h,6,x)
  call SaveReal(HY,h,7,y)
  call SaveReal(HY,h,137,a)
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(SKE,'A0O6'))
  call SaveInteger(HY,h,11,XXO)
  call SaveUnitHandle(HY,h,2,(SKE))
  call TriggerEvaluate(t)
  set t=null
  set SKE=null
endfunction

function Func2663 takes unit d,unit t returns nothing
  local integer i=GetUnitAbilityLevel(d,'A0OB')
  if i>0 and GetUnitAbilityLevel(d,'A3JO'-1+i)==0 then
    call UnitAddAbilityTimedExF(t,'A3JO'-1+GetUnitAbilityLevel(d,'A0OB'),1,5,'B3JO')
  endif
endfunction

function Func2664 takes unit u,unit t returns nothing
  local integer QIE=GetUnitAbilityLevel(u,'A0OC')
  if QIE>0 then
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(u))],t,1,20*QIE)
  endif
endfunction

function Func2665 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=LoadUnitHandle(HY,h,0)
  call UnitAddAbility(d,'A0OC')
  call ImminentTriggeredPointOrder(d,852560,LoadReal(HY,h,0),LoadReal(HY,h,1))
  call FlushChildHashtable(HY,h)
  call DestroyTrigger(t)
  set d=null
  set t=null
endfunction

function Func2666 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local trigger t=CreateTrigger()
  local integer QIE=GetUnitAbilityLevel(u,GetSpellAbilityId())
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  local boolean MFI=false
  call DummyDamageTracking(5)
  call TriggerRegisterTimerEvent(t,0.3,false)
  call TriggerAddCondition(t,Condition(function Func2665))
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    set MFI=true
  endif
  call UnitAddAbility(d,'A0OB')
  call SetUnitAbilityLevel(d,'A0OB',QIE)
  if MFI then
    call UnitAddAbility(d,'A3O3')
  endif
  call ImminentTriggeredPointOrder(d,852580,x,y)
  set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  if MFI then
    call UnitAddAbility(d,'A3O3')
  endif
  call SaveUnitHandle(HY,h,0,d)
  call SaveReal(HY,h,0,x)
  call SaveReal(HY,h,1,y)
  set d=null
  set t=null
  set u=null
endfunction

function Func2667 takes nothing returns nothing
  call PreloadAbility('A0OB')
  call PreloadAbility('A0OC')
  call PreloadAbility('A0OA')
  call AddToPurgeList('B06R','PRGE')
  call AddToPurgeList('B06W','PRGE')
  call AddToPurgeList('B3JO','PRGE')
  call AddToPurgeList('A3JO','PRGE')
  call AddToPurgeList('A3JP','PRGE')
  call AddToPurgeList('A3JQ','PRGE')
  call AddToPurgeList('A3JR','PRGE')
  call AddToPurgeList('A1G5','PRGE')
  call AddToPurgeList('A1G3','PRGE')
  call AddToPurgeList('A1G6','PRGE')
  call AddToPurgeList('A1G4','PRGE')
  call AddToPurgeList('B1G5','PRGE')
  call PreloadAbility('A0OE')
endfunction

function Func2668 takes unit u,unit SGE,boolean MHI returns nothing
  local real a=GetRandomReal(0,360)
  local real x=GetUnitX(SGE)+50*Cos(a*bj_DEGTORAD)
  local real y=GetUnitY(SGE)+50*Sin(a*bj_DEGTORAD)
  local real dmg=GetRandomReal(200,225)
  if LoadInteger(HY,GetHandleId(u),4256)!=1 then
    call SetUnitPosition(u,x,y)
  else
    call SetUnitX(u,x)
    call SetUnitY(u,y)
  endif
  call SetUnitFacing(u,bj_RADTODEG*Atan2(GetUnitY(SGE)-GetUnitY(u),GetUnitX(SGE)-GetUnitX(u)))
  if MHI then
    call SetUnitAnimation(u,"Attack")
  else
    call SetUnitAnimation(u,"attack slam")
  endif
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",u,"chest"))
  if IsPlayerBelongToTeams(GetOwningPlayer(SGE))==false and IsUnitType(SGE,UNIT_TYPE_ANCIENT)==false then
    set dmg=99999
  elseif LoadInteger(HY,GetHandleId(u),4256)!=1 then
    call IssueTargetOrder(u,"attack",SGE)
  endif
  call Func0642(u,SGE,dmg)
endfunction

function Func2669 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    call Func2668(SKE,SGE,false)
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func2670 takes nothing returns boolean
  return(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1)))and GetUnitTypeId(GetFilterUnit())!='n0F5'
endfunction

function Func2671 takes unit u,boolean MHI returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),450,Condition(function Func2670))
  set tt_unit1=GroupPickRandomUnit(g)
  if tt_unit1!=null then
    call Func2668(u,tt_unit1,MHI)
  endif
  call KillGroup(g)
  set g=null
endfunction

function Func2672 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local unit MPI=(LoadUnitHandle(HY,h,19))
  local integer D7X=(LoadInteger(HY,h,216))
  local integer MQI=(LoadInteger(HY,h,28))
  local unit M_X
  if MQI>D7X or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call KillUnit(MPI)
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A05G',true)
    call SetUnitPathing2(SKE,true)
    call SetUnitInvulnerable(SKE,false)
    call SaveInteger(HY,(GetHandleId(SKE)),4253,2)
    call SetUnitVertexColor(SKE,255,255,255,255)
    call UnitRemoveAbility(SKE,'A3LA')
    call SetUnitTimeScale(SKE,1)
  else
    call SaveInteger(HY,h,28,(MQI+1))
    call Func2671(SKE,MQI==D7X)
    if tt_unit1==null then
      call KillUnit(MPI)
      call DestroyEffect(LoadEffectHandle(HY,h,32))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A05G',true)
      call SetUnitPathing2(SKE,true)
      call SetUnitInvulnerable(SKE,false)
      call SaveInteger(HY,(GetHandleId(SKE)),4253,2)
      call SetUnitVertexColor(SKE,255,255,255,255)
      call UnitRemoveAbility(SKE,'A3LA')
      call SetUnitTimeScale(SKE,1)
    endif
  endif
  set t=null
  set SKE=null
  set M_X=null
  set MPI=null
  return false
endfunction

function Func2673 takes nothing returns nothing
  local timer tt=GetExpiredTimer()
  local integer ht=GetHandleId(tt)
  local unit SKE=LoadUnitHandle(HY,ht,0)
  local unit SGE=LoadUnitHandle(HY,ht,1)
  local integer MTI=GetUnitAbilityLevel(SKE,'A0M1')
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer MUI=GetUnitAbilityLevel(SKE,'A05G')
  local player p=GetOwningPlayer(SKE)
  local integer D7X=3
  local unit MPI=CreateUnit(GetOwningPlayer(SKE),'o00D',GetUnitX(SKE),GetUnitY(SKE),0)
  local boolean MWI=MTI==0
  call DestroyTimer(tt)
  call FlushChildHashtable(HY,ht)
  set tt=null
  if IsDead(SKE)==false then
    if MWI then
      set MTI=GetUnitAbilityLevel(SKE,'A1AX')
    endif
    if GetUnitTypeId(SKE)=='e00E' then
      set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
    endif
    if MWI then
      set D7X=3*MTI+3
    else
      set D7X=3*MTI
    endif
    call SetPlayerAbilityAvailable(p,'A05G',false)
    call UnitAddAbility2(SKE,'A3LA')
    call SetUnitVertexColor(SKE,255,100,100,80)
    call SetUnitTimeScale(SKE,2)
    call SetUnitPathing2(SKE,false)
    call SetUnitInvulnerable(SKE,true)
    call SaveInteger(HY,(GetHandleId(SKE)),4253,1)
    call SaveUnitHandle(HY,h,14,(SKE))
    call SaveUnitHandle(HY,h,17,(SGE))
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerRegisterDeathEvent(t,SKE)
    call TriggerAddCondition(t,Condition(function Func2669))
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,14,(SKE))
    call SaveUnitHandle(HY,h,19,(MPI))
    call SaveInteger(HY,h,216,(D7X))
    call SaveInteger(HY,h,325,(MUI))
    call SaveInteger(HY,h,28,2)
    call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",SKE,"weapon")))
    call TriggerRegisterTimerEvent(t,0.4,true)
    call TriggerRegisterDeathEvent(t,SKE)
    call TriggerAddCondition(t,Condition(function Func2672))
  endif
  set SKE=null
  set SGE=null
  set MPI=null
  set t=null
  set p=null
endfunction

function Func2674 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func2673)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
endfunction

function Func2675 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  call SetUnitAnimationByIndex(source,4)
  set RBX=null
  set source=null
  return false
endfunction

function Func2676 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.01,false)
  call TriggerAddCondition(RBX,Condition(function Func2675))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set RBX=null
  set source=null
endfunction

function Func2677 takes nothing returns nothing
  set boolean005=true
endfunction

function Func2678 takes nothing returns nothing
  call DamageTarget(unit189,GetEnumUnit(),1,(55.0+25.0*integer488)*0.25)
endfunction

function Func2679 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func2680 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetTriggerEvalCount(RBX)
  local group g
  if QIE==20 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call DestroyEffect(LoadEffectHandle(HY,ZAE,6))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set tt_unit1=source
    set unit189=source
    set integer488=GetUnitAbilityLevel(source,'A05G')
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),275,Condition(function Func2679))
    call ForGroup(g,function Func2678)
    call KillGroup(g)
    set g=null
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func2681 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  call PurgingTriggered(u,false)
  call Func0860(u)
  call TriggerRegisterTimerEvent(t,0.25,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func2680))
  call SaveUnitHandle(HY,(h),2,(u))
  if GetUnitTypeId(u)!=HeroID[12]then
    call SaveEffectHandle(HY,h,6,AddSpecialEffectTarget("war3mapImported\\SpinFX2.mdx",u,"origin"))
  endif
  call TriggerEvaluate(t)
  call AddTimedKeyToAgent(u,4252,5)
  set u=null
  set t=null
endfunction

function Func2682 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'B339')>0
endfunction

function Func2683 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local group g=GetAvailableGroup()
  local unit w=LoadUnitHandle(HY,h,0)
  local unit u
  local real x
  local real y
  local integer i=0
  local real M3I=LoadReal(HY,h,0)
  local player p=GetOwningPlayer(w)
  if IsDead(w)then
    set x=LoadReal(HY,h,10)
    set y=LoadReal(HY,h,11)
  else
    set x=GetUnitX(w)
    set y=GetUnitY(w)
    call SaveReal(HY,h,10,x)
    call SaveReal(HY,h,11,y)
  endif
  call GroupEnumUnitsInRange(g,x,y,800,Condition(function Func2682))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    call SetWidgetLife(u,GetWidgetLife(u)+GetUnitState(u,UNIT_STATE_MAX_LIFE)*M3I)
    call FuckingAssistBuffWrap(w,u)
    set i=i+1
  endloop
  if i==0 and IsDead(w)then
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  endif
  call KillGroup(g)
  set w=null
  set t=null
  return false
endfunction

function Func2684 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A338')
  local unit w=CreateUnit(GetOwningPlayer(u),'o00C',GetSpellTargetX(),GetSpellTargetY(),0)
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  if SGE!=null then
    call IssueTargetOrder(w,"move",SGE)
  endif
  call UnitApplyTimedLife(w,'BTLF',25)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call SaveUnitHandle(HY,h,0,w)
  call SaveReal(HY,h,0,0.001+0.001*QIE)
  call SaveReal(HY,h,10,GetUnitX(w))
  call SaveReal(HY,h,11,GetUnitY(w))
  call TriggerAddCondition(t,Condition(function Func2683))
  set u=null
  set w=null
  set SGE=null
  set t=null
endfunction

function Func2685 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local real result
  local real ZEE
  local real ZWE
  local real ZYE
  if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>2 and IsPlayerBelongToTeams(GetOwningPlayer(GetEventDamageSource())))then
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),175))
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),176))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH then
    set result=GetUnitX(source)
    set ZEE=GetUnitY(source)
    set ZWE=GetUnitX(RCX)
    set ZYE=GetUnitY(RCX)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",result,ZEE))
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",ZWE,ZYE))
    call AddTimedKeyToAgent(RCX,4410,1)
    call SetUnitPosition(RCX,GetUnitX(source),GetUnitY(source))
    call AddTimedKeyToAgent(RCX,'gtot',0.2)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),175))
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),176))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func2686 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local real d
  if IsUnitAlly(u,GetOwningPlayer(tt_unit1))then
    set d=DistanceBetweenXY(GetUnitX(u),GetUnitY(u),real064,real065)
    if u!=tt_unit1 and IsUnitHidden(u)==false and IsDead(u)==false then
      if d<real063 then
        set unit190=u
        set real063=d
      endif
    endif
  endif
  set u=null
endfunction

function Func2687 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local trigger t
  local integer h
  local real d
  local group g
  if SGE==null then
    set unit190=null
    set real063=999999
    set real064=GetSpellTargetX()
    set real065=GetSpellTargetY()
    set tt_unit1=SKE
    call ForGroup(group004,function Func2686)
    set SGE=unit190
  endif
  if Func1474(SGE)then
    set SGE=null
    call Error(GetOwningPlayer(SKE),GetObjectName('n038'))
  endif
  if GetSpellAbilityId()=='A10U' then
    set d=5
  elseif GetSpellAbilityId()=='A11Y' then
    set d=4
  elseif GetSpellAbilityId()=='A11Z' then
    set d=3
  elseif GetSpellAbilityId()=='A1N1' then
    set d=3
  endif
  if SGE!=null then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
    call TriggerRegisterTimerEvent(t,d,false)
    call TriggerAddCondition(t,Condition(function Func2685))
    call SaveUnitHandle(HY,(h),2,(SKE))
    call SaveUnitHandle(HY,(h),17,(SGE))
    call SaveEffectHandle(HY,(h),175,(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",SKE,"origin")))
    call SaveEffectHandle(HY,(h),176,(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",SGE,"origin")))
  endif
  set SGE=null
  set SKE=null
  set t=null
endfunction

function Func2688 takes nothing returns nothing
  if GetSpellTargetUnit()!=null then
    if Func1474(GetSpellTargetUnit())then
      call Func0658('n038')
    elseif NonHeroId(GetSpellTargetUnit())then
      call Func0658('n0K9')
    endif
  endif
endfunction

function Func2689 takes integer ZAE returns integer
  if ZAE==1 then
    return'A10Z'
  elseif ZAE==2 then
    return'A111'
  elseif ZAE==3 then
    return'A10Y'
  elseif ZAE==4 then
    return'A110'
  endif
  return 0
endfunction

function Func2690 takes integer ZAE returns integer
  if ZAE==1 then
    return'B09M'
  elseif ZAE==2 then
    return'B09N'
  elseif ZAE==3 then
    return'B09O'
  elseif ZAE==4 then
    return'B09L'
  endif
  return 0
endfunction

function Func2691 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=(LoadInteger(HY,h,5))
  local real lx=(LoadReal(HY,h,23))
  local real ly=(LoadReal(HY,h,24))
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  local real ILX=SquareRoot((lx-x)*(lx-x)+(ly-y)*(ly-y))
  local real J0O=(0.00050)*ILX*GetUnitState(SGE,UNIT_STATE_MAX_MANA)
  local integer c=GetTriggerEvalCount(t)
  local integer id=LoadInteger(HY,h,10)
  if IsMagicImmune(SGE)or GetUnitAbilityLevel(SGE,'Avul')==1 then
    set J0O=0
  endif
  if ILX>300 then
    set J0O=0
  endif
  if J0O>1 and ModuloInteger(GetTriggerEvalCount(t),3)==0 then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",SGE,"chest"))
  endif
  if J0O>0 then
    call SetUnitState(SGE,UNIT_STATE_MANA,GetUnitState(SGE,UNIT_STATE_MANA)-J0O)
  endif
  call SaveReal(HY,h,23,((x)*1.0))
  call SaveReal(HY,h,24,((y)*1.0))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c==(QIE+3)*10 or GetUnitAbilityLevel(SGE,id)==0 or IsMagicImmune(SGE)then
    call UnitRemoveAbility(SGE,id)
    call UnitRemoveAbility(SGE,Func2690(QIE))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetUnitState(SGE,UNIT_STATE_MANA)<1 then
    call StunTargetEx(SGE,1+0.5*QIE,false)
    call UnitRemoveAbility(SGE,id)
    call UnitRemoveAbility(SGE,Func2690(QIE))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  return false
endfunction

function Func2692 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A10X')
  local integer id=Func2689(QIE)
  call UnitAddAbility2(SGE,id)
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveReal(HY,h,23,((GetUnitX(SGE))*1.0))
  call SaveReal(HY,h,24,((GetUnitY(SGE))*1.0))
  call SaveInteger(HY,h,10,id)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func2691))
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func2693 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group016)==false then
    call GroupAddUnit(group016,GetEnumUnit())
    call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+real023)
  endif
endfunction

function Func2694 takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and IsMagicImmune(GetFilterUnit())
endfunction

function Func2695 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,(h),22))
  local unit source=(LoadUnitHandle(HY,(h),2))
  local integer QIE=(LoadInteger(HY,(h),5))
  local real result=(LoadReal(HY,(h),13))
  local group IBI
  local real ZEE=(LoadReal(HY,(h),6))
  local real ZWE=(LoadReal(HY,(h),7))
  local integer ZBE=GetTriggerEvalCount(t)
  local real ZYE=1050*0.1
  if ZBE>19 then
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set ZEE=ZEE+ZBE*ZYE*Cos(result*bj_DEGTORAD)
    set ZWE=ZWE+ZBE*ZYE*Sin(result*bj_DEGTORAD)
    set IBI=GetAvailableGroup()
    set group016=g
    set tt_unit1=source
    set real023=(50*QIE)
    call GroupEnumUnitsInRange(IBI,ZEE,ZWE,375,Condition(function Func2694))
    call ForGroup(IBI,function Func2693)
    call KillGroup(IBI)
  endif
  set t=null
  set g=null
  set source=null
  set IBI=null
  return false
endfunction

function Func2696 takes nothing returns nothing
  if IsUnitAlly(tt_unit1,GetOwningPlayer(tt_unit3))then
    call SetWidgetLife(tt_unit1,GetWidgetLife(tt_unit1)+tt_int1*50.)
  endif
endfunction

function Func2697 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,(h),19))
  local real a=(LoadReal(HY,(h),13))
  local integer c=(LoadInteger(HY,(h),34))
  local real tx=GetUnitX(d)-50*Cos(a)
  local real ty=GetUnitY(d)-50*Sin(a)
  local unit PRI=CreateUnit(GetOwningPlayer(d),'e00E',tx,ty,0)
  local real PII=GetUnitX(PRI)+50*Cos(a)
  local real PAI=GetUnitY(PRI)+50*Sin(a)
  local unit PNI=udg_Hero[GetPlayerId(GetOwningPlayer(PRI))]
  local integer i=2
  local boolean b=IsTerrainPathable(PII,PAI,PATHING_TYPE_WALKABILITY)
  local string s=null
  if (GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00)and Func0898(PNI)then
    set s="Func2696"
  endif
  call SaveBoolean(TempHash,'wave','ally',true)
  call Func2325(PNI,'h02D',50.*IMaxIF(1,c),1200,350,350,tx,ty,PII,PAI,1050,1,false,s,IMaxIF(1,c))
  call KillUnit(d)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set PRI=null
  set d=null
  set PNI=null
  set t=null
  return false
endfunction

function Func2698 takes unit d,integer c,real a returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerAddCondition(t,Condition(function Func2697))
  call SaveUnitHandle(HY,(h),19,(d))
  call SaveReal(HY,(h),13,((a)*1.0))
  call SaveInteger(HY,(h),34,(c))
  set t=null
endfunction

function Func2699 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer c=(LoadInteger(HY,(h),34))
  local integer PDI=c-1
  local real a=(LoadReal(HY,(h),13))
  local unit d=(LoadUnitHandle(HY,(h),19))
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  local integer QIE=(LoadInteger(HY,(h),5))
  local integer XXO=2+QIE*2
  local boolean PFI=(LoadBoolean(HY,(h),240))
  local unit PGI
  if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
    call SaveInteger(HY,(h),34,(c+1))
  endif
  if HaveSavedHandle(HY,h,239)==false then
    call SetUnitX(d,GetUnitX(SKE)+150*Cos(a))
    call SetUnitY(d,GetUnitY(SKE)+150*Sin(a))
  endif
  call SetUnitScale(d,I2R(100+20*PDI)/100,I2R(100+20*PDI)/100,I2R(100+20*PDI)/100)
  if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and PFI==false)or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()=='A121')or PDI==XXO then
    if PFI then
      set PGI=(LoadUnitHandle(HY,(h),239))
      call ShowUnit(PGI,false)
      call UnitApplyTimedLife(PGI,'BTLF',1)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if(LoadInteger(HY,(GetHandleId(SKE)),704))==0 or(LoadInteger(HY,(GetHandleId(SKE)),704))=='A085' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A085',true)
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A121',false)
    call UnitRemoveAbility(SKE,'A121')
    call Func2698(d,PDI,a)
  endif
  set d=CreateUnit(GetOwningPlayer(d),'h06M',GetUnitX(d)+150*(PDI)*Cos(a),GetUnitY(d)+150*(PDI)*Sin(a),0)
  call UnitApplyTimedLife(d,'BTLF',7)
  set t=null
  set d=null
  set SKE=null
  set PGI=null
  return false
endfunction

function Func2700 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  call IssueImmediateOrderByIdExFunc(u,851972)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func2701 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a=Atan2(ty-GetUnitY(SKE),tx-GetUnitX(SKE))
  local unit d
  local unit PGI
  local boolean PFI=false
  if ty==GetUnitY(SKE)and tx==GetUnitX(SKE)then
    set a=GetUnitFacing(SKE)*bj_DEGTORAD
  endif
  set d=CreateUnit(GetOwningPlayer(SKE),'u00J',GetUnitX(SKE)+150*Cos(a),GetUnitY(SKE)+150*Sin(a),a*bj_RADTODEG)
  if GetUnitTypeId(SKE)=='H06X' or GetUnitTypeId(SKE)=='H06Y' or GetUnitTypeId(SKE)=='H06W' then
    set PFI=true
  endif
  call SaveBoolean(HY,(h),240,(PFI))
  call SaveUnitHandle(HY,(h),14,(SKE))
  call SaveUnitHandle(HY,(h),19,(d))
  call SaveInteger(HY,(h),34,1)
  call SetUnitX(d,GetUnitX(SKE)+150*Cos(a))
  call SetUnitY(d,GetUnitY(SKE)+150*Sin(a))
  call SaveInteger(HY,(h),5,(GetUnitAbilityLevel(SKE,'A085')))
  call SaveReal(HY,(h),13,((a)*1.0))
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func2699))
  if PFI then
    set PGI=CreateUnit(GetOwningPlayer(SKE),'h06Z',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
    call SetUnitX(PGI,GetUnitX(SKE))
    call SetUnitY(PGI,GetUnitY(SKE))
    call SetUnitAnimation(PGI,"spell")
    call QueueUnitAnimation(PGI,"spell")
    call QueueUnitAnimation(PGI,"spell")
    call SetUnitVertexColor(PGI,255,255,255,75)
    call SaveUnitHandle(HY,(h),239,(PGI))
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerAddCondition(t,Condition(function Func2700))
    call SaveUnitHandle(HY,(h),14,(SKE))
  endif
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A085',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A121',true)
  call UnitAddAbilityTimedExF(SKE,'A121',1,6,0)
  set t=null
  set SKE=null
  set d=null
  set PGI=null
endfunction

function Func2702 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,17))
  local real mp=(LoadReal(HY,h,242))
  local real K2O
  local boolean b=GetTriggerEventId()==EVENT_WIDGET_DEATH
  if LoadBoolean(HY,h,0)==false then
    call SaveBoolean(HY,h,0,true)
    call UnitAddAbilityTimedExF(u,'A3DU'-1+LoadInteger(HY,h,5),1,15,'B3DU')
    if GetUnitState(u,UNIT_STATE_MAX_MANA)>0 then
      set K2O=GetUnitState(u,UNIT_STATE_MANA)
      call Func0168(u,GetUnitState(u,UNIT_STATE_MAX_MANA)+mp)
      call SetUnitState(u,UNIT_STATE_MANA,K2O)
      call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+mp)
      call TriggerRegisterTimerEvent(t,15,false)
      call TriggerRegisterDeathEvent(t,u)
    else
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  elseif b then
    call TriggerRegisterTimerEvent(t,0,false)
  else
    if not b then
      set K2O=GetUnitState(u,UNIT_STATE_MANA)
    endif
    call Func0168(u,Func0468(0,GetUnitState(u,UNIT_STATE_MAX_MANA)-mp))
    if not b then
      call SetUnitState(u,UNIT_STATE_MANA,K2O)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set u=null
  set t=null
  return false
endfunction

function Func2703 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(SKE,'A112'))
  call SaveReal(HY,h,242,((75*GetUnitAbilityLevel(SKE,'A112'))*1.0))
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerAddCondition(t,Condition(function Func2702))
  call FuckingAssistBuffWrap(SKE,SGE)
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func2704 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=Atan2(ZEE-real067,result-real066)
  set result=SafeX50(result+40*Cos(ZWE))
  set ZEE=SafeY50(ZEE+40*Sin(ZWE))
  call KillTrees(result,ZEE,150)
  call SetUnitX(source,result)
  call SetUnitY(source,ZEE)
  set source=null
endfunction

function Func2705 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetEnumUnit(),'A3PZ',1,3+integer489,'B09K')
endfunction

function Func2706 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  local real result=(LoadReal(HY,(ZAE),189))
  local real ZEE=(LoadReal(HY,(ZAE),190))
  local integer QIE=(LoadInteger(HY,(ZAE),59))
  local group g=(LoadGroupHandle(HY,(ZAE),22))
  local integer ZBE=GetTriggerEvalCount(RBX)
  set real066=result
  set real067=ZEE
  call ForGroup(g,function Func2704)
  if ZBE==10 then
    if QIE=='A11X' then
      set integer489=1
    elseif QIE=='A11V' then
      set integer489=2
    else
      set integer489=3
    endif
    set tt_player1=whichPlayer
    call ForGroup(g,function Func2705)
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call EvasionSourceActivate(10,8)
  endif
  set RBX=null
  set whichPlayer=null
  set g=null
  return false
endfunction

function Func2707 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  local real result=(LoadReal(HY,(ZAE),189))
  local real ZEE=(LoadReal(HY,(ZAE),190))
  local integer QIE=(LoadInteger(HY,(ZAE),59))
  local group g=(LoadGroupHandle(HY,(ZAE),22))
  call CleanTrigger(RBX)
  call FlushChildHashtable(HY,(ZAE))
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.04,true)
  call TriggerAddCondition(RBX,Condition(function Func2706))
  call SavePlayerHandle(HY,(ZAE),54,(whichPlayer))
  call SaveReal(HY,(ZAE),189,((result)*1.0))
  call SaveReal(HY,(ZAE),190,((ZEE)*1.0))
  call SaveGroupHandle(HY,(ZAE),22,(g))
  call SaveInteger(HY,(ZAE),59,(QIE))
  set RBX=null
  set whichPlayer=null
  set g=null
  return false
endfunction

function Func2708 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local group g=GetAvailableGroup()
  local unit source=GetTriggerUnit()
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  call KillUnit(CreateUnit(GetOwningPlayer(source),'h06P',result,ZEE,0))
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,result,ZEE,700,Condition(function Func0821))
  call TriggerRegisterTimerEvent(RBX,0.4,false)
  call TriggerAddCondition(RBX,Condition(function Func2707))
  call SavePlayerHandle(HY,(ZAE),54,(GetOwningPlayer(GetTriggerUnit())))
  call SaveReal(HY,(ZAE),189,((result)*1.0))
  call SaveReal(HY,(ZAE),190,((ZEE)*1.0))
  call SaveGroupHandle(HY,(ZAE),22,(g))
  call SaveInteger(HY,(ZAE),59,(GetSpellAbilityId()))
  set RBX=null
  set g=null
  set source=null
endfunction

function Func2709 takes nothing returns nothing
  call AddToPurgeList('A3DU','PRGA')
  call AddToPurgeList('A3DV','PRGA')
  call AddToPurgeList('A3DW','PRGA')
  call AddToPurgeList('A3DX','PRGA')
  call AddToPurgeList('B3DU','PRGA')
  call AddToPurgeList('A10Z','PRGE')
  call AddToPurgeList('A111','PRGE')
  call AddToPurgeList('A10Y','PRGE')
  call AddToPurgeList('A110','PRGE')
  call AddToPurgeList('B09M','PRGE')
  call AddToPurgeList('B09N','PRGE')
  call AddToPurgeList('B09O','PRGE')
  call AddToPurgeList('B09L','PRGE')
  set IsNotItemAbility=true
  call AddToPurgeList('B09K','PRGE')
  call AddToPurgeList('A3PZ','PRGE')
endfunction

function Func2710 takes nothing returns boolean
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),305))
  if source==null or IsDead(source)or (GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00)==false or Func0898(source)==false then
    call ShowUnit(RCX,false)
  else
    call ShowUnit(RCX,true)
    call SetUnitX(RCX,GetUnitX(source))
    call SetUnitY(RCX,GetUnitY(source))
  endif
  if GetOwningPlayer(RCX)!=GetOwningPlayer(source)then
    call SetUnitOwner(RCX,GetOwningPlayer(source),true)
  endif
  set source=null
  set RCX=null
  return false
endfunction

function Func2711 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  if GetUnitTypeId(u)!='Hblm' then
    call UnitRemoveAbility(u,'A11X')
    call UnitRemoveAbility(u,'A10U')
    call UnitRemoveAbility(u,'A11V')
    call UnitRemoveAbility(u,'A11Y')
    call UnitRemoveAbility(u,'A11W')
    call UnitRemoveAbility(u,'A11Z')
  endif
  set u=null
endfunction

function Func2712 takes unit u returns nothing
  local integer QIE=GetUnitAbilityLevel(u,'A2XR')
  local trigger t
  local integer h
  call UnitRemoveAbility(u,'B0AA')
  call UnitRemoveAbility(u,'A11T')
  if GetUnitAbilityLevel(u,'A2KM')==0 then
    call UnitAddAbility2(u,'A2KM')
  endif
  if QIE==1 then
    call UnitAddAbility(u,'A2X4')
    call UnitRemoveAbility(u,'A2X4')
  elseif QIE==2 then
    call SetUnitAbilityLevel(u,'A2KM',QIE)
    call UnitAddAbility(u,'A2X3')
    call UnitRemoveAbility(u,'A2X3')
    call UnitRemoveAbility(u,'A11X')
    call UnitRemoveAbility(u,'A10U')
    call UnitAddAbility2(u,'A11V')
    call UnitAddAbility2(u,'A11Y')
  elseif QIE==3 then
    call SetUnitAbilityLevel(u,'A2KM',QIE)
    call UnitAddAbility(u,'A2X5')
    call UnitRemoveAbility(u,'A2X5')
    call UnitRemoveAbility(u,'A11X')
    call UnitRemoveAbility(u,'A10U')
    call UnitRemoveAbility(u,'A11V')
    call UnitRemoveAbility(u,'A11Y')
    call UnitAddAbility2(u,'A11W')
    call UnitAddAbility2(u,'A11Z')
  endif
  if QIE>0 then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.2,true)
    call TriggerAddCondition(t,Condition(function Func2710))
    call SaveUnitHandle(HY,(h),2,(u))
    call SaveUnitHandle(HY,(h),305,(CreateUnit(GetOwningPlayer(u),'o01A',GetUnitX(u),GetUnitY(u),0)))
    set t=null
  endif
endfunction

function Func2713 takes nothing returns nothing
  call Func2712(tt_unit1)
endfunction

function Func2714 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local integer ZAE=GetUnitAbilityLevel(source,'A2XQ')
  if ZAE==1 then
    call UnitAddAbility2(source,'A11T')
  elseif ZAE==2 then
    call SetUnitAbilityLevel(source,'A11T',ZAE)
  elseif ZAE==3 then
    call SetUnitAbilityLevel(source,'A11T',ZAE)
  endif
  set source=null
endfunction

function Func2715 takes nothing returns nothing
  call Func2712(GetTriggerUnit())
endfunction

function Func2716 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  local real JOX=LoadReal(HY,h,0)
  local integer QIE
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or JOX<TimerGetElapsed(GlobalTimer)then
    call Stats_Fucking_Modify(u,-LoadInteger(HY,h,10),"+AS")
    call Stats_Fucking_Modify(u,-LoadInteger(HY,h,11),"+MS")
    call UnitRemoveAbility(u,'A3OQ')
    call UnitRemoveAbility(u,'A3OR')
    call UnitRemoveAbility(u,'A3OS')
    call UnitRemoveAbility(u,'a3OQ')
    call UnitRemoveAbility(u,'a3OR')
    call UnitRemoveAbility(u,'a3OS')
    call RemoveSavedHandle(HY,hu,'A18X')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set u=null
  set t=null
  return false
endfunction

function Func2717 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A18X')
  local trigger t
  local integer h
  local integer PWI
  local integer PYI
  local integer PZI
  local integer P_I
  local integer c
  if HaveSavedHandle(HY,GetHandleId(u),'A18X')then
    set t=LoadTriggerHandle(HY,GetHandleId(u),'A18X')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerRegisterDeathEvent(t,u)
    call SaveUnitHandle(HY,h,0,u)
    call SaveTriggerHandle(HY,GetHandleId(u),'A18X',t)
    call TriggerAddCondition(t,Condition(function Func2716))
    call SaveInteger(HY,h,1,QIE)
  endif
  call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+10.)
  set c=LoadInteger(HY,h,0)
  if c<3 or QIE!=LoadInteger(HY,h,1)then
    set c=Func0464(c+1,3)
    set PWI=R2I((0.25+0.15*QIE)*c*100)
    set PYI=R2I((0.04+0.01*QIE)*c*100)
    set PZI=LoadInteger(HY,h,10)
    set P_I=LoadInteger(HY,h,11)
    if PWI!=PZI then
      call Stats_Fucking_Modify(u,PWI-PZI,"+AS")
      call SaveInteger(HY,h,10,PWI)
    endif
    if PYI!=P_I then
      call Stats_Fucking_Modify(u,PYI-P_I,"+MS")
      call SaveInteger(HY,h,11,PYI)
    endif
    call SaveInteger(HY,h,0,c)
    call SaveInteger(HY,h,1,QIE)
  endif
  call UnitRemoveAbility(u,'A3OQ')
  call UnitRemoveAbility(u,'A3OR')
  call UnitRemoveAbility(u,'A3OS')
  call UnitRemoveAbility(u,'a3OQ')
  call UnitRemoveAbility(u,'a3OR')
  call UnitRemoveAbility(u,'a3OS')
  set c=Func0464(c,3)
  call UnitAddAbility2(u,'A3OQ'-1+c)
  set t=null
  set u=null
endfunction

function Func2718 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local integer QIE=LoadInteger(HY,h,0)
  local unit u
  local group g=GetAvailableGroup()
  local real FTX=1.3+0.3*QIE
  local real FOX=40+40*QIE
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,LoadReal(HY,h,10),LoadReal(HY,h,11),245,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call DamageTarget(SKE,u,1,FOX)
    if IsDead(u)==false then
      call StunTargetEx(u,FTX,false)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call KillTrees(LoadReal(HY,h,10),LoadReal(HY,h,11),225)
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set SKE=null
  set t=null
endfunction

function Func2719 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.5,false,function Func2718)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(GetTriggerUnit(),'A027'))
  call SaveReal(HY,h,10,GetSpellTargetX())
  call SaveReal(HY,h,11,GetSpellTargetY())
  set t=null
endfunction

function Func2720 takes nothing returns boolean
  if(GetSpellAbilityId()=='A01F' or GetSpellAbilityId()=='A027' or GetSpellAbilityId()=='A01P' or GetSpellAbilityId()=='A09Z')and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0 then
    call Func2717()
  endif
  return false
endfunction

function Func2721 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func2720))
  set RBX=null
  set source=null
endfunction

function Func2722 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call DamageTarget(LoadUnitHandle(HY,h,0),LoadUnitHandle(HY,h,1),LoadInteger(HY,h,0),LoadReal(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func2723 takes nothing returns nothing
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())
  local real dmg
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.25,false,function Func2722)
  if QIE==1 then
    set dmg=450
  elseif QIE==2 then
    set dmg=650
  elseif QIE==3 then
    set dmg=850
  endif
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
  call SaveReal(HY,h,0,dmg)
  if GetSpellAbilityId()=='A01P' then
    call SaveInteger(HY,h,0,1)
  else
    call SaveInteger(HY,h,0,7)
  endif
  set t=null
endfunction

function Func2724 takes nothing returns nothing
  if IsMagicImmune(GetSpellTargetUnit())then
    call Func0658('n0LR')
  endif
endfunction

function Func2725 takes nothing returns nothing
endfunction

function Func2726 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),tt_player1)
endfunction

function Func2727 takes real x,real y,unit P5I,group F2X,unit P6I returns unit
  local unit d=CreateUnit(GetOwningPlayer(P5I),'e00E',GetUnitX(P5I),GetUnitY(P5I),0)
  local real ILX=9999.
  local real td
  local unit u2
  local unit P7I=null
  local integer i=0
  local group g=GetAvailableGroup()
  set tt_player1=GetOwningPlayer(P5I)
  call GroupEnumUnitsInRange(g,x,y,650,Condition(function Func2726))
  if P6I!=null then
    call GroupRemoveUnit(g,P6I)
    call GroupRemoveUnit(F2X,P6I)
  endif
  if F2X!=null then
    call GroupRemoveGroup(F2X,g)
  endif
  call UnitAddAbility(d,'A3RT')
  loop
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call IssueImmediateOrderByIdExFunc(d,851972)
      if IssueTargetOrderByIdFuckingEx(d,852248,u2,false)then
        set td=DistanceBetweenXY(x,y,GetUnitX(u2),GetUnitY(u2))
        if td<ILX then
          set ILX=td
          set P7I=u2
        endif
      endif
    endloop
    if(P7I==null or(ILX>500. and not(IsUnitType(P7I,UNIT_TYPE_STRUCTURE)or IsUnitType(P6I,UNIT_TYPE_STRUCTURE))))and F2X!=null then
      call GroupAddGroup(F2X,g)
      set P7I=null
    else
      exitwhen true
    endif
    exitwhen P7I!=null or i>0
    set i=1
    set ILX=9999.
  endloop
  call KillUnit(d)
  set d=null
  call KillGroup(g)
  if P7I!=null and(ILX<=500. or IsUnitType(P7I,UNIT_TYPE_STRUCTURE)or IsUnitType(P6I,UNIT_TYPE_STRUCTURE))then
    set tt_unit1=P7I
    set P7I=null
    return tt_unit1
  endif
  set P7I=null
  return null
endfunction

function Func2728 takes unit from,unit to,unit P5I,real dmg,integer P9I,group g,boolean first returns boolean
  local trigger t
  local integer h
  if to==null then
    return false
  endif
  if first then
    set t=AddProjectile(from,to,'h02E',"Func2729",900,true)
  else
    set t=GetTriggeringTrigger()
  endif
  set h=GetHandleId(t)
  if first then
    call SaveBoolean(HY,h,'dnds',true)
    set g=GetAvailableGroup()
    call SaveGroupHandle(HY,h,'dmgd',g)
    call SaveUnitHandle(HY,h,'0src',P5I)
  else
    call SaveUnitHandle(HY,h,30,to)
  endif
  call SaveReal(HY,h,'0dmg',dmg)
  call SaveInteger(HY,h,'totl',P9I)
  call GroupAddUnit(g,from)
  set t=null
  return true
endfunction

function Func2729 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit SGE=tt_unit3
  local unit P5I=LoadUnitHandle(HY,h,'0src')
  local real dmg=LoadReal(HY,h,'0dmg')
  local integer P9I=LoadInteger(HY,h,'totl')-1
  local real x
  local real y
  local group QEI=LoadGroupHandle(HY,h,'dmgd')
  call DamageTarget(P5I,SGE,2,dmg)
  if P9I>0 then
    set x=GetUnitX(SGE)
    set y=GetUnitY(SGE)
    if not Func2728(SGE,Func2727(x,y,P5I,QEI,SGE),P5I,dmg*0.65,P9I,QEI,false)then
      call KillGroup(QEI)
    endif
  else
    call KillGroup(QEI)
  endif
  set SGE=null
  set P5I=null
endfunction

function Func2730 takes nothing returns nothing
  local integer QIE=GetUnitAbilityLevel(CastedUnit,'A041')
  local unit P5I
  local unit SGE
  local real dmg
  local unit P7I
  local real x
  local real y
  if QIE>0 and GetUnitAbilityLevel(CastedUnit,'A36D')==0 then
    set P5I=CastedUnit
    set SGE=TriggeredUnit
    set dmg=GetUnitAttackDamage(P5I)
    set P7I=Func2727(GetUnitX(SGE),GetUnitY(SGE),P5I,null,SGE)
    call Func2728(SGE,P7I,P5I,dmg*0.65,QIE+QIE/4*2,null,true)
  endif
  set P7I=null
  set P5I=null
  set SGE=null
endfunction

function Func2731 takes nothing returns nothing
  if GetLearnedSkillLevel()==4 then
    call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),'Remg',5)
  else
    call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),'Remg',GetLearnedSkillLevel())
  endif
endfunction

function Func2732 takes nothing returns nothing
  call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),'R00I',1)
endfunction

function Func2733 takes nothing returns nothing
  call AddWrapper("Func2730",0)
endfunction

function Func2734 takes nothing returns nothing
  call SaveBoolean(MHT,'DARK',0,false)
  call SuspendTimeOfDay(false)
  call SetFloatGameState(GAME_STATE_TIME_OF_DAY,LoadReal(MHT,'DARK',1))
endfunction

function Func2735 takes real D1E,boolean b returns nothing
  local real QII=TimerGetElapsed(GlobalTimer)
  local real QAI=LoadReal(MHT,'DARK',0)
  local real endTime
  local real QNI
  local real FFX
  set QNI=D1E/ 20.0
  if QII+D1E>QAI then
    call TimerStart(timer006,D1E+0.1,false,function Func2734)
    call SaveReal(MHT,'DARK',0,QII+D1E)
    call SuspendTimeOfDay(true)
    if LoadBoolean(MHT,'DARK',0)==false then
      set QII=GetFloatGameState(GAME_STATE_TIME_OF_DAY)
      set FFX=QII+QNI
      if FFX>=24 then
        set FFX=FFX-24.
      endif
      call SaveReal(MHT,'DARK',1,FFX)
    endif
    if b then
      call SetFloatGameState(GAME_STATE_TIME_OF_DAY,0)
    endif
    call SaveBoolean(MHT,'DARK',0,true)
  endif
endfunction

function Func2736 takes nothing returns boolean
  if(GetUnitTypeId((GetFilterUnit()))=='u009')or(IsMagicImmune(GetFilterUnit())==false and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false))then
    if(LoadInteger(HY,(integer490),(GetHandleId(GetFilterUnit()))))<integer089 then
      return true
    endif
  endif
  return false
endfunction

function Func2737 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local integer QDI=(LoadInteger(HY,h,217))
  local integer Y1E=(LoadInteger(HY,h,216))
  local integer XXO=(LoadInteger(HY,h,218))
  local group g=GetAvailableGroup()
  local real x
  local real y
  local unit u
  local real rx=GetRandomInt(200,350)
  local real ry=GetRandomInt(200,350)
  local boolean b
  local unit QFI=LoadUnitHandle(HY,h,0)
  if GetRandomInt(1,2)==1 then
    set rx=-1*rx
    set ry=-1*ry
  endif
  if LoadBoolean(HY,h,0)then
    set b=true
    set x=LoadReal(HY,h,0)
    set y=LoadReal(HY,h,1)
  else
    set b=IsDead(SKE)==false
    set x=GetUnitX(SKE)
    set y=GetUnitY(SKE)
  endif
  set tt_unit1=SKE
  set integer089=XXO
  set integer490=GetHandleId(t)
  call GroupEnumUnitsInRange(g,x,y,700,Condition(function Func2736))
  set u=GroupPickRandomUnit(g)
  call KillGroup(g)
  if b and u!=null and(GetUnitTypeId(u)=='u009')==false then
    call SaveInteger(HY,(integer490),(GetHandleId(u)),((LoadInteger(HY,(integer490),(GetHandleId(u))))+1))
    call Func0690("effects\\Eclipse.mdx",u,"origin",3)
    call DamageTarget(QFI,u,1,QDI*75)
  elseif b then
    set x=x+GetRandomInt(-350,350)
    set y=y+GetRandomInt(-350,350)
    call Func0692("effects\\Eclipse.mdx",x,y,1.5)
  endif
  if(GetTriggerEvalCount(t)+1)==Y1E or b==false then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set QFI=null
  set t=null
  set SKE=null
  set g=null
  set u=null
  return false
endfunction

function Func2738 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer Y1E
  local integer QDI=GetUnitAbilityLevel(SKE,'A042')
  local integer XXO
  if QDI==0 and GetUnitTypeId(SKE)!='E005' then
    set QDI=4
  endif
  if GetSpellAbilityId()=='A054' then
    set Y1E=2+3*GetUnitAbilityLevel(SKE,'A054')
    call SaveUnitHandle(HY,h,0,SKE)
    set XXO=5
    call Func0526("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdx",GetUnitX(SKE),GetUnitY(SKE),2)
    call TriggerRegisterTimerEvent(t,0.6,true)
  else
    set Y1E=6*GetUnitAbilityLevel(SKE,'A00U')
    set XXO=60
    call SaveUnitHandle(HY,h,0,SKE)
    call TriggerRegisterTimerEvent(t,0.3,true)
    if GetSpellTargetUnit()==null then
      call SaveBoolean(HY,h,0,true)
      call SaveReal(HY,h,0,GetSpellTargetX())
      call SaveReal(HY,h,1,GetSpellTargetY())
      call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(SKE),'o01P',GetSpellTargetX(),GetSpellTargetY(),0),'BTLF',7)
      call Func0526("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdx",GetSpellTargetX(),GetSpellTargetY(),2)
    else
      set SKE=GetSpellTargetUnit()
      call AddEffectTargetTimed("Units\\NightElf\\Owl\\Owl.mdl",SKE,"origin",4)
      call Func0526("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdx",GetUnitX(SKE),GetUnitY(SKE),2)
    endif
  endif
  call SaveInteger(HY,h,217,(QDI))
  call SaveInteger(HY,h,216,(Y1E))
  call SaveInteger(HY,h,218,(XXO))
  call SaveUnitHandle(HY,h,14,(SKE))
  call TriggerAddCondition(t,Condition(function Func2737))
  call TriggerEvaluate(t)
  call Func2735(10.,true)
  set t=null
  set SKE=null
endfunction

function Func2739 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",GetEnumUnit(),"origin"))
endfunction

function Func2740 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  call DamageTarget(source,RCX,1,0.75*(GetUnitAbilityLevel(source,'A0KV')+GetUnitAbilityLevel(source,'A3UG'))*75)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func2741 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local group g
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  if IsDead(RCX)then
    set g=GetAvailableGroup()
    set tt_unit1=source
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),475,Condition(function Func0814))
    set RCX=GetClosestOfGroup(g,GetUnitX(source),GetUnitY(source))
    call KillGroup(g)
    set g=null
  endif
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  if RCX!=null then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",RCX,"origin"))
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveUnitHandle(HY,(ZAE),14,(source))
    call SaveUnitHandle(HY,(ZAE),17,(RCX))
    call TriggerRegisterTimerEvent(RBX,0.5,false)
    call TriggerAddCondition(RBX,Condition(function Func2740))
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func2742 takes nothing returns nothing
  call DamageTarget(unit191,GetEnumUnit(),1,real068)
endfunction

function Func2743 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local group g=(LoadGroupHandle(HY,(ZAE),22))
  set real068=(GetUnitAbilityLevel(source,'A0KV')+GetUnitAbilityLevel(source,'A3UG'))*75
  set unit191=source
  call ForGroup(g,function Func2742)
  call KillGroup(g)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set g=null
  return false
endfunction

function Func2744 takes nothing returns nothing
  if DistanceBetweenUnits(unit191,GetEnumUnit())<=675. then
    call GroupAddUnit(group016,GetEnumUnit())
  endif
endfunction

function Func2745 takes unit SKE,boolean QQI returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local group g=GetAvailableGroup()
  local unit u2
  set tt_unit1=SKE
  set unit191=SKE
  set group016=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),900,Condition(function Func0814))
  call ForGroup(g,function Func2744)
  call KillGroup(g)
  set g=group016
  call ForGroup(g,function Func2739)
  call SaveGroupHandle(HY,(h),22,(g))
  call SaveUnitHandle(HY,(h),14,(SKE))
  call TriggerRegisterTimerEvent(t,0.5,false)
  call TriggerAddCondition(t,Condition(function Func2743))
  if QQI then
    set unit191=SKE
    set tt_unit1=SKE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),475,Condition(function Func0814))
    set u2=GetClosestOfGroup(g,GetUnitX(SKE),GetUnitY(SKE))
    call KillGroup(g)
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,(h),14,(SKE))
    call SaveUnitHandle(HY,(h),17,(u2))
    call SaveEffectHandle(HY,(h),32,(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl",SKE,"origin")))
    call TriggerRegisterTimerEvent(t,1,false)
    call TriggerAddCondition(t,Condition(function Func2741))
  endif
  set t=null
  set g=null
  set SKE=null
  set u2=null
endfunction

function Func2746 takes nothing returns nothing
  call Func2745(GetTriggerUnit(),true)
endfunction

function Func2747 takes nothing returns nothing
  call UnitRemoveAbility(tt_unit1,'A3UF')
endfunction

function Func2748 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,0)
  local boolean first=LoadBoolean(HY,h,0)
  local group g
  if first then
    call RemoveSavedBoolean(HY,h,0)
    call TimerStart(GetExpiredTimer(),1.,true,function Func2748)
  endif
  if c>0 then
    set c=c-1
    call SaveInteger(HY,h,0,c)
  endif
  if c==0 and GetUnitAbilityLevel(u,'A3UG')>0 and GetUnitAbilityLevel(u,'A36D')==0 then
    set g=GetAvailableGroup()
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),725,Condition(function Func0814))
    if FirstOfGroup(g)!=null and IsUnitVisibleEx(u,GetOwningPlayer(FirstOfGroup(g)))then
      call SaveInteger(HY,h,0,10)
      call Func2745(u,false)
    endif
    call KillGroup(g)
  endif
  set u=null
endfunction

function Func2749 takes nothing returns nothing
  local timer t=CreateTimer()
  local unit u=tt_unit1
  local integer h=GetHandleId(t)
  local real r1=Func0468(TimerGetElapsed(GlobalTimer)-R2I(TimerGetElapsed(GlobalTimer)),0.)
  call TimerStart(t,0,false,function Func2748)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,0)
  call SaveBoolean(HY,h,0,true)
  call SaveTimerHandle(HY,GetHandleId(u),'A3UF',t)
  set u=null
  set t=null
endfunction

function Func2750 takes nothing returns nothing
  call UnitAddAbility2(tt_unit1,'A3UF')
  if HaveSavedHandle(HY,GetHandleId(tt_unit1),'A3UF')==false then
    call Func2749()
  endif
endfunction

function Func2751 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and(GetUnitTypeId(GetFilterUnit())!=HeroID[9]or GetUnitAbilityLevel(GetFilterUnit(),'A0MB')<4)
endfunction

function Func2752 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'A37P')
  call UnitRemoveAbility(GetEnumUnit(),'A37Q')
  call UnitRemoveAbility(GetEnumUnit(),'A37R')
endfunction

function Func2753 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,h,220))
  call ForGroup(g,function Func2752)
  call KillGroup(g)
  call Func0694(t)
  set t=null
endfunction

function Potm_MoonlightShadows takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local timer t=CreateTimer()
  local integer cache=GetHandleId(t)
  local integer lvl=GetUnitAbilityLevel(source,('A0KU'))
  local real r=15
  local string s
  local unit u
  local group gg=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,0,0,15000,Condition(function Func2751))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    set s=""
    call RemoveEndlessFadetime(u)
    if GetUnitAbilityLevel(u,'A0MB')<3 then
      call UnitAddAbilityTimedExF(u,'A37P'-1+lvl,1,15.,0)
    endif
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",u,"chest"))
    if IsNeutralsOrObserversOrAllies(GetOwningPlayer(u))then
      set s="Moonlight_Shadow.mdx"
    endif
    call AddEffectTargetTimed(s,u,"overhead",15.)
    call GroupAddUnit(gg,u)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  call SaveGroupHandle(HY,(cache),220,(gg))
  call TimerStart(t,r,false,function Func2753)
  set t=null
endfunction

function Func2755 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(TmpUnit376))
endfunction

function Func2756 takes nothing returns nothing
  call AddToPurgeList('A3S4','PRGA')
  call AddToPurgeList('A3S5','PRGA')
  call AddToPurgeList('A3S6','PRGA')
  call AddToPurgeList('A3S7','PRGA')
  call AddToPurgeList('B077','PRGA')
endfunction

function Func2757 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetEnumUnit(),'A3S4',1,10.,'B077')
endfunction

function Func2758 takes unit source,integer QIE returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  set TmpUnit376=source
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),800,Condition(function Func2755))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitAddAbilityTimedExF(u2,'A3S4'+QIE-1,1,10.,'B077')
  endloop
  call KillGroup(g)
endfunction

function Func2759 takes unit source returns nothing
  local integer h=GetHandleId(source)
  local string s1=(LoadStr(HY,(h),206))
  local string s2=OrderId2String((LoadInteger(HY,(h),211)))
  local real targetX
  local real targetY
  local unit target
  local trigger t=(LoadTriggerHandle(HY,(h),204))
  local boolean ZSE=not(LoadBoolean(HY,(h),207))
  local boolean ZTE=(LoadBoolean(HY,(h),208))
  call DisableTrigger(t)
  call IssueImmediateOrderByIdExFunc(source,851972)
  if ZSE or ZTE then
    if s1=="Target"then
      set target=(LoadUnitHandle(HY,(h),215))
      call IssueTargetOrder(source,s2,target)
      set target=null
    elseif s1=="Point"then
      set targetX=(LoadReal(HY,(h),209))
      set targetY=(LoadReal(HY,(h),210))
      call IssuePointOrder(source,s2,targetX,targetY)
    else
      call IssueImmediateOrder(source,s2)
    endif
  endif
  call SaveBoolean(HY,(h),208,(false))
  call EnableTrigger(t)
  set t=null
endfunction

function Func2760 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  local real result=(LoadReal(HY,h,212))
  local real ZEE=(LoadReal(HY,h,213))
  local real ZWE=(LoadReal(HY,h,13))
  local real ZYE=GetUnitX(u)+30*Cos(ZWE*bj_DEGTORAD)
  local real ICX=GetUnitY(u)+30*Sin(ZWE*bj_DEGTORAD)
  local real N1X=200
  local real N2X=(1-result/ZEE)*N1X*2
  local integer c=LoadInteger(HY,h,0)-1
  if N2X>N1X then
    set N2X=N1X*2-N2X
  endif
  if(N2X<1 and result-ZEE!=0)or c<1 then
    call SaveBoolean(HY,(GetHandleId(u)),214,(false))
    call SetUnitFlyHeight(u,GetUnitDefaultFlyHeight(u),0)
    call SetUnitAnimation(u,"stand")
    call SetUnitPathing2(u,true)
    call Func2759(u)
    call PauseTimer(t)
    call FlushChildHashtable(HY,(h))
    call DestroyTimer(t)
  else
    call Func2343(u,0.03)
    call SaveInteger(HY,h,0,c)
    if N2X>N1X then
      set N2X=N1X*2-N2X
    endif
    call SetUnitFlyHeight(u,Func0468(N2X,0),0)
    call SetUnitX(u,SafeX50(ZYE))
    call SetUnitY(u,SafeY50(ICX))
    call SaveReal(HY,h,212,((result-30)*1.0))
  endif
  set t=null
  set u=null
endfunction

function Func2761 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,('A0LN'))
  local real ILX=500+100*QIE
  local real FOO=GetUnitFacing(u)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local real dx=SafeX50(x+ILX*Cos(FOO*bj_DEGTORAD))
  local real dy=SafeY50(y+ILX*Sin(FOO*bj_DEGTORAD))
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local trigger tt=(LoadTriggerHandle(HY,(GetHandleId(u)),204))
  set ILX=SquareRoot((x-dx)*(x-dx)+(y-dy)*(y-dy))
  call Func0770(u,false,0,0)
  call Func2758(u,QIE)
  if ILX>100 then
    call UnitAddAbility2(u,'Amrf')
    call UnitRemoveAbility(u,'Amrf')
    call SetUnitPathing2(u,false)
    call SetUnitAnimationByIndex(u,6)
    call DisableTrigger(tt)
    call IssueImmediateOrderByIdExFunc(u,851972)
    call EnableTrigger(tt)
    call SaveReal(HY,h,212,((ILX)*1.0))
    call SaveReal(HY,h,213,((ILX)*1.0))
    call SaveReal(HY,h,13,((FOO)*1.0))
    call SaveUnitHandle(HY,h,14,(u))
    call TimerStart(t,0.025,true,function Func2760)
    call SaveBoolean(HY,(GetHandleId(u)),214,(true))
    call SaveBoolean(HY,(GetHandleId(u)),208,(false))
    call SaveInteger(HY,h,0,R2I(ILX/ 1200/ 0.025))
  endif
  set tt=null
  set t=null
  set u=null
endfunction

function Func2762 takes nothing returns boolean
  return OrderId2String(GetIssuedOrderId())!="windwalk"
endfunction

function Func2763 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local integer ZAE=GetHandleId(source)
  local boolean ZSE=(LoadBoolean(HY,(ZAE),214))
  call SaveInteger(HY,(ZAE),211,(GetIssuedOrderId()))
  call SaveBoolean(HY,(ZAE),207,(false))
  if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
    if ZSE or Func0695(GetUnitX(source),GetUnitY(source),GetOrderPointX(),GetOrderPointY())>800 then
      call SaveStr(HY,(ZAE),206,("Point"))
      call SaveReal(HY,(ZAE),209,((GetOrderPointX())*1.0))
      call SaveReal(HY,(ZAE),210,((GetOrderPointY())*1.0))
    else
      call SaveBoolean(HY,(ZAE),207,(true))
    endif
  else
    call SaveStr(HY,(ZAE),206,("Instant"))
  endif
  if ZSE then
    call SaveBoolean(HY,(ZAE),208,(true))
  endif
  set source=null
endfunction

function Func2764 takes nothing returns nothing
  local unit source=(LoadUnitHandle(HY,(GetHandleId(GetExpiredTimer())),14))
  local integer ZAE=GetHandleId(source)
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local string ZJE=(LoadStr(HY,(ZAE),206))
  if ZJE=="Point"and Func0695(GetUnitX(source),GetUnitY(source),(LoadReal(HY,(ZAE),209)),(LoadReal(HY,(ZAE),210)))<100 then
    call SaveBoolean(HY,(ZAE),207,(true))
  endif
  set source=null
endfunction

function Func2765 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local timer AXX
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_ISSUED_ORDER)
  call TriggerAddAction(RBX,function Func2763)
  call TriggerAddCondition(RBX,Condition(function Func2762))
  call SaveTriggerHandle(HY,(GetHandleId(source)),204,(RBX))
  set AXX=CreateTimer()
  call SaveUnitHandle(HY,(GetHandleId(AXX)),14,(source))
  call TimerStart(AXX,0.3,true,function Func2764)
  call SaveTimerHandle(HY,(GetHandleId(source)),205,(AXX))
  set source=null
  set AXX=null
  set RBX=null
endfunction

function Func2766 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(TmpUnit376))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func2767 takes real result,real ZEE,real ZWE,real ZYE returns integer
  local real ICX=SquareRoot((ZWE-result)*(ZWE-result)+(ZYE-ZEE)*(ZYE-ZEE))
  return Func0464(R2I(ICX/150),11)
endfunction

function Func2768 takes nothing returns nothing
  local timer AXX=GetExpiredTimer()
  local integer ZAE=GetHandleId(AXX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),45))
  local real result=(LoadReal(HY,(ZAE),47))
  local real ZEE=(LoadReal(HY,(ZAE),48))
  local real ZWE=(LoadReal(HY,(ZAE),13))
  local real ZYE=GetUnitX(RCX)
  local real ICX=GetUnitY(RCX)
  local real N1X=SafeX50(GetUnitX(RCX)+30*Cos(ZWE))
  local real N2X=SafeY50(GetUnitY(RCX)+30*Sin(ZWE))
  local group g=GetAvailableGroup()
  local unit M_X
  local unit M0X
  local real N3X
  local real N4X
  local integer Q8I
  call SetUnitX(RCX,N1X)
  call SetUnitY(RCX,N2X)
  set TmpUnit376=source
  call GroupEnumUnitsInRange(g,N1X,N2X,140,Condition(function Func2766))
  set M0X=FirstOfGroup(g)
  call KillGroup(g)
  if M0X!=null then
    if IsUnitType(M0X,UNIT_TYPE_HERO)then
      call SaveInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'ARRW',LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'ARRW')+1)
      call Traffic_RegisterData("AA_Hits"+I2S(GetPlayerId(GetOwningPlayer(source))),LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'ARRW'))
    endif
    set N3X=(LoadReal(HY,(ZAE),191))
    set N4X=(LoadReal(HY,(ZAE),192))
    set M_X=CreateUnit(GetOwningPlayer(M0X),'e00E',ZYE,ICX,0)
    set Q8I=Func2767(N3X,N4X,ZYE,ICX)
    if Q8I<2 then
      call StunFor001(M0X)
    else
      call StunTargetEx(M0X,(Q8I-1)*0.5,false)
    endif
    if IsHeroUnitId(GetUnitTypeId(M0X))or IsUnitIdType(GetUnitTypeId(M0X),UNIT_TYPE_ANCIENT)then
      call DamageTarget(source,M0X,1,90*GetUnitAbilityLevel(source,('A0L8'))-40+(Func2767(N3X,N4X,ZYE,ICX)-1)*14)
    else
      call DamageTarget(source,M0X,1,9999)
    endif
    call KillUnit(RCX)
    call Func0694(AXX)
  elseif(N1X-result)*(N1X-result)+(N2X-ZEE)*(N2X-ZEE)<1600 then
    call KillUnit(RCX)
    call Func0694(AXX)
  endif
  set AXX=null
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
endfunction

function Func2769 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=SafeX50(GetUnitX(source))
  local real ZEE=SafeY50(GetUnitY(source))
  local real ZWE=GetSpellTargetX()
  local real ZYE=GetSpellTargetY()
  local real ICX=Atan2(ZYE-ZEE,ZWE-result)
  local timer AXX=CreateTimer()
  local integer ZAE=GetHandleId(AXX)
  local unit RCX=CreateUnit(GetOwningPlayer(source),('h005'),result,ZEE,ICX*bj_RADTODEG)
  call SaveInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'ARRW'+1,LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'ARRW'+1)+1)
  call Traffic_RegisterData("AA_Total"+I2S(GetPlayerId(GetOwningPlayer(source))),LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'ARRW'+1))
  call SetUnitFacing(RCX,ICX*bj_RADTODEG)
  call SetUnitPathing(RCX,false)
  set ZWE=SafeX50(result+3000*Cos(ICX))
  set ZYE=SafeY50(ZEE+3000*Sin(ICX))
  call SaveReal(HY,(ZAE),191,((result)*1.0))
  call SaveReal(HY,(ZAE),192,((ZEE)*1.0))
  call SaveReal(HY,(ZAE),47,((ZWE)*1.0))
  call SaveReal(HY,(ZAE),48,((ZYE)*1.0))
  call SaveReal(HY,(ZAE),13,((ICX)*1.0))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call SaveUnitHandle(HY,(ZAE),45,(RCX))
  call TimerStart(AXX,0.035,true,function Func2768)
  set source=null
  set AXX=null
  set RCX=null
endfunction

function Func2770 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SVI=(LoadUnitHandle(HY,h,17))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call FlushChildHashtable(HY,(GetHandleId(SVI)))
  call RemoveUnit(SVI)
  set t=null
  set SVI=null
  return false
endfunction

function Func2771 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SVI=(LoadUnitHandle(HY,h,2))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call FlushChildHashtable(HY,(GetHandleId(SVI)))
  call ShowUnit(SVI,false)
  set t=null
  set SVI=null
  return false
endfunction

function Func2772 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SVI=(LoadUnitHandle(HY,h,17))
  if GetTriggerEvalCount(t)==200 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(SVI)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",GetUnitX(SVI),GetUnitX(SVI)))
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,2,(SVI))
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerAddCondition(t,Condition(function Func2771))
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,15,false)
    call TriggerAddCondition(t,Condition(function Func2770))
    call SaveUnitHandle(HY,h,17,(SVI))
  else
    call SuspendHeroXP(SVI,true)
    call UnitModifySkillPoints(SVI,-25)
    if GetEmptyInventorySlots(SVI)>0 then
      call UnitAddItem(SVI,CreateItem('I02M',0,0))
    endif
  endif
  set t=null
  set SKE=null
  set SVI=null
  return false
endfunction

function Func2773 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer i=0
  local unit d
  local integer BFI='I02M'
  local integer k
  local integer id
  local item it
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  set boolean028=true
  set d=CreateUnit(GetOwningPlayer(u),GetUnitTypeId(SGE),GetUnitX(SGE),GetUnitY(SGE),GetUnitFacing(SGE))
  call SaveBoolean(HY,GetHandleId(d),'HBRD',true)
  set boolean028=false
  call SetHeroLevel(d,GetUnitLevel(SGE),false)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",d,"chest"))
  if IsSentinel(GetOwningPlayer(d))==false then
    set BFI='I0PC'
  endif
  if IsUnitOwnedByPlayer(u,LocalPlayer)then
    call SelectUnit(d,true)
  endif
  call DisableTrigger(t_manipulateitem)
  loop
    set it=UnitItemInSlot(SGE,i)
    set k=GetItemTypeId(it)
    if it!=null and k!=Item_Real[MixedWardsOrbs]and k!=Item_Real[MixedWardsSentry]and k!=Item_Real[integer203]and k!=Item_Real[integer287]and k!=Item_Real[Aegis]and k!=Item_Real[integer198]and k!=Item_Real[integer199]and k!=Item_Real[integer207]then
      if IsBottleWithRune(GetIndex(it))then
        set k=Item_Real[integer170]
      endif
      set it=CreateItem(k,0,0)
      set k=GetItemTypeId(it)
      if GetItemCharges(UnitItemInSlot(SGE,i))>0 then
        call SetItemCharges(it,GetItemCharges(UnitItemInSlot(SGE,i)))
      endif
      call UnitAddItem(d,it)
      call SetItemPlayer(it,GetOwningPlayer(d),false)
      if k==Item_Real[integer265]or k==Item_Real[integer266]or k==Item_Real[integer135]then
        call SetItemDropOnDeath(it,false)
      endif
    else
      call UnitAddItem(d,CreateItem(BFI,0,0))
    endif
    set i=i+1
    exitwhen i>5
  endloop
  call EnableTrigger(t_manipulateitem)
  call SetHeroStr(d,GetHeroStr(u,false),false)
  call SetHeroAgi(d,GetHeroAgi(u,false),false)
  call SetHeroInt(d,GetHeroInt(u,false),false)
  call UnitModifySkillPoints(d,-25)
  call SuspendHeroXP(d,true)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,d)
  call TriggerAddCondition(t,Condition(function Func2772))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,17,(d))
  set d=null
  set u=null
  set it=null
  set t=null
  set SGE=null
endfunction

function Func2774 takes nothing returns boolean
  local unit source=GetFilterUnit()
  if IsUnitInGroup(source,group015)then
    set source=null
    return false
  endif
  if IsUnitEnemy(source,GetOwningPlayer(TmpUnit376))and GetUnitAbilityLevel(source,'A04R')!=1 and GetUnitState(source,UNIT_STATE_LIFE)>0 and IsUnitType(source,UNIT_TYPE_STRUCTURE)==false then
    set source=null
    return true
  endif
  set source=null
  return false
endfunction

function Func2775 takes nothing returns nothing
  call DamageTarget(TmpUnit376,GetEnumUnit(),1,real021)
endfunction

function Func2776 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),221))
  local real a=(LoadReal(HY,(h),13))
  local integer c=(LoadInteger(HY,(h),194))
  local group g=(LoadGroupHandle(HY,(h),133))
  local real cx=GetUnitX(u)
  local real cy=GetUnitY(u)
  local real ox=(LoadReal(HY,(h),23))
  local real oy=(LoadReal(HY,(h),24))
  local real tx=ox+50.*Cos(a)
  local real ty=oy+50.*Sin(a)
  local group IBI
  local unit d=(LoadUnitHandle(HY,(h),239))
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A0GC' or GetSpellAbilityId()==0 then
      call RemoveUnit(d)
      call SetUnitVertexColor(u,255,255,255,255)
      call SaveBoolean(HY,(GetHandleId(u)),225,(false))
      call SetUnitInvulnerable(u,false)
      call SetUnitPathing2(u,true)
      call KillGroup(g)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
    set d=null
    return false
  endif
  set IBI=GetAvailableGroup()
  call SaveReal(HY,(h),23,tx)
  call SaveReal(HY,(h),24,ty)
  set TmpUnit376=u
  set real021=GetUnitAbilityLevel(u,'A0FN')*75+25
  set group015=g
  call GroupEnumUnitsInRange(IBI,cx,cy,225,Condition(function Func2774))
  call ForGroup(IBI,function Func2775)
  call GroupAddGroup(IBI,g)
  call KillGroup(IBI)
  set c=c-1
  call SaveInteger(HY,(h),194,(c))
  call SetUnitX(u,SafeX50(tx))
  call SetUnitY(u,SafeY50(ty))
  call SetUnitX(d,GetUnitX(u))
  call SetUnitY(d,GetUnitY(u))
  call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",cx,cy))
  if c==0 then
    call RemoveUnit(d)
    call SetUnitVertexColor(u,255,255,255,255)
    call SaveBoolean(HY,(GetHandleId(u)),225,(false))
    call SetUnitInvulnerable(u,false)
    call SetUnitPathing2(u,true)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set u=null
  set g=null
  set d=null
  set IBI=null
  set t=null
  return false
endfunction

function Func2777 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real cx=GetUnitX(u)
  local real cy=GetUnitY(u)
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  if GetSpellTargetUnit()!=null then
    set tx=GetUnitX(GetSpellTargetUnit())
    set ty=GetUnitY(GetSpellTargetUnit())
  endif
  call SetUnitVertexColor(u,255,255,255,0)
  call SaveBoolean(HY,(GetHandleId(u)),225,(true))
  call SetUnitInvulnerable(u,true)
  call SetUnitPathing2(u,false)
  call SaveUnitHandle(HY,(h),221,(u))
  call SaveReal(HY,(h),23,cx)
  call SaveReal(HY,(h),24,cy)
  call SaveGroupHandle(HY,(h),133,GetAvailableGroup())
  call SaveReal(HY,(h),13,((Atan2(ty-cy,tx-cx))*1.0))
  call SaveInteger(HY,(h),194,IMaxIF(R2I(DistanceBetweenXY(tx,ty,cx,cy)/50),1))
  call SaveUnitHandle(HY,(h),239,CreateUnit(GetOwningPlayer(u),'e00E',cx,cy,0))
  call TriggerRegisterTimerEvent(t,0.04,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func2776))
  call Func0770(u,false,0,0)
  set t=null
  set u=null
endfunction

function Func2778 takes unit u,integer i returns nothing
  local texttag tt
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(u))then
    set tt=CreateTextTag()
    call SetTextTagText(tt,I2S(i),0.03)
    call SetTextTagPosUnit(tt,u,0)
    call SetTextTagColorBJ(tt,0,29,255,15)
    call SetTextTagVelocity(tt,0,0.035)
    call SetTextTagFadepoint(tt,3)
    call SetTextTagLifespan(tt,0.9)
    call SetTextTagPermanent(tt,false)
    call SetTextTagVisibility(tt,true)
  endif
endfunction

function Func2779 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),34))-1
  local texttag VQO
  call SaveInteger(HY,(ZAE),34,(QIE))
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call Func2778(source,QIE)
    call Func2778(RCX,QIE)
  endif
  set RBX=null
  set VQO=null
  set source=null
  set RCX=null
  return false
endfunction

function Func2780 takes nothing returns nothing
  local trigger RBX=GetTriggeringTrigger()
  local unit source=(LoadUnitHandle(HY,(GetHandleId(RBX)),14))
  local unit RCX=(LoadUnitHandle(HY,(GetHandleId(source)),229))
  call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(RCX),GetUnitY(RCX)))
  call RemoveUnit(RCX)
  call UnitRemoveAbility(source,('A0GC'))
  if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))==('A0G8')then
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),('A0G8'),true)
  endif
  call FlushChildHashtable(HY,(GetHandleId(RBX)))
  call CleanTrigger(RBX)
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func2781 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local integer ZAE=GetHandleId(source)
  local unit RCX=(LoadUnitHandle(HY,(ZAE),229))
  local real result=GetUnitX(RCX)
  local real ZEE=GetUnitY(RCX)
  call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(source),GetUnitY(source)))
  call KillUnit(RCX)
  call SetUnitX(source,result)
  call SetUnitY(source,ZEE)
  call PanCameraToTimedForPlayer(GetOwningPlayer(source),result,ZEE,0)
  call IssueImmediateOrderByIdExFunc(source,851972)
  set source=null
  set RCX=null
endfunction

function Func2782 takes nothing returns boolean
  return GetUnitAbilityLevel(GetSummonedUnit(),('B030'))>0 and GetUnitState(GetSummonedUnit(),UNIT_STATE_LIFE)>0
endfunction

function Func2783 takes nothing returns nothing
  local unit SKE=GetSummoningUnit()
  local integer hu=GetHandleId(SKE)
  local unit SFI=(LoadUnitHandle(HY,(hu),228))
  local unit SGI=GetSummonedUnit()
  local trigger t
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),('A0G8'),false)
  call UnitAddAbility2(SKE,('A0GC'))
  call SetUnitColor(SGI,GetPlayerColor(GetOwningPlayer(SFI)))
  call SaveUnitHandle(HY,(hu),229,(SGI))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,SGI,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func2780)
  call SaveUnitHandle(HY,(GetHandleId(t)),14,(SKE))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,SGI,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func2779))
  call SaveUnitHandle(HY,(GetHandleId(t)),2,(SKE))
  call SaveUnitHandle(HY,(GetHandleId(t)),17,(SGI))
  call SaveInteger(HY,(GetHandleId(t)),34,(GetUnitAbilityLevel(SKE,('A0G8'))*15+15-1))
  set SKE=null
  set SFI=null
  set SGI=null
  set t=null
endfunction

function Func2784 takes nothing returns nothing
  if GetUnitAbilityLevel(unit004,'B030')>0 then
    call SaveInteger(HY,GetHandleId(unit004),'ills','B030')
  endif
endfunction

function Func2785 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  call SaveUnitHandle(HY,(GetHandleId(source)),228,(RCX))
  call SaveUnitHandle(HY,GetHandleId(source),'ilsr',RCX)
  call DelayedCallBack(0,function Func2784)
  set source=null
  set RCX=null
endfunction

function Func2786 takes nothing returns nothing
  if GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit())then
    call Func0658('n0LF')
  endif
endfunction

function Func2787 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SUMMON)
  call TriggerAddCondition(t,Condition(function Func2782))
  call TriggerAddAction(t,function Func2783)
  set t=null
endfunction

function Func2788 takes unit u,integer morphtype,real cost returns nothing
  local integer agi=GetHeroAgi(u,false)
  local integer str=GetHeroStr(u,false)
  local real mp=GetUnitState(u,UNIT_STATE_MANA)
  if morphtype==0 then
    if mp>=cost and agi>1 and IsDead(u)==false then
      call SetUnitState(u,UNIT_STATE_MANA,mp-cost)
      call ManaFlareCheck(u,cost)
      call SetHeroAgi(u,agi-1,true)
      call SetHeroStr(u,str+1,true)
    endif
  elseif morphtype==1 then
    if mp>=cost and str>1 and IsDead(u)==false then
      call SetUnitState(u,UNIT_STATE_MANA,mp-cost)
      call ManaFlareCheck(u,cost)
      call SetHeroAgi(u,agi+1,true)
      call SetHeroStr(u,str-1,true)
    endif
  endif
endfunction

function Func2789 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  local integer QIE=GetUnitAbilityLevel(u,'A0KX')
  call Func2788(u,1,30.0*LoadReal(HY,h,5))
  set t=null
  set u=null
  return false
endfunction

function Func2790 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  local integer QIE=GetUnitAbilityLevel(u,'A0KX')
  call Func2788(u,0,30.0*LoadReal(HY,h,5))
  set t=null
  set u=null
  return false
endfunction

function Func2791 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  local trigger morphto=(LoadTriggerHandle(HY,h,226))
  local integer lvl
  local integer i=(LoadInteger(HY,h,227))
  local real rate
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set u=LoadUnitHandle(HY,h,0)
    if GetUnitAbilityLevel(u,'A0KX')==0 then
      if morphto!=null then
        call FlushChildHashtable(HY,(GetHandleId(morphto)))
        call CleanTrigger(morphto)
      endif
      call UnitRemoveAbility(u,'A22T')
      call UnitRemoveAbility(u,'A22L')
      call FlushChildHashtable(HY,h)
      call CleanTrigger(t)
    endif
    set t=null
    set morphto=null
    set u=null
    return false
  endif
  set u=GetTriggerUnit()
  set lvl=GetUnitAbilityLevel(u,'A0KX')
  set rate=1.0/(Pow(2,lvl))
  if GetIssuedOrderId()==852549 then
    if morphto!=null then
      call FlushChildHashtable(HY,(GetHandleId(morphto)))
      call CleanTrigger(morphto)
    endif
    set tt_int1='A0KX'
    set tt_unit1=u
    call ExecuteFunc("RubitchAddSpell")
    set morphto=CreateTrigger()
    call TriggerRegisterTimerEvent(morphto,rate,true)
    call TriggerAddCondition(morphto,Condition(function Func2789))
    call SaveUnitHandle(HY,(GetHandleId(morphto)),14,(u))
    call SaveTriggerHandle(HY,h,226,(morphto))
    call SaveReal(HY,GetHandleId(morphto),5,rate)
    call SaveInteger(HY,h,227,(GetIssuedOrderId()))
    call UnitAddAbility(u,'A22L')
    call UnitRemoveAbility(u,'A22T')
  elseif GetIssuedOrderId()==852546 then
    if morphto!=null then
      call FlushChildHashtable(HY,(GetHandleId(morphto)))
      call CleanTrigger(morphto)
    endif
    set tt_int1='A0KX'
    set tt_unit1=u
    call ExecuteFunc("RubitchAddSpell")
    set morphto=CreateTrigger()
    call TriggerRegisterTimerEvent(morphto,rate,true)
    call TriggerAddCondition(morphto,Condition(function Func2790))
    call SaveUnitHandle(HY,(GetHandleId(morphto)),14,(u))
    call SaveTriggerHandle(HY,h,226,(morphto))
    call SaveReal(HY,GetHandleId(morphto),5,rate)
    call SaveInteger(HY,h,227,(GetIssuedOrderId()))
    call UnitAddAbility(u,'A22T')
    call UnitRemoveAbility(u,'A22L')
  elseif GetIssuedOrderId()==852550 then
    if morphto!=null then
      call FlushChildHashtable(HY,(GetHandleId(morphto)))
      call CleanTrigger(morphto)
    endif
    call SaveTriggerHandle(HY,h,226,(null))
    call SaveInteger(HY,h,227,(GetIssuedOrderId()))
    call UnitRemoveAbility(u,'A22L')
    call UnitRemoveAbility(u,'A22T')
  elseif GetIssuedOrderId()==852547 then
    if morphto!=null then
      call FlushChildHashtable(HY,(GetHandleId(morphto)))
      call CleanTrigger(morphto)
    endif
    set tt_int1='A0KX'
    set tt_unit1=u
    call ExecuteFunc("RubitchAddSpell")
    call SaveTriggerHandle(HY,h,226,(null))
    call SaveInteger(HY,h,227,(GetIssuedOrderId()))
    call UnitRemoveAbility(u,'A22L')
    call UnitRemoveAbility(u,'A22T')
  elseif GetIssuedOrderId()==852548 then
    if IssueImmediateOrderByIdExFunc(u,852549)==false then
      call IssueImmediateOrderByIdExFunc(u,852550)
    endif
    set tt_int1='A0KX'
    set tt_unit1=u
    call ExecuteFunc("RubitchAddSpell")
  elseif GetIssuedOrderId()==852545 then
    if IssueImmediateOrderByIdExFunc(u,852546)==false then
      call IssueImmediateOrderByIdExFunc(u,852547)
    endif
    set tt_int1='A0KX'
    set tt_unit1=u
    call ExecuteFunc("RubitchAddSpell")
  endif
  set t=null
  set u=null
  set morphto=null
  return false
endfunction

function Morph_InitTrigger takes unit u returns nothing
  local trigger t
  local integer h
  local integer lvl=GetUnitAbilityLevel(u,'A0KX')
  call UnitAddAbility2(u,'A0KW')
  call SetUnitAbilityLevel(u,'A0KW',lvl)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function Func2791))
  call SaveTriggerHandle(HY,h,226,(null))
  call SaveUnitHandle(HY,h,0,u)
  set t=null
endfunction

function Func2793 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t
  local integer h
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A0KX')
  if QIE==1 then
    call SetHeroAgi(u,GetHeroAgi(u,false)+3,true)
    call SetHeroStr(u,GetHeroStr(u,false)+3,true)
  else
    call SetHeroAgi(u,GetHeroAgi(u,false)+1,true)
    call SetHeroStr(u,GetHeroStr(u,false)+1,true)
  endif
  if QIE==1 then
    call Morph_InitTrigger(u)
  else
    call SetUnitAbilityLevel(u,'A0KW',QIE)
  endif
  set t=null
  set u=null
endfunction

function Func2794 takes nothing returns nothing
  local unit source=(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),326))
  local real result
  local real ZEE
  local real ZWE
  local integer ZAE
  local integer QIE
  local real ZYE
  local real ICX
  if GetUnitTypeId(source)!='O00P' then
    call DisableTrigger(GetTriggeringTrigger())
  elseif IsDead(source)==false and(LoadBoolean(HY,(GetHandleId(source)),225))==false then
    set ZAE=GetHeroAgi(source,true)
    set QIE=GetHeroStr(source,true)
    set ZYE=RMaxBJ(75+2*(ZAE-QIE),35)
    set result=ZYE
    set ZEE=ZYE
    set ZWE=ZYE
    call SetUnitVertexColorBJ(source,result,ZEE,ZWE,GetRandomReal(0.00,10.00))
  endif
  set source=null
endfunction

function Func2795 takes nothing returns boolean
  return GetUnitTypeId(GetTriggerUnit())=='O00P' and IsUnitIllusion(GetTriggerUnit())==false
endfunction

function Func2796 takes nothing returns nothing
  local trigger RBX
  if((LoadBoolean(HY,(GetHandleId(GetTriggerUnit())),327))==false)then
    set RBX=CreateTrigger()
    call SaveUnitHandle(HY,(GetHandleId(RBX)),326,(GetTriggerUnit()))
    call SaveTriggerHandle(HY,(GetHandleId(GetTriggerUnit())),328,(RBX))
    call TriggerAddAction(RBX,function Func2794)
    call TriggerRegisterTimerEvent(RBX,1.0,true)
    call SaveBoolean(HY,(GetHandleId(GetTriggerUnit())),327,(true))
    call UnitAddItem(GetTriggerUnit(),CreateItem('I00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
    set RBX=null
  endif
endfunction

function Func2797 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterEnterRectSimple(RBX,bj_mapInitialPlayableArea)
  call TriggerAddCondition(RBX,Condition(function Func2795))
  call TriggerAddAction(RBX,function Func2796)
  set RBX=null
endfunction

function Func2798 takes nothing returns nothing
  local unit u=tt_unit1
  local unit SGE=tt_unit3
  local integer QIE=GetUnitAbilityLevel(u,'A0G6')
  local unit M_X
  local location l
  local real result
  local integer SLI=GetHeroAgi(u,true)
  local integer KXE=GetHeroStr(u,true)
  local real S1I=I2R(SLI)/I2R(KXE)
  local real S3I=I2R(KXE)/I2R(SLI)
  local real S4I
  local real S5I
  local real S6I
  local real S7I
  local real dmg
  local real N4X
  local integer S8I
  local integer cc
  local integer c
  local string ZJE
  local string I3X
  local string VDO
  if QIE==0 and GetUnitAbilityLevel(SGE,'A0G6')>0 then
    set QIE=GetUnitAbilityLevel(SGE,'A0G6')
  endif
  if S1I<0.5 then
    set S4I=0.25
    set S5I=100
  elseif S1I>1.5 then
    set S4I=0.5*QIE
    set S5I=100
  else
    set S4I=0.25+(S1I-0.5)*(0.5*QIE-0.25)
    set S5I=100
  endif
  if S3I<0.5 then
    set S6I=0.25
    set S7I=100
  elseif S3I>1.5 then
    set S6I=0.25+QIE
    set S7I=300
  else
    set S7I=100+(S3I-0.5)*200
    set S6I=0.25+(S3I-0.5)*(0.75*QIE-0.25)
  endif
  set dmg=S5I+S4I*SLI
  set N4X=S6I
  set S8I=R2I(N4X)
  set cc=R2I(10*N4X-S8I*10)
  set c=R2I(100*N4X-cc*10-S8I*100)
  set ZJE=I2S(S8I)
  set I3X=I2S(cc)
  set VDO=I2S(c)
  set result=Atan2(GetUnitY(SGE)-GetUnitY(u),GetUnitX(SGE)-GetUnitX(u))
  set l=Location(GetUnitX(SGE)+S7I*Cos(result),GetUnitY(SGE)+S7I*Sin(result))
  call SetUnitPositionLoc(SGE,l)
  call KillTrees(GetLocationX(l),GetLocationY(l),200)
  call RemoveLocation(l)
  call TextTagOnUnit("|c001ce6b9+"+I2S(R2I(dmg))+"|r |c00ff0303+"+ZJE+"."+I3X+VDO+"|r",1,SGE,0.023,255,255,255,216,Func0590(SGE)or PlayerObserver)
  call DamageTarget(u,SGE,1,dmg)
  call StunTargetEx(SGE,N4X,false)
  set u=null
  set SGE=null
  set M_X=null
  set l=null
endfunction

function Func2799 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='e00E' then
    call AddProjectile(LoadUnitHandle(HY,GetHandleId(GetTriggerUnit()),0),GetSpellTargetUnit(),'h01J',"Func2798",1150,true)
  else
    call AddProjectile(GetTriggerUnit(),GetSpellTargetUnit(),'h01J',"Func2798",1150,true)
  endif
endfunction

function Func2800 takes nothing returns nothing
  if GetUnitTypeId(GetSpellTargetUnit())!='n00L' then
    call Func2799()
  endif
endfunction

function Func2801 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group024)==false then
    call GroupAddUnit(group025,GetEnumUnit())
    call UnitRemoveAbility(GetEnumUnit(),'B02J')
    call UnitRemoveAbility(GetEnumUnit(),'BUsp')
    call UnitRemoveAbility(GetEnumUnit(),'Bust')
  endif
endfunction

function Func2802 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'B02J')
  call UnitRemoveAbility(GetEnumUnit(),'BUsp')
  call UnitRemoveAbility(GetEnumUnit(),'Bust')
endfunction

function Func2803 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group023)==false or GetUnitAbilityLevel(GetEnumUnit(),'BUsp')==0 then
    call GroupAddUnit(group023,GetEnumUnit())
    call SetUnitOwner(unit192,GetOwningPlayer(GetEnumUnit()),false)
    call IssueTargetOrder(unit192,"sleep",GetEnumUnit())
  endif
endfunction

function Func2804 takes nothing returns nothing
  call SetWidgetLife(GetEnumUnit(),GetWidgetLife(GetEnumUnit())+0.1*GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*0.05)
endfunction

function Func2805 takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false
endfunction

function Func2806 takes unit u returns boolean
  return GetUnitAbilityLevel(u,'A04R')==0 or u==SentFountain or u==ScourgeFountain
endfunction

function Func2807 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and IsDead(GetFilterUnit())==false and(Func2806(GetFilterUnit()))and GetFilterUnit()!=Roshan
endfunction

function Func2808 takes nothing returns nothing
  call FuckingAssistBuffWrap(tt_unit1,GetEnumUnit())
endfunction

function Func2809 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  local group g
  local group IBI=(LoadGroupHandle(HY,(ZAE),187))
  local unit u2
  if GetTriggerEvalCount(RBX)==10 then
    call UnitAddAbility2(source,'A24E')
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A07U',false)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A38E',false)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A24E',true)
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(RBX)>140 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A24E')then
    if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A07U' or(LoadInteger(HY,(GetHandleId(source)),704))=='A38E' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A07U',true)
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A38E',true)
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A24E',false)
    call ForGroup(IBI,function Func2802)
    call KillGroup(IBI)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set g=GetAvailableGroup()
    set tt_unit1=source
    set unit192=RCX
    set group023=IBI
    call GroupEnumUnitsInRange(g,result,ZEE,1275,Condition(function Func2807))
    call ForGroup(g,function Func2803)
    set tt_unit1=source
    call ForGroup(g,function Func2808)
    set group024=g
    set group025=GetAvailableGroup()
    call ForGroup(IBI,function Func2801)
    call GroupRemoveGroup(group025,IBI)
    if GetUnitAbilityLevel(source,'A38E')>0 then
      call GroupEnumUnitsInRange(g,result,ZEE,1275,Condition(function Func2805))
      call ForGroup(g,function Func2804)
    endif
    call KillGroup(g)
    call KillGroup(group025)
  endif
  set RBX=null
  set g=null
  set u2=null
  set source=null
  set IBI=null
  set RCX=null
  return false
endfunction

function Func2810 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call UnitAddAbility(RCX,'A07T')
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func2809))
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),19,(RCX))
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("war3mapImported\\SongOfTheSiren_2.mdx",source,"origin")))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func2811 takes unit SKE,unit SGE returns nothing
  local integer QIE=GetUnitAbilityLevel(SKE,'A2KU')
  local integer id='A240'-1+QIE
  call DamageTarget(SKE,SGE,1,60+40*QIE)
  call UnitAddAbilityTimedExF(SGE,id,1,8,0)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",SGE,"chest"))
endfunction

function Func2812 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group026)==false then
    call GroupAddUnit(group026,GetEnumUnit())
    call Func2811(unit193,GetEnumUnit())
  endif
endfunction

function Func2813 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local group g=GetAvailableGroup()
  call DestroyEffect(AddSpecialEffect("war3mapImported\\RipTide09.mdx",result,ZEE))
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,result,ZEE,345,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(g,function Func2812)
  call KillGroup(g)
  set RBX=null
  set g=null
  set source=null
endfunction

function Func2814 takes nothing returns boolean
  return IsUnitIllusion(GetFilterUnit())and IsDead(GetFilterUnit())==false
endfunction

function Func2815 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  set group026=GetAvailableGroup()
  set unit193=source
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(source),Condition(function Func2814))
  call GroupAddUnit(g,source)
  call ForGroup(g,function Func2813)
  call KillGroup(g)
  call KillGroup(group026)
  set source=null
  set g=null
endfunction

function Func2816 takes nothing returns nothing
  call AddToPurgeList('A240','PRGE')
  call AddToPurgeList('A241','PRGE')
  call AddToPurgeList('A242','PRGE')
  call AddToPurgeList('A243','PRGE')
  call AddToPurgeList('Bena','PRGE')
  call AddToPurgeList('Beng','PRGE')
endfunction

function Func2817 takes nothing returns nothing
  if IsUnitIllusion(tt_unit1)==false then
    call Func1032(tt_unit1,tt_unit3)
    call Func0847(tt_unit3,GetUnitAbilityLevel(tt_unit1,'A24D'),'A3PB','Beng',0)
    call StunTargetEx(tt_unit3,0.1,true)
    call Func1330(tt_unit1,tt_unit3,'A3PB')
  endif
endfunction

function Func2818 takes nothing returns boolean
  if IsUnitIllusion(GetFilterUnit())and GetUnitTypeId(GetFilterUnit())=='HC49' and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
    call AddProjectile(GetFilterUnit(),unit194,'h07T',"Func2817",1500,true)
  endif
  return false
endfunction

function Func2819 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local unit u2
  set unit194=GetSpellTargetUnit()
  set real023= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetUnitX(unit194),GetUnitY(unit194))
  set tt_unit1=SKE
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(SKE),Condition(function ReturnTrue))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if IsUnitIllusion(u2)and GetUnitTypeId(u2)=='HC49' then
      call SetUnitFacing(u2,real023)
      call SetUnitAnimation(u2,"spell")
    endif
  endloop
  call KillGroup(g)
  set SKE=null
endfunction

function Func2820 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=unit194
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),700,Condition(function Func2818))
  call KillGroup(g)
  set source=null
  set RCX=null
  set g=null
endfunction

function Func2821 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())==false then
    set unit194=GetSpellTargetUnit()
    call AddProjectile(GetTriggerUnit(),unit194,'h07T',"Func2817",1500,true)
    call Func2820()
  else
    call RemoveLinkenBuff(GetSpellTargetUnit())
  endif
endfunction

function Func2822 takes unit u returns integer
  local real r=GetRandomReal(0,100)
  local integer QIE=GetUnitAbilityLevel(u,'A088')
  local integer c=0
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  local integer h=GetHandleId(GetOwningPlayer(u))
  if IsL1ch then
    set r=0
  endif
  if QIE==1 then
    if r<40 then
      set c=2
    endif
  elseif QIE==2 then
    if r<20 then
      set c=3
    elseif r<50 then
      set c=2
    endif
  elseif QIE==3 then
    if r<12.5 then
      set c=4
    elseif r<25 then
      set c=3
    elseif r<60 then
      set c=2
    endif
  endif
  call SaveInteger(HeroStats,h,'0MC0',LoadInteger(HeroStats,h,'0MC0')+1)
  if c>1 then
    call SaveInteger(HeroStats,h,'0MC0'+c,LoadInteger(HeroStats,h,'0MC0'+c)+1)
  endif
  return c
endfunction

function Func2823 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and GetUnitAbilityLevel(GetFilterUnit(),'B03J')==0 and GetFilterUnit()!=unit195
endfunction

function Func2824 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))
endfunction

function Func2825 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),300))
  local integer ZBE=(LoadInteger(HY,(ZAE),5))
  local integer ZCE=(LoadInteger(HY,(ZAE),299))
  local unit M_X
  local group g=GetAvailableGroup()
  set tt_unit1=RCX
  set unit195=source
  call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),1425,Condition(function Func2823))
  set source=GroupPickRandomUnit(g)
  if source==null then
    call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),1425,Condition(function Func2824))
    set source=GroupPickRandomUnit(g)
  endif
  call KillGroup(g)
  call SaveUnitHandle(HY,(ZAE),17,(source))
  if GetTriggerEvalCount(RBX)>QIE then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
    call UnitAddAbility2(M_X,ZCE)
    call SetUnitAbilityLevel(M_X,ZCE,ZBE)
    call IssueTargetOrder(M_X,"channel",source)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
  set g=null
  return false
endfunction

function Func2826 takes unit u,integer i returns nothing
  local integer id='n0K7'
  if i==3 then
    set id='n0JT'
  elseif i==4 then
    set id='n0K8'
  endif
  call TextTagOnUnit(GetObjectName(id),5,u,0.03,255,0,0,255,Func0590(u)or PlayerObserver)
endfunction

function Func2827 takes integer count,code TUI returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer BHX=GetSpellAbilityId()
  local integer QIE=GetUnitAbilityLevel(SKE,BHX)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call Func2826(SKE,count)
  set count=count-1
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveInteger(HY,(h),300,(count))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveInteger(HY,(h),299,(BHX))
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(TUI))
  set t=null
  set SGE=null
  set SKE=null
endfunction

function Func2828 takes integer ZAE returns nothing
  call Func2827(ZAE,function Func2825)
endfunction

function Func2829 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  call UnitAddAbility2(d,'A2KR')
  call IssueTargetOrder(d,"thunderbolt",SGE)
  call SetUnitState(SKE,UNIT_STATE_MANA,GetUnitState(SKE,UNIT_STATE_MANA)*0.4)
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func2830 takes nothing returns nothing
  call UnitAddAbility2(tt_unit1,'A2KQ')
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A2KQ',true)
endfunction

function Func2831 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A2KQ',false)
endfunction

function Func2832 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),300))
  local integer ZBE=(LoadInteger(HY,(ZAE),5))
  local integer ZCE=(LoadInteger(HY,(ZAE),299))
  local unit M_X
  if GetTriggerEvalCount(RBX)>QIE then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',GetUnitX(source),GetUnitY(source),0)
    if ZCE=='A2KQ' then
      set ZCE='A2KR'
    endif
    call UnitAddAbility2(M_X,ZCE)
    call SetUnitAbilityLevel(M_X,ZCE,ZBE)
    call Func1430(M_X,source,852095)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
  return false
endfunction

function Func2833 takes integer ZAE returns nothing
  call Func2827(ZAE,function Func2832)
endfunction

function Func2834 takes nothing returns boolean
  local integer T0I
  local integer id=GetSpellAbilityId()
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A088')
  if QIE>0 and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0 and IsBlocked(GetSpellTargetUnit())==false then
    if id=='A04W' or id=='A08D' or id=='A08A' or id=='A089' or id=='A2KQ' then
      set T0I=Func2822(GetTriggerUnit())
      if T0I>1 and((LoadInteger(HY,(GetHandleId((GetSpellTargetUnit()))),4322))!=1)then
        call Func2833(T0I)
      endif
    elseif id=='A011' or id=='A007' or id=='A01T'or id=='A00F' then
      set T0I=Func2822(GetTriggerUnit())
      if T0I>1 and((LoadInteger(HY,(GetHandleId((GetSpellTargetUnit()))),4322))!=1)then
        call Func2828(T0I)
      endif
    endif
  endif
  return false
endfunction

function Func2835 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func2834))
  call AddToPurgeList('B03J','PRGE')
  call AddToPurgeList('A3UJ','PRGE')
  call AddToPurgeList('A3UK','PRGE')
  call AddToPurgeList('A3UL','PRGE')
  call AddToPurgeList('A3UM','PRGE')
endfunction

function Func2836 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer c=LoadInteger(HY,h,0)
  local boolean FEX=false
  if GetUnitAbilityLevel(SGE,'a3UJ')>0 and IsDead(SGE)==false then
    if c>1 then
      call SaveInteger(HY,h,0,c-1)
    else
      set FEX=true
    endif
    call DamageTarget(LoadUnitHandle(HY,h,0),SGE,1,LoadReal(HY,h,0))
  else
    set FEX=true
  endif
  if FEX then
    call RemoveSavedHandle(HY,GetHandleId(SGE),'A3UJ')
    call UnitRemoveAbility(SGE,'a3UJ')
    call UnitRemoveAbility(SGE,'A3UJ')
    call UnitRemoveAbility(SGE,'A3UK')
    call UnitRemoveAbility(SGE,'A3UL')
    call UnitRemoveAbility(SGE,'A3UM')
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  endif
  set SGE=null
  set t=null
endfunction

function Func2837 takes unit SKE,unit SGE,integer QIE returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(SGE)
  if HaveSavedHandle(HY,hu,'A3UJ')then
    set t=LoadTimerHandle(HY,hu,'A3UJ')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,hu,'A3UJ',t)
    call SaveUnitHandle(HY,h,0,SKE)
    call SaveUnitHandle(HY,h,1,SGE)
    call TimerStart(t,1.,true,function Func2836)
  endif
  call SaveReal(HY,h,0,QIE*8+18.)
  call SaveInteger(HY,h,0,4+QIE)
  call UnitRemoveAbility(SGE,'A3UJ')
  call UnitRemoveAbility(SGE,'A3UK')
  call UnitRemoveAbility(SGE,'A3UL')
  call UnitRemoveAbility(SGE,'A3UM')
  call UnitAddAbility2(SGE,'A3UJ'-1+QIE)
  set t=null
endfunction

function Func2838 takes unit HDE,unit SGE returns nothing
  local integer QIE
  if GetUnitAbilityLevel(SGE,'B03J')>0 then
    call UnitRemoveAbility(SGE,'B03J')
    set QIE=GetUnitAbilityLevel(HDE,'A011')+GetUnitAbilityLevel(HDE,'A007')+GetUnitAbilityLevel(HDE,'A00F')+GetUnitAbilityLevel(HDE,'A01T')
    call Func2837(HDE,SGE,QIE)
  endif
endfunction

function Func2839 takes nothing returns nothing
  local integer DEX=0
  if GCD_id=='A011' then
    set DEX='A3AB'
  elseif GCD_id=='A007' then
    set DEX='A3AC'
  elseif GCD_id=='A00F' then
    set DEX='A3AD'
  elseif GCD_id=='A01T' then
    set DEX='A3AE'
  endif
  call Func0376(GCD_caster,DEX,1,GetSpellTargetUnit(),true)
endfunction

function Func2840 takes nothing returns boolean
  local unit f=GetFilterUnit()
  local unit u=GetTriggerUnit()
  if IsUnitAlly(f,GetOwningPlayer(u))and IsDead(f)==false and GetUnitAbilityLevel(f,'Amov')>0 and GetUnitAbilityLevel(f,'Aatk')>0 then
    set f=null
    set u=null
    return true
  endif
  set f=null
  set u=null
  return false
endfunction

function Func2841 takes integer count,integer BHX returns nothing
  local unit SKE=GetTriggerUnit()
  local integer i=count
  local group g=GetAvailableGroup()
  local unit d
  local unit SGE
  local integer k=1
  local integer QIE=GetUnitAbilityLevel(SKE,BHX)
  call Func2826(SKE,count)
  set count=count-1
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),600,Condition(function Func2840))
  call GroupRemoveUnit(g,GetSpellTargetUnit())
  loop
    set SGE=GroupPickRandomUnit(g)
    exitwhen SGE==null
    call  ThrowTargetSpellTargetUnit(SKE,BHX,SGE)
    set k=k+1
    call GroupRemoveUnit(g,SGE)
    exitwhen k>i
  endloop
  call KillGroup(g)
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func2842 takes nothing returns boolean
  local integer i
  if(GetSpellAbilityId()=='A083' or GetSpellAbilityId()=='A08I' or GetSpellAbilityId()=='A08G' or GetSpellAbilityId()=='A08F')then
    if GetUnitAbilityLevel(GetTriggerUnit(),'A088')*(1-GetUnitAbilityLevel(GetTriggerUnit(),'A36D'))>0 then
      set i=Func2822(GetTriggerUnit())
      if i>1 then
        call Func2841(i,GetSpellAbilityId())
      endif
    endif
    call FuckingAssistBuffWrap(GetTriggerUnit(),GetSpellTargetUnit())
  endif
  return false
endfunction

function Func2843 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func2842))
  set RBX=null
  call AddToPurgeList('Bblo','PRGA')
endfunction

function Func2844 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'B00G')>0 and real014<10 then
    call Func0673(TriggeredUnit,real014)
  endif
endfunction

function Func2845 takes nothing returns boolean
  return AliveNonBuildOrMarker(GetFilterUnit())and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))
endfunction

function Func2846 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  local unit u
  local real dmg=90*GetUnitAbilityLevel(SKE,('A08N'))
  if GetWidgetLife(SGE)>0.5 then
    call SetWidgetLife(SGE,GetWidgetLife(SGE)+dmg)
    call FuckingAssistBuffWrap(SKE,SGE)
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,285,Condition(function Func2845))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call DamageTarget(SKE,u,3,dmg)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set SGE=null
  set SKE=null
endfunction

function Func2847 takes nothing returns boolean
  return IsUnitAlly(GetFilterUnit(),tt_player1)and IsDead(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0
endfunction

function Func2848 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit u2
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local boolean CTI=GetUnitAbilityLevel(SKE,'A2S8')>0
  local real A7X=650
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real D1E=5+QIE
  if CTI then
    set A7X=15000
    set x=0
    set y=0
    set D1E=D1E+2
  endif
  set tt_player1=GetOwningPlayer(SKE)
  call GroupEnumUnitsInRange(g,x,y,A7X,Condition(function Func2847))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if CTI or IsUnitType(u2,UNIT_TYPE_STRUCTURE)==false then
      call UnitAddAbilityTimedExF(u2,'A3QY',1,D1E,'B00G')
    endif
  endloop
  call KillGroup(g)
  set SKE=null
endfunction

function Func2849 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetTriggerPlayer())then
    call FuckingAssistBuffWrap(GetTriggerUnit(),GetSpellTargetUnit())
    call PurgingTriggered(GetSpellTargetUnit(),false)
    call Func0860(GetSpellTargetUnit())
  endif
endfunction

function Func2850 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit HDE=LoadUnitHandle(HY,h,0)
  local group g
  local unit u2
  local integer id
  if IsDead(HDE)==false and GetUnitAbilityLevel(HDE,'A36D')==0 then
    set g=GetAvailableGroup()
    set tt_unit1=HDE
    call GroupEnumUnitsInRange(g,GetUnitX(HDE),GetUnitY(HDE),325,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    set id='A3T1'-1+GetUnitAbilityLevel(HDE,'A06A')
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call UnitAddAbilityTimedExF(u2,id,1,1.,'a3T1')
    endloop
    call KillGroup(g)
  endif
  if LoadBoolean(HY,h,0)and IsDead(HDE)then
    call PauseTimer(GetExpiredTimer())
    call FlushChildHashtable(HY,h)
    call DestroyTimer(GetExpiredTimer())
  endif
  set HDE=null
endfunction

function Func2851 takes nothing returns nothing
  local timer t
  local integer h
  if GetLearnedSkillLevel()!=1 then
    return
  endif
  set t=CreateTimer()
  set h=GetHandleId(t)
  call TimerStart(t,0.5,true,function Func2850)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveBoolean(HY,h,0,IsUnitIllusion(GetTriggerUnit()))
  set t=null
endfunction

function Func2852 takes nothing returns nothing
  call AddToPurgeList('B014','PRGA')
  call AddToPurgeList('B00G','PRGA')
  call AddToPurgeList('A3QY','PRGA')
  call AddWrapper("Func2844",0)
endfunction

function Func2853 takes nothing returns boolean
  local unit source=GetSummonedUnit()
  local unit RCX
  local unit M_X
  if GetUnitAbilityLevel(source,'B098')>0 then
    set RCX=GetSummoningUnit()
    set M_X=(LoadUnitHandle(HY,(GetHandleId(RCX)),303))
    call SetUnitX(source,GetUnitX(M_X))
    call SetUnitY(source,GetUnitY(M_X))
    call IssueTargetOrder(source,"attack",M_X)
  endif
  set source=null
  set RCX=null
  set M_X=null
  return false
endfunction

function Func2854 takes player whichPlayer,unit source,integer ZAE returns nothing
  local unit RCX=CreateUnit(whichPlayer,'e00E',GetUnitX(source),GetUnitX(source),0)
  local integer QIE
  call SaveUnitHandle(HY,(GetHandleId(RCX)),303,(source))
  if ZAE==1 then
    set QIE='A10H'
  elseif ZAE==2 then
    set QIE='A10G'
  elseif ZAE==3 then
    set QIE='A10I'
  else
    set QIE='A10F'
  endif
  call UnitAddAbility2(RCX,QIE)
  call SaveUnitHandle(HY,GetHandleId(RCX),'ilsr',udg_Hero[GetPlayerId(whichPlayer)])
  call IssueTargetOrderByIdFuckingEx(RCX,852274,udg_Hero[GetPlayerId(whichPlayer)],false)
  call SaveInteger(HY,GetHandleId(unit004),'ills','B098')
  set RCX=null
endfunction

function Func2855 takes unit SKE,player p,unit SGE,integer QIE,boolean URI,boolean UII returns nothing
  local real dmg=50+50*QIE
  local unit d
  if URI then
    set d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
    call UnitAddAbility2(d,'A10C')
    call SetUnitAbilityLevel(d,'A10C',QIE)
    call IssueTargetOrder(d,"cripple",SGE)
    call DamageTarget(udg_Hero[GetPlayerId(p)],SGE,1,dmg)
    call Func2854(p,SGE,QIE)
    if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false and HaveSavedHandle(HY,GetHandleId(SKE),0)==false and UII==false then
      call SaveUnitHandle(TempHash,'A3E9',0,SGE)
      call SaveUnitHandle(TempHash,'A3E9',1,SKE)
      call SaveInteger(TempHash,'A3E9',0,QIE)
      call ExecuteFunc("Func2858")
    endif
  endif
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",SGE,"origin"))
  set d=null
endfunction

function Func2856 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local player p=(LoadPlayerHandle(HY,h,54))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local integer QIE=(LoadInteger(HY,h,5))
  local boolean URI=(LoadBoolean(HY,h,302))
  local unit NCX=(LoadUnitHandle(HY,h,45))
  local real x=GetUnitX(NCX)
  local real y=GetUnitY(NCX)
  local real tx=GetUnitX(SGE)
  local real ty=GetUnitY(SGE)
  local real NBX=1000*0.035
  local real a= AngleBetweenXY(x,y,tx,ty)
  local real nx=x+NBX*Cos(a*bj_DEGTORAD)
  local real ny=y+NBX*Sin(a*bj_DEGTORAD)
  local boolean UBI=(LoadBoolean(HY,h,249))
  call SetUnitX(NCX,nx)
  call SetUnitY(NCX,ny)
  call SetUnitFacing(NCX,a)
  if LoadInteger(HY,GetHandleId(SGE),4422)==1 then
    set UBI=false
    call SaveBoolean(HY,h,249,(UBI))
  endif
  if DistanceBetweenXY(tx,ty,nx,ny)<=NBX then
    if UBI then
      call Func2855(LoadUnitHandle(HY,h,0),p,SGE,QIE,URI,LoadBoolean(HY,h,0))
    endif
    call KillUnit(NCX)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  set NCX=null
  return false
endfunction

function Func2857 takes unit SKE,integer QIE,unit SGE,boolean URI,boolean UII returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit NCX=CreateUnit(GetOwningPlayer(SKE),'h06L',GetUnitX(SKE),GetUnitY(SKE), AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE)))
  call SavePlayerHandle(HY,h,54,(GetOwningPlayer(SKE)))
  call SaveUnitHandle(HY,h,30,SGE)
  call SaveBoolean(HY,h,302,(URI))
  call SaveUnitHandle(HY,h,45,(NCX))
  call SaveInteger(HY,h,5,(QIE))
  call SaveBoolean(HY,h,249,(true))
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveBoolean(HY,h,0,UII)
  call TriggerRegisterTimerEvent(t,0.035,true)
  call TriggerAddCondition(t,Condition(function Func2856))
  set t=null
  set NCX=null
endfunction

function Func2858 takes nothing returns nothing
  call LotusOrbFX(LoadUnitHandle(TempHash,'A3E9',0))
  call Func2857(LoadUnitHandle(TempHash,'A3E9',0),LoadInteger(TempHash,'A3E9',0),LoadUnitHandle(TempHash,'A3E9',1),IsBlocked(LoadUnitHandle(TempHash,'A3E9',1))==false,true)
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func2859 takes nothing returns boolean
  if IsUnitIllusion(GetFilterUnit())and GetUnitTypeId(GetFilterUnit())=='Ogrh' and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
    call Func2857(GetFilterUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A10D'),GetSpellTargetUnit(),false,false)
  endif
  return false
endfunction

function Func2860 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A10D')
  local unit SGE=GetSpellTargetUnit()
  local group g=GetAvailableGroup()
  local boolean UFI=IsBlocked(GetSpellTargetUnit())
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),700,Condition(function Func2859))
  if UFI then
    call Func2857(SKE,QIE,SGE,false,false)
  else
    call Func2857(SKE,QIE,SGE,true,false)
  endif
  call KillGroup(g)
  set SKE=null
  set SGE=null
  set g=null
endfunction

function Func2861 takes nothing returns boolean
  if IsUnitIllusion(GetFilterUnit())and GetUnitTypeId(GetFilterUnit())=='Ogrh' and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
    call SetUnitFacing(GetFilterUnit(),real023)
    call SetUnitAnimation(GetFilterUnit(),"spell")
  endif
  return false
endfunction

function Func2862 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call SetUnitAnimation(LoadUnitHandle(HY,h,0),"spell")
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func2863 takes unit u returns nothing
  call SaveUnitHandle(HY,DelayedCallBack(0,function Func2862),0,u)
endfunction

function Func2864 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  set real023= AngleBetweenXY(GetUnitX(source),GetUnitY(source),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),700,Condition(function Func2861))
  call KillGroup(g)
  set source=null
  set g=null
endfunction

function Func2865 takes nothing returns nothing
  call Func2864()
endfunction

function Func2866 takes nothing returns nothing
  call Func2863(GetTriggerUnit())
endfunction

function Func2867 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  call UnitRemoveAbility(u,'A30Z')
  call UnitAddAbility2(u,'A310')
  call SetUnitAbilityLevel(u,'A310',GetUnitAbilityLevel(u,'A30X'))
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  call RemoveSavedHandle(HY,GetHandleId(u),'A30Z')
  set u=null
  set t=null
endfunction

function Func2868 takes unit u,real cd returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,cd,false,function Func2867)
  call SaveTimerHandle(HY,GetHandleId(u),'A30Z',t)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function Func2869 takes nothing returns nothing
  if HaveSavedHandle(HY,GetHandleId(tt_unit1),'A30Z')then
    call TimerStart(LoadTimerHandle(HY,GetHandleId(tt_unit1),'A30Z'),0,false,function Func2867)
  endif
endfunction

function SBChargedEnd takes unit u returns nothing
  local unit d
  local boolean b
  local boolean cd
  if IsUnitIllusion(u)==false and IsDead(u)==false then
    call UnitRemoveAbility(u,'A310')
    set d=CreateUnit(Player(14),'e00E',GetUnitX(u),GetUnitY(u),0)
    call UnitAddAbility2(u,'A30Z')
    call SetUnitAbilityLevel(u,'A30Z',GetUnitAbilityLevel(u,'A30X'))
    call UnitAddAbility(d,'A311')
    call UnitAddAbility(u,'A04R')
    call UnitShareVision(u,Player(14),true)
    set b=UnitRemoveAbility(u,'B0BI')
    set cd=IssueTargetOrder(d,"creepheal",u)
    if cd==false and IsUnitHidden(u)then
      call ShowUnit(u,true)
      call IssueTargetOrder(d,"creepheal",u)
      call ShowUnit(u,false)
    endif
    call UnitShareVision(u,Player(14),false)
    call UnitRemoveAbility(u,'A04R')
    if b then
      call Func0909(u,'I0HM')
    endif
    set d=null
  endif
  call Func2868(u,20-4*GetUnitAbilityLevel(u,'A30X'))
endfunction

function Func2871 takes unit u,integer hu,trigger t returns nothing
  local integer h=GetHandleId(t)
  if LoadBoolean(HY,h,5)then
    call CustomSpeed(u,0,0)
    call SetUnitPathing2(u,true)
  endif
  call UnitRemoveAbility(u,'A30Y')
  call UnitRemoveAbility(u,'B30Y')
  if GetHandleId(u)>0 then
    call RemoveSavedHandle(HY,GetHandleId(u),'A30X')
  else
    call RemoveSavedHandle(HY,LoadInteger(HY,h,0),'A30X')
  endif
  call CleanTrigger(t)
  call FlushChildHashtable(HY,h)
endfunction

function Func2872 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=LoadInteger(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local real ILX
  local real UTI=LoadReal(HY,h,0)
  local boolean disabled=false
  local real x
  local real y
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if GetTriggerUnit()==u then
      call Func2871(u,hu,t)
    else
      if GetUnitCurrentOrder(u)!=851986 then
        call DisableTrigger(t)
        call ImminentTriggeredPointOrder(u,851986,LoadReal(HY,h,10),LoadReal(HY,h,11))
        call EnableTrigger(t)
      endif
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_ATTACKED then
    if GetAttacker()==u then
      call Func2871(u,hu,t)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
    if GetIssuedOrderId()!=851983 and not(GetIssuedOrderId()==851971 and GetOrderTargetUnit()!=null and IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(u)))then
      call Func2871(u,hu,t)
    endif
  else
    if IsUnitBadSpellTargeted(u)or(LoadBoolean(HY,h,5)and GetUnitAbilityLevel(u,'A30Y')==0)then
      call Func2871(u,hu,t)
    else
      set ILX=DistanceBetweenUnits(u,SGE)
      if LoadBoolean(HY,h,5)and(ILX>UTI+150 or IsUnitVisibleEx(SGE,GetOwningPlayer(u))==false or IsUnitInvulnerable(SGE))then
        if GetUnitCurrentOrder(u)!=851986 then
          if LoadBoolean(HY,h,0)then
            call Func2871(u,hu,t)
          else
            call DisableTrigger(t)
            call SaveBoolean(HY,h,0,true)
            call ImminentTriggeredPointOrder(u,851986,LoadReal(HY,h,10),LoadReal(HY,h,11))
            call EnableTrigger(t)
          endif
        elseif DistanceBetweenXY(GetUnitX(u),GetUnitY(u),LoadReal(HY,h,10),LoadReal(HY,h,11))<=120 then
          call Func2871(u,hu,t)
        endif
      elseif LoadBoolean(HY,h,5)==false then
        if LoadBoolean(HY,h,0)==false and GetUnitAbilityLevel(u,'A30Y')==0 and ILX<=UTI and GetUnitAbilityLevel(u,'A310')>0 and HaveSavedHandle(HY,GetHandleId(u),'A30Z')==false then
          call UnitAddAbility2(u,'A30Y')
          call CustomSpeed(u,999,800)
          if GetUnitAbilityLevel(u,'A310')>0 then
            call SBChargedEnd(u)
          endif
          call SetUnitPathing2(u,false)
          call SaveBoolean(HY,h,5,true)
        endif
      elseif DistanceBetweenXY(GetUnitX(u),GetUnitY(u),LoadReal(HY,h,10),LoadReal(HY,h,11))<=100 then
        call Func2871(u,hu,t)
      else
        call SaveReal(HY,h,10,GetUnitX(SGE))
        call SaveReal(HY,h,11,GetUnitY(SGE))
        call SaveBoolean(HY,h,0,false)
      endif
    endif
  endif
  set t=null
  set u=null
  set SGE=null
  return false
endfunction

function Func2873 takes nothing returns nothing
  local trigger t
  local integer h
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  local integer QIE=GetUnitAbilityLevel(u,'A30X')
  local unit SGE=GetOrderTargetUnit()
  local real ILX=DistanceBetweenUnits(u,SGE)
  local real UTI=500+100*QIE
  local unit UWI
  if ILX>300 then
    if HaveSavedHandle(HY,hu,'A30X')then
      set t=LoadTriggerHandle(HY,hu,'A30X')
      set h=GetHandleId(t)
      set UWI=LoadUnitHandle(HY,h,1)
      if UWI!=SGE then
        call Func2871(u,hu,t)
      endif
    else
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call SaveTriggerHandle(HY,hu,'A30X',t)
      call SaveUnitHandle(HY,h,0,u)
      call SaveInteger(HY,h,0,hu)
      call SaveUnitHandle(HY,h,1,SGE)
      call TriggerRegisterTimerEvent(t,0.02,true)
      call TriggerRegisterTimerEvent(t,0,false)
      call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_ATTACKED)
      call TriggerRegisterDeathEvent(t,SGE)
      call TriggerRegisterDeathEvent(t,u)
      call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
      call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
      call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
      call TriggerAddCondition(t,Condition(function Func2872))
    endif
    call SaveReal(HY,h,0,UTI)
    call SaveReal(HY,h,10,GetUnitX(SGE))
    call SaveReal(HY,h,11,GetUnitY(SGE))
  endif
  set u=null
  set SGE=null
  set t=null
  set UWI=null
endfunction

function Func2874 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  if GetOrderTargetUnit()!=null and IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(u))and(GetIssuedOrderId()==851983 or GetIssuedOrderId()==851971)then
    if GetUnitAbilityLevel(u,'A30X')>0 and GetUnitAbilityLevel(u,'A36D')==0 then
      call Func2873()
    endif
  endif
  set u=null
  return false
endfunction

function Func2875 takes nothing returns boolean
  if GetUnitAbilityLevel(GetTriggerUnit(),'A30X')>0 then
    call UnitAddAbility2(GetTriggerUnit(),'A310')
    call SetUnitAbilityLevel(GetTriggerUnit(),'A310',GetUnitAbilityLevel(GetTriggerUnit(),'A30X'))
  endif
  return false
endfunction

function Func2876 takes nothing returns nothing
  if GetLearnedSkillLevel()==1 then
    call UnitAddAbility2(GetTriggerUnit(),'A310')
  else
    call SetUnitAbilityLevel(GetTriggerUnit(),'A310',GetLearnedSkillLevel())
  endif
endfunction

function Func2877 takes nothing returns boolean
  return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(tt_unit1)and IsUnitIllusion(GetFilterUnit())and GetUnitTypeId(GetFilterUnit())=='Ogrh' and IsDead(GetFilterUnit())==false
endfunction

function Func2878 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u
  local unit u2
  local integer i=1
  local real FOO
  local real O5I=325
  local real x=LoadReal(HY,h,10)
  local real y=LoadReal(HY,h,11)
  local real nx
  local real ny
  local real GXE
  local real ILX
  local integer c=LoadInteger(HY,h,0)+1
  local real NBX
  local unit U1I
  local unit U2I
  local string s
  if c==50 then
    call ClearSelectionForPlayer(GetOwningPlayer(LoadUnitHandle(HY,h,0)))
    set U1I=null
    set U2I=null
    loop
      exitwhen HaveSavedHandle(HY,h,i)==false
      set u=LoadUnitHandle(HY,h,i)
      call ShowUnit(u,true)
      call PauseUnit(u,false)
      call IssueImmediateOrderByIdExFunc(u,851972)
      call UnitRemoveAbility(u,'Avul')
      set nx=LoadReal(HY,h,100*i)
      set ny=LoadReal(HY,h,100*i+1)
      call KillTrees(nx,ny,200)
      call SetUnitPosition(u,nx,ny)
      if IsUnitIllusion(u)==false or GetUnitAbilityLevel(u,'B312')>0 or GetUnitAbilityLevel(u,'B313')>0 then
        call SetUnitFacing(u,LoadReal(HY,h,0))
        if IsUnitIllusion(u)==false then
          call SelectUnitAddForPlayer(u,GetOwningPlayer(u))
        elseif U1I==null then
          set U1I=u
        elseif U2I==null then
          set U2I=u
        endif
        if GetUnitAbilityLevel(u,'B313')>0 then
          set s=""
          if IsUnitAlly(u,LocalPlayer)or(PlayerObserver)then
            set s="Abilities\\Spells\\Items\\AIda\\AIdaTarget.mdl"
          endif
          call Func0688(s,u,"head",8)
        endif
      endif
      call KillUnit(LoadUnitHandle(HY,h,300+i))
      set i=i+1
    endloop
    call SelectUnitAddForPlayer(U1I,GetOwningPlayer(u))
    call SelectUnitAddForPlayer(U2I,GetOwningPlayer(u))
    set U1I=null
    set U2I=null
    call RemoveUnit(LoadUnitHandle(HY,h,-100))
    call FlushChildHashtable(HY,h)
    call DestroyTimer(t)
  else
    if c==1 then
      loop
        exitwhen HaveSavedHandle(HY,h,i)==false
        set u=LoadUnitHandle(HY,h,300+i)
        call PauseUnit(u,true)
        set i=i+1
      endloop
    elseif c>=30 then
      loop
        exitwhen HaveSavedHandle(HY,h,i)==false
        set u=LoadUnitHandle(HY,h,300+i)
        set NBX=LoadReal(HY,h,100*i+2)
        set GXE=LoadReal(HY,h,100*i+3)
        set nx=SafeX50(GetUnitX(u)+NBX*Cos(GXE))
        set ny=SafeY50(GetUnitY(u)+NBX*Sin(GXE))
        call SetUnitAnimation(u,"walk")
        call SetUnitX(u,nx)
        call SetUnitY(u,ny)
        set i=i+1
      endloop
    endif
    call SaveInteger(HY,h,0,c)
  endif
  set u=null
  set u2=null
  set t=null
endfunction

function Func2879 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local integer i=0
  local unit u2
  local real FOO=GetUnitFacing(u)
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  local real GXE
  local real ILX
  local real nx
  local real ny
  call FlushChildHashtable(HY,h)
  call UnitAddAbility(d,'A312')
  call SaveUnitHandle(HY,GetHandleId(d),'ilsr',u)
  call IssueTargetOrderByIdFuckingEx(d,852274,u,false)
  call SaveInteger(HY,GetHandleId(unit004),'ills','B312')
  call SetUnitAbilityLevel(d,'A312',2)
  call IssueTargetOrderByIdFuckingEx(d,852274,u,false)
  call SaveInteger(HY,GetHandleId(unit004),'ills','B313')
  call UnitRemoveAbility(d,'A312')
  call PurgingTriggered(u,false)
  set d=null
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func2877))
  call GroupAddUnit(g,u)
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    set i=i+1
    call SaveUnitHandle(HY,h,i,u2)
    call UnitAddAbility(u2,'Avul')
    call ShowUnit(u2,false)
    set d=CreateUnit(GetOwningPlayer(u2),'h07W',GetUnitX(u2),GetUnitY(u2),GetUnitFacing(u2))
    call SaveUnitHandle(HY,h,300+i,d)
    set GXE=GetRandomReal(0,360)*bj_DEGTORAD
    set ILX=GetRandomReal(10,325)
    set nx=SafeX50(x+ILX*Cos(GXE))
    set ny=SafeY50(y+ILX*Sin(GXE))
    call SaveReal(HY,h,100*i+0,nx)
    call SaveReal(HY,h,100*i+1,ny)
    call SaveReal(HY,h,100*i+2,DistanceBetweenXY(GetUnitX(d),GetUnitY(d),nx,ny)/0.4*0.02)
    call SaveReal(HY,h,100*i+3, AngleBetweenXY(GetUnitX(d),GetUnitY(d),nx,ny)*bj_DEGTORAD)
    call GroupRemoveUnit(g,u2)
  endloop
  set d=null
  call SaveUnitHandle(HY,h,-100,CreateUnit(GetOwningPlayer(u),'o022',GetUnitX(u),GetUnitY(u),0))
  call SaveReal(HY,h,0,FOO)
  call SaveUnitHandle(HY,h,0,u)
  call TimerStart(t,.02,true,function Func2878)
  call SaveReal(HY,h,10,x)
  call SaveReal(HY,h,11,y)
  call KillGroup(g)
  set t=null
  set u=null
endfunction

function Func2880 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SUMMON)
  call TriggerAddCondition(t,Condition(function Func2853))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddCondition(t,Condition(function Func2874))
  set t=CreateTrigger()
  call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
  call TriggerAddCondition(t,Condition(function Func2875))
  set t=null
  call AddToPurgeList('A30Y','PRGA')
  call AddToPurgeList('B03C','PRGE')
  call AddWrapper("Func4634",0)
  call PreloadAbility('A10C')
  call PreloadAbility('A10H')
  call PreloadAbility('A10G')
  call PreloadAbility('A10I')
  call PreloadAbility('A10F')
endfunction

function Func2881 takes nothing returns boolean
  if GetUnitAbilityLevel(GetFilterUnit(),'B314')>0 or GetUnitAbilityLevel(GetFilterUnit(),'B315')>0 then
    set integer089=integer089+1
  endif
  return false
endfunction

function Func2882 takes unit u returns nothing
  local group g=GetAvailableGroup()
  local integer YXE=GetRandomInt(1,100)
  local integer QIE=GetUnitAbilityLevel(u,'A0DB')
  local unit d
  local integer Y2E=3+2*QIE
  local integer U6I=35+5*QIE
  set integer089=0
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(u),Condition(function Func2881))
  call KillGroup(g)
  if integer089<Y2E then
    if IsUnitIllusion(u)==false and YXE<=U6I then
      set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
      call UnitAddAbility2(d,'A314')
      call SaveUnitHandle(HY,GetHandleId(d),'ilsr',u)
      call IssueTargetOrderByIdFuckingEx(d,852274,u,false)
      call SaveInteger(HY,GetHandleId(unit004),'ills','B314')
    endif
    if IsUnitIllusion(u)and YXE<=8 then
      set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
      call UnitAddAbility3(d,'A314',2)
      call SaveUnitHandle(HY,GetHandleId(d),'ilsr',u)
      call IssueTargetOrderByIdFuckingEx(d,852274,u,false)
      call SaveInteger(HY,GetHandleId(unit004),'ills','B315')
    endif
  endif
  set d=null
endfunction

function Func2883 takes unit u,unit SGE returns nothing
  if(GetUnitAbilityLevel(u,'B03B')>0 and GetUnitAbilityLevel(u,'A36D')==0)and IsUnitType(SGE,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(SGE,GetOwningPlayer(u))then
    call Func2882(u)
  endif
endfunction

function Func2884 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitVisibleEx(GetFilterUnit(),GetTriggerPlayer())
endfunction

function Func2885 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  call Func0847(GetEnumUnit(),2.25+0.75*(GetUnitAbilityLevel(SKE,'A07Z')+GetUnitAbilityLevel(SKE,'A324')),'A3PJ','B0ER','A3PK')
  call StunTargetEx(GetEnumUnit(),0.1,true)
  if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
    call Func1330(SKE,GetEnumUnit(),'A3PJ')
  endif
  set SKE=null
endfunction

function Func2886 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u
  local integer h=GetHandleId(t)
  local integer i=1
  local integer WEI=LoadInteger(HY,h,0)
  local integer WXI=LoadInteger(HY,h,-1)
  local unit SKE=LoadUnitHandle(HY,h,0)
  loop
    if HaveSavedHandle(HY,h,i)then
      set u=LoadUnitHandle(HY,h,i)
      if IsDead(u)==false and GetUnitAbilityLevel(u,'B0ER')>0 then
        call DamageTarget(SKE,u,1,175)
      else
        call RemoveSavedBoolean(HY,LoadInteger(HY,h,i),'B0ER')
        call RemoveSavedHandle(HY,h,i)
      endif
    endif
    set i=i+1
    exitwhen i>WXI
  endloop
  if WEI>10 then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  elseif WEI==0 then
    call TimerStart(t,1,true,function Func2886)
  endif
  set u=null
  set SKE=null
  set t=null
endfunction

function Func2887 takes unit SKE,group g returns nothing
  local timer t=CreateTimer()
  local unit u
  local integer h=GetHandleId(t)
  local integer hu
  local integer i=1
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    set hu=GetHandleId(u)
    if GetUnitAbilityLevel(u,'B0ER')==0 and LoadBoolean(HY,hu,'B0ER')==false then
      call SaveUnitHandle(HY,h,i,u)
      call SaveInteger(HY,h,i,hu)
      call SaveBoolean(HY,hu,'B0ER',true)
      set i=i+1
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call TimerStart(t,0,false,function Func2886)
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveInteger(HY,h,-1,i)
  set t=null
  set u=null
endfunction

function Func2888 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local boolean K8I=GetSpellAbilityId()!='A07Z'
  local integer hu=GetHandleId(GetOwningPlayer(u))
  local group gg
  local group g3
  local integer i
  local integer k
  local destructable d
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),825,Condition(function Func2884))
  if K8I then
    set gg=GetAvailableGroup()
    set g3=GetAvailableGroup()
    set i=0
    set k=LoadInteger(HY,hu,'EinF')
    loop
      set i=i+1
      exitwhen i>k
      set d=LoadDestructableHandle(HY,hu,'EinF'+i)
      call GroupEnumUnitsInRange(gg,GetDestructableX(d),GetDestructableY(d),825,Condition(function Func2884))
      call GroupAddGroup(gg,g)
      call GroupAddGroup(gg,g3)
    endloop
    call Func2887(u,g3)
    call KillGroup(g3)
    call KillGroup(gg)
  endif
  call ForGroup(g,function Func2885)
  call KillGroup(g)
  set u=null
endfunction

function Func2889 takes unit source,integer ZAE returns nothing
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),0)
  call UnitAddAbility2(RCX,'A1GB')
  call SetUnitAbilityLevel(RCX,'A1GB',ZAE)
  call RemoveEndlessFadetime(source)
  call IssueTargetOrder(RCX,"invisibility",source)
  call UnitRemoveAbility(source,'A3TA')
  call UnitRemoveAbility(source,'A3TB')
  call UnitRemoveAbility(source,'A3TC')
  call UnitRemoveAbility(source,'A3TD')
  call UnitAddAbility2(source,'A3TA'-1+ZAE)
  set RCX=null
endfunction

function Func2890 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='h0BT'
endfunction

function Func2891 takes unit source returns boolean
  local group g=GetAvailableGroup()
  local boolean ZSE=false
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),375,Condition(function Func2890))
  if FirstOfGroup(g)!=null then
    set ZSE=true
  endif
  call KillGroup(g)
  set g=null
  return ZSE
endfunction

function Func2892 takes unit u returns nothing
  call UnitRemoveAbility(u,'B021')
  call UnitRemoveAbility(u,'A1GA')
  call UnitRemoveAbility(u,'A23A')
  call UnitRemoveAbility(u,'A23B')
  call UnitRemoveAbility(u,'A23C')
  call UnitRemoveAbility(u,'A23D')
  call UnitRemoveAbility(u,'A3TA')
  call UnitRemoveAbility(u,'A3TB')
  call UnitRemoveAbility(u,'A3TC')
  call UnitRemoveAbility(u,'A3TD')
  call UnitRemoveAbility(u,'B0E9')
endfunction

function Func2893 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,30)
  local integer c=(LoadInteger(HY,(h),34))
  local integer QIE=(LoadInteger(HY,(h),5))
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and(LoadBoolean(HY,(h),329))and GetAttacker()==u then
    call Func2892(u)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED and GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
      set c=c+1
      call SaveInteger(HY,(h),34,(c))
    elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A01Z' and GetTriggerUnit()==u then
      call SaveReal(HY,(h),442,TimerGetElapsed(GlobalTimer)+0.75)
      call DisableTrigger(GetTriggeringTrigger())
      call Func2889(u,QIE)
      call EnableTrigger(GetTriggeringTrigger())
      call SaveInteger(HY,(h),34,0)
    endif
    if Func0720(GetUnitX(u),GetUnitY(u),375)==false and Func2891(u)==false then
      if LoadReal(HY,(h),442)<(TimerGetElapsed(GlobalTimer))or GetTriggerEvalCount(t)==1 then
        call Func2892(u)
        call FlushChildHashtable(HY,(h))
        call CleanTrigger(t)
      endif
    elseif(LoadBoolean(HY,(h),329))and c>(150*QIE)then
      call Func2892(u)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    elseif(LoadBoolean(HY,(h),329))and GetUnitAbilityLevel(u,'B021')==0 and GetUnitAbilityLevel(u,'A1GA')>0 then
      call SaveReal(HY,(h),442,TimerGetElapsed(GlobalTimer)+.75)
      call DisableTrigger(GetTriggeringTrigger())
      call Func2889(u,QIE)
      call EnableTrigger(GetTriggeringTrigger())
    elseif GetUnitAbilityLevel(u,'B021')==0 then
      call Func2892(u)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    else
      call SaveReal(HY,(h),442,TimerGetElapsed(GlobalTimer)+.75)
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func2894 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    if GetUnitAbilityLevel(u,'B021')>0 then
      call UnitAddAbility2(u,'A1GA')
    endif
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func2895 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A01Z')
  call FuckingAssistBuffWrap(SKE,SGE)
  call SaveUnitHandle(HY,(h),30,SGE)
  call SaveInteger(HY,(h),5,QIE)
  call SaveInteger(HY,(h),34,0)
  call SaveReal(HY,(h),442,TimerGetElapsed(GlobalTimer)+.75)
  call TriggerAddCondition(t,Condition(function Func2893))
  call TriggerRegisterTimerEvent(t,0.1,true)
  call RemoveEndlessFadetime(SGE)
  call UnitAddAbility2(SGE,'A3TA'-1+QIE)
  call SaveInteger(HY,h,10,'A3TA'-1+QIE)
  if SKE==SGE then
    call SaveBoolean(HY,(h),329,(true))
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,(h),2,(SKE))
    call TriggerAddCondition(t,Condition(function Func2894))
    call TriggerRegisterTimerEvent(t,2,false)
    call TriggerRegisterDeathEvent(t,SKE)
  endif
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func2896 takes nothing returns nothing
  call AddToPurgeList('B0ER','PRGE')
  call AddToPurgeList('A3PK','PRGE')
  call AddToPurgeList('A3PJ','PRGE')
  call AddToPurgeList('A3PK','PRGE')
  call AddToPurgeList('B021','PRGA')
  call AddToPurgeList('A1GA','PRGA')
  call AddToPurgeList('A3TA','PRGA')
  call AddToPurgeList('A3TB','PRGA')
  call AddToPurgeList('A3TC','PRGA')
  call AddToPurgeList('A3TD','PRGA')
  call AddToPurgeList('B0E9','PRGA')
  call AddToPurgeList('A2MZ','PRGA')
  call AddToPurgeList('a2MZ','PRGA')
  call AddToPurgeList('A272','PRGE')
  call AddToPurgeList('B0EL','PRGE')
endfunction

function Tree_Armour_Structures takes unit u returns boolean
  return u==unit100 or u==unit101 or u==unit102 or u==unit103 or u==unit104 or u==unit105 or u==unit106 or u==unit107 or u==unit108 or u==unit109 or u==unit110 or u==unit111 or u==unit112 or u==unit113 or u==unit114 or u==unit115 or u==unit116 or u==unit053 or u==unit054 or u==unit055 or u==unit056 or u==unit057 or u==unit058 or u==Sentinels_Tier3_Top or u==Sentinels_Tier3_Mid or u==Sentinels_Tier3_Bot or u==unit062 or u==unit063 or u==unit064 or u==unit065 or u==unit066 or u==unit067 or u==unit068 or u==unit069
endfunction

function Tree_Armour_Find_Targets takes nothing returns nothing
  local unit source=GetEnumUnit()
  local real r=DistanceBetweenXY(GetUnitX(source),GetUnitY(source),Tree_Armour_target_locationX,Tree_Armour_target_locationY)
  if r<Tree_Armour_tt_real1 and IsUnitVisibleEx(source,GetOwningPlayer(Tree_Armour_tt_unit2))and(IsUnitType(source,UNIT_TYPE_HERO)or(IsUnitType(source,UNIT_TYPE_STRUCTURE)and Tree_Armour_Structures(source)))then
    set Tree_Armour_tt_unit1=GetEnumUnit()
    set Tree_Armour_tt_real1=r
  endif
  set source=null
endfunction

function Treant_LivingArmorHeal takes nothing returns real
  local trigger t=LoadTriggerHandle(HY,GetHandleId(GetTriggerUnit()),'A2ML')
  local integer h=GetHandleId(t)
  local real damage=LoadReal(HY,h,0)
  local integer charges=LoadInteger(HY,h,0)
  local real d=GetEventDamage()
  local real block=0.
  if d>5 and charges>0 then
    call SaveInteger(HY,h,0,charges-1)
    set block=RMinIF(d,damage)
  endif
  set t=null
  return block
endfunction

function Tree_Armour_End takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,1)+1
  if GetUnitAbilityLevel(u,'A2MZ')==0 or LoadInteger(HY,h,0)==0 or c>=75 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call RemoveSavedHandle(HY,GetHandleId(u),'A2ML')
    call UnitRemoveAbility(u,'A2MZ')
    call UnitRemoveAbility(u,'a2MZ')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  else
    call SaveInteger(HY,h,1,c)
    call SetWidgetLife(u,GetWidgetLife(u)+LoadReal(HY,h,1))
  endif
  set t=null
  set u=null
endfunction

function Tree_Armour_Start takes nothing returns nothing
  local trigger t
  local unit source=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local integer lvl=GetUnitAbilityLevel(source,'A2ML')
  local integer h
  local group g
  if target==null then
    set Tree_Armour_tt_unit1=null
    set Tree_Armour_tt_unit2=source
    set Tree_Armour_tt_real1=999999
    set Tree_Armour_target_locationX=GetSpellTargetX()
    set Tree_Armour_target_locationY=GetSpellTargetY()
    set tt_unit1=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,0,0,9999,Condition(function Func0825))
    call ForGroup(g,function Tree_Armour_Find_Targets)
    call KillGroup(g)
    set target=Tree_Armour_tt_unit1
    set g=null
  endif
  if HaveSavedHandle(HY,GetHandleId(target),'A2ML')then
    set t=LoadTriggerHandle(HY,GetHandleId(target),'A2ML')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,GetHandleId(target),'A2ML',t)
    call TriggerRegisterDeathEvent(t,target)
    call TriggerRegisterTimerEvent(t,0.2,true)
    call TriggerAddCondition(t,Condition(function Tree_Armour_End))
    call SaveUnitHandle(HY,h,0,target)
  endif
  call UnitAddAbility2(target,'A2MZ')
  call FuckingAssistBuffWrap(source,target)
  call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+3+lvl)
  call SaveInteger(HY,h,1,0)
  call SaveReal(HY,h,0,20.*lvl)
  call SaveReal(HY,h,1,(0.4*lvl*2))
  set t=null
  set source=null
  set target=null
endfunction

function Func2902 takes nothing returns nothing
  local integer cache=GetHandleId(GetTriggeringTrigger())
  local unit source=tt_unit1
  local unit target=tt_unit3
  local real r=(LoadReal(HY,(cache),21))
  call SetUnitState(target,UNIT_STATE_LIFE,GetUnitState(target,UNIT_STATE_LIFE)+r)
  set source=null
  set target=null
endfunction

function Treant_LeechSeed_AddProjectile takes nothing returns nothing
  local trigger t=AddProjectile(tt_unit2,GetEnumUnit(),'h0D8',"Func2902",400,false)
  local integer h=GetHandleId(t)
  call SaveReal(HY,(h),21,((real072)*1.0))
  set t=null
endfunction

function Treant_LeechSeed_SpellEffect takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer cache=GetHandleId(t)
  local unit source=(LoadUnitHandle(HY,(cache),2))
  local unit target=(LoadUnitHandle(HY,(cache),17))
  local integer lvl=(LoadInteger(HY,(cache),5))
  local group g
  local integer h=(LoadInteger(HY,(cache),34))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(cache))
    call CleanTrigger(t)
    call UnitRemoveAbility(target,'A272')
    call UnitRemoveAbility(target,'B0EL')
    call DestroyEffect(LoadEffectHandle(HY,(cache),32))
  else
    set h=h+1
    call SaveInteger(HY,(cache),34,(h))
    if h>5 then
      call FlushChildHashtable(HY,(cache))
      call CleanTrigger(t)
      call UnitRemoveAbility(target,'A272')
      call UnitRemoveAbility(target,'B0EL')
    endif
    call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",target,"origin"))
    set tt_unit1=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(target),GetUnitY(target),525,Condition(function DefaultAllyAcientsFilter))
    set tt_unit2=target
    set real072=15*lvl
    call ForGroup(g,function Treant_LeechSeed_AddProjectile)
    call KillGroup(g)
    call DamageTarget(source,target,1,real072)
  endif
  set t=null
  set source=null
  set target=null
  set g=null
  return false
endfunction

function Treant_LeechSeed takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local integer lvl=GetUnitAbilityLevel(source,'A26N')
  local trigger t=CreateTrigger()
  local integer cache=GetHandleId(t)
  call UnitAddAbility2(target,'A272')
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerRegisterTimerEvent(t,4.5,false)
  call TriggerAddCondition(t,Condition(function Treant_LeechSeed_SpellEffect))
  call SaveUnitHandle(HY,(cache),17,(target))
  call SaveUnitHandle(HY,(cache),2,(source))
  call SaveReal(HY,(cache),442,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call SaveInteger(HY,(cache),5,(lvl))
  call SaveInteger(HY,(cache),34,0)
  set t=null
  set source=null
  set target=null
endfunction

function Func2906 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer hu=LoadInteger(HY,h,0)
  local integer count=LoadInteger(HY,hu,'EinF')
  local integer offset
  local integer i
  local unit D2O=LoadUnitHandle(HY,h,2)
  if GetTriggerEventId()!=EVENT_GAME_TIMER_EXPIRED then
    call Func0682(LoadUbersplatHandle(HY,h,3))
    call DestroyTrigger(t)
    call FlushChildHashtable(HY,h)
    call KillUnit(D2O)
    set i=LoadInteger(HY,h,1)-1
    loop
      set i=i+1
      exitwhen HaveSavedHandle(HY,hu,'EinF'+i+1)==false
      call SaveDestructableHandle(HY,hu,'EinF'+i,LoadDestructableHandle(HY,hu,'EinF'+i+1))
    endloop
    call SaveInteger(HY,hu,'EinF',count-1)
  else
    call Func0683(LoadUbersplatHandle(HY,h,3),IsNeutralsOrObserversOrAllies(GetOwningPlayer(D2O))or(IsUnitVisibleEx(D2O,LocalPlayer)))
  endif
  set t=null
  set D2O=null
  return false
endfunction

function Func2907 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(GetOwningPlayer(u))
  local destructable d=GetSpellTargetDestructable()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer c=LoadInteger(HY,hu,'EinF')
  local unit D2O=CreateUnit(GetOwningPlayer(u),'ewsp',GetDestructableX(d),GetDestructableY(d),0)
  local ubersplat ub=Func0681(GetUnitX(D2O),GetUnitY(D2O),"EINF",255,255,255,127,false,false)
  local unit LDO=CreateUnit(GetOwningPlayer(D2O),'e00E',GetUnitX(D2O),GetUnitY(D2O),0)
  call UnitAddAbility2(LDO,'A34M')
  call IssueTargetOrderByIdFuckingEx(LDO,852069,D2O,false)
  set LDO=null
  call SetUnitPathing(D2O,false)
  call SetUnitX(D2O,GetDestructableX(d))
  call SetUnitY(D2O,GetDestructableY(d))
  call UnitRemoveType(D2O,UNIT_TYPE_PEON)
  call PauseUnit(D2O,true)
  call TriggerRegisterDeathEvent(t,d)
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function Func2906))
  call SaveDestructableHandle(HY,GetHandleId(GetOwningPlayer(u)),'EinF'+c+1,d)
  call SaveInteger(HY,hu,'EinF',c+1)
  call SaveInteger(HY,h,0,hu)
  call SaveInteger(HY,h,1,c+1)
  call SaveUnitHandle(HY,h,2,D2O)
  call SaveUbersplatHandle(HY,h,3,ub)
  set ub=null
  set D2O=null
  set t=null
  set d=null
  set u=null
endfunction

function Func2908 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A01V',false)
endfunction

function Func2909 takes nothing returns nothing
  call UnitAddAbility2(tt_unit1,'A01V')
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A01V',true)
endfunction

function Func2910 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local integer QIE=GetUnitAbilityLevel(SKE,'A2NT')
  local boolean WQI=(LoadBoolean(HY,h,95))
  local integer id=LoadInteger(HY,h,10)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  if(id=='A1B6' or id=='A0MQ')==false then
    call UnitAddAbility2(d,'A0LS')
    call SetUnitAbilityLevel(d,'A0LS',QIE)
    call IssueTargetOrder(d,"soulburn",SGE)
  endif
  call DamageTarget(SKE,SGE,1,100+50*QIE)
  if WQI then
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageSpell.mdx",SGE,"overhead"))
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  return false
endfunction

function Func2911 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=GetUnitAbilityLevel(SKE,'A2NT')
  local boolean FEX=false
  local integer id
  local boolean b=GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or(b==false and GetUnitAbilityLevel(SGE,'A2NV')==0)then
    set FEX=true
  elseif not b then
    set FEX=true
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerAddCondition(t,Condition(function Func2910))
    call TriggerRegisterTimerEvent(t,0.01,false)
    call SaveUnitHandle(HY,(GetHandleId(t)),2,(SKE))
    call SaveUnitHandle(HY,(GetHandleId(t)),17,(SGE))
    call SaveInteger(HY,(GetHandleId(t)),5,(QIE))
    call SaveBoolean(HY,h,95,(false))
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageDuration.mdx",SGE,"overhead"))
  elseif b then
    set id=GetSpellAbilityId()
    if Func1447(id)then
      set FEX=true
      set t=CreateTrigger()
      set h=GetHandleId(t)
      if id=='A0RV' or id=='A1YY' or id=='A14O' or id=='A0LN' or id=='A0SB' or id=='A0RW' or id=='A0K9' or id=='A0PL' then
        call TriggerRegisterTimerEvent(t,0.00,false)
      else
        call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_SPELL_ENDCAST)
      endif
      call TriggerAddCondition(t,Condition(function Func2910))
      call SaveUnitHandle(HY,h,2,(SKE))
      call SaveUnitHandle(HY,h,17,(SGE))
      call SaveBoolean(HY,h,95,(true))
      call SaveInteger(HY,h,10,id)
      if id=='A14O' or id=='A0M1' or id=='A1AX' or id=='A1B6' or id=='A0MQ' then
        call TriggerEvaluate(t)
      endif
    endif
  endif
  if FEX then
    call UnitRemoveAbility(SGE,'A2NV')
    call UnitRemoveAbility(SGE,'B05V')
    call FlushChildHashtable(HY,GetHandleId(GetTriggeringTrigger()))
    call CleanTrigger(GetTriggeringTrigger())
  endif
  set SGE=null
  set SKE=null
  set t=null
  return false
endfunction

function Func2912 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,h,19))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  if GetUnitAbilityLevel(SGE,'A2NV')==0 or GetTriggerEvalCount(t)>250 then
    call UnitRemoveAbility(SGE,'A2NV')
    call UnitRemoveAbility(SGE,'B05V')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
    call ShowUnit(d,false)
  else
    call SetUnitX(d,GetUnitX(SGE))
    call SetUnitY(d,GetUnitY(SGE))
  endif
  set t=null
  set d=null
  set SGE=null
  return false
endfunction

function Func2913 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local unit d=CreateUnit(GetOwningPlayer(SKE),'o019',GetUnitX(SGE),GetUnitY(SGE),0)
  call SetUnitVertexColor(d,0,0,0,0)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterTimerEvent(t,4,false)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func2911))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call UnitAddAbility2(SGE,'A2NV')
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func2912))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveUnitHandle(HY,h,17,(SGE))
  set SKE=null
  set SGE=null
  set d=null
  set t=null
endfunction

function Func2914 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=tt_unit3
  local real result=(LoadReal(HY,(ZAE),20))
  call SetHeroInt(source,GetHeroInt(source,false)+2,true)
  call IncUnitAbilityLevel(source,'A3HQ')
  call TextTagOnUnit("+2 "+GetObjectName('n0JP'),3,source,0.023,0,255,0,230,Func0590(source)or PlayerObserver)
  set source=null
endfunction

function Func2915 takes unit source,unit RCX returns nothing
  if IsUnitType(RCX,UNIT_TYPE_HERO)and GetCloneHeroId(RCX)==false and(IsUnitInRange(source,RCX,900)or GetOwningPlayer(source)==GetOwningPlayer(GetKillingUnit()))and IsDead(source)==false and IsUnitEnemy(source,GetOwningPlayer(RCX))then
    if GetUnitTypeId(source)=='N01A' then
      call SaveInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'INTS',LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'INTS')+2)
      call TextTagOnUnit("-2 "+GetObjectName('n0JP'),3,RCX,0.023,255,0,0,230,Func0590(RCX)or PlayerObserver)
      call SetHeroInt(RCX,GetHeroInt(RCX,false)-2,true)
      call AddProjectile(RCX,source,'h0CP',"Func2914",3000,false)
    endif
  endif
endfunction

function Func2916 takes nothing returns nothing
  call Func2915(GetEnumUnit(),GetTriggerUnit())
endfunction

function Func2917 takes nothing returns boolean
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1000,Condition(function AllHeroesFilter))
  call GroupAddUnit(g,udg_Hero[GetPlayerId(GetOwningPlayer(GetKillingUnit()))])
  call ForGroup(g,function Func2916)
  call KillGroup(g)
  set g=null
  return false
endfunction

function Func2918 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func2917))
  set t=null
  call AddToPurgeList('B38J','PRGE')
  call AddToPurgeList('A3C4','PRGE')
  call AddToPurgeList('A3C5','PRGE')
  call AddToPurgeList('A3C7','PRGE')
  call AddToPurgeList('A3C6','PRGE')
  call AddToPurgeList('A2NV','PRGE')
  call AddToPurgeList('B05V','PRGE')
  call AddToPurgeList('A1PS','PRGE')
  call AddToPurgeList('B0CQ','PRGE')
  call AddToPurgeList('B07U','PRGE')
  call AddWrapper("Func4619",3)
endfunction

function Func2919 takes nothing returns nothing
  call Func1276()
  call Func2089(GetTriggerPlayer(),GetTriggerPlayer())
endfunction

function Func2920 takes unit WXE,unit SGE returns nothing
  local real d=(.20+.15*I2R(GetUnitAbilityLevel(WXE,'A0LZ')))*GetHeroInt(WXE,true)
  call Func2340(WXE,SGE,GetEventDamage())
  call UnitRemoveAbility(SGE,'B05X')
  call TextTagOnUnit("+"+I2S(R2I(d)),1,SGE,.023,3,216,216,216,Func0590(SGE)or PlayerObserver)
  call DamageTarget(WXE,SGE,3,d)
endfunction

function Func2921 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),34))
  local integer id=GetSpellAbilityId()
  local boolean FEX=false
  local integer BHX=LoadInteger(HY,ZAE,6)
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if ZBE>0 and GetUnitAbilityLevel(RCX,BHX)>0 then
      if IsUnitSilenced(RCX)==false then
        set ZBE=ZBE-1
        call SaveInteger(HY,(ZAE),34,(ZBE))
        call DamageTarget(source,RCX,1,8*QIE+6)
      endif
    else
      set FEX=true
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    set FEX=true
  elseif Func1447(id)then
    call SaveInteger(HY,(ZAE),34,ZBE+4)
  endif
  if FEX then
    call UnitRemoveAbility(RCX,BHX)
    call UnitRemoveAbility(RCX,'B0CQ')
    call FlushChildHashtable(HY,ZAE)
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func2922 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetEnumUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A14L')
  call UnitAddAbility2(SGE,'A3TH'-1+QIE)
  if IsUnitIllusion(SGE)==false then
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_SPELL_EFFECT)
  endif
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func2921))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveInteger(HY,(h),34,6)
  call SaveInteger(HY,h,6,QIE-1+'A3TH')
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func2923 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func2924 takes nothing returns nothing
  local group g
  local integer ZAE=GetUnitAbilityLevel(GetTriggerUnit(),'A14L')
  if ZAE>0 then
    set g=GetAvailableGroup()
    set tt_unit1=GetTriggerUnit()
    call GroupEnumUnitsInRange(g,0,0,9999,Condition(function Func2923))
    call ForGroup(g,function Func2922)
    call KillGroup(g)
  endif
  set g=null
endfunction

function Func2925 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  set tt_unit1=GetTriggerUnit()
  call GroupEnumUnitsInRange(g,x,y,375,Condition(function Func2923))
  call ForGroup(g,function Func2922)
  call Func0692("war3mapImported\\CotS.mdx",x,y,5)
  call KillGroup(g)
endfunction

function Func2926 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),tt_player1)and GetUnitAbilityLevel(GetFilterUnit(),'B07U')>0
endfunction

function Func2927 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local player p=LoadPlayerHandle(HY,h,0)
  local group g
  local unit u2
  if GetTriggerEvalCount(t)>1 then
    call RemoveSavedHandle(HY,h,0)
    call CleanTrigger(t)
    if IsPlayerEnemy(p,LocalPlayer)then
      call VolumeGroupReset()
    endif
  else
    set g=GetAvailableGroup()
    set tt_player1=p
    call GroupEnumUnitsInRange(g,0,0,12000,Condition(function Func2926))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call Func1032(udg_Hero[GetPlayerId(p)],u2)
    endloop
    call KillGroup(g)
  endif
  set t=null
  return false
endfunction

function Func2928 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A0L3')
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A2QC')
    call Func2924()
  endif
  call SavePlayerHandle(HY,GetHandleId(t),0,GetTriggerPlayer())
  call TriggerRegisterTimerEvent(t,QIE+2,false)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerAddCondition(t,Condition(function Func2927))
  set bj_lastCreatedUnit=CreateUnit(GetTriggerPlayer(),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
  call UnitAddAbility(bj_lastCreatedUnit,'A0L2')
  call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0L2',QIE)
  call ImminentTriggeredPointOrder(bj_lastCreatedUnit,852592,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
  set bj_lastCreatedUnit=null
  if IsPlayerEnemy(LocalPlayer,GetTriggerPlayer())then
    call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITSOUNDS,.0)
    call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_COMBAT,.0)
    call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_SPELLS,.0)
    call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_MUSIC,.0)
  endif
  set t=null
endfunction

function Func2929 takes nothing returns nothing
  call SetPlayerTechResearched(GetTriggerPlayer(),'R005',GetLearnedSkillLevel())
endfunction

function Func2930 takes unit WXE,unit SGE returns nothing
  local real dmg=-10+25*GetUnitAbilityLevel(WXE,'A03S')
  local real ls=Func1431(WXE)
  call UnitAddAbilityTimedExF(SGE,'A31I',1,0.5,'B31I')
  call DamageTarget(WXE,SGE,2,dmg)
  if ls>0 and IsDead(WXE)==false then
    set dmg=dmg*ls
    call SetWidgetLife(WXE,GetWidgetLife(WXE)+dmg)
  endif
endfunction

function Func2931 takes nothing returns nothing
  if LoadInteger(HY,GetHandleId(GetEnumUnit()),'A064')!=1 then
    call DamageTarget(unit199,GetEnumUnit(),1,real073)
    call AddTimedKeyToAgent(GetEnumUnit(),'A064',0.98)
  endif
  set tt_player1=GetOwningPlayer(unit200)
  call SetUnitOwner(unit200,GetOwningPlayer(GetEnumUnit()),false)
  call IssueTargetOrder(unit200,"slow",GetEnumUnit())
  call SetUnitOwner(unit200,tt_player1,false)
endfunction

function Func2932 takes real x,real y,real a,real offset returns nothing
  local effect fx=AddSpecialEffect(string002,x+offset*Cos(a*bj_DEGTORAD),y+offset*Sin(a*bj_DEGTORAD))
  call Func0182(fx,GetRandomReal(0,359))
  call DestroyEffect(fx)
  set fx=null
endfunction

function Func2933 takes real x,real y,real A7X,string fx returns nothing
  local real offset=0
  local real a=0
  local integer i=0
  local real ar=GetRandomReal(-10,10)
  local real halfaoe=A7X/2
  local real YXI=A7X/4
  set string002=fx
  loop
    call Func2932(x,y,i*30+ar,A7X)
    if i<8 then
      set offset=GetRandomReal(YXI,YXI*3)
      set a=45*i
      call Func2932(x,y,a,offset)
    endif
    set i=i+1
    exitwhen i>=12
  endloop
endfunction

function Func2934 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit d=(LoadUnitHandle(HY,h,19))
  local integer QIE=(LoadInteger(HY,h,5))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local group g=GetAvailableGroup()
  local real offset
  local real a
  local real dx
  local real dy
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,475,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  set unit199=SKE
  set real073=QIE*20-5
  set unit200=d
  call ForGroup(g,function Func2931)
  call KillGroup(g)
  if GetTriggerEvalCount(t)==10 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call Func2933(x,y,275,"Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl")
  endif
  set t=null
  set SKE=null
  set d=null
  set g=null
  return false
endfunction

function Func2935 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local integer QIE=GetUnitAbilityLevel(u,'A064')
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',x,y,0)
  local real dx
  local real dy
  local real rx
  local real ry
  local integer i=1
  local unit d2
  call UnitAddAbility2(d,'A19F')
  call SetUnitAbilityLevel(d,'A19F',QIE)
  if GetTriggerEvalCount(t)==1 then
    loop
      set rx=GetRandomReal(0,450)
      set ry=GetRandomReal(0,360)
      set dx=x+rx*Cos(ry*bj_DEGTORAD)
      set dy=y+rx*Sin(ry*bj_DEGTORAD)
      set d2=CreateUnit(GetOwningPlayer(u),'e00J',GetUnitX(u),GetUnitY(u),90)
      call ImminentTriggeredPointOrder(d2,851984,dx,dy)
      call UnitApplyTimedLife(d2,'BTLF',0.5)
      set d2=null
      set i=i+1
      exitwhen i>10
    endloop
    call TriggerRegisterTimerEvent(t,0.4,false)
  else
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,(h),2,(u))
    call SaveUnitHandle(HY,(h),19,(d))
    call SaveReal(HY,(h),6,((x)*1.0))
    call SaveReal(HY,(h),7,((y)*1.0))
    call SaveInteger(HY,(h),5,(QIE))
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func2934))
    call TimedReveal(GetOwningPlayer(u),10,x,y,450)
    call TriggerEvaluate(t)
  endif
  set u=null
  set d=null
  set t=null
  return false
endfunction

function Func2936 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  call TriggerRegisterTimerEvent(t,0.8,false)
  call TriggerAddCondition(t,Condition(function Func2935))
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveReal(HY,(h),6,((x)*1.0))
  call SaveReal(HY,(h),7,((y)*1.0))
  set t=null
  set u=null
endfunction

function Func2937 takes nothing returns nothing
  call PreloadAbility('A19F')
  call AddToPurgeList('B0BB','PRGE')
  call AddToPurgeList('A31I','PRGE')
  call AddToPurgeList('B31I','PRGE')
  call AddWrapper("Func4645",2)
endfunction

function Func2938 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,0))
  local real WNE=(LoadReal(HY,h,0))
  local integer O6O=(LoadInteger(HY,(GetHandleId(u)),802))
  local group g
  local real YNI=55.
  if GetUnitAbilityLevel(u,'A39S')==1 then
    set YNI=YNI*(100.-25*1.)/100.
  endif
  if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
    if(GetSpellAbilityId()=='A064')and O6O<=0 then
      call InterruptUnitError(u,'TX0U')
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if(GetSpellAbilityId()=='A064')then
      call SaveInteger(HY,GetHandleId(u),802,O6O-1)
      call Func0458(u,O6O,false)
    endif
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if O6O<3 then
      set WNE=WNE-0.2
      if WNE<=0. or boolean147 then
        call Func0458(u,O6O,true)
        call SaveInteger(HY,GetHandleId(u),802,O6O+1)
        call SaveReal(HY,h,0,YNI)
      else
        call SaveReal(HY,h,0,WNE*1.0)
      endif
    endif
  endif
  set u=null
  set t=null
  return false
endfunction

function Func2939 takes nothing returns nothing
  if GetLearnedSkillLevel()==1 then
    call UnitAddAbility2(GetTriggerUnit(),integers024[3])
    call SaveInteger(HY,GetHandleId(GetTriggerUnit()),802,3)
  endif
endfunction

function Func2940 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterUnitEvent(t,tt_unit1,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(t,tt_unit1,EVENT_UNIT_SPELL_CAST)
  call TriggerAddCondition(t,Condition(function Func2938))
  call SaveUnitHandle(HY,GetHandleId(t),0,tt_unit1)
  call SaveReal(HY,GetHandleId(t),0,55.)
  call SaveInteger(HY,GetHandleId(tt_unit1),802,3)
  call SaveTriggerHandle(HY,GetHandleId(tt_unit1),802,t)
  set t=null
endfunction

function Func2941 takes unit YCI,unit riki returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterUnitEvent(t,YCI,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(t,YCI,EVENT_UNIT_SPELL_CAST)
  call TriggerAddCondition(t,Condition(function Func2938))
  call SaveUnitHandle(HY,GetHandleId(t),0,YCI)
  call SaveReal(HY,GetHandleId(t),0,55.)
  call SaveInteger(HY,GetHandleId(YCI),802,3)
  call SaveTriggerHandle(HY,GetHandleId(YCI),802,t)
  call SaveBoolean(HY,GetHandleId(YCI),'A064',true)
  set t=null
endfunction

function Func2942 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),17))
  local effect I4X=(LoadEffectHandle(HY,(ZAE),32))
  local player whichPlayer=GetOwningPlayer(source)
  call UnitShareVision(M_X,whichPlayer,false)
  call DestroyEffect(I4X)
  call UnitRemoveAbility(M_X,'A3KA')
  call UnitRemoveAbility(M_X,'B06H')
  call FlushChildHashtable(HY,(ZAE))
  call SetUnitTimeScale(source,1)
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set M_X=null
  set I4X=null
  set whichPlayer=null
  return false
endfunction

function Func2943 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local player p=GetOwningPlayer(SKE)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local string s="effects\\Snipe Target.mdx"
  if IsNeutralsOrObserversOrAllies(p)==false then
    set s=""
  endif
  call UnitShareVision(SGE,p,true)
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveUnitHandle(HY,(h),14,(SKE))
  call SaveEffectHandle(HY,(h),32,(AddSpecialEffectTarget(s,SGE,"overhead")))
  call TriggerRegisterTimerEvent(t,4,false)
  call UnitAddAbility2(SGE,'A3KA')
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func2942))
  if GetUnitTypeId(SKE)==HeroID[26]then
    call Func0735(SKE,0,7)
  endif
  set t=null
  set SKE=null
  set SGE=null
  set p=null
endfunction

function Func2944 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit YFI=CreateUnit(GetOwningPlayer(SKE),'e003',x,y,0)
  local integer QIE=GetUnitAbilityLevel(SKE,'A0RG')
  local real LDX=(83+17*QIE)*0.01
  call SetUnitVertexColor(YFI,255,255,255,150)
  call UnitApplyTimedLife(YFI,'BTLF',6)
  call SetUnitScale(YFI,LDX,LDX,LDX)
  if IsScourge(GetOwningPlayer(SKE))then
    call UnitAddAbility(YFI,'A019')
    call SetUnitAbilityLevel(YFI,'A019',QIE)
  else
    call UnitAddAbility(YFI,'A0E7')
    call SetUnitAbilityLevel(YFI,'A0E7',QIE)
  endif
  call EvasionSourceActivate(13,8.)
  set integer029=QIE
  call ImminentTriggeredPointOrder(YFI,852473,x,y)
  set SKE=null
  set YFI=null
endfunction

function Func2945 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local integer QIE=LoadInteger(HY,h,5)
  local boolean isTick=GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED
  local boolean FEX=false
  local timer tt=LoadTimerHandle(HY,h,4)
  local group g=LoadGroupHandle(HY,h,1)
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  local unit u2
  local real r
  local integer c=LoadInteger(HY,h,0)
  local boolean isAttack=LoadBoolean(HY,h,0)
  set c=GetTriggerEvalCount(t)
  if c==1 then
    call TimerStart(LoadTimerHandle(HY,h,4),0.02,true,null)
  endif
  if GetUnitAbilityLevel(SKE,'a3NW')==0 then
    set FEX=true
  else
    if c==1 or ModuloInteger(c-1,50)==0 then
      call Func0683(LoadUbersplatHandle(HY,h,3),IsVisibleToPlayer(x,y,LocalPlayer))
      set tt_unit1=SKE
      call GroupEnumUnitsInRange(g,x,y,525,Condition(function Func0816))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        if IsUnitType(u2,UNIT_TYPE_HERO)then
          set tt_unit1=SKE
          set tt_unit3=u2
          set tt_real1=0.
          set tt_real2=1.
          set unit032=null
          call ExecuteFunc("Func4681")
          call IfUnitIsMotherfuckerRiki(SKE,true)
          call IfUnitIsMotherfuckerRiki(SKE,false)
        endif
      endloop
      call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
    endif
  endif
  if FEX then
    call KillGroup(g)
    call SetUnitInvulnerable(SKE,false)
    call Func0477(LoadUnitHandle(HY,h,5),0.5)
    call UnitRemoveAbility(SKE,'A04R')
    call DestroyTimer(tt)
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set SKE=null
  set t=null
  set tt=null
endfunction

function Func2946 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local group g=GetAvailableGroup()
  local timer tt=CreateTimer()
  local unit YJI
  call SetUnitInvulnerable(SKE,true)
  call IfUnitIsMotherfuckerRiki(SKE,true)
  call IfUnitIsMotherfuckerRiki(SKE,false)
  call UnitAddAbility2(SKE,'A04R')
  call TriggerRegisterTimerExpireEvent(t,tt)
  call TimerStart(tt,0,false,null)
  call TriggerAddCondition(t,Condition(function Func2945))
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveInteger(HY,h,5,QIE)
  call SaveGroupHandle(HY,h,1,g)
  call Func2336("RikiUlti.mdx")
  call Func2337("RIKI")
  set YJI=CreateUnit(GetOwningPlayer(SKE),'h02C',x,y,GetUnitFacing(SKE))
  call Func2337("")
  call Func2338()
  call SaveUnitHandle(HY,h,5,YJI)
  set YJI=null
  call SaveTimerHandle(HY,h,4,tt)
  call SaveReal(HY,h,0,x)
  call SaveReal(HY,h,1,y)
  set SKE=null
  set tt=null
  set t=null
endfunction

function Func2947 takes nothing returns boolean
  local unit u=GetAttacker()
  local integer QIE=GetUnitAbilityLevel(u,'A0MB')
  if QIE>0 and IsUnitIllusion(u)==false then
    call UnitRemoveAbility(u,RikiPernamentInvises[QIE])
    call UnitRemoveAbility(u,RikiPernamentInvises[QIE+4])
    if GetUnitAbilityLevel(u,'A36D')==0 then
      call UnitAddAbility2(u,RikiPernamentInvises[QIE])
      call UnitAddAbility2(u,RikiPernamentInvises[QIE+4])
    endif
    call UnitRemoveAbility(u,'A3E0')
    call UnitRemoveAbility(u,'B31E')
  endif
  set u=null
  return false
endfunction

function Func2948 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetLearnedSkillLevel()
  call RemoveEndlessFadetime(u)
  if QIE==1 then
  elseif QIE==2 then
    call UnitRemoveAbility(u,RikiPernamentInvises[1])
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
  elseif QIE==3 then
    call UnitRemoveAbility(u,RikiPernamentInvises[1])
    call UnitRemoveAbility(u,RikiPernamentInvises[2])
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
    call UnitRemoveAbility(u,RikiPernamentInvises[6])
  elseif QIE==4 then
    call UnitRemoveAbility(u,RikiPernamentInvises[1])
    call UnitRemoveAbility(u,RikiPernamentInvises[2])
    call UnitRemoveAbility(u,RikiPernamentInvises[3])
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
    call UnitRemoveAbility(u,RikiPernamentInvises[6])
    call UnitRemoveAbility(u,RikiPernamentInvises[7])
  endif
  call UnitAddAbility2(u,RikiPernamentInvises[QIE])
  call UnitAddAbility2(u,RikiPernamentInvises[QIE+4])
  set u=null
endfunction

function Func2949 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerAddCondition(t,Condition(function Func2947))
  call HideAbility('A3E0')
  set RikiPernamentInvises[1]='A2UR'
  set RikiPernamentInvises[2]='A2US'
  set RikiPernamentInvises[3]='A2UT'
  set RikiPernamentInvises[4]='A31D'
  set RikiPernamentInvises[5]='A37L'
  set RikiPernamentInvises[6]='A37M'
  set RikiPernamentInvises[7]='A37N'
  set RikiPernamentInvises[8]='A37O'
  set t=null
  call AddWrapper("RikiBackStabWrapper",0)
endfunction

function RikiEnterMap takes nothing returns nothing
  local unit u=tt_unit1
  local integer lvl=GetUnitAbilityLevel(u,'A0MB')
  set RikiPernamentInvises[1]='A2UR'
  set RikiPernamentInvises[2]='A2US'
  set RikiPernamentInvises[3]='A2UT'
  set RikiPernamentInvises[4]='A31D'
  set RikiPernamentInvises[5]='A37L'
  set RikiPernamentInvises[6]='A37M'
  set RikiPernamentInvises[7]='A37N'
  set RikiPernamentInvises[8]='A37O'
  if lvl==0 then
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
    call UnitRemoveAbility(u,RikiPernamentInvises[6])
    call UnitRemoveAbility(u,RikiPernamentInvises[7])
    call UnitRemoveAbility(u,RikiPernamentInvises[8])
  elseif lvl==1 then
    call UnitRemoveAbility(u,RikiPernamentInvises[6])
    call UnitRemoveAbility(u,RikiPernamentInvises[7])
    call UnitRemoveAbility(u,RikiPernamentInvises[8])
  elseif lvl==2 then
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
    call UnitRemoveAbility(u,RikiPernamentInvises[7])
    call UnitRemoveAbility(u,RikiPernamentInvises[8])
  elseif lvl==3 then
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
    call UnitRemoveAbility(u,RikiPernamentInvises[6])
    call UnitRemoveAbility(u,RikiPernamentInvises[8])
  elseif lvl==4 then
    call UnitRemoveAbility(u,RikiPernamentInvises[5])
    call UnitRemoveAbility(u,RikiPernamentInvises[6])
    call UnitRemoveAbility(u,RikiPernamentInvises[7])
  endif
  set u=null
endfunction

function Spiritsiphon_duration takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit caster=LoadUnitHandle(HY,h,0)
  local unit target=LoadUnitHandle(HY,h,1)
  local integer lh=LoadInteger(HY,h,2)
  local real hp
  local real bonusrange=0.
  if GetUnitAbilityLevel(caster,'A3O3')>0 then
    set bonusrange=200.
  endif
  if GetTriggerEvalCount(t)==24 then
    call TriggerRegisterTimerEvent(t,0,false)
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or DistanceBetweenUnits(caster,target)>750.+bonusrange or GetTriggerEvalCount(t)>24 then
    call SaveReal(HY,lh,8,999)
    call UnitRemoveAbility(target,'A3N6'-1+LoadInteger(HY,h,5))
    call UnitRemoveAbility(target,'a3N6')
    call UnitRemoveAbility(target,'A3NA')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  else
    set hp=GetUnitState(target,UNIT_STATE_MAX_LIFE)*0.01*((LoadInteger(HY,h,5)*1.5)-0.5)/4.+6.25
    call SetWidgetLife(caster,GetWidgetLife(caster)+hp)
    call DamageTarget(caster,target,1,hp)
  endif
  set t=null
  set caster=null
  set target=null
endfunction

function Spiritsiphon_SpellEffect takes nothing returns nothing
  local unit caster=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local integer lvl=GetUnitAbilityLevel(caster,GetSpellAbilityId())
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer i=LoadInteger(HY,GetHandleId(caster),804)
  if i>0 then
    call SaveInteger(HY,GetHandleId(caster),804,i-1)
    call Func0458(caster,i,false)
  endif
  if GetUnitTypeId(caster)=='e00E' then
    set caster=LoadUnitHandle(HY,GetHandleId(caster),0)
  endif
  call SaveUnitHandle(HY,h,0,caster)
  call SaveUnitHandle(HY,h,1,target)
  call SaveInteger(HY,h,5,lvl)
  call TriggerRegisterTimerEvent(t,0.,false)
  call TriggerRegisterTimerEvent(t,0.25,true)
  call TriggerRegisterDeathEvent(t,caster)
  call TriggerRegisterDeathEvent(t,target)
  call TriggerAddCondition(t,Condition(function Spiritsiphon_duration))
  call UnitAddAbility2(target,'A3N6'-1+lvl)
  call UnitAddAbility2(target,'A3NA')
  call SaveInteger(HY,h,2,CreateLightningOnUnit("DRAB",caster,target,85,1,1,1,1,5,.1))
  set t=null
  set caster=null
  set target=null
endfunction

function Func2953 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())then
    call RemoveLinkenBuff(GetSpellTargetUnit())
  else
    call Spiritsiphon_SpellEffect()
  endif
endfunction

function Func2954 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())!='e00E' and LoadInteger(HY,GetHandleId(GetTriggerUnit()),804)<=0 then
    if LoadBoolean(HY,GetHandleId(GetTriggerUnit()),'A3N5')==false then
      set tt_unit1=GetTriggerUnit()
      call ExecuteFunc("Func2958")
    endif
    call Func0658('TX0U')
  elseif GetSpellTargetUnit()==Roshan or GetUnitAbilityLevel(GetSpellTargetUnit(),'A3NA')!=0 then
    call Func0658('n0K9')
  endif
endfunction

function Func2955 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  local integer O6O=LoadInteger(HY,hu,804)
  local real WNE=(LoadReal(HY,h,0))
  local real cd=45.
  if GetUnitAbilityLevel(u,'A39S')==1 then
    set cd=cd*(100.-25*1.)/100.
  endif
  if hu>0 then
    if O6O<GetUnitAbilityLevel(u,'A3N5')then
      set WNE=WNE+0.5
      if WNE>=cd or boolean147 then
        call SaveInteger(HY,hu,804,O6O+1)
        call Func0458(u,O6O,true)
        call SaveReal(HY,h,0,0.0)
      else
        call SaveReal(HY,h,0,WNE)
      endif
    endif
  else
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  endif
  set t=null
  set u=null
endfunction

function Func2956 takes unit u returns nothing
  local timer t
  local integer h
  if LoadBoolean(HY,GetHandleId(u),'A3N5')then
    return
  endif
  set t=CreateTimer()
  set h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call TimerStart(t,0.5,true,function Func2955)
  call SaveBoolean(HY,GetHandleId(u),'A3N5',true)
  call SaveReal(HY,h,0,999)
  set t=null
endfunction

function Func2957 takes nothing returns nothing
  call Func2956(GetTriggerUnit())
endfunction

function Func2958 takes nothing returns nothing
  call Func2956(tt_unit1)
endfunction

function Func2959 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real dmg=15*GetUnitAbilityLevel(SKE,'A0K9')+40
  local trigger t
  local integer h
  local real x
  local real y
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  set x=GetUnitX(SGE)-75*Cos(GetUnitFacing(SGE)*bj_DEGTORAD)
  set y=GetUnitY(SGE)-75*Sin(GetUnitFacing(SGE)*bj_DEGTORAD)
  call SetUnitX(SKE,x)
  call SetUnitY(SKE,y)
  call SetUnitFacing(SKE,GetUnitFacing(SGE))
  call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",x,y))
  if IsUnitEnemy(SGE,GetOwningPlayer(SKE))then
    call DamageTarget(SKE,SGE,1,dmg)
    call SaveBoolean(HY,(GetHandleId(SKE)),332,(true))
    call InitOnSpellCDStarts(SKE,SGE)
  endif
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func2960 takes nothing returns nothing
  if(IsBlocked(GetSpellTargetUnit())==false or IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())))then
    call Func2959()
  endif
endfunction

function Func2961 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endfunction

function Func2962 takes unit WXE,unit SGE returns nothing
  local integer QIE=GetUnitAbilityLevel(WXE,'A0MB')
  local boolean b=LoadBoolean(HY,GetHandleId(WXE),332)
  local real a=RAbsBJ(GetUnitFacing(SGE)-GetUnitFacing(WXE))
  set b=b or GetUnitAbilityLevel(WXE,'a3NW')>0
  if a>180 then
    set a=360-a
  endif
  if a<=105 or b then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",SGE,"chest"))
    if IsUnitIllusion(WXE)==false then
      call SaveBoolean(HY,(GetHandleId(WXE)),332,(false))
      call DamageTarget(WXE,SGE,23,GetHeroAgi(WXE,true)*(0.25*QIE+0.25))
    endif
  endif
endfunction

function Func2963 takes unit WXE,unit SGE returns nothing
  if GetUnitAbilityLevel(WXE,'A0MB')>0 and(AliveNonBuildOrMarker(SGE)or IsUnitInGroup(SGE,group013))and(IsUnitEnemy(SGE,GetOwningPlayer(WXE))or(IsUnitType(SGE,UNIT_TYPE_HERO)==false and GetWidgetLife(SGE)/GetUnitState(SGE,UNIT_STATE_MAX_LIFE)<0.5))then
    if GetUnitAbilityLevel(WXE,'A36D')==0 then
      call Func2962(WXE,SGE)
    endif
  endif
endfunction

function Sven_Warcry_Start takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer lvl=GetUnitAbilityLevel(u,'A2IS')
  local group g=GetAvailableGroup()
  local unit u2
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function Func0828))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call FuckingAssistBuffWrap(u,u2)
    call UnitAddAbilityTimedExF(u2,'A1F4',1,8,'B0BV')
    call UnitAddAbilityTimedExF(u2,'A2MF'-1+lvl,1,8,'B0BV')
  endloop
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",u,"overhead"))
  set u=null
  set g=null
endfunction

function Func2965 takes nothing returns nothing
  call AddToPurgeList('A2MF','PRGA')
  call AddToPurgeList('A2MG','PRGA')
  call AddToPurgeList('A2MH','PRGA')
  call AddToPurgeList('A2MI','PRGA')
  call AddToPurgeList('A1F4','PRGA')
  call AddToPurgeList('B0BV','PRGA')
endfunction

function Func2966 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  local integer c=(LoadInteger(HY,(h),34))
  local boolean NQI=GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED
  local boolean FEX=false
  if NQI then
    set c=c+1
    call SaveInteger(HY,(h),34,(c))
    if c>1 or IsDead(u)then
      set FEX=true
    else
      call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BattleCryCaster.mdx",u,"overhead"))
      call UnitAddAbility2(u,LoadInteger(HY,h,10))
      call UnitAddAbility2(u,LoadInteger(HY,h,11))
    endif
  else
    set FEX=true
  endif
  if FEX then
    call UnitRemoveAbility(u,LoadInteger(HY,h,10))
    call UnitRemoveAbility(u,LoadInteger(HY,h,11))
    call UnitRemoveAbility(u,'B009')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  return false
endfunction

function GodStrength takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local boolean id=GetSpellAbilityId()=='A31T'
  local integer lvl=GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())
  local integer a=0
  local integer i='A31V'-1+lvl
  if lvl==1 then
    set a='A0WM'
  elseif lvl==2 then
    set a='A0WE'
  else
    set a='A0WN'
  endif
  if id==false then
    set i=0
  endif
  call SaveInteger(HY,h,10,a)
  call SaveInteger(HY,h,11,i)
  call TriggerRegisterTimerEvent(t,25,false)
  call TriggerRegisterTimerEvent(t,0.31,false)
  call TriggerRegisterDeathEvent(t,GetTriggerUnit())
  call TriggerAddCondition(t,Condition(function Func2966))
  call SaveUnitHandle(HY,(h),14,GetTriggerUnit())
  call SaveBoolean(HY,h,0,id)
  call SaveInteger(HY,(h),34,0)
  set t=null
endfunction

function Sven_GodStrength_SpellEffect takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='H001' then
    call GodStrength()
  endif
endfunction

function Func2969 takes unit SKE,player p,unit SGE,integer QIE,boolean UII returns nothing
  local unit d=CreateUnit(p,'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local group g=GetAvailableGroup()
  local unit u2
  if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false and UII==false then
    call SaveUnitHandle(TempHash,'A3E9',0,SGE)
    call SaveUnitHandle(TempHash,'A3E9',1,SKE)
    call SaveInteger(TempHash,'A3E9',0,QIE)
    call ExecuteFunc("Func2973")
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),280,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call GroupAddUnit(g,SGE)
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call StunTargetEx(u2,2,false)
    call DamageTarget(SKE,u2,1,QIE*75+25)
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",SGE,"origin"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",SGE,"origin"))
  set d=null
  set g=null
endfunction

function Func2970 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local player p=(LoadPlayerHandle(HY,h,54))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local integer QIE=(LoadInteger(HY,h,5))
  local unit NCX=(LoadUnitHandle(HY,h,45))
  local real x=GetUnitX(NCX)
  local real y=GetUnitY(NCX)
  local real tx=GetUnitX(SGE)
  local real ty=GetUnitY(SGE)
  local real NBX=1000*0.035
  local real a= AngleBetweenXY(x,y,tx,ty)
  local real nx=x+NBX*Cos(a*bj_DEGTORAD)
  local real ny=y+NBX*Sin(a*bj_DEGTORAD)
  local boolean b=(LoadBoolean(HY,h,249))
  call SetUnitX(NCX,nx)
  call SetUnitY(NCX,ny)
  call SetUnitFacing(NCX,a)
  if LoadInteger(HY,GetHandleId(SGE),4422)==1 then
    set b=false
    call SaveBoolean(HY,h,249,(b))
  endif
  if DistanceBetweenXY(tx,ty,nx,ny)<=NBX then
    if b then
      call Func2969(LoadUnitHandle(HY,h,0),p,SGE,QIE,LoadBoolean(HY,h,0))
    endif
    call KillUnit(NCX)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  set NCX=null
  return false
endfunction

function Func2971 takes unit SKE,unit SGE,integer QIE,boolean UII returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit NCX=CreateUnit(GetOwningPlayer(SKE),'h07Q',GetUnitX(SKE),GetUnitY(SKE), AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE)))
  call SaveBoolean(HY,h,249,IsBlocked(SGE)==false)
  if UII and IsBlocked(SGE)then
    call RemoveLinkenBuff(SGE)
  endif
  call SavePlayerHandle(HY,h,54,(GetOwningPlayer(SKE)))
  call SaveUnitHandle(HY,h,30,SGE)
  call SaveUnitHandle(HY,h,45,(NCX))
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveBoolean(HY,h,0,UII)
  call SaveInteger(HY,h,5,(QIE))
  call TriggerRegisterTimerEvent(t,0.035,true)
  call TriggerAddCondition(t,Condition(function Func2970))
  set t=null
  set SKE=null
  set SGE=null
  set NCX=null
endfunction

function Func2972 takes nothing returns nothing
  call Func2971(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A190'),false)
endfunction

function Func2973 takes nothing returns nothing
  call LotusOrbFX(LoadUnitHandle(TempHash,'A3E9',0))
  call Func2971(LoadUnitHandle(TempHash,'A3E9',0),LoadUnitHandle(TempHash,'A3E9',1),LoadInteger(TempHash,'A3E9',0),true)
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func2974 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetTriggerUnit(),"weapon"))
endfunction

function Func2975 takes nothing returns boolean
  return IsUnitSpiritBear(GetFilterUnit())and IsUnitIllusion(GetFilterUnit())==false and IsDead(GetFilterUnit())==false
endfunction

function Func2976 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit u
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local group g=GetAvailableGroup()
  local integer BHX='A3ND'-1+QIE
  local real D1E=14+4*QIE
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(SKE),Condition(function Func2975))
  set u=FirstOfGroup(g)
  call KillGroup(g)
  call UnitRemoveAbility(SKE,'A3ND')
  call UnitRemoveAbility(SKE,'A3NE')
  call UnitRemoveAbility(SKE,'A3NF')
  call UnitRemoveAbility(SKE,'A3NG')
  call UnitRemoveAbility(u,'A3ND')
  call UnitRemoveAbility(u,'A3NE')
  call UnitRemoveAbility(u,'A3NF')
  call UnitRemoveAbility(u,'A3NG')
  call UnitRemoveAbility(u,'B016')
  call UnitRemoveAbility(SKE,'B016')
  call UnitAddAbilityTimedExF(SKE,BHX,1,D1E,'B016')
  call UnitAddAbilityTimedExF(u,BHX,1,D1E,'B016')
  set SKE=null
  set u=null
endfunction

function Func2977 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit Y7I=(LoadUnitHandle(HY,h,2))
  local real r
  local unit E9O=udg_Hero[GetPlayerId(GetOwningPlayer(Y7I))]
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set Y7I=null
    set E9O=null
    return false
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and IsPlayerBelongToTeams(GetOwningPlayer(GetEventDamageSource()))then
      call SaveReal(HY,h,714,(((TimerGetElapsed(GlobalTimer)))*1.0))
    endif
    call Func1313()
  endif
  set r=(LoadReal(HY,h,714))
  if r+3<(TimerGetElapsed(GlobalTimer))then
    if(LoadInteger(HY,h,34))==2 then
      call SaveInteger(HY,h,34,1)
      call SaveInteger(HY,(GetHandleId(Y7I)),4327,2)
      call SetPlayerAbilityAvailable(GetOwningPlayer(Y7I),'A0A7',true)
    endif
  else
    if(LoadInteger(HY,h,34))==1 then
      call SaveInteger(HY,h,34,2)
      call SaveInteger(HY,(GetHandleId(Y7I)),4327,1)
      call SetPlayerAbilityAvailable(GetOwningPlayer(Y7I),'A0A7',false)
    endif
  endif
  if DistanceBetweenUnits(E9O,Y7I)>=1100 and Func0898(E9O)==false then
    if GetUnitAbilityLevel(Y7I,'A32W')==0 then
      call UnitAddAbility2(Y7I,'A32W')
      call UnitAddAbility2(Y7I,'A32X')
    endif
  else
    if GetUnitAbilityLevel(Y7I,'A32W')!=0 then
      call UnitRemoveAbility(Y7I,'A32W')
      call UnitRemoveAbility(Y7I,'A32X')
    endif
  endif
  set t=null
  set Y7I=null
  set E9O=null
  return false
endfunction

function Func2978 takes unit source returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.2,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
  call TriggerAddCondition(RBX,Condition(function Func2977))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveReal(HY,(ZAE),714,(0*1.0))
  call SaveInteger(HY,(ZAE),34,1)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A0A7',true)
  set RBX=null
endfunction

function Func2979 takes unit u returns nothing
  local player p=GetOwningPlayer(u)
  local integer i=1
  if IsSentinel(p)then
    loop
      if GetPlayerAlliance(p,Sentinels[i],ALLIANCE_SHARED_CONTROL)then
        if LocalPlayer==Sentinels[i]then
          call SelectUnit(u,false)
        endif
      endif
      set i=i+1
      exitwhen i>5
    endloop
  else
    loop
      if GetPlayerAlliance(p,Scourges[i],ALLIANCE_SHARED_CONTROL)then
        if LocalPlayer==Scourges[i]then
          call SelectUnit(u,false)
        endif
      endif
      set i=i+1
      exitwhen i>5
    endloop
  endif
endfunction

function Func2980 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer id=LoadInteger(HY,h,0)
  if GetUnitAbilityLevel(u,id)==2 then
    call Func2979(u)
    call SaveBoolean(HY,h,0,true)
  elseif GetUnitAbilityLevel(u,id)==0 then
    if LoadBoolean(HY,h,0)then
      if IsUnitOwnedByPlayer(u,LocalPlayer)then
        call SelectUnit(u,true)
      endif
    endif
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  endif
  set u=null
  set t=null
endfunction

function Func2981 takes unit u,integer ZXI returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.01,true,function Func2980)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  call SaveInteger(HY,GetHandleId(t),0,ZXI)
  set t=null
endfunction

function Func2982 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real r=LoadReal(HY,h,0)
  local boolean FEX=false
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    set FEX=true
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set r=r-0.05
    if r<=0 or GetUnitAbilityLevel(u,'A3QC')==0 then
      set FEX=true
    elseif GetUnitCurrentOrder(u)!=851986 and IsUnitType(u,UNIT_TYPE_STUNNED)==false and IsUnitHidden(u)==false then
      call Func0809(u,"move",1,null,LoadReal(HY,h,1),LoadReal(HY,h,2),t)
    endif
    call SaveReal(HY,h,0,r)
  else
    if IsTriggeredOrder(u)==false then
      call SetUnitAbilityLevel(u,'A3QC',2)
      call Func0809(u,"move",1,null,LoadReal(HY,h,1),LoadReal(HY,h,2),t)
    endif
  endif
  if FEX then
    call UnitRemoveAbility(u,'A3QC')
    call UnitRemoveAbility(u,'a3QC')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set u=null
  set t=null
endfunction

function Func2983 takes unit u,real D1E returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x
  local real y
  if IsSentinel(GetOwningPlayer(u))then
    set x=GetUnitX(SentFountain)
    set y=GetUnitY(SentFountain)
  else
    set x=GetUnitX(ScourgeFountain)
    set y=GetUnitY(ScourgeFountain)
  endif
  call UnitAddAbility2(u,'A3QC')
  call TriggerRegisterTimerEvent(t,0.,false)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  call TriggerAddCondition(t,Condition(function Func2982))
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,D1E+0.05)
  call SaveReal(HY,h,1,x)
  call SaveReal(HY,h,2,y)
  call Func2981(u,'A3QC')
  set t=null
endfunction

function Func2984 takes unit SKE,boolean ZAI returns nothing
  local unit ZNI=null
  local integer a
  local real cd
  if IsUnitSpiritBear(SKE)then
    set ZNI=udg_Hero[GetPlayerId(GetOwningPlayer(SKE))]
  else
    set ZNI=LoadUnitHandle(HY,GetHandleId(GetOwningPlayer(SKE)),333)
  endif
  if ZNI==null then
    return
  endif
  if GetUnitAbilityLevel(ZNI,'A3QB')>0 then
    if ZAI then
      set a=GetUnitAbility(ZNI,'A3QB')
      if a>0 then
        call Func0325(a,GetAbilityCD('A3QB',GetUnitAbilityLevel(ZNI,'A3QB')))
      endif
    else
      set a=GetUnitAbility(SKE,'A3QB')
      if a>0 and IsAbilityOnCooldown(a)then
        set cd=GetAbilityCurrentCooldownConverted(a/4)
        if cd>0 then
          call Func0325(GetUnitAbility(ZNI,'A3QB'),cd)
        endif
      endif
    endif
    set a=GetUnitAbility(ZNI,'A3QB')
    if a>0 then
      if Memory[a/4+0xC8/4]!=0 then
        call Func0655(ZNI,851972)
      endif
    endif
  endif
  set ZNI=null
endfunction

function Func2985 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local group g
  local unit u2
  local integer QIE=GetUnitAbilityLevel(u,GetSpellAbilityId())
  local real D1E=0.8+0.4*QIE
  local real AllowedTime=LoadReal(HY,GetHandleId(udg_Hero[GetPlayerId(GetTriggerPlayer())]),'A3QB')
  call Func2984(u,true)
  set tt_unit1=u
  set g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),350,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",u,"origin"))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if IsUnitOwnedByPlayer(u2,Sentinels[0])==false and IsUnitOwnedByPlayer(u2,Scourges[0])==false and IsUnitOwnedByPlayer(u2,Neutrals)==false then
      if IsCourier(u2)==false and IsUnitInvulnerable(u2)==false and GetUnitAbilityLevel(u2,'A04R')==0 then
        if IsItPriorAttackforce(u2,'A3QB')then
          call Func1032(u,u2)
          call Func2983(u2,D1E)
        endif
      endif
    endif
  endloop
  call KillGroup(g)
  set u=null
endfunction

function Func2986 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,0)
  local unit Y7I=LoadUnitHandle(HY,h,1)
  local integer c=LoadInteger(HY,h,0)+1
  call SaveInteger(HY,h,0,c)
  if GetHandleId(Y7I)!=0 and(GetUnitAbilityLevel(SGE,'B0C1')>0 or c==1)then
    call DamageTarget(Func0440(Y7I,SGE),SGE,2,30)
  endif
  if IsDead(SGE)or(GetUnitAbilityLevel(SGE,'B0C1')==0 and c>1)then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  elseif c==1 then
    call TimerStart(t,0.5,true,function Func2986)
  endif
  set SGE=null
  set Y7I=null
  set t=null
endfunction

function Func2987 takes unit T9X,unit SGE returns nothing
  local integer h=DelayedCallBack(0,function Func2986)
  if Func2344(SGE)then
    call Func0847(SGE,3.02,'A3PH','B0C1',0)
  else
    call Func0847(SGE,9.02,'A3PH','B0C1',0)
  endif
  call StunTargetEx(SGE,0.1,true)
  call Func1330(T9X,SGE,'A3PH')
  call SaveUnitHandle(HY,h,0,SGE)
  call SaveUnitHandle(HY,h,1,T9X)
endfunction

function Func2988 takes unit WXE,unit SGE returns nothing
  if GetUnitAbilityLevel(WXE,'A09Y')>0 and SGE!=Roshan and GetUnitAbilityLevel(WXE,'A36D')==0 and TimerGetElapsed(GlobalTimer)>LoadReal(MHT,GetHandleId(WXE),'A09Y')and PRD_Get(WXE,'A09Y',20)then
    call SaveReal(MHT,GetHandleId(WXE),'A09Y',TimerGetElapsed(GlobalTimer)+5)
    call Func2987(WXE,SGE)
  endif
endfunction

function Func2989 takes nothing returns boolean
  return IsUnitSpiritBear(GetFilterUnit())and IsDead(GetFilterUnit())==false and IsUnitIllusion(GetFilterUnit())==false
endfunction

function Func2990 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
  local unit source=(LoadUnitHandle(HY,(ZAE),334))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),333))
  if source!=null and Mode_DM==false then
    if Func1146(source,RCX,false,0)then
      call Func1146(source,RCX,false,0)
    endif
    call Func1142(source,RCX)
    call UnitAddItem(RCX,UnitRemoveItemFromSlot(source,0))
    call UnitAddItem(RCX,UnitRemoveItemFromSlot(source,1))
    call UnitAddItem(RCX,UnitRemoveItemFromSlot(source,2))
    call UnitAddItem(RCX,UnitRemoveItemFromSlot(source,3))
    call UnitAddItem(RCX,UnitRemoveItemFromSlot(source,4))
    call UnitAddItem(RCX,UnitRemoveItemFromSlot(source,5))
    if GetUnitAbilityLevel(source,'A398')>0 then
      call UnitAddAbility2(RCX,'A398')
      call UnitAddAbility2(RCX,'A3OC')
    endif
  endif
  set source=null
  set RCX=null
endfunction

function Func2991 takes unit from,unit to returns nothing
  if Func1146(from,to,false,0)then
    call Func1146(from,to,false,0)
  endif
  call Func1142(from,to)
  call UnitAddItem(to,UnitRemoveItemFromSlot(from,0))
  call UnitAddItem(to,UnitRemoveItemFromSlot(from,1))
  call UnitAddItem(to,UnitRemoveItemFromSlot(from,2))
  call UnitAddItem(to,UnitRemoveItemFromSlot(from,3))
  call UnitAddItem(to,UnitRemoveItemFromSlot(from,4))
  call UnitAddItem(to,UnitRemoveItemFromSlot(from,5))
  if GetUnitAbilityLevel(from,'A398')>0 then
    call UnitAddAbility2(to,'A398')
    call UnitAddAbility2(to,'A3OC')
  endif
endfunction

function Func2992 takes nothing returns nothing
  call UnitAddItem(LoadUnitHandle(HY,GetHandleId(tt_player1),334),GetEnumItem())
endfunction

function Func2993 takes nothing returns boolean
  return GetItemTypeId(GetFilterItem())==Item_Dummy[integer198]or GetItemTypeId(GetFilterItem())==Item_Dummy[integer199]
endfunction

function Func2994 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  local rect r=Rect(x-100,y-100,x+100,y+100)
  set tt_player1=LoadPlayerHandle(HY,h,0)
  call EnumItemsInRect(r,Condition(function Func2993),function Func2992)
  call DelayedCallBackClean()
  call RemoveRect(r)
  set r=null
endfunction

function Func2995 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local unit u=GetTriggerUnit()
  local item it
  local integer ZPI
  if IsUnitType(u,UNIT_TYPE_HERO)then
    if Func0898(u)==false then
      call CleanTrigger(t)
      call KillUnit(LoadUnitHandle(HY,GetHandleId(GetOwningPlayer(u)),333))
    endif
  else
    if FindItemOfType(u,Item_Real[MixedWardsOrbs])!=null or FindItemOfType(u,Item_Real[MixedWardsSentry])!=null then
      set ZPI=DelayedCallBack(0.01,function Func2994)
      call SaveReal(HY,ZPI,0,GetUnitX(u))
      call SaveReal(HY,ZPI,1,GetUnitY(u))
      call SavePlayerHandle(HY,ZPI,0,GetOwningPlayer(u))
    endif
    set ZPI=GetHandleId(GetOwningPlayer(u))
    if Func1146(u,LoadUnitHandle(HY,ZPI,334),false,0)then
      call Func1146(u,LoadUnitHandle(HY,ZPI,334),false,0)
    endif
    call Func1142(u,LoadUnitHandle(HY,ZPI,334))
    call CleanTrigger(t)
  endif
  set it=null
  set u=null
  set t=null
endfunction

function Func2996 takes unit u,unit Y7I returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call TriggerRegisterDeathEvent(t,Y7I)
  call TriggerAddCondition(t,Condition(function Func2995))
  set t=null
endfunction

function Func2997 takes unit SKE,unit Y7I returns nothing
  local integer QIE=GetUnitAbilityLevel(SKE,'A3QB')
  if GetUnitAbilityLevel(Y7I,'A3QB')!=QIE then
    if QIE==0 then
      call UnitRemoveAbility(Y7I,'A3QB')
    else
      call UnitAddAbility3(Y7I,'A3QB',QIE)
    endif
  endif
endfunction

function Func2998 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local player p=GetOwningPlayer(SKE)
  local location XOX=GetUnitLoc(SKE)
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0A5')
  local integer hp=GetHandleId(p)
  local unit u2
  local real M3I
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(SKE),Condition(function Func2989))
  if(CountUnitsInGroup(g)==1)then
    set u2=FirstOfGroup(g)
    set M3I=GetUnitLifePercent(u2)
    set XOX=GetUnitLoc(u2)
    call ShowUnit(u2,false)
    if(QIE==2)then
      set bj_lastCreatedUnit=CreateUnit(GetTriggerPlayer(),'n018',GetUnitX(u2),GetUnitY(u2),90)
    elseif(QIE==3)then
      set bj_lastCreatedUnit=CreateUnit(GetTriggerPlayer(),'n01C',GetUnitX(u2),GetUnitY(u2),90)
    elseif(QIE==4)then
      set bj_lastCreatedUnit=CreateUnit(GetTriggerPlayer(),'n01G',GetUnitX(u2),GetUnitY(u2),90)
    endif
    if QIE>1 then
      call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",bj_lastCreatedUnit,"chest")
      call Func2978(bj_lastCreatedUnit)
    endif
    call Func2996(SKE,bj_lastCreatedUnit)
    call Func2991(u2,bj_lastCreatedUnit)
    call KillUnit(u2)
    call SetUnitLifePercentBJ(bj_lastCreatedUnit,M3I)
    call SaveUnitHandle(HY,(hp),333,(bj_lastCreatedUnit))
    call Func2990()
    call Func2997(SKE,bj_lastCreatedUnit)
    call Func2984(SKE,false)
  endif
  set XOX=null
  set u2=null
  call KillGroup(g)
  set SKE=null
endfunction

function Func2999 takes nothing returns nothing
  call SetUnitAbilityLevel(GetTriggerUnit(),'A1EC',GetUnitAbilityLevel(GetTriggerUnit(),'A0AG'))
endfunction

function Func3000 takes nothing returns boolean
  return IsUnitSpiritBear(GetFilterUnit())and IsDead(GetFilterUnit())==false and IsUnitIllusion(GetFilterUnit())==false
endfunction

function Func3001 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local player p=GetOwningPlayer(SKE)
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0A5')
  local integer hp=GetHandleId(p)
  local boolean b
  local unit u
  local integer id=0
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(SKE),Condition(function Func3000))
  set b=CountUnitsInGroup(g)==0
  if b then
    if(QIE==1)then
      set id='n004'
    elseif(QIE==2)then
      set id='n018'
    elseif(QIE==3)then
      set id='n01C'
    elseif(QIE==4)then
      set id='n01G'
    endif
    set bj_lastCreatedUnit=CreateUnit(GetTriggerPlayer(),id,GetUnitX(SKE),GetUnitY(SKE),90)
    call Func2997(SKE,bj_lastCreatedUnit)
    call SaveUnitHandle(HY,(hp),333,(bj_lastCreatedUnit))
    call Func2984(SKE,false)
    call Func2990()
    call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",bj_lastCreatedUnit,"chest")
    call Func2978(bj_lastCreatedUnit)
    call SetUnitAbilityLevel(bj_lastCreatedUnit,'A09Y',QIE)
    call SelectSummons(bj_lastCreatedUnit)
    call Func2996(SKE,bj_lastCreatedUnit)
  else
    set u=FirstOfGroup(g)
    call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",u,"chest")
    call SetWidgetLife(u,99999)
    call SetUnitPosition(u,GetUnitX(SKE),GetUnitY(SKE))
    set u=null
  endif
  call KillGroup(g)
  set SKE=null
  set p=null
  set g=null
endfunction

function Func3002 takes nothing returns nothing
  local unit u=LoadUnitHandle(HY,GetHandleId(GetTriggerPlayer()),333)
  if IsDead(u)==false then
    call Func2997(GetTriggerUnit(),u)
  endif
  set u=null
endfunction

function Func3003 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local player whichPlayer=GetOwningPlayer(source)
  local group g=GetAvailableGroup()
  local integer ZAE=GetUnitAbilityLevel(source,'A0A5')
  local integer QIE=GetHandleId(whichPlayer)
  local boolean ZSE
  local unit RCX
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(source),Condition(function Func3000))
  if FirstOfGroup(g)!=null then
    set RCX=FirstOfGroup(g)
    if LoadInteger(HY,(GetHandleId(RCX)),4327)==1 then
      call InterruptUnitError(source,'n0MN')
    endif
  endif
  call KillGroup(g)
  set source=null
  set RCX=null
endfunction

function Func3004 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call IssueImmediateOrderByIdExFunc(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func3005 takes unit u,integer RTX,real UME returns nothing
  local timer t=CreateTimer()
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  call SaveInteger(HY,GetHandleId(t),0,RTX)
  call TimerStart(t,UME,false,function Func3004)
  set t=null
endfunction

function Func3006 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit E9O=udg_Hero[GetPlayerId(GetOwningPlayer(u))]
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",GetUnitX(u),GetUnitY(u)))
  call Func0770(u,true,GetUnitX(E9O)+GetRandomReal(25,50)*Cos(GetRandomReal(0,360)),GetUnitY(E9O)+GetRandomReal(25,50)*Sin(GetRandomReal(0,360)))
  call Func3005(u,851972,0)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",GetUnitX(u),GetUnitY(u)))
  set u=null
  set E9O=null
endfunction

function Func3007 takes nothing returns boolean
  return IsUnitSpiritBear(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction

function Func3008 takes nothing returns nothing
  local location IGX
  if IsSentinel(GetOwningPlayer(GetTriggerUnit()))then
    set IGX=GetRectCenter(gg_rct_Hero_Creation_NE)
  else
    set IGX=GetRectCenter(gg_rct_Hero_Creation_UD)
  endif
  if Func0902(GetEnumItem())==false then
    call SetItemPositionLoc(GetEnumItem(),IGX)
  endif
  call RemoveLocation(IGX)
  set IGX=null
endfunction

function Func3009 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
  local unit source=(LoadUnitHandle(HY,(ZAE),334))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),333))
  local integer QIE
  local integer ZBE
  if source==null then
    if IsSentinel(GetOwningPlayer(RCX))then
      set QIE=-6390
      set ZBE=-5615
    else
      set QIE=5875
      set ZBE=5000
    endif
    set source=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e01F',QIE,ZBE,0)
    call SaveUnitHandle(HY,(ZAE),334,(source))
  endif
  if Func0902(GetEnumItem())==false then
    call UnitAddItem(source,GetEnumItem())
  endif
  if GetUnitAbilityLevel(RCX,'A398')>0 then
    call UnitAddAbility2(source,'A398')
    call UnitAddAbility2(source,'A3OC')
  endif
  call ShowUnit(source,false)
  set source=null
  set RCX=null
endfunction

function Func3010 takes nothing returns nothing
  local integer ZAE=GetIndex(GetEnumItem())
  if GetWidgetLife(GetEnumItem())>0 and ZAE!=Aegis then
    if Mode_DM then
      call Func3008()
    else
      call Func3009()
    endif
  else
  endif
endfunction

function Func3011 takes nothing returns nothing
  local location l=GetUnitLoc(GetTriggerUnit())
  local rect r=RectFromCenterSizeBJ(l,400.00,400.00)
  local unit u=udg_Hero[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
  call DamageTarget(GetKillingUnit(),u,3,GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.1)
  call EnumItemsInRectBJ(r,function Func3010)
  call RemoveLocation(l)
  call RemoveRect(r)
  set l=null
  set u=null
endfunction

function Func3012 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func3007))
  call TriggerAddAction(t,function Func3011)
  call AddToPurgeList('A3ND','PRGA')
  call AddToPurgeList('A3NE','PRGA')
  call AddToPurgeList('A3NF','PRGA')
  call AddToPurgeList('A3NG','PRGA')
  call AddToPurgeList('B016','PRGA')
  call AddToPurgeList('B019','PRGA')
  call AddToPurgeList('A3QC','PRGE')
  call AddToPurgeList('a3QC','PRGE')
  call HideAbility('A3LD')
  call HideAbility('A3LE')
  call HideAbility('A3LF')
  call AddWrapper("Func4626",3)
  call AddWrapper("Func4662",0)
  set t=null
endfunction

function Func3013 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if IsPlayerBelongToTeams(GetOwningPlayer(GetEventDamageSource()))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))and boolean175==false then
      if boolean176==false then
        call UnitRemoveAbility(GetTriggerUnit(),'B0BM')
        call CleanTrigger(GetTriggeringTrigger())
      endif
    endif
    if boolean176 then
      set boolean176=false
    endif
    if boolean175 then
      set boolean175=false
    endif
  else
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func3014 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local trigger RBX=CreateTrigger()
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(RBX,6,false)
  call TriggerAddCondition(RBX,Condition(function Func3013))
  set source=null
  set RBX=null
endfunction

function Func3015 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'B0BM')>0 and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0
endfunction

function Func3016 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,result,ZEE,1000,Condition(function Func3015))
  call ForGroup(g,function Func3014)
  call KillGroup(g)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set g=null
  return false
endfunction

function Func3017 takes nothing returns nothing
  if integer491==1 or integer491==2 then
    call DamageTarget(GetTriggerUnit(),GetEnumUnit(),2,40+30*integer492)
  endif
  if integer491==1 or integer491==3 then
    call DamageTarget(GetTriggerUnit(),GetEnumUnit(),1,40+30*integer492)
  endif
endfunction

function Func3018 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h07Z',result,ZEE,0)
  local group g=GetAvailableGroup()
  local unit M_X
  set integer492=GetUnitAbilityLevel(source,'A1AA')
  if(LoadInteger(HY,GetHandleId(source),4270)!=1)then
    call SetUnitTimeScale(RCX,2.5*1.125)
    call UnitApplyTimedLife(RCX,'BTLF',2)
    set RCX=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
    call UnitAddAbility2(RCX,'A1A9')
    call SetUnitAbilityLevel(RCX,'A1A9',GetUnitAbilityLevel(source,'A1AA'))
    call IssueImmediateOrderByIdExFunc(RCX,852127)
    call GroupEnumUnitsInRange(g,result,ZEE,525,Condition(function Func0811))
    set integer491=1
    call ForGroup(g,function Func3017)
    call KillGroup(g)
    call TriggerRegisterTimerEvent(RBX,0.80,false)
    call TriggerAddCondition(RBX,Condition(function Func3016))
    call SaveReal(HY,(ZAE),6,((result)*1.0))
    call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
  else
    call SetUnitTimeScale(RCX,2.5*1.125)
    call UnitApplyTimedLife(RCX,'BTLF',2)
    set RCX=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
    call UnitAddAbility2(RCX,'A1A9')
    call SetUnitAbilityLevel(RCX,'A1A9',GetUnitAbilityLevel(source,'A1AA'))
    call IssueImmediateOrderByIdExFunc(RCX,852127)
    call GroupEnumUnitsInRange(g,result,ZEE,525,Condition(function Func0811))
    set integer491=2
    call ForGroup(g,function Func3017)
    call TriggerRegisterTimerEvent(RBX,0.80,false)
    call TriggerAddCondition(RBX,Condition(function Func3016))
    call SaveReal(HY,(ZAE),6,((result)*1.0))
    call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    set M_X=(units020[GetPlayerId(GetOwningPlayer(source))])
    call IssueImmediateOrderByIdExFunc(M_X,851972)
    set result=GetUnitX(M_X)
    set ZEE=GetUnitY(M_X)
    set RCX=CreateUnit(GetOwningPlayer(source),'h07Z',result,ZEE,0)
    call SetUnitTimeScale(RCX,2.5*1.125)
    call UnitApplyTimedLife(RCX,'BTLF',2)
    set RCX=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
    call UnitAddAbility2(RCX,'A1A9')
    call SetUnitAbilityLevel(RCX,'A1A9',GetUnitAbilityLevel(source,'A1AA'))
    call IssueImmediateOrderByIdExFunc(RCX,852127)
    call GroupEnumUnitsInRange(g,result,ZEE,525,Condition(function Func0811))
    set integer491=3
    call ForGroup(g,function Func3017)
    call KillGroup(g)
    call TriggerRegisterTimerEvent(RBX,0.80,false)
    call TriggerAddCondition(RBX,Condition(function Func3016))
    call SaveReal(HY,(ZAE),6,((result)*1.0))
    call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
    call SetUnitAnimationByIndex(M_X,3)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
  set g=null
endfunction

function Func3019 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),335))
  local boolean ZSE=(LoadBoolean(HY,(ZAE),336))
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
    call SaveInteger(HY,(GetHandleId(source)),4269,2)
    call SaveBoolean(HY,(GetHandleId(RCX)),337,(true))
    if ZSE then
      call ShowUnit(RCX,false)
      call KillUnit(RCX)
    else
      call ShowUnit(RCX,false)
      call UnitRemoveAbility(RCX,'Aloc')
      call ShowUnit(RCX,true)
    endif
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    if ZSE then
      call SetUnitFacing(RCX,GetUnitFacing(source))
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3020 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local unit RCX
  local boolean ZSE
  call SaveBoolean(HY,(ZAE),336,(false))
  if(LoadInteger(HY,GetHandleId(source),4270)!=1)then
    call SaveBoolean(HY,(ZAE),336,(true))
    set RCX=CreateUnit(GetOwningPlayer(source),'h07U',GetUnitX(source),GetUnitY(source),GetUnitFacing(source))
    call UnitAddAbility2(RCX,'Aloc')
    call UnitAddAbility2(RCX,'Aetl')
    call SetUnitPosition(RCX,GetUnitX(source),GetUnitY(source))
    call SetUnitScale(RCX,1.4,1.4,1.4)
  else
    set RCX=(units020[GetPlayerId(GetOwningPlayer(source))])
    call UnitAddAbility(RCX,'Aloc')
  endif
  call IssueImmediateOrderByIdExFunc(RCX,851972)
  call SaveInteger(HY,(GetHandleId(source)),4269,1)
  call SetUnitAnimation(RCX,"spell slam")
  call QueueUnitAnimation(RCX,"spell slam")
  call SaveUnitHandle(HY,(ZAE),335,(RCX))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call TriggerRegisterTimerEvent(RBX,0.1,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(RBX,Condition(function Func3019))
  call SaveUnitHandle(HY,(ZAE),335,(RCX))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func3021 takes nothing returns nothing
  call Func3020()
endfunction

function Func3022 takes nothing returns boolean
  local integer ZAE
  if GetSpellAbilityId()=='A1AA' then
    call Func3018()
  endif
  return false
endfunction

function Func3023 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
  call TriggerAddCondition(t,Condition(function Func3022))
  set t=null
  call AddToPurgeList('A30U','PRGE')
  call AddToPurgeList('A344','PRGE')
  call AddToPurgeList('B0BR','PRGE')
  call AddToPurgeList('A3GU','PRGA')
  call AddToPurgeList('B0BX','PRGA')
endfunction

function Func3024 takes nothing returns nothing
  if GetUnitAbilityLevel(GetEnumUnit(),'A1CA')>0 then
    call UnitRemoveAbility(GetEnumUnit(),'A1CA')
    call UnitRemoveAbility(GetEnumUnit(),'B0BP')
  endif
  if GetUnitAbilityLevel(GetEnumUnit(),'A1C9')>0 then
    call UnitRemoveAbility(GetEnumUnit(),'A1C9')
    call UnitRemoveAbility(GetEnumUnit(),'B0BP')
  endif
  if GetUnitAbilityLevel(GetEnumUnit(),'A1CB')>0 then
    call UnitRemoveAbility(GetEnumUnit(),'A1CB')
    call UnitRemoveAbility(GetEnumUnit(),'B0BP')
  endif
  if GetUnitAbilityLevel(GetEnumUnit(),'A1CC')>0 then
    call UnitRemoveAbility(GetEnumUnit(),'A1CC')
    call UnitRemoveAbility(GetEnumUnit(),'B0BP')
  endif
  call SetNegativeArmorSystem(GetEnumUnit(),0)
endfunction

function Func3025 takes nothing returns nothing
  if integer493==1 then
    if GetUnitAbilityLevel(GetEnumUnit(),'A1CA')==0 then
      call UnitAddAbility2(GetEnumUnit(),'A1CA')
    endif
  elseif integer493==2 then
    if GetUnitAbilityLevel(GetEnumUnit(),'A1C9')==0 then
      call UnitAddAbility2(GetEnumUnit(),'A1C9')
    endif
  elseif integer493==3 then
    if GetUnitAbilityLevel(GetEnumUnit(),'A1CB')==0 then
      call UnitAddAbility2(GetEnumUnit(),'A1CB')
    endif
  elseif integer493==4 then
    if GetUnitAbilityLevel(GetEnumUnit(),'A1CC')==0 then
      call UnitAddAbility2(GetEnumUnit(),'A1CC')
    endif
  endif
  if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
    call SetNegativeArmorSystem(GetEnumUnit(),R2I((I2R(GetHeroAgi(GetEnumUnit(),true))/7)*I2R(integer493)/4))
  endif
endfunction

function Func3026 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local group g=(LoadGroupHandle(HY,h,340))
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local group gg=GetAvailableGroup()
  local group VAA
  if u==null or GetUnitTypeId(u)!='O015' then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillGroup(g)
    call KillGroup(gg)
    return false
  endif
  set tt_unit1=u
  set integer493=GetUnitAbilityLevel(u,'A1CD')
  call GroupEnumUnitsInRange(gg,x,y,300,Condition(function DefaultEnemyFilter))
  if(LoadInteger(HY,GetHandleId(u),4270)==1)then
    set VAA=GetAvailableGroup()
    call GroupEnumUnitsInRange(VAA,GetUnitX(units020[GetPlayerId(GetOwningPlayer(u))]),GetUnitY(units020[GetPlayerId(GetOwningPlayer(u))]),300,Condition(function DefaultEnemyFilter))
    call GroupAddGroup(VAA,gg)
    call KillGroup(VAA)
    set VAA=null
  endif
  call GroupRemoveGroup(gg,g)
  call ForGroup(g,function Func3024)
  if IsDead(u)==false and GetUnitAbilityLevel(u,'A36D')==0 then
    call ForGroup(gg,function Func3025)
  endif
  call SaveGroupHandle(HY,h,340,(gg))
  call KillGroup(g)
  set t=null
  set u=null
  set g=null
  return false
endfunction

function Func3027 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local integer QIE
  local player whichPlayer
  call UnitAddAbility2(source,'A1CQ')
  call TriggerRegisterTimerEvent(RBX,0.3,true)
  call TriggerAddCondition(RBX,Condition(function Func3026))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveGroupHandle(HY,(ZAE),340,(GetAvailableGroup()))
  call SaveTriggerHandle(HY,(GetHandleId(source)),338,(RBX))
  call SaveBoolean(HY,(GetHandleId(source)),339,(true))
  set QIE=0
  loop
    exitwhen QIE>5
    set whichPlayer=Sentinels[QIE]
    call SetPlayerAbilityAvailable(whichPlayer,'A1CA',false)
    call SetPlayerAbilityAvailable(whichPlayer,'A1C9',false)
    call SetPlayerAbilityAvailable(whichPlayer,'A1CB',false)
    call SetPlayerAbilityAvailable(whichPlayer,'A1CC',false)
    set whichPlayer=Scourges[QIE]
    call SetPlayerAbilityAvailable(whichPlayer,'A1CA',false)
    call SetPlayerAbilityAvailable(whichPlayer,'A1C9',false)
    call SetPlayerAbilityAvailable(whichPlayer,'A1CB',false)
    call SetPlayerAbilityAvailable(whichPlayer,'A1CC',false)
    set QIE=QIE+1
  endloop
  set RBX=null
  set source=null
endfunction

function Func3028 takes nothing returns nothing
  local real result=real074
  local real ZEE=real075
  local real ZWE=real076
  local real ZYE=real077
  local real ICX=GetUnitX(GetEnumUnit())
  local real N1X=GetUnitY(GetEnumUnit())
  local real N2X=((ICX-result)*(ZWE-result)+(N1X-ZEE)*(ZYE-ZEE))/((result-ZWE)*(result-ZWE)+(ZEE-ZYE)*(ZEE-ZYE))
  local real N3X=result+N2X*(ZWE-result)
  local real N4X=ZEE+N2X*(ZYE-ZEE)
  local real N5X=GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*(0.2+0.1*GetUnitAbilityLevel(unit201,'A1CE'))/2
  if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
    call SetUnitPosition(GetEnumUnit(),N3X,N4X)
  else
    call SetUnitX(GetEnumUnit(),N3X)
    call SetUnitY(GetEnumUnit(),N4X)
  endif
  call Func0910(unit201,852075,GetEnumUnit())
  call DamageTarget(unit202,GetEnumUnit(),1,N5X)
  call DamageTarget(unit201,GetEnumUnit(),23,N5X)
  if GetUnitAbilityLevel(unit201,'A30S')>0 then
    call Func0737(GetEnumUnit(),'A30U',GetUnitAbilityLevel(unit201,'A1CE')+2)
    call Func0737(GetEnumUnit(),'A344',GetUnitAbilityLevel(unit201,'A1CE')+2)
  endif
endfunction

function Func3029 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),282))
  local real ZEE=(LoadReal(HY,(ZAE),283))
  local real ZWE=(LoadReal(HY,(ZAE),341))
  local integer QIE=0
  local real ZYE
  local real ICX
  local group g=GetAvailableGroup()
  local group IBI=GetAvailableGroup()
  local integer ZBE=GetUnitAbilityLevel(source,'A1A1')+GetUnitAbilityLevel(source,'A30S')
  local integer ZCE=(LoadInteger(HY,(ZAE),34))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set tt_unit1=source
  set unit202=source
  set unit201=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call UnitAddAbility2(unit201,'A1CE')
  call SetUnitAbilityLevel(unit201,'A1CE',ZBE)
  if GetUnitAbilityLevel(source,'A30S')>0 then
    call SetUnitAbilityLevel(unit201,'A1CE',ZBE+1)
    call UnitAddAbility(unit201,'A30S')
  endif
  loop
    exitwhen QIE>ZCE
    set ZYE=result+QIE*200*Cos(ZWE)
    set ICX=ZEE+QIE*200*Sin(ZWE)
    call Func0692("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",ZYE,ICX,1.6)
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",ZYE,ICX-250))
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",ZYE,ICX))
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",ZYE+250,ICX))
    call KillTrees(ZYE,ICX,300)
    call GroupEnumUnitsInRange(g,ZYE,ICX,325,Condition(function DefaultEnemyFilter))
    call GroupAddGroup(g,IBI)
    call GroupClear(g)
    set QIE=QIE+1
  endloop
  set real074=result
  set real075=ZEE
  set real076=ZYE
  set real077=ICX
  call ForGroup(IBI,function Func3028)
  call KillGroup(IBI)
  call KillGroup(g)
  set RBX=null
  set source=null
  return false
endfunction

function Func3030 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local real a=(LoadReal(HY,(h),137))
  local real sx=(LoadReal(HY,(h),282))
  local real sy=(LoadReal(HY,(h),283))
  local real a2
  local real ICX
  local real N1X
  local real N2X
  local real N3X
  local real N4X
  local real N5X
  local real N6X
  local real JTI
  local real VDA
  local real loc_real14
  local real loc_real15
  local real VFA
  local real x
  local real y
  local integer c=GetTriggerEvalCount(t)
  local integer VGA=(LoadInteger(HY,(h),34))
  local real VHA=Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))
  local real VJA=Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))
  local real VKA=Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))
  local real VLA=Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))
  set x=sx+200*c*Cos(a)
  set y=sy+200*c*Sin(a)
  call Func0683(Func0681(x,y,"THNE",255,255,255,255,false,false),true)
  set ICX=x+250*VKA
  set N1X=y+250*VLA
  set N2X=x+250*VHA
  set N3X=y+250*VJA
  set N4X=x-125*VKA
  set N5X=y-125*VLA
  set N6X=x-125*VHA
  set JTI=y-125*VJA
  call TimedReveal(GetOwningPlayer(SKE),4,x,y,500)
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",ICX,N1X))
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",N2X,N3X))
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",N4X,N5X))
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",N6X,JTI))
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))
  if c>VGA then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.5,false)
    call TriggerAddCondition(t,Condition(function Func3029))
    call SaveUnitHandle(HY,(h),2,(SKE))
    call SaveReal(HY,(h),282,sx)
    call SaveReal(HY,(h),283,sy)
    call SaveReal(HY,(h),341,a)
    call SaveInteger(HY,(h),34,VGA)
  endif
  set t=null
  set SKE=null
  return false
endfunction

function Func3031 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a=Atan2(ty-GetUnitY(SKE),tx-GetUnitX(SKE))
  local real ILX=DistanceBetweenXY(tx,ty,GetUnitX(SKE),GetUnitY(SKE))
  local integer c=11
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set c=12
  endif
  call TriggerRegisterTimerEvent(t,0.22,true)
  call TriggerAddCondition(t,Condition(function Func3030))
  call SaveUnitHandle(HY,(h),2,SKE)
  call SaveReal(HY,(h),137,a)
  call SaveReal(HY,(h),282,GetUnitX(SKE))
  call SaveReal(HY,(h),283,GetUnitY(SKE))
  call SaveInteger(HY,(h),34,c)
  set t=null
  set SKE=null
endfunction

function Func3032 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call UnitRemoveAbility(source,'A2NI')
  call UnitAddAbility(source,'A2NI')
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func3033 takes unit source returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0,false)
  call TriggerAddCondition(RBX,Condition(function Func3032))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set RBX=null
endfunction

function Func3034 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  call AddBonusDamage(source,0)
  set RBX=null
  set source=null
  return false
endfunction

function Func3035 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetUnitAbilityLevel(u,'A3GU')==0 or GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>=90 then
    call Stats_Fucking_Modify(u,-LoadInteger(HY,h,0),"+MS")
    call UnitRemoveAbility(u,'A3GU')
    call UnitRemoveAbility(u,'B0BX')
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  endif
  set t=null
  set u=null
endfunction

function Func3036 takes unit u,integer FXE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,u)
  call UnitAddAbility2(u,'A3GU')
  call Stats_Fucking_Modify(u,FXE,"+MS")
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,FXE)
  call TriggerAddCondition(t,Condition(function Func3035))
  set t=null
endfunction

function Func3037 takes unit source,unit RCX,unit M_X,integer ZAE,integer QIE returns nothing
  local trigger RBX
  local integer ZBE
  local unit M0X
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",RCX,"chest"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",source,"chest"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",source,"origin"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",source,"hand,left"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",source,"hand,right"))
  call ShowUnit(RCX,false)
  call KillUnit(RCX)
  call KillUnit(M_X)
  call SaveInteger(HY,(GetHandleId(source)),4270,2)
  if QIE>0 or ZAE>0 then
    set RBX=CreateTrigger()
    set ZBE=GetHandleId(RBX)
    call TriggerRegisterTimerEvent(RBX,9.1,false)
    call TriggerRegisterDeathEvent(RBX,source)
    call TriggerAddCondition(RBX,Condition(function Func3034))
    call SaveUnitHandle(HY,(ZBE),2,(source))
    call Func3036(source,QIE)
    call AddBonusDamage(source,ZAE)
  endif
  set RBX=null
  set M0X=null
endfunction

function Func3038 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group027)==false then
    if IsUnitIllusion(GetEnumUnit())==false then
      if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
        set integer495=integer495+(integer494*10)
        set integer496=integer496+5
      else
        set integer495=integer495+(integer494*3+3)
        set integer496=integer496+1
      endif
    endif
    call GroupAddUnit(group027,GetEnumUnit())
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",GetEnumUnit(),"chest"))
    set boolean175=true
    set boolean176=true
    call DamageTarget(unit203,GetEnumUnit(),1,real078)
    set boolean175=false
    set boolean176=false
  endif
endfunction

function Func3039 takes real result,real ZEE,real ZWE,real ZYE,real ICX,real N1X returns real
  local real N2X
  local real N3X
  local real N4X
  local real N5X
  local real N6X
  local real JTI
  local real VDA
  local real loc_real14
  local real loc_real15
  local real VFA
  local real VZA
  local real V_A
  local real V0A
  local real V1A
  local real V2A
  local real V3A
  local real V4A
  set V_A=ZWE-ICX
  set V0A=ZYE-N1X
  set V1A=-1*V0A
  set V2A=V_A
  set V3A=SquareRoot(V1A*V1A+V2A*V2A)
  set V1A=V1A/V3A
  set V2A=V2A/V3A
  set N2X=result-ZWE
  set N3X=ZEE-ZYE
  set N4X=SquareRoot(N2X*N2X+N3X*N3X)
  set N5X=N2X/N4X
  set N6X=N3X/N4X
  set V4A=N2X*V1A+N3X*V2A
  set JTI=-1*result+2*ZWE+2*V1A*V4A
  set VDA=-1*ZEE+2*ZYE+2*V2A*V4A
  set VFA=ICX+ZWE-JTI
  set VZA=N1X+ZYE-VDA
  return VFA
endfunction

function Func3040 takes real result,real ZEE,real ZWE,real ZYE,real ICX,real N1X returns real
  local real N2X
  local real N3X
  local real N4X
  local real N5X
  local real N6X
  local real JTI
  local real VDA
  local real loc_real14
  local real loc_real15
  local real VFA
  local real VZA
  local real V_A
  local real V0A
  local real V1A
  local real V2A
  local real V3A
  local real V4A
  set V_A=ZWE-ICX
  set V0A=ZYE-N1X
  set V1A=-1*V0A
  set V2A=V_A
  set V3A=SquareRoot(V1A*V1A+V2A*V2A)
  set V1A=V1A/V3A
  set V2A=V2A/V3A
  set N2X=result-ZWE
  set N3X=ZEE-ZYE
  set N4X=SquareRoot(N2X*N2X+N3X*N3X)
  set N5X=N2X/N4X
  set N6X=N3X/N4X
  set V4A=N2X*V1A+N3X*V2A
  set JTI=-1*result+2*ZWE+2*V1A*V4A
  set VDA=-1*ZEE+2*ZYE+2*V2A*V4A
  set VFA=ICX+ZWE-JTI
  set VZA=N1X+ZYE-VDA
  return VZA
endfunction

function Func3041 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),335))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),19))
  local real result=(LoadReal(HY,(ZAE),282))
  local real ZEE=(LoadReal(HY,(ZAE),283))
  local real ZWE=GetUnitX(source)
  local real ZYE=GetUnitY(source)
  local real ICX=GetUnitX(RCX)
  local real N1X=GetUnitY(RCX)
  local real N2X
  local real N3X
  local real N4X
  local group g=(LoadGroupHandle(HY,(ZAE),187))
  local group IBI
  local real N5X
  local integer QIE=GetUnitAbilityLevel(source,'A1A8')
  local real N6X=(LoadReal(HY,(ZAE),342))
  local real JTI=(TimerGetElapsed(GlobalTimer))
  local unit d
  call SetUnitX(M_X,GetUnitX(RCX))
  call SetUnitY(M_X,GetUnitY(RCX))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call ShowUnit(RCX,false)
    call KillUnit(RCX)
    call KillUnit(M_X)
    call SaveInteger(HY,(GetHandleId(source)),4270,2)
    if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A1A8' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1A8',true)
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2NI',false)
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A2NI' then
      call IssueImmediateOrderByIdExFunc(RCX,851972)
      call SaveBoolean(HY,(ZAE),249,(true))
      call SetUnitAnimationByIndex(RCX,3)
      call Func3033(GetTriggerUnit())
    elseif GetSpellAbilityId()=='A2LK' then
      if IssueImmediateOrderByIdExFunc(source,852581)then
        call UnitRemoveAbility(RCX,'A2LK')
      endif
    endif
  elseif DistanceBetweenXY(ZWE,ZYE,ICX,N1X)<100 then
    call Func3037(source,RCX,M_X,(LoadInteger(HY,(ZAE),344)),(LoadInteger(HY,(ZAE),345)))
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A1A8' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1A8',true)
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2NI',false)
  elseif GetTriggerEvalCount(RBX)>400 or(LoadBoolean(HY,(ZAE),249))then
    call UnitAddAbility2(RCX,'Aloc')
    if GetTriggerEvalCount(RBX)==401 and(LoadBoolean(HY,(ZAE),249))==false then
      call IssueImmediateOrderByIdExFunc(RCX,851972)
      call SetUnitAnimationByIndex(RCX,3)
    endif
    set IBI=GetAvailableGroup()
    set integer494=QIE
    set integer495=(LoadInteger(HY,(ZAE),344))
    set integer496=(LoadInteger(HY,(ZAE),345))
    set real078=30+30*QIE
    set unit203=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),0)
    set tt_unit1=source
    set group027=g
    call GroupEnumUnitsInRange(IBI,GetUnitX(RCX),GetUnitY(RCX),300,Condition(function Func0816))
    call ForGroup(IBI,function Func3038)
    call KillGroup(IBI)
    set IBI=null
    call SaveInteger(HY,(ZAE),344,(integer495))
    call SaveInteger(HY,(ZAE),345,(integer496))
    if(LoadInteger(HY,GetHandleId(source),4269)!=1)then
      set N4X=Atan2(ZYE-N1X,ZWE-ICX)
      call SetUnitFacing(RCX,N4X*bj_RADTODEG)
      set N2X=GetUnitX(RCX)+12*Cos(N4X)
      set N3X=GetUnitY(RCX)+12*Sin(N4X)
      call SetUnitX(RCX,SafeX50(N2X))
      call SetUnitY(RCX,SafeY50(N3X))
      call SaveReal(HY,(ZAE),282,((ZWE)*1.0))
      call SaveReal(HY,(ZAE),283,((ZYE)*1.0))
    endif
  else
    call SetUnitMoveSpeed(RCX,GetUnitMoveSpeed(source))
    call UnitRemoveAbility(RCX,'Aloc')
    set IBI=GetAvailableGroup()
    set integer494=QIE
    set integer495=(LoadInteger(HY,(ZAE),344))
    set integer496=(LoadInteger(HY,(ZAE),345))
    set real078=20+40*QIE
    set unit203=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),0)
    set tt_unit1=source
    set group027=g
    call GroupEnumUnitsInRange(IBI,GetUnitX(RCX),GetUnitY(RCX),300,Condition(function Func0816))
    call ForGroup(IBI,function Func3038)
    call KillGroup(IBI)
    set IBI=null
    call SaveInteger(HY,(ZAE),344,(integer495))
    call SaveInteger(HY,(ZAE),345,(integer496))
    if result!=ZWE or ZEE!=ZYE then
      set N6X=JTI
      call SaveReal(HY,(ZAE),342,((N6X)*1.0))
    endif
    if((LoadInteger(HY,(GetHandleId(source)),4269))!=1)then
      if N6X==JTI then
        set N2X=Func3039(result,ZEE,ZWE,ZYE,ICX,N1X)
        set N3X=Func3040(result,ZEE,ZWE,ZYE,ICX,N1X)
        set N4X=Atan2(N3X-N1X,N2X-ICX)*bj_RADTODEG
        call SaveReal(HY,(ZAE),282,((ZWE)*1.0))
        call SaveReal(HY,(ZAE),283,((ZYE)*1.0))
      endif
      if(N6X+0.3)<JTI then
        call SaveInteger(HY,(ZAE),343,1)
      elseif(N6X+0.3)>JTI and(LoadInteger(HY,(ZAE),343))==1 then
        call SaveInteger(HY,(ZAE),343,2)
      elseif(LoadInteger(HY,(ZAE),343))==3 then
        call SaveInteger(HY,(ZAE),343,1)
      endif
    else
      call SaveInteger(HY,(ZAE),343,3)
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  set g=null
  set d=null
  set M_X=null
  return false
endfunction

function Func3042 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetSpellTargetX()
  local real ZYE=GetSpellTargetY()
  local real ICX=Atan2(ZYE-ZEE,ZWE-result)
  local real N1X=Func0468(DistanceBetweenXY(result,ZEE,ZWE,ZYE),300)
  local real N2X=SafeX50(result+N1X*Cos(ICX))
  local real N3X=SafeY50(ZEE+N1X*Sin(ICX))
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h07U',N2X,N3X,(ICX*bj_RADTODEG)-180)
  local unit M_X=CreateUnit(GetOwningPlayer(source),'o02D',N2X,N3X,(ICX*bj_RADTODEG)-180)
  call SetUnitMoveSpeed(RCX,GetUnitMoveSpeed(source))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",RCX,"chest"))
  if GetUnitAbilityLevel(source,'A1CD')>0 then
    call UnitAddAbility2(RCX,'A1CQ')
  endif
  if GetUnitAbilityLevel(source,'A1AA')==0 then
    call UnitRemoveAbility(RCX,'A2LK')
  endif
  call UnitAddAbility(source,'A2NI')
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1A8',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2NI',true)
  set units020[GetPlayerId(GetOwningPlayer(source))]=RCX
  call SaveInteger(HY,(GetHandleId(source)),4270,1)
  call UnitAddAbility2(RCX,'Avul')
  call UnitAddAbility2(RCX,'Aetl')
  if(LoadBoolean(HY,(GetHandleId(source)),339))then
    call TriggerEvaluate((LoadTriggerHandle(HY,(ZAE),338)))
  endif
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func3041))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),335,(RCX))
  call SaveUnitHandle(HY,(ZAE),19,(M_X))
  call SaveReal(HY,(ZAE),282,((result)*1.0))
  call SaveReal(HY,(ZAE),283,((ZEE)*1.0))
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call SaveInteger(HY,(ZAE),343,2)
  call SaveReal(HY,(ZAE),342,(((TimerGetElapsed(GlobalTimer))-5)*1.0))
  call SaveBoolean(HY,(ZAE),249,(false))
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func3043 takes nothing returns nothing
  local unit source=GetOrderTargetUnit()
  local real result
  local real ZEE
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER then
    set result=GetUnitX(GetOrderTargetUnit())
    set ZEE=GetUnitY(GetOrderTargetUnit())
  else
    set result=GetOrderPointX()
    set ZEE=GetOrderPointY()
  endif
  if DistanceBetweenXY(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),result,ZEE)<700 then
    call PlaySoundAtPos(sound030,result,ZEE)
  endif
  set source=null
endfunction

function Func3044 takes nothing returns boolean
  if GetIssuedOrderId()==852040 then
    call Func3043()
  endif
  return false
endfunction

function Func3045 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterPlayerUnitEvent(RBX,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(RBX,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function ReturnTrue))
  call TriggerAddCondition(RBX,Condition(function Func3044))
  set RBX=null
  call Func1944(GetTriggerUnit())
endfunction

function Func3046 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false
endfunction

function Func3047 takes nothing returns nothing
  local unit EVA=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(EVA,'A06B')
  local real EEA
  local real EXA
  local group g=GetAvailableGroup()
  local unit u
  local unit d=CreateUnit(GetOwningPlayer(EVA),'e00E',GetUnitX(EVA),GetUnitY(EVA),0)
  if QIE==1 then
    set EEA=500
    set EXA=260
  elseif QIE==2 then
    set EEA=650
    set EXA=300
  elseif QIE==3 then
    set EEA=850
    set EXA=340
  elseif QIE==4 then
    set EEA=1150
    set EXA=380
  endif
  set tt_unit1=EVA
  call GroupEnumUnitsInRange(g,GetUnitX(EVA),GetUnitY(EVA),525,Condition(function Func3046))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if DistanceBetweenUnits(EVA,u)>200 then
      call Func0648(d,u,2,EXA,0)
    else
      call Func0648(d,u,2,EEA,0)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  call SaveBoolean(HY,GetHandleId(EVA),'suic',true)
  call SaveBoolean(HY,GetHandleId(EVA),'suit',true)
  set d=null
  set EVA=null
endfunction

function Func3048 takes nothing returns nothing
  call UnitAddAbility2(GetTriggerUnit(),'A1WF')
endfunction

function Func3049 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer id=LoadInteger(HY,h,0)
  if LoadInteger(HY,h,1)==0 then
    call UnitAddAbility(u,(id))
    call UnitAddAbility2(u,'Aeth')
    call TimerStart(t,0.02,false,function Func3049)
    call SaveInteger(HY,h,1,1)
  else
    if LoadInteger(HY,h,0)>='A3BQ' and LoadInteger(HY,h,0)<='A3BT' then
      call SetUnitX(u,LoadReal(HY,h,0))
      call SetUnitY(u,LoadReal(HY,h,1))
    endif
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  endif
  set t=null
  set u=null
endfunction

function Func3050 takes nothing returns nothing
  if Func0596(GetEnumUnit())then
    if IssueImmediateOrderByIdExFunc(GetEnumUnit(),852556)==false then
      call KillUnit(GetEnumUnit())
    endif
    call GroupRemoveUnit(group014,GetEnumUnit())
  endif
endfunction

function Func3051 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  local unit EAA
  local group g
  local integer id
  local integer morpher1
  local integer morpher2
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    set EAA=GetTriggerUnit()
    call DisableTrigger(t)
    call DestroyTextTag(LoadTextTagHandle(HY,h,3))
    call RemoveSavedHandle(HY,GetHandleId(LoadUnitHandle(HY,h,1)),'A38K')
    set g=LoadGroupHandle(HY,h,2)
    call GroupEnumUnitsInRange(g,GetUnitX(EAA),GetUnitY(EAA),600,Condition(function ReturnTrue))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      if Func0598(u)then
        call DisableTruesightImmunity(u)
      endif
      call GroupRemoveUnit(g,u)
    endloop
    call KillGroup(g)
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_TARGET_IN_RANGE then
    set u=GetTriggerUnit()
    if Func0598(u)and IsUnitOwnedByPlayer(u,GetOwningPlayer(LoadUnitHandle(HY,h,0)))then
      call EnableTruesightImmunity(u)
      call GroupAddUnit(LoadGroupHandle(HY,h,2),u)
      if Func0596(u)then
        call SaveInteger(HY,h,3,LoadInteger(HY,h,3)+1)
        call SetTextTagText(LoadTextTagHandle(HY,h,3),I2S(LoadInteger(HY,h,3)),0.03)
      endif
    endif
  else
    if GetSpellAbilityId()=='A38M' then
      set group014=LoadGroupHandle(HY,h,2)
      call ForGroup(group014,function Func3050)
      call SaveInteger(HY,h,3,0)
      call SetTextTagText(LoadTextTagHandle(HY,h,3),"",0.03)
      set group014=null
    endif
  endif
  set t=null
  set EAA=null
  return false
endfunction

function Func3052 takes nothing returns nothing
  local unit u
  local trigger t
  local integer h
  local unit SKE=GetTriggerUnit()
  local texttag tt
  if HaveSavedHandle(HY,GetHandleId(SKE),'A38K')then
    call KillUnit(LoadUnitHandle(HY,GetHandleId(SKE),'A38K'))
  endif
  set u=CreateUnit(GetOwningPlayer(SKE),'n129',GetSpellTargetX(),GetSpellTargetY(),270)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call UnitApplyTimedLife(u,'BTLF',180)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitInRange(t,u,141,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func3051))
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,GetHandleId(SKE),'A38K',u)
  call SaveUnitHandle(HY,h,1,SKE)
  call SaveGroupHandle(HY,h,2,GetAvailableGroup())
  set tt=CreateTextTag()
  call SaveTextTagHandle(HY,h,3,tt)
  call SetTextTagPosUnit(tt,u,64)
  call SetTextTagColor(tt,255,200,10,255)
  call SetTextTagPermanent(tt,true)
  call SetTextTagVisibility(tt,IsUnitAlly(u,LocalPlayer))
  set tt=null
  set t=null
  set SKE=null
  set u=null
endfunction

function Func3053 takes nothing returns nothing
  call UnitAddAbility2(tt_unit1,'A38K')
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A38K',true)
endfunction

function Func3054 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A38K',false)
endfunction

function Func3055 takes nothing returns nothing
  call IssueImmediateOrderByIdExFunc(GetEnumUnit(),852556)
endfunction

function Func3056 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and(GetUnitTypeId(GetFilterUnit())=='o018' or GetUnitTypeId(GetFilterUnit())=='o002' or GetUnitTypeId(GetFilterUnit())=='o00B' or GetUnitTypeId(GetFilterUnit())=='o01B' or GetUnitTypeId(GetFilterUnit())=='n129')and DistanceBetweenXY(tt_real1,tt_real2,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))<700.
endfunction

function Func3057 takes player p,integer i,real x,real y returns nothing
  local group g=GetAvailableGroup()
  set player023=p
  set integer497=i
  set tt_real1=x
  set tt_real2=y
  call GroupEnumUnitsOfPlayer(g,p,Condition(function Func3056))
  call ForGroup(g,function Func3055)
  call KillGroup(g)
  set g=null
endfunction

function Func3058 takes nothing returns nothing
  local real x=GetUnitX(GetTriggerUnit())
  local real y=GetUnitY(GetTriggerUnit())
  local group g
  local real d
  local integer id=GetSpellAbilityId()
  local unit u
  local unit SKE=GetTriggerUnit()
  if id=='A1WF' then
    set x=GetSpellTargetX()
    set y=GetSpellTargetY()
    call Func3057(GetOwningPlayer(SKE),'o018',x,y)
  else
    call Func0692("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
    call DestroyEffect(AddSpecialEffect("war3mapImported\\RemoteMineBlast.mdx",x,y))
    call TimedReveal(GetOwningPlayer(SKE),3,x,y,500)
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    set d=300.
    if id=='A0A3' then
      set d=450.
    elseif id=='A0A4'then
      set d=600.
    elseif id=='A1FZ'then
      set d=750.
    endif
    set boolean117=true
    set IsMyDamage=IsMyDamage+1
    call GroupEnumUnitsInRange(g,x,y,425,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call GroupRemoveUnit(g,u)
      call DamageTarget(SKE,u,1,d)
    endloop
    call RemoveUnit(SKE)
    call KillGroup(g)
    set boolean117=false
    set IsMyDamage=IsMyDamage-1
  endif
  set SKE=null
endfunction

function Func3059 takes nothing returns nothing
  if GetUnitAbilityLevel(GetTriggerUnit(),'A1WF')==0 then
    call UnitAddAbility2(GetTriggerUnit(),'A1WF')
  endif
endfunction

function Func3060 takes nothing returns boolean
  return Func0597(GetTriggerUnit())
endfunction

function Func3061 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 or IsBasicCourier(GetFilterUnit()))and IsDead(GetFilterUnit())==false and Func0623(GetFilterUnit())==false and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func3062 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 or IsBasicCourier(GetFilterUnit()))and IsDead(GetFilterUnit())==false and Func0623(GetFilterUnit())==false and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func3063 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit EJA=LoadUnitHandle(HY,h,0)
  local group g=GetAvailableGroup()
  local unit u
  local real dmg
  local integer id=GetUnitTypeId(EJA)
  local unit d=CreateUnit(GetOwningPlayer(EJA),'e00E',GetUnitX(EJA),GetUnitY(EJA),0)
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
  call DestroyEffect(AddSpecialEffect("war3mapImported\\NewGroundEX.mdx",GetUnitX(EJA),GetUnitY(EJA)))
  call KillUnit(EJA)
  if id=='n00O'then
    set dmg=150
  elseif id=='n00P'then
    set dmg=190
  elseif id=='n00Q'then
    set dmg=225
  elseif id=='n00N'then
    set dmg=260
  endif
  set tt_unit1=EJA
  call GroupEnumUnitsInRange(g,GetUnitX(EJA),GetUnitY(EJA),525,Condition(function Func3061))
  set IsMyDamage=IsMyDamage+1
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if DistanceBetweenUnits(d,u)<225 then
      call DamageTarget(d,u,2,dmg)
    else
      call DamageTarget(d,u,2,dmg/2)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  set IsMyDamage=IsMyDamage+1
  call KillGroup(g)
  set EJA=null
  set d=null
endfunction

function Func3064 takes unit u,real UME returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call TimerStart(t,UME,false,function Func3063)
  set t=null
endfunction

function Func3065 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,347))
  local group g
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    if GetKillingUnit()==null then
      call Func3064(u,0.3)
    else
      call SetUnitAnimationByIndex(GetTriggerUnit(),4)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if LoadBoolean(HY,h,0)==false then
      if LoadInteger(HY,h,0)==0 then
        call SaveInteger(HY,h,0,1)
        call TriggerRegisterUnitInRange(t,u,225,Condition(function ReturnTrue))
      else
        set g=GetAvailableGroup()
        set tt_unit1=u
        call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),225,Condition(function Func3062))
        if FirstOfGroup(g)!=null then
          call TriggerRegisterTimerEvent(t,0.3,false)
          call SaveBoolean(HY,h,0,true)
        endif
        call KillGroup(g)
      endif
    else
      call Func3064(u,0.3)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  else
    if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(u))and(GetUnitAbilityLevel(GetTriggerUnit(),'A04R')==0 or IsBasicCourier(GetTriggerUnit()))and Func0623(GetTriggerUnit())==false and IsUnitInvulnerable(GetTriggerUnit())==false then
      call TriggerRegisterTimerEvent(t,0.3,false)
      call SaveBoolean(HY,h,0,true)
    endif
  endif
  set t=null
  set u=null
  set g=null
  return false
endfunction

function Func3066 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func3065))
  call SaveUnitHandle(HY,GetHandleId(t),347,GetTriggerUnit())
  set t=null
endfunction

function Func3067 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  local unit EQA=LoadUnitHandle(HY,h,0)
  local group g
  local unit d
  local unit ESA
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if GetKillingUnit()!=null then
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    else
      call TriggerRegisterTimerEvent(t,0,false)
    endif
  elseif GetTriggerEvalCount(t)==1 then
    call TriggerRegisterUnitInRange(t,EQA,450,Condition(function ReturnTrue))
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    call DisableTrigger(t)
    set ESA=udg_Hero[GetPlayerId(GetOwningPlayer(EQA))]
    call KillUnit(EQA)
    call SetUnitAnimationByIndex(EQA,3)
    set g=GetAvailableGroup()
    set tt_unit1=EQA
    call GroupEnumUnitsInRange(g,GetUnitX(EQA),GetUnitY(EQA),475,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call Func1032(ESA,u)
      set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
      call UnitAddAbility(d,'A38L')
      call SetUnitAbilityLevel(d,'A38L',LoadInteger(HY,h,0))
      if IssueTargetOrder(d,"thunderbolt",u)==false then
      endif
      call GroupRemoveUnit(g,u)
    endloop
    set ESA=null
    set d=null
    call KillGroup(g)
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  else
    set u=GetTriggerUnit()
    if IsUnitEnemy(u,GetOwningPlayer(EQA))and IsMagicImmune(u)==false and GetUnitAbilityLevel(u,'A04R')==0 then
      if IsNeutralsOrObserversOrAllies(GetOwningPlayer(EQA))then
        call SetUnitAnimationByIndex(EQA,5)
      endif
      call TriggerRegisterTimerEvent(t,1.5,false)
    endif
  endif
  set t=null
  set EQA=null
  return false
endfunction

function Func3068 takes nothing returns boolean
  local unit u
  local trigger t
  local integer h
  if GetUnitTypeId(GetTriggerUnit())=='otot' then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set u=GetTriggerUnit()
    call SaveUnitHandle(HY,h,0,u)
    call SaveInteger(HY,h,0,GetUnitAbilityLevel(udg_Hero[GetPlayerId(GetOwningPlayer(u))],'A06H'))
    call TriggerRegisterTimerEvent(t,1.5,false)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func3067))
    set t=null
    set u=null
  endif
  return false
endfunction

function Func3069 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterEnterRectSimple(RBX,GetWorldBounds())
  call TriggerAddCondition(RBX,Condition(function Func3060))
  call TriggerAddAction(RBX,function Func3066)
  set RBX=CreateTrigger()
  call TriggerRegisterEnterRectSimple(RBX,GetWorldBounds())
  call TriggerAddCondition(RBX,Condition(function Func3068))
  set RBX=null
  call Func0762("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav")
  call Func1944(CirclesOfPower[1])
  call Func1944(CirclesOfPower[2])
  call Func1944(CirclesOfPower[3])
  call Func1944(CirclesOfPower[4])
  call Func1944(CirclesOfPower[5])
  call Func1944(CirclesOfPower[7])
  call Func1944(CirclesOfPower[8])
  call Func1944(CirclesOfPower[9])
  call Func1944(CirclesOfPower[10])
  call Func1944(CirclesOfPower[11])
endfunction

function Func3070 takes nothing returns boolean
  return GetSpellAbilityId()=='A065'
endfunction

function Func3071 takes nothing returns nothing
  local integer i=0
  local integer k=5
  local integer array EYA
  local player array ps
  local integer id
  local item it
  local unit u=GetTriggerUnit()
  call DisableTrigger(t_manipulateitem)
  loop
    exitwhen i>k
    set id=GetItemsIndex_NonMuted(UnitItemInSlot(u,i))
    if id==integer244 or id==integer245 or id==integer246 or id==integer247 or id==integer248 or id==integer249 or id==integer234 or id==integer260 or id==integer261 or id==integer262 or id==integer218 or id==integer282 or id==integer309 or id==integer302 then
      set EYA[i]=Item_Real[id]
      set ps[i]=GetItemPlayer(UnitItemInSlot(u,i))
      call RemoveItem(UnitItemInSlot(u,i))
    endif
    set i=i+1
  endloop
  call UnitResetCooldownFX(u)
  set i=0
  set k=5
  loop
    exitwhen i>k
    if EYA[i]>0 then
      set it=CreateItem(EYA[i],0,0)
      call SetItemPlayer(it,ps[i],false)
      call SetItemUserData(it,1)
      call UnitAddItem(u,it)
    endif
    set i=i+1
  endloop
  call EnableTrigger(t_manipulateitem)
  set it=null
  set u=null
endfunction

function Func3072 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_SPELL_FINISH)
  call TriggerAddCondition(RBX,Condition(function Func3070))
  call TriggerAddAction(RBX,function Func3071)
  call AddToPurgeList('B02P','PRGE')
  call AddToPurgeList('A3Q0','PRGE')
  set RBX=null
endfunction

function Func3073 takes unit WXE,unit SGE returns nothing
  if GetUnitAbilityLevel(WXE,'A05F')>0 then
    if(IsMagicImmune(SGE)==false)then
      call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(WXE))],SGE,1,GetUnitAbilityLevel(WXE,'A05F')*8+8)
    else
      call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(WXE))],SGE,7,0)
    endif
  endif
endfunction

function Func3074 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real GXE= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),x,y)
  local unit D2O=CreateUnit(GetOwningPlayer(SKE),'e00E',x,y,0)
  local integer i=0
  local real a=0
  local real k=0
  local boolean b=false
  local boolean E_A=false
  call DummyDamageTracking(10)
  call UnitAddAbility(D2O,'A05F')
  call SetUnitAbilityLevel(D2O,'A05F',GetUnitAbilityLevel(SKE,'A0BQ'))
  set x=x+10*Cos(bj_DEGTORAD*GXE)
  set y=y+10*Sin(bj_DEGTORAD*GXE)
  loop
    set b=IsTerrainPathable(x+k*Cos(a),y+k*Sin(a),PATHING_TYPE_WALKABILITY)==false
    if b==false then
      call SetTerrainPathable(x+k*Cos(a),y+k*Sin(a),PATHING_TYPE_WALKABILITY,true)
    endif
    set E_A=ImminentTriggeredPointOrder(D2O,852593,x+k*Cos(a),y+k*Sin(a))
    if b==false then
      call SetTerrainPathable(x+k*Cos(a),y+k*Sin(a),PATHING_TYPE_WALKABILITY,false)
    endif
    exitwhen E_A or i>40
    set i=i+1
    set k=k+10
  endloop
  set SKE=null
  set D2O=null
endfunction

function Func3075 takes nothing returns boolean
  return (IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or IsUnitIllusion(GetFilterUnit()))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitInvulnerable(GetFilterUnit())==false and IsMagicImmune(GetFilterUnit())==false and LoadInteger(HY,GetHandleId(GetFilterUnit()),'A2WB')!=1
endfunction

function Func3076 takes unit SKE,unit first returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local unit E2A=first
  local unit d
  local integer QIE=GetUnitAbilityLevel(SKE,'A2WB')
  loop
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,GetUnitX(E2A),GetUnitY(E2A),575,Condition(function Func3075))
    set u=GetClosestOfGroup(g,GetUnitX(E2A),GetUnitY(E2A))
    exitwhen u==null
    set d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(E2A),GetUnitY(E2A),0)
    call UnitAddAbility(d,'A049')
    call SetUnitAbilityLevel(d,'A049',QIE)
    call IssueTargetOrder(d,"drunkenhaze",u)
    set d=null
    call AddTimedKeyToAgent(u,'A2WB',0.5)
    set E2A=u
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set u=null
  set E2A=null
endfunction

function Func3077 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local real D1E=2.5+QIE*0.5
  if Func2344(SGE)==false then
    set D1E=6.
  endif
  call CreateLightningOnUnit("BRDR",SKE,SGE,85,0.3,0.3,1,1,0.2,0.2)
  if IsUnitType(SKE,UNIT_TYPE_HERO)==false then
    set SKE=udg_Hero[GetPlayerId(GetOwningPlayer(SKE))]
  endif
  call EvasionSourceActivate(14,D1E+1.)
  call UnitAddAbilityTimedExF(SGE,'A3Q0',1,2.5+QIE*0.5,'B02P')
  call DamageTarget(SKE,SGE,3,QIE*80)
  if GetSpellAbilityId()=='A2WB' then
    call AddTimedKeyToAgent(SGE,'A2WB',0.5)
    call Func3076(SKE,SGE)
  endif
  set SKE=null
  set SGE=null
endfunction

function Func3078 takes nothing returns boolean
  return(IsMagicImmune(GetFilterUnit())==false and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))and IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))
endfunction

function Func3079 takes nothing returns nothing
  local unit source=tt_unit1
  local unit RCX=tt_unit3
  local integer ZAE=GetUnitAbilityLevel(source,'A05E')
  if ZAE==0 then
    set ZAE=GetUnitAbilityLevel(source,'A2WA')
  endif
  call DamageTarget(source,RCX,1,50+75*ZAE)
  set source=null
  set RCX=null
endfunction

function Func3080 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=null
  local group g=GetAvailableGroup()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local integer ZAE=2
  if GetUnitAbilityLevel(source,'A05E')==0 then
    set ZAE=4
  endif
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,result,ZEE,2525,Condition(function Func3078))
  loop
    exitwhen FirstOfGroup(g)==null or ZAE==0
    set RCX=GetClosestOfGroup(g,result,ZEE)
    set ZAE=ZAE-1
    call GroupRemoveUnit(g,RCX)
    call AddProjectile(source,RCX,'h0ET',"Func3079",900,true)
  endloop
  call KillGroup(g)
  set g=null
  set RCX=null
  set source=null
endfunction

function Func3081 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false
endfunction

function Func3082 takes unit SKE,real x,real y,real A7X,integer QIE,unit NCX returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local real dmg=75.*QIE
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,A7X,Condition(function Func3081))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    if u==NCX then
      call DamageTarget(SKE,NCX,1,(1.2+0.15*(GetUnitAbilityLevel(SKE,'A0CY')+Bool2Int(Func0898(SKE))))*75*QIE)
    else
      call DamageTarget(SKE,u,1,dmg/(1+2*Bool2Int(IsUnitType(u,UNIT_TYPE_STRUCTURE))))
    endif
  endloop
  call KillGroup(g)
  set u=null
endfunction

function Func3083 takes nothing returns boolean
  if((AliveNonBuildOrMarker(GetFilterUnit()))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1)))and IsCourier(GetFilterUnit())==false and GetFilterUnit()!=Roshan then
    return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))or IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false or Func1474(GetFilterUnit())==false
  endif
  return false
endfunction

function Func3084 takes unit u returns unit
  local unit NCX=null
  local group g=GetAvailableGroup()
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),300,Condition(function Func3083))
  call GroupRemoveUnit(g,u)
  if GetUnitTypeId(u)=='e00E' then
    call GroupRemoveUnit(g,LoadUnitHandle(HY,GetHandleId(u),0))
  endif
  set NCX=GetClosestOfGroup(g,GetUnitX(u),GetUnitY(u))
  call KillGroup(g)
  set tt_unit1=NCX
  set NCX=null
  set g=null
  return tt_unit1
endfunction

function Func3085 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer c=GetTriggerEvalCount(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local unit NCX=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real ox=(LoadReal(HY,h,282))
  local real oy=(LoadReal(HY,h,283))
  local real cx=GetUnitX(NCX)
  local real cy=GetUnitY(NCX)
  local real tx=0
  local real ty=0
  local real a
  local real ILX
  local real FGE
  local real AHX
  local real nx
  local real ny
  local location XOX
  local boolean UII=LoadBoolean(HY,h,0)
  local integer QIE=LoadInteger(HY,h,5)
  local boolean XVA=LoadBoolean(HY,h,55)
  if SGE!=null then
    set tx=GetUnitX(SGE)
    set ty=GetUnitY(SGE)
  endif
  if SGE==null or DistanceBetweenXY(ox,oy,tx,ty)>1000 then
    set tx=ox
    set ty=oy
  endif
  set a= AngleBetweenXY(cx,cy,tx,ty)
  set ILX=DistanceBetweenXY(cx,cy,tx,ty)
  set FGE=ILX/IMaxBJ((58-c),1)
  set AHX=(c-29)*(c-29)
  set nx=cx+FGE*Cos(a*bj_DEGTORAD)
  set ny=cy+FGE*Sin(a*bj_DEGTORAD)
  if c<58 then
    if XVA==false then
      call SetUnitFlyHeight(NCX,775-AHX,0)
    endif
    call SetUnitPosition(NCX,nx,ny)
  else
    if XVA==false then
      call SetUnitFlyHeight(NCX,GetUnitDefaultFlyHeight(NCX),0)
    endif
    call SetUnitPathing2(NCX,true)
    call SetUnitPosition(NCX,tx,ty)
    call SaveInteger(HY,GetHandleId(NCX),4268,2)
    set XOX=Location(tx,ty)
    call TerrainDeformationRippleBJ(0.2,true,XOX,1.00,300.00,96.00,1,64.00)
    call RemoveLocation(XOX)
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call DestroyEffect(LoadEffectHandle(HY,h,33))
    call DestroyEffect(LoadEffectHandle(HY,h,34))
    call DestroyEffect(LoadEffectHandle(HY,h,35))
    call DestroyEffect(LoadEffectHandle(HY,h,36))
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(NCX),GetUnitY(NCX)))
    call Func3082(SKE,tx,ty,300,QIE,NCX)
    if(SGE!=null and IsUnitEnemy(SKE,GetOwningPlayer(SGE))and DistanceBetweenUnits(SGE,NCX)<150)then
      if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false and UII==false then
        call SaveUnitHandle(TempHash,'A3E9',0,SGE)
        call SaveUnitHandle(TempHash,'A3E9',1,SKE)
        call SaveInteger(TempHash,'A3E9',0,QIE)
        call ExecuteFunc("Func3087")
      endif
    endif
    call KillTrees(tx,ty,300)
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
  set SGE=null
  set XOX=null
  set NCX=null
  return false
endfunction

function Func3086 takes unit SKE,unit NCX,unit SGE,integer QIE,boolean UII returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x
  local real y
  local unit d
  local boolean b=IsBuggyFlying(NCX)
  if GetUnitTypeId(SKE)=='Ucrl'then
    call SetUnitAnimationByIndex(SKE,4)
  endif
  call StunTargetEx(NCX,1.3,true)
  call SetUnitPathing2(NCX,false)
  if b==false then
    call UnitAddAbility2(NCX,'Amrf')
    call UnitRemoveAbility(NCX,'Amrf')
  endif
  call SaveInteger(HY,GetHandleId(NCX),4268,1)
  if SGE!=null then
    set x=GetUnitX(SGE)
    set y=GetUnitY(SGE)
  else
    set x=GetItemX(GetSpellTargetItem())
    set y=GetItemY(GetSpellTargetItem())
    set SGE=null
  endif
  if IsUnitEnemy(SKE,GetOwningPlayer(SGE))then
    call IssueTargetOrder(SKE,"attack",SGE)
  endif
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveUnitHandle(HY,h,2,(NCX))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,QIE)
  call SaveBoolean(HY,h,0,UII)
  call SaveBoolean(HY,h,55,b)
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",NCX,"origin")))
  call SaveEffectHandle(HY,h,33,(AddSpecialEffectTarget("war3mapImported\\TossEffect.mdx",NCX,"origin")))
  call SaveEffectHandle(HY,h,34,(AddSpecialEffectTarget("war3mapImported\\TossEffect.mdx",NCX,"chest")))
  call SaveEffectHandle(HY,h,35,(AddSpecialEffectTarget("war3mapImported\\TossEffect.mdx",NCX,"foot")))
  call SaveEffectHandle(HY,h,36,(AddSpecialEffectTarget("war3mapImported\\TossEffect.mdx",NCX,"hand")))
  call SaveReal(HY,h,282,((x)*1.0))
  call SaveReal(HY,h,283,((y)*1.0))
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func3085))
  set t=null
endfunction

function Func3087 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit XOA=Func3084(SKE)
  if XOA!=null then
    call LotusOrbFX(SKE)
    call Func3086(SKE,XOA,LoadUnitHandle(TempHash,'A3E9',1),LoadInteger(TempHash,'A3E9',0),true)
  endif
  set SKE=null
  set XOA=null
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3088 takes nothing returns nothing
  call Func3086(GetTriggerUnit(),unit204,GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A0BZ'),false)
endfunction

function Func3089 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit NCX=Func3084(SKE)
  local unit SGE=GetSpellTargetUnit()
  if GetSpellTargetItem()!=null and IsFakeRune(GetItemTypeId(GetSpellTargetItem()))==false then
    call InterruptUnitError(SKE,'n0N3')
  endif
  set unit204=NCX
  if NCX==null then
    call InterruptUnitError(SKE,'n0DA')
  endif
  set SKE=null
  set NCX=null
  set SGE=null
endfunction

function Func3090 takes nothing returns nothing
  local unit source=unit036
  local unit RCX=unit037
  local unit M_X=(LoadUnitHandle(HY,(GetHandleId(source)),297))
  call SaveUnitHandle(HY,(GetHandleId(RCX)),297,(M_X))
  call SetUnitOwner(M_X,GetOwningPlayer(RCX),true)
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func3091 takes nothing returns nothing
  local unit u=(LoadUnitHandle(HY,(GetHandleId(unit035)),297))
  if u!=null and GetUnitTypeId(u)=='e01V' then
    call RemoveUnit(u)
  endif
  set u=null
endfunction

function Func3092 takes nothing returns nothing
  local unit source=(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),298))
  local integer ZAE=GetUnitAbilityLevel(source,'A0CY')
  if GetUnitState(source,UNIT_STATE_LIFE)>1 then
    call SetUnitScale(source,0.5+0.25*ZAE,0.5+0.25*ZAE,0.5+0.25*ZAE)
  endif
  set source=null
endfunction

function Func3093 takes nothing returns boolean
  local integer ZAE
  if IsUnitIllusion(GetTriggerUnit())and(GetUnitTypeId(GetTriggerUnit())=='Ucrl' or GetUnitTypeId(GetTriggerUnit())=='U01X')then
    set ZAE=GetUnitAbilityLevel((LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),298)),'A0CY')
    call SetUnitScale(GetTriggerUnit(),0.5+0.25*ZAE,0.5+0.25*ZAE,0.5+0.25*ZAE)
  endif
  return false
endfunction

function Func3094 takes nothing returns nothing
  local trigger t
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A0CY')
  local unit d
  local region r
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Taunt\\TauntCaster.mdl",u,"origin"))
  if QIE==1 then
    set d=CreateUnit(GetOwningPlayer(u),'e01V',0,0,0)
    call UnitAddAbility2(d,'A10B')
    call SaveUnitHandle(HY,(GetHandleId(u)),297,(d))
  else
    set d=(LoadUnitHandle(HY,(GetHandleId(u)),297))
  endif
  if QIE==2 then
    call UnitRemoveAbility(d,'A10B')
    call UnitAddAbility2(d,'A10A')
    call UnitRemoveAbility(u,'B04E')
  elseif QIE==3 then
    call UnitRemoveAbility(d,'A10B')
    call UnitRemoveAbility(d,'A10A')
    call UnitAddAbility2(d,'A0ZS')
    call UnitRemoveAbility(u,'B04E')
    call UnitRemoveAbility(u,'B09C')
  endif
  call SetPlayerTechResearched(GetOwningPlayer(u),'R00E',QIE)
  call SetUnitScale(u,0.5+0.25*QIE,0.5+0.25*QIE,0.5+0.25*QIE)
  if QIE==1 then
    set t=CreateTrigger()
    call TriggerAddAction(t,function Func3092)
    call TriggerRegisterTimerEvent(t,2.00,true)
    call SaveUnitHandle(HY,(GetHandleId(t)),298,(u))
    call SetUnitScale(u,0.5+0.25*QIE,0.5+0.25*QIE,0.5+0.25*QIE)
    set t=CreateTrigger()
    set r=CreateRegion()
    call RegionAddRect(r,GetWorldBounds())
    call TriggerRegisterEnterRegion(t,r,Condition(function ReturnTrue))
    call TriggerAddCondition(t,Condition(function Func3093))
    call SaveUnitHandle(HY,(GetHandleId(t)),298,(u))
    set t=null
    set r=null
  endif
  set d=null
  set u=null
endfunction

function Func3095 takes nothing returns nothing
  local integer QIE=GetUnitAbilityLevel(TriggeredUnit,'A19Q')
  if GetRandomInt(1,100)<=(5+QIE*5)then
    call StunTargetEx(CastedUnit,0.75+0.25*QIE,false)
    call DamageTarget(CastedUnit,TriggeredUnit,1,15+10*QIE)
  endif
endfunction

function Func3096 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'A19Q')>0 and AliveNonBuildOrMarker(CastedUnit)and GetUnitAbilityLevel(TriggeredUnit,'A36D')==0 and DistanceBetweenUnits(CastedUnit,TriggeredUnit)<325 then
    call Func3095()
  endif
endfunction

function Func3097 takes nothing returns nothing
  call AddWrapper("Func3096",0)
endfunction

function Func3098 takes nothing returns nothing
  call UnitAddAbility3(GetTriggerUnit(),'A36G',GetLearnedSkillLevel())
endfunction

function Func3099 takes nothing returns nothing
  call HideAbility('A2KK')
  call AddWrapper("Func4662",0)
endfunction

function Func3100 takes nothing returns boolean
  if(LoadInteger(HY,GetHandleId(GetFilterUnit()),4268)==1)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(unit205))then
    call DamageTarget(unit205,GetFilterUnit(),1,real079)
  endif
  return false
endfunction

function Func3101 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),14))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local integer QIE=LoadInteger(HY,h,5)
  local group g=GetAvailableGroup()
  set unit205=u
  if QIE==1 then
    set real079=25
  elseif QIE==2 then
    set real079=45
  elseif QIE==3 then
    set real079=65
  elseif QIE==4 then
    set real079=75
  endif
  call GroupEnumUnitsInRange(g,x,y,299,Condition(function Func3100))
  call KillGroup(g)
  if GetTriggerEvalCount(t)>6 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  set g=null
  return false
endfunction

function Func3102 takes unit u,unit t returns nothing
  local integer QIE=GetUnitAbilityLevel(u,'A10M')
  local real d
  if QIE>0 then
    set d=5+20*QIE-10*(QIE/4)
    if LoadInteger(HY,GetHandleId(t),4268)==1 then
      set d=d*2
    endif
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(u))],t,1,d)
  endif
endfunction

function Func3103 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  local integer QIE=GetUnitAbilityLevel(u,'A0LL')
  call UnitAddAbility2(d,'A10M')
  call SetUnitAbilityLevel(d,'A10M',QIE)
  call ImminentTriggeredPointOrder(d,852652,x,y)
  set u=null
  set d=null
endfunction

function Func3104 takes nothing returns boolean
  return IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func3105 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A1EJ')
  call GroupEnumUnitsInRange(g,0,0,12000,Condition(function Func3104))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call FuckingAssistBuffWrap(u,u2)
    call UnitAddAbilityTimedExF(u2,'A0XE',QIE,5.,'B00B')
    call SetPlayerAbilityAvailable(GetOwningPlayer(u2),'A0XE',false)
    call UnitMakeAbilityPermanent(u2,true,'A0XF')
    call UnitMakeAbilityPermanent(u2,true,'A0XG')
    call UnitMakeAbilityPermanent(u2,true,'A0XH')
  endloop
  call KillGroup(g)
  set u=null
endfunction

function Func3106 takes nothing returns boolean
  return GetSpellAbilityId()=='A0BE'
endfunction

function Func3107 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit SGE
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  call SetUnitAbilityLevel(source,'A09E',GetUnitAbilityLevel(source,'A0BE'))
  if GetUnitCurrentOrder(source)==851983 then
    set SGE=LoadUnitHandle(HY,GetHandleId(source),'A0BE')
    if IsUnitEnemy(SGE,GetOwningPlayer(source))then
      call IssueTargetOrder(source,"attack",SGE)
    endif
    set SGE=null
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3108 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call TriggerRegisterTimerEvent(RBX,0,false)
  call TriggerAddCondition(RBX,Condition(function Func3107))
  set RBX=null
  set source=null
endfunction

function Func3109 takes nothing returns nothing
  if GetUnitAbilityLevel(GetAttacker(),'A0BE')>0 then
    call SaveUnitHandle(HY,GetHandleId(GetAttacker()),'A0BE',GetTriggerUnit())
  endif
endfunction

function Func3110 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
  call TriggerAddCondition(t,Condition(function Func3106))
  call TriggerAddAction(t,function Func3108)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerAddCondition(t,Condition(function Func3109))
  set t=null
  call AddToPurgeList('B0ET','PRGE')
  call AddToPurgeList('B00C','PRGE')
  call AddToPurgeList('A3Q2','PRGE')
  call AddWrapper("Func4635",-2)
  call HideAbility('A3FH')
endfunction

function Func3111 takes nothing returns nothing
  call SetUnitAbilityLevel(GetTriggerUnit(),'A09E',GetUnitAbilityLevel(GetTriggerUnit(),'A0BE'))
endfunction

function Func3112 takes unit u,unit LCO returns nothing
  local integer h=GetHandleId(u)
  local unit XLA=LoadUnitHandle(HY,h,237)
  local integer c=IMaxIF(LoadInteger(HY,h,236),0)
  local integer QIE=GetUnitAbilityLevel(u,'A0O0')
  local integer XMA
  local integer XPA=LoadInteger(MHT,GetHandleId(u),'A0O0')
  if XLA!=LCO then
    set c=1
    call SaveUnitHandle(HY,h,237,LCO)
  else
    set c=Func0464(c+1,7)
  endif
  if GetUnitAbilityLevel(u,'A36D')==1 then
    set c=0
  endif
  set XMA=(10+5*QIE)*c
  if(XPA!=XMA)then
    call Stat_Add(u,XMA-XPA,"+AS")
    call SaveInteger(MHT,GetHandleId(u),'A0O0',XMA)
  endif
  call SaveInteger(HY,h,236,c)
  call AddTimedKeyToAgent(u,4271,.4)
  set XLA=null
endfunction

function Func3113 takes unit WXE,unit SGE returns nothing
  if GetUnitAbilityLevel(WXE,'A0O0')>0 and LoadInteger(HY,GetHandleId(WXE),4271)!=1 then
    call Func3112(WXE,SGE)
  endif
endfunction

function Func3114 takes unit source,unit RCX,unit M_X,integer ZAE returns nothing
  call UnitAddAbilityTimedExF(RCX,'A3Q2',1,4.,'B00C')
  call DamageTarget(source,RCX,1,25+50*ZAE)
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",RCX,"overhead"))
endfunction

function Func3115 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group028)==false then
    call GroupAddUnit(group028,GetEnumUnit())
    call Func3114(unit206,GetEnumUnit(),unit207,integer498)
  endif
endfunction

function Func3116 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit M_X=(LoadUnitHandle(HY,(ZAE),675))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),676))
  local real ZWE=(LoadReal(HY,(ZAE),13))
  local real ZYE=(LoadReal(HY,(ZAE),433))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local group g=(LoadGroupHandle(HY,(ZAE),187))
  local group IBI=GetAvailableGroup()
  if GetTriggerEvalCount(RBX)<=50 then
    set ZWE=ZWE+20
    set ZYE=ZYE+7
    call SaveReal(HY,(ZAE),13,((ZWE)*1.0))
    call SaveReal(HY,(ZAE),433,((ZYE)*1.0))
  elseif GetTriggerEvalCount(RBX)<=100 then
    set ZWE=ZWE+20
    set ZYE=ZYE-7
    call SaveReal(HY,(ZAE),13,((ZWE)*1.0))
    call SaveReal(HY,(ZAE),433,((ZYE)*1.0))
  endif
  call SetUnitX(M_X,SafeX50(result+ZYE*Cos(ZWE*bj_DEGTORAD)))
  call SetUnitY(M_X,SafeY50(ZEE+ZYE*Sin(ZWE*bj_DEGTORAD)))
  set ZWE=ZWE+180
  call SetUnitX(M0X,SafeX50(result+ZYE*Cos(ZWE*bj_DEGTORAD)))
  call SetUnitY(M0X,SafeY50(ZEE+ZYE*Sin(ZWE*bj_DEGTORAD)))
  set tt_unit1=source
  set unit206=source
  set unit207=RCX
  set group028=g
  set integer498=QIE
  call GroupEnumUnitsInRange(IBI,GetUnitX(M_X),GetUnitY(M_X),125,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(IBI,function Func3115)
  set tt_unit1=source
  call GroupEnumUnitsInRange(IBI,GetUnitX(M0X),GetUnitY(M0X),125,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(IBI,function Func3115)
  call KillGroup(IBI)
  if GetTriggerEvalCount(RBX)>100 or IsDead(source)then
    call KillUnit(M_X)
    call KillUnit(M0X)
    call KillUnit(RCX)
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set M_X=null
  set M0X=null
  set RCX=null
  return false
endfunction

function Func3117 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e02Y',result,ZEE,0)
  local unit M_X=CreateUnit(GetOwningPlayer(source),'e02Y',result,ZEE,0)
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit M0X=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call UnitAddAbility(M0X,'A21O')
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),19,(M0X))
  call SaveUnitHandle(HY,(ZAE),675,(RCX))
  call SaveUnitHandle(HY,(ZAE),676,(M_X))
  call SaveReal(HY,(ZAE),13,(0*1.0))
  call SaveReal(HY,(ZAE),433,(0*1.0))
  call SaveInteger(HY,(ZAE),5,(GetUnitAbilityLevel(source,'A21N')))
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call TriggerRegisterTimerEvent(RBX,0.03,true)
  call TriggerAddCondition(RBX,Condition(function Func3116))
  call EvasionSourceActivate(16,12.)
  set source=null
  set RCX=null
  set M_X=null
  set RBX=null
  set M0X=null
endfunction

function Func3118 takes unit source,unit RCX,unit M_X,integer ZAE returns nothing
  call SetUnitOwner(M_X,GetOwningPlayer(RCX),false)
  call SetUnitAbilityLevel(M_X,'A21P',ZAE)
  call IssueTargetOrder(M_X,"slow",RCX)
  call DamageTarget(source,RCX,1,75)
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",RCX,"overhead"))
endfunction

function Func3119 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group028)==false and unit208!=null and IsDead(unit208)==false then
    call GroupAddUnit(group028,GetEnumUnit())
    call Func3118(unit206,GetEnumUnit(),unit207,integer498)
  endif
endfunction

function Func3120 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),393))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),394))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),395))
  local unit M1X=(LoadUnitHandle(HY,(ZAE),396))
  local unit M2X=(LoadUnitHandle(HY,(ZAE),397))
  local real ZWE=(LoadReal(HY,(ZAE),13))-12.5
  local real ZYE=(LoadReal(HY,(ZAE),433))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local unit M3X
  local group g
  local group IBI=(LoadGroupHandle(HY,(ZAE),187))
  local unit HKI=(LoadUnitHandle(HY,(ZAE),19))
  set ZYE=ZYE+1000/20.0
  call SaveReal(HY,(ZAE),433,((ZYE)*1.0))
  call SetUnitX(RCX,SafeX50(result+ZYE*Cos(ZWE*bj_DEGTORAD)))
  call SetUnitY(RCX,SafeY50(ZEE+ZYE*Sin(ZWE*bj_DEGTORAD)))
  set ZWE=ZWE+6.25
  call SetUnitX(M_X,SafeX50(result+ZYE*Cos(ZWE*bj_DEGTORAD)))
  call SetUnitY(M_X,SafeY50(ZEE+ZYE*Sin(ZWE*bj_DEGTORAD)))
  set ZWE=ZWE+6.25
  call SetUnitX(M0X,SafeX50(result+ZYE*Cos(ZWE*bj_DEGTORAD)))
  call SetUnitY(M0X,SafeY50(ZEE+ZYE*Sin(ZWE*bj_DEGTORAD)))
  set ZWE=ZWE+6.25
  call SetUnitX(M1X,SafeX50(result+ZYE*Cos(ZWE*bj_DEGTORAD)))
  call SetUnitY(M1X,SafeY50(ZEE+ZYE*Sin(ZWE*bj_DEGTORAD)))
  set ZWE=ZWE+6.25
  call SetUnitX(M2X,SafeX50(result+ZYE*Cos(ZWE*bj_DEGTORAD)))
  call SetUnitY(M2X,SafeY50(ZEE+ZYE*Sin(ZWE*bj_DEGTORAD)))
  set unit206=source
  set unit207=HKI
  set group028=IBI
  set integer498=QIE
  set M3X=RCX
  if M3X!=null and IsDead(M3X)==false then
    set result=GetUnitX(M3X)
    set ZEE=GetUnitY(M3X)
    set unit208=M3X
    set tt_unit1=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,result,ZEE,125,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func3119)
    call KillGroup(g)
  endif
  set M3X=M_X
  if M3X!=null and IsDead(M3X)==false then
    set result=GetUnitX(M3X)
    set ZEE=GetUnitY(M3X)
    set unit208=M3X
    set tt_unit1=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,result,ZEE,125,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func3119)
    call KillGroup(g)
  endif
  set M3X=M0X
  if M3X!=null and IsDead(M3X)==false then
    set result=GetUnitX(M3X)
    set ZEE=GetUnitY(M3X)
    set unit208=M3X
    set tt_unit1=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,result,ZEE,125,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func3119)
    call KillGroup(g)
  endif
  set M3X=M1X
  if M3X!=null and IsDead(M3X)==false then
    set result=GetUnitX(M3X)
    set ZEE=GetUnitY(M3X)
    set unit208=M3X
    set tt_unit1=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,result,ZEE,125,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func3119)
    call KillGroup(g)
  endif
  set M3X=M2X
  if M3X!=null and IsDead(M3X)==false then
    set result=GetUnitX(M3X)
    set ZEE=GetUnitY(M3X)
    set unit208=M3X
    set tt_unit1=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,result,ZEE,125,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func3119)
    call KillGroup(g)
  endif
  if GetTriggerEvalCount(RBX)>20 then
    call KillUnit(RCX)
    call KillUnit(M_X)
    call KillUnit(M0X)
    call KillUnit(M1X)
    call KillUnit(M2X)
    call KillUnit(HKI)
    call KillGroup(IBI)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  set M2X=null
  set HKI=null
  set M3X=null
  return false
endfunction

function Func3121 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetSpellTargetX()
  local real ZYE=GetSpellTargetY()
  local real ICX= AngleBetweenXY(result,ZEE,ZWE,ZYE)
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e02Z',result,ZEE,ICX-12.5)
  local unit M_X=CreateUnit(GetOwningPlayer(source),'e02Z',result,ZEE,ICX-6.25)
  local unit M0X=CreateUnit(GetOwningPlayer(source),'e02Z',result,ZEE,ICX)
  local unit M1X=CreateUnit(GetOwningPlayer(source),'e02Z',result,ZEE,ICX+6.25)
  local unit M2X=CreateUnit(GetOwningPlayer(source),'e02Z',result,ZEE,ICX+12.5)
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit M3X=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call UnitAddAbility(M3X,'A21P')
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),19,(M3X))
  call SaveUnitHandle(HY,(ZAE),393,(RCX))
  call SaveUnitHandle(HY,(ZAE),394,(M_X))
  call SaveUnitHandle(HY,(ZAE),395,(M0X))
  call SaveUnitHandle(HY,(ZAE),396,(M1X))
  call SaveUnitHandle(HY,(ZAE),397,(M2X))
  call SaveReal(HY,(ZAE),6,((result)*1.0))
  call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
  call SaveReal(HY,(ZAE),433,(0*1.0))
  call SaveReal(HY,(ZAE),13,((ICX)*1.0))
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call SaveInteger(HY,(ZAE),5,(GetUnitAbilityLevel(source,'A21M')))
  call TriggerRegisterTimerEvent(RBX,0.03,true)
  call TriggerAddCondition(RBX,Condition(function Func3120))
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  set M2X=null
  set RBX=null
  set M3X=null
endfunction

function Func3122 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(source,'A21L')
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  if GetUnitTypeId(source)=='N017' or GetUnitTypeId(source)=='N02B' or GetUnitTypeId(source)=='QTW2' or GetUnitTypeId(source)=='QTW3' then
    if(LoadInteger(HY,GetHandleId(source),4416)!=1)or whichPlayer!=GetOwningPlayer(source)then
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21N',true)
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21M',false)
      call SaveInteger(HY,(GetHandleId(source)),4416,1)
      call SaveInteger(HY,(GetHandleId(source)),4417,2)
      if whichPlayer!=GetOwningPlayer(source)then
        call SavePlayerHandle(HY,(ZAE),54,(GetOwningPlayer(source)))
      endif
    endif
    if GetUnitAbilityLevel(source,'A21N')!=QIE then
      call SetUnitAbilityLevel(source,'A21N',QIE)
    endif
  elseif GetUnitTypeId(source)=='N016' then
    if((LoadInteger(HY,(GetHandleId(source)),4417))!=1)or whichPlayer!=GetOwningPlayer(source)then
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21N',false)
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21M',true)
      call SaveInteger(HY,(GetHandleId(source)),4417,1)
      call SaveInteger(HY,(GetHandleId(source)),4416,2)
      if whichPlayer!=GetOwningPlayer(source)then
        call SavePlayerHandle(HY,(ZAE),54,(GetOwningPlayer(source)))
      endif
    endif
    if GetUnitAbilityLevel(source,'A21M')!=QIE then
      call SetUnitAbilityLevel(source,'A21M',QIE)
    endif
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3123 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call UnitAddAbility2(source,'A21N')
  call UnitAddAbility2(source,'A21M')
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21N',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21M',false)
  call SaveInteger(HY,(GetHandleId(source)),4416,2)
  call SaveInteger(HY,(GetHandleId(source)),4417,2)
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerAddCondition(RBX,Condition(function Func3122))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SavePlayerHandle(HY,(ZAE),54,(GetOwningPlayer(source)))
  set RBX=null
  set source=null
endfunction

function Func3124 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetUnitAbilityLevel(u,'A1N3')==0 then
  endif
  set t=null
  set u=null
endfunction

function Func3125 takes unit u,integer c returns nothing
  local timer t
  local integer h
  call UnitRemoveAbility(u,'A1N3')
  call UnitRemoveAbility(u,'A1N7')
  call UnitRemoveAbility(u,'B0CH')
  if c==0 then
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call TimerStart(t,0.28,false,function Func3124)
    call SaveUnitHandle(HY,h,0,u)
    set t=null
  endif
endfunction

function Func3126 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local integer c=(LoadInteger(HY,h,34))
  local integer XXO=LoadInteger(HY,h,6)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func3125(u,0)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call RemoveSavedHandle(HY,GetHandleId(u),'A1P9')
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    if GetAttacker()==u then
      set c=c+1
      call SaveInteger(HY,h,34,(c))
      if c>=XXO then
        call Func3125(u,1)
        call FlushChildHashtable(HY,(h))
        call CleanTrigger(t)
        call RemoveSavedHandle(HY,GetHandleId(u),'A1P9')
      endif
    endif
  else
    call Func3125(u,0)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call RemoveSavedHandle(HY,GetHandleId(u),'A1P9')
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3127 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A1P9')
  if HaveSavedHandle(HY,GetHandleId(u),'A1P9')then
    call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(u),'A1P9'))
  endif
  call UnitAddAbility2(u,'A1N3')
  call UnitAddAbility2(u,'A1N7')
  call TriggerRegisterTimerEvent(t,15,false)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerRegisterDeathEvent(t,u)
  call SaveTriggerHandle(HY,GetHandleId(u),'A1P9',t)
  call TriggerAddCondition(t,Condition(function Func3126))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveInteger(HY,h,34,0)
  call SaveInteger(HY,h,5,(QIE))
  call SaveInteger(HY,h,6,(QIE+2))
  call SaveReal(HY,h,442,(((TimerGetElapsed(GlobalTimer))+1)*1.0))
  set t=null
  set u=null
endfunction

function Func3128 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  call MakeUnitTransparent(u)
  call CleanTrigger(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set u=null
endfunction

function Func3129 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  call TriggerRegisterTimerEvent(t,4.,false)
  call TriggerRegisterDeathEvent(t,u)
  call SaveUnitHandle(HY,h,0,u)
  call TriggerAddCondition(t,Condition(function Func3128))
  call SetUnitVertexColor(u,255,20,20,255)
  call Func0862(u)
  call  DamageBlockActiveTracking(4.)
  call UnitAddAbilityTimedExF(u,'A38O',GetUnitAbilityLevel(u,GetSpellAbilityId()),4.,0)
  set t=null
  set u=null
endfunction

function Func3130 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local boolean FEX=GetTriggerEventId()==EVENT_WIDGET_DEATH
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A3NY' then
      set FEX=true
    endif
  elseif FEX==false then
    set boolean177=true
    call IssueImmediateOrderByIdExFunc(u,852100)
    set boolean177=false
  endif
  if FEX then
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set u=null
  set t=null
endfunction

function Func3131 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterDeathEvent(t,GetTriggerUnit())
  call TriggerAddCondition(t,Condition(function Func3130))
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  set t=null
endfunction

function Func3132 takes nothing returns nothing
  if GetIssuedOrderId()==852100 then
    if GetUnitAbilityLevel(GetTriggerUnit(),'A3NY')>0 then
      call DisableTrigger(GetTriggeringTrigger())
      call Func0862(GetTriggerUnit())
      call Func3131()
      call EnableTrigger(GetTriggeringTrigger())
    endif
  endif
endfunction

function Func3133 takes nothing returns nothing
  call AddToPurgeList('B02G','PRGE')
  set tt_int1=0
  set code002=function Func3132
  call ExecuteFunc("Func4812")
  call PreloadAbility('A1N3')
  call AddWrapper("Func4622",3)
endfunction

function Func3134 takes unit OVA,real dmg returns nothing
  local real IIX=dmg*Func1431(OVA)
  if GetUnitAbilityLevel(OVA,'B07O')>0 then
    set IIX=IIX+dmg*0.15
  endif
  if GetUnitAbilityLevel(OVA,'BVA4')>0 then
    set IIX=IIX+dmg*0.3
  elseif GetUnitAbilityLevel(OVA,'BVA3')>0 then
    set IIX=IIX+dmg*0.25
  elseif GetUnitAbilityLevel(OVA,'BVA2')>0 then
    set IIX=IIX+dmg*0.2
  elseif GetUnitAbilityLevel(OVA,'BVA1')>0 then
    set IIX=IIX+dmg*0.15
  endif
  if IIX>0 then
    call SetWidgetLife(OVA,GetWidgetLife(OVA)+IIX)
  endif
endfunction

function Func3135 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit FKX
  local unit OVA
  local integer QIE
  local real dmg
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    set OVA=LoadUnitHandle(HY,h,0)
    set FKX=LoadUnitHandle(HY,h,1)
    call DestroyEffect(LoadEffectHandle(HY,h,10))
    call UnitRemoveAbility(FKX,'A337')
    call UnitRemoveAbility(FKX,'B02N')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call RemoveSavedHandle(HY,GetHandleId(FKX),'FRSW'+GetPlayerId(GetOwningPlayer(OVA)))
    call RemoveSavedBoolean(HY,GetHandleId(FKX),'FRSW'+GetPlayerId(GetOwningPlayer(OVA)))
  else
    set OVA=LoadUnitHandle(HY,h,0)
    set FKX=LoadUnitHandle(HY,h,1)
    if LoadBoolean(HY,h,2)then
      if GetUnitAbilityLevel(OVA,'A38O')>0 then
        set dmg=LoadReal(HY,h,100)*(1.25+0.25*GetUnitAbilityLevel(OVA,'A38O'))
      else
        set dmg=LoadReal(HY,h,100)
      endif
      call DamageTarget(OVA,FKX,2,dmg)
      if IsUnitIllusion(FKX)==false then
        call Func3134(OVA,dmg)
      endif
      call SaveBoolean(HY,h,2,false)
    elseif TimerGetElapsed(GlobalTimer)>LoadReal(HY,h,0)then
      call UnitRemoveAbility(FKX,'A337')
      call UnitRemoveAbility(FKX,'B02N')
      call DestroyEffect(LoadEffectHandle(HY,h,10))
      call FlushChildHashtable(HY,h)
      call CleanTrigger(t)
      call RemoveSavedHandle(HY,GetHandleId(FKX),'FRSW'+GetPlayerId(GetOwningPlayer(OVA)))
      call RemoveSavedBoolean(HY,GetHandleId(FKX),'FRSW'+GetPlayerId(GetOwningPlayer(OVA)))
    endif
  endif
  set t=null
  set OVA=null
  set FKX=null
endfunction

function Func3136 takes unit OVA,unit SGE returns nothing
  local trigger t
  local integer h=0
  local integer ht=GetHandleId(SGE)
  local integer WVE=GetPlayerId(GetOwningPlayer(OVA))
  local integer QIE=GetUnitAbilityLevel(OVA,'A2X2')
  if LoadBoolean(HY,ht,'FRSW'+WVE)==false then
    if GetUnitAbilityLevel(OVA,'A36D')==0 then
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call TriggerRegisterDeathEvent(t,SGE)
      call TriggerRegisterTimerEvent(t,1,true)
      call TriggerAddCondition(t,Condition(function Func3135))
      call SaveBoolean(HY,ht,'FRSW'+WVE,true)
      call SaveTriggerHandle(HY,ht,'FRSW'+WVE,t)
      call SaveUnitHandle(HY,h,1,SGE)
      call SaveEffectHandle(HY,h,10,AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarTarget.mdl",SGE,"overhead"))
      call UnitAddAbility2(SGE,'A337')
    endif
  else
    set t=LoadTriggerHandle(HY,ht,'FRSW'+WVE)
    set h=GetHandleId(t)
  endif
  if h!=0 then
    call SaveBoolean(HY,h,2,true)
    call TriggerRegisterTimerEvent(t,0,false)
    call SaveInteger(HY,h,0,QIE)
    call SaveUnitHandle(HY,h,0,OVA)
    call SaveReal(HY,h,100,LoadReal(HY,h,100)+10+5*QIE)
    if SGE==Roshan then
      call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+6)
    else
      call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+20)
    endif
  endif
  set t=null
endfunction

function Func3137 takes unit source,real result,real ZEE,integer ZAE returns nothing
  call SetUnitPosition(source,result,ZEE)
  call IssueImmediateOrderByIdExFunc(source,852588)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdl",result,ZEE))
  set source=null
endfunction

function Func3138 takes nothing returns boolean
  if(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and IsUnitInGroup(GetFilterUnit(),group029)==false then
    call GroupAddUnit(group029,GetFilterUnit())
    call DamageTarget(unit209,GetFilterUnit(),7,real080)
  endif
  return false
endfunction

function Func3139 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  local real result=(LoadReal(HY,(ZAE),13))
  local real ZEE=(LoadReal(HY,(ZAE),6))
  local real ZWE=(LoadReal(HY,(ZAE),7))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local group g=(LoadGroupHandle(HY,(ZAE),133))
  local group IBI
  if GetTriggerEvalCount(RBX)>10 then
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set group029=g
    set unit209=source
    set real080=QIE*20+10
    set tt_unit1=source
    set IBI=GetAvailableGroup()
    call GroupEnumUnitsInRange(IBI,ZEE,ZWE,325,Condition(function Func3138))
    call KillGroup(IBI)
    set IBI=null
    call Func3137(RCX,ZEE,ZWE,QIE)
    if ModuloInteger(GetTriggerEvalCount(RBX),2)==0 then
      call KillUnit(CreateUnit(GetOwningPlayer(source),'e02A',ZEE,ZWE,0))
    endif
    set ZEE=SafeX50(ZEE+200*Cos(result*bj_DEGTORAD))
    set ZWE=SafeY50(ZWE+200*Sin(result*bj_DEGTORAD))
    call SaveReal(HY,(ZAE),6,((ZEE)*1.0))
    call SaveReal(HY,(ZAE),7,((ZWE)*1.0))
  endif
  set RBX=null
  set source=null
  set RCX=null
  set g=null
  return false
endfunction

function Func3140 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetSpellTargetX()
  local real ZYE=GetSpellTargetY()
  local real ICX= AngleBetweenXY(result,ZEE,ZWE,ZYE)
  local integer QIE=GetUnitAbilityLevel(source,'A17O')
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call UnitAddAbility2(RCX,'A0AP')
  call SetUnitAbilityLevel(RCX,'A0AP',QIE)
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),19,(RCX))
  call SaveInteger(HY,(ZAE),5,(QIE))
  call SaveReal(HY,(ZAE),6,((result)*1.0))
  call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
  call SaveReal(HY,(ZAE),13,((ICX)*1.0))
  call SaveGroupHandle(HY,(ZAE),133,(GetAvailableGroup()))
  call TriggerRegisterTimerEvent(RBX,0.1,true)
  call TriggerAddCondition(RBX,Condition(function Func3139))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func3141 takes nothing returns nothing
  call AddToPurgeList('B02W','PRGE')
endfunction

function Func3142 takes nothing returns nothing
  if HaveSavedHandle(HY,GetHandleId(tt_unit1),'A1AW')then
    call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(tt_unit1),'A1AW'))
  endif
endfunction

function Func3143 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit HDE=LoadUnitHandle(HY,h,0)
  local unit TWX=LoadUnitHandle(HY,h,1)
  if GetTriggerEventId()==EVENT_UNIT_HERO_REVIVE_FINISH or IsDead(TWX)or IsDead(HDE)==false or IsUnitHexed(TWX)then
    call KillUnit(TWX)
    call Func0477(TWX,8)
    call RemoveSavedHandle(HY,GetHandleId(HDE),'A1AW')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
  set HDE=null
  set TWX=null
endfunction

function Func3144 takes unit HDE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit TWX=Func2347(HDE,2)
  call UnitCanUseInventoryModify(TWX,1)
  call UnitAddAbility2(TWX,'A3RZ')
  call TriggerRegisterUnitEvent(t,HDE,EVENT_UNIT_HERO_REVIVE_FINISH)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call SaveUnitHandle(HY,h,0,HDE)
  call SaveUnitHandle(HY,h,1,TWX)
  call SelectUnitAddForPlayer(TWX,GetOwningPlayer(TWX))
  call TriggerAddCondition(t,Condition(function Func3143))
  call SaveTriggerHandle(HY,GetHandleId(HDE),'A1AW',t)
  set TWX=null
  set t=null
endfunction

function Func3145 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  if GetUnitAbilityLevel(u,'A1AW')>0 and GetUnitAbilityLevel(u,'A3DK')==0 and LoadBoolean(HY,GetHandleId(u),'HBRD')==false then
    call Func3144(u)
  endif
  set u=null
endfunction

function Func3146 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local real result=(LoadReal(HY,(ZAE),64))
  local real ZEE=(LoadReal(HY,(ZAE),66))
  local real ZWE=(LoadReal(HY,(ZAE),65))
  local real ZYE=(LoadReal(HY,(ZAE),67))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",source,"origin"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",RCX,"origin"))
  call SetUnitPosition(source,ZEE,ZYE)
  call AddTimedKeyToAgent(RCX,4407,1)
  call SetUnitPosition(RCX,result,ZWE)
  if IsUnitInRegion(region008,RCX)or Func0429(GetUnitX(RCX),GetUnitY(RCX))==false then
    call Func0776(RCX)
  endif
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3147 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,2)
  local unit u2=LoadUnitHandle(HY,h,17)
  call SetUnitPosition(u,GetUnitX(u),GetUnitY(u))
  call SetUnitPosition(u2,GetUnitX(u2),GetUnitY(u2))
  call DestroyTrigger(t)
  call FlushChildHashtable(HY,h)
  set u2=null
  set u=null
  set t=null
endfunction

function Func3148 takes real cx,real cy,real tx,real ty returns nothing
  call Func0702("SPLK",cx,cy,tx,ty,0.5,0,1,1,0.3)
  call KillTrees(cx,cy,300)
  call KillTrees(tx,ty,300)
endfunction

function Func3149 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real cx=GetUnitX(SKE)
  local real cy=GetUnitY(SKE)
  local real tx=GetUnitX(SGE)
  local real ty=GetUnitY(SGE)
  local trigger t
  local integer h
  local boolean K9X=IsUnitAlly(SKE,GetOwningPlayer(SGE))
  local boolean OGA=GetUnitAbilityLevel(SGE,'A3E9')==1
  local boolean OHA=IsBlocked(GetSpellTargetUnit())
  if K9X==false and OGA and OHA==false then
    if IsBlocked(SKE)then
      call RemoveLinkenBuff(SKE)
    else
      call LotusOrbFX(SGE)
      call Func3148(cx,cy,tx,ty)
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call SaveUnitHandle(HY,h,2,(SKE))
      call SaveUnitHandle(HY,h,17,(SGE))
      call TriggerRegisterTimerEvent(t,0,false)
      call TriggerAddCondition(t,Condition(function Func3147))
      set t=null
      set SKE=null
      set SGE=null
      return
    endif
  endif
  if K9X or OHA==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,2,(SKE))
    call SaveUnitHandle(HY,h,17,(SGE))
    call SaveReal(HY,h,64,((cx)*1.0))
    call SaveReal(HY,h,66,((tx)*1.0))
    call SaveReal(HY,h,65,((cy)*1.0))
    call SaveReal(HY,h,67,((ty)*1.0))
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerAddCondition(t,Condition(function Func3146))
    call Func3148(cx,cy,tx,ty)
  endif
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3150 takes nothing returns nothing
  if(IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY))then
    call Func0658('n03B')
  else
    call Func2329()
  endif
endfunction

function Func3151 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE
  local unit SGE
  local integer QIE
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==LoadUnitHandle(HY,h,2)then
      set SKE=LoadUnitHandle(HY,h,0)
      set SGE=LoadUnitHandle(HY,h,1)
      if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false then
        call SaveUnitHandle(TempHash,'A3E9',0,SGE)
        call SaveUnitHandle(TempHash,'A3E9',1,SKE)
        call SaveInteger(TempHash,'A3E9',0,LoadInteger(HY,h,0))
        call ExecuteFunc("Func3153")
      endif
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
      set SKE=null
      set SGE=null
    endif
  else
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  endif
  set t=null
endfunction

function Func3152 takes unit SKE,unit SGE,integer QIE,boolean UII returns nothing
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),GetUnitFacing(SKE))
  local trigger t
  local integer h
  if UII==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterDeathEvent(t,d)
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
    call TriggerAddCondition(t,Condition(function Func3151))
    call SaveUnitHandle(HY,h,0,SKE)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveUnitHandle(HY,h,2,d)
    call SaveInteger(HY,h,0,QIE)
    set t=null
  endif
  call UnitAddAbility(d,'A3A1')
  call SetUnitAbilityLevel(d,'A3A1',QIE)
  call Func1430(d,SGE,852095)
  set d=null
endfunction

function Func3153 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  call Func3152(SKE,SGE,QIE,true)
  set SKE=null
  set SGE=null
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3154 takes nothing returns nothing
  call Func3152(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A02A'),false)
endfunction

function Func3155 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",GetTriggerUnit(),"weapon"))
endfunction

function Func3156 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  if IsDead(source)==false or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call UnitRemoveAbility(RCX,'A2WV')
    call UnitRemoveAbility(RCX,'A2WY')
    call UnitRemoveAbility(RCX,'A2WW')
    call UnitRemoveAbility(RCX,'A2WX')
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3157 takes nothing returns boolean
  local trigger t
  local integer h
  local unit vs=GetTriggerUnit()
  local unit E3X=GetKillingUnit()
  local integer QIE=GetUnitAbilityLevel(vs,'ACac')+GetUnitAbilityLevel(vs,'A36N')
  set E3X=Func1317(E3X)
  if IsUnitType(E3X,UNIT_TYPE_HERO)then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerRegisterDeathEvent(t,E3X)
    call TriggerAddCondition(t,Condition(function Func3156))
    call SaveUnitHandle(HY,h,2,(vs))
    call SaveUnitHandle(HY,h,17,(E3X))
    if QIE==1 then
      call UnitAddAbility2(E3X,'A2WV')
      call SetPlayerAbilityAvailable(GetOwningPlayer(E3X),'A2WV',false)
      call UnitMakeAbilityPermanent(E3X,true,'A2WU')
    elseif QIE==2 then
      call UnitAddAbility2(E3X,'A2WY')
      call SetPlayerAbilityAvailable(GetOwningPlayer(E3X),'A2WY',false)
      call UnitMakeAbilityPermanent(E3X,true,'A2WT')
    elseif QIE==3 then
      call UnitAddAbility2(E3X,'A2WW')
      call SetPlayerAbilityAvailable(GetOwningPlayer(E3X),'A2WW',false)
      call UnitMakeAbilityPermanent(E3X,true,'A2WS')
    elseif QIE==4 then
      call UnitAddAbility2(E3X,'A2WX')
      call SetPlayerAbilityAvailable(GetOwningPlayer(E3X),'A2WX',false)
      call UnitMakeAbilityPermanent(E3X,true,'A2WR')
    endif
  endif
  set t=null
  set vs=null
  set E3X=null
  return false
endfunction

function Func3158 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
  call TriggerAddCondition(RBX,Condition(function Func3157))
  set source=null
  set RBX=null
endfunction

function Func3159 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='e020' and IsDead(GetFilterUnit())==false
endfunction

function Func3160 takes unit EQA returns nothing
  local unit E9O=udg_Hero[GetPlayerId(GetOwningPlayer(EQA))]
  local integer h=GetHandleId(E9O)
  local integer c=LoadInteger(HY,h,348)
  local group g=GetAvailableGroup()
  local unit u
  local unit GUI=null
  call SaveReal(HY,GetHandleId(EQA),786,TimerGetElapsed(GlobalTimer))
  call SelectSummons(EQA)
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(EQA),Condition(function Func3159))
  set c=0
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if GUI==null or LoadReal(HY,GetHandleId(GUI),786)>LoadReal(HY,GetHandleId(u),786)then
      set GUI=u
    endif
    set c=c+1
    call GroupRemoveUnit(g,u)
  endloop
  if c>GetUnitAbilityLevel(E9O,'A0RP')*3+2 then
    call KillUnit(GUI)
  endif
  set GUI=null
  set E9O=null
endfunction

function Func3161 takes nothing returns nothing
  local unit EQA=GetTriggerUnit()
  local real cx=GetUnitX(EQA)
  local real cy=GetUnitY(EQA)
  local group g=GetAvailableGroup()
  local real OTA=LoadReal(HY,GetHandleId(EQA),786)
  local real OUA=RMinIF(TimerGetElapsed(GlobalTimer)-OTA,4.)
  local integer QIE=1
  local integer F_I=0
  local integer OWA=0
  local unit u=null
  local unit d=null
  local real F2I=.3+OUA/10.*0.75
  local integer a
  call RemoveSavedReal(HY,GetHandleId(EQA),786)
  set F_I='A3H1'
  set a=GetAbilityDataDefAddr(F_I)
  if a<1 then
    call UnitAddAbility(SentFountain,F_I)
    call UnitRemoveAbility(SentFountain,F_I)
    set a=GetAbilityDataDefAddr(F_I)
  endif
  if a>0 then
    set Memory[(a+0x78)/4]=SetRealIntoMemory(F2I)
  endif
  call echo(R2S(F2I))
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",cx,cy))
  set tt_unit1=EQA
  call GroupEnumUnitsInRange(g,cx,cy,400,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
    call UnitAddAbility(d,F_I)
    call IssueTargetOrder(d,"slow",u)
    call UnitRemoveAbility(d,F_I)
    call Func1032(EQA,u)
    set d=null
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  call KillUnit(EQA)
  call SetUnitAnimationByIndex(EQA,3)
  set g=null
  set EQA=null
endfunction

function Func3162 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit SKE=GetTriggerUnit()
  set tt_player1=GetOwningPlayer(SKE)
  call GroupEnumUnitsOfPlayer(g,tt_player1,Condition(function Func3159))
  set tt_unit1=FirstOfGroup(g)
  set real023=GetUnitX(SKE)
  set real024=GetUnitY(SKE)
  call IssueImmediateOrderByIdExFunc(GetClosestOfGroup(g,real023,real024),852556)
  call KillGroup(g)
  set SKE=null
endfunction

function Func3163 takes nothing returns nothing
  call UnitAddAbility2(GetTriggerUnit(),'A2XJ')
  call Func3160(CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e020',GetSpellTargetX(),GetSpellTargetY(),0))
endfunction

function Func3164 takes nothing returns nothing
  call UnitAddAbility2(GetTriggerUnit(),'A2XJ')
endfunction

function Func3165 takes nothing returns nothing
  call AddToPurgeList('B08M','PRGE')
  call AddToPurgeList('A0RC','PRGE')
  call AddWrapper("Func4631",-2)
  call AddWrapper("Func4644",1)
endfunction

function Func3166 takes unit source,real result,real ZEE,real ZWE,real ZYE,real ICX returns boolean
  local real N1X=ZWE-result
  local real N2X=ZYE-ZEE
  local real N3X=GetUnitX(source)-result
  local real N4X=GetUnitY(source)-ZEE
  return ICX>=RAbsBJ(N1X*N4X-N2X*N3X)/RAbsBJ(Pow(Pow(N1X,2)+Pow(N2X,2),0.5))
endfunction

function Func3167 takes unit SKE,unit SGE,real result,real ZEE,real ZWE returns nothing
  local integer ZAE=GetUnitAbilityLevel(SKE,'A0RO')
  local real ZYE=(300+20*ZAE)*2
  local real ICX=120
  local unit M_X
  local real N1X
  local real N2X
  local real N3X
  local real N4X
  local real N5X
  local group g=GetAvailableGroup()
  local boolean ZSE
  local boolean ZTE
  set N1X=GetUnitX(SGE)-GetUnitX(SKE)
  set N2X=GetUnitY(SGE)-GetUnitY(SKE)
  set N3X=Pow(N1X*N1X+N2X*N2X,0.5)
  set N4X=GetUnitX(SGE)+(ZYE/2-25)*(N1X/N3X)
  set N5X=GetUnitY(SGE)+(ZYE/2-25)*(N2X/N3X)
  set tt_unit1=SKE
  set real023=result
  call GroupEnumUnitsInRange(g,N4X,N5X,Pow(Pow(ZYE/2,2)+Pow(ICX/2,2),0.5),Condition(function Func0816))
  call GroupRemoveUnit(g,SGE)
  set M_X=FirstOfGroup(g)
  loop
    exitwhen M_X==null
    set ZSE=Func3166(M_X,GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE),ICX/2)
    set ZTE=Func3166(M_X,N4X,N5X,N4X-100,N5X+100*N4X*Pow(N5X,-1),0.01+ZYE/2)
    if ZSE and ZTE then
      call DamageTarget(SKE,M_X,10,result)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",M_X,"chest"))
    endif
    call GroupRemoveUnit(g,M_X)
    set M_X=FirstOfGroup(g)
  endloop
  call KillGroup(g)
  set M_X=null
  set g=null
endfunction

function Func3168 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,h,30))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==SKE and IsFakeDamage==0 and GetEventDamage()>1 and IsUnitIllusion(SGE)==false then
      call DisableTrigger(t)
      call Func3167(SKE,SGE,GetEventDamage(),(LoadReal(HY,h,349)),(LoadReal(HY,h,350)))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call RemoveSavedHandle(HY,GetHandleId(SKE),'A0RO')
    endif
  else
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call RemoveSavedHandle(HY,GetHandleId(SKE),'A0RO')
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3169 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local unit source=GetTriggerUnit()
  local unit RCX=GetAttacker()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(RBX,2.0,false)
  call TriggerAddCondition(RBX,Condition(function Func3168))
  call SaveUnitHandle(HY,(ZAE),30,(source))
  call SaveUnitHandle(HY,(ZAE),2,(RCX))
  call SaveReal(HY,(ZAE),349,((GetUnitX(RCX))*1.0))
  call SaveReal(HY,(ZAE),350,((GetUnitY(RCX))*1.0))
  call SaveTriggerHandle(HY,GetHandleId(RCX),'A0RO',RBX)
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func3170 takes unit WXE,unit SGE returns nothing
  local integer lvl=GetUnitAbilityLevel(WXE,'A0RO')
  local trigger t
  if lvl>0 and IsUnitType(SGE,UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(SGE)==false and GetUnitAbilityLevel(WXE,'A36D')==0 then
    if HaveSavedHandle(HY,GetHandleId(WXE),'A0RO')then
      set t=LoadTriggerHandle(HY,GetHandleId(WXE),'A0RO')
      call FlushChildHashtable(HY,GetHandleId(t))
      call DisableTrigger(t)
      call DestroyTrigger(t)
      call RemoveSavedHandle(HY,GetHandleId(WXE),'A0RO')
      set t=null
    endif
    call Func3169()
  endif
endfunction

function Func3171 takes nothing returns nothing
  local trigger RBX
  if GetUnitAbilityLevel(GetTriggerUnit(),'A0RO')==1 then
  endif
  call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),'Repb',GetUnitAbilityLevel(GetTriggerUnit(),'A0RO'))
  set RBX=null
endfunction

function Func3172 takes unit u returns nothing
  local integer c=LoadInteger(HY,GetHandleId(u),351)
  if c>1 then
    call SaveInteger(HY,GetHandleId(u),351,c-1)
  else
    call SaveInteger(HY,GetHandleId(u),351,0)
    call UnitRemoveAbility(u,'A0RF')
    call UnitRemoveAbility(u,'A0RM')
    call UnitRemoveAbility(u,'B08I')
    call UnitRemoveAbility(u,'A360')
  endif
endfunction

function Func3173 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer hu=LoadInteger(HY,h,0)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,hu,352)
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Lanaya_RefBlock0"+I2S(GetRandomInt(1,3))+".mdx",u,"origin"))
  if c>1 then
    call SaveInteger(HY,hu,352,c-1)
    call UnitRemoveAbility(u,integers024[c])
    call UnitAddAbility2(u,integers024[c-1])
  else
    call UnitRemoveAbility(u,integers024[1])
    call SaveInteger(HY,hu,352,0)
    call DestroyEffect(LoadEffectHandle(HY,hu,352))
    call UnitRemoveAbility(u,'A0RN')
    call UnitRemoveAbility(u,'B08J')
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  call RemoveSavedHandle(HY,hu,'A0RN')
  set t=null
  set u=null
endfunction

function Func3174 takes unit u,real dmg returns nothing
  local timer t
  local integer h
  if HaveSavedHandle(HY,GetHandleId(u),'A0RN')==false then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call TimerStart(t,0,false,function Func3173)
    call SaveInteger(HY,h,0,GetHandleId(u))
    call SaveUnitHandle(HY,h,0,u)
    call SaveTimerHandle(HY,GetHandleId(u),'A0RN',t)
    set t=null
  endif
endfunction

function Func3175 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,14)
  local integer hu=GetHandleId(u)
  if LoadInteger(HY,h,0)<=1 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call RemoveSavedHandle(HY,hu,'A0RN'-1)
    call SaveInteger(HY,hu,352,0)
    call SaveInteger(HY,hu,351,0)
    call UnitRemoveAbility(u,'A0RF')
    call UnitRemoveAbility(u,'A360')
    call UnitRemoveAbility(u,'A0RM')
    call UnitRemoveAbility(u,'A0RN')
    call UnitRemoveAbility(u,'B08J')
    call UnitRemoveAbility(u,'B08I')
    call UnitRemoveAbility(u,integers024[1])
    call UnitRemoveAbility(u,integers024[2])
    call UnitRemoveAbility(u,integers024[3])
    call UnitRemoveAbility(u,integers024[4])
    call UnitRemoveAbility(u,integers024[5])
    call UnitRemoveAbility(u,integers024[6])
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  else
    call SaveInteger(HY,h,0,LoadInteger(HY,h,0)-1)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3176 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  local integer h
  local trigger t
  local integer QIE=GetUnitAbilityLevel(u,'A1EA')
  if HaveSavedHandle(HY,hu,'A0RN'-1)then
    set t=LoadTriggerHandle(HY,hu,'A0RN'-1)
    set h=GetHandleId(t)
    call UnitRemoveAbility(u,integers024[1])
    call UnitRemoveAbility(u,integers024[2])
    call UnitRemoveAbility(u,integers024[3])
    call UnitRemoveAbility(u,integers024[4])
    call UnitRemoveAbility(u,integers024[5])
    call UnitRemoveAbility(u,integers024[6])
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerAddCondition(t,Condition(function Func3175))
    call SaveUnitHandle(HY,h,14,(u))
    call SaveTriggerHandle(HY,hu,'A0RN'-1,t)
    call TriggerRegisterDeathEvent(t,u)
  endif
  call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
  call TriggerRegisterTimerEvent(t,17,false)
  call PlaySoundAtPos(sound027,GetUnitX(u),GetUnitY(u))
  call UnitAddAbility2(u,'A0RM')
  call UnitAddAbility2(u,'A360')
  call SaveInteger(HY,hu,351,QIE+2)
  call  DamageBlockActiveTracking(17)
  call UnitAddAbility2(u,'A0RN')
  call SaveInteger(HY,hu,352,QIE+2)
  call UnitAddAbility2(u,integers024[QIE+2])
  call UnitAddAbility2(u,'A0RF')
  call SetUnitAbilityLevel(u,'A0RF',QIE)
  set t=null
  set u=null
endfunction

function Func3177 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  call UnitRemoveAbility((LoadUnitHandle(HY,(GetHandleId(t)),14)),'A0RC')
  call FlushChildHashtable(HY,(GetHandleId(t)))
  call CleanTrigger(t)
  set t=null
  return false
endfunction

function Func3178 takes unit u,unit t returns nothing
  local integer i=GetUnitAbilityLevel(u,'A0RV')
  call UnitAddAbilityTimedExF(t,'A0RC',i,10,0)
  call DamageTarget(u,t,2,50*i)
  call TextTagOnUnit(I2S(50*i),1,t,0.03,255,0,0,255,Func0590(t)or PlayerObserver)
endfunction

function Func3179 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(t)
  local unit source=LoadUnitHandle(HY,ZAE,30)
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  local trigger R4I=(LoadTriggerHandle(HY,(ZAE),353))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==RCX then
      call DisableTrigger(t)
      call FlushChildHashtable(HY,(GetHandleId(R4I)))
      call CleanTrigger(R4I)
      call Func3178(RCX,source)
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(t)
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(t)
  endif
  set t=null
  set source=null
  set RCX=null
  set R4I=null
  return false
endfunction

function Func3180 takes unit u,unit u2,trigger t returns nothing
  local trigger tt=CreateTrigger()
  local integer h=GetHandleId(tt)
  call TriggerRegisterUnitEvent(tt,u2,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(tt,2.0,false)
  call TriggerAddCondition(tt,Condition(function Func3179))
  call SaveUnitHandle(HY,h,30,u2)
  call SaveUnitHandle(HY,h,2,(u))
  call SaveTriggerHandle(HY,h,353,(t))
  set tt=null
endfunction

function Func3181 takes unit u returns boolean
  local group g=GetAvailableGroup()
  local unit u2
  local boolean b=false
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),Func0159(u)+50.,Condition(function Func0814))
  set u2=GetClosestOfGroup(g,GetUnitX(u),GetUnitY(u))
  if u2!=null then
    call Func0656(u)
    call IssueTargetOrderById(u,851983,u2)
    set b=true
  endif
  call KillGroup(g)
  return b
endfunction

function Func3182 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local boolean ROA=GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED
  local boolean b=not ROA and GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED
  local boolean RTX=not b and not ROA and(GetTriggerEventId()!=EVENT_WIDGET_DEATH)
  local boolean attackground=RTX and GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER
  local boolean FEX=false
  local integer id
  local timer tt=LoadTimerHandle(HY,h,10)
  if(RTX==false and b==false)or(b and GetAttacker()==u and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(u)))then
    if b then
      call Func3180(u,GetTriggerUnit(),t)
    endif
    set FEX=true
  elseif RTX then
    set id=GetIssuedOrderId()
    if tt!=null and LoadBoolean(HY,h,10)then
      if id!=851973 and id!=851993 and id!=851972 and id!=851983 then
        set FEX=true
      else
        if GetUnitX(u)==LoadReal(HY,h,6)and GetUnitY(u)==LoadReal(HY,h,7)then
          call PauseTimer(tt)
          call SaveBoolean(HY,h,10,false)
        else
          set FEX=true
        endif
      endif
    elseif id!=851973 and id!=851993 then
      if(id==851971 or id==851983)and GetOrderTargetUnit()!=null and IsUnitEnemy(GetOrderTargetUnit(),GetTriggerPlayer())then
        call SaveReal(HY,h,6,GetUnitX(u))
        call SaveReal(HY,h,7,GetUnitY(u))
        if tt==null then
          set tt=CreateTimer()
          call SaveTimerHandle(HY,h,10,tt)
          call TriggerRegisterTimerExpireEvent(t,tt)
        endif
        call TimerStart(tt,0.1,false,null)
        call SaveBoolean(HY,h,10,true)
      elseif id==851983 and GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
        call Func3181(GetTriggerUnit())
      else
        set FEX=true
      endif
    endif
  endif
  if FEX then
    call UnitRemoveAbility(u,'B08K')
    if tt!=null then
      call PauseTimer(tt)
      call DestroyTimer(tt)
    endif
    call CleanTrigger(t)
  endif
  set tt=null
  set t=null
  set u=null
  return false
endfunction

function Func3183 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call DestroyEffect(AddSpecialEffectTarget("effects\\PurpleAura.mdx",u,"origin"))
  call PlaySoundAtPos(sound019,GetUnitX(u),GetUnitY(u))
  call IssueImmediateOrderByIdExFunc(u,851993)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerAddCondition(t,Condition(function Func3182))
  call SaveUnitHandle(HY,h,14,(u))
  call SaveReal(HY,h,6,((GetUnitX(u))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(u))*1.0))
  call SetUnitAnimation(u,"stand ready")
  set t=null
  set u=null
endfunction

function Func3184 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),247))
  call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",GetUnitX(source),GetUnitY(source)))
  if GetTriggerEvalCount(RBX)>10*(2+0.75*QIE)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call UnitRemoveAbility(source,ZBE)
    call UnitRemoveAbility(source,'B09W')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3185 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(u,'A14I')
  local integer id
  if QIE==1 then
    set id='A135'
  elseif QIE==2 then
    set id='A12O'
  elseif QIE==3 then
    set id='A134'
  elseif QIE==4 then
    set id='A139'
  endif
  call EvasionSourceActivate(7,7)
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),id,false)
  call UnitAddAbilityTimedExF(u,id,1,2+QIE,'B09W')
  call UnitMakeAbilityPermanent(u,true,'ACes')
  call UnitMakeAbilityPermanent(u,true,'A12M')
  call UnitMakeAbilityPermanent(u,true,'A133')
  call UnitMakeAbilityPermanent(u,true,'A132')
  call UnitMakeAbilityPermanent(u,true,'A131')
  call UnitMakeAbilityPermanent(u,true,'A13A')
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3184))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveInteger(HY,h,5,(QIE))
  call SaveInteger(HY,h,247,(id))
  set u=null
  set t=null
endfunction

function Func3186 takes nothing returns nothing
  local destructable d=GetEnumDestructable()
  local real a=Atan2(GetDestructableY(d)-GetUnitY(tt_unit1),GetDestructableX(d)-GetUnitX(tt_unit1))
  local real na=RAbsBJ((real023-a)*bj_RADTODEG)
  if(IsValidTree(d)or GetDestructableTypeId(d)=='B005')and GetDestructableLife(d)>1 and na<real081 and na<(real082)then
    set real081=na
    set destructable001=d
  endif
  set d=null
endfunction

function Func3187 takes unit NCX,unit SGE,real a returns destructable
  local real x=GetUnitX(NCX)
  local real y=GetUnitY(NCX)
  local rect r=Rect(x-real083,y-real083,x+real083,y+real083)
  set real081=9999
  set tt_unit1=NCX
  set destructable001=null
  call EnumDestructablesInRect(r,Condition(function ReturnTrue),function Func3186)
  call RemoveRect(r)
  set r=null
  return destructable001
endfunction

function Func3188 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local real result=Atan2(GetUnitY(source)-GetUnitY(tt_unit1),GetUnitX(source)-GetUnitX(tt_unit1))
  local real ZEE=RAbsBJ((real023-result)*bj_RADTODEG)
  if ZEE<real081 and ZEE<real082 and source!=tt_unit3 then
    set real081=ZEE
    set unit210=source
  endif
  set source=null
endfunction

function Func3189 takes unit source,unit RCX,real result returns unit
  local group g=GetAvailableGroup()
  set unit210=null
  set real081=9999
  set tt_unit1=source
  set real023=Atan2(GetUnitY(RCX)-real085,GetUnitX(RCX)-real084)
  set tt_unit3=RCX
  call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),600.,Condition(function Func0821))
  call ForGroup(g,function Func3188)
  call KillGroup(g)
  set g=null
  return unit210
endfunction

function Func3190 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit NCX=(LoadUnitHandle(HY,h,45))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real a=(LoadReal(HY,h,248))
  local real na=Atan2(GetUnitY(SGE)-GetUnitY(NCX),GetUnitX(SGE)-GetUnitX(NCX))
  local integer QIE=(LoadInteger(HY,h,5))
  local real nx=GetUnitX(NCX)+54.5*Cos(na)
  local real ny=GetUnitY(NCX)+54.5*Sin(na)
  local unit RDA
  local destructable RFA
  local lightning JYI
  local unit RGA
  local boolean RHA=(LoadBoolean(HY,h,249))
  local unit SKE=LoadUnitHandle(HY,h,0)
  local real D1E
  if LoadInteger(HY,GetHandleId(SGE),4422)==1 or(GetUnitY(SGE)==0. and GetUnitX(SGE)==0.)then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(NCX)
  else
    call SetUnitX(NCX,nx)
    call SetUnitY(NCX,ny)
    call SetUnitFacing(NCX,na*bj_RADTODEG)
    if DistanceBetweenXY(nx,ny,GetUnitX(SGE),GetUnitY(SGE))<=50 then
      set real084=(LoadReal(HY,h,6))
      set real085=(LoadReal(HY,h,7))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      if SGE!=Roshan and RHA then
        if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false and LoadBoolean(HY,h,0)==false then
          call SaveUnitHandle(TempHash,'A3E9',0,SGE)
          call SaveUnitHandle(TempHash,'A3E9',1,SKE)
          call SaveInteger(TempHash,'A3E9',0,QIE)
          call ExecuteFunc("Func3192")
        endif
        set RDA=Func3189(NCX,SGE,a)
        set RFA=Func3187(NCX,SGE,a)
        if RDA==null and RFA==null then
          call Func1032(SKE,SGE)
          set RGA=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
          call UnitAddAbility2(RGA,'A3GV')
          call IssueTargetOrder(RGA,"thunderbolt",SGE)
        else
          call Func1032(SKE,SGE)
          set D1E=0.75+QIE*0.75
          set RGA=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
          call UnitAddAbility2(RGA,'A3GW')
          call SetUnitAbilityLevel(RGA,'A3GW',QIE)
          call IssueTargetOrder(RGA,"thunderbolt",SGE)
          if RDA!=null then
            call Func1032(SKE,RDA)
            set RGA=CreateUnit(GetOwningPlayer(RDA),'e00E',GetUnitX(RDA),GetUnitY(RDA),0)
            call UnitAddAbility2(RGA,'A3GW')
            call SetUnitAbilityLevel(RGA,'A3GW',QIE)
            call IssueTargetOrder(RGA,"thunderbolt",RDA)
            call CreateLightningOnUnit("MFPB",SGE,RDA,85,.5,.5,1,1,D1E,.1)
          else
            call SetDestructableAnimation(RFA,"stand hit")
            call CreateLightningOnUnit("MFPB",SGE,CreateUnit(GetOwningPlayer(RGA),'e00E',GetDestructableX(RFA),GetDestructableY(RFA),0),85,.5,.5,1,1,D1E,.1)
          endif
        endif
      endif
      call KillUnit(NCX)
    endif
  endif
  set t=null
  set NCX=null
  set SGE=null
  set JYI=null
  set RDA=null
  set RFA=null
  set SKE=null
  set RGA=null
  return false
endfunction

function Func3191 takes unit SKE,unit SGE,integer QIE,boolean UII returns nothing
  local real a=Atan2(GetUnitY(SGE)-GetUnitY(SKE),GetUnitX(SGE)-GetUnitX(SKE))
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit NCX=CreateUnit(GetOwningPlayer(SKE),'h077',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
  local boolean RHA=IsBlocked(SGE)==false
  call SaveUnitHandle(HY,h,45,(NCX))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveBoolean(HY,h,0,UII)
  call SaveReal(HY,h,248,((a)*1.0))
  call SaveBoolean(HY,h,249,(RHA))
  call SaveReal(HY,h,6,((GetUnitX(SKE))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(SKE))*1.0))
  call TriggerRegisterTimerEvent(t,0.033,true)
  call TriggerAddCondition(t,Condition(function Func3190))
  set SKE=null
  set SGE=null
  set NCX=null
  set t=null
endfunction

function Func3192 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  call Func3191(SKE,SGE,QIE,true)
  set SKE=null
  set SGE=null
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3193 takes nothing returns nothing
  call Func3191(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),false)
endfunction

function Func3194 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group030)==false and IsUnitInvulnerable(GetEnumUnit())==false then
    call DamageTarget((unit211),(GetEnumUnit()),1,(((real086)*1.0))*Pow(0.9,(integer500)))
    call GroupAddUnit(group030,GetEnumUnit())
    set integer500=integer500+1
  endif
endfunction

function Func3195 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),45))
  local real result=(LoadReal(HY,(ZAE),47))
  local real ZEE=(LoadReal(HY,(ZAE),48))
  local real ZWE=(LoadReal(HY,(ZAE),13))
  local real ZYE=(LoadReal(HY,(ZAE),20))
  local integer QIE=(LoadInteger(HY,(ZAE),354))
  local integer ZBE=(LoadInteger(HY,(ZAE),355))
  local group g=(LoadGroupHandle(HY,(ZAE),187))
  local real ICX=SafeX50(GetUnitX(source)+(60)*Cos(ZWE))
  local real N1X=SafeY50(GetUnitY(source)+(60)*Sin(ZWE))
  local group IBI=GetAvailableGroup()
  local real N2X
  if GetTriggerEvalCount(RBX)>2 then
    set N2X=150
  else
    set N2X=75
  endif
  call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",ICX,N1X))
  set QIE=QIE+KillTrees(ICX,N1X,75)
  call SaveInteger(HY,(ZAE),354,(QIE))
  set group030=g
  set unit211=source
  set real086=ZYE
  set integer499=QIE
  set integer500=ZBE
  set tt_unit1=source
  call GroupEnumUnitsInRange(IBI,ICX,N1X,N2X,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(IBI,function Func3194)
  call KillGroup(IBI)
  call SaveInteger(HY,(ZAE),355,(integer500))
  call SetUnitX(source,ICX)
  call SetUnitY(source,N1X)
  if GetTriggerEvalCount(RBX)>43 then
    call KillUnit(source)
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set g=null
  set IBI=null
  return false
endfunction

function Func3196 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=(LoadReal(HY,(GetHandleId(source)),356))
  local real ZEE=(LoadReal(HY,(GetHandleId(source)),357))
  local real ZWE=RMinIF((TimerGetElapsed(GlobalTimer))-(LoadReal(HY,(GetHandleId(source)),358)),1.0)
  local real ZYE=Atan2(ZEE-GetUnitY(source),result-GetUnitX(source))
  local trigger RBX
  local integer ZAE
  local unit RCX
  local integer QIE=GetUnitAbilityLevel(source,'A12K')
  local real ICX=(40+80*QIE)*(ZWE)
  local real J9O=1700.
  if GetUnitAbilityLevel(source,'A3O3')>0 then
    set J9O=J9O+200.
  endif
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  set RCX=CreateUnit(GetOwningPlayer(source),'h078',GetUnitX(source),GetUnitY(source),ZYE*bj_RADTODEG)
  set result=GetUnitX(source)+J9O*Cos(ZYE)
  set ZEE=GetUnitY(source)+J9O*Sin(ZYE)
  call SaveUnitHandle(HY,(ZAE),45,(RCX))
  call SaveReal(HY,(ZAE),47,((result)*1.0))
  call SaveReal(HY,(ZAE),48,((ZEE)*1.0))
  call SaveReal(HY,(ZAE),13,((ZYE)*1.0))
  call SaveReal(HY,(ZAE),20,((ICX)*1.0))
  call SaveInteger(HY,(ZAE),354,0)
  call SaveInteger(HY,(ZAE),355,0)
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func3195))
  set source=null
  set RBX=null
  set RCX=null
endfunction

function Func3197 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  call SetUnitTimeScale(source,1)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func3198 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  call SetUnitAnimation(source,"attack")
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func3199 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call TriggerRegisterTimerEvent(RBX,0.,false)
  call TriggerAddCondition(RBX,Condition(function Func3198))
  call SaveReal(HY,(GetHandleId(source)),356,((result)*1.0))
  call SaveReal(HY,(GetHandleId(source)),357,((ZEE)*1.0))
  call SaveReal(HY,(GetHandleId(source)),358,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call SetUnitTimeScale(source,0.75)
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call TriggerRegisterTimerEvent(RBX,1,false)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerAddCondition(RBX,Condition(function Func3197))
  set RBX=null
  set source=null
endfunction

function Func3200 takes nothing returns nothing
  call SaveBoolean(HY,(GetHandleId(GetTriggerUnit())),360,(true))
endfunction

function Func3201 takes nothing returns nothing
  call SaveBoolean(HY,(GetHandleId(GetTriggerUnit())),360,(false))
  call Func3199()
endfunction

function Func3202 takes nothing returns boolean
  if GetSpellAbilityId()=='A12K' then
    if(LoadBoolean(HY,(GetHandleId(GetTriggerUnit())),360))then
      call Func3196()
    endif
  endif
  return false
endfunction

function Func3203 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(RBX,Condition(function Func3202))
  set RBX=null
endfunction

function Func3204 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local boolean RYA=false
  local integer BHX
  if GetTriggerEvalCount(t)==1 then
    call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  endif
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    if GetAttacker()==u then
      if GetTriggerUnit()==SGE then
        call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",u,"hand,left"))
        call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",u,"hand,right"))
        if GetUnitAbilityLevel(u,LoadInteger(HY,h,11))==0 then
          call UnitAddAbility2(u,LoadInteger(HY,h,11))
        endif
        if GetUnitAbilityLevel(u,'A12R')==0 then
          call UnitAddAbility(u,'A33Y')
          call UnitRemoveAbility(u,'A33Y')
          call UnitAddAbility2(u,'A12R')
          call UnitMakeAbilityPermanent(u,true,'A3PG')
          call UnitMakeAbilityPermanent(u,true,'A12S')
          call UnitMakeAbilityPermanent(u,true,'A12Q')
        endif
      else
        set RYA=true
        set BHX=LoadInteger(HY,h,11)
      endif
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if(GetSpellAbilityId()=='A12P' or GetSpellAbilityId()=='A1D6')and IsBlocked(GetSpellTargetUnit())==false then
      call UnitRemoveAbility(u,LoadInteger(HY,h,11))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  else
    set RYA=true
    set BHX=LoadInteger(HY,h,11)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  if RYA then
    call UnitRemoveAbility(u,'A3PG')
    call UnitRemoveAbility(u,BHX)
    call UnitRemoveAbility(u,'A12R')
    call UnitRemoveAbility(u,'B09X')
    call UnitRemoveAbility(u,'A1FK')
    call UnitRemoveAbility(u,'A1FL')
    call UnitRemoveAbility(u,'A1FJ')
  endif
  set t=null
  set u=null
  set SGE=null
  return false
endfunction

function Func3205 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t
  local integer h
  local integer QIE=GetUnitAbilityLevel(u,'A12P')
  local integer RZA
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call UnitRemoveAbility(u,'A12R')
  call UnitRemoveAbility(u,'B09X')
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(u,'A1D6')
    set RZA='A3PN'-1+QIE
  else
    set RZA='A3PL'-1+QIE
  endif
  if GetUnitTypeId(u)=='e00E' then
    set u=LoadUnitHandle(HY,GetHandleId(u),0)
  endif
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A12R',false)
  call UnitAddAbility2(u,'A12R')
  call UnitAddAbility2(u,RZA)
  call HideAbility(RZA)
  call SaveInteger(HY,h,11,RZA)
  call UnitMakeAbilityPermanent(u,true,'A3PG')
  call UnitMakeAbilityPermanent(u,true,'A12S')
  call UnitMakeAbilityPermanent(u,true,'A12Q')
  call IssueTargetOrder(u,"attack",SGE)
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,30,SGE)
  call TriggerRegisterTimerEvent(t,20,false)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3204))
  set u=null
  set SGE=null
  set t=null
endfunction

function Func3206 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and GetCloneHeroId(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))
endfunction

function Func3207 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local unit d
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A29G')
  local integer id='A3FS'
  local real dmg
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A29H')
    set id='A3FT'
    set dmg=340+100*QIE
  else
    set dmg=125+100*QIE
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function Func3206))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if GetUnitAbilityLevel(u,'A1HX')==0 then
      set d=CreateUnit(GetOwningPlayer(SKE),'e039',GetUnitX(u),GetUnitY(u),0)
      call UnitAddAbility(d,'ANtr')
      call UnitAddAbility(d,id)
      call UnitApplyTimedLife(d,'BTLF',3)
      if IssueTargetOrderByIdFuckingEx(d,852119,u,false)then
        call Func0648(SKE,u,1,dmg,0)
      endif
      set d=CreateUnit(GetOwningPlayer(u),'e039',GetUnitX(u),GetUnitY(u),0)
      call UnitAddAbility(d,id)
      call IssueTargetOrderByIdFuckingEx(d,852119,u,false)
      call UnitApplyTimedLife(d,'BTLF',3)
      call DestroyEffect(AddSpellEffectById(id,EFFECT_TYPE_TARGET,GetUnitX(u),GetUnitY(u)))
    endif
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set d=null
  set SKE=null
endfunction

function Func3208 takes nothing returns nothing
  local real result=GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)
  local real ZEE=0.02+0.02*GetUnitAbilityLevel(GetTriggerUnit(),('A0N5'))
  local real ZWE=result*ZEE
  local real R1A=LoadReal(HY,GetHandleId(GetEnumUnit()),787)
  call DamageTarget(GetTriggerUnit(),GetEnumUnit(),1,ZWE)
  if R1A!=0 then
    call SaveReal(HY,GetHandleId(GetEnumUnit()),787,R1A)
  endif
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl",GetEnumUnit(),"overhead"))
endfunction

function Func3209 takes nothing returns boolean
  return AliveNonBuildOrMarker(GetFilterUnit())and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetFilterUnit()!=Roshan
endfunction

function Func3210 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local real result=GetUnitX(GetTriggerUnit())
  local real ZEE=GetUnitY(GetTriggerUnit())
  call GroupEnumUnitsInRange(g,result,ZEE,1225,Condition(function Func3209))
  call ForGroup(g,function Func3208)
  call KillGroup(g)
endfunction

function Func3211 takes nothing returns boolean
  return(GetSpellAbilityId()==('A2WQ')or GetSpellAbilityId()==('A020')or GetSpellAbilityId()==('A29G')or GetSpellAbilityId()==('A29H'))and GetUnitAbilityLevel(GetTriggerUnit(),('A0N5'))>0 and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0
endfunction

function Func3212 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func3211))
  call TriggerAddAction(RBX,function Func3210)
  set RBX=null
endfunction

function Func3213 takes nothing returns boolean
  return IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsMagicImmune(GetFilterUnit())==false
endfunction

function Func3214 takes unit SKE,unit SGE,integer QIE,boolean GRI returns nothing
  local unit d
  local real dmg=25+QIE*75
  local group g
  local real x
  local real y
  if SGE==null then
    set g=GetAvailableGroup()
    set x=GetSpellTargetX()
    set y=GetSpellTargetY()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,x,y,350,Condition(function Func3213))
    set SGE=GetClosestOfGroup(g,x,y)
    call KillGroup(g)
  endif
  if SGE!=null and IsBlocked(SGE)==false then
    if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false and GRI==false then
      call SaveUnitHandle(TempHash,'A3E9',0,SGE)
      call SaveUnitHandle(TempHash,'A3E9',1,SKE)
      call SaveInteger(TempHash,'A3E9',0,QIE)
      call ExecuteFunc("Func3216")
    endif
    set x=GetUnitX(SGE)
    set y=GetUnitY(SGE)
    call StunTargetEx(SGE,0.2,false)
    call DamageTarget(SKE,SGE,1,dmg)
  endif
  set d=CreateUnit(GetOwningPlayer(SKE),'e000',x,y,0)
  call UnitAddAbility(d,'Aloc')
  call UnitAddAbility(d,'A3FR')
  call UnitApplyTimedLife(d,'BTLF',4.5)
  call SetUnitPathing(d,false)
  if SGE==null or IssueTargetOrder(d,"chainlightning",SGE)==false then
    set SGE=CreateUnit(GetOwningPlayer(SKE),'e00C',x,y,0)
    call UnitApplyTimedLife(SGE,'BTLF',0.05)
    call UnitAddAbility(SGE,'Aetl')
    call IssueTargetOrder(d,"chainlightning",SGE)
    call DestroyEffect(AddSpellEffectById('A3FR',EFFECT_TYPE_TARGET,x,y))
  endif
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func3215 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A2WQ')
  call Func3214(SKE,SGE,QIE,false)
  set SKE=null
  set SGE=null
endfunction

function Func3216 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  call Func3214(SKE,SGE,QIE,true)
  set SKE=null
  set SGE=null
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3217 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A020')
  local integer j=3+2*QIE
  local real d=70.+15.*QIE
  if QIE==4 then
    set j=15
    set d=145.
  endif
  call Func0843(SKE,GetSpellTargetUnit(),d,j,1.,500.,0.25,"CLPB",false,null)
  set SKE=null
endfunction

function Func3218 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real dmg=50+50*GetUnitAbilityLevel(SKE,'A0I3')
  local real R9A=50+25*GetUnitAbilityLevel(SKE,'A0I3')
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",SGE,"origin"))
  if IsUnitAlly(SGE,GetOwningPlayer(SKE))and GetUnitState(SGE,UNIT_STATE_LIFE)>1.00 then
    call SetUnitState(SGE,UNIT_STATE_LIFE,GetUnitState(SGE,UNIT_STATE_LIFE)+dmg)
  else
    call DamageTarget(SKE,SGE,1,dmg)
  endif
  call FuckingAssistBuffWrap(SKE,SGE)
  call Func0648(SKE,SKE,3,R9A,0.)
  set SKE=null
  set SGE=null
endfunction

function Func3219 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or IsBlocked(GetSpellTargetUnit())==false then
    call Func3218()
  else
    call RemoveLinkenBuff(GetSpellTargetUnit())
  endif
endfunction

function Func3220 takes unit IEA,unit SGE,integer QIE returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local real dmg=80+30*QIE
  set tt_unit1=IEA
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),700,Condition(function Func0814))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl",u,"origin"))
    call DamageTarget(IEA,u,1,dmg)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func3221 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real dmg=(LoadReal(HY,h,362))
  local unit SKE
  local unit SGE=LoadUnitHandle(HY,h,30)
  local integer QIE
  local integer c=LoadInteger(HY,h,0)
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if LoadInteger(HY,GetHandleId(GetTriggerUnit()),4250)!=1 then
      if dmg<GetEventDamage()then
        set SKE=(LoadUnitHandle(HY,h,2))
        set QIE=(LoadInteger(HY,h,5))
        call UnitRemoveAbility(SGE,'A05S')
        call UnitRemoveAbility(SGE,'B05S')
        call SaveBoolean(HY,(GetHandleId(SGE)),363,(false))
        call FlushChildHashtable(HY,(h))
        call CleanTrigger(t)
        call Func0673(GetTriggerUnit(),dmg)
        call Func3220(SKE,GetTriggerUnit(),QIE)
      elseif GetEventDamage()>0 then
        call Func0673(GetTriggerUnit(),GetEventDamage())
        call SaveReal(HY,h,362,((dmg-GetEventDamage())*1.0))
      endif
    endif
  else
    if GetUnitAbilityLevel(SGE,'A05S')==0 or c>75 then
      set SKE=(LoadUnitHandle(HY,h,2))
      call UnitRemoveAbility(SGE,'A05S')
      call UnitRemoveAbility(SGE,'B05S')
      set QIE=(LoadInteger(HY,h,5))
      call SaveBoolean(HY,(GetHandleId(SGE)),363,(false))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call Func3220(SKE,SGE,QIE)
    else
      call SaveInteger(HY,h,0,c+1)
    endif
  endif
  set SKE=null
  set SGE=null
  set t=null
  return false
endfunction

function Func3222 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0MF')
  local integer hu=GetHandleId(SGE)
  local real dmg=80+30*QIE
  call FlushChildHashtable(HY,h)
  if(LoadBoolean(HY,(hu),363))then
    call UnitRemoveAbility(SGE,'A05S')
    call UnitRemoveAbility(SGE,'B05S')
    call TriggerEvaluate((LoadTriggerHandle(HY,(hu),364)))
  endif
  call FuckingAssistBuffWrap(SKE,SGE)
  call Func0862(SGE)
  call SaveReal(HY,h,362,((dmg)*1.0))
  call UnitAddAbility2(SGE,'A05S')
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveUnitHandle(HY,h,30,SGE)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerAddCondition(t,Condition(function Func3221))
  call SaveTriggerHandle(HY,(hu),364,(t))
  call SaveBoolean(HY,(hu),363,(true))
  call SaveInteger(HY,h,0,0)
  set t=null
  set SGE=null
  set SKE=null
endfunction

function Func3223 takes nothing returns nothing
  call AddToPurgeList('B066','PRGE')
  call AddToPurgeList('A3SQ','PRGE')
  call AddToPurgeList('A3SR','PRGE')
  call AddToPurgeList('A3SS','PRGE')
  call AddToPurgeList('A3ST','PRGE')
  call AddToPurgeList('A3FB','PRGA')
  call AddToPurgeList('A3FC','PRGA')
  call AddToPurgeList('A3FD','PRGA')
  call AddToPurgeList('A3FE','PRGA')
  call AddToPurgeList('B369','PRGA')
  call AddToPurgeList('A05S','PRGA')
  call AddToPurgeList('B05S','PRGA')
  call AddWrapper("Func4632",1)
endfunction

function Func3224 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  if GetTriggerEventId()==EVENT_UNIT_DEATH or IssueImmediateOrderByIdExFunc(source,852129)then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3225 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit IEA=LoadUnitHandle(HY,h,0)
  local boolean b=GetUnitAbilityLevel(IEA,'A3KC')==1
  local real dmg
  local unit u
  local integer j=LoadInteger(HY,h,0)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or b==false then
    if j>0 then
      loop
        set u=LoadUnitHandle(HY,h,j)
        call UnitRemoveAbility(u,'A3KB')
        call UnitRemoveAbility(u,'B3KB')
        call RemoveSavedHandle(HY,GetHandleId(u),'A3KB')
        set j=j-1
        exitwhen j<=0
      endloop
    endif
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  else
    if j>0 then
      loop
        set u=LoadUnitHandle(HY,h,j)
        if DistanceBetweenUnits(IEA,u)<900 then
          if GetUnitAbilityLevel(u,'A3KB')==0 then
            call  DamageBlockActiveTracking(10.)
            call UnitAddAbility2(u,'A3KB')
            call Func1033(GetOwningPlayer(IEA),GetOwningPlayer(u))
            call SaveUnitHandle(HY,GetHandleId(u),'A3KB',IEA)
          endif
        else
          call UnitRemoveAbility(u,'A3KB')
          call UnitRemoveAbility(u,'B3KB')
          call RemoveSavedHandle(HY,GetHandleId(u),'A3KB')
        endif
        set j=j-1
        exitwhen j<=0
      endloop
    endif
  endif
  set t=null
  set IEA=null
endfunction

function Func3226 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local player p=GetOwningPlayer(u)
  local integer i=1
  local boolean b=false
  local integer j=0
  if IsScourge(p)then
    set b=true
  endif
  loop
    if b then
      if udg_Hero[GetPlayerId(Scourges[i])]!=null and udg_Hero[GetPlayerId(Scourges[i])]!=u then
        set j=j+1
        call SaveUnitHandle(HY,h,j,udg_Hero[GetPlayerId(Scourges[i])])
      endif
    else
      if udg_Hero[GetPlayerId(Sentinels[i])]!=null and udg_Hero[GetPlayerId(Sentinels[i])]!=u then
        set j=j+1
        call SaveUnitHandle(HY,h,j,udg_Hero[GetPlayerId(Sentinels[i])])
      endif
    endif
    set i=i+1
    exitwhen i>5
  endloop
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call SaveInteger(HY,h,0,j)
  call TriggerAddCondition(t,Condition(function Func3225))
  call SaveUnitHandle(HY,h,0,u)
  set t=null
endfunction

function Func3227 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  local unit IEA
  local integer id
  local integer QIE
  local integer D1E
  local boolean CTI
  local real cd
  local boolean IBA
  local integer dh
  local integer a
  local boolean ICA
  local integer i
  local eventid IDA=GetTriggerEventId()
  local boolean IFA=false
  if IDA==EVENT_UNIT_DAMAGED then
    if GetEventDamage()>0 and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)<400 and GetUnitAbilityLevel(GetTriggerUnit(),'A36D')==0 then
      set IFA=true
    endif
  elseif IDA==EVENT_UNIT_ISSUED_ORDER then
    if GetIssuedOrderId()==852129 then
      set IFA=true
    endif
  elseif GetSpellAbilityId()=='A0NS' or GetSpellAbilityId()=='A1DA' then
    set IFA=true
  endif
  if IFA then
    set u=GetTriggerUnit()
    set IEA=u
    set QIE=GetUnitAbilityLevel(IEA,'A0NS')
    set ICA=false
    set i=0
    if QIE==0 then
      set QIE=GetUnitAbilityLevel(IEA,'A1DA')
      set D1E=4+1*QIE
      set CTI=true
      set id='A1DA'
    else
      set D1E=3+QIE
      set CTI=false
      set id='A0NS'
    endif
    set a=GetUnitAbilityLevel(IEA,id)
    if a>0 then
      set a=GetUnitAbility(IEA,id)
      if a>0 and IsAbilityOnCooldown(a)then
        set ICA=true
      endif
    endif
    set ICA=not ICA
    set IBA=ICA and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT
    set IBA=IBA or(GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER and ICA)
    set IBA=IBA or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and ICA)
    if GetTriggerEventId()==EVENT_UNIT_DAMAGED and(LoadInteger(HY,GetHandleId(IEA),4250)==1)then
    elseif IBA then
      call DisableTrigger(t)
      set cd=GetAbilityCD(id,QIE)
      if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
        set a=GetUnitAbility(u,id)
        if a>0 then
          call Func0325(a,cd)
        endif
        call Func0424(u,id)
        set boolean177=true
        call IssueImmediateOrderByIdExFunc(u,852129)
        set boolean177=false
      endif
      call TimerStart(UltimateCDTimers[GetPlayerId(GetOwningPlayer(u))],cd,false,null)
      call AddTimedKeyToAgent(u,4250,D1E)
      call Func0770(u,false,0,0)
      if CTI then
        call Func3226(u)
      endif
      call Func0862(u)
      call  DamageBlockActiveTracking(D1E)
      call UnitAddAbilityTimedExF(u,'A3KC',1,D1E,'B3KC')
      call EnableTrigger(t)
      call SetUnitAnimation(u,"spell")
    endif
  endif
  set IDA=null
  set t=null
  set u=null
  set IEA=null
  return false
endfunction

function Func3228 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local group g
  local region I2I
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_ISSUED_ORDER)
  call TriggerAddCondition(RBX,Condition(function Func3227))
  set RBX=null
  set source=null
  set g=null
  set I2I=null
endfunction

function Func3229 takes unit u,unit t returns nothing
  local integer QIE=GetUnitAbilityLevel(u,'A0MG')
  if QIE>0 and GetUnitAbilityLevel(u,'A36D')==0 then
    call UnitAddAbilityTimedExF(t,'A3SQ'-1+QIE,1,2.5,'B066')
  endif
  if(GetUnitAbilityLevel(t,'B066')==0 and QIE==0)then
    return
  endif
  if QIE>0 then
    call SaveInteger(HY,GetHandleId(t),203,QIE)
  else
    set QIE=LoadInteger(HY,GetHandleId(t),203)
  endif
  if IsUnitEnemy(t,GetOwningPlayer(u))then
    call UnitAddAbilityTimedExF(u,'A3FB'-1+QIE,1,4.5,'B369')
  endif
endfunction

function Func3230 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=(LoadInteger(HY,h,5))
  local integer c=(LoadInteger(HY,h,34))
  local real dmg=10+5*QIE
  local unit d
  local boolean FEX=false
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
    set FEX=true
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
    set d=GetKillingUnit()
    if IsUnitDummyOfPlayer(d)then
      set d=(udg_Hero[GetPlayerId(GetOwningPlayer(d))])
    endif
    if IsPowerCog(GetTriggerUnit())==false and IsUnitIllusion(GetTriggerUnit())==false and(GetTriggerUnit()==SGE or d==SGE)then
      set FEX=true
      call UnitRemoveAbility(SGE,'A1W2')
      call UnitRemoveAbility(SGE,'B0DO')
    endif
  else
    set c=c+1
    call SaveInteger(HY,h,34,(c))
    if c==10 or GetUnitAbilityLevel(SGE,'B0DO')==0 or IsMagicImmune(SGE)then
      set FEX=true
      call UnitRemoveAbility(SGE,'A1W2')
      call UnitRemoveAbility(SGE,'B0DO')
    endif
    call DamageTarget(SKE,SGE,1,dmg)
  endif
  if FEX then
    call RemoveSavedHandle(HY,GetHandleId(SGE),'A0S1')
    call SaveInteger(HY,GetHandleId(SKE),'A0S1',IMaxIF(LoadInteger(HY,GetHandleId(SKE),'A0S1')-1,0))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  return false
endfunction

function Func3231 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0S1')
  if GetUnitTypeId(SKE)=='e00E'then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  if HaveSavedHandle(HY,GetHandleId(SGE),'A0S1')then
    call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(SGE),'A0S1'))
  endif
  if LoadBoolean(HY,GetHandleId(SKE),'A0S1')==false then
    set tt_unit1=SKE
    call ExecuteFunc("Func3235")
  endif
  call SaveInteger(HY,GetHandleId(SKE),'A0S1',LoadInteger(HY,GetHandleId(SKE),'A0S1')+1)
  call SaveTriggerHandle(HY,GetHandleId(SGE),'A0S1',t)
  call UnitAddAbility2(SGE,'A1W2')
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func3230))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveInteger(HY,h,34,0)
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3232 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,2)
  local integer c=LoadInteger(HY,GetHandleId(u),'A0S1')
  local integer ILA=LoadInteger(HY,h,0)
  local integer FXE
  if ILA!=c then
    if c==0 then
      if GetUnitAbilityLevel(u,'B0EZ')>0 then
        call UnitRemoveAbility(u,'A3P0')
        call UnitRemoveAbility(u,'B0EZ')
      endif
    else
      if GetUnitAbilityLevel(u,'A3P0')==0 then
        call UnitAddAbility2(u,'A3P0')
      endif
    endif
    set FXE=12*(c-ILA)
    call Stats_Fucking_Modify(u,FXE,"+MS")
    call SaveInteger(HY,h,0,c)
  endif
  set u=null
  set t=null
  return false
endfunction

function Func3233 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call SaveBoolean(HY,GetHandleId(u),'A0S1',true)
  call TriggerAddCondition(t,Condition(function Func3232))
  call SaveUnitHandle(HY,h,2,(u))
  set t=null
  call AddToPurgeList('A1W2','PRGE')
  call AddToPurgeList('B0DO','PRGE')
endfunction

function Func3234 takes nothing returns nothing
  call Func3233(GetTriggerUnit())
endfunction

function Func3235 takes nothing returns nothing
  call Func3233(tt_unit1)
endfunction

function Func3236 takes nothing returns boolean
  return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and IsUnitInvulnerable(GetFilterUnit())==false and GetFilterUnit()!=Roshan
endfunction

function Func3237 takes unit u returns boolean
  return(Func0639(u)or IsUnitHidden(u)or IsUnitInvulnerable(u))==false
endfunction

function ForceFulAttack takes unit WXE,unit SGE returns nothing
  if Func3237(SGE)==false or Func0809(WXE,"attack",0,SGE,0.,0.,null)==false then
    call Func0809(WXE,"attack",1,null,GetUnitX(SGE),GetUnitY(SGE),null)
  endif
endfunction

function Func3239 takes nothing returns nothing
  if IsItPriorAttackforce(GetEnumUnit(),'C003')then
    call UnitWakeUp(GetEnumUnit())
    call EnableUnitControl(GetEnumUnit())
    call ForceFulAttack(GetEnumUnit(),unit212)
    call DisableUnitControl(GetEnumUnit())
  endif
endfunction

function Func3240 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,h,220))
  local unit DLI=(LoadUnitHandle(HY,h,14))
  local integer affectedCount=(LoadInteger(HY,h,365))
  local integer QIE=(LoadInteger(HY,h,5))
  local integer c=(LoadInteger(HY,h,34))
  local unit u
  local unit tu
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if GetTriggerUnit()==DLI then
      set c=1000
    else
      call EnableUnitControl(GetTriggerUnit())
    endif
  endif
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED or c==1000 then
    set c=c+1
    call SaveInteger(HY,h,34,(c))
    if c>=(8+2*QIE)then
      call DisableTrigger(t)
      call UnitRemoveAbility(DLI,'A0I5')
      loop
        set u=FirstOfGroup(g)
        exitwhen u==null
        call GroupRemoveUnit(g,u)
        call EnableUnitControl(u)
        call UnitRemoveAbility(u,'C003')
        call UnitRemoveAbility(u,'D003')
        if IsDead(DLI)==false then
          call IssueTargetOrder(u,"attack",DLI)
        endif
      endloop
      call KillGroup(g)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    else
      call DisableTrigger(t)
      set unit212=DLI
      call ForGroup(g,function Func3239)
      call EnableTrigger(t)
    endif
  else
    set tu=GetTriggerUnit()
    if UnitIsSleeping(tu)==false and boolean177==false and IsItPriorAttackforce(tu,'C003')then
      if IsTriggeredOrder(tu)==false then
        call DisableTrigger(t)
        call EnableUnitControl(tu)
        call ForceFulAttack(tu,DLI)
        call DisableUnitControl(tu)
        call EnableTrigger(t)
      endif
    endif
    set tu=null
  endif
  set t=null
  set g=null
  set DLI=null
  return false
endfunction

function Func3241 takes nothing returns nothing
  set integer089=integer089+1
  call UnitAddAbilityTimedExF(GetEnumUnit(),'C003',1,integer090*0.4+1.6,'D003')
  call DisableUnitControl(GetEnumUnit())
  call TriggerRegisterUnitEvent(trigger006,GetEnumUnit(),EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(trigger006,GetEnumUnit(),EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(trigger006,GetEnumUnit(),EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterDeathEvent(trigger006,GetEnumUnit())
endfunction

function Func3242 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0I6')
  local group g=GetAvailableGroup()
  call UnitAddAbility2(SKE,'A0I5')
  call SetUnitAbilityLevel(SKE,'A0I5',QIE)
  set tt_unit1=SKE
  set unit212=SKE
  set integer089=0
  set integer093=h
  set integer090=QIE
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),325,Condition(function Func3236))
  set trigger006=t
  call ForGroup(g,function Func3241)
  call ForGroup(g,function Func3239)
  call SaveInteger(HY,h,365,(integer089))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveGroupHandle(HY,h,220,(g))
  call SaveInteger(HY,h,5,(QIE))
  call SaveInteger(HY,h,34,0)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerAddCondition(t,Condition(function Func3240))
  set t=null
  set g=null
  set SKE=null
endfunction

function Func3243 takes nothing returns boolean
  return(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)and IsDead(GetFilterUnit())==false))!=null
endfunction

function Func3244 takes unit Hero returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer QIE=GetUnitAbilityLevel(Hero,'A0C6')
  local real dmg=QIE*30+60
  set tt_unit1=Hero
  call GroupEnumUnitsInRange(g,GetUnitX(Hero),GetUnitY(Hero),300,Condition(function Func3243))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",u,"origin"))
    call DamageTarget(Hero,u,7,dmg)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  call SetUnitAnimation(Hero,"spin")
  call UnitMakeStandAnimDelayed(Hero,.6)
  call AddTimedKeyToAgent(Hero,4267,.5-.05*QIE)
endfunction

function Func3245 takes unit WXE,unit SGE returns nothing
  if GetUnitAbilityLevel(SGE,'A0C6')>0 and GetUnitAbilityLevel(SGE,'A36D')==0 and IsUnitType(WXE,UNIT_TYPE_STRUCTURE)==false and IsUnitType(WXE,UNIT_TYPE_MECHANICAL)==false and GetUnitAbilityLevel(WXE,'A04R')==0 and IsUnitEnemy(WXE,GetOwningPlayer(SGE))and LoadInteger(HY,GetHandleId(SGE),4267)!=1 and PRD_Get(SGE,'A0C6',20)then
    call Func3244(SGE)
  endif
endfunction

function Func3246 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetEnumUnit(),'A2IB',1,integer501,'B0FV')
endfunction

function Func3247 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func3248 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local real WRE=GetWidgetLife(SGE)
  local unit d
  local boolean CTI=LoadBoolean(HY,h,0)
  local group g
  local integer QIE=GetUnitAbilityLevel(SKE,('A0E2'))
  local real XXO=75.*QIE+175.
  local unit u2
  local real D1E=6.
  if CTI then
    set QIE=GetUnitAbilityLevel(SKE,'A1MR')
    set XXO=125.*QIE+175.
    set D1E=10.
  endif
  if(WRE<=XXO)then
    if IsUnitType(SGE,UNIT_TYPE_HERO)then
      if CTI then
        call Func0410(SKE,'A1MR')
      else
        call Func0410(SKE,'A0E2')
      endif
    endif
    call PlaySoundOnUnitBJ(sound007,100,SGE)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",SGE,"overhead"))
    set d=CreateUnit(GetOwningPlayer(SKE),'e00E',0,0,0)
    if IsUnitType(SGE,UNIT_TYPE_SUMMONED)==false then
      call UnitRemoveBuffs(SGE,true,true)
    endif
    call UnitRemoveAbility(SGE,'Aetl')
    call DamageTarget(d,SGE,2,100000000)
    if IsDead(SGE)==false then
      call DamageTarget(d,SGE,7,100000000)
    endif
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\AxeUltiMSFX_01.mdx",SKE,"origin"))
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),925,Condition(function Func3247))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call UnitAddAbilityTimedExF(u2,'A2IB',1,D1E,'B0FV')
      call FuckingAssistBuffWrap(SKE,u2)
    endloop
    call KillGroup(g)
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func3249 takes unit RCX returns nothing
  local integer h=DelayedCallBack(0,function Func3248)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
  if GetSpellAbilityId()=='A1MR' then
    call SaveBoolean(HY,h,0,true)
  endif
endfunction

function Func3250 takes nothing returns nothing
  call Func3249(GetSpellTargetUnit())
endfunction

function Func3251 takes nothing returns nothing
  call AddToPurgeList('A2IB','PRGA')
  call AddToPurgeList('B0FV','PRGA')
  call AddWrapper("Func4636",-1)
endfunction

function Func3252 takes nothing returns nothing
  call DamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),3,20+70*GetUnitAbilityLevel(GetTriggerUnit(),'A0GK'))
  if GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>1 then
    call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+20+70*GetUnitAbilityLevel(GetTriggerUnit(),'A0GK'))
  endif
endfunction

function Func3253 takes unit SKE,unit SGE returns nothing
  call UnitRemoveAbility(SGE,'A37S')
  call UnitRemoveAbility(SGE,'A3C9')
  call RemoveSavedHandle(HY,GetHandleId(SGE),'A04Y')
  call UnitRemoveAbility(SKE,'A2O9')
endfunction

function Func3254 takes unit SGE returns nothing
  call UnitAddAbilityTimedExF(SGE,'A3CA',1,1,'A3CA')
  if HaveSavedHandle(HY,GetHandleId(SGE),'VisD')then
    call UnitRemoveAbility(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),'A37S')
    call UnitRemoveAbility(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),'A3C9')
    call UnitAddAbilityTimedExF(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),'A3CA',1,1,'A3CA')
  endif
endfunction

function Func3255 takes nothing returns nothing
  local unit d
  local integer h
  if GetUnitAbilityLevel(TriggeredUnit,'B02F')>0 then
    set h=GetHandleId(LoadTriggerHandle(HY,GetHandleId(TriggeredUnit),'A04Y'))
    set d=CreateUnit(GetOwningPlayer(LoadUnitHandle(HY,h,2)),'e00E',GetUnitX(CastedUnit),GetUnitY(CastedUnit),0)
    call UnitRemoveAbility(TriggeredUnit,'B02F')
    call UnitAddAbility(d,'A04Y')
    call SetUnitAbilityLevel(d,'A04Y',LoadInteger(HY,h,5))
    call IssueTargetOrderByIdFuckingEx(d,852227,CastedUnit,true)
    call UnitRemoveAbility(d,'A04Y')
    set d=null
  endif
endfunction

function Func3256 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,30)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local integer QIE=(LoadInteger(HY,h,5))
  local unit d
  local boolean b=GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED
  if b==false then
    if GetIssuedOrderId()==852589 and GetUnitAbilityLevel(SKE,'A2O9')>0 then
      call UnitRemoveAbility(SGE,'B02F')
    endif
  endif
  if GetUnitAbilityLevel(SGE,'B02F')==0 then
    call Func3253(SKE,SGE)
    call Func3254(SGE)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif b then
    call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
    if LoadInteger(HY,h,0)==9 then
      call UnitRemoveAbility(SGE,'A3C9')
      if HaveSavedHandle(HY,GetHandleId(SGE),'VisD')then
        call UnitRemoveAbility(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),'A3C9')
      endif
    endif
    if ModuloInteger(LoadInteger(HY,h,0),10)==0 then
      if GetWidgetLife(SGE)>21 then
        call SetUnitState(SGE,UNIT_STATE_LIFE,GetWidgetLife(SGE)-20)
        if GetUnitAbilityLevel(SGE,'A0RN')==0 then
          call SaveReal(HY,GetHandleId(SGE),787,TimerGetElapsed(GlobalTimer))
        endif
      else
        call Func3253(SKE,SGE)
        call UnitRemoveAbility(SGE,'B02F')
        call Func3254(SGE)
        call DamageTarget(SKE,SGE,1,50)
        call FlushChildHashtable(HY,(h))
        call CleanTrigger(t)
      endif
    endif
  endif
  set t=null
  set d=null
  set SGE=null
  set SKE=null
  return false
endfunction

function Func3257 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  set h=GetHandleId(t)
  call SaveUnitHandle(HY,(h),30,SGE)
  call SaveUnitHandle(HY,(h),2,SKE)
  call SaveInteger(HY,(h),5,GetUnitAbilityLevel(SKE,'A04Y'))
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_ORDER)
  call TriggerAddCondition(t,Condition(function Func3256))
  if IsUnitType(SKE,UNIT_TYPE_HERO)==false then
    call SaveUnitHandle(HY,(h),2,udg_Hero[GetPlayerId(GetOwningPlayer(SKE))])
  endif
  if GetUnitAbilityLevel(SKE,'A04Y')>0 then
    call UnitAddAbility2(SKE,'A2O9')
  endif
  call UnitAddAbility(SGE,'A37S')
  call UnitAddAbility(SGE,'A3C9')
  if HaveSavedHandle(HY,GetHandleId(SGE),'VisD')then
    call UnitAddAbility(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),'A37S')
    call UnitAddAbility(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),'A3C9')
  endif
  call SaveTriggerHandle(HY,GetHandleId(SGE),'A04Y',t)
  set boolean123=true
  call DamageTarget(SKE,SGE,2,0)
  set boolean123=false
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3258 takes nothing returns nothing
  if IsCourier(GetSpellTargetUnit())==false then
    call Func3257()
  endif
endfunction

function Func3259 takes nothing returns nothing
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
    call Func2329()
  endif
endfunction

function Func3260 takes nothing returns nothing
  call AddToPurgeList('B02F','PRGE')
  call AddToPurgeList('BUsp','PRGE')
  call AddToPurgeList('Bust','PRGE')
  call AddWrapper("Func4642",-1)
  call AddWrapper("Func3255",-1)
endfunction

function Func3261 takes unit WXE,unit SGE returns nothing
  local unit u
  if LoadBoolean(MHT,GetHandleId(SGE),'Grip')then
    if IsUnitEnemy(WXE,GetOwningPlayer(SGE))then
      set u=CreateUnit(GetOwningPlayer(WXE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
      call UnitAddAbility2(u,'A33N')
      call SetUnitAbilityLevel(u,'A33N',2)
      call IssueTargetOrderByIdFuckingEx(u,852227,WXE,true)
      set u=null
    endif
  endif
endfunction

function Func3262 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real mp
  local integer D1E=6
  local fogmodifier f=(LoadFogModifierHandle(HY,h,42))
  local integer DAI=LoadInteger(HY,h,0)+1
  if GetUnitAbilityLevel(SKE,'A1D9')>0 then
    set D1E=8
  endif
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
    call FogModifierStop(f)
    call DestroyFogModifier(f)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call SaveBoolean(MHT,GetHandleId(SKE),'Grip',false)
  elseif DAI>D1E then
    call FogModifierStop(f)
    call DestroyFogModifier(f)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call Func0656(SKE)
    call SaveBoolean(MHT,GetHandleId(SKE),'Grip',false)
  else
    call SaveInteger(HY,h,0,DAI)
    if GetUnitAbilityLevel(SKE,'A1D9')>0 then
      set mp=RMinBJ(0.1*GetUnitState(SGE,UNIT_STATE_MAX_MANA),GetUnitState(SGE,UNIT_STATE_MANA))
    else
      set mp=RMinBJ(0.05*GetUnitState(SGE,UNIT_STATE_MAX_MANA),GetUnitState(SGE,UNIT_STATE_MANA))
    endif
    if mp>0 then
      call SetUnitState(SKE,UNIT_STATE_MANA,GetUnitState(SKE,UNIT_STATE_MANA)+mp)
      call SetUnitState(SGE,UNIT_STATE_MANA,GetUnitState(SGE,UNIT_STATE_MANA)-mp)
    endif
    call DamageTarget(SKE,SGE,1,LoadReal(HY,h,0))
  endif
  set t=null
  set SKE=null
  set SGE=null
  set f=null
  return false
endfunction

function Func3263 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local fogmodifier ff=CreateFogModifierRadius(GetOwningPlayer(SKE),FOG_OF_WAR_VISIBLE,GetUnitX(SGE),GetUnitY(SGE),350,true,true)
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local real dmg
  local boolean CTI=GetUnitAbilityLevel(SKE,'A1D9')>0
  call FlushChildHashtable(HY,h)
  if CTI then
    if QIE==1 then
      set dmg=100
    elseif QIE==2 then
      set dmg=155
    else
      set dmg=215
    endif
  else
    if QIE==1 then
      set dmg=155
    elseif QIE==2 then
      set dmg=215
    else
      set dmg=270
    endif
  endif
  call FogModifierStart(ff)
  call UnitRemoveAbility(SGE,'B02F')
  call UnitRemoveAbility(SGE,'BUsp')
  call UnitRemoveAbility(SGE,'Bust')
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func3262))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveFogModifierHandle(HY,h,42,(ff))
  call SaveReal(HY,h,0,dmg)
  call SaveBoolean(MHT,GetHandleId(SKE),'Grip',CTI)
  call Func1330(SKE,SGE,'B04B')
  set SKE=null
  set SGE=null
  set t=null
  set ff=null
endfunction

function Func3264 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local real result=(LoadReal(HY,(GetHandleId(source)),789))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or result<(TimerGetElapsed(GlobalTimer))then
    call UnitRemoveAbility(source,'A2OG')
    call UnitRemoveAbility(source,'A2OA')
    call UnitRemoveAbility(source,'A2OF')
    call UnitRemoveAbility(source,'A2OH')
    call UnitRemoveAbility(source,'B0GE')
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3265 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(source,'A2OI')
  call Func1032(RCX,RCX)
  if QIE==1 then
    call UnitRemoveAbility(RCX,'B0GE')
    call UnitRemoveAbility(RCX,'A2OA')
    call UnitRemoveAbility(RCX,'A2OF')
    call UnitRemoveAbility(RCX,'A2OH')
    call UnitAddAbility2(RCX,'A2OG')
    call UnitMakeAbilityPermanent(RCX,true,'A2OD')
    call SetPlayerAbilityAvailable(GetOwningPlayer(RCX),'A2OG',false)
  elseif QIE==2 then
    call UnitRemoveAbility(RCX,'B0GE')
    call UnitRemoveAbility(RCX,'A2OG')
    call UnitRemoveAbility(RCX,'A2OF')
    call UnitRemoveAbility(RCX,'A2OH')
    call UnitAddAbility2(RCX,'A2OA')
    call UnitMakeAbilityPermanent(RCX,true,'A2OE')
    call SetPlayerAbilityAvailable(GetOwningPlayer(RCX),'A2OA',false)
  elseif QIE==3 then
    call UnitRemoveAbility(RCX,'B0GE')
    call UnitRemoveAbility(RCX,'A2OG')
    call UnitRemoveAbility(RCX,'A2OA')
    call UnitRemoveAbility(RCX,'A2OH')
    call UnitAddAbility2(RCX,'A2OF')
    call UnitMakeAbilityPermanent(RCX,true,'A2OC')
    call SetPlayerAbilityAvailable(GetOwningPlayer(RCX),'A2OF',false)
  elseif QIE==4 then
    call UnitRemoveAbility(RCX,'B0GE')
    call UnitRemoveAbility(RCX,'A2OG')
    call UnitRemoveAbility(RCX,'A2OA')
    call UnitRemoveAbility(RCX,'A2OF')
    call UnitAddAbility2(RCX,'A2OH')
    call UnitMakeAbilityPermanent(RCX,true,'A2OB')
    call SetPlayerAbilityAvailable(GetOwningPlayer(RCX),'A2OH',false)
  endif
  call TriggerRegisterTimerEvent(RBX,20,false)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerAddCondition(RBX,Condition(function Func3264))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  call SaveReal(HY,(GetHandleId(RCX)),789,((19.9+(TimerGetElapsed(GlobalTimer)))*1.0))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func3266 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit caster=LoadUnitHandle(HY,h,2)
  local unit target=LoadUnitHandle(HY,h,17)
  local integer F6X=LoadInteger(HY,(GetHandleId(target)),281)
  local boolean ARA=(LoadBoolean(HY,h,280))
  local real dmg
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SetUnitTurnSpeed(target,GetUnitDefaultTurnSpeed(target))
    call SaveInteger(HY,(GetHandleId(target)),281,0)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call Func0855(target,0,0)
  elseif F6X==0 then
    call SetUnitTurnSpeed(target,GetUnitDefaultTurnSpeed(target))
    call SaveInteger(HY,(GetHandleId(target)),281,0)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and ARA==false then
    if F6X>0 and caster==GetEventDamageSource()and GetUnitAbilityLevel(caster,'A1EL')>0 then
      set dmg=0
      call SaveBoolean(HY,h,280,(true))
      if IsFireFlyDamage or GetEventDamage()>12 then
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",target,"chest"))
        set dmg=(5+5*GetUnitAbilityLevel(caster,'A1EL'))*F6X
      endif
      if IsFireFlyDamage then
        set dmg=dmg*0.5
      endif
      if IsHeroUnitId(GetUnitTypeId(target))==false then
        set dmg=dmg*0.5
      endif
      if dmg>0 then
        call DamageTarget(caster,target,1,dmg)
      endif
      call SaveBoolean(HY,h,280,(false))
    endif
  else
    call SetUnitTurnSpeed(target,GetUnitDefaultTurnSpeed(target)*0.3)
  endif
  set t=null
  set caster=null
  set target=null
  return false
endfunction

function Func3267 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real result=(LoadReal(HY,(GetHandleId(SGE)),675))
  local integer QIE=(LoadInteger(HY,(GetHandleId(SGE)),281))
  if(TimerGetElapsed(GlobalTimer))-result>=8 then
    call SetUnitTurnSpeed(SGE,GetUnitDefaultTurnSpeed(SGE))
    call SaveInteger(HY,(GetHandleId(SGE)),281,0)
    call Func0855(SGE,0,0)
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3268 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetEnumUnit()
  local trigger RBX
  local integer ZAE
  local integer QIE=GetUnitAbilityLevel(source,'A1EL')
  local integer ZBE=IMinBJ((LoadInteger(HY,(GetHandleId(RCX)),281))+1,10)
  if IsMagicImmune(RCX)then
    set source=null
    set RCX=null
    return
  endif
  call Func1032(LoadUnitHandle(TempHash,'nplm',0),RCX)
  call Func0855(RCX,QIE,ZBE)
  call SaveInteger(HY,(GetHandleId(RCX)),281,(ZBE))
  call SaveReal(HY,(GetHandleId(RCX)),675,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call SetUnitTurnSpeed(RCX,GetUnitDefaultTurnSpeed(RCX)*0.3)
  if IsHeroUnitId(GetUnitTypeId(RCX))and(IsUnitVisibleEx(RCX,GetOwningPlayer(source))or(IsUnitFogged(RCX,GetOwningPlayer(source))and(IsUnitDetected(RCX,GetOwningPlayer(source))or Func0592(RCX)==false)))then
    call TextTagOnUnit(I2S(ZBE)+"!",2,RCX,0.026,50,0,255,216,IsNeutralsOrObserversOrAllies(GetOwningPlayer(source)))
  endif
  if ZBE==1 then
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveUnitHandle(HY,(ZAE),17,(RCX))
    call SaveBoolean(HY,(ZAE),280,(false))
    call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_DAMAGED)
    call TriggerRegisterDeathEvent(RBX,RCX)
    call TriggerRegisterTimerEvent(RBX,1,true)
    call TriggerAddCondition(RBX,Condition(function Func3266))
  endif
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,8,false)
  call TriggerAddCondition(RBX,Condition(function Func3267))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func3269 takes nothing returns boolean
  return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func3270 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit u=GetTriggerUnit()
  local string s="Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl"
  call TimedReveal(GetOwningPlayer(u),2,x,y,500)
  call GroupEnumUnitsInRange(g,x,y,400,Condition(function Func3269))
  call SaveUnitHandle(TempHash,'nplm',0,u)
  call ForGroup(g,function Func3268)
  call KillGroup(g)
  call RemoveSavedHandle(TempHash,'nplm',0)
  call Func2933(x,y,250,s)
  set g=null
  set u=null
endfunction

function Bat_Napalm_Preload takes nothing returns nothing
  local integer i=1
  set StickyNapalm_1[1]='A1XC'
  set StickyNapalm_1[2]='A1XB'
  set StickyNapalm_1[3]='A1X4'
  set StickyNapalm_1[4]='A1X5'
  set StickyNapalm_1[5]='A1X6'
  set StickyNapalm_1[6]='A1X7'
  set StickyNapalm_1[7]='A1XA'
  set StickyNapalm_1[8]='A1X8'
  set StickyNapalm_1[9]='A1X9'
  set StickyNapalm_1[10]='A1XD'
  set StickyNapalm_2[1]='A1XM'
  set StickyNapalm_2[2]='A1XE'
  set StickyNapalm_2[3]='A1XF'
  set StickyNapalm_2[4]='A1XG'
  set StickyNapalm_2[5]='A1XH'
  set StickyNapalm_2[6]='A1XI'
  set StickyNapalm_2[7]='A1XJ'
  set StickyNapalm_2[8]='A1XK'
  set StickyNapalm_2[9]='A1XN'
  set StickyNapalm_2[10]='A1XL'
  set StickyNapalm_3[1]='A1XO'
  set StickyNapalm_3[2]='A1XV'
  set StickyNapalm_3[3]='A1XW'
  set StickyNapalm_3[4]='A1XQ'
  set StickyNapalm_3[5]='A1XR'
  set StickyNapalm_3[6]='A1XS'
  set StickyNapalm_3[7]='A1XX'
  set StickyNapalm_3[8]='A1XT'
  set StickyNapalm_3[9]='A1XU'
  set StickyNapalm_3[10]='A1XP'
  set StickyNapalm_4[1]='A1XY'
  set StickyNapalm_4[2]='A1XZ'
  set StickyNapalm_4[3]='A1Y5'
  set StickyNapalm_4[4]='A1Y6'
  set StickyNapalm_4[5]='A1Y7'
  set StickyNapalm_4[6]='A1Y1'
  set StickyNapalm_4[7]='A1Y2'
  set StickyNapalm_4[8]='A1Y3'
  set StickyNapalm_4[9]='A1Y4'
  set StickyNapalm_4[10]='A1Y0'
  loop
    call PreloadAbility(StickyNapalm_1[i])
    call PreloadAbility(StickyNapalm_2[i])
    call PreloadAbility(StickyNapalm_3[i])
    call PreloadAbility(StickyNapalm_4[i])
    set i=i+1
    exitwhen i>10
  endloop
  call AddToPurgeList('A37T','PRGE')
  call AddToPurgeList('B37T','PRGE')
  call AddToPurgeList('B0BS','PRGE')
  call AddDispellableBuff('B0BF')
  call AddDispellableBuff('B0BE')
endfunction

function Func3272 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,17))
  local real a=(LoadReal(HY,h,137))
  local real speed=(LoadReal(HY,h,138))
  local real lastX=(LoadReal(HY,h,6))
  local real lastY=(LoadReal(HY,h,7))
  local real x
  local real y
  local integer c=GetTriggerEvalCount(t)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c>10 then
    call CurrentSafestLocationWrapper(u)
    call KillTrees(GetUnitX(u),GetUnitY(u),200)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set x=lastX+speed*Cos(a)
    set y=lastY+speed*Sin(a)
    call SaveReal(HY,h,6,x)
    call SaveReal(HY,h,7,y)
    call ForceMovements(u,x,y,ModuloInteger(c,2)==1,false)
  endif
  set t=null
  set u=null
  return false
endfunction

function FlameBreakDamagePeriodicAct takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer c=LoadInteger(HY,h,0)
  local unit u=LoadUnitHandle(HY,h,1)
  local boolean b=GetUnitAbilityLevel(u,'A37T')==0
  if c==1 or IsDead(u)or b then
    if not b then
      call DamageTarget(LoadUnitHandle(HY,h,0),u,1,LoadReal(HY,h,0))
    endif
    call UnitRemoveAbility(u,'A37T')
    call UnitRemoveAbility(u,'B37T')
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  else
    call DamageTarget(LoadUnitHandle(HY,h,0),u,1,LoadReal(HY,h,0))
    call SaveInteger(HY,h,0,c-1)
  endif
  set u=null
  set t=null
endfunction

function FlameBreakDamagePeriodic takes unit caster,unit target returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call FlushChildHashtable(HY,h)
  call SaveUnitHandle(HY,h,0,caster)
  call SaveUnitHandle(HY,h,1,target)
  call SaveInteger(HY,h,0,integer502+2)
  call UnitAddAbility2(target,'A37T')
  call SaveReal(HY,h,0,integer502*5+20)
  call TimerStart(t,1,true,function FlameBreakDamagePeriodicAct)
  set t=null
endfunction

function Func3275 takes nothing returns nothing
  local unit u2
  local trigger t
  local integer h
  if GetEnumUnit()!=Roshan then
    set u2=GetEnumUnit()
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.03,true)
    call Func0433(u2)
    call TriggerRegisterDeathEvent(t,u2)
    call TriggerAddCondition(t,Condition(function Func3272))
    call SaveUnitHandle(HY,(h),17,(u2))
    call SaveReal(HY,(h),137,((Atan2(GetUnitY(u2)-real088,GetUnitX(u2)-real087))*1.0))
    call SaveReal(HY,(h),138,((Func0468((400-DistanceBetweenXY(real087,real088,GetUnitX(u2),GetUnitY(u2))),10)/10)*1.0))
    call SaveReal(HY,(h),6,((GetUnitX(u2))*1.0))
    call SaveReal(HY,(h),7,((GetUnitY(u2))*1.0))
    call FlameBreakDamagePeriodic(unit213,u2)
    set u2=null
    set t=null
  endif
endfunction

function Func3276 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,(h),19))
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local real a=(LoadReal(HY,(h),137))
  local group g
  local real ZEE=GetUnitX(d)
  local real ZWE=GetUnitY(d)
  local real ZYE=(LoadReal(HY,(h),6))
  local real ICX=(LoadReal(HY,(h),7))
  set ZEE=SafeX50(ZEE+36*Cos(a))
  set ZWE=SafeY50(ZWE+36*Sin(a))
  call SetUnitX(d,ZEE)
  call SetUnitY(d,ZWE)
  set tt_unit1=d
  if DistanceBetweenXY(ZEE,ZWE,ZYE,ICX)<40 or GetTriggerEvalCount(t)>LoadInteger(HY,h,11)then
    set ZEE=ZYE
    set ZWE=ICX
    set unit213=SKE
    set integer502=(LoadInteger(HY,(h),5))
    set real087=ZEE
    set real088=ZWE
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,ZEE,ZWE,400,Condition(function Func0820))
    call ForGroup(g,function Func3275)
    call KillUnit(d)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set d=null
  set SKE=null
  set g=null
  return false
endfunction

function Func3277 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a=Atan2(ty-GetUnitY(SKE),tx-GetUnitX(SKE))
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A19V')
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h0ED',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
  call SaveReal(HY,(h),137,((a)*1.0))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),19,(d))
  call SaveReal(HY,(h),6,((tx)*1.0))
  call SaveReal(HY,(h),7,((ty)*1.0))
  call SaveInteger(HY,h,11,R2I(DistanceBetweenXY(GetUnitX(d),GetUnitY(d),tx,ty))+2)
  call TriggerRegisterTimerEvent(t,0.04,true)
  call TriggerAddCondition(t,Condition(function Func3276))
  set SKE=null
  set d=null
  set t=null
endfunction

function Func3278 takes nothing returns nothing
  local unit source=unit214
  local unit RCX=GetEnumUnit()
  local unit M_X
  local group g
  if GetUnitCurrentOrder(RCX)==0 then
    set g=GetAvailableGroup()
    set tt_unit1=RCX
    call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),825,Condition(function DefaultEnemyFilter))
    set M_X=FirstOfGroup(g)
    if M_X!=null then
      call GroupRemoveUnit(g,M_X)
    endif
    if FirstOfGroup(g)==null and M_X==source then
      call IssueTargetOrder(RCX,"attack",M_X)
    endif
    call KillGroup(g)
    set M_X=null
    set g=null
  endif
  set source=null
  set RCX=null
endfunction

function Func3279 takes unit source returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set unit214=source
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1000,Condition(function Func0841))
  call ForGroup(g,function Func3278)
  call KillGroup(g)
  set g=null
endfunction

function Func3280 takes unit source,integer ZAE,integer QIE returns nothing
  local group g=GetAvailableGroup()
  local group IBI=GetAvailableGroup()
  local integer ZBE=0
  local unit u
  set tt_unit1=source
  loop
    exitwhen ZBE>QIE
    call GroupEnumUnitsInRange(IBI,LoadReal(HY,ZAE,2300+ZBE),LoadReal(HY,ZAE,2500+ZBE),225,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call GroupAddGroup(IBI,g)
    call GroupClear(IBI)
    set ZBE=ZBE+1
  endloop
  call KillGroup(IBI)
  if FirstOfGroup(g)!=null then
    set unit214=source
    set integer503=GetUnitAbilityLevel(source,'A19Z')*10-5
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call DamageTarget(source,u,1,integer503)
      call GroupRemoveUnit(g,u)
    endloop
  endif
  call KillGroup(g)
  set g=null
  set IBI=null
endfunction

function Func3281 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local real result=(LoadReal(HY,(h),23))
  local real ZEE=(LoadReal(HY,(h),24))
  local integer lvl=(LoadInteger(HY,(h),34))
  local integer ZBE
  local real ZWE
  local real ZYE
  if GetTriggerEvalCount(t)>360 then
    set ZBE=0
    loop
      exitwhen ZBE>lvl
      call DestroyEffect(LoadEffectHandle(HY,(h),(2700+ZBE)))
      set ZBE=ZBE+1
    endloop
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SaveBoolean(HY,h,0,true)
  elseif LoadBoolean(HY,h,0)==false then
    set ZWE=GetUnitX(u)
    set ZYE=GetUnitY(u)
    if udg_ObserverMode then
      call Func3279(u)
    endif
    if DistanceBetweenXY(ZWE,ZYE,result,ZEE)>125 then
      set lvl=lvl+1
      call SaveInteger(HY,(h),34,(lvl))
      call SaveReal(HY,(h),23,((ZWE)*1.0))
      call SaveReal(HY,(h),24,((ZYE)*1.0))
      call SaveEffectHandle(HY,(h),(2700+lvl),(AddSpecialEffect("FireFlyGroundEffect.mdx",ZWE,ZYE)))
      call SaveReal(HY,(h),(2300+lvl),((ZWE)*1.0))
      call SaveReal(HY,(h),(2500+lvl),((ZYE)*1.0))
    endif
    if ModuloInteger(GetTriggerEvalCount(t),10)==0 then
      set IsFireFlyDamage=true
      call Func3280(u,h,lvl)
      set IsFireFlyDamage=false
    endif
    call KillTrees(GetUnitX(u),GetUnitY(u),100)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3282 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerAddCondition(RBX,Condition(function Func3281))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveEffectHandle(HY,(ZAE),2700,(AddSpecialEffect("FireFlyGroundEffect.mdx",GetUnitX(source),GetUnitY(source))))
  call SaveReal(HY,(ZAE),23,((GetUnitX(source))*1.0))
  call SaveReal(HY,(ZAE),24,((GetUnitY(source))*1.0))
  call SaveReal(HY,(ZAE),2300,((GetUnitX(source))*1.0))
  call SaveReal(HY,(ZAE),2500,((GetUnitY(source))*1.0))
  set source=null
  set RBX=null
endfunction

function Func3283 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  if IsDead(source)then
    return false
  endif
  if GetUnitTypeId(source)=='O016' then
    call SetUnitFlyHeight(source,170,0)
  elseif GetUnitTypeId(source)=='O017' then
    call SetUnitFlyHeight(source,220,0)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3284 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterTimerEvent(RBX,2,true)
  call TriggerAddCondition(RBX,Condition(function Func3283))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set RBX=null
  set source=null
endfunction

function Func3285 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='O016' or GetUnitTypeId(GetTriggerUnit())=='E02X' then
    call Func3282()
  else
    call Func0431(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
    call SetUnitVertexColor(GetTriggerUnit(),255,255,255,255)
  endif
endfunction

function Func3286 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=(LoadUnitHandle(HY,h,19))
  local unit HDE=LoadUnitHandle(HY,h,15)
  local real ILX=DistanceBetweenXY(GetUnitX(u),GetUnitY(u),GetUnitX(SGE),GetUnitY(SGE))
  local real a
  local real ZWE=(LoadReal(HY,h,57))
  local real ox=(LoadReal(HY,h,282))
  local real oy=(LoadReal(HY,h,283))
  local real nx
  local real ny
  local integer c=GetTriggerEvalCount(t)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c>R2I(20*ZWE)then
    call CurrentSafestLocationWrapper(SGE)
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
    call SetUnitPathing2(SGE,true)
    call Func0803(u)
    call KillTrees(GetUnitX(SGE),GetUnitY(SGE),175)
  else
    call SetUnitX(d,GetUnitX(u))
    call SetUnitY(d,GetUnitY(u))
    if LoadBoolean(HY,h,15)and ModuloInteger(c,9)==0 then
      call DamageTarget(HDE,SGE,1,50)
    endif
    if GetUnitAbilityLevel(SGE,'B0BE')==0 or DistanceBetweenXY(ox,oy,GetUnitX(u),GetUnitY(u))>400 or(DistanceBetweenUnits(u,SGE)>400 and LoadInteger(HY,GetHandleId(SGE),4407)==1)then
      call CurrentSafestLocationWrapper(SGE)
      call DestroyEffect(LoadEffectHandle(HY,h,32))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call KillUnit(d)
      call SetUnitPathing2(SGE,true)
      call Func0803(u)
      call KillTrees(GetUnitX(SGE),GetUnitY(SGE),175)
    else
      call SaveReal(HY,h,282,GetUnitX(u))
      call SaveReal(HY,h,283,GetUnitY(u))
      if ILX>300 then
        set a=Atan2(GetUnitY(SGE)-GetUnitY(u),GetUnitX(SGE)-GetUnitX(u))
        set nx=GetUnitX(u)+300*Cos(a)
        set ny=GetUnitY(u)+300*Sin(a)
        call SetUnitX(SGE,nx)
        call SetUnitY(SGE,ny)
      endif
    endif
  endif
  set t=null
  set u=null
  set SGE=null
  set d=null
  set HDE=null
  return false
endfunction

function Func3287 takes unit caster,unit source,unit target,boolean disarm,integer lvl,boolean isAgh returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(caster),'u00Y',GetUnitX(caster),GetUnitY(caster),0)
  local group g
  local unit u
  if isAgh then
    set g=GetAvailableGroup()
    set tt_unit1=source
    call GroupEnumUnitsInRange(g,GetUnitX(target),GetUnitY(target),425,Condition(function Func0819))
    call GroupRemoveUnit(g,target)
    set u=GetClosestOfGroup(g,GetUnitX(target),GetUnitY(target))
    call KillGroup(g)
    if u!=null then
      call SaveUnitHandle(TempHash,'A1MV',0,target)
      call SaveUnitHandle(TempHash,'A1MV',1,u)
      call SaveUnitHandle(TempHash,'A1MV',2,caster)
      call SaveBoolean(TempHash,'A1MV',0,isAgh)
      call SaveInteger(TempHash,'A1MV',0,lvl)
      call ExecuteFunc("FlamingLasso_Agh")
    endif
    set u=null
  endif
  call UnitAddAbility2(d,'A19N')
  call SetUnitAbilityLevel(d,'A19N',lvl)
  call IssueTargetOrder(d,"magicleash",target)
  call SetUnitPathing(d,false)
  call SetUnitPathing2(target,false)
  if disarm then
    call Func0802(caster)
  endif
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,caster)
  call TriggerRegisterDeathEvent(t,target)
  call SaveBoolean(HY,h,15,isAgh)
  if disarm==false and target!=source then
    call TriggerRegisterDeathEvent(t,source)
    call SaveBoolean(HY,h,15,true)
  endif
  call TriggerAddCondition(t,Condition(function Func3286))
  call SaveUnitHandle(HY,h,2,(caster))
  call SaveUnitHandle(HY,h,17,target)
  call Func0433(target)
  call SaveUnitHandle(HY,h,15,source)
  call SaveUnitHandle(HY,h,19,(d))
  call SaveReal(HY,h,57,((2.5+lvl*0.5)*1.0))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("Abilities\\Spells\\Human\\AerialShackles\\AerialShacklesTarget.mdl",target,"chest")))
  call SaveReal(HY,h,282,((GetUnitX(caster))*1.0))
  call SaveReal(HY,h,283,((GetUnitY(caster))*1.0))
  set t=null
  set d=null
endfunction

function FlamingLasso_Agh takes nothing returns nothing
  local unit caster=LoadUnitHandle(TempHash,'A1MV',2)
  local unit target=LoadUnitHandle(TempHash,'A1MV',0)
  local unit u=LoadUnitHandle(TempHash,'A1MV',1)
  if IsBlocked(u)==false then
    call Func3287(target,caster,u,false,LoadInteger(TempHash,'A1MV',0),false)
  else
    call RemoveLinkenBuff(u)
  endif
  call FlushChildHashtable(TempHash,'A1MV')
  set caster=null
  set u=null
  set target=null
endfunction

function FlamingLasso_SpellEffect takes nothing returns nothing
  if GetSpellTargetUnit()!=Roshan then
    call Func3287(GetTriggerUnit(),GetTriggerUnit(),GetSpellTargetUnit(),true,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),GetSpellAbilityId()=='A1MV')
  endif
endfunction

function Func3290 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer QIE=(LoadInteger(HY,(h),5))
  local real x=(LoadReal(HY,(h),23))
  local real y=(LoadReal(HY,(h),24))
  local real cx=GetUnitX(SGE)
  local real cy=GetUnitY(SGE)
  local real ILX=SquareRoot((x-cx)*(x-cx)+(y-cy)*(y-cy))
  local integer c=(LoadInteger(HY,(h),25))
  local real dmg=0.15*(QIE+1)*ILX
  local boolean AYA=LoadBoolean(HY,h,10)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c>48 then
    call RemoveSavedHandle(HY,GetHandleId(SGE),'A0IH')
    call UnitRemoveAbility(SGE,'A0IH')
    call UnitRemoveAbility(SGE,'B08L')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call SaveReal(HY,(h),23,((cx)*1.0))
    call SaveReal(HY,(h),24,((cy)*1.0))
    call SaveInteger(HY,(h),25,(c+1))
    if ILX<=1300. and AYA==false then
      if dmg>0 then
        if dmg>5 then
          call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",SGE,"origin"))
        endif
        call DamageTarget(SKE,SGE,7,dmg)
      endif
    endif
    call SaveBoolean(HY,h,10,IsUnitInvulnerable(SGE))
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3291 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t
  local integer h
  local integer QIE=GetUnitAbilityLevel(SKE,'A0LH')
  if IsCourier(SGE)==false then
    if HaveSavedHandle(HY,GetHandleId(SGE),'A0IH')then
      set t=LoadTriggerHandle(HY,GetHandleId(SGE),'A0IH')
      set h=GetHandleId(t)
    else
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call SaveTriggerHandle(HY,GetHandleId(SGE),'A0IH',t)
      call SaveUnitHandle(HY,(h),17,(SGE))
      call SaveReal(HY,(h),23,((GetUnitX(SGE))*1.0))
      call SaveReal(HY,(h),24,((GetUnitY(SGE))*1.0))
      call TriggerRegisterTimerEvent(t,0.25,true)
      call TriggerAddCondition(t,Condition(function Func3290))
      call TriggerRegisterDeathEvent(t,SGE)
    endif
    call UnitAddAbility3(SGE,'A0IH',QIE)
    call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",SGE,"chest"))
    call SaveUnitHandle(HY,(h),2,(SKE))
    call SaveInteger(HY,(h),25,0)
    call SaveInteger(HY,(h),5,(QIE))
    call SaveBoolean(HY,h,10,IsUnitInvulnerable(SGE))
    set t=null
  endif
  set SKE=null
  set SGE=null
endfunction

function Func3292 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit bs=(LoadUnitHandle(HY,h,2))
  local integer i=0
  local player p
  loop
    exitwhen i>5
    set p=Sentinels[i]
    if units022[GetPlayerId(p)]==null or IsPlayerAlly(GetOwningPlayer(bs),p)or Func0799(units022[GetPlayerId(p)])then
      call SetUnitX(units021[GetPlayerId(p)],Func0635(bs))
      call SetUnitY(units021[GetPlayerId(p)],Func0636(bs))
    else
      if IsUnitVisibleEx(units022[GetPlayerId(p)],GetOwningPlayer(bs))==false then
        call KillUnit(CreateUnit(GetOwningPlayer(bs),'o02C',GetUnitX(units022[GetPlayerId(p)]),GetUnitY(units022[GetPlayerId(p)]),0))
      endif
      call SetUnitX(units021[GetPlayerId(p)],GetUnitX(units022[GetPlayerId(p)]))
      call SetUnitY(units021[GetPlayerId(p)],GetUnitY(units022[GetPlayerId(p)]))
    endif
    set p=Scourges[i]
    if units022[GetPlayerId(p)]==null or IsPlayerAlly(GetOwningPlayer(bs),p)or Func0799(units022[GetPlayerId(p)])then
      call SetUnitX(units021[GetPlayerId(p)],Func0635(bs))
      call SetUnitY(units021[GetPlayerId(p)],Func0636(bs))
    else
      call KillUnit(CreateUnit(GetOwningPlayer(bs),'o02C',GetUnitX(units022[GetPlayerId(p)]),GetUnitY(units022[GetPlayerId(p)]),0))
      if IsUnitVisibleEx(units022[GetPlayerId(p)],GetOwningPlayer(bs))==false then
      endif
      call SetUnitX(units021[GetPlayerId(p)],GetUnitX(units022[GetPlayerId(p)]))
      call SetUnitY(units021[GetPlayerId(p)],GetUnitY(units022[GetPlayerId(p)]))
    endif
    set i=i+1
  endloop
  set p=null
  set t=null
  set bs=null
  return false
endfunction

function Func3293 takes unit source,player whichPlayer,boolean ZSE returns nothing
  if ZSE then
    set units022[GetPlayerId(GetOwningPlayer(source))]=source
  else
    set units022[GetPlayerId(GetOwningPlayer(source))]=null
  endif
endfunction

function Func3294 takes nothing returns nothing
  call Func3293(GetEnumUnit(),GetOwningPlayer(unit215),true)
  if GetUnitAbilityLevel(GetEnumUnit(),'Bdet')==0 and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<=0.3 then
    call UnitAddAbility2(GetEnumUnit(),'A347')
    call Func1330(unit215,GetEnumUnit(),'A347')
  endif
endfunction

function Func3295 takes nothing returns nothing
  local real d=0.25
  if IsDead(unit215)or GetUnitAbilityLevel(unit215,'A36D')==1 or IsUnitInGroup(GetEnumUnit(),group032)==false or GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>d then
    call GroupRemoveUnit(group031,GetEnumUnit())
    call Func3293(GetEnumUnit(),GetOwningPlayer(unit215),false)
    call UnitRemoveAbility(GetEnumUnit(),'A347')
    call UnitRemoveAbility(GetEnumUnit(),'B347')
  endif
endfunction

function Func3296 takes nothing returns nothing
  local real d
  if IsDead(unit215)==false and GetUnitAbilityLevel(unit215,'A36D')==0 and IsUnitInGroup(GetEnumUnit(),group031)==false and IsUnitIllusion(GetEnumUnit())==false then
    set d=0.25
    if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<d then
      call GroupAddUnit(group031,GetEnumUnit())
    endif
  endif
endfunction

function Func3297 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsDead(GetFilterUnit())==false and NonHeroId(GetFilterUnit())==false
endfunction

function Func3298 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit bs=(LoadUnitHandle(HY,h,2))
  local group g=(LoadGroupHandle(HY,h,22))
  local group gg=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(bs,'A0I8')
  local integer ZBE
  local group g2
  local unit u
  local real FXE=0
  local real r
  local real A5A=QIE*1.
  local real A6A=A5A
  local real hp
  set tt_unit1=bs
  set unit215=bs
  set group031=g
  call GroupEnumUnitsInRange(gg,0,0,25025,Condition(function Func0835))
  call ForGroup(gg,function Func3296)
  set group032=gg
  call ForGroup(group031,function Func3295)
  call ForGroup(group031,function Func3294)
  set g2=GetAvailableGroup()
  set tt_unit1=bs
  call GroupEnumUnitsInRange(g2,0,0,25000,Condition(function Func3297))
  loop
    set u=FirstOfGroup(g2)
    exitwhen u==null
    set hp=GetWidgetLife(u)/ GetUnitState(u,UNIT_STATE_MAX_LIFE)
    if hp<0.75 then
      set hp=Func0468(hp,0.25)
      set r=(0.75-hp)*2
      set FXE=FXE+(A6A*R2I(r*8+8))
    endif
    call GroupRemoveUnit(g2,u)
  endloop
  call KillGroup(g2)
  if GetUnitAbilityLevel(bs,'A36D')==1 then
    set FXE=0
  endif
  set g2=null
  set FXE=R2I(FXE)
  if FirstOfGroup(group031)==null or GetUnitAbilityLevel(bs,'A36D')==1 then
    call UnitRemoveAbility(bs,'A214')
  elseif GetUnitAbilityLevel(bs,'A36D')==0 then
    call UnitAddAbility2(bs,'A214')
  endif
  if IsDead(bs)==false then
    call AddBonusDamage(bs,R2I(FXE))
    call CustomSpeed(bs,R2I(FXE),0)
  endif
  call KillGroup(gg)
  set t=null
  set bs=null
  set gg=null
  set g=null
  return false
endfunction

function Func3299 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local player whichPlayer
  call TriggerRegisterTimerEvent(RBX,0.25,true)
  call TriggerAddCondition(RBX,Condition(function Func3298))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveGroupHandle(HY,(ZAE),22,(GetAvailableGroup()))
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.04,true)
  call TriggerAddCondition(RBX,Condition(function Func3292))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set whichPlayer=Sentinels[1]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Sentinels[2]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Sentinels[3]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Sentinels[4]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Sentinels[5]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Scourges[1]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Scourges[2]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Scourges[3]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Scourges[4]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set whichPlayer=Scourges[5]
  set units021[GetPlayerId(whichPlayer)]=CreateUnit(GetOwningPlayer(source),'o02B',Func0635(source),Func0636(source),0)
  set units022[GetPlayerId(whichPlayer)]=null
  set RBX=null
  set source=null
endfunction

function Func3300 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit A8A
  local real Y2E
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
    set A8A=GetKillingUnit()
    if GetUnitAbilityLevel(A8A,'Aloc')>0 or GetUnitAbilityLevel(A8A,'A04R')>0 then
      set A8A=udg_Hero[GetPlayerId(GetOwningPlayer(A8A))]
    endif
    if GetKillingUnit()==u or A8A==u then
      if GetUnitAbilityLevel(u,'A30F')>0 then
        if IsDead(u)==false and IsUnitIllusion(GetTriggerUnit())==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!='n00L' then
          call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",u,"overhead"))
          call SetWidgetLife(u,GetWidgetLife(u)+GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)*(GetUnitAbilityLevel(u,'A30F')*0.02+0.17))
        endif
      endif
    elseif GetTriggerUnit()==u then
      if GetUnitAbilityLevel(u,'A30F')>0 then
        if IsDead(A8A)==false and IsUnitIllusion(u)==false and IsUnitType(A8A,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(u)!='n00L' then
          call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",A8A,"overhead"))
          call SetWidgetLife(A8A,GetWidgetLife(A8A)+GetUnitState(u,UNIT_STATE_MAX_LIFE)*(GetUnitAbilityLevel(u,'A30F')*0.02+0.17))
        endif
        set A8A=null
      endif
      call UnitRemoveAbility(u,'A30F')
      call UnitRemoveAbility(u,'B30F')
      call Func0670(u,-LoadReal(HY,h,0))
      call FlushChildHashtable(HY,h)
      call RemoveSavedHandle(MHT,GetHandleId(u),'A2X9')
      call RemoveSavedReal(HY,GetHandleId(u),'A2X9')
      call CleanTrigger(t)
    endif
  else
    set Y2E=LoadReal(HY,h,1)
    if Y2E<TimerGetElapsed(GlobalTimer)or GetUnitAbilityLevel(u,'A30F')==0 then
      call UnitRemoveAbility(u,'A30F')
      call UnitRemoveAbility(u,'B30F')
      call Func0670(u,-LoadReal(HY,h,0))
      call FlushChildHashtable(HY,h)
      call RemoveSavedHandle(MHT,GetHandleId(u),'A2X9')
      call RemoveSavedReal(HY,GetHandleId(u),'A2X9')
      call CleanTrigger(t)
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3301 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local real D1E=8+QIE
  local real NVA=0.2+0.05*QIE
  local trigger t
  local integer h
  local real NEA
  if HaveSavedHandle(MHT,GetHandleId(SGE),'A2X9')then
    set t=LoadTriggerHandle(MHT,GetHandleId(SGE),'A2X9')
    set h=GetHandleId(t)
    set NEA=LoadReal(HY,h,0)
    if NEA!=NVA then
      call Func0670(SGE,NVA-NEA)
      call SaveReal(HY,h,0,NVA)
      call SaveReal(HY,GetHandleId(SGE),'A2X9',NVA/ 2.)
    endif
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call SaveUnitHandle(HY,h,0,SGE)
    call SaveTriggerHandle(MHT,GetHandleId(SGE),'A2X9',t)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(t,Condition(function Func3300))
    call SaveReal(HY,h,0,NVA)
    call Func0670(SGE,NVA)
    call SaveReal(HY,GetHandleId(SGE),'A2X9',NVA/ 2.)
  endif
  call UnitAddAbility2(SGE,'A30F')
  call SetUnitAbilityLevel(SGE,'A30F',QIE)
  if IsPlayerAlly(GetOwningPlayer(SKE),GetOwningPlayer(SGE))then
    call FuckingAssistBuffWrap(SKE,SGE)
  else
    call Func1032(SKE,SGE)
  endif
  call SaveReal(HY,h,1,D1E+TimerGetElapsed(GlobalTimer))
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3302 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false)
endfunction

function Func3303 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local effect fx=LoadEffectHandle(HY,h,1)
  local real dmg=LoadReal(HY,h,0)
  local integer QIE=LoadInteger(HY,h,0)
  local group g=GetAvailableGroup()
  local real x=LoadReal(HY,h,10)
  local real y=LoadReal(HY,h,11)
  local unit u2
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',x,y,0)
  call PlaySoundAtPos(sound003,x,y)
  call UnitAddAbility(d,'A30G')
  call SetUnitAbilityLevel(d,'A30G',QIE)
  call ImminentTriggeredPointOrder(d,852592,x,y)
  set d=null
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,x,y,625,Condition(function Func3302))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(u,u2,3,dmg)
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodRiteTarget.mdx",u2,"chest"))
    call GroupRemoveUnit(g,u2)
  endloop
  call DestroyEffect(fx)
  call KillGroup(g)
  set fx=null
  set t=null
  set u=null
endfunction

function Func3304 takes unit u,integer QIE returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local effect fx=AddSpecialEffect("war3mapImported\\Bloodrite.mdx",x,y)
  call TimedReveal(GetOwningPlayer(u),2.5,x,y,300)
  call PlaySoundAtPos(sound002,x,y)
  call TimerStart(t,2.6,false,function Func3303)
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,QIE*40+80)
  call SaveInteger(HY,h,0,QIE)
  call SaveEffectHandle(HY,h,1,fx)
  call SaveReal(HY,h,10,x)
  call SaveReal(HY,h,11,y)
  set fx=null
  set t=null
endfunction

function Func3305 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or IsBlocked(GetSpellTargetUnit())==false then
    call Func3301()
  else
    call RemoveLinkenBuff(GetSpellTargetUnit())
  endif
endfunction

function Func3306 takes nothing returns nothing
  call Func3304(GetTriggerUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A2X8'))
endfunction

function Func3307 takes nothing returns nothing
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
    call Func2329()
  endif
endfunction

function Func3308 takes nothing returns nothing
  set boolean056=true
  call AddToPurgeList('A30F','PRGC')
  call AddToPurgeList('B30F','PRGC')
  call AddToPurgeList('B30G','PRGE')
endfunction

function Func3309 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  call KillUnit(LoadUnitHandle(HY,h,0))
  call KillUnit(LoadUnitHandle(HY,h,1))
  call DestroyTrigger(t)
  call FlushChildHashtable(HY,h)
  set t=null
endfunction

function Func3310 takes unit NNA returns nothing
  local trigger t=CreateTrigger()
  local unit d=CreateUnit(GetOwningPlayer(NNA),'o003',GetUnitX(NNA),GetUnitY(NNA),0)
  call TriggerRegisterDeathEvent(t,NNA)
  call TriggerAddCondition(t,Condition(function Func3309))
  call SaveUnitHandle(HY,GetHandleId(t),0,NNA)
  call SaveUnitHandle(HY,GetHandleId(t),1,d)
  set d=null
  set t=null
endfunction

function Func3311 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit NNA=CreateUnit(GetOwningPlayer(u),'n036',GetSpellTargetX(),GetSpellTargetY(),GetRandomReal(0,360))
  local integer hu=GetHandleId(u)
  local integer QIE=GetUnitAbilityLevel(u,'A0BG')+GetUnitAbilityLevel(u,'A0Bg')
  local integer count=(LoadInteger(HY,(hu),279))
  local unit NCA=(LoadUnitHandle(HY,(hu),1401))
  local integer i=1
  call Func3310(NNA)
  set count=count+1
  call SaveUnitHandle(HY,(hu),(1400+count),(NNA))
  call SetUnitAbilityLevel(NNA,'A0BF',QIE)
  if(count>QIE*2)then
    call KillUnit(NCA)
    loop
      exitwhen i==count
      call SaveUnitHandle(HY,(hu),(1400+i),((LoadUnitHandle(HY,(hu),(1400+i+1)))))
      set i=i+1
    endloop
    set count=count-1
  endif
  call SaveInteger(HY,(hu),279,(count))
  call SaveInteger(HY,GetHandleId(NNA),'wnum',count)
  set u=null
  set NNA=null
  set NCA=null
endfunction

function Func3312 takes nothing returns boolean
  local real XXO=0
  if GetFilterUnit()==tt_unit1 then
    set XXO=1000
  elseif GetUnitTypeId(GetFilterUnit())=='n036' then
    set XXO=1400
  endif
  if XXO==0 or IsDead(GetFilterUnit())then
    return false
  endif
  return DistanceBetweenXY(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),tt_real1,tt_real2)<XXO
endfunction

function Func3313 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if ImminentTriggeredPointOrder(u,852224,LoadReal(HY,h,5),LoadReal(HY,h,6))then
  endif
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set u=null
  set t=null
endfunction

function Func3314 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  local trigger t
  local integer h
  local integer O6O=LoadInteger(HY,hu,800)
  local group g
  local unit u2
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local boolean isCloseEnough=GetSpellAbilityId()=='A0Bg'
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
    if O6O<=0 then
      call UnitRemoveAbility(u,'A30K')
      call InterruptUnitError(u,'TX0U')
    else
    endif
  else
    call SaveInteger(HY,hu,800,O6O-1)
    call Func0458(u,O6O,false)
    call Func3311()
    call UnitRemoveAbility(u,'A30K')
  endif
  set t=null
  set u=null
endfunction

function Func3315 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local group g
  local unit u2
  local real x=GetOrderPointX()
  local real y=GetOrderPointY()
  set g=GetAvailableGroup()
  set tt_unit1=u
  set tt_player1=GetOwningPlayer(u)
  set tt_real1=x
  set tt_real2=y
  call GroupEnumUnitsOfPlayer(g,tt_player1,Condition(function Func3312))
  set u2=FirstOfGroup(g)
  if u2==null then
    call UnitAddAbility2(u,'A30K')
  else
    call UnitRemoveAbility(u,'A30K')
  endif
  call KillGroup(g)
  set u=null
  set u2=null
endfunction

function Func3316 takes nothing returns nothing
  local unit MFX=udg_Hero[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
  local integer hu=GetHandleId(MFX)
  local integer count=(LoadInteger(HY,(hu),279))
  local unit u2
  local integer offset=LoadInteger(HY,GetHandleId(GetTriggerUnit()),'wnum')
  local integer i=1
  if offset>0 then
    set i=0
    loop
      call RemoveSavedHandle(HY,hu,1400+offset+i)
      exitwhen HaveSavedHandle(HY,hu,1400+offset+i+1)==false
      call SaveUnitHandle(HY,(hu),(1400+offset+i),LoadUnitHandle(HY,hu,1400+offset+i+1))
      set i=i+1
    endloop
  endif
  call FlushChildHashtable(HY,GetHandleId(GetTriggerUnit()))
  call SaveInteger(HY,(hu),279,(count-1))
  call KillUnit(GetTriggerUnit())
  set MFX=null
  set u2=null
endfunction

function Func3317 takes nothing returns boolean
  if GetUnitTypeId(GetFilterUnit())=='n036' and IsDead(GetFilterUnit())==false then
    call SetUnitAbilityLevel(GetFilterUnit(),'A0BF',GetLearnedSkillLevel())
  endif
  return false
endfunction

function Func3318 takes nothing returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function Func3317))
  call KillGroup(g)
endfunction

function Func3319 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,0))
  local real WNE=(LoadReal(HY,h,0))
  local integer O6O=(LoadInteger(HY,(GetHandleId(u)),800))
  local group g
  local real cd=40.
  if GetUnitAbilityLevel(u,'A39S')==1 then
    set cd=cd*(100.-25*1.)/100.
  endif
  if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
    if(GetSpellAbilityId()=='A0BG' or GetSpellAbilityId()=='A0Bg')and O6O<=0 then
      call Func0656(u)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_HERO_SKILL then
    if GetLearnedSkill()=='A0BG' or GetLearnedSkill()=='A0Bg' then
      if GetLearnedSkillLevel()==1 then
        call SaveInteger(HY,GetHandleId(u),800,O6O+1)
        call Func0458(u,O6O,true)
      else
        call Func3318()
      endif
    endif
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if O6O<GetUnitAbilityLevel(u,'A0BG')+GetUnitAbilityLevel(u,'A0Bg')then
      set WNE=WNE-0.2
      if WNE<=0. or boolean147 then
        call SaveInteger(HY,GetHandleId(u),800,O6O+1)
        call Func0458(u,O6O,true)
        call SaveReal(HY,h,0,cd*1.0)
      else
        call SaveReal(HY,h,0,WNE*1.0)
      endif
    endif
  else
    if GetIssuedOrderId()==852224 then
      call Func3315()
    endif
    if GetUnitAbilityLevel(u,'A30K')>0 then
      if GetIssuedOrderId()!=852224 then
        call UnitRemoveAbility(u,'A30K')
      endif
    endif
  endif
  set u=null
  set t=null
  return false
endfunction

function Func3320 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterUnitEvent(t,tt_unit1,EVENT_UNIT_SPELL_CAST)
  call TriggerRegisterUnitEvent(t,tt_unit1,EVENT_UNIT_HERO_SKILL)
  call TriggerRegisterUnitEvent(t,tt_unit1,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerAddCondition(t,Condition(function Func3319))
  call SaveUnitHandle(HY,GetHandleId(t),0,tt_unit1)
  call SaveReal(HY,GetHandleId(t),0,30.)
  call SaveInteger(HY,GetHandleId(tt_unit1),800,0)
  call SaveTriggerHandle(HY,GetHandleId(tt_unit1),800,t)
  call HideAbility('A30K')
  set t=null
endfunction

function Func3321 takes unit source returns nothing
  local integer ZAE=GetHandleId(source)
  local integer QIE=GetUnitAbilityLevel(source,'A0BG')+GetUnitAbilityLevel(source,'A0Bg')
  local integer ZBE=(LoadInteger(HY,(ZAE),279))
  local integer ZCE=1
  local unit RCX
  loop
    exitwhen ZCE>ZBE
    set RCX=(LoadUnitHandle(HY,(ZAE),(1400+ZCE)))
    call SetUnitAbilityLevel(RCX,'A0BF',QIE)
    set ZCE=ZCE+1
  endloop
  set RCX=null
endfunction

function Func3322 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call UnitAddAbility2(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0))
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
endfunction

function Func3323 takes unit u,integer i returns nothing
  local integer h=DelayedCallBack(0,function Func3322)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,i)
endfunction

function Func3324 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit MFX=(LoadUnitHandle(HY,h,366))
  local integer hu=GetHandleId(udg_Hero[GetPlayerId(GetOwningPlayer(MFX))])
  local integer NSA=(LoadInteger(HY,(hu),279))
  local integer NTA=1
  local boolean NUA=false
  local boolean NWA=false
  local unit d
  local integer QIE
  if MFX==null then
    call FlushChildHashtable(HY,(GetHandleId(GetTriggeringTrigger())))
    call CleanTrigger(GetTriggeringTrigger())
  else
    if(LoadReal(HY,(GetHandleId(MFX)),785))+6>(TimerGetElapsed(GlobalTimer))then
      set NWA=true
    endif
    loop
      exitwhen NTA>NSA or NUA
      set NUA=IsUnitInRange(MFX,(LoadUnitHandle(HY,(hu),(1400+NTA))),900)
      set NTA=NTA+1
    endloop
    if NUA==false then
      call UnitRemoveAbility(MFX,'B01C')
      call UnitRemoveAbility(MFX,'A3LR')
      call UnitRemoveAbility(MFX,'A3LS')
      call UnitRemoveAbility(MFX,'A3LT')
      call UnitRemoveAbility(MFX,'A3LU')
      call UnitRemoveAbility(MFX,'B30L')
    endif
    set QIE=GetUnitAbilityLevel(udg_Hero[GetPlayerId(GetOwningPlayer(MFX))],'A0BG')+GetUnitAbilityLevel(udg_Hero[GetPlayerId(GetOwningPlayer(MFX))],'A0Bg')
    if IsUnitType(MFX,UNIT_TYPE_HERO)then
      if GetUnitAbilityLevel(MFX,'B01C')>0 then
        if NWA==false then
          if Func0667(GetUnitX(MFX))!=GetUnitX(MFX)or Func0668(GetUnitY(MFX))!=GetUnitY(MFX)then
            call SetUnitX(MFX,Func0667(GetUnitX(MFX)))
            call SetUnitY(MFX,Func0668(GetUnitY(MFX)))
          endif
          call SaveBoolean(HY,h,'phsd',true)
          if GetUnitTypeId(MFX)=='U006'then
            call Func0980(MFX,'A35N')
          endif
          call SetUnitFlyHeight(MFX,0,0)
          if GetUnitAbilityLevel(MFX,'A3LR'-1+QIE)==0 then
            if GetUnitAbilityLevel(MFX,'B30L')!=0 then
              call UnitRemoveAbility(MFX,'B30L')
            endif
            call UnitAddAbility2(MFX,'A3LR'-1+QIE)
          endif
        else
          call SaveBoolean(HY,h,'phsd',false)
          if GetUnitTypeId(MFX)=='U007'then
            call Func0980(MFX,'A35O')
          endif
          if LoadBoolean(HY,h,'phsd')then
            call KillTrees(GetUnitX(MFX),GetUnitY(MFX),200)
          endif
        endif
        if GetUnitAbilityLevel(MFX,'A021')==0 then
          call RemoveEndlessFadetime(MFX)
          call Func3323(MFX,'A021')
        endif
      else
        call UnitRemoveAbility(MFX,'A021')
        call UnitRemoveAbility(MFX,'A3LR')
        call UnitRemoveAbility(MFX,'A3LS')
        call UnitRemoveAbility(MFX,'A3LT')
        call UnitRemoveAbility(MFX,'A3LU')
        call UnitRemoveAbility(MFX,'B30L')
        if GetUnitTypeId(MFX)=='U007'then
          call Func0980(MFX,'A35O')
        endif
        if LoadBoolean(HY,h,'phsd')then
          call KillTrees(GetUnitX(MFX),GetUnitY(MFX),200)
        endif
        call SaveBoolean(HY,h,'phsd',false)
      endif
    else
      if GetUnitAbilityLevel(MFX,'B01C')>0 then
        call RemoveEndlessFadetime(MFX)
        call UnitAddAbility2(MFX,'A29C')
        call SetUnitPathing2(MFX,false)
      else
        call UnitRemoveAbility(MFX,'A29C')
        call SetUnitPathing2(MFX,true)
      endif
    endif
  endif
  set t=null
  set d=null
  set MFX=null
endfunction

function Func3325 takes unit source returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerAddAction(t,function Func3324)
  call SaveUnitHandle(HY,h,366,(source))
  set t=null
endfunction

function Func3326 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  if(GetUnitAbilityLevel(source,'A0BG')==1)then
    call Func3325(source)
  else
    call Func3321(source)
  endif
  set source=null
endfunction

function Func3327 takes nothing returns nothing
  call HideAbility('A0WR')
  call AddToPurgeList('A0WR','PRGA')
  call AddToPurgeList('B01E','PRGA')
  call AddToPurgeList('A3PV','PRGE')
  call AddToPurgeList('A3PW','PRGE')
  call AddToPurgeList('A3PX','PRGE')
  call AddToPurgeList('A3PY','PRGE')
  call AddToPurgeList('B01D','PRGE')
  call AddWrapper("Func3329",3)
  call AddToPurgeList('A3JH','PRGE')
  call AddToPurgeList('B3JH','PRGE')
endfunction

function Func3328 takes unit WXE,unit SGE returns nothing
  call UnitAddAbilityTimedExF(SGE,'A3PV'-1+GetUnitAbilityLevel(WXE,'A0BK'),1,2,'B01D')
  call EvasionSourceActivate(9,2.5)
endfunction

function Func3329 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A0BK')>0 and GetUnitAbilityLevel(CastedUnit,'A36D')==0 and GetUnitAbilityLevel(TriggeredUnit,'A04R')==0 then
    call Func3328(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func3330 takes nothing returns nothing
  local integer i=GetUnitAbilityLevel(GetTriggerUnit(),'A3B8')
  local real x=GetUnitX(GetTriggerUnit())
  local real y=GetUnitY(GetTriggerUnit())
  local player p=Player(LoadInteger(HY,GetHandleId(GetTriggerUnit()),'A3B8'))
  if p==Player(0)then
    return
  endif
  if i==0 then
    set i=GetUnitAbilityLevel(udg_Hero[LoadInteger(HY,GetHandleId(GetTriggerUnit()),'A3B8')],'A0BH')
  endif
  if i==0 then
    set i=4
  endif
  loop
    call UnitApplyTimedLife(CreateUnit(p,'n019',x,y,0),'BTLF',60)
    set i=i-1
    exitwhen i==0
  endloop
endfunction

function Func3331 takes nothing returns nothing
  if LoadInteger(HY,GetHandleId(GetTriggerUnit()),'A3B8')>0 then
    call Func3330()
  endif
endfunction

function Func3332 takes nothing returns boolean
  local unit LBO=tt_unit1
  local unit LCO=tt_unit3
  local integer QIE=GetUnitAbilityLevel(LBO,'A0BH')
  local boolean F4I=false
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(LCO,'A0BH')
    set F4I=true
  endif
  if QIE!=0 then
    call UnitAddAbilityTimedExF(LCO,'A3JH',QIE,2,'B3JH')
    call Func0759(LCO,'A3B8',GetPlayerId(GetOwningPlayer(LBO)),2)
    call DamageTarget(LBO,LCO,1,QIE*70)
    if GetUnitAbilityLevel(LCO,'A3E9')==1 and IsUnitType(LBO,UNIT_TYPE_HERO)and F4I==false and IsMagicImmune(LBO)==false then
      if IsBlocked(LBO)==false then
        call LotusOrbFX(LCO)
        call AddProjectile(LCO,LBO,'h07V',"Func3332",1200,true)
      else
        call RemoveLinkenBuff(LBO)
      endif
    endif
  endif
  set LBO=null
  set LCO=null
  return false
endfunction

function Func3333 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call AddProjectile(LoadUnitHandle(HY,h,0),LoadUnitHandle(HY,h,1),'h07V',"Func3332",1200,true)
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
endfunction

function Func3334 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func3333)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
endfunction

function Func3335 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  local integer c=LoadInteger(HY,h,1)+1
  if GetUnitAbilityLevel(u,'A0WR')==0 or c>70 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Stat_Sub(u,LoadInteger(HY,h,0),"+DMG")
    if IsDead(u)==false then
      call UnitRemoveAbility(u,'A0WR')
      call UnitRemoveAbility(u,'B01E')
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call SaveInteger(HY,h,1,c)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3336 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A0WQ')
  call FlushChildHashtable(HY,h)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3335))
  call SaveUnitHandle(HY,h,14,(u))
  call UnitAddAbility2(u,'A0WR')
  call SetUnitAbilityLevel(u,'A0WR',GetUnitAbilityLevel(u,'A0WQ'))
  call Stat_Add(u,30+30*QIE,"+DMG")
  call SaveInteger(HY,h,0,30+30*QIE)
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0WR',false)
  call UnitMakeAbilityPermanent(u,true,'A0WW')
  call UnitMakeAbilityPermanent(u,true,'A0WV')
  call UnitMakeAbilityPermanent(u,true,'A0WX')
  set t=null
  set u=null
endfunction

function Func3337 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=(LoadUnitHandle(HY,h,19))
  local real dmg=(LoadReal(HY,h,20))
  local integer QIE=(LoadInteger(HY,h,188))
  local texttag tt
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetEventDamageSource()==d then
    if GetUnitAbilityLevel(SGE,'A3E9')==1 and LoadBoolean(HY,h,0)==false and IsMagicImmune(SKE)==false then
      if IsBlocked(SKE)==false then
        call SaveUnitHandle(TempHash,'A3E9',0,SGE)
        call SaveUnitHandle(TempHash,'A3E9',1,SKE)
        call SaveInteger(TempHash,'A3E9',0,LoadInteger(HY,h,0))
        call ExecuteFunc("Func3339")
      else
        call RemoveLinkenBuff(SKE)
      endif
    endif
    set tt=CreateTextTag()
    call TextTagOnUnit(I2S(QIE),QIE,SGE,0.03,127,127,255,255,Func0590(SGE)or PlayerObserver)
    call SetTextTagText(tt,"+"+I2S(R2I(dmg)),0.025)
    call SetTextTagPosUnit(tt,SGE,10)
    call SetTextTagColor(tt,255,0,0,255)
    call SetTextTagVelocity(tt,0,0.0355)
    call SetTextTagFadepoint(tt,2)
    call SetTextTagPermanent(tt,false)
    call SetTextTagLifespan(tt,2)
    if Func0590(SGE)or PlayerObserver then
      call SetTextTagVisibility(tt,true)
    else
      call SetTextTagVisibility(tt,false)
    endif
    call DamageTarget(SKE,SGE,1,dmg)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set d=null
  set SKE=null
  set SGE=null
  set tt=null
  return false
endfunction

function Func3338 takes unit SKE,unit SGE,integer N8A,boolean UII returns nothing
  local integer QIE
  local location XOX
  local real dmg
  local trigger t
  local integer h
  local unit d
  if IsBlocked(SGE)then
    if UII then
      call RemoveLinkenBuff(SGE)
    endif
    return
  endif
  set XOX=GetUnitLoc(SKE)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  set d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
  if N8A==1 then
    set QIE=GetRandomInt(1,2)
    if QIE==1 then
      set dmg=GetRandomReal(135,200)
    elseif QIE==2 then
      set dmg=GetRandomReal(75,135)
    endif
  elseif N8A==2 then
    set QIE=GetRandomInt(1,3)
    if QIE==1 then
      set dmg=GetRandomReal(190,225)
    elseif QIE==2 then
      set dmg=GetRandomReal(145,190)
    elseif QIE==3 then
      set dmg=GetRandomReal(100,145)
    endif
  elseif N8A==3 then
    set QIE=GetRandomInt(1,4)
    if QIE==1 then
      set dmg=GetRandomReal(215,250)
    elseif QIE==2 then
      set dmg=GetRandomReal(180,215)
    elseif QIE==3 then
      set dmg=GetRandomReal(145,180)
    elseif QIE==4 then
      set dmg=GetRandomReal(125,150)
    endif
  elseif N8A==4 then
    set QIE=GetRandomInt(2,4)
    if QIE==2 then
      set dmg=GetRandomReal(225,275)
    elseif QIE==3 then
      set dmg=GetRandomReal(190,225)
    elseif QIE==4 then
      set dmg=GetRandomReal(150,190)
    endif
  endif
  call TriggerRegisterTimerEvent(t,10,false)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func3337))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveBoolean(HY,h,0,UII)
  call SaveInteger(HY,h,0,N8A)
  call SaveReal(HY,h,20,((dmg)*1.0))
  call SaveInteger(HY,h,188,(QIE))
  call UnitAddAbility2(d,'A04U')
  call SetUnitAbilityLevel(d,'A04U',QIE)
  call Func1430(d,SGE,852095)
  set t=null
  set d=null
  set SKE=null
  set SGE=null
  set XOX=null
endfunction

function Func3339 takes nothing returns nothing
  call LotusOrbFX(LoadUnitHandle(TempHash,'A3E9',0))
  call Func3338(LoadUnitHandle(TempHash,'A3E9',0),LoadUnitHandle(TempHash,'A3E9',1),LoadInteger(TempHash,'A3E9',0),true)
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3340 takes nothing returns nothing
  call Func3338(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),false)
endfunction

function Func3341 takes nothing returns nothing
  call AddToPurgeList('A3IL','PRGE')
  call AddToPurgeList('B3IL','PRGE')
  call AddToPurgeList('A3IM','PRGE')
  call AddToPurgeList('A3KI','PRGA')
  set boolean005=true
endfunction

function Func3342 takes nothing returns nothing
  call UnitAddAbilityTimedExF(TriggeredUnit,'A3IL',1,8,'B3IL')
  call UnitAddAbilityTimedExF(TriggeredUnit,'A3IM',1,8,0)
endfunction

function Func3343 takes nothing returns boolean
  if GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(unit216)and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(unit216)and IsUnitIllusion(GetFilterUnit())then
    call SetUnitX(GetFilterUnit(),real089)
    call SetUnitY(GetFilterUnit(),real090)
    call IssueTargetOrder(GetFilterUnit(),"attack",unit217)
  endif
  return false
endfunction

function Func3344 takes unit SKE,unit SGE,integer QIE returns nothing
  local real cx=GetUnitX(SKE)
  local real cy=GetUnitY(SKE)
  local real tx=GetUnitX(SGE)
  local real ty=GetUnitY(SGE)
  local real a= AngleBetweenXY(cx,cy,tx,ty)
  local real d=DistanceBetweenXY(cx,cy,tx,ty)
  local real YIE=GetRandomReal(d*0.3,d*0.8)
  local real nx=cx+YIE*Cos(a*bj_DEGTORAD)
  local real ny=cy+YIE*Sin(a*bj_DEGTORAD)
  local unit BEA=CreateUnit(GetOwningPlayer(SKE),'h06J',nx,ny,0)
  local unit BXA
  local group g
  local trigger t
  local integer h
  local unit u2
  call PlaySoundOnUnitBJ(sound004,100,SGE)
  if IsUnitEnemy(SGE,GetOwningPlayer(SKE))then
    if Roshan==SGE then
      set nx=tx-30*Cos(a*bj_DEGTORAD)
      set ny=ty-30*Sin(a*bj_DEGTORAD)
    endif
    call SetUnitX(SKE,nx)
    call SetUnitY(SKE,ny)
    call SetUnitFacing(SKE,-a)
    call UnitAddAbilityTimedExF(SKE,'A3KI',QIE,1.2,0)
    set nx=cx+(YIE-25)*Cos(a*bj_DEGTORAD)
    set ny=cy+(YIE-25)*Sin(a*bj_DEGTORAD)
    if SGE!=Roshan then
      call AddTimedKeyToAgent(SGE,4405,1)
      call SetUnitX(SGE,nx)
      call SetUnitY(SGE,ny)
      call SetUnitFacing(SGE,a)
    else
      set nx=tx-30*Cos(a*bj_DEGTORAD)
      set ny=ty-30*Sin(a*bj_DEGTORAD)
    endif
    call IssueTargetOrderByIdFuckingEx(SKE,851983,SGE,false)
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,cx,cy,1400,Condition(function Func1893))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      if IsUnitIllusion(u2)and GetOwningPlayer(u2)==GetOwningPlayer(SKE)and GetUnitTypeId(u2)==GetUnitTypeId(SKE)then
        call SetUnitX(u2,nx)
        call SetUnitY(u2,ny)
        call IssueTargetOrder(u2,"attack",SGE)
      endif
    endloop
    call KillGroup(g)
    call KillUnit(CreateUnit(GetOwningPlayer(SKE),'h06J',nx,ny,0))
  endif
  call KillUnit(BEA)
  set SKE=null
  set SGE=null
  set BEA=null
  set BXA=null
  set g=null
  set t=null
endfunction

function Func3345 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer QIE=GetUnitAbilityLevel(u,'A0RW')
  if GetUnitAbilityLevel(u,'Aloc')==1 and HaveSavedHandle(HY,GetHandleId(u),0)then
    set u=LoadUnitHandle(HY,GetHandleId(u),0)
  endif
  if IsDead(u)==false and IsDead(SGE)==false then
    call Func3344(u,SGE,QIE)
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set SGE=null
  set u=null
endfunction

function Func3346 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func3345)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
endfunction

function Func3347 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h06J',GetUnitX(source),GetUnitY(source),0)
  call PlaySoundOnUnitBJ(sound004,100,source)
  call KillUnit(RCX)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RCX=null
  set RBX=null
  set source=null
  return false
endfunction

function Func3348 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerAddCondition(RBX,Condition(function Func3347))
  call TriggerRegisterTimerEvent(RBX,0.3,false)
  call SaveUnitHandle(HY,(ZAE),14,(GetTriggerUnit()))
  set RBX=null
endfunction

function Func3349 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call UnitRemoveAbility(source,'A1BQ')
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func3350 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX
  local integer ZAE
  if GetRandomInt(0,1)==0 then
    call UnitAddAbility2(source,'A1BQ')
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call TriggerRegisterTimerEvent(RBX,0.65,false)
    call TriggerAddCondition(RBX,Condition(function Func3349))
    call SaveUnitHandle(HY,(ZAE),2,(source))
  endif
  set RBX=null
  set source=null
endfunction

function Func3351 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  if GetUnitAbilityLevel(source,'AHfa')==0 then
    call UnitAddAbility2(source,'AHfa')
    if GetUnitAbilityLevel(source,'BOwk')>0 then
      call UnitRemoveAbility(source,'BOwk')
    endif
  endif
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'AHfa',true)
  call SetUnitAbilityLevel(source,'AHfa',GetUnitAbilityLevel(source,'A2UO'))
  set source=null
endfunction

function Func3352 takes unit WXE,unit SGE,real dmg returns nothing
  local real lifeleach=0.
  local unit u
  if GetUnitAbilityLevel(WXE,'AHfa')>0 and IsUnitIllusion(SGE)==false and LoadBoolean(HY,GetHandleId(WXE),'AHfa')and GetUnitState(WXE,UNIT_STATE_MANA)>8 then
    call Func2340(WXE,SGE,dmg)
  endif
endfunction

function Func3353 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A0CG')>0 then
    call Func1433(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func3354 takes nothing returns boolean
  if GetIssuedOrderId()==852174 and GetUnitAbilityLevel(GetTriggerUnit(),'AHfa')>0 then
    call SaveBoolean(HY,GetHandleId(GetTriggerUnit()),'AHfa',true)
  elseif GetIssuedOrderId()==852175 and GetUnitAbilityLevel(GetTriggerUnit(),'AHfa')>0 then
    call SaveBoolean(HY,GetHandleId(GetTriggerUnit()),'AHfa',false)
  endif
  return false
endfunction

function Func3355 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ISSUED_ORDER)
  call TriggerAddCondition(RBX,Condition(function Func3354))
  set RBX=null
  call HideAbility('AHfa')
  set boolean055=true
  call AddToPurgeList('B00S','PRGA')
endfunction

function Func3356 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real hp=GetUnitState(SKE,UNIT_STATE_LIFE)
  local integer BDA=LoadInteger(HY,h,1)
  local integer BFA=LoadInteger(HY,h,0)
  call UnitRemoveAbility(SKE,'A1R0')
  call UnitRemoveAbility(SKE,'a1R0')
  call Stat_Sub(SKE,BFA,"+DMG")
  call ManageBonusHP(SKE,-BDA)
  call SetUnitState(SKE,UNIT_STATE_LIFE,hp)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  return false
endfunction

function Func3357 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A04Q')
  local real BHA=GetUnitState(SGE,UNIT_STATE_LIFE)
  local real BJA=GetUnitState(SKE,UNIT_STATE_LIFE)
  local integer dmg=R2I((0.035+0.015*QIE)*BHA)
  local integer hp=R2I((0.35+0.15*QIE)*BHA)
  call Stat_Add(SKE,dmg,"+DMG")
  call ManageBonusHP(SKE,hp)
  call UnitAddAbility2(SKE,'A1R0')
  call SetUnitState(SGE,UNIT_STATE_LIFE,1)
  call DamageTarget(SKE,SGE,2,20)
  call DamageTarget(SKE,SGE,1,20)
  call DamageTarget(SKE,SGE,3,20)
  call SetUnitState(SKE,UNIT_STATE_LIFE,BJA+hp)
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",SGE,"chest"))
  call SaveUnitHandle(HY,h,2,(SKE))
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterTimerEvent(t,35,false)
  call TriggerAddCondition(t,Condition(function Func3356))
  call SaveInteger(HY,h,0,dmg)
  call SaveInteger(HY,h,1,hp)
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3358 takes nothing returns nothing
  if GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>0.5 and IsCourier(GetSpellTargetUnit())==false then
    call Func3357()
  endif
endfunction

function Func3359 takes nothing returns nothing
  call Func0379(GetTriggerUnit(),'A025')
endfunction

function Func3360 takes nothing returns boolean
  return GetUnitAbilityLevel(GetTriggerUnit(),'B06X')>0 and(GetSpellAbilityId()=='A0OI' or Func1447(GetSpellAbilityId()))and Func1446(GetSpellAbilityId())==false
endfunction

function Func3361 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit SKE=LoadUnitHandle(HY,h,0)
  call SetUnitState(SKE,UNIT_STATE_MANA,GetUnitState(SKE,UNIT_STATE_MANA)+LoadReal(HY,h,0))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",SKE,"overhead"))
  set SKE=null
  call DelayedCallBackClean()
endfunction

function Func3362 takes unit u,real mp returns nothing
  local integer h=DelayedCallBack(0.,function Func3361)
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,mp)
endfunction

function Func3363 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit SKE=GetTriggerUnit()
  local unit HDE=(LoadUnitHandle(HY,h,254))
  local integer QIE=GetUnitAbilityLevel(HDE,'A0IF')
  if GetUnitAbilityLevel(SKE,'A36D')==0 and Func0674(SKE,HDE,1400)and PRD_Get(HDE,'A0IF',40)then
    call Func3362(SKE,(0.05+0.05*QIE)*GetUnitState(SKE,UNIT_STATE_MAX_MANA))
  endif
  set SKE=null
  set HDE=null
endfunction

function Func3364 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A0IF')
  local trigger t
  if(QIE==1)then
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t,Condition(function Func3360))
    call TriggerAddAction(t,function Func3363)
    call SaveUnitHandle(HY,(GetHandleId(t)),254,(u))
    set t=null
  endif
  if(QIE==1)then
    call UnitAddAbility2(u,'A0OL')
  elseif(QIE==2)then
    call UnitAddAbility2(u,'A0OM')
  elseif(QIE==3)then
    call UnitAddAbility2(u,'A0ON')
  elseif(QIE==4)then
    call UnitAddAbility2(u,'A0OH')
  endif
endfunction

function Func3365 takes nothing returns nothing
  call AddWrapper("Func4618",3)
endfunction

function Func3366 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit od=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer RVX=LoadInteger(HY,h,5)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if GetTriggerUnit()==od and LoadBoolean(HY,h,0)==false then
      call SetHeroInt(od,GetHeroInt(od,false)-RVX,true)
      call SaveBoolean(HY,h,0,true)
      call Func2328(od,'A3QM',-RVX)
    elseif GetTriggerUnit()==SGE and LoadBoolean(HY,h,1)==false then
      call SetHeroInt(SGE,GetHeroInt(SGE,false)+RVX,true)
      call SaveBoolean(HY,h,1,true)
    endif
    if LoadBoolean(HY,h,0)and LoadBoolean(HY,h,1)then
      call CleanTrigger(t)
      call FlushChildHashtable(HY,h)
    endif
  else
    if LoadBoolean(HY,h,0)==false then
      call SetHeroInt(od,GetHeroInt(od,false)-RVX,true)
      call Func2328(od,'A3QM',-RVX)
    endif
    if LoadBoolean(HY,h,1)==false then
      call SetHeroInt(SGE,GetHeroInt(SGE,false)+RVX,true)
    endif
    call CleanTrigger(t)
    call FlushChildHashtable(HY,h)
  endif
  set t=null
  set od=null
  set SGE=null
endfunction

function Func3367 takes unit OD,unit SGE returns nothing
  local trigger t
  local integer h
  local integer BUA=Func0464(GetUnitAbilityLevel(OD,'A0OI'),GetHeroInt(SGE,false))
  if BUA>0 then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterDeathEvent(t,OD)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerRegisterTimerEvent(t,80,false)
    call TriggerAddCondition(t,Condition(function Func3366))
    call SaveUnitHandle(HY,h,0,OD)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveInteger(HY,h,5,BUA)
    call SetHeroInt(SGE,GetHeroInt(SGE,false)-BUA,true)
    call SetHeroInt(OD,GetHeroInt(OD,false)+BUA,true)
    call Func2328(OD,'A3QM',BUA)
    set t=null
  endif
endfunction

function Func3368 takes unit WXE,unit SGE,boolean BYA returns nothing
  local real d=.01*(5+GetUnitAbilityLevel(WXE,'A0OI'))*(GetUnitState(WXE,UNIT_STATE_MANA)+100)
  call UnitRemoveAbility(SGE,'B06Y')
  if(IsUnitSummoned(SGE)or IsUnitIllusion(SGE))and IsUnitSpiritBear(SGE)==false and Func0619(SGE)==false then
    set d=d+100*GetUnitAbilityLevel(WXE,'A0OI')
  endif
  call TextTagOnUnit("+"+I2S(R2I(d)),1,SGE,.023,191,64,255,216,Func0590(SGE)or PlayerObserver)
  call DamageTarget(WXE,SGE,3,d)
  if IsUnitType(SGE,UNIT_TYPE_HERO)then
    call Func3367(WXE,SGE)
  endif
  if BYA==false and GetUnitAbilityLevel(WXE,'A0IF')*(1-GetUnitAbilityLevel(WXE,'A36D'))>0 and GetRandomInt(1,100)<=40 then
    call SetUnitState(WXE,UNIT_STATE_MANA,GetUnitState(WXE,UNIT_STATE_MANA)+(0.05+0.05*GetUnitAbilityLevel(WXE,'A0IF'))*GetUnitState(WXE,UNIT_STATE_MAX_MANA))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",WXE,"overhead"))
  endif
endfunction

function Func3369 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real dmg=75*LoadInteger(HY,h,5)+25
  local group g=GetAvailableGroup()
  local unit u2
  call RemoveSavedInteger(HY,(GetHandleId(SGE)),4303)
  call DestroyEffect(LoadEffectHandle(HY,h,32))
  call ShowUnit(SGE,true)
  call UnitRemoveAbility(SGE,'A3TN')
  call Func0234(SGE)
  call ClearSelectionForPlayer(GetOwningPlayer(SGE))
  call SelectUnitAddForPlayer(SGE,GetOwningPlayer(SGE))
  call RemoveSavedHandle(HY,(GetHandleId(SKE)),748)
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),425,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(SKE,u2,1,dmg)
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3370 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer QIE=LoadInteger(HY,h,0)
  local integer RVX=Func0464(GetHeroInt(SGE,false),1+QIE*3)
  local trigger tt
  local integer ht
  local unit d
  local boolean b=LoadBoolean(HY,h,0)
  if(IsUnitAlly(SGE,GetOwningPlayer(SKE)))or b or IsBlocked(SGE)==false then
    set d=CreateUnit(GetOwningPlayer(SGE),'o019',GetUnitX(SGE),GetUnitY(SGE),0)
    call UnitApplyTimedLife(d,'BTLF',4)
    if IsNeutralsOrObserversOrAllies(GetOwningPlayer(SKE))then
      call SetUnitAnimationByIndex(d,1)
    else
      call SetUnitAnimationByIndex(d,2)
    endif
    call SetUnitX(d,GetUnitX(SGE))
    call SetUnitY(d,GetUnitY(SGE))
    call UnitAddAbility2(SGE,'A3TN')
    call IssueImmediateOrderByIdExFunc(SGE,851972)
    call Func0233(SGE)
    call SaveInteger(HY,(GetHandleId(SGE)),4303,1)
    set tt=CreateTrigger()
    set ht=GetHandleId(tt)
    call SelectUnitRemoveForPlayer(SGE,GetOwningPlayer(SGE))
    call ShowUnit(SGE,false)
    call SaveUnitHandle(HY,(ht),2,(SKE))
    call SaveUnitHandle(HY,(ht),17,(SGE))
    call TriggerRegisterTimerEvent(tt,4,false)
    call SaveInteger(HY,ht,5,QIE)
    call TriggerRegisterDeathEvent(tt,SGE)
    call TriggerAddCondition(tt,Condition(function Func3369))
    set d=null
  endif
  set SKE=null
  set SGE=null
  set tt=null
  set t=null
  call FlushChildHashtable(HY,h)
endfunction

function Func3371 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer h
  local integer QIE
  local boolean B0A=false
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
    set B0A=true
  endif
  if IsUnitAlly(SKE,GetOwningPlayer(SGE))then
    set B0A=true
  endif
  if B0A or IsBlocked(SGE)==false then
    set h=DelayedCallBack(0,function Func3370)
    call SaveUnitHandle(HY,h,0,SKE)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveInteger(HY,h,0,GetUnitAbilityLevel(SKE,'A0OJ'))
    call SaveBoolean(HY,h,0,B0A)
  endif
  set SKE=null
  set SGE=null
endfunction

function Func3372 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())!='e00E' then
    call Func2329()
  endif
endfunction

function Func3373 takes nothing returns nothing
  local unit FKX=GetEnumUnit()
  local unit SKE=GetTriggerUnit()
  local integer r1
  local integer array JTX
  local integer QIE=GetUnitAbilityLevel(SKE,'A0OK')
  local integer FRX=7+1*QIE
  local boolean b=QIE==0
  local boolean CTI=false
  local unit d
  if IsUnitIllusion(FKX)==false then
    set r1=GetHeroInt(SKE,true)-GetHeroInt(FKX,true)
  else
    set r1=GetHeroInt(SKE,true)-GetHeroInt(udg_Hero[GetPlayerId(GetOwningPlayer(FKX))],true)
  endif
  if b then
    set QIE=GetUnitAbilityLevel(SKE,'A1VW')
    set CTI=true
    set FRX=7+1*QIE
  endif
  set JTX[1]=10
  set JTX[2]=30
  set JTX[3]=50
  if IsMagicImmune(FKX)==false then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",FKX,"overhead"))
    call SetUnitState(FKX,UNIT_STATE_MANA,GetUnitState(FKX,UNIT_STATE_MANA)*.6)
  endif
  if(r1>0)then
    call DamageTarget(SKE,FKX,1,r1*FRX)
    call TextTagOnUnit(I2S(R2I(r1*FRX)),3,FKX,0.023,216,30,30,216,Func0590(FKX)or PlayerObserver)
  endif
  if CTI and GetUnitAbilityLevel(SKE,'A0OJ')>0 then
    call echo("agh")
    if IsDead(FKX)==false then
      call echo("live")
      set d=CreateUnit(GetOwningPlayer(FKX),'e00E',GetUnitX(FKX),GetUnitY(FKX),0)
      call SaveUnitHandle(HY,GetHandleId(d),0,SKE)
      call UnitAddAbility(d,'A0OJ')
      call SetUnitAbilityLevel(d,'A0OJ',GetUnitAbilityLevel(SKE,'A0OJ'))
      call echo(Func0457(IssueTargetOrder(d,"chainlightning",FKX)))
      set d=null
    endif
  endif
  set FKX=null
  set SKE=null
endfunction

function Func3374 takes nothing returns boolean
  return IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction

function Func3375 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A0OK')
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local group g=GetAvailableGroup()
  local integer a=0
  local unit d=(LoadUnitHandle(HY,(GetHandleId(u)),748))
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(u,'A1VW')
  endif
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x,y))
  loop
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x+(200+QIE*50)*Cos(a*bj_DEGTORAD),y+(200+QIE*50)*Sin(a*bj_DEGTORAD)))
    set a=a+45
    exitwhen a>=360
  endloop
  call GroupEnumUnitsInRange(g,x,y,300+QIE*100,Condition(function Func3374))
  if d!=null and DistanceBetweenXY(x,y,GetUnitX(d),GetUnitY(d))<(300+QIE*100)then
    call SetUnitInvulnerable(d,false)
    call GroupAddUnit(g,d)
  endif
  call ForGroup(g,function Func3373)
  if d!=null and IsDead(d)==false then
    call SetUnitInvulnerable(d,true)
  endif
  call KillGroup(g)
  set u=null
  set d=null
endfunction

function Func3376 takes nothing returns nothing
  call DamageTarget(unit218,GetEnumUnit(),1,real091)
endfunction

function Func3377 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit source=(LoadUnitHandle(HY,(h),17))
  local unit target=(LoadUnitHandle(HY,(h),2))
  local group g
  local integer c=(LoadInteger(HY,(h),34))
  local unit u2
  local real dmg=LoadReal(HY,h,5)
  if GetTriggerEvalCount(t)>250 or GetUnitAbilityLevel(source,'A3N4')==0 or GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEvalCount(t)>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A0QG' and GetSpellTargetUnit()==source)then
    if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
      call UnitRemoveAbility(source,'A3N4')
      call UnitRemoveAbility(source,'a3N4')
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set c=c+1
    call SaveInteger(HY,(h),34,(c))
    set g=GetAvailableGroup()
    set tt_unit1=target
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),275,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call GroupRemoveUnit(g,source)
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call DamageTarget(target,u2,1,dmg)
    endloop
    call KillGroup(g)
    set source=null
  endif
  set t=null
  set target=null
  set g=null
  return false
endfunction

function Func3378 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  call PlaySoundAtPos(sound015,GetUnitX(SGE),GetUnitY(SGE))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(SKE,'A0QG'))
  call SaveReal(HY,h,5,GetUnitAbilityLevel(SKE,'A0QG')*2.+1.)
  call UnitAddAbility2(SGE,'A3N4')
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func3377))
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3379 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real nx
  local real ny
  local real NBX
  local real a
  local boolean B5A=GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(SGE,'A3EA')==0 or GetTriggerEvalCount(t)>19
  if B5A then
    call SetUnitPathing2(SGE,true)
    call CurrentSafestLocationWrapper(SGE)
    call DamageTarget(LoadUnitHandle(HY,h,2),SGE,1,LoadInteger(HY,h,5)*40)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set NBX=(LoadReal(HY,h,138))
    set x=(LoadReal(HY,h,6))
    set y=(LoadReal(HY,h,7))
    set a=(LoadReal(HY,h,137))
    set nx=GetUnitX(SGE)+NBX/15*Cos(a)
    set ny=GetUnitY(SGE)+NBX/15*Sin(a)
    call ForceMovements(SGE,nx,ny,ModuloInteger(GetTriggerEvalCount(t),8)==1,false)
  endif
  set t=null
  set SGE=null
  return false
endfunction

function Func3380 takes nothing returns nothing
  local trigger t
  local integer h
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetEnumUnit()
  if IsUnitInvulnerable(SGE)==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerRegisterTimerEvent(t,0.025,true)
    call TriggerAddCondition(t,Condition(function Func3379))
    call SaveReal(HY,h,6,((real092)*1.0))
    call SaveReal(HY,h,7,((real093)*1.0))
    call SaveReal(HY,h,138,((DistanceBetweenXY(real092,real093,GetUnitX(SGE),GetUnitY(SGE)))*1.0))
    call SaveReal(HY,h,137,((Atan2(real093-GetUnitY(SGE),real092-GetUnitX(SGE)))*1.0))
    call SaveInteger(HY,h,5,(integer504))
    call SaveUnitHandle(HY,h,2,(SKE))
    call SaveUnitHandle(HY,h,17,(SGE))
    call Func0433(SGE)
    call UnitAddAbilityTimedExF(SGE,'A3EA',1,0.5,'A3EA')
    call SetUnitPathing2(SGE,false)
  endif
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3381 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A0QE')
  local real A7X=150+100*QIE+25
  local unit d=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'u026',x,y,0)
  call SetUnitScale(d,0.28+0.14*QIE,0,0)
  call AddSpecialEffectTarget("war3mapImported\\Vacuum.mdx",d,"origin")
  call UnitApplyTimedLife(d,'BTLF',1)
  set tt_unit1=GetTriggerUnit()
  call PlaySoundAtPos(sound027,x,y)
  call DestroyEffect(AddSpecialEffect("war3mapImported\\Star Aura.mdx",x,y))
  call GroupEnumUnitsInRange(g,x,y,A7X,Condition(function Func0821))
  set real092=x
  set real093=y
  set integer504=QIE
  call ForGroup(g,function Func3380)
  call KillTrees(x,y,200)
  call KillGroup(g)
  set d=null
  set g=null
endfunction

function Surge_SpellEffect takes nothing returns nothing
  local unit target=GetSpellTargetUnit()
  local unit Source=GetTriggerUnit()
  call UnitAddAbilityTimedExF(target,'A3JM',1,1.5+1.5*GetUnitAbilityLevel(Source,'A0R7'),'B07W')
  call FuckingAssistBuffWrap(Source,target)
  set Source=null
  set target=null
endfunction

function Func3383 takes nothing returns nothing
  call AddToPurgeList('A3JM','PRGA')
  call AddToPurgeList('B07W','PRGA')
  call AddDispellableBuff('A3EA')
  call AddToPurgeList('A3N4','PRGA')
  call AddToPurgeList('a3N4','PRGA')
endfunction

function Func3384 takes boolean b returns boolean
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit wall=(LoadUnitHandle(HY,h,259))
  local unit target=GetTriggerUnit()
  local unit caster=udg_Hero[GetPlayerId(GetOwningPlayer(wall))]
  local integer lvl=GetUnitAbilityLevel(caster,'A0QK')
  local integer id='A3H3'
  local integer i
  if lvl==0 then
    set lvl=GetUnitAbilityLevel(caster,'A21Q')
    set id='A3H4'
  endif
  set i=lvl
  call UnitAddAbility(wall,id)
  call SetUnitAbilityLevel(wall,id,i)
  set real094=GetUnitX(target)
  set real095=GetUnitY(target)
  set unit219=target
  call SaveUnitHandle(HY,GetHandleId(wall),'ilsr',target)
  call Func0910(wall,852274,target)
  call SaveInteger(HY,GetHandleId(unit004),'ills','B07Z')
  call DamageTarget(wall,target,1,150)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(target),GetUnitY(target)))
  set wall=null
  set target=null
  set caster=null
  return false
endfunction

function Func3385 takes nothing returns boolean
  local group g
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),259))))and GetCloneHeroId(GetFilterUnit())==false then
    set g=(LoadGroupHandle(HY,(GetHandleId(GetTriggeringTrigger())),257))
    if IsUnitInGroup(GetFilterUnit(),g)==false then
      call GroupAddUnit(g,GetFilterUnit())
      call Func3384(false)
    endif
  endif
  set g=null
  return false
endfunction

function Func3386 takes nothing returns boolean
  local group g
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),259))))and GetCloneHeroId(GetFilterUnit())==false then
    set g=(LoadGroupHandle(HY,(GetHandleId(GetTriggeringTrigger())),257))
    if IsUnitInGroup(GetFilterUnit(),g)==false then
      call GroupAddUnit(g,GetFilterUnit())
      call Func3384(true)
    endif
  endif
  set g=null
  return false
endfunction

function Func3387 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  call GroupRemoveUnit((LoadGroupHandle(HY,(ZAE),257)),(LoadUnitHandle(HY,(ZAE),261)))
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
  call FlushChildHashtable(HY,(ZAE))
  call DisableTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func3388 takes nothing returns boolean
  local unit source=GetSummoningUnit()
  local unit RCX=GetSummonedUnit()
  local integer ZAE=GetHandleId(source)
  local integer QIE=(LoadInteger(HY,(ZAE),260))
  local trigger RBX=CreateTrigger()
  call SetUnitVertexColor(RCX,255,255,255,100)
  call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_DEATH)
  call TriggerAddCondition(RBX,Condition(function Func3387))
  call SaveGroupHandle(HY,(GetHandleId(RBX)),257,((LoadGroupHandle(HY,(ZAE),257))))
  call SaveUnitHandle(HY,(GetHandleId(RBX)),261,(unit219))
  set QIE=QIE+1
  call SaveInteger(HY,(ZAE),260,(QIE))
  call SaveUnitHandle(HY,(ZAE),(2800+QIE),RCX)
  call SaveTriggerHandle(HY,(ZAE),(2900+QIE),(RBX))
  call SetUnitX(RCX,real094)
  call SetUnitY(RCX,real095)
  set source=null
  set RBX=null
  set RCX=null
  return false
endfunction

function Func3389 takes nothing returns nothing
  call RemoveUnit(GetEnumUnit())
endfunction

function Func3390 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local trigger R4I=(LoadTriggerHandle(HY,(ZAE),255))
  local integer QIE=GetHandleId(R4I)
  local trigger IJI=(LoadTriggerHandle(HY,(QIE),256))
  local group g=(LoadGroupHandle(HY,(QIE),257))
  local group IBI=(LoadGroupHandle(HY,(QIE),258))
  local unit source=(LoadUnitHandle(HY,(QIE),259))
  local integer ZBE=GetHandleId(source)
  local integer ZCE=(LoadInteger(HY,(ZBE),260))
  local integer XPO
  local unit RCX
  call ForGroup(IBI,function Func3389)
  set XPO=1
  loop
    exitwhen XPO>ZCE
    set RCX=LoadUnitHandle(HY,(ZBE),(2800+XPO))
    call FlushChildHashtable(HY,GetHandleId(LoadTriggerHandle(HY,ZBE,2900+XPO)))
    call CleanTrigger((LoadTriggerHandle(HY,(ZBE),(2900+XPO))))
    if IsUnitIllusion(RCX)then
      call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(RCX),GetUnitY(RCX)))
      call RemoveUnit(RCX)
    endif
    set XPO=XPO+1
  endloop
  call FlushChildHashtable(HY,(ZAE))
  call FlushChildHashtable(HY,(QIE))
  call FlushChildHashtable(HY,(ZBE))
  call RemoveUnit(source)
  call KillGroup(g)
  call KillGroup(IBI)
  call CleanTrigger(R4I)
  call CleanTrigger(IJI)
  call CleanTrigger(RBX)
  set RBX=null
  set R4I=null
  set IJI=null
  set g=null
  set IBI=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3391 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  local real ZWE=GetUnitFacing(source)-45
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h00O',result,ZEE,ZWE)
  local unit M_X
  local real ZYE
  local real ICX
  local integer ZAE
  local real N1X
  local trigger RBX=CreateTrigger()
  local group g=GetAvailableGroup()
  local integer QIE=GetHandleId(RBX)
  local group IBI=GetAvailableGroup()
  local trigger R4I=RBX
  local integer ZBE=GetUnitAbilityLevel(source,'A0QK')
  local boolean ZSE=false
  if ZBE==0 then
    set ZSE=true
    set ZBE=GetUnitAbilityLevel(source,'A21Q')
  endif
  call PlaySoundAtPos(sound028,result,ZEE)
  call SaveGroupHandle(HY,(QIE),257,(g))
  call SaveGroupHandle(HY,(GetHandleId(RCX)),257,(g))
  call SaveGroupHandle(HY,(QIE),258,(IBI))
  call SaveUnitHandle(HY,(QIE),259,(RCX))
  call SaveInteger(HY,(GetHandleId(RCX)),260,0)
  set ZAE=0
  loop
    exitwhen ZAE>39
    set ZYE=result+(500-25*ZAE)*Cos((ZWE-45)*bj_DEGTORAD)
    set ICX=ZEE+(500-25*ZAE)*Sin((ZWE-45)*bj_DEGTORAD)
    set M_X=CreateUnit(GetOwningPlayer(source),'h00P',ZYE,ICX,ZWE)
    call SetUnitPathing(M_X,false)
    call SetUnitX(M_X,ZYE)
    call SetUnitY(M_X,ICX)
    call GroupAddUnit(IBI,M_X)
    call TriggerRegisterUnitInRange(RBX,M_X,17,Condition(function ReturnTrue))
    set ZAE=ZAE+1
  endloop
  if ZSE then
    call TriggerAddCondition(RBX,Condition(function Func3386))
  else
    call TriggerAddCondition(RBX,Condition(function Func3385))
  endif
  set RBX=CreateTrigger()
  call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_SUMMON)
  call TriggerAddCondition(RBX,Condition(function Func3388))
  call SaveTriggerHandle(HY,(QIE),256,(RBX))
  set RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,45,false)
  call TriggerAddCondition(RBX,Condition(function Func3390))
  call SaveTriggerHandle(HY,(GetHandleId(RBX)),255,(R4I))
  set source=null
  set M_X=null
  set RBX=null
  set R4I=null
  set g=null
  set IBI=null
  set RCX=null
endfunction

function Func3392 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer KXE=LoadInteger(HY,(h),29)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if(LoadBoolean(HY,(h),276))==false and GetTriggerUnit()==(LoadUnitHandle(HY,(h),2))then
      call SaveBoolean(HY,(h),276,(true))
      call SetHeroStr(LoadUnitHandle(HY,(h),2),GetHeroStr(LoadUnitHandle(HY,(h),2),false)-LoadInteger(HY,h,30),true)
      call Func2328(GetTriggerUnit(),'A3Q9',-LoadInteger(HY,h,30)/ 2)
      call DestroyEffect(LoadEffectHandle(HY,h,10))
      call DestroyEffect(LoadEffectHandle(HY,h,11))
    elseif(LoadBoolean(HY,(h),277))==false and GetTriggerUnit()==(LoadUnitHandle(HY,(h),17))then
      call SaveBoolean(HY,(h),277,(true))
      call SetHeroStr((LoadUnitHandle(HY,(h),17)),GetHeroStr((LoadUnitHandle(HY,(h),17)),false)+KXE,true)
    endif
  else
    if(LoadBoolean(HY,(h),276))==false then
      call Func2328(LoadUnitHandle(HY,(h),2),'A3Q9',-LoadInteger(HY,h,30)/ 2)
      call SaveBoolean(HY,(h),276,(true))
      call SetHeroStr((LoadUnitHandle(HY,(h),2)),GetHeroStr((LoadUnitHandle(HY,(h),2)),false)-LoadInteger(HY,h,30),true)
      call DestroyEffect(LoadEffectHandle(HY,h,10))
      call DestroyEffect(LoadEffectHandle(HY,h,11))
    endif
    if(LoadBoolean(HY,(h),277))==false then
      call SaveBoolean(HY,(h),277,(true))
      call SetHeroStr((LoadUnitHandle(HY,(h),17)),GetHeroStr((LoadUnitHandle(HY,(h),17)),false)+KXE,true)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  return false
endfunction

function Func3393 takes nothing returns nothing
  local unit SKE=unit220
  local unit u=GetEnumUnit()
  local integer KXE
  local integer QIE=integer505
  local trigger t
  local integer h
  local integer CCA=4
  if boolean062 then
    set CCA=10
  endif
  if IsUnitType(u,UNIT_TYPE_HERO)and IsNotHeroID(u)==false and IsUnitInvulnerable(u)==false then
    set KXE=IMinBJ(GetHeroStr(u,false)-1,CCA)
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SetHeroStr(SKE,GetHeroStr(SKE,false)+CCA,true)
    call SetHeroStr(u,GetHeroStr(u,false)-KXE,true)
    call TriggerRegisterTimerEvent(t,45,false)
    call TriggerRegisterDeathEvent(t,SKE)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func3392))
    call SaveBoolean(HY,(h),276,(false))
    call SaveBoolean(HY,(h),277,(false))
    call SaveUnitHandle(HY,(h),2,(SKE))
    call SaveUnitHandle(HY,(h),17,(u))
    call SaveInteger(HY,(h),29,(KXE))
    call SaveInteger(HY,(h),30,CCA)
    call SaveEffectHandle(HY,h,10,AddSpecialEffectTarget("war3mapImported\\UndyingHands.mdx",SKE,"hand left"))
    call SaveEffectHandle(HY,h,11,AddSpecialEffectTarget("war3mapImported\\UndyingHands.mdx",SKE,"hand right"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",SKE,"origin"))
    call Func2328(SKE,'A3Q9',CCA/ 2)
  endif
  call DamageTarget(SKE,u,1,40*QIE-20)
  set SKE=null
  set u=null
  set t=null
endfunction

function Func3394 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local group g=GetAvailableGroup()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A15S')+GetUnitAbilityLevel(SKE,'A3J3')
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h07J',x,y,0)
  call DestroyEffect(AddSpecialEffect("effects\\DecayGreen_Groundonly_1.mdx",x,y))
  call PlaySoundAtPos(sound058,x,y)
  set tt_unit1=SKE
  set unit220=SKE
  set integer505=QIE
  call GroupEnumUnitsInRange(g,x,y,350,Condition(function Func0821))
  set boolean062=GetUnitAbilityLevel(SKE,'A3J3')>0
  call ForGroup(g,function Func3393)
  call KillGroup(g)
  call KillUnit(d)
  set SKE=null
  set g=null
  set t=null
  set d=null
endfunction

function Func3395 takes nothing returns nothing
  if integer506<=integer507 then
    set integer506=integer506+1
    call GroupAddUnit(group033,GetEnumUnit())
  endif
endfunction

function Func3396 takes unit source,unit RCX returns nothing
  call Func0702("SPLK",GetUnitX(source),GetUnitY(source),GetUnitX(RCX),GetUnitY(RCX),0.1,0.6,0.44,.9,0.6)
endfunction

function Func3397 takes nothing returns nothing
  if Func0595(unit222)then
    if integer507>0 then
      set integer507=integer507-1
      call SetUnitState(unit222,UNIT_STATE_LIFE,GetUnitState(unit222,UNIT_STATE_LIFE)+1.)
      call Func3396(GetEnumUnit(),unit222)
      if GetUnitTypeId(GetEnumUnit())!='n0F5' then
        call Func0755(GetEnumUnit(),tt_real1)
      endif
    endif
  else
    if GetUnitTypeId(GetEnumUnit())!='n0F5' then
      call Func0755(GetEnumUnit(),tt_real1)
    endif
    call SetUnitState(unit222,UNIT_STATE_LIFE,GetUnitState(unit222,UNIT_STATE_LIFE)+tt_real1)
    call Func3396(GetEnumUnit(),unit222)
  endif
endfunction

function Func3398 takes nothing returns nothing
  if GetUnitTypeId(GetEnumUnit())!='n0F5' then
    call Func0755(GetEnumUnit(),tt_real1)
  endif
  call Func3396(GetEnumUnit(),unit222)
endfunction

function Func3399 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0R5')*2+8
  local integer c
  set group033=GetAvailableGroup()
  set integer506=0
  set integer507=QIE
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),1325,Condition(function Func0840))
  call GroupRemoveUnit(g,SKE)
  call GroupRemoveUnit(g,GetSpellTargetUnit())
  call ForGroup(g,function Func3395)
  call KillGroup(g)
  set g=group033
  set unit222=GetSpellTargetUnit()
  set unit221=SKE
  set tt_real1=18+4*GetUnitAbilityLevel(SKE,'A0R5')
  set c=CountUnitsInGroup(g)
  set integer507=GetUnitAbilityLevel(SKE,'A0R5')
  if IsUnitAlly(unit222,GetOwningPlayer(SKE))then
    call ForGroup(g,function Func3397)
  else
    set c=CountUnitsInGroup(g)
    call ForGroup(g,function Func3398)
    call DamageTarget(unit221,unit222,1,(18+4*GetUnitAbilityLevel(SKE,'A0R5'))*c)
  endif
  call KillGroup(g)
  set SKE=null
  set g=null
endfunction

function Func3400 takes nothing returns nothing
  if GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit())then
    call Func3399()
  elseif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit()))and IsBlocked(GetSpellTargetUnit())then
    call RemoveLinkenBuff(GetSpellTargetUnit())
  elseif IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false then
    call Func3399()
  endif
endfunction

function SoulRipTargeting takes nothing returns nothing
  if GetUnitTypeId(GetOrderTargetUnit())=='n0F5' or(IsUnitType(GetOrderTargetUnit(),UNIT_TYPE_STRUCTURE)and Func0595(GetOrderTargetUnit())==false)then
    call Func0658('n0K9')
  endif
endfunction

function Func3402 takes nothing returns nothing
  if IsUnitType(CastedUnit,UNIT_TYPE_HERO)or IsUnitType(CastedUnit,UNIT_TYPE_STRUCTURE)or GetUnitAbilityLevel(TriggeredUnit,'A38N')==1 then
    call KillUnit(TriggeredUnit)
  else
    call UnitAddAbility(TriggeredUnit,'A38N')
  endif
endfunction

function Func3403 takes unit u returns boolean
  local integer i=GetUnitTypeId(u)
  return i=='E02O' or i=='E02N' or i=='H00V' or i=='H084' or i=='H08B' or i=='H08C' or i=='H08D' or i=='E005'
endfunction

function Func3404 takes nothing returns nothing
  local unit z=GetTriggerUnit()
  local unit WXE=GetEventDamageSource()
  if Func3403(WXE)then
    call KillUnit(z)
  endif
  set z=null
  set WXE=null
endfunction

function Func3405 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,30)
  local unit CSA=(LoadUnitHandle(HY,h,269))
  local real CTA=GetUnitState(SGE,UNIT_STATE_LIFE)
  local real NVI=GetUnitState(SGE,UNIT_STATE_MAX_LIFE)
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if IsFakeDamage==0 and GetEventDamage()>0 then
      call Func3404()
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if GetTriggerUnit()==SGE then
      call KillUnit(CSA)
    endif
  elseif boolean094 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call PauseUnit(CSA,true)
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetUnitCurrentOrder(CSA)==851986 then
    call DisableTrigger(t)
    call EnableUnitControl(CSA)
    call ForceFulAttack(CSA,SGE)
    call DisableUnitControl(CSA)
    call EnableTrigger(t)
  elseif(CTA<(100*integer508)or CTA/NVI<(0.15+0.05*integer508))and GetUnitAbilityLevel(CSA,'B0AN')==0 then
    call IssueTargetOrder(units023[GetPlayerId(GetOwningPlayer(CSA))],"bloodlust",CSA)
  elseif IsUnitVisibleEx(SGE,GetOwningPlayer(CSA))==false then
    if Func0592(SGE)then
      if(LoadBoolean(HY,h,270))then
        if(LoadBoolean(HY,h,271))then
          if(LoadBoolean(HY,h,272))then
            call FlushChildHashtable(HY,(h))
            call CleanTrigger(t)
            call KillUnit(CSA)
          else
            call SaveBoolean(HY,h,272,(true))
          endif
        else
          call SaveBoolean(HY,h,271,(true))
        endif
      else
        call SaveBoolean(HY,h,270,(true))
      endif
    else
      call SaveBoolean(HY,h,270,(false))
      call SaveBoolean(HY,h,271,(false))
      call SaveBoolean(HY,h,272,(false))
      call UnitShareVision(SGE,GetOwningPlayer(CSA),true)
      call DisableTrigger(t)
      call EnableUnitControl(CSA)
      call ForceFulAttack(CSA,SGE)
      call DisableUnitControl(CSA)
      call EnableTrigger(t)
      call UnitShareVision(SGE,GetOwningPlayer(CSA),false)
    endif
  else
    call SaveBoolean(HY,h,270,(false))
    call SaveBoolean(HY,h,271,(false))
    call SaveBoolean(HY,h,272,(false))
  endif
  set t=null
  set SGE=null
  set CSA=null
  return false
endfunction

function Func3406 takes nothing returns boolean
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=GetEnumUnit()
  local unit CSA=CreateUnit(player024,'n0F5',GetUnitX(SGE),GetUnitY(SGE),0)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",CSA,"origin"))
  call ForceFulAttack(CSA,SGE)
  call DisableUnitControl(CSA)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterUnitEvent(t,CSA,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,CSA,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,CSA,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,CSA,EVENT_UNIT_ISSUED_TARGET_ORDER)
  if boolean036 then
    call TriggerRegisterUnitEvent(t,CSA,EVENT_UNIT_DAMAGED)
  endif
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function Func3405))
  call SaveUnitHandle(HY,h,30,SGE)
  call SaveUnitHandle(HY,h,269,(CSA))
  call SaveInteger(HY,h,5,(integer508))
  call SetUnitAbilityLevel(CSA,'A15Z',integer508)
  set t=null
  set SGE=null
  set CSA=null
  return false
endfunction

function Func3407 takes nothing returns boolean
  if GetUnitTypeId(GetFilterUnit())=='n0F5' and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 then
    call KillUnit(GetFilterUnit())
  endif
  return false
endfunction

function Func3408 takes player whichPlayer returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,whichPlayer,Condition(function Func3407))
  call KillGroup(g)
  set g=null
endfunction

function Func3409 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit C_A=(LoadUnitHandle(HY,h,2))
  local unit C0A=(LoadUnitHandle(HY,h,266))
  local unit C1A=(LoadUnitHandle(HY,h,267))
  local unit C2A=(LoadUnitHandle(HY,h,268))
  local integer QIE=(LoadInteger(HY,h,5))
  local group g
  local player p
  if IsSentinel(GetOwningPlayer(C_A))then
    set p=Scourges[0]
  else
    set p=Sentinels[0]
  endif
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    if(LoadBoolean(HY,h,265))then
      call TimedReveal(p,.4,GetUnitX(C_A),GetUnitY(C_A),600)
    endif
    call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UDeathMedium\\UDeath.mdl",GetUnitX(C_A),GetUnitY(C_A)))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call Func0477(C_A,2)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl",GetUnitX(C0A),GetUnitY(C0A)))
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl",GetUnitX(C1A),GetUnitY(C1A)))
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl",GetUnitX(C2A),GetUnitY(C2A)))
    call RemoveUnit(C0A)
    call RemoveUnit(C1A)
    call RemoveUnit(C2A)
    call Func3408(GetOwningPlayer(C_A))
  else
    call SetUnitTimeScale(C_A,1.)
    if IsUnitVisibleEx(C_A,p)then
      call SaveBoolean(HY,h,265,(true))
    endif
    set g=GetAvailableGroup()
    set tt_unit1=C_A
    set player024=GetOwningPlayer(C_A)
    set integer508=QIE
    call GroupEnumUnitsInRange(g,GetUnitX(C_A),GetUnitY(C_A),25+400+200*QIE,Condition(function Func0814))
    if boolean094==false then
      call ForGroup(g,function Func3406)
    endif
    call KillGroup(g)
    set g=null
  endif
  set t=null
  set C_A=null
  set C0A=null
  set C1A=null
  set C2A=null
  return false
endfunction

function Func3410 takes unit u,real C4A,real C5A returns nothing
  local real d=GetEventDamage()
  if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)==false then
    set C4A=C5A
  endif
  if d>C4A then
    call Func0673(u,d-C4A)
  else
    call DisableTrigger(GetTriggeringTrigger())
    call DamageTarget(GetEventDamageSource(),u,10,C4A-d)
    call EnableTrigger(GetTriggeringTrigger())
  endif
endfunction

function Func3411 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call RemoveSavedBoolean(HY,h,0)
    call CleanTrigger(GetTriggeringTrigger())
  elseif GetEventDamage()>0 then
    call Func3410(GetTriggerUnit(),2.,1.)
  endif
endfunction

function Tombstone_SpellEffect takes nothing returns nothing
  local real x=SafeX50(GetSpellTargetX())
  local real y=SafeY50(GetSpellTargetY())
  local unit C_A
  local real dx
  local real dy
  local real a
  local unit C0A
  local unit C1A
  local unit C2A
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A15V')
  local integer WVE
  local string s="Stand Work Gold"
  local string so="Stand Work"
  local integer i
  if QIE==1 then
    set C_A=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'n0FJ',x,y,0)
  elseif QIE==2 then
    set C_A=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'n0FI',x,y,0)
  elseif QIE==3 then
    set C_A=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'n0F6',x,y,0)
  else
    set C_A=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'n0FH',x,y,0)
  endif
  call SetUnitAnimation(C_A,"birth")
  call SetUnitTimeScale(C_A,1.8)
  call PlaySoundAtPos(sound052,x,y)
  set WVE=GetPlayerId(GetOwningPlayer(C_A))
  if units023[WVE]==null then
    set units023[WVE]=CreateUnit(GetOwningPlayer(C_A),'e01V',x,y,0)
    call UnitAddAbility2(units023[WVE],'A176')
  endif
  call UnitApplyTimedLife(C_A,'BTLF',10+5*QIE)
  call KillTrees(x,y,300)
  set dx=SafeX50(x+200*Cos(0*bj_DEGTORAD))
  set dy=SafeY50(y+200*Sin(0*bj_DEGTORAD))
  set a= AngleBetweenXY(dx,dy,x,y)
  set C0A=CreateUnit(GetOwningPlayer(C_A),'h07H',dx,dy,a)
  call SetUnitAnimation(C0A,s)
  set dx=SafeX50(x+200*Cos(120*bj_DEGTORAD))
  set dy=SafeY50(y+200*Sin(120*bj_DEGTORAD))
  set a= AngleBetweenXY(dx,dy,x,y)
  set C1A=CreateUnit(GetOwningPlayer(C_A),'h07H',dx,dy,a)
  call SetUnitAnimation(C1A,s)
  set dx=SafeX50(x+200*Cos(240*bj_DEGTORAD))
  set dy=SafeY50(y+200*Sin(240*bj_DEGTORAD))
  set a= AngleBetweenXY(dx,dy,x,y)
  set C2A=CreateUnit(GetOwningPlayer(C_A),'h07H',dx,dy,a)
  call SetUnitAnimation(C2A,s)
  set i=0
  loop
    set i=i+1
    call QueueUnitAnimation(C0A,s)
    call QueueUnitAnimation(C1A,s)
    call QueueUnitAnimation(C2A,s)
    call QueueUnitAnimation(C_A,so)
    exitwhen i>17
  endloop
  call TriggerRegisterUnitEvent(t,C_A,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(t,3,true)
  call TriggerAddCondition(t,Condition(function Func3409))
  call SaveUnitHandle(HY,h,2,(C_A))
  call SaveUnitHandle(HY,h,266,(C0A))
  call SaveUnitHandle(HY,h,267,(C1A))
  call SaveUnitHandle(HY,h,268,(C2A))
  call SaveInteger(HY,h,5,(QIE))
  call SaveBoolean(HY,h,265,(false))
  call TriggerEvaluate(t)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,C_A,EVENT_UNIT_DAMAGED)
  call TriggerRegisterDeathEvent(t,C_A)
  call TriggerAddCondition(t,Condition(function Func3411))
  set C_A=null
  set C0A=null
  set C1A=null
  set C2A=null
  set t=null
endfunction

function Func3413 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(source,'A15J')
  call SetUnitAbilityLevel(source,'A15K',QIE)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func3414 takes nothing returns nothing
  if IsUnitType(tt_unit1,UNIT_TYPE_HERO)then
    call SetUnitState(tt_unit3,UNIT_STATE_LIFE,GetUnitState(tt_unit3,UNIT_STATE_LIFE)+GetUnitState(tt_unit3,UNIT_STATE_MAX_LIFE)*0.06)
  else
    call SetUnitState(tt_unit3,UNIT_STATE_LIFE,GetUnitState(tt_unit3,UNIT_STATE_LIFE)+GetUnitState(tt_unit3,UNIT_STATE_MAX_LIFE)*0.02)
  endif
endfunction

function Func3415 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local trigger R4I=(LoadTriggerHandle(HY,(ZAE),274))
  local integer QIE=GetHandleId(R4I)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX
  local real result
  local real ZEE
  local boolean ZSE=(LoadBoolean(HY,(ZAE),273))
  if(GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==source)or(GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_WIDGET_DEATH)then
    call FlushChildHashtable(HY,(QIE))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(R4I)
    call CleanTrigger(RBX)
  elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
    if IsUnitIllusion(GetDyingUnit())==false then
      call AddProjectile(GetDyingUnit(),source,'h07Y',"Func3414",9999,false)
    endif
  elseif ZSE==false then
    set RCX=GetTriggerUnit()
    set result=DistanceBetweenUnits(source,RCX)
    if result<775 and GetEventDamage()>4 then
      set ZEE=15+5*integer509
      if result>200 then
        set ZEE=ZEE-15*((result-150)/625)
      endif
      call SaveBoolean(HY,(ZAE),273,(true))
      call DamageTarget(GetEventDamageSource(),GetTriggerUnit(),7,GetEventDamage()*ZEE/100)
      call SaveBoolean(HY,(ZAE),273,(false))
    endif
  endif
  set RBX=null
  set R4I=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3416 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local trigger R4I=(LoadTriggerHandle(HY,(ZAE),275))
  local integer QIE=GetHandleId(R4I)
  local unit source=GetTriggerUnit()
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  if IsUnitEnemy(RCX,GetOwningPlayer(source))and AliveNonBuildOrMarker(source)then
    if(LoadBoolean(HY,(QIE),(GetHandleId(source))))==false then
      call TriggerRegisterUnitEvent(R4I,source,EVENT_UNIT_DAMAGED)
      call TriggerRegisterUnitEvent(R4I,source,EVENT_UNIT_DEATH)
      call SaveBoolean(HY,(QIE),(GetHandleId(source)),(true))
    endif
  endif
  set RBX=null
  set R4I=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3417 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local trigger R4I=CreateTrigger()
  local integer QIE=GetHandleId(R4I)
  local trigger IJI=CreateTrigger()
  local integer ZBE=GetHandleId(IJI)
  local integer ZCE=GetUnitAbilityLevel(source,'A15J')
  set integer509=ZCE
  call TriggerRegisterUnitInRange(RBX,source,750,Condition(function ReturnTrue))
  call TriggerAddCondition(RBX,Condition(function Func3416))
  call SaveTriggerHandle(HY,(ZAE),275,(R4I))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call TriggerRegisterTimerEvent(R4I,30,false)
  call TriggerRegisterDeathEvent(R4I,source)
  call TriggerAddCondition(R4I,Condition(function Func3415))
  call SaveTriggerHandle(HY,(QIE),274,(RBX))
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveBoolean(HY,(QIE),273,(false))
  call TriggerRegisterTimerEvent(IJI,0.01,false)
  call TriggerAddCondition(IJI,Condition(function Func3413))
  call SaveUnitHandle(HY,(ZBE),2,(source))
  set source=null
  set RBX=null
  set R4I=null
  set IJI=null
endfunction

function FreshGolem_SpellEffectPre takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='H00R' then
    call Func3417()
  endif
endfunction

function Func3419 takes nothing returns nothing
  call PreloadAbility('A15K')
  call PreloadAbility('A329')
  call HideAbility('A329')
  call AddDispellableBuff('B0AM')
  call AddWrapper("Func4647",0)
endfunction

function Func3420 takes unit u returns real
  local integer h=LoadInteger(HY,GetHandleId(u),'A0LK')
  local integer c=LoadInteger(HY,h,1)
  local real dmg=0.
  local integer i=IMaxIF(c-40,0)
  loop
    set dmg=LoadReal(HY,h,i)+dmg
    set i=i+1
    exitwhen i>c
  endloop
  return dmg
endfunction

function Func3421 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local real result=(LoadReal(HY,(ZAE),66))
  local real ZEE=(LoadReal(HY,(ZAE),67))
  local real ZWE=(LoadReal(HY,(ZAE),137))
  local integer QIE=GetTriggerEvalCount(RBX)
  local real ZYE=GetUnitX(source)
  local real ICX=GetUnitY(source)
  local real N1X=(LoadReal(HY,(ZAE),23))
  local real N2X=(LoadReal(HY,(ZAE),24))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  local group g
  local group IBI
  local integer ZBE=GetUnitAbilityLevel(source,'A0LK')
  if DistanceBetweenXY(ZYE,ICX,result,ZEE)<=90. then
    set ZYE=result
    set ICX=ZEE
  else
    set ZYE=SafeX50(N1X+90*Cos(ZWE*bj_DEGTORAD))
    set ICX=SafeY50(N2X+90*Sin(ZWE*bj_DEGTORAD))
  endif
  call SaveReal(HY,(ZAE),23,((ZYE)*1.0))
  call SaveReal(HY,(ZAE),24,((ICX)*1.0))
  call SetUnitPosition(source,ZYE,ICX)
  if(ZYE==result and ICX==ZEE)or QIE>LoadInteger(HY,ZAE,0)then
    call UnitRemoveAbility(source,'A3HZ')
    call SetUnitX(RCX,ZYE)
    call SetUnitY(RCX,ICX)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call SetUnitAnimation(source,"stand")
    call SetUnitPathing2(source,true)
    call SetUnitInvulnerable(source,false)
    if GetUnitTypeId(source)=='E02X' then
      call SetUnitVertexColor(source,255,255,255,255)
    else
      call SetUnitVertexColor(source,0,255,150,255)
    endif
    call SaveInteger(HY,(GetHandleId(source)),4261,2)
    call Func0673(source,Func3420(source))
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function TimeWalk_SpellEffect takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real cx=GetUnitX(u)
  local real cy=GetUnitY(u)
  local real tx
  local real ty
  local real a
  local real ILX
  local real DIA=675.
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    set DIA=DIA+200.
  endif
  if GetSpellTargetUnit()==null then
    set tx=GetSpellTargetX()
    set ty=GetSpellTargetY()
  else
    set tx=GetUnitX(GetSpellTargetUnit())
    set ty=GetUnitY(GetSpellTargetUnit())
  endif
  set a= AngleBetweenXY(cx,cy,tx,ty)
  set ILX=DistanceBetweenXY(cx,cy,tx,ty)
  if ILX>DIA then
    set tx=cx+DIA*Cos(a*bj_DEGTORAD)
    set ty=cy+DIA*Sin(a*bj_DEGTORAD)
  endif
  call SetUnitAnimationByIndex(u,0)
  call SetUnitPathing2(u,false)
  call SetUnitInvulnerable(u,true)
  call SetUnitVertexColor(u,0,0,0,255)
  call SaveInteger(HY,(GetHandleId(u)),4261,1)
  call SaveReal(HY,(h),66,SafeX50(tx))
  call SaveReal(HY,(h),67,SafeY50(ty))
  call SaveReal(HY,(h),23,cx)
  call SaveReal(HY,(h),24,cy)
  call SaveReal(HY,(h),137,a)
  call SaveUnitHandle(HY,(h),14,(u))
  call SaveInteger(HY,h,0,R2I(DIA/90.))
  call TriggerRegisterTimerEvent(t,0.03,true)
  call UnitAddAbility2(u,'A3HZ')
  call TriggerAddCondition(t,Condition(function Func3421))
  set u=null
  set t=null
endfunction

function Func3423 takes unit u,real dmg returns nothing
  local integer h=LoadInteger(HY,GetHandleId(u),'A0LK')
  call SaveReal(HY,h,LoadInteger(HY,h,1),LoadReal(HY,h,LoadInteger(HY,h,1))+dmg)
endfunction

function Func3424 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,1)
  local integer i
  set c=c+1
  if c>400 then
    set i=0
    loop
      call SaveReal(HY,h,i,LoadReal(HY,h,360+i))
      set i=i+1
      exitwhen i>40
    endloop
    loop
      call RemoveSavedReal(HY,h,i)
      set i=i+1
      exitwhen i>400
    endloop
    set c=40
  endif
  call SaveInteger(HY,h,1,c)
  set t=null
  set u=null
endfunction

function Func3425 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  local trigger t
  local integer h
  if HaveSavedBoolean(HY,hu,'A0LK')then
    set u=null
    return
  endif
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call SaveBoolean(HY,hu,'A0LK',true)
  call SaveInteger(HY,hu,'A0LK',h)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerAddCondition(t,Condition(function Func3424))
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,1,0)
  set u=null
  set t=null
endfunction

function Func3426 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetUnitAbilityLevel(u,'A3RO')==0 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call UnitRemoveAbility(u,'A3RO')
    call UnitRemoveAbility(u,'a3RO')
    call RemoveSavedHandle(HY,GetHandleId(u),'A3RO')
    call Func0230(u,LoadReal(HY,h,0))
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set u=null
  set t=null
endfunction

function Func3427 takes nothing returns nothing
  local trigger t
  local integer h
  local unit u=tt_unit1
  local real NII=tt_real1
  local integer hu=GetHandleId(u)
  local integer i
  local real F2I=0.
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call FlushChildHashtable(HY,h)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3426))
  call SaveUnitHandle(HY,h,0,u)
  call SaveTriggerHandle(HY,hu,'A3RO',t)
  call SaveReal(HY,h,1,TimerGetElapsed(GlobalTimer)+NII)
  set i=Func2315(u,NII)
  if i>0 then
    set F2I=0.08*i
    call SaveReal(HY,h,0,F2I)
    call Func0230(u,-F2I)
  endif
  set u=null
  set t=null
endfunction

function TimeDilation_SpellEffect takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit u2
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local real D1E=4.+2.*QIE
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),740,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    if GetUnitAbilityLevel(u2,'A3RO')==0 and IsUnitInvulnerable(u2)==false then
      call GroupRemoveUnit(g,u2)
      call UnitAddAbilityTimedExF(u2,'A3RO',1,D1E,'a3RO')
      set tt_unit1=u2
      set tt_real1=D1E
      call ExecuteFunc("Func3427")
    endif
  endloop
  set SKE=null
endfunction

function Func3429 takes nothing returns nothing
  call AddDispellableBuff('B0C2')
  call AddToPurgeList('A3RO','PRGE')
  call AddToPurgeList('a3RO','PRGE')
  call AddWrapper("Func4630",1)
endfunction

function Func3430 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and GetOwningPlayer(GetFilterUnit())!=player004 and GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(tt_unit1)and GetUnitTypeId(GetFilterUnit())!='EC45'
endfunction

function Func3431 takes unit u returns nothing
  if GetUnitTypeId(u)!='ncop' then
    call SetUnitTimeScale(u,0)
    call SaveBoolean(HY,GetHandleId(u),4306,true)
    call StunTargetEx(u,0.1,true)
  endif
endfunction

function Func3432 takes nothing returns nothing
  call Func3431(GetEnumUnit())
endfunction

function Func3433 takes nothing returns nothing
  local unit u=GetEnumUnit()
  call SaveBoolean(HY,GetHandleId(u),4306,false)
  call PauseUnit(u,false)
  call SetUnitTimeScale(u,1)
  set u=null
endfunction

function Func3434 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=LoadUnitHandle(HY,h,19)
  local unit Hero=LoadUnitHandle(HY,h,14)
  local integer QIE=LoadInteger(HY,h,5)
  local group g=LoadGroupHandle(HY,h,220)
  local integer c=LoadInteger(HY,h,28)
  local real DLA=GetUnitX(d)
  local real DMA=GetUnitY(d)
  local group gg
  local integer D1E=LoadInteger(HY,h,6)
  call SaveUnitHandle(TempHash,'CHRN',0,d)
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set c=c+1
    call SaveInteger(HY,h,28,c)
    if DistanceBetweenUnits(Hero,d)<435 then
      call CustomSpeed(Hero,999,1000)
    else
      call CustomSpeed(Hero,0,0)
    endif
    set gg=GetAvailableGroup()
    call ForGroup(g,function Func3433)
    set tt_unit1=Hero
    call GroupEnumUnitsInRange(gg,DLA,DMA,475,Condition(function Func3430))
    call GroupClear(g)
    call GroupAddGroup(gg,g)
    call ForGroup(gg,function Func3432)
    call KillGroup(gg)
  else
    if IsUnitInGroup(GetTriggerUnit(),g)==false then
      call GroupAddUnit(g,GetTriggerUnit())
      call Func1032(Hero,GetTriggerUnit())
      call Func3431(GetTriggerUnit())
    endif
  endif
  call RemoveSavedHandle(TempHash,'CHRN',0)
  if c>D1E then
    if boolean094==false then
      call ForGroup(g,function Func3433)
    endif
    call CustomSpeed(Hero,0,0)
    call KillUnit(d)
    call RemoveUnit(d)
    call KillGroup(g)
    call CleanTrigger(t)
    call FlushChildHashtable(HY,h)
  endif
  set t=null
  set d=null
  set Hero=null
  set g=null
  set gg=null
endfunction

function Void_ChronosPhere takes nothing returns nothing
  local unit Hero=GetTriggerUnit()
  local integer YGX=GetUnitAbilityLevel(Hero,'A0J1')+GetUnitAbilityLevel(Hero,'A1D7')
  local real DLA=GetSpellTargetX()
  local real DMA=GetSpellTargetY()
  local unit d=CreateUnit(GetOwningPlayer(Hero),'u00L',DLA,DMA,0)
  local integer h
  local trigger tt
  set tt=CreateTrigger()
  set h=GetHandleId(tt)
  call SaveUnitHandle(HY,h,19,d)
  call SaveUnitHandle(HY,h,14,Hero)
  call SaveGroupHandle(HY,h,220,GetAvailableGroup())
  call SaveInteger(HY,h,28,0)
  call SaveInteger(HY,h,5,YGX)
  call SaveInteger(HY,h,6,35+YGX*5)
  call SavePlayerHandle(HY,h,0,GetOwningPlayer(Hero))
  call TriggerRegisterTimerEvent(tt,.1,true)
  call TriggerRegisterTimerEvent(tt,0,false)
  call TriggerRegisterUnitInRange(tt,d,425,Condition(function Func3430))
  call TriggerAddCondition(tt,Condition(function Func3434))
  set Hero=null
  set d=null
  set tt=null
endfunction

function Func3436 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(MHT,GetHandleId(t),0)
  if GetUnitAbilityLevel(u,'B0C2')==0 then
    call RemoveSavedHandle(MHT,GetHandleId(u),'A081')
    call FlushChildHashtable(MHT,GetHandleId(t))
    call PauseTimer(t)
    call DestroyTimer(t)
    call SetUnitTimeScale(u,1)
  else
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",u,"chest"))
  endif
  set t=null
  set u=null
endfunction

function Func3437 takes unit u,integer h returns nothing
  local timer t=CreateTimer()
  call SaveTimerHandle(MHT,h,'A081',t)
  call SaveUnitHandle(MHT,GetHandleId(t),0,u)
  call TimerStart(t,0.1,true,function Func3436)
  call SetUnitTimeScale(u,0)
  set t=null
endfunction

function Func3438 takes unit u,unit t returns nothing
  local integer h=GetHandleId(t)
  local integer lvl=GetUnitAbilityLevel(u,'A081')
  if lvl>0 and GetUnitAbilityLevel(t,'B0C2')==1 and HaveSavedHandle(MHT,h,'A081')==false then
    call Func3437(t,h)
  endif
endfunction

function GetIvokerOrbLevel takes unit u,integer LII returns integer
  local integer QIE=LoadInteger(HY,GetHandleId(u),LII)
  if QIE>0 and Func0898(u)then
    set QIE=QIE+1
  endif
  return QIE
endfunction

function GetIvokerSpellData takes unit u,integer id,string data returns real
  if id=='A0XL' then
    if data=="slow" then
      return GetIvokerOrbLevel(u,3001)*5.+15.
    elseif data=="selfslow" then
      return GetIvokerOrbLevel(u,3000)*10.-40.
    endif
  elseif id=='A0VG' then
    if data=="dmg" then
      return GetIvokerOrbLevel(u,3002)*62.5+37.5
    endif
  elseif id=='A0VS' then
    if data=="dmg" then
      return GetIvokerOrbLevel(u,3000)*75.+25.
    endif
  elseif id=='A0VZ' then
    if data=="dmg" then
      return GetIvokerOrbLevel(u,3001)*7.
    elseif data=="dur" then
      return GetIvokerOrbLevel(u,3001)*.5+2.5
    elseif data=="cd" then
      return 8.-GetIvokerOrbLevel(u,3001)*0.0285
    endif
  elseif id=='A0VK' then
    if data=="distance" then
      return(GetIvokerOrbLevel(u,3000)+1)*400.
    elseif data=="dur" then
      return GetIvokerOrbLevel(u,3001)*.3+0.5
    elseif data=="dmg" then
      return GetIvokerOrbLevel(u,3000)*45.+70.
    endif
  elseif id=='A0VM' then
    if data=="disarm" then
      return GetIvokerOrbLevel(u,3000)*.75+.5
    elseif data=="dur" then
      return GetIvokerOrbLevel(u,3001)*.25
    elseif data=="dmg" then
      return GetIvokerOrbLevel(u,3002)*40.
    endif
  elseif id=='A0VN' then
    if data=="dmg" then
      return GetIvokerOrbLevel(u,3002)*17.5+40.
    elseif data=="distance" then
      return GetIvokerOrbLevel(u,3000)*150.+320.
    endif
  elseif id=='A0VN' then
    if data=="dmg" then
      return GetIvokerOrbLevel(u,3002)*17.5+40.
    elseif data=="distance" then
      return GetIvokerOrbLevel(u,3000)*175.+325.
    endif
  elseif id=='A0VO' then
    if data=="amount" then
      if GetIvokerOrbLevel(u,3002)>3 and GetIvokerOrbLevel(u,3001)>3 then
        return 2.
      else
        return 1.
      endif
    elseif data=="dmg" then
      return GetIvokerOrbLevel(u,3002)*10.+12.
    elseif data=="mana" then
      return GetIvokerOrbLevel(u,3002)*50.+50.
    elseif data=="armor" then
      return GetIvokerOrbLevel(u,3002)-1.
    elseif data=="range" then
      return GetIvokerOrbLevel(u,3001)*65.+235.
    elseif data=="hp" then
      return GetIvokerOrbLevel(u,3001)*100.+200.
    elseif data=="dur" then
      return GetIvokerOrbLevel(u,3001)*10.+10.
    endif
  elseif id=='A0VP' then
    if data=="dmg" then
      return GetIvokerOrbLevel(u,3002)*6.
    elseif data=="slow" then
      return GetIvokerOrbLevel(u,3000)*20.
    elseif data=="dur" then
      return GetIvokerOrbLevel(u,3000)*1.5+1.5
    endif
  elseif id=='A0VQ' then
    if data=="dmg" then
      return GetIvokerOrbLevel(u,3002)*15.-5.
    elseif data=="as" then
      return GetIvokerOrbLevel(u,3000)*15.-5.
    endif
  endif
  return 0.
endfunction

function Func3441 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VS',"dmg"))))
  set s=(Func0564(Func0338('A0VS',2),0))
  call Func0337('A0VS',1,s)
endfunction

function Func3442 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VK',"distance"))))
  call SaveStr(TempHash,'strr',1,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VK',"dmg"))))
  call SaveStr(TempHash,'strr',2,R2SW(GetIvokerSpellData(tt_unit1,'A0VK',"dur"),2,2))
  set s=(Func0564(Func0338('A0VK',2),2))
  call Func0337('A0VK',1,s)
endfunction

function Func3443 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VQ',"as"))))
  call SaveStr(TempHash,'strr',1,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VQ',"dmg"))))
  set s=(Func0564(Func0338('A0VQ',2),1))
  call Func0337('A0VQ',1,s)
endfunction

function Func3444 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0XL',"slow"))))
  call SaveStr(TempHash,'strr',1,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0XL',"selfslow"))))
  set s=(Func0564(Func0338('A0XL',2),1))
  call Func0337('A0XL',1,s)
endfunction

function Func3445 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VM',"dmg"))))
  call SaveStr(TempHash,'strr',1,R2S(GetIvokerSpellData(tt_unit1,'A0VM',"dur")))
  call SaveStr(TempHash,'strr',2,R2S(GetIvokerSpellData(tt_unit1,'A0VM',"disarm")))
  set s=(Func0564(Func0338('A0VM',2),2))
  call Func0337('A0VM',1,s)
endfunction

function Func3446 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VN',"distance"))))
  call SaveStr(TempHash,'strr',1,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VN',"dmg"))))
  call SaveStr(TempHash,'strr',2,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VN',"dmg")/5.)))
  set s=(Func0564(Func0338('A0VN',2),2))
  call Func0337('A0VN',1,s)
endfunction

function Func3447 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VO',"amount"))))
  call SaveStr(TempHash,'strr',1,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VO',"dmg"))))
  call SaveStr(TempHash,'strr',2,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VO',"range"))))
  call SaveStr(TempHash,'strr',3,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VO',"hp"))))
  call SaveStr(TempHash,'strr',4,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VO',"mana"))))
  call SaveStr(TempHash,'strr',5,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VO',"armor"))))
  call SaveStr(TempHash,'strr',6,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VO',"dur"))))
  set s=(Func0564(Func0338('A0VO',2),6))
  call Func0337('A0VO',1,s)
endfunction

function Func3448 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VP',"dmg"))))
  call SaveStr(TempHash,'strr',1,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VP',"slow"))))
  call SaveStr(TempHash,'strr',2,R2S(GetIvokerSpellData(tt_unit1,'A0VP',"dur")))
  set s=(Func0564(Func0338('A0VP',2),2))
  call Func0337('A0VP',1,s)
endfunction

function Func3449 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VG',"dmg"))))
  set s=(Func0564(Func0338('A0VG',2),0))
  call Func0337('A0VG',1,s)
endfunction

function Func3450 takes nothing returns nothing
  local string s
  call SaveStr(TempHash,'strr',0,R2S(GetIvokerSpellData(tt_unit1,'A0VZ',"dur")))
  call SaveStr(TempHash,'strr',1,I2S(R2I(GetIvokerSpellData(tt_unit1,'A0VZ',"dmg"))))
  call SaveStr(TempHash,'strr',2,R2S(GetIvokerSpellData(tt_unit1,'A0VZ',"cd")))
  set s=(Func0564(Func0338('A0VZ',2),2))
  call Func0337('A0VZ',1,s)
endfunction

function Func3451 takes unit u,integer id returns nothing
  local string s
  set tt_unit1=u
  if id==integers150[1]then
    call ExecuteFunc("Func3441")
  elseif id==integers150[2]then
    call ExecuteFunc("Func3442")
  elseif id==integers150[3]then
    call ExecuteFunc("Func3443")
  elseif id==integers150[4]then
    call ExecuteFunc("Func3444")
  elseif id==integers150[5]then
    call ExecuteFunc("Func3445")
  elseif id==integers150[6]then
    call ExecuteFunc("Func3446")
  elseif id==integers150[7]then
    call ExecuteFunc("Func3447")
  elseif id==integers150[8]then
    call ExecuteFunc("Func3448")
  elseif id==integers150[9]then
    call ExecuteFunc("Func3449")
  elseif id==integers150[10]then
    call ExecuteFunc("Func3450")
  endif
endfunction

function Func3452 takes unit u,unit d,real D8A returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  local real mp
  local real dmg
  local real D9A=0.
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(d),GetUnitY(d),700,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    set mp=Func0468(RMinIF(GetUnitState(u2,UNIT_STATE_MANA),D8A),0)
    set dmg=mp*0.5
    if mp>0 and IsUnitInvulnerable(u2)==false then
      call DamageTarget(u,u2,3,dmg)
      call SetUnitState(u2,UNIT_STATE_MANA,GetUnitState(u2,UNIT_STATE_MANA)-mp)
      if(IsUnitType(u2,UNIT_TYPE_HERO))then
        call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+mp*0.5)
        set D9A=D9A+mp*0.5
      endif
    endif
  endloop
  if D9A>0 then
    call TextTagOnUnit("+"+I2S(R2I(D9A)),1.5,u,0.03,50,75,255,255,IsNeutralsOrObserversOrAllies(GetOwningPlayer(u)))
  endif
  call KillGroup(g)
endfunction

function Func3453 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer c=GetTriggerEvalCount(t)
  local unit d=(LoadUnitHandle(HY,(h),19))
  local real r=1.+0.05*c
  call SetUnitScale(d,r,r,r)
  if c>58 then
    call Func3452(LoadUnitHandle(HY,(h),2),d,LoadReal(HY,h,3000))
    call KillUnit(CreateUnit(GetOwningPlayer(d),'e01O',GetUnitX(d),GetUnitY(d),0))
    call RemoveUnit(d)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set d=null
  return false
endfunction

function EMP_SpellEffect takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real a=Atan2(y-GetUnitY(u),x-GetUnitX(u))
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerAddCondition(t,Condition(function Func3453))
  call SaveUnitHandle(HY,h,19,CreateUnit(GetOwningPlayer(u),'e01M',x,y,a*bj_RADTODEG))
  call SaveUnitHandle(HY,h,2,u)
  call SaveReal(HY,h,3000,GetIvokerSpellData(u,GetSpellAbilityId(),"dmg"))
  set t=null
  set u=null
endfunction

function Func3455 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local real D1E=LoadReal(HY,h,1)
  if IsUnitInvulnerable(SGE)==false or D1E<=0. or IsDead(SGE)then
    call DamageTarget(LoadUnitHandle(HY,h,0),SGE,1,LoadReal(HY,h,0))
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  else
    if D1E>0. and D1E<0.02 then
      call TimerStart(t,Func0468(D1E,0.),false,function Func3455)
      call SaveReal(HY,h,1,0.)
    else
      call SaveReal(HY,h,1,D1E-.02)
    endif
  endif
  set t=null
  set SGE=null
endfunction

function Func3456 takes unit FOA,unit SGE,real dmg,real D1E returns nothing
  local unit d=CreateUnit(GetOwningPlayer(FOA),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local timer t
  local integer h
  local integer ch
  call UnitAddAbility(d,'A3KZ')
  call UnitAddAbility(d,'A3L0')
  if D1E!=LoadReal(HY,'work','A3KZ')then
    set ch=GetAbilityDataDefAddr('A3KZ')
    if ch>0 then
      set Memory[(ch+0x60)/4]=SetRealIntoMemory(D1E)
      set Memory[(ch+0x64)/4]=SetRealIntoMemory(D1E)
      set Memory[(ch+0x78)/4]=SetRealIntoMemory(D1E)
    endif
    set ch=GetAbilityDataDefAddr('A3L0')
    if ch>0 then
      set Memory[(ch+0x60)/4]=SetRealIntoMemory(D1E)
      set Memory[(ch+0x64)/4]=SetRealIntoMemory(D1E)
    endif
    call SaveReal(HY,'work','A3KZ',D1E)
  endif
  call SaveUnitHandle(HY,GetHandleId(d),'prge',FOA)
  call SetUnitOwner(d,GetOwningPlayer(SGE),false)
  if Func1355(SGE,d)then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call TimerStart(t,0.02,true,function Func3455)
    call SaveUnitHandle(HY,h,0,FOA)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveReal(HY,h,0,dmg)
    call SaveReal(HY,h,1,D1E)
    if UnitInventorySize(SGE)>0 then
      if GetUnitAbilityLevel(SGE,'A0RN')==0 then
        call SaveReal(HY,GetHandleId(SGE),787,TimerGetElapsed(GlobalTimer))
      endif
    endif
    set t=null
  endif
  call SetUnitOwner(d,player004,false)
  set d=null
endfunction

function Func3457 takes nothing returns boolean
  return (IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false)and GetFilterUnit()!=Roshan and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func3458 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,(h),19))
  local real tx=(LoadReal(HY,(h),66))
  local real ty=(LoadReal(HY,(h),67))
  local real a=(LoadReal(HY,(h),137))
  local real dmg=LoadReal(HY,h,3000)
  local real D1E=LoadReal(HY,h,3001)
  local group g=(LoadGroupHandle(HY,(h),22))
  local real nx=GetUnitX(d)+25*Cos(a)
  local real ny=GetUnitY(d)+25*Sin(a)
  local group gg=GetAvailableGroup()
  local real ILX=DistanceBetweenXY(nx,ny,tx,ty)
  local unit u2
  if ILX<=30 then
    set nx=tx
    set ny=ty
  endif
  call SetUnitX(d,(nx))
  call SetUnitY(d,(ny))
  set tt_unit1=d
  call GroupEnumUnitsInRange(gg,nx,ny,225,Condition(function Func3457))
  loop
    set u2=FirstOfGroup(gg)
    exitwhen u2==null
    call GroupRemoveUnit(gg,u2)
    if IsUnitInGroup(u2,g)==false then
      call GroupAddUnit(g,u2)
      call Func3456(d,u2,dmg,D1E)
    endif
  endloop
  call KillGroup(gg)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or ILX<=30 or GetTriggerEvalCount(t)>LoadInteger(HY,h,0)then
    call KillGroup(g)
    call KillUnit(d)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set d=null
  set g=null
  set gg=null
  return false
endfunction

function Tonardo_SpellEffect takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real a=Atan2(y-GetUnitY(SKE),x-GetUnitX(SKE))
  local unit d
  local integer FAA=LoadInteger(HY,GetHandleId(SKE),3000)
  local integer FNA=LoadInteger(HY,(GetHandleId(SKE)),3001)
  local real NTI=GetIvokerSpellData(SKE,'A0VK',"distance")
  local real dmg=GetIvokerSpellData(SKE,'A0VK',"dmg")
  local real D1E=GetIvokerSpellData(SKE,'A0VK',"dur")
  local integer XXO=R2I(NTI/25.)+1
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set NTI=NTI+200.
  endif
  set x=GetUnitX(SKE)
  set y=GetUnitY(SKE)
  set d=CreateUnit(GetOwningPlayer(SKE),'n01U',x,y,a*bj_RADTODEG)
  call TriggerRegisterTimerEvent(t,0.025,true)
  call TriggerRegisterDeathEvent(t,d)
  call TriggerAddCondition(t,Condition(function Func3458))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveReal(HY,h,66,x+NTI*Cos(a))
  call SaveReal(HY,h,67,y+NTI*Sin(a))
  call SaveReal(HY,h,3000,dmg)
  call SaveReal(HY,h,3001,D1E)
  call SaveReal(HY,h,137,a)
  call SaveInteger(HY,h,0,XXO)
  call SaveGroupHandle(HY,h,22,(GetAvailableGroup()))
  set t=null
  set d=null
  set SKE=null
endfunction

function Func3460 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,17))
  if GetTriggerEvalCount(t)>=18 or GetUnitAbilityLevel(u,'A3GX')==0 then
    call Stat_Sub(u,LoadInteger(HY,h,0),"+DMG")
    call Stat_Sub(u,LoadInteger(HY,h,1),"+AS")
    call UnitRemoveAbility(u,'A3GX')
    call UnitRemoveAbility(u,'B3GX')
    call FlushChildHashtable(HY,(h))
    call RemoveSavedHandle(HY,GetHandleId(u),'A0VQ')
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  return false
endfunction

function Alacrity_SpellEffect takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit u=GetSpellTargetUnit()
  local integer FCA=R2I(GetIvokerSpellData(SKE,'A0VQ',"dmg"))
  local integer XMA=R2I(GetIvokerSpellData(SKE,'A0VQ',"as"))
  if GetUnitAbilityLevel(u,'A3GX')!=0 then
    call UnitRemoveAbility(u,'A3GX')
    call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(u),'A0VQ'))
  endif
  call SaveTriggerHandle(HY,GetHandleId(u),'A0VQ',t)
  call SaveInteger(HY,h,0,FCA)
  call SaveInteger(HY,h,1,XMA)
  call Stat_Add(u,FCA,"+DMG")
  call Stat_Add(u,XMA,"+AS")
  call UnitAddAbility2(u,'A3GX')
  if SKE!=u then
    call FuckingAssistBuffWrap(SKE,u)
  endif
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function Func3460))
  call SaveUnitHandle(HY,h,17,(u))
  set t=null
  set SKE=null
  set u=null
endfunction

function Func3462 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,0))
  local group g
  local integer id
  if GetUnitAbilityLevel(u,'B08X')==0 then
    call RemoveSavedHandle(HY,GetHandleId(u),'B08X')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set g=GetAvailableGroup()
    set tt_player1=GetOwningPlayer(u)
    set id=LoadInteger(HY,h,0)
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),425,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call GroupRemoveUnit(g,u)
      call UnitAddAbilityTimedExF(u,id,1,2.,'B08W')
    endloop
    call KillGroup(g)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3463 takes nothing returns nothing
  local trigger t
  local integer h
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  local integer OWA=GetIvokerOrbLevel(u,3001)
  local real F2I=GetIvokerSpellData(u,'A0XL',"selfslow")/100.
  local integer ch
  local integer id=GetSpellAbilityId()
  if HaveSavedInteger(AbilitiesHashtable,hu,id)then
    set ch=LoadInteger(AbilitiesHashtable,hu,id)
  else
    set ch=GetUnitAbility(u,id)
  endif
  if ch>0 then
    call SetAbilityDisabled2(ch,-1)
    set Memory[(Memory[(ch+0x54)/4]+0x7C)/4]=SetRealIntoMemory(F2I)
  endif
  if HaveSavedHandle(HY,hu,'B08X')then
    set t=LoadTriggerHandle(HY,hu,'B08X')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,0,u)
    call SaveTriggerHandle(HY,hu,'B08X',t)
    call TriggerRegisterTimerEvent(t,.05,true)
    call TriggerRegisterTimerEvent(t,.0,false)
    call TriggerAddCondition(t,Condition(function Func3462))
  endif
  call SaveInteger(HY,h,0,'A3RF'-1+OWA)
  set t=null
  set u=null
endfunction

function DefeningBlast_Disarm takes unit u,integer FAA returns nothing
  call UnitAddAbilityTimedExF(u,'A3QF',1,0.5+0.75*FAA,0)
endfunction

function Func3465 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  local integer i=LoadInteger(HY,h,0)
  local real a
  local real FGE
  local integer c
  local boolean FEX=false
  local integer D9X
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    loop
      if LoadUnitHandle(HY,h,i)==GetTriggerUnit()then
        call RemoveSavedHandle(HY,h,i)
        exitwhen true
      endif
      set i=i-1
      exitwhen i==0
    endloop
  else
    set D9X=0
    loop
      set u=LoadUnitHandle(HY,h,i)
      set c=LoadInteger(HY,h,10000+i)
      if not(u==null or IsDead(u)or c==0)then
        set a=LoadReal(HY,h,20000+i)
        set FGE=LoadReal(HY,h,10000+i)
        if c/3<=0 then
          set FGE=FGE*0.98
          call SaveReal(HY,h,10000+i,FGE)
        endif
        call SaveInteger(HY,h,10000+i,c-1)
        set D9X=D9X+1
        call Func2343(u,0.05)
        call ForceMovements(u,SafeX50(GetUnitX(u)+FGE*Cos(a)),SafeY50(GetUnitY(u)+FGE*Sin(a)),false,ModuloInteger(c,6)==0)
      else
        call RemoveSavedHandle(HY,h,i)
      endif
      set i=i-1
      exitwhen i<=0
    endloop
    if D9X==0 then
      call SaveInteger(HY,h,-2,LoadInteger(HY,h,-2)+1)
    endif
  endif
  set FEX=LoadInteger(HY,h,-2)>=10
  if FEX then
    call RemoveSavedHandle(HY,LoadInteger(HY,h,1),'dfbl')
    call PauseTimer(LoadTimerHandle(HY,h,-1))
    call DestroyTimer(LoadTimerHandle(HY,h,-2))
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
endfunction

function DefeningBlast_Movement takes unit target,unit caster,integer wex,integer quas returns nothing
  local trigger t
  local integer h
  local timer tt
  local real a
  local integer i=0
  if IsDead(target)then
    return
  endif
  if GetOwningPlayer(target)==Sentinels[0]or GetOwningPlayer(target)==Scourges[0]or GetOwningPlayer(target)==Neutrals then
    call StunTargetEx(target,wex*0.75+0.5,true)
  elseif IsUnitType(target,UNIT_TYPE_MAGIC_IMMUNE)==false then
    call DefeningBlast_Disarm(target,wex)
  endif
  if target==Roshan then
    return
  endif
  if IsUnitType(caster,UNIT_TYPE_HERO)==false then
    set caster=udg_Hero[GetPlayerId(GetOwningPlayer(caster))]
  endif
  if HaveSavedHandle(HY,GetHandleId(caster),'dfbl')==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,-1,tt)
    call SaveUnitHandle(HY,h,-2,caster)
    call SaveInteger(HY,h,1,GetHandleId(caster))
    call TimerStart(tt,0.03,true,null)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterDeathEvent(t,target)
    call TriggerAddCondition(t,Condition(function Func3465))
    call SaveInteger(HY,h,0,0)
    call SaveTriggerHandle(HY,GetHandleId(caster),'dfbl',t)
  else
    set t=LoadTriggerHandle(HY,GetHandleId(caster),'dfbl')
    set h=GetHandleId(t)
    set i=LoadInteger(HY,h,0)
    if GetUnitAbilityLevel(target,'A3QF')>0 then
      loop
        exitwhen i<0 or LoadUnitHandle(HY,h,i)==target
        set i=i-1
      endloop
    else
      set i=i+1
      call SaveInteger(HY,h,0,i)
    endif
  endif
  call SaveUnitHandle(HY,h,i,target)
  set a=Atan2(GetUnitY(target)-GetUnitY(caster),GetUnitX(target)-GetUnitX(caster))
  call SaveReal(HY,h,10000+i,6.)
  call SaveReal(HY,h,20000+i,a)
  call SaveInteger(HY,h,10000+i,quas*25/3)
  call SaveInteger(HY,h,3000,wex)
  call SaveInteger(HY,h,3001,quas)
  set tt=null
  set t=null
  call Func0433(target)
endfunction

function Func3467 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group016)==false then
    call GroupAddUnit(group016,GetEnumUnit())
    call DamageTarget(tt_unit1,GetEnumUnit(),1,integer092*40)
    call DefeningBlast_Movement(GetEnumUnit(),tt_unit1,integer089,integer091)
  endif
endfunction

function Func3468 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,(h),19))
  local real a=(LoadReal(HY,(h),137))
  local real FLA=(LoadReal(HY,(h),66))
  local real FMA=(LoadReal(HY,(h),67))
  local group g=(LoadGroupHandle(HY,(h),22))
  local integer FAA=(LoadInteger(HY,(h),3000))
  local integer FNA=(LoadInteger(HY,(h),3001))
  local integer FPA=(LoadInteger(HY,(h),3002))
  local real x=GetUnitX(d)
  local real y=GetUnitY(d)
  local group gg
  local unit u2
  local integer c=GetTriggerEvalCount(t)
  local real O5I=180+1.5*c
  if DistanceBetweenXY(x,y,FLA,FMA)<33. then
    set x=FLA
    set y=FMA
  else
    set x=x+33*Cos(a)
    set y=y+33*Sin(a)
  endif
  call SetUnitX(d,(x))
  call SetUnitY(d,(y))
  set gg=GetAvailableGroup()
  set tt_unit1=d
  call GroupEnumUnitsInRange(gg,x,y,O5I,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(gg)
    exitwhen u2==null
    call GroupRemoveUnit(gg,u2)
    if IsUnitInGroup(u2,g)==false then
      call GroupAddUnit(g,u2)
      call DamageTarget(d,u2,1,FPA*40)
      call DefeningBlast_Movement(u2,d,FAA,FNA)
    endif
  endloop
  call KillGroup(gg)
  if(x==FLA and y==FMA)or c>LoadInteger(HY,h,154)then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
    call KillGroup(g)
  endif
  set t=null
  set d=null
  set g=null
  set gg=null
  return false
endfunction

function Func3469 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a=Atan2(ty-GetUnitY(SKE),tx-GetUnitX(SKE))
  local unit d=CreateUnit(GetOwningPlayer(SKE),'n01X',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
  local real J9O=1000.
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set J9O=J9O+200.
  endif
  call SaveInteger(HY,h,154,R2I(J9O/33.))
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerRegisterDeathEvent(t,d)
  call TriggerAddCondition(t,Condition(function Func3468))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveReal(HY,h,137,a)
  call SaveReal(HY,h,66,GetUnitX(SKE)+J9O*Cos(a))
  call SaveReal(HY,h,67,GetUnitY(SKE)+J9O*Sin(a))
  call SaveGroupHandle(HY,h,22,(GetAvailableGroup()))
  if Func0898(SKE)then
    call SaveInteger(HY,h,3000,((LoadInteger(HY,(GetHandleId(SKE)),3000)))+1)
    call SaveInteger(HY,h,3001,((LoadInteger(HY,(GetHandleId(SKE)),3001)))+1)
    call SaveInteger(HY,h,3002,((LoadInteger(HY,(GetHandleId(SKE)),3002)))+1)
  else
    call SaveInteger(HY,h,3000,((LoadInteger(HY,(GetHandleId(SKE)),3000))))
    call SaveInteger(HY,h,3001,((LoadInteger(HY,(GetHandleId(SKE)),3001))))
    call SaveInteger(HY,h,3002,((LoadInteger(HY,(GetHandleId(SKE)),3002))))
  endif
  set t=null
  set d=null
  set SKE=null
endfunction

function Func3470 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,h,22))
  local integer i=0
  local unit d
  local real a
  local real tx
  local real ty
  local real x
  local real y
  local group gg
  local integer FAA=(LoadInteger(HY,(h),3000))
  local integer FNA=(LoadInteger(HY,(h),3001))
  local integer FPA=(LoadInteger(HY,(h),3002))
  local integer c=GetTriggerEvalCount(t)
  local real O5I=180+c*1.5
  local unit u2
  set gg=GetAvailableGroup()
  loop
    set d=LoadUnitHandle(HY,h,100+i)
    if IsDead(d)==false then
      set tx=LoadReal(HY,h,200+i)
      set ty=LoadReal(HY,h,300+i)
      set a=LoadReal(HY,h,100+i)
      set x=GetUnitX(d)
      set y=GetUnitY(d)
      if DistanceBetweenXY(x,y,tx,ty)<33. then
        set x=tx
        set y=ty
      else
        set x=x+33.*Cos(a)
        set y=y+33.*Sin(a)
      endif
      call SetUnitX(d,x)
      call SetUnitY(d,y)
      set tt_unit1=d
      call GroupEnumUnitsInRange(gg,x,y,O5I,Condition(function DefaultEnemyFilterWithAncientNonImmune))
      loop
        set u2=FirstOfGroup(gg)
        exitwhen u2==null
        call GroupRemoveUnit(gg,u2)
        if IsUnitInGroup(u2,g)==false then
          call GroupAddUnit(g,u2)
          call DamageTarget(d,u2,1,FPA*40)
          call DefeningBlast_Movement(u2,d,FAA,FNA)
        endif
      endloop
      call ForGroup(gg,function Func3467)
      if c>30 then
        call KillUnit(d)
      endif
      call GroupClear(gg)
    endif
    set i=i+1
    exitwhen i==12
  endloop
  call KillGroup(gg)
  if c>LoadInteger(HY,h,154)then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillGroup(g)
  endif
  set t=null
  set d=null
  set g=null
  set gg=null
  return false
endfunction

function Func3471 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real a= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetSpellTargetX(),GetSpellTargetY())
  local unit d
  local integer i=0
  local integer XXO=12
  local real J9O=1000.
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set J9O=J9O+200.
  endif
  loop
    set a=a+30.
    set d=CreateUnit(GetOwningPlayer(SKE),'n01X',GetUnitX(SKE),GetUnitY(SKE),a)
    call SaveUnitHandle(HY,h,100+i,d)
    call SaveReal(HY,h,100+i,a*bj_DEGTORAD)
    call SetUnitX(d,GetUnitX(SKE))
    call SetUnitY(d,GetUnitY(SKE))
    call SaveReal(HY,h,200+i,(GetUnitX(d)+J9O*Cos(a*bj_DEGTORAD)))
    call SaveReal(HY,h,300+i,(GetUnitY(d)+J9O*Sin(a*bj_DEGTORAD)))
    set i=i+1
    exitwhen i==XXO
  endloop
  call TriggerRegisterTimerEvent(t,0.03,true)
  call SaveInteger(HY,h,154,R2I(J9O/33.))
  call TriggerAddCondition(t,Condition(function Func3470))
  call SaveGroupHandle(HY,h,22,(GetAvailableGroup()))
  if Func0898(SKE)then
    call SaveInteger(HY,h,3000,LoadInteger(HY,GetHandleId(SKE),3000)+1)
    call SaveInteger(HY,h,3001,LoadInteger(HY,GetHandleId(SKE),3001)+1)
    call SaveInteger(HY,h,3002,LoadInteger(HY,GetHandleId(SKE),3002)+1)
  else
    call SaveInteger(HY,h,3000,LoadInteger(HY,GetHandleId(SKE),3000))
    call SaveInteger(HY,h,3001,LoadInteger(HY,GetHandleId(SKE),3001))
    call SaveInteger(HY,h,3002,LoadInteger(HY,GetHandleId(SKE),3002))
  endif
  call SaveInteger(HY,h,0,10)
  set t=null
  set d=null
  set SKE=null
endfunction

function Func3472 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggerUnit())
  if Func0898(GetTriggerUnit())then
    if LoadInteger(HY,h,3000)>=6 and LoadInteger(HY,h,3001)>=6 and LoadInteger(HY,h,3002)>=6 then
      call Func3471()
    else
      call Func3469()
    endif
  elseif LoadInteger(HY,h,3000)>=7 and LoadInteger(HY,h,3001)>=7 and LoadInteger(HY,h,3002)>=7 then
    call Func3471()
  else
    call Func3469()
  endif
endfunction

function ChaosMeteor_ResidualPeriodic takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit source=(LoadUnitHandle(HY,h,2))
  local unit target=LoadUnitHandle(HY,h,30)
  local real dmg=(LoadReal(HY,h,20))
  local effect fx=(LoadEffectHandle(HY,h,32))
  local integer c=GetTriggerEvalCount(t)
  call DamageTarget(source,target,1,dmg)
  if GetUnitAbilityLevel(target,'A303')==0 or c>=6 then
    call SaveInteger(HY,GetHandleId(target),'A0VN',LoadInteger(HY,GetHandleId(target),'A0VN')-1)
    if LoadInteger(HY,GetHandleId(target),'A0VN')<=0 then
      call UnitRemoveAbility(target,'A303')
      call UnitRemoveAbility(target,'B303')
    endif
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call DestroyEffect(fx)
  endif
  set t=null
  set source=null
  set target=null
  set fx=null
  return false
endfunction

function ChaosMeteor_Residual takes unit caster,unit target,real dmg returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,(h),2,(caster))
  call SaveUnitHandle(HY,(h),30,target)
  call SaveReal(HY,(h),20,dmg)
  call SaveEffectHandle(HY,(h),32,(AddSpecialEffectTarget("Environment\\SmallBuildingFire\\SmallBuildingFire2.mdl",target,"chest")))
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function ChaosMeteor_ResidualPeriodic))
  call UnitAddAbility2(target,'A303')
  call SaveInteger(HY,GetHandleId(target),'A0VN',LoadInteger(HY,GetHandleId(target),'A0VN')+1)
  set t=null
endfunction

function ChaosMeteor_Rolling takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local real a=(LoadReal(HY,(h),137))
  local integer c=GetTriggerEvalCount(t)-26
  local unit u=(LoadUnitHandle(HY,(h),2))
  local real nx
  local real ny
  local unit d
  local group g
  local real dmg
  local unit u2
  if c==1 then
    set d=CreateUnit(GetOwningPlayer(u),'e01L',x,y,a*bj_RADTODEG)
    call SaveUnitHandle(HY,(h),19,(d))
  elseif c>1 then
    set d=(LoadUnitHandle(HY,(h),19))
  endif
  if c>0 then
    set nx=SafeX50(GetUnitX(d)+15*Cos(a))
    set ny=SafeY50(GetUnitY(d)+15*Sin(a))
    call SetUnitX(d,nx)
    call SetUnitY(d,ny)
    if(c==1 or ModuloInteger(c,10)==0)then
      set g=GetAvailableGroup()
      set tt_unit1=u
      set dmg=LoadReal(HY,h,1)
      call GroupEnumUnitsInRange(g,nx,ny,300,Condition(function DefaultEnemyFilterWithAncientNonImmune))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        call ChaosMeteor_Residual(u,u2,dmg/5.)
        call DamageTarget(u,u2,1,dmg)
      endloop
      call KillGroup(g)
      call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",nx,ny))
    endif
    if c>LoadInteger(HY,h,2)then
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call KillUnit(d)
    endif
  endif
  set t=null
  set g=null
  set d=null
  set u=null
  return false
endfunction

function ChaosMeteor_SpellEffect takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real a=Atan2(y-GetUnitY(u),x-GetUnitX(u))
  local unit d=CreateUnit(GetOwningPlayer(u),'e01K',x,y,a*bj_RADTODEG)
  local real dis=GetIvokerSpellData(u,'A0VN',"distance")
  local real dmg=GetIvokerSpellData(u,'A0VN',"dmg")
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    set dis=dis+200.
  endif
  call SetUnitTimeScale(d,0.58)
  call UnitApplyTimedLife(d,'BTLF',1.75)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerAddCondition(t,Condition(function ChaosMeteor_Rolling))
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveReal(HY,(h),6,x)
  call SaveReal(HY,(h),7,y)
  call SaveReal(HY,(h),137,a)
  call SaveReal(HY,h,1,dmg)
  call SaveReal(HY,h,2,dis)
  call SaveInteger(HY,h,2,R2I(dis/16.6)+1)
  set t=null
  set d=null
  set u=null
endfunction

function MeltingStrikeOff takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,30)
  local integer hu=GetHandleId(u)
  local integer c=LoadInteger(HY,h,1)
  call Stat_Sub(u,LoadInteger(HY,h,2),"-DEF")
  call RemoveSavedHandle(HY,hu,'A0VW')
  call FlushChildHashtable(HY,h)
  call CleanTrigger(t)
  set t=null
  set u=null
endfunction

function Func3478 takes unit u returns nothing
  local trigger t
  local integer h
  local integer c
  local timer tt
  if HaveSavedHandle(HY,GetHandleId(u),'A0VW')then
    set t=LoadTriggerHandle(HY,GetHandleId(u),'A0VW')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,10)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,GetHandleId(u),'A0VW',t)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterDeathEvent(t,u)
    call SaveUnitHandle(HY,h,30,u)
    call TriggerAddCondition(t,Condition(function MeltingStrikeOff))
  endif
  call TimerStart(tt,5.,false,null)
  set c=LoadInteger(HY,h,2)
  if c<10 then
    call SaveInteger(HY,h,2,c+1)
    call Stat_Add(u,1,"-DEF")
  endif
  set t=null
endfunction

function Func3479 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local unit u=GetTriggerUnit()
  if GetUnitAbilityLevel(u,'B091')>0 and GetUnitAbilityLevel(GetEventDamageSource(),'A0VV')>0 and(LoadUnitHandle(HY,(GetHandleId(t)),2))==GetEventDamageSource()then
    call UnitRemoveAbility(u,'B091')
    call DisableTrigger(t)
    call Func3478(u)
    call FlushChildHashtable(HY,(GetHandleId(t)))
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3480 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'B091')>0 and GetUnitAbilityLevel(CastedUnit,'A0VV')>0 then
    call UnitRemoveAbility(TriggeredUnit,'B091')
    call Func3478(TriggeredUnit)
  endif
endfunction

function Func3481 takes nothing returns nothing
  local trigger t
  local unit source
  local unit target
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    set source=GetSpellTargetUnit()
    set target=GetTriggerUnit()
  else
    set source=GetTriggerUnit()
    set target=GetAttacker()
  endif
  if IsUnitIllusion(target)==false then
    set t=CreateTrigger()
    call SaveUnitHandle(HY,(GetHandleId(t)),2,(target))
    call TriggerRegisterUnitEvent(t,source,EVENT_UNIT_DAMAGED)
    call TriggerAddCondition(t,Condition(function Func3479))
  endif
  set t=null
  set source=null
  set target=null
endfunction

function Func3482 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    if GetUnitAbilityLevel(GetAttacker(),'A0VV')>0 and(LoadBoolean(HY,(GetHandleId(GetTriggeringTrigger())),3008))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),2))then
      call Func3481()
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
    if(GetIssuedOrderId()==OrderId("poisonarrows"))then
      call SaveBoolean(HY,(GetHandleId(GetTriggeringTrigger())),3008,(true))
    elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
      call SaveBoolean(HY,(GetHandleId(GetTriggeringTrigger())),3008,(false))
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A0VV' then
    call Func3481()
  endif
  return false
endfunction

function ForgedSpiritKill takes nothing returns nothing
  call KillUnit(GetEnumUnit())
endfunction

function ForgedSpiritId takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='n027'
endfunction

function ForgedSpiritTimeOut takes player p returns nothing
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,p,Condition(function ForgedSpiritId))
  call ForGroup(g,function ForgedSpiritKill)
  call KillGroup(g)
endfunction

function ForgeSpirit_SpellEffect takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit d
  local integer lvl=GetIvokerOrbLevel(u,3001)
  local integer slvl=GetIvokerOrbLevel(u,3002)
  local real hp=GetIvokerSpellData(u,'A0VO',"hp")
  local real mp=GetIvokerSpellData(u,'A0VO',"mana")
  local real armor=GetIvokerSpellData(u,'A0VO',"armor")
  local real dur=GetIvokerSpellData(u,'A0VO',"dur")
  local real dmg=GetIvokerSpellData(u,'A0VO',"dmg")
  local real range=GetIvokerSpellData(u,'A0VO',"range")
  local integer ch
  local integer i=1
  if lvl>3 and slvl>3 then
    set i=2
  endif
  call AddWrapper("Func3480",4)
  call ForgedSpiritTimeOut(GetOwningPlayer(u))
  loop
    set d=CreateUnit(GetOwningPlayer(u),'n027',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
    call Func0167(d,hp)
    call Func0168(d,mp)
    call SetWidgetLife(d,hp)
    call SetUnitState(d,UNIT_STATE_MANA,mp)
    call SetUnitArmor(d,armor)
    call UnitApplyTimedLife(d,'BTLF',dur)
    call Func0153(d,R2I(dmg))
    call Func0158(d,range)
    call SetUnitColor(d,GetPlayerColor(Sentinels[0]))
    call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",d,"chest")
    call SetUnitAbilityLevel(d,'A0VV',slvl)
    call SelectSummons(d)
    set i=i-1
    exitwhen i==0
  endloop
  set ch=GetAbilityDataDefAddr('A0VV')
  if ch>0 then
    set Memory[(ch+0x74)/4]=SetRealIntoMemory(range)
  endif
  set u=null
  set d=null
endfunction

function IceWall_GetSlow takes unit u returns integer
  local integer i=GetIvokerOrbLevel(u,3001)
  if i==1 then
    return'A230'
  elseif i==2 then
    return'A22Z'
  elseif i==3 then
    return'A22Y'
  elseif i==4 then
    return'A22U'
  elseif i==5 then
    return'A22V'
  elseif i==6 then
    return'A22W'
  elseif i==7 then
    return'A22X'
  elseif i==8 then
    return'A3IN'
  endif
  return'A230'
endfunction

function Invoker_IceWallFilter takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false
endfunction

function IceWall_Periodic takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local real a=(LoadReal(HY,(h),137))
  local real D1E=(LoadReal(HY,(h),57))
  local real nx
  local real ny
  local integer i=1
  local integer c=GetTriggerEvalCount(t)-1
  local group g
  local group gg
  local unit u2
  if c*0.1>D1E then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set g=GetAvailableGroup()
    set gg=GetAvailableGroup()
    set tt_unit1=u
    loop
      exitwhen i>7
      set nx=x+80*i*Cos((a+90)*bj_DEGTORAD)
      set ny=y+80*i*Sin((a+90)*bj_DEGTORAD)
      call GroupEnumUnitsInRange(g,nx,ny,105,Condition(function Invoker_IceWallFilter))
      call GroupAddGroup(g,gg)
      set nx=x+80*i*Cos((a-90)*bj_DEGTORAD)
      set ny=y+80*i*Sin((a-90)*bj_DEGTORAD)
      call GroupEnumUnitsInRange(g,nx,ny,105,Condition(function Invoker_IceWallFilter))
      call GroupAddGroup(g,gg)
      set i=i+1
    endloop
    call KillGroup(g)
    set tt_unit1=u
    set i=IceWall_GetSlow(u)
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      call GroupRemoveUnit(gg,u2)
      if IsUnitInvulnerable(u2)==false then
        call UnitAddAbilityTimedExF(u2,i,1,2.,'B08Z')
      endif
    endloop
    call KillGroup(gg)
  endif
  set t=null
  set u=null
  return false
endfunction

function IceWallCreateDummy takes player p,real dx,real dy,real D1E,integer GEA,integer GXA returns nothing
  local unit d=CreateUnit(p,'u00O',dx,dy,GetRandomReal(0,360))
  call SetUnitPathing(d,false)
  call SetUnitX(d,dx)
  call SetUnitY(d,dy)
  call UnitAddAbility3(d,GEA,GXA)
  call SetUnitAnimation(d,"birth")
  call SetUnitTimeScale(d,3)
  call SetUnitScale(d,0.7,1,1)
  call QueueUnitAnimation(d,"stand")
  call UnitApplyTimedLife(d,'BTLF',D1E)
  set d=null
endfunction

function Icewall_SpellEffect takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real a=GetUnitFacing(u)
  local integer i=1
  local unit d
  local real dx
  local real dy
  local real x=GetUnitX(u)+225*Cos(a*bj_DEGTORAD)
  local real y=GetUnitY(u)+225*Sin(a*bj_DEGTORAD)
  local integer lvl=GetIvokerOrbLevel(u,3002)
  local real Duration=GetIvokerSpellData(u,'A0VP',"dur")
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer id='A3GY'
  local player p=GetOwningPlayer(u)
  local integer slvl=lvl
  local real GOA=Cos((a+90.)*bj_DEGTORAD)
  local real GRA=Sin((a+90.)*bj_DEGTORAD)
  local real GIA=Cos((a-90.)*bj_DEGTORAD)
  local real GAA=Sin((a-90.)*bj_DEGTORAD)
  if lvl>4 then
    set id='A3GZ'
    set slvl=lvl-4
  endif
  loop
    call IceWallCreateDummy(p,x+80*i*GOA,y+80*i*GRA,Duration,id,slvl)
    call IceWallCreateDummy(p,x+80*i*GIA,y+80*i*GAA,Duration,id,slvl)
    set i=i+1
    exitwhen i>7
  endloop
  call IceWallCreateDummy(p,x+80.*Cos(a),y+80.*Sin(a),Duration,id,slvl)
  call TriggerAddCondition(t,Condition(function IceWall_Periodic))
  call TriggerRegisterTimerEvent(t,0.1,true)
  call SaveReal(HY,h,6,x)
  call SaveReal(HY,h,7,y)
  call SaveReal(HY,h,137,a)
  call SaveUnitHandle(HY,h,2,u)
  call SaveReal(HY,h,57,Duration)
  call TriggerEvaluate(t)
  set d=null
  set u=null
  set t=null
endfunction

function Func3493 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local real dmg=(LoadReal(HY,h,20))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local group g=GetAvailableGroup()
  local integer c
  local ubersplat ub
  local unit u2
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,200,Condition(function Func0816))
  set c=CountUnitsInGroup(g)
  if c<1 then
    set c=1
  endif
  set dmg=dmg/c
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if IsCourier(u2)==false then
      call DamageTarget(SKE,u2,7,dmg)
    endif
  endloop
  call DestroyEffect(AddSpecialEffect(GetAbilityEffectById('A0VG',EFFECT_TYPE_SPECIAL,0),x,y))
  call KillGroup(g)
  call DestroyEffect(LoadEffectHandle(HY,h,32))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set ub=null
  set t=null
  set SKE=null
  set g=null
  return false
endfunction

function Sunstrike_Act takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real dmg
  local string s=""
  set dmg=GetIvokerSpellData(SKE,'A0VG',"dmg")
  if IsPlayerAlly(LocalPlayer,GetOwningPlayer(SKE))or(PlayerObserver)then
    set s=GetAbilityEffectById('A0VG',EFFECT_TYPE_TARGET,0)
  endif
  call TimedReveal(GetOwningPlayer(SKE),5.7,x,y,400)
  call TriggerRegisterTimerEvent(t,1.7,false)
  call TriggerAddCondition(t,Condition(function Func3493))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call SaveReal(HY,h,20,((dmg)*1.0))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffect(s,x,y)))
  set t=null
  set SKE=null
endfunction

function Func3495 takes unit SKE,unit SGE,integer QIE returns nothing
  local unit d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  call UnitAddAbility2(d,'A0VI')
  call IssueTargetOrder(d,"thunderbolt",SGE)
  if IsMagicImmune(SGE)==false then
    call DamageTarget(SKE,SGE,1,QIE*7)
  endif
  set d=null
endfunction

function Func3496 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,30)
  local integer QIE=(LoadInteger(HY,(h),5))
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetUnitAbilityLevel(SGE,'A3P5')>0 then
    if GetEventDamage()>10 and(LoadInteger(HY,GetHandleId(t),4263))!=1 and GetOwningPlayer(GetEventDamageSource())!=GetOwningPlayer(GetTriggerUnit())then
      call DisableTrigger(t)
      call Func3495(SKE,SGE,QIE)
      call EnableTrigger(t)
      call AddTimedKeyToAgent(t,4263,0.8-QIE*0.0285)
    endif
  else
    call UnitRemoveAbility(SGE,'A3P5')
    call UnitRemoveAbility(SGE,'a3P5')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3497 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  set QIE=(LoadInteger(HY,(GetHandleId(SKE)),3001))
  if Func0898(SKE)then
    set QIE=QIE+1
  endif
  call Func3495(SKE,SGE,QIE)
  call AddTimedKeyToAgent(t,4263,0.8-QIE*0.0285)
  call TriggerRegisterTimerEvent(t,2.5+QIE*0.5,false)
  call UnitAddAbilityTimedExF(SGE,'A3P5',1,2.5+QIE*0.5,'a3P5')
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func3496))
  call SaveUnitHandle(HY,(h),30,SGE)
  call SaveInteger(HY,(h),5,(QIE))
  call SaveUnitHandle(HY,(h),2,(SKE))
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3498 takes nothing returns nothing
  local integer GDA=0
  local unit u=GetTriggerUnit()
  local integer h=GetHandleId(u)
  local integer FAA=(LoadInteger(HY,h,3013))
  local integer FNA=(LoadInteger(HY,h,3014))
  local integer FPA=(LoadInteger(HY,h,3015))
  local integer GFA=(LoadInteger(HY,h,3016))
  local integer GGA=(LoadInteger(HY,h,3017))
  local integer QIE
  local integer id
  local player p=GetOwningPlayer(u)
  local integer TPE=FAA*100+FNA*10+FPA
  if TPE==300 then
    set GDA=1
  elseif TPE==210 then
    set GDA=2
  elseif TPE==201 then
    set GDA=3
  elseif TPE==120 then
    set GDA=4
  elseif TPE==111 then
    set GDA=5
  elseif TPE==102 then
    set GDA=6
  elseif TPE==12 then
    set GDA=7
  elseif TPE==21 then
    set GDA=8
  elseif TPE==3 then
    set GDA=9
  elseif TPE==30 then
    set GDA=10
  endif
  if GFA==integers150[GDA]or GGA==integers150[GDA]then
    call Func0412(u,GetSpellAbilityId())
    if GFA!=0 and GGA!=0 and(GGA==integers150[GDA])then
      set GFA=GFA+GGA
      set GGA=GFA-GGA
      set GFA=GFA-GGA
      call SaveInteger(HY,h,3016,(GFA))
      call SaveInteger(HY,h,3017,(GGA))
      call Func0334(GFA,2)
      call Func0333(GFA,1)
      call Func0334(GGA,1)
      call Func0333(GGA,1)
    endif
  endif
  if integers150[GDA]==GGA then
    return
  endif
  if GFA!=0 and GGA!=0 then
    call SetPlayerAbilityAvailable(p,GFA,false)
    call SetPlayerAbilityAvailable(p,GGA,false)
    set GFA=GGA
    set GGA=integers150[GDA]
    call SetPlayerAbilityAvailable(p,GFA,true)
    call SetPlayerAbilityAvailable(p,GGA,true)
  elseif GFA==0 and GGA!=0 then
    call SetPlayerAbilityAvailable(p,GGA,false)
    set GFA=GGA
    set GGA=integers150[GDA]
    call SetPlayerAbilityAvailable(p,GFA,true)
    call SetPlayerAbilityAvailable(p,GGA,true)
  else
    set GGA=integers150[GDA]
    call SetPlayerAbilityAvailable(p,GGA,true)
  endif
  call Func0334(GFA,2)
  call Func0333(GFA,1)
  call Func0334(GGA,1)
  call Func0333(GGA,1)
  call SaveInteger(HY,h,3016,(GFA))
  call SaveInteger(HY,h,3017,(GGA))
  call Func3451(u,GFA)
  call Func3451(u,GGA)
  set u=null
endfunction

function Func3499 takes unit u returns nothing
  local integer h=GetHandleId(u)
  local integer GJA=(LoadInteger(HY,h,3013))
  local integer GKA=(LoadInteger(HY,h,3014))
  local integer GLA=(LoadInteger(HY,h,3015))
  local integer FXE=GetUnitAbilityLevel(u,'A21W')*GKA
  if FXE!=LoadInteger(HY,h,'QUAS')then
    call Func0175(u,FXE-LoadInteger(HY,h,'QUAS'))
    call SaveInteger(HY,h,'QUAS',FXE)
  endif
  set FXE=GJA*GetUnitAbilityLevel(u,'A21X')
  if FXE!=LoadReal(HY,h,'A3H0')then
    call Func0163(u,(FXE-LoadReal(HY,h,'A3H0'))/50.)
    call Func0230(u,(FXE-LoadReal(HY,h,'A3H0'))/100.)
    call SaveReal(HY,h,'A3H0',FXE)
  endif
  set FXE=GLA*GetUnitAbilityLevel(u,'A21V')*3
  if FXE!=LoadInteger(HY,h,'A0V7')then
    call Stats_Fucking_Modify(u,FXE-LoadInteger(HY,h,'A0V7'),"+DMG")
    call SaveInteger(HY,h,'A0V7',FXE)
  endif
endfunction

function Func3500 takes unit GPA,unit SGI returns nothing
  local integer hu
  if GPA==null then
    return
  endif
  set hu=GetHandleId(GPA)
  if LoadInteger(HY,hu,'H00U')>0 then
    call UnitAddAbility(SGI,LoadInteger(HY,hu,'H00U'+1))
    call UnitAddAbility(SGI,LoadInteger(HY,hu,'H00U'+2))
    call UnitAddAbility(SGI,LoadInteger(HY,hu,'H00U'+3))
  endif
endfunction

function Func3501 takes unit u,integer id returns nothing
  local integer h=GetHandleId(u)
  call SaveInteger(HY,h,'H00U',LoadInteger(HY,h,'H00U')+1)
  call SaveInteger(HY,h,'H00U'+LoadInteger(HY,h,'H00U'),id)
  call UnitAddAbility2(u,id)
endfunction

function Func3502 takes unit u,integer w,integer q,integer e returns nothing
  local integer array GTA
  local integer array GUA
  local integer array GWA
  local integer i=1
  local integer h=GetHandleId(u)
  local integer array GYA
  set GYA[1]=LoadInteger(HY,h,3010)
  set GYA[2]=LoadInteger(HY,h,3011)
  set GYA[3]=LoadInteger(HY,h,3012)
  if Func0898(u)then
    set GTA[1]='A22C'
    set GTA[2]='A22D'
    set GTA[3]='A22E'
    set GUA[1]='A22F'
    set GUA[2]='A22G'
    set GUA[3]='A22H'
    set GWA[1]='A22I'
    set GWA[2]='A22J'
    set GWA[3]='A22K'
  else
    set GTA[1]='A0DN'
    set GTA[2]='A0DG'
    set GTA[3]='A0IX'
    set GUA[1]='A0I1'
    set GUA[2]='A0I0'
    set GUA[3]='A0HZ'
    set GWA[1]='A0IC'
    set GWA[2]='A0IB'
    set GWA[3]='A0ID'
  endif
  call UnitRemoveAbility(u,LoadInteger(HY,h,'H00U'+1))
  call UnitRemoveAbility(u,LoadInteger(HY,h,'H00U'+2))
  call UnitRemoveAbility(u,LoadInteger(HY,h,'H00U'+3))
  call RemoveSavedInteger(HY,h,'H00U')
  if GYA[i]=='A21X'then
    call Func3501(u,GTA[i])
  elseif GYA[i]=='A21W'then
    call Func3501(u,GUA[i])
  elseif GYA[i]=='A21V'then
    call Func3501(u,GWA[i])
  endif
  set i=i+1
  if GYA[i]=='A21X'then
    call Func3501(u,GTA[i])
  elseif GYA[i]=='A21W'then
    call Func3501(u,GUA[i])
  elseif GYA[i]=='A21V'then
    call Func3501(u,GWA[i])
  endif
  set i=i+1
  if GYA[i]=='A21X'then
    call Func3501(u,GTA[i])
  elseif GYA[i]=='A21W'then
    call Func3501(u,GUA[i])
  elseif GYA[i]=='A21V'then
    call Func3501(u,GWA[i])
  endif
endfunction

function Func3503 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer h=GetHandleId(u)
  local integer L2X=GetSpellAbilityId()
  local integer GZA=(LoadInteger(HY,h,3010))
  local integer G_A=(LoadInteger(HY,h,3011))
  local integer G0A=(LoadInteger(HY,h,3012))
  local integer w=0
  local integer q=0
  local integer e=0
  if GZA==G_A and G_A==G0A and G0A==L2X then
    set u=null
    return
  endif
  set GZA=G_A
  set G_A=G0A
  set G0A=L2X
  if GZA=='A21X' then
    set w=w+1
  elseif GZA=='A21W' then
    set q=q+1
  elseif GZA=='A21V' then
    set e=e+1
  endif
  if G_A=='A21X' then
    set w=w+1
  elseif G_A=='A21W' then
    set q=q+1
  elseif G_A=='A21V' then
    set e=e+1
  endif
  if G0A=='A21X' then
    set w=w+1
  elseif G0A=='A21W' then
    set q=q+1
  elseif G0A=='A21V' then
    set e=e+1
  endif
  call SaveInteger(HY,h,3010,(GZA))
  call SaveInteger(HY,h,3011,(G_A))
  call SaveInteger(HY,h,3012,(G0A))
  call SaveInteger(HY,h,3013,(w))
  call SaveInteger(HY,h,3014,(q))
  call SaveInteger(HY,h,3015,(e))
  call Func3502(u,w,q,e)
  call Func3499(u)
  set u=null
endfunction

function Func3504 takes nothing returns nothing
  local unit u=tt_unit1
  local integer h=GetHandleId(u)
  local integer GZA=(LoadInteger(HY,h,3010))
  local integer G_A=(LoadInteger(HY,h,3011))
  local integer G0A=(LoadInteger(HY,h,3012))
  local integer w=0
  local integer q=0
  local integer e=0
  if GZA=='A21X' then
    set w=w+1
  elseif GZA=='A21W' then
    set q=q+1
  elseif GZA=='A21V' then
    set e=e+1
  endif
  if G_A=='A21X' then
    set w=w+1
  elseif G_A=='A21W' then
    set q=q+1
  elseif G_A=='A21V' then
    set e=e+1
  endif
  if G0A=='A21X' then
    set w=w+1
  elseif G0A=='A21W' then
    set q=q+1
  elseif G0A=='A21V' then
    set e=e+1
  endif
  call Func3502(u,w,q,e)
  call Func3451(u,LoadInteger(HY,GetHandleId(u),3016))
  call Func3451(u,LoadInteger(HY,GetHandleId(u),3017))
  set u=null
endfunction

function Func3505 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  call Func3499(u)
  if GetLearnedSkill()=='A21X' then
    call SetHeroAgi(u,GetHeroAgi(u,false)+2,true)
    call SaveInteger(HY,GetHandleId(u),3000,LoadInteger(HY,GetHandleId(u),3000)+1)
  elseif GetLearnedSkill()=='A21W' then
    call SetHeroStr(u,GetHeroStr(u,false)+2,true)
    call SaveInteger(HY,GetHandleId(u),3001,LoadInteger(HY,GetHandleId(u),3001)+1)
  else
    call SetHeroInt(u,GetHeroInt(u,false)+2,true)
    call SaveInteger(HY,GetHandleId(u),3002,LoadInteger(HY,GetHandleId(u),3002)+1)
  endif
  call Func3451(u,LoadInteger(HY,GetHandleId(u),3016))
  call Func3451(u,LoadInteger(HY,GetHandleId(u),3017))
  set u=null
endfunction

function Func3506 takes nothing returns nothing
  local unit u=tt_unit1
  local integer i=1
  local integer id
  if GetUnitTypeId(u)!='H00U' then
    return
  endif
  loop
    set id=integers150[i]
    call UnitAddAbility2(u,id)
    call SetPlayerAbilityAvailable(GetOwningPlayer(u),id,false)
    set i=i+1
    exitwhen i>11
  endloop
  set u=null
endfunction

function Func3507 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit E9O=LoadUnitHandle(HY,h,1)
  if IsDead(u)==false then
    if E9O==null or IsUnitType(u,UNIT_TYPE_HERO)then
      if GetUnitCurrentOrder(u)==852558 then
        call SaveUnitHandle(HY,h,1,GetOrderTargetUnit())
      endif
    else
      if DistanceBetweenUnits(u,E9O)>1500 then
        if GetUnitCurrentOrder(u)==852557 then
          call SetUnitPosition(u,GetUnitX(E9O),GetUnitY(E9O))
          call IssueImmediateOrderByIdExFunc(u,852557)
        elseif GetUnitCurrentOrder(u)==852558 then
          call SetUnitPosition(u,GetUnitX(E9O),GetUnitY(E9O))
          call IssueTargetOrderByIdFuckingEx(u,852558,E9O,false)
        endif
      endif
    endif
  else
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  endif
  set u=null
  set E9O=null
  set t=null
endfunction

function Func3508 takes unit u returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.02,true,function Func3507)
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,h,1,udg_Hero[GetPlayerId(GetOwningPlayer(u))])
  set t=null
endfunction

function Func3509 takes unit u returns nothing
  local integer id=GetUnitTypeId(u)
  if HaveSavedInteger(UTable,id,'Z008')then
    call UnitAddAbility2(u,LoadInteger(UTable,id,'Z008'))
    call HideAbility(LoadInteger(UTable,id,'Z008'))
  endif
endfunction

function Func3510 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local boolean FEX=false
  local real D1E=LoadReal(HY,h,0)
  set D1E=D1E-1.
  if GetHandleId(u)==0 or IsDead(u)or D1E<0 or TimerGetRemaining(timer008)<91. then
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
    call UnitRemoveBuffs(u,true,true)
  else
    call StunTargetEx(u,1.,true)
    call SaveReal(HY,h,0,D1E)
  endif
  set u=null
  set t=null
endfunction

function Func3511 takes unit u,real D1E returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,1.,true,function Func3510)
  call SaveReal(HY,GetHandleId(t),0,D1E)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function Func3512 takes player p returns boolean
  local integer i=1
  loop
    if IsPlayer(Sentinels[i])and p!=Sentinels[i]and udg_Hero[GetPlayerId(Sentinels[i])]==null then
      return false
    endif
    if IsPlayer(Scourges[i])and p!=Scourges[i]and udg_Hero[GetPlayerId(Scourges[i])]==null then
      return false
    endif
    set i=i+1
    exitwhen i>5
  endloop
  return true
endfunction

function Func3513 takes unit u returns nothing
  if AFK_Check==false and(boolean067 or boolean154)then
    if TimerGetRemaining(timer008)>90. then
      if Func3512(GetOwningPlayer(u))==false then
        call Func3511(u,TimerGetRemaining(timer008)-90.)
      else
        call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName('TX2Z'))
        call TimerStart(timer008,90,false,null)
      endif
    endif
  endif
endfunction

function Func3514 takes nothing returns boolean
  local integer i
  local unit u=GetTriggerUnit()
  local integer id=GetUnitTypeId(u)
  if IsUnitIllusion(u)==false then
    if boolean007==false and IsUnitType(u,UNIT_TYPE_HERO)then
      if IsNotHero(id)==false then
        call GroupAddUnit(group004,u)
        if id!='N0MM' and LoadBoolean(HY,GetHandleId(u),'HBRD')==false then
          call GroupAddUnit(group007,u)
          set tt_unit1=u
          call ExecuteFunc("Func4086")
          call ExecuteFunc("Func4744")
          call ExecuteFunc("Func4746")
        endif
        if id=='H00U' then
          set tt_unit1=u
          call Func3506()
        elseif id=='H00I' then
          set tt_unit1=u
          call ExecuteFunc("Func3573")
        endif
        call Func3513(u)
      endif
    endif
    if id=='u00G' then
      call Func3508(u)
    elseif id=='uske' or Func0596(u)or Func0600(u)or Func0604(u)or Func0605(u)or Func0606(u)or Func0620(u)or Func0617(u)or Func0619(u)or IsUnitSpiritBear(u)or Func0593(id)then
      call SelectSummons(u)
    endif
    if Func0604(u)then
      call Func3325(u)
    endif
    if GetUnitAbilityLevel(u,'B0AR')==1 then
      call Func2599(u)
    endif
    call Func3509(u)
  else
    if GetUnitAbilityLevel(u,'B06L')==0 then
      call SelectSummons(u)
    endif
    if id==HeroID[94]then
      call Func3500(LoadUnitHandle(HY,GetHandleId(unit003),'ilsr'),u)
    endif
    if id=='N0MW' then
      call UnitAddAbility(u,'A2QR')
      call UnitRemoveAbility(u,'A2QR')
    elseif id=='O017' then
      call UnitAddAbility(u,'A3L8')
      call UnitRemoveAbility(u,'A3L8')
    elseif id=='N0MB' then
      call UnitAddAbility(u,'A3LN')
      call UnitRemoveAbility(u,'A3LN')
    elseif id=='N0MC' then
      call UnitAddAbility(u,'A3LO')
      call UnitRemoveAbility(u,'A3LO')
    elseif id=='N0MO' then
      call UnitAddAbility(u,'A3LP')
      call UnitRemoveAbility(u,'A3LP')
    elseif id=='N0MA' then
      call UnitAddAbility(u,'A3LQ')
      call UnitRemoveAbility(u,'A3LQ')
    endif
  endif
  set u=null
  return false
endfunction

function Func3515 takes nothing returns nothing
  set integers150[1]='A0VS'
  set integers150[2]='A0VK'
  set integers150[3]='A0VQ'
  set integers150[4]='A0XL'
  set integers150[5]='A0VM'
  set integers150[6]='A0VN'
  set integers150[7]='A0VO'
  set integers150[8]='A0VP'
  set integers150[9]='A0VG'
  set integers150[10]='A0VZ'
  call PreloadAbility(integers150[1])
  call PreloadAbility(integers150[2])
  call PreloadAbility(integers150[3])
  call PreloadAbility(integers150[4])
  call PreloadAbility(integers150[5])
  call PreloadAbility(integers150[6])
  call PreloadAbility(integers150[7])
  call PreloadAbility(integers150[8])
  call PreloadAbility(integers150[9])
  call PreloadAbility(integers150[10])
  call SaveReal(SpellsDB,'cstp',integers150[1],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[2],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[3],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[4],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[5],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[6],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[7],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[8],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[9],0.05)
  call SaveReal(SpellsDB,'cstp',integers150[10],0.05)
  call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName('n06G'))
  call PreloadAbility('A21V')
  call PreloadAbility('A21X')
  call PreloadAbility('A21W')
  call PreloadAbility('A0VI')
  call PreloadAbility('A3GY')
  call PreloadAbility('A3GZ')
  call PreloadAbility('A0VV')
  call PreloadAbility('A0VW')
  call PreloadAbility('A3G0')
  call PreloadAbility('A3G1')
  call AddToPurgeList('A3P5','PRGE')
  call AddToPurgeList('a3P5','PRGE')
  call AddToPurgeList('A3RF','PRGM')
  call AddToPurgeList('A3RG','PRGM')
  call AddToPurgeList('A3RH','PRGM')
  call AddToPurgeList('A3RI','PRGM')
  call AddToPurgeList('A3RJ','PRGM')
  call AddToPurgeList('A3RK','PRGM')
  call AddToPurgeList('A3RL','PRGM')
  call AddToPurgeList('A3RM','PRGM')
  call AddToPurgeList('A3RN','PRGM')
  call AddToPurgeList('B08W','PRGM')
  call AddToPurgeList('A3QF','PRGM')
  call AddToPurgeList('A303','PRGE')
  call AddToPurgeList('B303','PRGE')
  call AddToPurgeList('A3GX','PRGA')
  call AddToPurgeList('B3GX','PRGA')
  call AddToPurgeList('A230','PRGM')
  call AddToPurgeList('A22Z','PRGM')
  call AddToPurgeList('A22Y','PRGM')
  call AddToPurgeList('A22U','PRGM')
  call AddToPurgeList('A22V','PRGM')
  call AddToPurgeList('A22W','PRGM')
  call AddToPurgeList('A22X','PRGM')
  call AddToPurgeList('A3IN','PRGM')
  call AddToPurgeList('B08Z','PRGM')
endfunction

function Func3516 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local real result=5+15*QIE
  if GetTriggerEvalCount(RBX)==3 or GetTriggerEvalCount(RBX)==4 then
    call DamageTarget(source,RCX,1,result)
  endif
  if GetTriggerEvalCount(RBX)==4 then
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call UnitRemoveAbility(RCX,'A1VT')
    call UnitRemoveAbility(RCX,'B0DN')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3517 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE
  local unit SGE
  local unit d=LoadUnitHandle(HY,h,3)
  local integer QIE
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetEventDamageSource()==d then
    set SKE=LoadUnitHandle(HY,h,2)
    set SGE=(LoadUnitHandle(HY,h,17))
    set QIE=LoadInteger(HY,h,0)
    if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false and LoadBoolean(HY,h,0)==false then
      call SaveUnitHandle(TempHash,'A3E9',0,SGE)
      call SaveUnitHandle(TempHash,'A3E9',1,SKE)
      call SaveInteger(TempHash,'A3E9',0,QIE)
      call ExecuteFunc("Func3519")
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func3516))
    call SaveUnitHandle(HY,h,2,(SKE))
    call SaveUnitHandle(HY,h,17,(SGE))
    call SaveInteger(HY,h,5,(QIE))
    call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",SGE,"chest")))
    call UnitAddAbility2(SGE,'A1VT')
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  return false
endfunction

function Func3518 takes unit SKE,unit SGE,integer QIE,boolean UII returns nothing
  local trigger t
  local integer h
  local unit d
  if IsBlocked(SGE)then
    if UII then
      call RemoveLinkenBuff(SGE)
    endif
    return
  endif
  set t=CreateTrigger()
  set h=GetHandleId(t)
  set d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),GetUnitFacing(SKE))
  call SetUnitScale(d,2,2,2)
  call SaveBoolean(HY,h,0,UII)
  call SaveInteger(HY,h,0,QIE)
  call UnitAddAbility(d,'A39X')
  call SetUnitAbilityLevel(d,'A39X',QIE)
  call Func1430(d,SGE,852095)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(t,15,false)
  call TriggerAddCondition(t,Condition(function Func3517))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,3,(d))
  call SaveUnitHandle(HY,h,17,(SGE))
  set t=null
  set d=null
  set SKE=null
  set SGE=null
endfunction

function Func3519 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  call Func3518(SKE,LoadUnitHandle(TempHash,'A3E9',1),LoadInteger(TempHash,'A3E9',0),true)
  set SKE=null
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3520 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"weapon"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"hand"))
endfunction

function Func3521 takes nothing returns nothing
  call Func3518(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),false)
endfunction

function Func3522 takes nothing returns nothing
  call AddToPurgeList('B0EP','PRGE')
  call AddToPurgeList('A1VT','PRGE')
  call AddToPurgeList('B0DN','PRGE')
  call AddWrapper("Func4603",0)
  set boolean042=true
  set boolean005=true
endfunction

function Func3523 takes nothing returns boolean
  local timer t=GetExpiredTimer()
  local integer ZAE=GetHandleId(t)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call SelectUnitForPlayerSingle(source,GetOwningPlayer(source))
  call SetUnitFlyHeight(source,GetUnitDefaultFlyHeight(source),0)
  call FlushChildHashtable(HY,(ZAE))
  call DelayedCallBackClean()
  set t=null
  set source=null
  return false
endfunction

function Func3524 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit HCA=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(HCA,'A01Y')+GetUnitAbilityLevel(HCA,'A1AZ')
  local boolean CTI=GetUnitAbilityLevel(HCA,'A01Y')==0
  local real cd=Func0960('A01Y',QIE)
  local unit d
  local integer HDA='A01Y'
  local integer a=GetUnitAbility(HCA,HDA)
  if CTI then
    set HDA='A1AZ'
  endif
  if a>0 and GetAbilityCurrentCooldownConverted(a/4)==0 and GetUnitState(HCA,UNIT_STATE_MANA)>=160 then
    if GetUnitAbilityLevel(HCA,'A3DK')!=0 then
      call UnitRemoveAbility(HCA,'A3DK')
    endif
    set d=CreateUnit(GetOwningPlayer(HCA),'e00E',GetUnitX(HCA),GetUnitY(HCA),0)
    call UnitAddAbility(d,'A274')
    call IssueImmediateOrderByIdExFunc(d,852096)
    set d=null
    call Func0424(HCA,HDA)
    call SaveUnitHandle(HY,DelayedCallBack(3.+0.01,function Func3523),2,(HCA))
    call FixVisionGlitchOnBuyBack(HCA)
    call AddTimedKeyToAgent(HCA,'A1AZ',3.)
  endif
  set t=null
  set HCA=null
  set d=null
endfunction

function Func3525 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterDeathEvent(t,GetTriggerUnit())
  call TriggerAddCondition(t,Condition(function Func3524))
  set t=null
endfunction

function Func3526 takes nothing returns boolean
  return Func0629(GetFilterUnit())
endfunction

function Func3527 takes unit E3X,unit u returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(u),Condition(function Func3526))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call UnitRemoveAbility(u2,'Avul')
    call UnitRemoveBuffs(u2,true,true)
    call UnitRemoveAbility(u2,'Aetl')
    call SetUnitInvulnerable(u2,false)
    call DamageTarget(E3X,u2,1,99999999)
    call DamageTarget(E3X,u2,2,99999999)
    call DamageTarget(E3X,u2,3,99999999)
    call DamageTarget(E3X,u2,7,99999999)
    call DamageTarget(E3X,u2,10,99999999)
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
endfunction

function Func3528 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if GetUnitAbilityLevel(u,'A3DA')==1 then
      call UnitRemoveAbility(u,'A3DA')
      call UnitRemoveAbility(u,'B3DA')
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
      call MakeUnitTransparent(u)
      call Func1944(u)
    elseif GetUnitAbilityLevel(u,'A3D9')==1 then
      if LoadBoolean(HY,GetHandleId(u),'suic')or(GetUnitAbilityLevel(u,'AIrc')==1 or(IsMeepo(u)and GetUnitAbilityLevel(udg_Hero[GetPlayerId(GetOwningPlayer(u))],'AIrc')==1))or(GetUnitAbilityLevel(u,'A1AZ')>0 and TimerGetRemaining(UltimateCDTimers[GetPlayerId(GetOwningPlayer(u))])==0 and GetUnitState(u,UNIT_STATE_MANA)>=160)then
        call UnitRemoveAbility(u,'A3DK')
        call UnitRemoveAbility(u,'B3I9')
        call FlushChildHashtable(HY,h)
        call DestroyTrigger(t)
      else
        call TriggerRegisterTimerEvent(t,0,false)
        call TriggerRegisterTimerEvent(t,0.1,false)
        call TriggerRegisterTimerEvent(t,7,false)
        call SaveUnitHandle(HY,h,0,u)
        call SaveReal(HY,h,10,GetUnitState(u,UNIT_STATE_MANA))
        if IsMeepo(u)then
          set tt_player1=GetOwningPlayer(u)
          call SaveUnitHandle(HY,GetHandleId(LoadUnitHandle(HY,GetHandleId(tt_player1),699)),'lstd',LoadUnitHandle(HY,GetHandleId(u),'lstd'))
          call SaveUnitHandle(HY,GetHandleId(LoadUnitHandle(HY,GetHandleId(tt_player1),700)),'lstd',LoadUnitHandle(HY,GetHandleId(u),'lstd'))
          call SaveUnitHandle(HY,GetHandleId(LoadUnitHandle(HY,GetHandleId(tt_player1),701)),'lstd',LoadUnitHandle(HY,GetHandleId(u),'lstd'))
          call SaveUnitHandle(HY,GetHandleId(LoadUnitHandle(HY,GetHandleId(tt_player1),702)),'lstd',LoadUnitHandle(HY,GetHandleId(u),'lstd'))
          call SaveUnitHandle(HY,GetHandleId(LoadUnitHandle(HY,GetHandleId(tt_player1),703)),'lstd',LoadUnitHandle(HY,GetHandleId(u),'lstd'))
          call ExecuteFunc("Func3530")
          if u!=LoadUnitHandle(HY,GetHandleId(tt_player1),699)then
            call UnitAddAbility(LoadUnitHandle(HY,GetHandleId(tt_player1),699),'A3DK')
            call KillUnit(LoadUnitHandle(HY,GetHandleId(tt_player1),699))
          endif
          if u!=LoadUnitHandle(HY,GetHandleId(tt_player1),700)then
            call UnitAddAbility(LoadUnitHandle(HY,GetHandleId(tt_player1),700),'A3DK')
            call KillUnit(LoadUnitHandle(HY,GetHandleId(tt_player1),700))
          endif
          if u!=LoadUnitHandle(HY,GetHandleId(tt_player1),701)then
            call UnitAddAbility(LoadUnitHandle(HY,GetHandleId(tt_player1),701),'A3DK')
            call KillUnit(LoadUnitHandle(HY,GetHandleId(tt_player1),701))
          endif
          if u!=LoadUnitHandle(HY,GetHandleId(tt_player1),702)then
            call UnitAddAbility(LoadUnitHandle(HY,GetHandleId(tt_player1),702),'A3DK')
            call KillUnit(LoadUnitHandle(HY,GetHandleId(tt_player1),702))
          endif
          if u!=LoadUnitHandle(HY,GetHandleId(tt_player1),703)then
            call UnitAddAbility(LoadUnitHandle(HY,GetHandleId(tt_player1),703),'A3DK')
            call KillUnit(LoadUnitHandle(HY,GetHandleId(tt_player1),703))
          endif
        endif
      endif
    else
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
    call RemoveSavedHandle(HY,GetHandleId(u),'Leor')
  else
    set u=LoadUnitHandle(HY,h,0)
    if LoadInteger(HY,h,0)==0 then
      call UnitRemoveAbility(u,'A3DK')
      call UnitRemoveAbility(u,'B3I9')
      call  DamageBlockActiveTracking(7.)
      call UnitAddAbility2(u,'A3DA')
      call SaveInteger(HY,h,0,1)
      call SetUnitVertexColor(u,140,120,100,70)
      call Func1945(u)
      if LoadInteger(HY,GetHandleId(u),4333)>0 then
        call Func0522(u,4334,LoadInteger(HY,GetHandleId(u),4333),7.01)
      endif
      if LoadInteger(HY,GetHandleId(u),4418)>0 then
        call Func0522(u,4419,LoadInteger(HY,GetHandleId(u),4418),7.01)
      endif
    elseif LoadInteger(HY,h,0)==1 then
      call SaveInteger(HY,h,0,2)
      call SelectUnitAddForPlayer(u,GetOwningPlayer(u))
      call SetUnitState(u,UNIT_STATE_MANA,LoadReal(HY,h,10))
    else
      call AddTimedKeyToAgent(u,4339,0.05)
      call UnitRemoveAbility(u,'A3DA')
      call UnitRemoveAbility(u,'B3DA')
      call MakeUnitTransparent(u)
      call UnitRemoveAbility(u,'Avul')
      call SetUnitInvulnerable(u,false)
      call UnitRemoveBuffs(u,true,true)
      call UnitRemoveAbility(u,'Aetl')
      call SetWidgetLife(u,1)
      if LoadUnitHandle(HY,GetHandleId(u),'lstd')!=null then
        call DamageTarget(LoadUnitHandle(HY,GetHandleId(u),'lstd'),u,1,99999999)
        call DamageTarget(LoadUnitHandle(HY,GetHandleId(u),'lstd'),u,2,99999999)
        call DamageTarget(LoadUnitHandle(HY,GetHandleId(u),'lstd'),u,3,99999999)
        call DamageTarget(LoadUnitHandle(HY,GetHandleId(u),'lstd'),u,7,99999999)
        call DamageTarget(LoadUnitHandle(HY,GetHandleId(u),'lstd'),u,10,99999999)
        if IsDead(u)==false then
          if GetHandleId(LoadUnitHandle(HY,GetHandleId(u),'lstd'))==0 then
            call KillUnit(u)
          else
            if GetUnitAbilityLevel(u,'A0MQ')>0 or GetUnitAbilityLevel(u,'A1B6')>0 then
              call Func3527(LoadUnitHandle(HY,GetHandleId(u),'lstd'),u)
            endif
          endif
        endif
      else
        call KillUnit(u)
      endif
      call Func1944(u)
      if IsDead(u)then
        call FlushChildHashtable(HY,h)
        call DestroyTrigger(t)
      else
        call TriggerRegisterTimerEvent(t,0.02,true)
      endif
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3529 takes unit u returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'Leor')==false and GetUnitAbilityLevel(u,'A3DA')==0 then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'Leor',t)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func3528))
  endif
  set t=null
endfunction

function Func3530 takes nothing returns nothing
  call Func3529(LoadUnitHandle(HY,GetHandleId(tt_player1),699))
  call Func3529(LoadUnitHandle(HY,GetHandleId(tt_player1),700))
  call Func3529(LoadUnitHandle(HY,GetHandleId(tt_player1),701))
  call Func3529(LoadUnitHandle(HY,GetHandleId(tt_player1),702))
  call Func3529(LoadUnitHandle(HY,GetHandleId(tt_player1),703))
endfunction

function Func3531 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local group D9X=LoadGroupHandle(HY,h,1)
  local group g
  local unit u2
  local boolean b=false
  if(IsDead(u)and LoadInteger(HY,GetHandleId(u),'A1AZ')!=1)or GetUnitAbilityLevel(u,'A1AZ')==0 then
    loop
      set u2=FirstOfGroup(D9X)
      exitwhen u2==null
      call UnitRemoveAbility(u2,'A3DK')
      call UnitRemoveAbility(u2,'B3I9')
      call GroupRemoveUnit(D9X,u2)
    endloop
  else
    set tt_unit1=u
    set g=GetAvailableGroup()
    set boolean062=false
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1225,Condition(function Func1895))
    loop
      set u2=FirstOfGroup(D9X)
      exitwhen u2==null
      if IsUnitInGroup(u2,g)==false then
        call UnitRemoveAbility(u2,'A3DK')
        call UnitRemoveAbility(u2,'B3I9')
      endif
      call GroupRemoveUnit(D9X,u2)
    endloop
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      if GetUnitAbilityLevel(u2,'A3DA')==0 then
        call GroupAddUnit(D9X,u2)
        if GetUnitAbilityLevel(u2,'A3DK')==0 then
          call UnitAddAbility2(u2,'A3DK')
          call UnitMakeAbilityPermanent(u2,true,'A3D9')
          call UnitMakeAbilityPermanent(u2,true,'A3I9')
        endif
        call Func3529(u2)
      endif
      call GroupRemoveUnit(g,u2)
    endloop
    call KillGroup(g)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3532 takes unit u returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'LeoR')==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'LeoR',t)
    call TriggerRegisterTimerEvent(t,0.3,true)
    call SaveUnitHandle(HY,h,0,u)
    call SaveGroupHandle(HY,h,1,GetAvailableGroup())
    call TriggerAddCondition(t,Condition(function Func3531))
  endif
  call HideAbility('A3DK')
  set t=null
endfunction

function Func3533 takes nothing returns nothing
  call Func3532(tt_unit1)
  set boolean021=true
endfunction

function Func3534 takes unit WXE,unit SGE returns nothing
  local integer QIE
  local real M3I
  if(GetUnitAbilityLevel(WXE,'BVA1')>0 or GetUnitAbilityLevel(WXE,'BVA2')>0 or GetUnitAbilityLevel(WXE,'BVA3')>0 or GetUnitAbilityLevel(WXE,'BVA4')>0)==false then
    return
  endif
  if IsUnitType(SGE,UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(SGE)==false and IsUnitType(SGE,UNIT_TYPE_MECHANICAL)==false and IsUnitEnemy(WXE,GetOwningPlayer(SGE))and IsDead(WXE)==false and GetUnitAbilityLevel(WXE,'A36D')==0 then
    set QIE=GetUnitAbilityLevel(WXE,'BVA1')+GetUnitAbilityLevel(WXE,'BVA2')*2+GetUnitAbilityLevel(WXE,'BVA3')*3+GetUnitAbilityLevel(WXE,'BVA4')*4
    set M3I=0.1+0.05*QIE
    call SetWidgetLife(WXE,GetWidgetLife(WXE)+GetEventDamage()*M3I)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",WXE,"origin"))
  endif
endfunction

function Func3535 takes unit source returns boolean
  return(GetUnitTypeId(source)==('H00I')or GetUnitTypeId(source)==('H00J')or GetUnitTypeId(source)==GetUnitTypeId(GetTriggerUnit()))and GetUnitState(source,UNIT_STATE_LIFE)>0.5 and GetOwningPlayer(source)==GetOwningPlayer(GetTriggerUnit())
endfunction

function Func3536 takes nothing returns boolean
  return Func3535(GetFilterUnit())
endfunction

function Func3537 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local real result=Func0676(source,location017)
  if result<real021 then
    set real021=result
    set TmpUnit376=source
  endif
  set source=null
endfunction

function Func3538 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0
endfunction

function Func3539 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",GetEnumUnit(),"origin"))
  call DamageTarget(GetTriggerUnit(),GetEnumUnit(),1,real021)
endfunction

function Func3540 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local location IGX
  local real result
  local real ZEE
  local real ZWE=GetUnitX(source)
  local real ZYE=GetUnitY(source)
  local group g
  local boolean ZSE=false
  if RCX!=null and Func3535(RCX)then
    set result=GetUnitX(RCX)
    set ZEE=GetUnitY(RCX)
    set ZSE=true
  else
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,0,0,99999,Condition(function Func3536))
    if RCX!=null then
      set IGX=GetUnitLoc(RCX)
    else
      set IGX=GetSpellTargetLoc()
    endif
    set TmpUnit376=FirstOfGroup(g)
    if TmpUnit376!=null then
      set ZSE=true
      call GroupRemoveUnit(g,TmpUnit376)
      set real021=Func0676(TmpUnit376,IGX)
      set location017=IGX
      call ForGroup(g,function Func3537)
      set RCX=TmpUnit376
      set result=GetUnitX(RCX)
      set ZEE=GetUnitY(RCX)
    endif
    call KillGroup(g)
    call RemoveLocation(IGX)
  endif
  if ZSE then
    call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",ZWE,ZYE))
    call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",result,ZEE))
    call SetUnitX(source,result)
    call SetUnitY(source,ZEE)
    set real021=60+GetUnitAbilityLevel(GetTriggerUnit(),('A0N8'))*20
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,ZWE,ZYE,400,Condition(function Func3538))
    call ForGroup(g,function Func3539)
    call KillGroup(g)
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,result,ZEE,400,Condition(function Func3538))
    call ForGroup(g,function Func3539)
    call KillGroup(g)
  endif
  set source=null
  set RCX=null
endfunction

function Func3541 takes nothing returns nothing
  call Func0735(GetTriggerUnit(),0,2)
  call Func0735(GetTriggerUnit(),.6,2)
endfunction

function Func3542 takes nothing returns nothing
  call AddToPurgeList('B078','PRGE')
  call AddToPurgeList('A3PA','PRGE')
  call AddWrapper("Func4628",4)
endfunction

function Func3543 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))and AliveNonBuildOrMarker(GetFilterUnit())and(Func0592(GetFilterUnit())==false or IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1)))
endfunction

function Func3544 takes unit SKE,real x,real y returns nothing
  local group g=GetAvailableGroup()
  local unit u
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,245,Condition(function Func3543))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    if GetUnitAbilityLevel(u,'B078')==0 then
      call StunTargetEx(u,0.1,true)
    endif
    call Func0847(u,2.,'A3PA','B078',0)
    call Func1330(SKE,u,'A3PA')
  endloop
  call KillGroup(g)
endfunction

function Func3545 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit NCX=(LoadUnitHandle(HY,(h),45))
  local real tx=(LoadReal(HY,(h),47))
  local real ty=(LoadReal(HY,(h),48))
  local real a=(LoadReal(HY,(h),13))
  local real x=GetUnitX(NCX)
  local real y=GetUnitY(NCX)
  local real nx=GetUnitX(NCX)+30*Cos(a)
  local real ny=GetUnitY(NCX)+30*Sin(a)
  if DistanceBetweenXY(nx,ny,tx,ty)<31 then
    call SetUnitX(NCX,tx)
    call SetUnitY(NCX,ty)
    call Func3544(NCX,tx,ty)
    call PauseTimer(t)
    call FlushChildHashtable(HY,(h))
    call KillUnit(NCX)
    call DestroyTimer(t)
  else
    call SetUnitX(NCX,nx)
    call SetUnitY(NCX,ny)
  endif
  set t=null
  set NCX=null
endfunction

function Func3546 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real tx=SafeX50(GetSpellTargetX())
  local real ty=SafeY50(GetSpellTargetY())
  local real x=SafeX50(GetUnitX(SKE))
  local real y=SafeY50(GetUnitY(SKE))
  local unit NCX=CreateUnit(GetOwningPlayer(SKE),'h00C',x,y,0)
  local real a=Atan2(ty-y,tx-x)
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SetUnitScale(NCX,2,2,2)
  call SaveUnitHandle(HY,(h),45,NCX)
  call SaveReal(HY,(h),47,tx)
  call SaveReal(HY,(h),48,ty)
  call SaveReal(HY,(h),13,a)
  call TimerStart(t,0.035,true,function Func3545)
  set SKE=null
  set t=null
  set NCX=null
endfunction

function Func3547 takes integer id returns boolean
  return id==Item_Real[TemporaryItem]or id==Item_Real[integer213]or id==Item_Real[integer214]or id==Item_Real[integer281]or id==Item_Real[integer217]or id==Item_Real[integer216]or id==Item_Real[integer215]or id==Item_Real[integer299]or id==Item_Real[integer309]or id==Item_Real[integer183]or id==Item_Real[integer184]
endfunction

function Func3548 takes integer id returns boolean
  return id==TemporaryItem or id==integer213 or id==integer214 or id==integer281 or id==integer217 or id==integer216 or id==integer215 or id==integer299 or id==integer309 or id==integer183 or id==integer184
endfunction

function Func3549 takes unit u returns nothing
  local integer i=0
  local integer id
  loop
    set id=GetItemTypeId(UnitItemInSlot(u,i))
    if Func3547(id)==false and id!='I0U0' then
      call UnitRemoveItem(u,UnitItemInSlot(u,i))
    endif
    set i=i+1
    exitwhen i==6
  endloop
endfunction

function Func3550 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),370))
  local integer QIE=GetHandleId(whichPlayer)
  local unit source=(LoadUnitHandle(HY,(QIE),699))
  local unit RCX=(LoadUnitHandle(HY,(QIE),700))
  local unit M_X=(LoadUnitHandle(HY,(QIE),701))
  local unit M0X=(LoadUnitHandle(HY,(QIE),702))
  local unit M1X=(LoadUnitHandle(HY,(QIE),703))
  local integer ZBE=GetUnitAbilityLevel(source,'A0NR')*2
  local integer ZCE=GetHeroAgi(source,false)
  local integer JUX=GetHeroAgi(source,true)-ZCE-ZBE
  local integer XPO=GetHeroStr(source,false)
  local integer XQO=GetHeroStr(source,true)-XPO-ZBE
  local integer FAO=GetHeroInt(source,false)
  local integer FGO=GetHeroInt(source,true)-FAO-ZBE
  local real result=0
  local integer FHO
  local integer FJO
  local integer FKO
  if boolean179 then
    set result=1.0
  endif
  set FHO=R2I(ZCE+JUX*result)
  set FJO=R2I(XPO+XQO*result)
  set FKO=R2I(FAO+FGO*result)
  if GetUnitState(source,UNIT_STATE_LIFE)>1 then
    if RCX!=null then
      call SetHeroAgi(RCX,FHO,false)
      call SetHeroStr(RCX,FJO,false)
      call SetHeroInt(RCX,FKO,false)
      call Func3549(RCX)
    endif
    if M_X!=null then
      call SetHeroAgi(M_X,FHO,false)
      call SetHeroStr(M_X,FJO,false)
      call SetHeroInt(M_X,FKO,false)
      call Func3549(M_X)
    endif
    if M0X!=null then
      call SetHeroAgi(M0X,FHO,false)
      call SetHeroStr(M0X,FJO,false)
      call SetHeroInt(M0X,FKO,false)
      call Func3549(M0X)
    endif
    if M1X!=null then
      call SetHeroAgi(M1X,FHO,false)
      call SetHeroStr(M1X,FJO,false)
      call SetHeroInt(M1X,FKO,false)
      call Func3549(M1X)
    endif
  endif
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
endfunction

function Func3551 takes nothing returns nothing
  local integer WVE=GetHandleId(LoadPlayerHandle(HY,GetHandleId(GetTriggeringTrigger()),370))
  local unit M6X=(LoadUnitHandle(HY,(WVE),699))
  local unit M7X=(LoadUnitHandle(HY,(WVE),700))
  local unit M8X=(LoadUnitHandle(HY,(WVE),701))
  local unit M9X=(LoadUnitHandle(HY,(WVE),702))
  local unit PVX=(LoadUnitHandle(HY,(WVE),703))
  local integer H6A=GetHandleId(M6X)
  local integer H7A=GetHandleId(M7X)
  local integer H8A=GetHandleId(M8X)
  local integer H9A=GetHandleId(M9X)
  local integer JVA=GetHandleId(PVX)
  local integer JEA=(LoadInteger(HY,(H6A),367))
  local integer JXA=(LoadInteger(HY,(H6A),368))
  local integer JOA=(LoadInteger(HY,(H7A),367))
  local integer JRA=(LoadInteger(HY,(H7A),368))
  local integer JIA=(LoadInteger(HY,(H8A),367))
  local integer JAA=(LoadInteger(HY,(H8A),368))
  local integer JNA=(LoadInteger(HY,(H9A),367))
  local integer JBA=(LoadInteger(HY,(H9A),368))
  local integer JCA=(LoadInteger(HY,(JVA),367))
  local integer JDA=(LoadInteger(HY,(JVA),368))
  local integer JFA=GetHeroXP(M6X)
  local integer JGA=GetHeroXP(M7X)
  local integer JHA=GetHeroXP(M8X)
  local integer JJA=GetHeroXP(M9X)
  local integer JKA=GetHeroXP(PVX)
  local integer JLA=JFA-JEA-JXA
  local integer JMA=JGA-JOA-JRA
  local integer JPA=JHA-JIA-JAA
  local integer JQA=JJA-JNA-JBA
  local integer JSA=JKA-JCA-JDA
  if GetUnitState(M6X,UNIT_STATE_LIFE)>1 then
    set JEA=JEA+JLA
    set JOA=JOA+JMA
    set JIA=JIA+JPA
    set JNA=JNA+JQA
    set JCA=JCA+JSA
    if M6X!=null then
      call AddHeroXP(M7X,JLA,false)
      if GetHeroXP(M7X)!=JGA then
        set JRA=JRA+JLA
      endif
      call AddHeroXP(M8X,JLA,false)
      if GetHeroXP(M8X)!=JHA then
        set JAA=JAA+JLA
      endif
      call AddHeroXP(M9X,JLA,false)
      if GetHeroXP(M9X)!=JJA then
        set JBA=JBA+JLA
      endif
      call AddHeroXP(PVX,JLA,false)
      if GetHeroXP(PVX)!=JKA then
        set JDA=JDA+JLA
      endif
    endif
    if M7X!=null then
      call AddHeroXP(M6X,JMA,false)
      if GetHeroXP(M6X)!=JFA then
        set JXA=JXA+JMA
      endif
      call AddHeroXP(M8X,JMA,false)
      if GetHeroXP(M8X)!=JHA then
        set JAA=JAA+JMA
      endif
      call AddHeroXP(M9X,JMA,false)
      if GetHeroXP(M9X)!=JJA then
        set JBA=JBA+JMA
      endif
      call AddHeroXP(PVX,JMA,false)
      if GetHeroXP(PVX)!=JKA then
        set JDA=JDA+JMA
      endif
    endif
    if M8X!=null then
      call AddHeroXP(M7X,JPA,false)
      if GetHeroXP(M7X)!=JGA then
        set JRA=JRA+JPA
      endif
      call AddHeroXP(M6X,JPA,false)
      if GetHeroXP(M6X)!=JFA then
        set JXA=JXA+JPA
      endif
      call AddHeroXP(M9X,JPA,false)
      if GetHeroXP(M9X)!=JJA then
        set JBA=JBA+JPA
      endif
      call AddHeroXP(PVX,JPA,false)
      if GetHeroXP(PVX)!=JKA then
        set JDA=JDA+JPA
      endif
    endif
    if M9X!=null then
      call AddHeroXP(M7X,JQA,false)
      if GetHeroXP(M7X)!=JGA then
        set JRA=JRA+JQA
      endif
      call AddHeroXP(M8X,JQA,false)
      if GetHeroXP(M8X)!=JHA then
        set JAA=JAA+JQA
      endif
      call AddHeroXP(M6X,JQA,false)
      if GetHeroXP(M6X)!=JFA then
        set JXA=JXA+JQA
      endif
      call AddHeroXP(PVX,JQA,false)
      if GetHeroXP(PVX)!=JKA then
        set JDA=JDA+JQA
      endif
    endif
    if PVX!=null then
      call AddHeroXP(M7X,JSA,false)
      if GetHeroXP(M7X)!=JGA then
        set JRA=JRA+JSA
      endif
      call AddHeroXP(M8X,JSA,false)
      if GetHeroXP(M8X)!=JHA then
        set JAA=JAA+JSA
      endif
      call AddHeroXP(M6X,JSA,false)
      if GetHeroXP(M6X)!=JFA then
        set JXA=JXA+JSA
      endif
      call AddHeroXP(M9X,JSA,false)
      if GetHeroXP(M9X)!=JJA then
        set JBA=JBA+JSA
      endif
    endif
    call SaveInteger(HY,(H6A),367,(JEA))
    call SaveInteger(HY,(H6A),368,(JXA))
    call SaveInteger(HY,(H7A),367,(JOA))
    call SaveInteger(HY,(H7A),368,(JRA))
    call SaveInteger(HY,(H8A),367,(JIA))
    call SaveInteger(HY,(H8A),368,(JAA))
    call SaveInteger(HY,(H9A),367,(JNA))
    call SaveInteger(HY,(H9A),368,(JBA))
    call SaveInteger(HY,(JVA),367,(JCA))
    call SaveInteger(HY,(JVA),368,(JDA))
  endif
  set M6X=null
  set M7X=null
  set M8X=null
  set M9X=null
  set PVX=null
endfunction

function Func3552 takes nothing returns boolean
  return IsMeepo(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction

function Func3553 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local real dmg=0.
  local integer i=1
  local unit SGE=LoadUnitHandle(HY,h,0)
  local unit HDE=LoadUnitHandle(HY,h,1)
  if IsDead(SGE)or GetUnitAbilityLevel(SGE,'B079')==0 then
    call RemoveSavedHandle(HY,LoadInteger(HY,h,-1),'A0N7')
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    loop
      if LoadReal(HY,h,i)!=0 and TimerGetElapsed(GlobalTimer)-LoadReal(HY,h,i)<2.1 then
        set dmg=dmg+10*LoadInteger(HY,h,0)
      endif
      set i=i+1
      exitwhen i>5
    endloop
    if dmg>0 then
      call DamageTarget(HDE,SGE,1,dmg)
    endif
  endif
  set SGE=null
  set HDE=null
  set t=null
endfunction

function Func3554 takes unit WXE,unit SGE returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(SGE)
  local integer i=1
  local integer ha=GetHandleId(WXE)
  if HaveSavedHandle(HY,hu,'A0N7')then
    set t=LoadTimerHandle(HY,hu,'A0N7')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,hu,'A0N7',t)
    call SaveInteger(HY,h,-1,hu)
    call TimerStart(t,1,true,function Func3553)
    call SaveUnitHandle(HY,h,0,SGE)
  endif
  call SaveUnitHandle(HY,h,1,WXE)
  loop
    if LoadInteger(HY,h,i)==ha then
      call SaveReal(HY,h,i,TimerGetElapsed(GlobalTimer))
      exitwhen true
    elseif LoadInteger(HY,h,i)==0 then
      call SaveReal(HY,h,i,TimerGetElapsed(GlobalTimer))
      call SaveInteger(HY,h,i,ha)
      exitwhen true
    endif
    set i=i+1
    exitwhen i>5
  endloop
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(WXE,'A0N7'))
  set t=null
endfunction

function Func3555 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local integer ZAE=GetHandleId(GetOwningPlayer(source))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),699))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),700))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),701))
  local unit M1X=(LoadUnitHandle(HY,(ZAE),702))
  local unit M2X=(LoadUnitHandle(HY,(ZAE),703))
  local boolean ZSE=false
  call DisableTrigger(trigger014)
  if RCX!=null and RCX!=source then
    call SaveBoolean(HY,GetHandleId(RCX),'suic',true)
    call KillUnit(RCX)
  endif
  if M_X!=null and M_X!=source then
    call SaveBoolean(HY,GetHandleId(M_X),'suic',true)
    call KillUnit(M_X)
  endif
  if M0X!=null and M0X!=source then
    call SaveBoolean(HY,GetHandleId(M0X),'suic',true)
    call KillUnit(M0X)
  endif
  if M1X!=null and M1X!=source then
    call SaveBoolean(HY,GetHandleId(M1X),'suic',true)
    call KillUnit(M1X)
  endif
  if M2X!=null and M2X!=source then
    call SaveBoolean(HY,GetHandleId(M2X),'suic',true)
    call KillUnit(M2X)
  endif
  call EnableTrigger(trigger014)
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  set M2X=null
endfunction

function Func3556 takes nothing returns boolean
  local integer J_A
  if GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER then
    set J_A=GetItemTypeId(GetManipulatedItem())
    if Func3547(J_A)==false then
      return false
    endif
  endif
  return IsMeepo(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction

function Func3557 takes unit TWX,unit GPA returns nothing
  local trigger t=LoadTriggerHandle(HY,GetHandleId(GetOwningPlayer(GPA)),369)
  local integer i=0
  local boolean b1=false
  local boolean b2=false
  local boolean b3=false
  local boolean b4=false
  local boolean b5=false
  local boolean b6=false
  local boolean b7=false
  local boolean b8=false
  local boolean b9=false
  local boolean J1A=false
  local boolean J2A=false
  local integer k=0
  local integer id
  call DisableTrigger(t)
  call DisableTrigger(t_manipulateitem)
  loop
    exitwhen i>5
    set id=GetItemTypeId(UnitItemInSlot(GPA,i))
    if id==(Item_Real[TemporaryItem])then
      set b1=true
      set k=i
    elseif id==(Item_Real[integer213])then
      set b2=true
      set k=i
    elseif id==(Item_Real[integer214])then
      set J1A=true
      set k=i
    elseif id==(Item_Real[integer281])then
      set J2A=true
      set k=i
    elseif id==(Item_Real[integer217])then
      set b3=true
      set k=i
    elseif id==(Item_Real[integer216])then
      set b4=true
      set k=i
    elseif id==(Item_Real[integer215])then
      set b5=true
      set k=i
    elseif id==(Item_Real[integer299])then
      set b6=true
      set k=i
    elseif id==(Item_Real[integer309])then
      set b7=true
      set k=i
    elseif id==(Item_Real[integer183])then
      set b8=true
      set k=i
    elseif id==(Item_Real[integer184])then
      set b9=true
      set k=i
    endif
    set i=i+1
  endloop
  if b9 or b8 then
    call Func0766(TWX,CreateItem((Item_Real[integer183]),0,0),k)
  elseif b7 then
    call Func0766(TWX,CreateItem((Item_Real[integer309]),0,0),k)
  elseif b6 then
    call Func0766(TWX,CreateItem((Item_Real[integer299]),0,0),k)
  elseif b5 then
    call Func0766(TWX,CreateItem((Item_Real[integer215]),0,0),k)
  elseif b4 then
    call Func0766(TWX,CreateItem((Item_Real[integer216]),0,0),k)
  elseif b3 then
    call Func0766(TWX,CreateItem((Item_Real[integer217]),0,0),k)
  elseif b2 then
    call Func0766(TWX,CreateItem((Item_Real[integer213]),0,0),k)
  elseif J1A then
    call Func0766(TWX,CreateItem((Item_Real[integer214]),0,0),k)
  elseif J2A then
    call Func0766(TWX,CreateItem((Item_Real[integer281]),0,0),k)
  elseif b1 then
    call Func0766(TWX,CreateItem((Item_Real[TemporaryItem]),0,0),k)
  endif
  call EnableTrigger(t)
  call EnableTrigger(t_manipulateitem)
  set t=null
endfunction

function Func3558 takes unit u returns nothing
  if UnitItemInSlot(u,0)==null then
    call UnitAddItemById(u,'I0U0')
  endif
  if UnitItemInSlot(u,1)==null then
    call UnitAddItemById(u,'I0U0')
  endif
  if UnitItemInSlot(u,2)==null then
    call UnitAddItemById(u,'I0U0')
  endif
  if UnitItemInSlot(u,3)==null then
    call UnitAddItemById(u,'I0U0')
  endif
  if UnitItemInSlot(u,4)==null then
    call UnitAddItemById(u,'I0U0')
  endif
  if UnitItemInSlot(u,5)==null then
    call UnitAddItemById(u,'I0U0')
  endif
endfunction

function Func3559 takes nothing returns nothing
  local unit J5A=GetTriggerUnit()
  local integer slot=0
  local boolean J6A=false
  local boolean J7A=false
  local boolean J8A=false
  local boolean J9A=false
  local boolean KVA=false
  local boolean KEA=false
  local boolean KXA=false
  local boolean KOA=false
  local boolean KRA=false
  local boolean KIA=false
  local boolean KAA=false
  local integer QIE=GetHandleId(GetOwningPlayer(J5A))
  local unit M6X=(LoadUnitHandle(HY,(QIE),699))
  local unit M7X=(LoadUnitHandle(HY,(QIE),700))
  local unit M8X=(LoadUnitHandle(HY,(QIE),701))
  local unit M9X=(LoadUnitHandle(HY,(QIE),702))
  local unit PVX=(LoadUnitHandle(HY,(QIE),703))
  local integer iid
  local boolean NOO=false
  local integer KNA=0
  local integer KBA=0
  local integer KCA=0
  local integer KDA=0
  local integer KFA=0
  local integer KGA=0
  local integer KHA=0
  local integer KJA=0
  local integer KKA=0
  local integer KLA=0
  local integer KMA=0
  local integer i
  local integer k=0
  local integer J_A=0
  local integer id
  local boolean TZR=GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER
  local integer KPA=0
  local integer RRE=0
  if TZR then
    set id=GetIssuedOrderId()
    if id>=852002 and id<=852007 then
      set J_A=GetItemTypeId(GetOrderTargetItem())
      if GetOrderTargetItem()==UnitItemInSlot(J5A,id-852002)or Func3547(J_A)==false then
        set J5A=null
        return
      endif
      set k=id-852002
    else
      set J5A=null
      return
    endif
  endif
  if J_A==0 then
    set J_A=GetItemTypeId(GetManipulatedItem())
  endif
  set RRE=GetItemsIndex_NonMuted(GetManipulatedItem())
  call DisableTrigger(GetTriggeringTrigger())
  if GetUnitTypeId(J5A)==('H00J')then
    if boolean058==false then
      call UnitRemoveItemFromSlot(J5A,0)
      call EnableTrigger(GetTriggeringTrigger())
      return
    endif
  endif
  if Func3547(J_A)==false and Func3548(RRE)==false then
    call EnableTrigger(GetTriggeringTrigger())
    return
  endif
  if boolean058 then
    call EnableTrigger(GetTriggeringTrigger())
    return
  endif
  call DisableTrigger(t_manipulateitem)
  if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM then
    set NOO=true
  endif
  loop
    exitwhen slot>5
    set iid=GetItemTypeId(UnitItemInSlot(J5A,slot))
    set RRE=GetItemsIndex_NonMuted(UnitItemInSlot(J5A,slot))
    if RRE==TemporaryItem then
      set KNA=KNA+1
      if NOO==false or iid!=J_A or KNA>1 then
        set J6A=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer213 then
      set KBA=KBA+1
      if NOO==false or iid!=J_A or KBA>1 then
        set J7A=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer214 then
      set KLA=KLA+1
      if NOO==false or iid!=J_A or KLA>1 then
        set KIA=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer217 then
      set KCA=KCA+1
      if NOO==false or iid!=J_A or KCA>1 then
        set J8A=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer216 then
      set KDA=KDA+1
      if NOO==false or iid!=J_A or KDA>1 then
        set J9A=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer215 then
      set KFA=KFA+1
      if NOO==false or iid!=J_A or KFA>1 then
        set KVA=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer299 then
      set KGA=KGA+1
      if NOO==false or iid!=J_A or KGA>1 then
        set KEA=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer281 then
      set KMA=KMA+1
      if NOO==false or iid!=J_A or KMA>1 then
        set KAA=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer309 then
      set KHA=KHA+1
      if NOO==false or iid!=J_A or KHA>1 then
        set KXA=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer183 then
      set KJA=KJA+1
      if NOO==false or iid!=J_A or KJA>1 then
        set KOA=true
        if TZR==false then
          set k=slot
        endif
      endif
    elseif RRE==integer184 then
      set KKA=KKA+1
      if NOO==false or iid!=J_A or KKA>1 then
        set KRA=true
        if TZR==false then
          set k=slot
        endif
      endif
    endif
    set slot=slot+1
  endloop
  set i=0
  loop
    call RemoveItem(UnitRemoveItemFromSlot(M7X,i))
    if M8X!=null then
      call RemoveItem(UnitRemoveItemFromSlot(M8X,i))
    endif
    if M9X!=null then
      call RemoveItem(UnitRemoveItemFromSlot(M9X,i))
    endif
    if PVX!=null then
      call RemoveItem(UnitRemoveItemFromSlot(PVX,i))
    endif
    set i=i+1
    exitwhen i>5
  endloop
  if KIA then
    set KPA=Item_Real[integer214]
  elseif J7A then
    set KPA=Item_Real[integer213]
  elseif KAA then
    set KPA=Item_Real[integer281]
  elseif KRA then
    set KPA=Item_Real[integer184]
  elseif KOA then
    set KPA=Item_Real[integer183]
  elseif KEA then
    set KPA=Item_Real[integer299]
  elseif KXA then
    set KPA=Item_Real[integer309]
  elseif KVA then
    set KPA=Item_Real[integer215]
  elseif J9A then
    set KPA=Item_Real[integer216]
  elseif J8A then
    set KPA=Item_Real[integer217]
  elseif J6A then
    set KPA=Item_Real[TemporaryItem]
  endif
  if KPA>0 then
    call Func0766(M7X,CreateItem(KPA,0,0),k)
    if M8X!=null then
      call Func0766(M8X,CreateItem(KPA,0,0),k)
    endif
    if M9X!=null then
      call Func0766(M9X,CreateItem(KPA,0,0),k)
    endif
    if PVX!=null then
      call Func0766(PVX,CreateItem(KPA,0,0),k)
    endif
  endif
  set i=1
  if KPA==0 then
    set i=0
  endif
  call Func3558(M7X)
  call Func3558(M8X)
  call Func3558(M9X)
  call Func3558(PVX)
  call EnableTrigger(GetTriggeringTrigger())
  call EnableTrigger(t_manipulateitem)
  set M6X=null
  set M7X=null
  set M8X=null
  set M9X=null
  set PVX=null
endfunction

function Func3560 takes unit u,integer id returns nothing
  local integer h=GetHandleId(GetOwningPlayer(u))
  local unit KSA=(LoadUnitHandle(HY,h,699))
  local unit M6X=(LoadUnitHandle(HY,h,700))
  local unit M7X=(LoadUnitHandle(HY,h,701))
  local unit M8X=(LoadUnitHandle(HY,h,702))
  local unit M9X=(LoadUnitHandle(HY,h,703))
  if KSA!=null and KSA!=u then
    call SelectHeroSkill(KSA,id)
  endif
  if M6X!=null and M6X!=u then
    call SelectHeroSkill(M6X,id)
  endif
  if M7X!=null and M7X!=u then
    call SelectHeroSkill(M7X,id)
  endif
  if M8X!=null and M8X!=u then
    call SelectHeroSkill(M8X,id)
  endif
  if M9X!=null and M9X!=u then
    call SelectHeroSkill(M9X,id)
  endif
  set KSA=null
  set M6X=null
  set M9X=null
  set M7X=null
  set M8X=null
endfunction

function Func3561 takes integer id,unit u,unit TWX returns nothing
  local integer i=1
  local integer QIE=GetUnitAbilityLevel(u,id)
  loop
    exitwhen i>QIE
    if id=='A0MW' then
      call SelectHeroSkill(TWX,'A0MW')
      call SelectHeroSkill(TWX,'A27C')
    else
      call SelectHeroSkill(TWX,id)
    endif
    set i=i+1
  endloop
endfunction

function Func3562 takes unit TWX,unit u returns nothing
  call AddHeroXP(TWX,GetHeroXP(u),false)
  call SaveInteger(HY,(GetHandleId(TWX)),368,(GetHeroXP(u)))
  call SaveInteger(HY,(GetHandleId(TWX)),367,0)
  call Func3561('A0N8',u,TWX)
  call Func3561('A0NB',u,TWX)
  call Func3561('A0N7',u,TWX)
  call Func3561('A0NR',u,TWX)
  call Func3561('A0MW',u,TWX)
  call Func3561('A27C',u,TWX)
endfunction

function Func3563 takes unit source,unit RCX,integer ZAE,integer QIE,integer ZBE returns nothing
  if QIE>ZBE then
    call SelectHeroSkill(RCX,ZAE)
  elseif ZBE>QIE then
    call SelectHeroSkill(source,ZAE)
  endif
endfunction

function Func3564 takes unit source,unit RCX returns nothing
  local integer ZAE=GetHeroXP(source)
  local integer QIE=GetHeroXP(RCX)
  local integer ZBE=GetHandleId(source)
  local integer ZCE=GetHandleId(RCX)
  local integer JUX=(LoadInteger(HY,(ZBE),368))
  local integer XPO=(LoadInteger(HY,(ZCE),368))
  local integer XQO
  if ZAE>QIE then
    set XQO=ZAE-QIE
    call AddHeroXP(RCX,XQO,true)
    if QIE!=GetHeroXP(RCX)then
      call SaveInteger(HY,(ZCE),368,(XPO+XQO))
    endif
  elseif ZAE<QIE then
    set XQO=QIE-ZAE
    call AddHeroXP(source,XQO,true)
    if ZAE!=GetHeroXP(source)then
      call SaveInteger(HY,(ZBE),368,(JUX+XQO))
    endif
  endif
endfunction

function Func3565 takes unit source,unit RCX returns nothing
  local integer ZAE=GetUnitAbilityLevel(source,('A0N8'))
  local integer QIE=GetUnitAbilityLevel(source,('A0NB'))
  local integer ZBE=GetUnitAbilityLevel(source,('A0N7'))
  local integer ZCE=GetUnitAbilityLevel(source,('A0MW'))
  local integer JUX=GetUnitAbilityLevel(source,'A0NR')
  local integer XPO=GetUnitAbilityLevel(source,'A27C')
  local integer XQO=GetUnitAbilityLevel(RCX,('A0N8'))
  local integer FAO=GetUnitAbilityLevel(RCX,('A0NB'))
  local integer FGO=GetUnitAbilityLevel(RCX,('A0N7'))
  local integer FHO=GetUnitAbilityLevel(RCX,('A0MW'))
  local integer FJO=GetUnitAbilityLevel(RCX,'A0NR')
  local integer FKO=GetUnitAbilityLevel(RCX,'A27C')
  call Func3564(source,RCX)
  call Func3563(source,RCX,('A0N8'),ZAE,XQO)
  call Func3563(source,RCX,('A0NB'),QIE,FAO)
  call Func3563(source,RCX,('A0N7'),ZBE,FGO)
  call Func3563(source,RCX,('A0MW'),ZCE,FHO)
  call Func3563(source,RCX,'A27C',XPO,FKO)
  call Func3563(source,RCX,'A0NR',JUX,FJO)
endfunction

function Func3566 takes unit source,unit RCX returns nothing
  if source!=null and RCX!=null then
    call Func3565(source,RCX)
  endif
endfunction

function Func3567 takes nothing returns nothing
  local integer h=GetHandleId((LoadPlayerHandle(HY,(GetHandleId(GetTriggeringTrigger())),370)))
  local unit source=(LoadUnitHandle(HY,h,699))
  local unit RCX=(LoadUnitHandle(HY,h,700))
  local unit M_X=(LoadUnitHandle(HY,h,701))
  local unit M0X=(LoadUnitHandle(HY,h,702))
  local unit M1X=(LoadUnitHandle(HY,h,703))
  call DisableTrigger(trigger046)
  call Func3566(source,RCX)
  call Func3566(source,M_X)
  call Func3566(source,M0X)
  call Func3566(source,M1X)
  call Func3566(RCX,M_X)
  call Func3566(RCX,M0X)
  call Func3566(RCX,M1X)
  call Func3566(M_X,M0X)
  call Func3566(M_X,M1X)
  call Func3566(M0X,M1X)
  call EnableTrigger(trigger046)
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
endfunction

function Func3568 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,0.2,true)
  call TriggerAddAction(RBX,function Func3567)
  call SavePlayerHandle(HY,(GetHandleId(RBX)),370,(GetOwningPlayer(GetTriggerUnit())))
  set RBX=null
endfunction

function Func3569 takes unit u returns nothing
  local trigger t
  call SaveUnitHandle(HY,(GetHandleId(GetOwningPlayer(u))),699,(u))
  call SaveInteger(HY,(GetHandleId(u)),367,(GetHeroXP(u)))
  call SaveInteger(HY,(GetHandleId(u)),368,0)
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddAction(t,function Func3551)
  call SavePlayerHandle(HY,(GetHandleId(t)),370,(GetOwningPlayer(u)))
  call SaveTriggerHandle(HY,(GetHandleId(GetOwningPlayer(u))),371,(t))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.3,true)
  call TriggerAddAction(t,function Func3550)
  call SavePlayerHandle(HY,(GetHandleId(t)),370,(GetOwningPlayer(u)))
  call SaveTriggerHandle(HY,(GetHandleId(GetOwningPlayer(u))),372,(t))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddAction(t,function Func3555)
  call TriggerAddCondition(t,Condition(function Func3552))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_PICKUP_ITEM)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DROP_ITEM)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddCondition(t,Condition(function Func3556))
  call TriggerAddAction(t,function Func3559)
  call SaveTriggerHandle(HY,(GetHandleId(GetOwningPlayer(u))),369,(t))
  set trigger010=t
  call ExecuteFunc("Func3568")
  set t=null
endfunction

function Func3570 takes unit u,boolean K8I returns nothing
  local player p=GetOwningPlayer(u)
  local integer h=GetHandleId(p)
  local unit TWX
  set integer510=integer510+1
  if integer510==1 then
    call Func3569(u)
  endif
  call TriggerExecute((LoadTriggerHandle(HY,(GetHandleId(GetOwningPlayer(u))),371)))
  call TriggerExecute((LoadTriggerHandle(HY,(GetHandleId(GetOwningPlayer(u))),372)))
  if K8I==false then
    call Func3560(u,'A0MW')
    call Func3560(u,'A27C')
  endif
  set TWX=CreateUnit(GetOwningPlayer(u),'H00J',GetUnitX(u),GetUnitY(u),0)
  call TriggerRegisterUnitEvent(trigger010,TWX,EVENT_UNIT_PICKUP_ITEM)
  if Func0898(u)then
    call UnitAddAbility2(TWX,LoadInteger(AghanimsTable,'H00I','AghB'))
  endif
  call Func3562(TWX,u)
  call Func3557(TWX,u)
  call SaveUnitHandle(HY,h,(699+integer510),(TWX))
  call SelectSummons(TWX)
  call Func3558(TWX)
  set TWX=null
endfunction

function Func3571 takes nothing returns nothing
  if boolean179==false then
    set boolean179=true
    call DisableTrigger(trigger046)
    call Func3570(tt_unit1,true)
    call EnableTrigger(trigger046)
  endif
endfunction

function Func3572 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  if IsUnitIllusion(GetTriggerUnit())==false and GetOwningPlayer(GetTriggerUnit())==GetOwningPlayer(u)and IsMeepo(GetTriggerUnit())then
    if(GetLearnedSkill()=='A0MW' or GetLearnedSkill()=='A27C')then
      call DisableTrigger(GetTriggeringTrigger())
      call Func3570(GetTriggerUnit(),false)
      call EnableTrigger(GetTriggeringTrigger())
    elseif GetLearnedSkill()=='A0NR' or GetLearnedSkill()=='A0N8' or GetLearnedSkill()=='A0NB' or GetLearnedSkill()=='A0N7' then
      call TriggerExecute((LoadTriggerHandle(HY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),371)))
      call TriggerExecute((LoadTriggerHandle(HY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),372)))
      call DisableTrigger(GetTriggeringTrigger())
      call Func3560(GetTriggerUnit(),GetLearnedSkill())
      call EnableTrigger(GetTriggeringTrigger())
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3573 takes nothing returns nothing
  local unit u=tt_unit1
  local integer h
  set trigger045=CreateTrigger()
  set trigger046=trigger045
  set h=GetHandleId(trigger045)
  call TriggerRegisterAnyUnitEvent(trigger045,EVENT_PLAYER_HERO_SKILL)
  call TriggerAddCondition(trigger045,Condition(function Func3572))
  call SaveUnitHandle(HY,h,2,(u))
  call AddToPurgeList('B079','PRGE')
  set u=null
endfunction

function Func3574 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(IsDead(GetFilterUnit())==false and IsUnitInvulnerable(GetFilterUnit())==false)
endfunction

function Func3575 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  local integer QIE=(LoadInteger(HY,(h),5))
  local group g
  local unit SGE
  local real d
  local real a
  local real x
  local real y
  if GetTriggerEvalCount(t)>40 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),500,Condition(function Func3574))
    set SGE=GroupPickRandomUnit(g)
    if SGE==null then
      set d=GetRandomReal(175,400)
      set a=GetRandomReal(0,6)
      set x=GetUnitX(SKE)+d*Cos(a)
      set y=GetUnitY(SKE)+d*Sin(a)
      call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",x,y))
    else
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",SGE,"origin"))
      if IsUnitType(SGE,UNIT_TYPE_STRUCTURE)then
        call DamageTarget(SKE,SGE,23,9*QIE*1.4)
      else
        call DamageTarget(SKE,SGE,23,9*QIE)
      endif
    endif
    call KillGroup(g)
  endif
  set SGE=null
  set g=null
  set t=null
  set SKE=null
  return false
endfunction

function Func3576 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl",SKE,"hand right"))
  call SaveUnitHandle(HY,(h),14,SKE)
  call SaveInteger(HY,(h),5,(GetUnitAbilityLevel(SKE,'A20T')))
  call TriggerRegisterTimerEvent(t,0.25,true)
  call TriggerAddCondition(t,Condition(function Func3575))
  set t=null
  set SKE=null
endfunction

function Func3577 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local integer QIE=LoadInteger(HY,h,0)
  local group g=GetAvailableGroup()
  local unit u2
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,LoadReal(HY,h,10),LoadReal(HY,h,11),125+25+25*QIE,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call StunTargetEx(u2,2.,true)
    call DamageTarget(SKE,u2,1,60*QIE+60)
  endloop
  call KillGroup(g)
  call KillTrees(LoadReal(HY,h,10),LoadReal(HY,h,11),225)
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
  set SKE=null
endfunction

function Func3578 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local location IGX=GetSpellTargetLoc()
  call Func0692("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",GetLocationX(IGX),GetLocationY(IGX),2)
  call TerrainDeformationRippleBJ(0.3,false,IGX,0,300,100,0.4,20)
  call RemoveLocation(IGX)
  set IGX=null
  call TimerStart(t,0.35,false,function Func3577)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(GetTriggerUnit(),'A06W'))
  call SaveReal(HY,h,10,GetSpellTargetX())
  call SaveReal(HY,h,11,GetSpellTargetY())
  set t=null
endfunction

function Func3579 takes nothing returns nothing
  call AddToPurgeList('A2WZ','PRGE')
  call AddToPurgeList('B0H6','PRGE')
endfunction

function Func3580 takes unit WXE,unit SGE returns nothing
  local integer QIE=GetUnitAbilityLevel(WXE,'A3A7')
  if QIE>0 then
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(WXE))],SGE,1,50*QIE)
    call UnitAddAbilityTimedExF(SGE,'A2WZ',1,0.6+0.1*QIE,'B0H6')
  endif
endfunction

function Func3581 takes nothing returns nothing
  local unit source=unit223
  local unit RCX=GetEnumUnit()
  call DamageTarget(source,RCX,1,real096)
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LeshUltiEffect.mdx",RCX,"chest"))
  set source=null
  set RCX=null
endfunction

function Func3582 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(source,'A21F')
  local group g
  if QIE!=0 then
    if QIE==1 then
      set real096=100
    elseif QIE==2 then
      set real096=130
    else
      set real096=160
    endif
  else
    set QIE=GetUnitAbilityLevel(source,'A21G')
    if QIE==1 then
      set real096=160
    elseif QIE==2 then
      set real096=190
    else
      set real096=220
    endif
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitState(source,UNIT_STATE_MANA)<20*QIE or(LoadInteger(HY,(GetHandleId(source)),704))==-1 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()=='A21H' or GetSpellAbilityId()=='A27H'))then
    if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A21F' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21F',true)
    endif
    if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A21G' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21G',true)
    endif
    call DestroyEffect(LoadEffectHandle(HY,ZAE,10))
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21H',false)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
    call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MANA)-20*QIE)
    call ManaFlareCheck(source,20*QIE)
    set tt_unit1=source
    set unit223=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),475,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func3581)
    call KillGroup(g)
    set g=null
  endif
  set source=null
  set RBX=null
  return false
endfunction

function Func3583 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveEffectHandle(HY,ZAE,10,AddSpecialEffectTarget("war3mapImported\\LeshUltiEffect.mdx",source,"chest"))
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21F',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21G',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A21H',true)
  call UnitAddAbility(source,'A21H')
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func3582))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call TriggerEvaluate(RBX)
  set source=null
  set RBX=null
endfunction

function Func3584 takes unit u,unit t returns nothing
  if IsMagicImmune(u)==false then
    call UnitAddAbilityTimedExF(u,'A2U1',1,2,'B0GV')
  endif
endfunction

function Func3585 takes nothing returns nothing
  call UnitAddAbilityTimedExF(GetSpellTargetUnit(),'A2U0',GetUnitAbilityLevel(GetTriggerUnit(),'A08R'),40,0)
  call UnitAddAbilityTimedExF(GetSpellTargetUnit(),'A3I8',1,40,'B3I8')
  call FuckingAssistBuffWrap(GetTriggerUnit(),GetSpellTargetUnit())
endfunction

function Func3586 takes unit SKE,unit SGE,real dmg,real S5I,integer F_I,integer LOA returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),216,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call DamageTarget(SKE,SGE,1,dmg)
    call UnitAddAbilityTimedExF(SGE,F_I,1,4.,LOA)
  endloop
  call DamageTarget(SKE,SGE,1,S5I)
endfunction

function Func3587 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local real dmg=50+25*QIE
  local real S5I=50*QIE
  call Func3586(SKE,SGE,dmg,S5I,'A3SY','a3SY')
  set SKE=null
  set SGE=null
endfunction

function Func3588 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(Func0592(GetFilterUnit())==false or IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1)))and IsUnitInvulnerable(GetFilterUnit())==false and GetUnitTypeId(GetFilterUnit())!='n0F5'
endfunction

function Func3589 takes unit SKE,unit SGE,integer QIE,boolean CTI returns nothing
  call DamageTarget(SKE,SGE,1,190+90*QIE)
  if CTI then
    call UnitAddAbilityTimedExF(SGE,'A3SZ',1,4.,'a3SZ')
  else
    call UnitAddAbilityTimedExF(SGE,'A3T0',1,4.,'a3T0')
  endif
endfunction

function Func3590 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=(LoadUnitHandle(HY,h,374))
  local integer QIE=(LoadInteger(HY,h,5))
  local integer c=(LoadInteger(HY,h,233))
  local integer i=(LoadInteger(HY,h,12))
  local unit D2O
  local group g
  local real a
  local real x
  local real y
  local integer UME=(LoadInteger(HY,h,720))
  if UME>0 then
    set UME=UME-1
    call SaveInteger(HY,h,720,(UME))
    set t=null
    set SKE=null
    set SGE=null
    set d=null
    return false
  endif
  if DistanceBetweenXY(GetUnitX(d),GetUnitY(d),GetUnitX(SGE),GetUnitY(SGE))>20 then
    set a= AngleBetweenXY(GetUnitX(d),GetUnitY(d),GetUnitX(SGE),GetUnitY(SGE))
    call SetUnitFacing(d,a)
    set x=GetUnitX(d)+17*Cos(a*bj_DEGTORAD)
    set y=GetUnitY(d)+17*Sin(a*bj_DEGTORAD)
    call SetUnitX(d,x)
    call SetUnitY(d,y)
  else
    if IsDead(SGE)==false and IsMagicImmune(SGE)==false then
      call Func3589(SKE,SGE,LoadInteger(HY,h,6),LoadBoolean(HY,h,5))
      if c==1 and GetUnitAbilityLevel(SGE,'A3E9')==1 and LoadBoolean(HY,h,0)==false then
        if IsBlocked(SKE)==false then
          call SaveUnitHandle(TempHash,'A3E9',0,SGE)
          call SaveUnitHandle(TempHash,'A3E9',1,SKE)
          call SaveInteger(TempHash,'A3E9',0,QIE)
          if i>100 then
            call SaveInteger(TempHash,'A3E9',1,'A08H')
          else
            call SaveInteger(TempHash,'A3E9',1,'A05T')
          endif
          call ExecuteFunc("Func3592")
        else
          call RemoveLinkenBuff(SKE)
        endif
      endif
    endif
    if c>i then
      call RemoveUnit(d)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    else
      set g=GetAvailableGroup()
      set tt_unit1=SKE
      call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),600,Condition(function Func3588))
      call GroupRemoveUnit(g,SGE)
      set SGE=GroupPickRandomUnit(g)
      call KillGroup(g)
      if SGE==null then
        call RemoveUnit(d)
        call FlushChildHashtable(HY,(h))
        call CleanTrigger(t)
      else
        call SaveInteger(HY,h,720,10)
        call SaveInteger(HY,h,233,(c+1))
        call SaveUnitHandle(HY,h,17,(SGE))
        if c+1>60 then
          call UnitAddAbility2(d,'A3C9')
        endif
      endif
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  set D2O=null
  set g=null
  return false
endfunction

function Func3591 takes nothing returns nothing
  local timer tt=GetExpiredTimer()
  local integer ht=GetHandleId(tt)
  local unit SKE=LoadUnitHandle(HY,ht,0)
  local unit SGE=LoadUnitHandle(HY,ht,1)
  local integer QIE=LoadInteger(HY,ht,0)
  local integer c=10
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d
  local integer LCA=QIE
  if LoadInteger(HY,ht,1)=='A08H' then
    set c=100000
    set LCA=LCA+1
    call SaveBoolean(HY,h,5,true)
  endif
  call PlaySoundAtPos(sound022,GetUnitX(SGE),GetUnitY(SGE))
  set d=CreateUnit(GetOwningPlayer(SKE),'e009',GetUnitX(SKE),GetUnitY(SKE),0)
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,374,(d))
  call SaveInteger(HY,h,5,(QIE))
  call SaveInteger(HY,h,6,(LCA))
  call SaveInteger(HY,h,233,1)
  call SaveInteger(HY,h,12,(c))
  call SaveInteger(HY,h,720,0)
  call SaveBoolean(HY,h,0,LoadBoolean(HY,ht,0))
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func3590))
  call DestroyTimer(tt)
  call FlushChildHashtable(HY,ht)
  set SKE=null
  set SGE=null
  set tt=null
  set d=null
  set t=null
endfunction

function Func3592 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func3591)
  call LotusOrbFX(LoadUnitHandle(TempHash,'A3E9',0))
  call SaveUnitHandle(HY,h,0,LoadUnitHandle(TempHash,'A3E9',0))
  call SaveUnitHandle(HY,h,1,LoadUnitHandle(TempHash,'A3E9',1))
  call SaveInteger(HY,h,0,LoadInteger(TempHash,'A3E9',0))
  call SaveInteger(HY,h,1,LoadInteger(TempHash,'A3E9',1))
  call SaveBoolean(HY,h,0,true)
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3593 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func3591)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(GetTriggerUnit(),'A05T'))
  call SaveInteger(HY,h,1,GetSpellAbilityId())
endfunction

function Func3594 takes nothing returns nothing
  call AddToPurgeList('AIJ7','PRGE')
  call AddToPurgeList('A2U0','PRGA')
  call AddToPurgeList('A3I8','PRGA')
  call AddToPurgeList('B3I8','PRGA')
  call AddToPurgeList('A2U1','PRGE')
  call AddToPurgeList('B0GV','PRGE')
  call AddToPurgeList('A3SY','PRGE')
  call AddToPurgeList('a3SY','PRGE')
  call AddWrapper("Func4602",0)
endfunction

function Func3595 takes unit source,integer ZAE returns nothing
  local texttag VQO=CreateTextTag()
  call SetTextTagText(VQO,"+"+I2S(ZAE)+" "+GetObjectName('n0LQ'),0.03)
  call SetTextTagPosUnit(VQO,source,0)
  call SetTextTagColorBJ(VQO,50,75,255,15)
  call SetTextTagVelocity(VQO,0,0.035)
  call SetTextTagFadepoint(VQO,3)
  call SetTextTagLifespan(VQO,2.5)
  call SetTextTagPermanent(VQO,false)
  call SetTextTagVisibility(VQO,false)
  call SetTextTagVisibility(VQO,true)
  if IsUnitVisibleEx(source,LocalPlayer)or PlayerObserver then
    call SetTextTagVisibility(VQO,true)
  else
    call SetTextTagVisibility(VQO,false)
  endif
  set VQO=null
endfunction

function Func3596 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  local real LHA=LoadReal(HY,GetHandleId(t),0)
  call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+LHA)
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set u=null
  set t=null
endfunction

function Func3597 takes unit u,real LHA returns nothing
  local integer h=DelayedCallBack(0,function Func3596)
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,LHA)
endfunction

function Func3598 takes nothing returns nothing
  local unit LBO=GetTriggerUnit()
  local unit LCO=GetSpellTargetUnit()
  local integer ZAE=GetUnitAbilityLevel(LBO,'A053')
  local real result=GetUnitState(LCO,UNIT_STATE_LIFE)*(ZAE*0.2+0.1)
  call Func3597(LBO,result)
  call Func3595(LCO,R2I(result))
  set SacrificedByMotherFucker=true
  call DamageTarget(LBO,LCO,1,99999)
  call DamageTarget(LBO,LCO,2,99999)
  call DamageTarget(LBO,LCO,3,99999)
  set LBO=null
  set LCO=null
endfunction

function Func3599 takes nothing returns nothing
  if IsCourier(GetSpellTargetUnit())==false then
    call Func3598()
  endif
endfunction

function Func3600 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real sx=GetUnitX(u)
  local real sy=GetUnitY(u)
  local real a
  local real tx
  local real ty
  local integer QIE=GetUnitAbilityLevel(u,'A0X5')
  local real dmg
  local real FTX
  local unit SGE=null
  if GetSpellTargetUnit()!=null then
    set tx=GetUnitX(GetSpellTargetUnit())
    set ty=GetUnitY(GetSpellTargetUnit())
    set SGE=GetSpellTargetUnit()
  else
    set tx=GetSpellTargetX()
    set ty=GetSpellTargetY()
  endif
  set a=Atan2(ty-sy,tx-sx)
  set tx=sx+700*Cos(a)
  set ty=sy+700*Sin(a)
  set dmg=20+60*QIE
  set FTX=0.1+0.5*QIE
  call Func0854(u,null,dmg,FTX,0.5,sx,sy,tx,ty,160,null,true,1600)
  set u=null
  set SGE=null
endfunction

function Func3601 takes nothing returns nothing
  call AddToPurgeList('B00H','PRGE')
endfunction

function Func3602 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer QIE=LoadInteger(HY,h,0)
  local unit u
  local real dmg=LoadReal(HY,h,0)
  local boolean LMA=LoadBoolean(HY,h,0)
  local group g
  if LMA then
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),325,Condition(function Func0821))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",u,"origin"))
      call DamageTarget(SKE,u,1,dmg)
      call GroupRemoveUnit(g,u)
    endloop
    call KillGroup(g)
  else
    call DamageTarget(SKE,SGE,1,dmg)
  endif
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
  set SGE=null
  set SKE=null
endfunction

function Func3603 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local real dmg
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())
  local boolean LMA=GetSpellAbilityId()=='A09W'
  if LMA then
    set dmg=575+150*QIE
  else
    set dmg=475+125*QIE
  endif
  call TimerStart(t,.25,false,function Func3602)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveUnitHandle(HY,h,1,GetSpellTargetUnit())
  call SaveInteger(HY,h,0,QIE)
  call SaveReal(HY,h,0,dmg)
  call SaveBoolean(HY,h,0,LMA)
  set t=null
endfunction

function Func3604 takes nothing returns nothing
  if IsMagicImmune(GetSpellTargetUnit())then
    call Func0658('n0LR')
  endif
endfunction

function Func3605 takes nothing returns nothing
  call CustomSpeed(GetEnumUnit(),9999,650)
  call UnitAddAbility3(GetEnumUnit(),'A3IO',tt_int1)
endfunction

function Func3606 takes nothing returns nothing
  call CustomSpeed(GetEnumUnit(),0,0)
  call UnitRemoveAbility(GetEnumUnit(),'A3IO')
endfunction

function Func3607 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'Aloc')==0 and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0
endfunction

function Func3608 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LUA=(LoadUnitHandle(HY,h,14))
  local unit d=(LoadUnitHandle(HY,h,19))
  local group g
  local group gg
  local integer i
  local integer k
  local integer QIE=GetUnitAbilityLevel(LUA,'A093')+GetUnitAbilityLevel(LUA,'A34X')
  call SetUnitAbilityLevel(LUA,'A3IO',QIE)
  set g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(LUA),Condition(function Func3607))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or TimerGetElapsed(GlobalTimer)>LoadReal(HY,h,0)then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",LUA,"origin"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",LUA,"origin"))
    call UnitRemoveAbility(LUA,'A0ZC')
    call UnitRemoveAbility(LUA,'B00V')
    call GroupAddGroup(LoadGroupHandle(HY,h,0),g)
    call KillGroup(LoadGroupHandle(HY,h,0))
    call ForGroup(g,function Func3606)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
  else
    set i=CountUnitsInGroup(g)
    set k=CountUnitsInGroup(LoadGroupHandle(HY,h,0))
    if i<k then
      set gg=GetAvailableGroup()
      call GroupAddGroup(LoadGroupHandle(HY,h,0),gg)
      call GroupRemoveGroup(g,gg)
      call ForGroup(gg,function Func3606)
      call GroupRemoveGroup(gg,LoadGroupHandle(HY,h,0))
      call KillGroup(gg)
    elseif i>k then
      call GroupAddGroup(g,LoadGroupHandle(HY,h,0))
      set tt_int1=QIE
      call ForGroup(g,function Func3605)
    endif
  endif
  call KillGroup(g)
  set t=null
  set LUA=null
  set d=null
  return false
endfunction

function Func3609 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LUA=(LoadUnitHandle(HY,h,14))
  local unit d=(LoadUnitHandle(HY,h,19))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",LUA,"origin"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",LUA,"origin"))
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerRegisterDeathEvent(t,LUA)
  call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+18)
  call TriggerAddCondition(t,Condition(function Func3608))
  call SaveUnitHandle(HY,h,14,(LUA))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveGroupHandle(HY,h,0,GetAvailableGroup())
  set t=null
  set LUA=null
  set d=null
  return false
endfunction

function Func3610 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit LUA=GetTriggerUnit()
  local unit d=CreateUnit(GetOwningPlayer(LUA),'e01V',0,0,0)
  local real result=18
  call UnitAddAbility2(d,'A0ZC')
  call UnitApplyTimedLife(d,'BTLF',result)
  call Func0757(LUA,result,175)
  call TriggerRegisterTimerEvent(t,0.1,false)
  call TriggerAddCondition(t,Condition(function Func3609))
  call SaveUnitHandle(HY,h,14,(LUA))
  call SaveUnitHandle(HY,h,19,(d))
  set t=null
  set LUA=null
  set d=null
endfunction

function Func3611 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='U008' then
    call Func3610()
  endif
endfunction

function Func3612 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='E02X' then
    call Func3610()
  endif
endfunction

function Func3613 takes nothing returns boolean
  if Func0605(GetFilterUnit())and IsDead(GetFilterUnit())==false then
    call KillUnit(GetFilterUnit())
  endif
  return false
endfunction

function Func3614 takes nothing returns nothing
  local unit d=CreateUnit(GetTriggerPlayer(),'e00C',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
  local group g=GetAvailableGroup()
  call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function Func3613))
  call KillGroup(g)
  call UnitAddAbility(d,'A3LD')
  call SetUnitAbilityLevel(d,'A3LD',GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
  call IssueImmediateOrderByIdExFunc(d,852126)
  call UnitApplyTimedLife(d,'BTLF',60.00)
  call UnitAddAbility(d,'Aloc')
  set d=null
endfunction

function Func3615 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  if IsDead(u)then
    set u=LoadUnitHandle(HY,h,1)
  endif
  if GetUnitAbilityLevel(SGE,'A3NI')>0 then
    call DamageTarget(u,SGE,1,8)
  else
    call RemoveSavedHandle(HY,GetHandleId(SGE),'A3NH')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set u=null
  set SGE=null
  set t=null
endfunction

function Func3616 takes nothing returns nothing
  local unit u=CastedUnit
  local unit SGE=TriggeredUnit
  local trigger t
  local integer h
  if HaveSavedHandle(HY,GetHandleId(SGE),'A3NH')==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,GetHandleId(SGE),'A3NH',t)
    call SaveUnitHandle(HY,h,0,u)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveUnitHandle(HY,h,2,udg_Hero[GetPlayerId(GetOwningPlayer(u))])
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func3615))
  endif
  call UnitAddAbilityTimedExF(SGE,'A3NI',1,4.02,'a3NI')
  set u=null
  set SGE=null
  set t=null
endfunction

function Func3617 takes nothing returns nothing
  if Func0605(CastedUnit)and PRD_Get(CastedUnit,'A3NH',20)and GetUnitAbilityLevel(CastedUnit,'A3NH')==1 then
    call Func3616()
  endif
endfunction

function Func3618 takes nothing returns nothing
  call AddWrapper("Func3617",0)
  set boolean005=true
endfunction

function Func3619 takes nothing returns nothing
  local unit source=unit036
  local unit RCX=unit037
  local unit M_X=(LoadUnitHandle(HY,(GetHandleId(source)),219))
  call SaveUnitHandle(HY,(GetHandleId(source)),219,(M_X))
  call SetUnitOwner(M_X,GetOwningPlayer(RCX),true)
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func3620 takes nothing returns nothing
  local unit source=unit035
  local unit RCX=(LoadUnitHandle(HY,(GetHandleId(source)),219))
  if RCX!=null and GetUnitTypeId(RCX)=='e01V' then
    call RemoveUnit(RCX)
  endif
  set RCX=null
  set source=null
endfunction

function Func3621 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),19))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  if source!=null and GetUnitTypeId(source)=='e01V' then
    if IsDead(RCX)==false then
      call SetUnitX(source,GetUnitX(RCX))
      call SetUnitY(source,GetUnitY(RCX))
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3622 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local integer ZAE=GetUnitAbilityLevel(source,'A03E')
  local unit RCX
  local trigger RBX
  local integer QIE
  if ZAE==1 then
    set RCX=CreateUnit(GetOwningPlayer(source),'e01V',0,0,0)
    call UnitAddAbility2(RCX,'A0ZJ')
    call SaveUnitHandle(HY,(GetHandleId(source)),219,(RCX))
    set RBX=CreateTrigger()
    set QIE=GetHandleId(RBX)
    call TriggerAddCondition(RBX,Condition(function Func3621))
    call TriggerRegisterTimerEvent(RBX,0.2,true)
    call SaveUnitHandle(HY,(QIE),2,(source))
    call SaveUnitHandle(HY,(QIE),19,(RCX))
    set RBX=null
  else
    set RCX=(LoadUnitHandle(HY,(GetHandleId(source)),219))
  endif
  if ZAE==2 then
    call UnitRemoveAbility(RCX,'A0ZJ')
    call UnitAddAbility2(RCX,'A0ZI')
  elseif ZAE==3 then
    call UnitRemoveAbility(RCX,'A0ZJ')
    call UnitRemoveAbility(RCX,'A0ZI')
    call UnitAddAbility2(RCX,'A0ZH')
  elseif ZAE==4 then
    call UnitRemoveAbility(RCX,'A0ZJ')
    call UnitRemoveAbility(RCX,'A0ZI')
    call UnitRemoveAbility(RCX,'A0ZH')
    call UnitAddAbility2(RCX,'A0ZG')
  endif
  set source=null
  set RCX=null
endfunction

function Func3623 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit d
  local integer i=1
  local boolean UZX=IsSentinel(GetOwningPlayer(SKE))
  local player p
  local integer L3A
  local integer L4A
  local integer QIE=GetUnitAbilityLevel(SKE,'A0ZF')
  if QIE==1 then
    set L3A='A104'
    set L4A='A107'
  elseif QIE==2 then
    set L3A='A101'
    set L4A='A106'
  elseif QIE==3 then
    set L3A='A102'
    set L4A='A105'
  elseif QIE==4 then
    set L3A='A103'
    set L4A='A108'
  endif
  loop
    if UZX then
      set p=Sentinels[i]
    else
      set p=Scourges[i]
    endif
    call Func1033(GetOwningPlayer(SKE),p)
    set d=CreateUnit(p,'e01V',0,0,0)
    call UnitAddAbility2(d,L3A)
    call UnitAddAbility2(d,L4A)
    call UnitApplyTimedLife(d,'BTLF',10)
    set i=i+1
    exitwhen i>5
  endloop
  set SKE=null
  set d=null
  set p=null
endfunction

function Func3624 takes unit u returns nothing
  call UnitRemoveAbility(u,'A1OQ')
  call UnitRemoveAbility(u,'A1OR')
  call UnitRemoveAbility(u,'A1OS')
  call UnitRemoveAbility(u,'A1OT')
  call UnitRemoveAbility(u,'A1OU')
  call UnitRemoveAbility(u,'A1OV')
  call UnitRemoveAbility(u,'A1OW')
  call UnitRemoveAbility(u,'A1OX')
  call UnitRemoveAbility(u,'A1OY')
  call UnitRemoveAbility(u,'S00M')
  call UnitRemoveAbility(u,'A1OZ')
  call UnitRemoveAbility(u,'S00N')
  call UnitRemoveAbility(u,'A1P0')
  call UnitRemoveAbility(u,'A1P1')
  call UnitRemoveAbility(u,'A1P7')
  call UnitRemoveAbility(u,'A1PA')
  call UnitRemoveAbility(u,'A1P3')
  call UnitRemoveAbility(u,'A1P4')
  call UnitRemoveAbility(u,'A1P5')
  call UnitRemoveAbility(u,'A1P6')
  call UnitRemoveAbility(u,'A2AG')
  call UnitRemoveAbility(u,'A37J')
  call UnitRemoveAbility(u,'A37K')
endfunction

function Func3625 takes unit L7A,unit SGE returns nothing
  local integer NFX=GetUnitTypeId(SGE)
  local integer L3A=0
  local integer L4A=0
  if NFX=='n0HX' then
    set L3A='A1OQ'
  elseif NFX=='nomg' then
    set L3A='A1OR'
  elseif NFX=='nfpu' then
    set L3A='A1OS'
    set L4A='S00N'
  elseif NFX=='nstl' then
    set L3A='A1OT'
  elseif NFX=='nsat' then
    set L3A='A1OU'
  elseif NFX=='nsth' then
    set L3A='A1OV'
    set L4A='A1OW'
  elseif NFX=='n00S' then
    set L3A='A1OX'
    set L4A='A1OY'
  elseif NFX=='nkol' then
    set L3A='S00M'
  elseif NFX=='nfsh' then
    set L3A='A1OZ'
    set L4A='A2AG'
  elseif NFX=='ncnk' then
    set L3A='A1P0'
  elseif NFX=='ngns' then
    set L3A='A1P1'
  elseif NFX=='ngh1' then
    set L3A='A1P7'
    set L4A='A1PA'
  elseif NFX=='nowe' then
    set L3A='A1P3'
    set L4A='A1P4'
  elseif NFX=='ndtw' then
    set L3A='A1P5'
    set L4A='A1P6'
  elseif NFX=='nwlg' then
    set L3A='A1OY'
  elseif NFX=='n026' then
    set L3A='A37J'
    set L4A='A37K'
  elseif NFX=='n127' then
    set L3A='A37K'
  endif
  if L3A!=0 then
    call Func3624(L7A)
    call UnitAddAbility2(L7A,L3A)
  endif
  if L4A!=0 then
    call UnitAddAbility2(L7A,L4A)
  endif
endfunction

function Func3626 takes real result returns string
  local string r="|c00ff0303"
  local string l="||"
  local string s=" "
  local string c=r+l+"|r"
  local string R5E
  if result>85 then
    set R5E=c+s+c+s+c+s+c+s+c+s+c+s+c
  elseif result>70 then
    set R5E=c+s+c+s+c+s+c+s+c+s+c+s+l
  elseif result>55 then
    set R5E=c+s+c+s+c+s+c+s+c+s+l+s+l
  elseif result>40 then
    set R5E=c+s+c+s+c+s+c+s+l+s+l+s+l
  elseif result>25 then
    set R5E=c+s+c+s+c+s+l+s+l+s+l+s+l
  elseif result>10 then
    set R5E=c+s+c+s+l+s+l+s+l+s+l+s+l
  elseif result>0 then
    set R5E=c+s+l+s+l+s+l+s+l+s+l+s+l
  else
    set R5E=l+s+l+s+l+s+l+s+l+s+l+s+l
  endif
  return R5E
endfunction

function Func3627 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),230))
  local real result=(LoadReal(HY,(ZAE),232))
  local texttag VQO=(LoadTextTagHandle(HY,(ZAE),231))
  local integer ZCE=GetTriggerEvalCount(RBX)
  local real ZEE=Func0468(result-ZCE,0)
  local boolean ZSE=true
  call SetTextTagText(VQO,Func3626(100*ZEE/result),0.018)
  call SetTextTagPosUnit(VQO,source,0)
  if IsUnitVisibleEx(source,LocalPlayer)==false and PlayerObserver==false then
    set ZSE=false
  endif
  call SetTextTagVisibility(VQO,ZSE)
  if ZEE==0 then
    call ImitateBountyGain(GetOwningPlayer(source),source,25*QIE,false)
  endif
  if ZEE==0 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A10R',true)
    call UnitRemoveAbility(source,'A10S')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call DestroyTextTag(VQO)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3628 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A10R')
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real hp=GetUnitState(SGE,UNIT_STATE_LIFE)
  local integer IWO=GetUnitTypeId(SGE)
  local texttag tt=CreateTextTag()
  local boolean b=true
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',0,0,0)
  call Func0702("SPLK",GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE),0.1,0.1,0.2,.9,0.5)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",GetUnitX(SGE),GetUnitY(SGE)))
  if Func0590(SKE)==false then
    set b=false
  endif
  if GetUnitTypeId(SKE)=='UC42'then
    call Func3625(SKE,SGE)
  endif
  call SetTextTagText(tt,Func3626(100),0.018)
  call SetTextTagPosUnit(tt,SKE,0)
  call SetTextTagVisibility(tt,b)
  call SetTextTagPermanent(tt,true)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A10R',false)
  call UnitAddAbility2(SKE,'A10S')
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveTextTagHandle(HY,h,231,(tt))
  call SaveInteger(HY,h,230,(IWO))
  call SaveInteger(HY,h,5,(QIE))
  call SaveReal(HY,h,232,((hp)*1.0))
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerAddCondition(t,Condition(function Func3627))
  if IsUnitType(SGE,UNIT_TYPE_SUMMONED)==false then
    call UnitRemoveBuffs(SGE,true,true)
  endif
  call UnitRemoveAbility(SGE,'Aetl')
  call DamageTarget(d,SGE,2,100000000)
  call ShowUnit(SGE,false)
  set t=null
  set d=null
  set SKE=null
  set SGE=null
endfunction

function Func3629 takes nothing returns boolean
  return AliveNonBuildOrMarker(GetFilterUnit())and GetUnitAbilityLevel(GetFilterUnit(),'B04J')==1
endfunction

function Func3630 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local unit u
  local group g
  local timer tt=LoadTimerHandle(HY,h,1)
  local integer c=LoadInteger(HY,h,0)
  local integer QIE
  local real dmg
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c<=0 then
    call RemoveSavedHandle(HY,GetHandleId(SKE),'A1OP')
    call UnitRemoveAbility(SKE,'A1OJ')
    call UnitRemoveAbility(SKE,'B04J')
    call PauseTimer(tt)
    call DestroyTimer(tt)
    call CleanTrigger(t)
  else
    set QIE=LoadInteger(HY,h,5)
    set dmg=10*QIE
    if LoadBoolean(HY,h,0)then
      set g=GetAvailableGroup()
      set tt_unit1=SKE
      call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),925,Condition(function DefaultEnemyFilterWithAncientNonImmune))
      loop
        set u=FirstOfGroup(g)
        exitwhen u==null
        call DamageTarget(SKE,u,1,dmg)
        call GroupRemoveUnit(g,u)
      endloop
      call KillGroup(g)
      call SaveInteger(HY,h,0,c-1)
      call RemoveSavedBoolean(HY,h,0)
    else
      call TimerStart(tt,1.,true,null)
    endif
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(SKE),Condition(function Func3629))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call GroupRemoveUnit(g,u)
      call UnitAddAbilityTimedExF(u,'A3RB'-1+QIE,1,1.,0)
    endloop
    call KillGroup(g)
  endif
  set t=null
  set tt=null
  set SKE=null
endfunction

function Func3631 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer hu=GetHandleId(SKE)
  local trigger t
  local integer h
  local timer tt
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  if HaveSavedHandle(HY,hu,'A1OP')then
    set t=LoadTriggerHandle(HY,hu,'A1OP')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,1)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    call SaveTriggerHandle(HY,hu,'A1OP',t)
    call SaveUnitHandle(HY,h,0,SKE)
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,1,tt)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterDeathEvent(t,SKE)
    call TriggerAddCondition(t,Condition(function Func3630))
  endif
  call SaveInteger(HY,h,5,QIE)
  call SaveInteger(HY,h,0,8+2*QIE)
  call SaveBoolean(HY,h,0,true)
  call TimerStart(tt,0,false,null)
  call UnitAddAbility2(SKE,'A1OJ')
  set t=null
  set tt=null
  set SKE=null
endfunction

function Func3632 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit L7A=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  if GetUnitAbilityLevel(SGE,'A32S')==0 or IsDead(SGE)then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    call DamageTarget(L7A,SGE,7,LoadReal(HY,h,0))
    if LoadBoolean(HY,h,0)then
      call RemoveSavedBoolean(HY,h,0)
      call TimerStart(t,1,true,function Func3632)
    endif
  endif
  set L7A=null
  set SGE=null
  set t=null
endfunction

function Func3633 takes unit u,unit SGE,real dmg returns nothing
  local integer h=DelayedCallBack(0,function Func3632)
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,h,1,SGE)
  call SaveReal(HY,h,0,dmg)
  call SaveBoolean(HY,h,0,true)
endfunction

function Func3634 takes nothing returns nothing
  local unit L7A=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  call PurgingTriggered(SGE,true)
  if GetUnitAbilityLevel(SGE,'A32S')==0 then
    call Func3633(L7A,SGE,GetUnitAbilityLevel(L7A,'A0MU')*15.+5.)
  endif
  call UnitAddAbilityTimedExF(SGE,'A32S',1,15,'B32S')
  call Func2306(SGE,'A32S',15)
  if Func0449(SGE)then
    call IssueImmediateOrderByIdExFunc(SGE,851972)
  endif
  set L7A=null
  set SGE=null
endfunction

function DoomUltiTargetFilter takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetOrderTargetUnit()
  if IsUnitType(SGE,UNIT_TYPE_ANCIENT)and IsUnitSpiritBear(SGE)==false then
    call InterruptUnitError(SKE,'n0K9')
  endif
  set SKE=null
  set SGE=null
endfunction

function Func3636 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local integer c=LoadInteger(HY,ZAE,0)+1
  if DistanceBetweenUnits(source,RCX)>900 or IsDead(source)then
    set QIE=QIE+1
    call SaveInteger(HY,(ZAE),34,(QIE))
  endif
  call SaveInteger(HY,(ZAE),0,c)
  call Break_Main(RCX,0.11)
  if ModuloInteger(c,10)==1 then
    call DamageTarget(source,RCX,7,LoadReal(HY,ZAE,5))
  endif
  if QIE>160 then
    call UnitRemoveAbility(RCX,'A32S')
    call UnitRemoveAbility(RCX,'B32S')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetUnitAbilityLevel(RCX,'A32S')==0 and c>5 then
    call FlushChildHashtable(HY,(ZAE))
    call UnitRemoveAbility(RCX,'B32S')
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3637 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call PurgingTriggered(SGE,true)
  if GetUnitAbilityLevel(SGE,'A32S')==0 then
    call UnitAddAbilityTimedExF(SGE,'A32S',1,999,'B32S')
    call Func2306(SGE,'A32S',999)
    call SaveReal(HY,h,5,5+15*GetUnitAbilityLevel(u,'A0A2'))
  endif
  if Func0449(SGE)then
    call IssueImmediateOrderByIdExFunc(SGE,851972)
  endif
  call Break_Main(SGE,0.11)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func3636))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,34,0)
  call SaveInteger(HY,h,0,0)
  set u=null
  set SGE=null
  set t=null
endfunction

function Func3638 takes nothing returns nothing
  call Func2339("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl",1200.,180.,200.,160,900.)
endfunction

function Func3639 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer QIE
  if GetUnitAbilityLevel(SGE,'A3Q7')==0 then
    call RemoveSavedHandle(HY,LoadInteger(HY,h,10),'A3Q6')
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    call DamageTarget(u,SGE,1,20.+5.*LoadInteger(HY,h,5)+GetUnitState(SGE,UNIT_STATE_MAX_LIFE)*(0.0125*LoadInteger(HY,h,5)))
  endif
  set SGE=null
  set t=null
  set u=null
endfunction

function Func3640 takes unit SKE,unit SGE returns nothing
  local timer t
  local integer h
  if SGE==Roshan then
    return
  endif
  if HaveSavedHandle(HY,GetHandleId(SGE),'A3Q6')then
    set t=LoadTimerHandle(HY,GetHandleId(SGE),'A3Q6')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,GetHandleId(SGE),'A3Q6',t)
    call SaveInteger(HY,h,10,GetHandleId(SGE))
    call TimerStart(t,1,true,function Func3639)
  endif
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",SGE,"origin"))
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(SKE,'A3Q6'))
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveUnitHandle(HY,h,1,SGE)
  call UnitAddAbilityTimedExF(SGE,'A3Q7',1,4.01,'a3Q7')
  call Func0424(SKE,'A3Q6')
  set t=null
endfunction

function Func3641 takes nothing returns boolean
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit u
  local boolean MCA=LoadBoolean(HY,h,0)
  local integer a
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if LoadUnitHandle(HY,h,2)==GetEventDamageSource()and IsFakeDamage==0 then
      set a=GetUnitAbility(GetEventDamageSource(),'A3Q6')
      if a>0 and(MCA or(IsAbilityOnCooldown(a)and IsFlagBitSet(Memory[a/4+0x20/4],0x400000)))then
        call RemoveSavedHandle(HY,GetHandleId(LoadUnitHandle(HY,h,2))+'A3Q6',GetHandleId(GetTriggerUnit()))
        call DestroyTimer(LoadTimerHandle(HY,h,0))
        call FlushChildHashtable(HY,(h))
        call CleanTrigger(GetTriggeringTrigger())
        call Func3640(GetEventDamageSource(),GetTriggerUnit())
      endif
    endif
  else
    call RemoveSavedHandle(HY,GetHandleId(LoadUnitHandle(HY,h,2))+'A3Q6',GetHandleId(LoadUnitHandle(HY,h,3)))
    call DestroyTimer(LoadTimerHandle(HY,h,0))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func3642 takes unit SKE,unit SGE,boolean MCA returns nothing
  local trigger t
  local integer h
  local timer tt
  if HaveSavedHandle(HY,GetHandleId(SKE)+'A3Q6',GetHandleId(SGE))then
    set h=GetHandleId(LoadTriggerHandle(HY,GetHandleId(SKE)+'A3Q6',GetHandleId(SGE)))
    set tt=LoadTimerHandle(HY,h,0)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call TriggerRegisterTimerExpireEvent(t,tt)
    call SaveTimerHandle(HY,h,0,tt)
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
    call SaveUnitHandle(HY,h,2,SKE)
    call TriggerAddCondition(t,Condition(function Func3641))
    call SaveTriggerHandle(HY,GetHandleId(SKE)+'A3Q6',GetHandleId(SGE),t)
  endif
  call SaveBoolean(HY,h,0,MCA)
  call SaveUnitHandle(HY,h,3,SGE)
  call TimerStart(tt,4,false,null)
  set tt=null
  set t=null
endfunction

function Func3643 takes nothing returns boolean
  local unit u
  local integer h=GetHandleId(GetTriggeringTrigger())
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    set u=GetAttacker()
    if u==LoadUnitHandle(HY,h,14)and GetUnitAbilityLevel(u,'A3Q6')>0 and LoadBoolean(HY,h,263)then
      if GetUnitCurrentOrder(u)==0 then
        call Func0656(u)
        call IssueTargetOrder(u,"attack",GetTriggerUnit())
      endif
      if AliveNonBuildOrMarker(GetTriggerUnit())then
        call Func3642(u,GetTriggerUnit(),false)
      endif
    endif
    set u=null
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
    if(GetIssuedOrderId()==OrderId("poisonarrows"))then
      call SaveBoolean(HY,(h),263,(true))
    elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
      call SaveBoolean(HY,(h),263,(false))
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A3Q6' then
    call Func3642(GetTriggerUnit(),GetSpellTargetUnit(),true)
  endif
  return false
endfunction

function Func3644 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerAddCondition(t,Condition(function Func3643))
  call SaveUnitHandle(HY,GetHandleId(t),14,GetTriggerUnit())
  call SaveTimerHandle(HY,GetHandleId(GetTriggerUnit()),'a3Q6',CreateTimer())
  set t=null
endfunction

function Func3645 takes nothing returns nothing
  call AddToPurgeList('A3Q7','PRGE')
  call AddToPurgeList('a3Q7','PRGE')
endfunction

function Func3646 takes nothing returns boolean
  local real result
  local real ZEE
  if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and(GetFilterUnit()!=Roshan)then
    set result=real097+GetRandomReal(20,70)*Cos(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
    set ZEE=real098+GetRandomReal(20,70)*Sin(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
    call SetUnitPosition(GetFilterUnit(),result,ZEE)
  endif
  return false
endfunction

function Func3647 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local group g=GetAvailableGroup()
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  local integer ZAE=GetUnitAbilityLevel(source,'A29L')
  set real097=GetUnitX(source)+100*Cos(GetUnitFacing(source)*bj_DEGTORAD)
  set real098=GetUnitY(source)+100*Sin(GetUnitFacing(source)*bj_DEGTORAD)
  call GroupEnumUnitsInRange(g,result,ZEE,434,Condition(function Func3646))
  call KillGroup(g)
  call UnitAddAbility2(RCX,'A06F')
  call SetUnitAbilityLevel(RCX,'A06F',ZAE)
  call IssueImmediateOrderByIdExFunc(RCX,852127)
  set source=null
  set RCX=null
  set g=null
endfunction

function Func3648 takes nothing returns nothing
  local trigger t
  local integer h
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A037')
  local integer id
  local integer Y0I
  local integer UYE
  if QIE==1 then
    set id='A1Q0'
    set Y0I='A1PZ'
    set UYE='A3IP'
  elseif QIE==2 then
    set id='A1Q1'
    set Y0I='A1PI'
    set UYE='A3IQ'
  elseif QIE==3 then
    set id='A1Q2'
    set Y0I='A1PY'
    set UYE='A3IR'
  elseif QIE==4 then
    set id='A1Q3'
    set Y0I='A1PX'
    set UYE='A3IS'
  endif
  call FuckingAssistBuffWrap(SKE,SGE)
  call UnitAddAbilityTimedExF(SGE,id,1,40,'B00U')
  call UnitMakeAbilityPermanent(SGE,true,Y0I)
  call UnitMakeAbilityPermanent(SGE,true,UYE)
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3649 takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and GetUnitAbilityLevel(GetFilterUnit(),'A1Q0')==0 and GetUnitAbilityLevel(GetFilterUnit(),'A1Q1')==0 and GetUnitAbilityLevel(GetFilterUnit(),'A1Q2')==0 and GetUnitAbilityLevel(GetFilterUnit(),'A1Q3')==0
endfunction

function Func3650 takes nothing returns nothing
  call UnitAddAbility2(GetEnumUnit(),'A3NJ'-1+integer531)
  call UnitAddAbility2(GetEnumUnit(),'A3NN'-1+integer531)
endfunction

function Func3651 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'A3NJ')
  call UnitRemoveAbility(GetEnumUnit(),'A3NK')
  call UnitRemoveAbility(GetEnumUnit(),'A3NL')
  call UnitRemoveAbility(GetEnumUnit(),'A3NM')
  call UnitRemoveAbility(GetEnumUnit(),'A3NN')
  call UnitRemoveAbility(GetEnumUnit(),'A3NO')
  call UnitRemoveAbility(GetEnumUnit(),'A3NP')
  call UnitRemoveAbility(GetEnumUnit(),'A3NQ')
endfunction

function Func3652 takes nothing returns boolean
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,0))
  local group g=(LoadGroupHandle(HY,h,340))
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local group gg=GetAvailableGroup()
  if u==null then
    call FlushChildHashtable(HY,(h))
    call DestroyTimer(t)
    call ForGroup(g,function Func3651)
    call KillGroup(g)
    call KillGroup(gg)
    return false
  endif
  set tt_unit1=u
  set integer531=GetUnitAbilityLevel(u,'A037')
  if IsDead(u)==false then
    set tt_unit1=u
    call GroupEnumUnitsInRange(gg,x,y,925,Condition(function Func3649))
  endif
  call GroupRemoveGroup(gg,g)
  call ForGroup(g,function Func3651)
  if IsDead(u)==false then
    call ForGroup(gg,function Func3650)
  endif
  call SaveGroupHandle(HY,h,340,(gg))
  call KillGroup(g)
  set t=null
  set u=null
  set g=null
  set gg=null
  return false
endfunction

function Func3653 takes unit u returns nothing
  local timer t
  local integer h
  if HaveSavedHandle(HY,GetHandleId(u),'A037')==false then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,GetHandleId(u),'A037',t)
    call SaveUnitHandle(HY,h,0,u)
    call TimerStart(t,0.5,true,function Func3652)
    call SaveGroupHandle(HY,h,340,GetAvailableGroup())
    set t=null
  endif
endfunction

function Func3654 takes nothing returns nothing
  call Func3653(GetTriggerUnit())
endfunction

function Func3655 takes nothing returns nothing
  call Func3653(tt_unit1)
endfunction

function Func3656 takes nothing returns nothing
  call HideAbility('A1Q0')
  call HideAbility('A1Q1')
  call HideAbility('A1Q2')
  call HideAbility('A1Q3')
  call AddToPurgeList('A1Q0','PRGA')
  call AddToPurgeList('A1Q1','PRGA')
  call AddToPurgeList('A1Q2','PRGA')
  call AddToPurgeList('A1Q3','PRGA')
  call AddToPurgeList('B00U','PRGA')
  call AddToPurgeList('A1Q5','PRGE')
  call AddToPurgeList('B0CX','PRGE')
endfunction

function Func3657 takes unit source,unit RCX,integer ZAE returns nothing
  call UnitAddAbilityTimedExF(RCX,'A3NR'-1+ZAE,1,2.25+0.25*ZAE,'B0CX')
  call SetUnitPathing2(RCX,true)
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",RCX,"chest"))
  call DamageTarget(source,RCX,1,70*ZAE)
endfunction

function Func3658 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and GetFilterUnit()!=Roshan
endfunction

function Func3659 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real a=(LoadReal(HY,h,13))
  local real sx=(LoadReal(HY,h,6))
  local real sy=(LoadReal(HY,h,7))
  local real x=Func0664(sx+19*Cos(a))
  local real y=Func0666(sy+19*Sin(a))
  local real tx=Func0664(sx+80*Cos(a))
  local real ty=Func0666(sy+80*Sin(a))
  local group g=GetAvailableGroup()
  local integer MTA=(LoadInteger(HY,h,12))
  local location XOX
  local group D9X=LoadGroupHandle(HY,h,5)
  local integer c=GetTriggerEvalCount(t)
  local boolean B5A=GetTriggerEventId()==EVENT_WIDGET_DEATH or c>MTA or Func0789(SKE)
  if B5A==false then
    call SetUnitPosition(SKE,x,y)
    call SetUnitFacing(SKE,a*bj_RADTODEG)
    call SaveReal(HY,h,6,x)
    call SaveReal(HY,h,7,y)
    if ModuloInteger(c,4)==0 then
      call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))
    endif
    if c==2 then
      call SetUnitAnimationByIndex(SKE,3)
    endif
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(g,x,y,150,Condition(function Func3658))
    call GroupRemoveGroup(g,D9X)
    if FirstOfGroup(g)!=null then
      call GroupAddGroup(g,D9X)
    endif
  else
    call Func0436(SKE)
  endif
  call GroupAddGroup(D9X,g)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if B5A==false then
      if LoadInteger(HY,GetHandleId(u),4404)!=1 then
        call SetUnitPathing2(u,false)
        call AddTimedKeyToAgent(u,4404,2)
        call Func0433(u)
      endif
      if Func0789(u)then
        call GroupRemoveUnit(D9X,u)
      else
        call SetUnitPosition(u,tx,ty)
      endif
    else
      call CurrentSafestLocationWrapper(u)
      call Func3657(SKE,u,LoadInteger(HY,h,5))
      call KillTrees(GetUnitX(u),GetUnitY(u),300)
      call IssueTargetOrder(SKE,"attack",u)
    endif
    call GroupRemoveUnit(g,u)
  endloop
  if B5A then
    call DestroyEffect(LoadEffectHandle(HY,h,175))
    call SetUnitAnimationByIndex(SKE,0)
    call SetUnitTimeScale(SKE,1.0)
    call SetUnitPathing2(SKE,true)
    call KillTrees(x,y,375)
    call KillGroup(D9X)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if ModuloInteger(c,3)==0 then
      call KillTrees(x,y,200)
    endif
  endif
  call KillGroup(g)
  set t=null
  set XOX=null
  set SKE=null
  return false
endfunction

function Func3660 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real tx=Func0664(GetSpellTargetX())
  local real ty=Func0666(GetSpellTargetY())
  local unit u=GetTriggerUnit()
  local real cx=GetUnitX(u)
  local real cy=GetUnitY(u)
  local integer QIE=GetUnitAbilityLevel(u,'A1RD')
  local real a= AngleBetweenXY(cx,cy,tx,ty)*bj_DEGTORAD
  local real ILX=800+100*QIE+25
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    set ILX=ILX+200.
  endif
  if DistanceBetweenXY(cx,cy,tx,ty)>ILX then
    set tx=Func0664(cx+ILX*Cos(a))
    set ty=Func0666(cy+ILX*Sin(a))
  endif
  call Func0433(u)
  call SetUnitPathing2(u,false)
  call SetUnitAnimationByIndex(u,3)
  call SetUnitTimeScale(u,1.5)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3659))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveInteger(HY,h,5,(QIE))
  call SaveGroupHandle(HY,h,5,GetAvailableGroup())
  call SaveReal(HY,h,47,tx)
  call SaveReal(HY,h,48,ty)
  call SaveReal(HY,h,6,cx)
  call SaveReal(HY,h,7,cy)
  call SaveReal(HY,h,13,((Atan2(ty-cy,tx-cx))*1.0))
  call SaveInteger(HY,h,12,(R2I(DistanceBetweenXY(cx,cy,tx,ty)/19.0)))
  call SaveEffectHandle(HY,h,175,(AddSpecialEffectTarget("war3mapImported\\SkewerTuskGlow_1.mdx",u,"head")))
  set t=null
  set u=null
endfunction

function Func3661 takes nothing returns nothing
  call SetUnitAnimationByIndex(GetTriggerUnit(),7)
endfunction

function Func3662 takes nothing returns boolean
  local real result
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(unit225))and IsUnitInGroup(GetFilterUnit(),group034)==false and Func0804(GetFilterUnit(),GetOwningPlayer(unit226))then
    set result=DistanceBetweenXY(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),GetUnitX(unit225),GetUnitY(unit225))
    if result<real099 then
      set unit224=GetFilterUnit()
      set real099=result
    endif
  endif
  return false
endfunction

function Func3663 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit MYA=(LoadUnitHandle(HY,h,19))
  local integer QIE=(LoadInteger(HY,h,5))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local group g=(LoadGroupHandle(HY,h,187))
  local real MZA=(LoadReal(HY,h,222))
  local real M_A=(LoadReal(HY,h,224))
  local real M0A
  local group gg
  local real a
  local real x
  local real y
  local integer ZCE
  set a=Atan2(GetUnitY(SGE)-GetUnitY(MYA),GetUnitX(SGE)-GetUnitX(MYA))
  set x=GetUnitX(MYA)+16*Cos(a)
  set y=GetUnitY(MYA)+16*Sin(a)
  call SetUnitX(MYA,x)
  call SetUnitY(MYA,y)
  if DistanceBetweenXY(x,y,GetUnitX(SGE),GetUnitY(SGE))<20 then
    call SetUnitX(MYA,GetUnitX(SGE))
    call SetUnitY(MYA,GetUnitY(SGE))
    if SKE==SGE then
      call SetUnitState(SKE,UNIT_STATE_MANA,GetUnitState(SKE,UNIT_STATE_MANA)+MZA)
      call KillUnit(MYA)
      call KillGroup(g)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    else
      if(Func0592(SGE)==false or IsUnitVisibleEx(SGE,GetOwningPlayer(MYA)))and IsUnitHidden(SGE)==false and IsUnitInvulnerable(SGE)==false then
        if IsBlocked(SGE)==false then
          if(GetUnitAbilityLevel(SGE,'A2TL')>0)then
            call DamageTarget(SKE,SGE,3,(40+40*QIE)+0.35*M_A*(40+40*QIE))
          else
            call DamageTarget(SKE,SGE,1,(40+40*QIE)+0.35*M_A*(40+40*QIE))
          endif
          set M_A=M_A+1
          if GetUnitState(SGE,UNIT_STATE_MANA)>0 then
            set M0A=RMinBJ(GetUnitState(SGE,UNIT_STATE_MANA),(0.08+0.03*QIE)*GetUnitState(SGE,UNIT_STATE_MAX_MANA))
            call SetUnitState(SGE,UNIT_STATE_MANA,GetUnitState(SGE,UNIT_STATE_MANA)-M0A)
            call PlaySoundAtPos(sound036,GetUnitX(SGE),GetUnitY(SGE))
            set MZA=MZA+M0A
          endif
        else
          call RemoveLinkenBuff(SGE)
        endif
      endif
      call SaveReal(HY,h,222,((MZA)*1.0))
      call SaveReal(HY,h,224,((M_A)*1.0))
      set gg=GetAvailableGroup()
      set unit224=null
      set unit225=SGE
      set group034=g
      set real099=99999
      set unit226=SKE
      call GroupEnumUnitsInRange(gg,GetUnitX(SGE),GetUnitY(SGE),500,Condition(function Func3662))
      call KillGroup(gg)
      if unit224==null or M_A==(2+QIE)then
        call SaveUnitHandle(HY,h,30,SKE)
      else
        call SaveUnitHandle(HY,h,30,unit224)
        call GroupAddUnit(g,unit224)
      endif
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  set gg=null
  set MYA=null
  return false
endfunction

function Func3664 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local integer ZAE=GetUnitAbilityLevel(source,'A0G2')
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  local group g=GetAvailableGroup()
  local real result=0
  local real ZEE=0
  local real ZWE=0
  local real ZYE=0
  local unit M_X=CreateUnit(GetOwningPlayer(source),'h090',GetUnitX(source),GetUnitY(source),GetUnitFacing(source))
  if GetUnitTypeId(source)=='e00E' then
    set source=LoadUnitHandle(HY,GetHandleId(source),0)
  endif
  call PlaySoundAtPos(sound035,GetUnitX(source),GetUnitY(source))
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func3663))
  call SaveGroupHandle(HY,(QIE),187,(g))
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveUnitHandle(HY,(QIE),19,(M_X))
  call SaveInteger(HY,(QIE),5,(ZAE))
  call SaveUnitHandle(HY,(QIE),30,RCX)
  call SaveInteger(HY,(QIE),34,0)
  call SaveReal(HY,(QIE),222,((ZYE)*1.0))
  call SaveReal(HY,(QIE),224,((result)*1.0))
  call SaveReal(HY,(QIE),223,((ZEE)*1.0))
  call GroupAddUnit(g,RCX)
  set source=null
  set RCX=null
  set RBX=null
  set M_X=null
  set g=null
endfunction

function Func3665 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call UnitRemoveAbility(LoadUnitHandle(HY,h,0),'a1C0')
  call DelayedCallBackClean()
endfunction

function Func3666 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  if GetUnitAbilityLevel(u,'A1ET')==0 then
    call UnitAddAbility3(u,'A2WN',GetUnitAbilityLevel(u,GetSpellAbilityId()))
    call UnitAddAbility2(u,'A1ET')
  else
    call UnitRemoveAbility(u,'A1ET')
    call UnitRemoveAbility(u,'A2WN')
  endif
  call SaveUnitHandle(HY,DelayedCallBack(0,function Func3665),0,u)
  set u=null
endfunction

function Func3667 takes nothing returns nothing
  local unit source=GetEnumUnit()
  call SaveReal(HY,(GetHandleId(source)),799,(0*1.0))
  set source=null
endfunction

function Func3668 takes nothing returns nothing
  local unit source=GetEnumUnit()
  call UnitRemoveAbility(source,'A2S3')
  call UnitRemoveAbility(source,'B0BQ')
  call SetUnitTurnSpeed(source,GetUnitDefaultTurnSpeed(source))
  set source=null
endfunction

function Func3669 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=GetUnitAbilityLevel(source,'A1AT')
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if IsFakeDamage==0 or FakeDamageType[IsFakeDamage]==2 then
      call DisableTrigger(RBX)
      call DamageTarget(GetEventDamageSource(),RCX,7,GetEventDamage()*0.5)
      call EnableTrigger(RBX)
      if IsDead(RCX)then
        call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
        call FlushChildHashtable(HY,(ZAE))
        call CleanTrigger(RBX)
        call UnitRemoveAbility(RCX,'A2S5')
        call UnitRemoveAbility(RCX,'A2TL')
      endif
    endif
  else
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call UnitRemoveAbility(RCX,'A2S5')
    call UnitRemoveAbility(RCX,'A2TL')
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3670 takes unit source,unit RCX returns nothing
  local trigger RBX
  local integer ZAE
  local unit M_X
  if IsUnitIllusion(RCX)then
    call KillUnit(RCX)
    return
  endif
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  set M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
  call UnitAddAbility(M_X,'A2S4')
  call IssueTargetOrder(M_X,"thunderbolt",RCX)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(RBX,3,false)
  call TriggerAddCondition(RBX,Condition(function Func3669))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",RCX,"chest")))
  call UnitAddAbility2(RCX,'A2S5')
  call UnitAddAbility2(RCX,'A2TL')
  call SetPlayerAbilityAvailable(GetOwningPlayer(RCX),'A2S5',false)
  set RBX=null
  set M_X=null
endfunction

function Func3671 takes nothing returns nothing
  local unit source=GetEnumUnit()
  if GetUnitAbilityLevel(source,'A2S3')==0 then
    call UnitAddAbility2(source,'A2S3')
    call SetUnitTurnSpeed(source,GetUnitDefaultTurnSpeed(source)*0.5)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",source,"origin"))
  endif
  if ModuloReal(LoadReal(HY,GetHandleId(source),799),0.3)==0 then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamMissile\\SteamMissile.mdl",source,"origin"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamMissile\\SteamMissile.mdl",source,"head"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamMissile\\SteamMissile.mdl",source,"chest"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamMissile\\SteamMissile.mdl",source,"mount"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",source,"origin"))
  endif
  if(LoadReal(HY,(GetHandleId(source)),799))==2.0 then
    call Func3670(unit227,source)
  endif
  call SaveReal(HY,(GetHandleId(source)),799,(((LoadReal(HY,(GetHandleId(source)),799))+0.02)*1.0))
  set source=null
endfunction

function Func3672 takes unit source,unit RCX returns boolean
  local real result=AngleBetweenUnits(RCX,source)
  local real ZEE=GetUnitFacing(RCX)
  local real ZWE
  local real ZYE
  local real ICX=-1.0
  local real N1X=-1.0
  local real N2X
  local real N3X
  local real N4X=-1.0
  local real N5X=-1.0
  set ZWE=RMaxBJ(ZEE-85,0)
  set ZYE=ZEE
  if ZEE-85<=0 then
    set ICX=360-(85-(ZYE-ZWE))
    set N1X=360
  endif
  set N2X=ZEE
  set N3X=RMinBJ(ZEE+85,360)
  if ZEE+85>=360 then
    set N4X=0
    set N5X=0+(85-(N3X-N2X))
  endif
  if result<0 then
    set result=result+360
  elseif result>360 then
    set result=result-360
  endif
  if(result>ZWE and result<ZYE)or(ICX!=-1 and result>ICX and result<N1X)or(result>N2X and result<N3X)or(N4X!=-1 and result>N4X and result<N5X)then
    return true
  endif
  return false
endfunction

function Func3673 takes nothing returns boolean
  return(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false))and Func3672(tt_unit1,GetFilterUnit())
endfunction

function Func3674 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(source,'A1AT')
  local group g=GetAvailableGroup()
  local group IBI=GetAvailableGroup()
  local group HFI=(LoadGroupHandle(HY,(ZAE),187))
  set unit227=source
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1025,Condition(function Func3673))
  call ForGroup(g,function Func3671)
  call GroupAddGroup(g,HFI)
  call GroupAddGroup(HFI,IBI)
  call GroupRemoveGroup(g,IBI)
  call KillGroup(g)
  call KillGroup(IBI)
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  if GetTriggerEvalCount(RBX)>R2I(6./0.02)or IsDead(source)then
    call CleanTrigger(RBX)
    call FlushChildHashtable(HY,(ZAE))
    call ForGroup(HFI,function Func3668)
    call ForGroup(HFI,function Func3667)
    call KillGroup(HFI)
  else
    call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",source,"chest")))
  endif
  set source=null
  set g=null
  set IBI=null
  set HFI=null
  set RBX=null
  return false
endfunction

function Func3675 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func3674))
  call SaveUnitHandle(HY,(ZAE),2,(GetTriggerUnit()))
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",GetTriggerUnit(),"chest")))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SorceressMissile\\SorceressMissile.mdl",GetTriggerUnit(),"head"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ProcMissile\\ProcMissile.mdl",GetTriggerUnit(),"head"))
  call PlaySoundAtPos(sound050,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call TriggerEvaluate(RBX)
  set RBX=null
endfunction

function Func3676 takes nothing returns nothing
  call HideAbility('A1ET')
  call HideAbility('A1ES')
  call HideAbility('A1EQ')
  call HideAbility('A1ER')
  call HideAbility('A2WL')
  call HideAbility('A23F')
  call HideAbility('A2WK')
  call HideAbility('A2WJ')
  set boolean036=true
endfunction

function Func3677 takes integer ZAE,unit source,unit RCX returns nothing
  if ZAE==0 then
    call IssueTargetOrder(source,"attack",RCX)
  endif
  if GetUnitAbilityLevel(RCX,'A3EC')==1 and IsMagicImmune(RCX)==false then
    if ZAE<3 then
      call UnitAddAbilityTimedExF(RCX,'A3ED',1,1.,'B3ED')
    elseif ZAE==3 then
      call UnitAddAbilityTimedExF(RCX,'A3EE',1,1.,'B3EE')
    elseif ZAE==4 then
      call UnitAddAbilityTimedExF(RCX,'A3EF',1,1.,'B3EF')
    elseif ZAE==5 then
      call UnitAddAbilityTimedExF(RCX,'A3EG',1,1.,'B3EG')
    else
      call UnitAddAbilityTimedExF(RCX,'A3EH',1,1.,'B3EH')
    endif
  endif
endfunction

function Func3678 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),34))
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=LoadUnitHandle(HY,ZAE,30)
  local real result=0.5
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
    set ZBE=ZBE+1
    call Func3677(ZBE,source,RCX)
    if ZBE==9 or GetUnitAbilityLevel(RCX,'A3EC')==0 then
      call UnitRemoveAbility(RCX,'A3EC')
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    else
      call SaveInteger(HY,(ZAE),34,(ZBE))
    endif
  elseif IsDamageReal(GetEventDamage())and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false then
    if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),'A04R')==0 then
      call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*result)
    else
      call SetUnitState(udg_Hero[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE,GetUnitState(udg_Hero[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE)+GetEventDamage()*result)
    endif
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",GetEventDamageSource(),"origin"))
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3679 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call Func3677(0,source,RCX)
  call UnitAddAbility2(RCX,'A3EC')
  call Func1032(source,RCX)
  call SaveInteger(HY,(ZAE),375,0)
  call SaveInteger(HY,(ZAE),5,(GetUnitAbilityLevel(source,'A194')))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),30,RCX)
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerRegisterTimerEvent(RBX,0.01,false)
  call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(RBX,Condition(function Func3678))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func3680 takes nothing returns nothing
  call HideAbility('A3DO')
  call AddToPurgeList('A3EC','PRGE')
  call AddToPurgeList('A3ED','PRGE')
  call AddToPurgeList('A3EE','PRGE')
  call AddToPurgeList('A3EF','PRGE')
  call AddToPurgeList('A3EG','PRGE')
  call AddToPurgeList('A3EH','PRGE')
  call AddToPurgeList('B3ED','PRGE')
  call AddToPurgeList('B3EE','PRGE')
  call AddToPurgeList('B3EF','PRGE')
  call AddToPurgeList('B3EG','PRGE')
  call AddToPurgeList('B3EH','PRGE')
  call AddWrapper("Func4617",3)
  call AddWrapper("Func4616",-2)
endfunction

function Func3681 takes nothing returns nothing
  local unit source=unit228
  local unit RCX=GetEnumUnit()
  local integer ZAE=integer511
  local trigger RBX=AddProjectile(source,RCX,'h0DF',"Func3706",5000,false)
  local integer QIE=GetHandleId(RBX)
  call SaveReal(HY,(QIE),20,((ZAE*125+25)*1.0))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func3682 takes unit source,unit RCX,integer ZAE returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set unit228=source
  set integer511=ZAE
  call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),725,Condition(function Func0816))
  call ForGroup(g,function Func3681)
  call KillGroup(g)
  set g=null
endfunction

function Func3683 takes unit Hero,unit LCO,integer YGX,unit LDO,integer h,unit d returns nothing
  call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(LCO),GetUnitY(LCO)))
  if LoadInteger(HY,GetHandleId(Hero),'gtot')!=1 then
    call SetUnitPosition(Hero,GetUnitX(LCO),GetUnitY(LCO))
  endif
  call RemoveItem(UnitRemoveItemFromSlot(d,0))
  call RemoveItem(UnitRemoveItemFromSlot(d,1))
  call RemoveItem(UnitRemoveItemFromSlot(d,2))
  call RemoveItem(UnitRemoveItemFromSlot(d,3))
  call RemoveItem(UnitRemoveItemFromSlot(d,4))
  call RemoveItem(UnitRemoveItemFromSlot(d,5))
  call KillUnit(d)
  call PauseUnit(Hero,false)
  call UnitShareVision(LCO,GetOwningPlayer(Hero),false)
  call ShowUnit(Hero,true)
  call SetUnitPathing2(Hero,true)
  call ClearSelectionForPlayer(GetOwningPlayer(Hero))
  call SelectUnitForPlayerSingle(Hero,GetOwningPlayer(Hero))
  call SetUnitInvulnerable(Hero,false)
  call SaveInteger(HY,(GetHandleId(Hero)),4310,2)
  call Func3682(Hero,LCO,YGX)
  call DestroyEffect(LoadEffectHandle(HY,h,32))
  call DestroyEffect(LoadEffectHandle(HY,h,177))
  call RemoveUnit(LDO)
  call FlushChildHashtable(HY,h)
  call UnitRemoveAbility(Hero,'A3KR')
endfunction

function Func3684 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LCO=(LoadUnitHandle(HY,h,17))
  local unit Hero=(LoadUnitHandle(HY,h,14))
  local unit LDO=(LoadUnitHandle(HY,h,19))
  local integer YGX=(LoadInteger(HY,h,5))
  local unit d=LoadUnitHandle(HY,h,112)
  local integer PCA=LoadInteger(HY,h,0)
  if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func3683(Hero,LCO,YGX,LDO,h,d)
    call CleanTrigger(t)
  elseif IsUnitType(LCO,UNIT_TYPE_HERO)and IsUnitEnemy(LCO,GetOwningPlayer(Hero))then
    call Func3683(Hero,LCO,YGX,LDO,h,d)
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT or LoadInteger(HY,GetHandleId(Hero),'gtot')==1 then
    if LoadInteger(HY,GetHandleId(Hero),'gtot')==1 or GetSpellAbilityId()=='A0SX' or GetSpellAbilityId()=='A352' then
      if IsUnitEnemy(LCO,GetOwningPlayer(Hero))then
        call SetWidgetLife(Hero,GetWidgetLife(Hero)+GetWidgetLife(LCO))
      endif
      call Func3683(Hero,LCO,YGX,LDO,h,d)
      call AddEffectTargetTimed("InfestEffect.mdx",Hero,"overhead",1.)
      call SetUnitAnimation(Hero,"Stand Victory")
      call UnitMakeStandAnimDelayed(Hero,1.5)
      call CleanTrigger(t)
      if IsUnitType(LCO,UNIT_TYPE_HERO)==false and(IsUnitEnemy(LCO,GetOwningPlayer(Hero))or GetUnitAbilityLevel(LCO,'A352')==1 or GetUnitAbilityLevel(LCO,'A0SX')==1)then
        if IsUnitType(LCO,UNIT_TYPE_SUMMONED)==false then
          call UnitRemoveBuffs(LCO,true,true)
        endif
        call Func0855(LCO,0,0)
        call DamageTarget(Hero,LCO,1,100000)
        call DamageTarget(Hero,LCO,2,100000)
        call DamageTarget(Hero,LCO,3,100000)
      endif
      if GetUnitAbilityLevel(LCO,PCA)>0 then
        call UnitRemoveAbility(LCO,PCA)
      endif
    elseif GetSpellAbilityId()=='A30W' then
      call SetUnitOwner(LCO,GetOwningPlayer(Hero),false)
      if LoadBoolean(HY,h,123)==false then
        call SaveBoolean(HY,h,123,true)
        call TriggerRegisterUnitEvent(t,LCO,EVENT_UNIT_SPELL_EFFECT)
        call TriggerRegisterUnitEvent(t,LCO,EVENT_UNIT_CHANGE_OWNER)
        call UnitAddAbility2(LCO,LoadInteger(HY,h,0))
      endif
      call SetUnitMoveSpeed(LCO,GetUnitMoveSpeed(Hero))
      call ClearSelectionForPlayer(GetOwningPlayer(Hero))
      call SelectUnitAddForPlayer(LCO,GetOwningPlayer(Hero))
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_CHANGE_OWNER then
    if GetOwningPlayer(LCO)!=GetOwningPlayer(Hero)then
      call UnitRemoveAbility(LCO,LoadInteger(HY,h,0))
    else
      call UnitAddAbility2(LCO,LoadInteger(HY,h,0))
    endif
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELECTED and GetTriggerUnit()==LCO then
    if IsPlayerAlly(GetTriggerPlayer(),GetOwningPlayer(Hero))and GetPlayerAlliance(GetOwningPlayer(Hero),GetTriggerPlayer(),ALLIANCE_SHARED_CONTROL)then
      if GetOwningPlayer(LCO)!=GetTriggerPlayer()then
        if GetOwningPlayer(LCO)!=GetOwningPlayer(Hero)then
          call ClearSelectionForPlayer(GetTriggerPlayer())
          call SelectUnitAddForPlayer(LDO,GetTriggerPlayer())
        else
          if GetUnitAbilityLevel(LCO,LoadInteger(HY,h,0))==0 then
            call UnitAddAbility2(LCO,LoadInteger(HY,h,0))
            call TriggerRegisterUnitEvent(t,LCO,EVENT_UNIT_SPELL_EFFECT)
          endif
        endif
      endif
    endif
  else
    if GetOwningPlayer(LCO)==GetOwningPlayer(Hero)then
      call SetUnitMoveSpeed(LCO,GetUnitMoveSpeed(Hero))
    elseif IsUnitEnemy(LCO,GetOwningPlayer(Hero))then
      call UnitShareVision(LCO,GetOwningPlayer(Hero),true)
    endif
    call SetUnitPosition(Hero,GetUnitX(LCO),GetUnitY(LCO))
    call SetUnitPosition(d,GetUnitX(LCO),GetUnitY(LCO))
    call UnitPauseTimedLife(d,true)
  endif
  set d=null
  set t=null
  set LCO=null
  set Hero=null
  set LDO=null
  return false
endfunction

function Func3685 takes nothing returns nothing
  local unit Hero=GetTriggerUnit()
  local unit LCO=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit LDO=CreateUnit(GetOwningPlayer(Hero),'e010',7260,-7732,0)
  local string PDA="Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl"
  local string PFA="Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBase.mdl"
  local string PGA="Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl"
  local unit d=CreateUnit(GetOwningPlayer(Hero),'e00E',GetUnitX(Hero),GetUnitY(Hero),0)
  local integer PHA='A0SX'
  if IsPlayerEnemy(LocalPlayer,GetOwningPlayer(Hero))and PlayerObserver==false then
    set PDA=""
    set PFA=""
    set PGA=""
  endif
  call DestroyEffect(AddSpecialEffectTarget(PDA,LCO,"overhead"))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget(PFA,LCO,"overhead")))
  call SaveEffectHandle(HY,h,177,(AddSpecialEffectTarget(PGA,LCO,"overhead")))
  call PurgingTriggered(LDO,false)
  call SetUnitInvulnerable(LDO,true)
  call UnitAddAbility2(LDO,'A0SX')
  if IsUnitType(LCO,UNIT_TYPE_HERO)==false and GetOwningPlayer(LCO)!=GetOwningPlayer(Hero)then
    if Func0630(LCO)==false then
      call UnitAddAbility2(LDO,'A30W')
    endif
  endif
  call ClearSelectionForPlayer(GetOwningPlayer(Hero))
  if GetUnitTypeId(LCO)=='ncnk' or GetUnitTypeId(LCO)=='nowe' then
    set PHA='A352'
  else
    set PHA='A0SX'
  endif
  if GetOwningPlayer(LCO)==GetOwningPlayer(Hero)then
    call UnitAddAbility2(LCO,PHA)
    call TriggerRegisterUnitEvent(t,LCO,EVENT_UNIT_SPELL_EFFECT)
    call SelectUnitForPlayerSingle(LCO,GetOwningPlayer(Hero))
  else
    call SelectUnitForPlayerSingle(LDO,GetOwningPlayer(Hero))
  endif
  call UnitAddAbility2(Hero,'A3KR')
  call SaveInteger(HY,h,0,PHA)
  call UnitShareVision(LCO,GetOwningPlayer(Hero),true)
  call SetUnitInvulnerable(Hero,true)
  call ShowUnit(Hero,false)
  call SetUnitPathing2(Hero,false)
  call SaveUnitHandle(HY,h,17,(LCO))
  call SaveUnitHandle(HY,h,14,(Hero))
  call SaveUnitHandle(HY,h,19,(LDO))
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(Hero,'A0SW')+GetUnitAbilityLevel(Hero,'A3DR'))
  call TriggerRegisterDeathEvent(t,LCO)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELECTED)
  call TriggerRegisterUnitEvent(t,LDO,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterDeathEvent(t,Hero)
  call TriggerRegisterTimerEvent(t,.2,true)
  call TriggerAddCondition(t,Condition(function Func3684))
  call SaveUnitHandle(HY,h,112,d)
  call UnitAddAbility(d,'AInv')
  call UnitPauseTimedLife(d,true)
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(Hero,0)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(Hero,1)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(Hero,2)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(Hero,3)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(Hero,4)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(Hero,5)))
  call SaveInteger(HY,GetHandleId(Hero),4310,1)
  set t=null
  set d=null
  set Hero=null
  set LCO=null
  set LDO=null
endfunction

function Func3686 takes unit u returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),725,Condition(function Func0820))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(u,u2,1,300)
    call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGhoul.mdl",u2,"origin"))
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
endfunction

function Func3687 takes unit PLA,unit PMA,integer h,unit d returns nothing
  if LoadInteger(HY,GetHandleId(PLA),'gtot')!=1 then
    call SetUnitPosition(PLA,GetUnitX(PMA),GetUnitY(PMA))
  endif
  call ShowUnit(PLA,true)
  call UnitRemoveAbility(PLA,'A3KR')
  call SelectUnitForPlayerSingle(PLA,GetOwningPlayer(PLA))
  call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(PLA),GetUnitY(PLA)))
  call UnitRemoveAbility(PLA,'Avul')
  call KillUnit(LoadUnitHandle(HY,h,2))
  call Func0477(LoadUnitHandle(HY,h,2),1)
  call DestroyEffect(LoadEffectHandle(HY,h,32))
  call DestroyEffect(LoadEffectHandle(HY,h,177))
  call FlushChildHashtable(HY,h)
  call SetPlayerAbilityAvailable(GetOwningPlayer(PMA),'A3DO',Func0898(PMA))
  call UnitRemoveAbility(PMA,'A3DP')
  call Func3686(PMA)
  call RemoveItem(UnitRemoveItemFromSlot(d,0))
  call RemoveItem(UnitRemoveItemFromSlot(d,1))
  call RemoveItem(UnitRemoveItemFromSlot(d,2))
  call RemoveItem(UnitRemoveItemFromSlot(d,3))
  call RemoveItem(UnitRemoveItemFromSlot(d,4))
  call RemoveItem(UnitRemoveItemFromSlot(d,5))
  call KillUnit(d)
endfunction

function Func3688 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit PMA=LoadUnitHandle(HY,h,0)
  local unit PLA=LoadUnitHandle(HY,h,1)
  local real PQA
  local real FZE
  local unit d=LoadUnitHandle(HY,h,112)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func3687(PLA,PMA,h,d)
    call DestroyTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT or LoadInteger(HY,GetHandleId(PLA),'gtot')==1 then
    if LoadInteger(HY,GetHandleId(PLA),'gtot')==1 or GetSpellAbilityId()=='A3DP' then
      call Func3687(PLA,PMA,h,d)
      call DestroyTrigger(t)
    endif
  else
    set PQA=LoadReal(HY,h,5)
    set FZE=GetWidgetLife(PMA)/GetUnitState(PMA,UNIT_STATE_MAX_LIFE)
    if FZE-PQA>0 and(FZE-PQA)<0.5 then
      if LoadInteger(HY,GetHandleId(PMA),4298)!=1 then
        call SetWidgetLife(PLA,GetWidgetLife(PLA)+(FZE-PQA)*GetUnitState(PMA,UNIT_STATE_MAX_LIFE))
      endif
    endif
    call SaveReal(HY,h,5,FZE)
    if ModuloInteger(GetTriggerEvalCount(t),10)==1 then
      call SetUnitX(PLA,GetUnitX(PMA))
      call SetUnitY(PLA,GetUnitY(PMA))
      call SetUnitPosition(d,GetUnitX(PMA),GetUnitY(PMA))
    endif
    call UnitPauseTimedLife(d,true)
  endif
  set d=null
  set t=null
  set PMA=null
  set PLA=null
endfunction

function Func3689 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d
  local string PDA="Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl"
  local string PFA="Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBase.mdl"
  local string PGA="Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl"
  if IsPlayerEnemy(LocalPlayer,GetOwningPlayer(u))and PlayerObserver==false then
    set PDA=""
    set PFA=""
    set PGA=""
  endif
  call Func0702("SPLK",GetUnitX(u),GetUnitY(u),GetUnitX(SGE),GetUnitY(SGE),0.1,0.1,0.2,.9,0.5)
  call DestroyEffect(AddSpecialEffectTarget(PDA,u,"overhead"))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget(PFA,u,"overhead")))
  call SaveEffectHandle(HY,h,177,(AddSpecialEffectTarget(PGA,u,"overhead")))
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func3688))
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,h,1,SGE)
  call Func0862(SGE)
  call ShowUnit(SGE,false)
  call UnitAddAbility2(SGE,'Avul')
  call UnitAddAbility2(SGE,'A3KR')
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A3DO',false)
  call UnitAddAbility2(u,'A3DP')
  set d=CreateUnit(GetOwningPlayer(SGE),'H0DL',GetUnitX(CirclesOfPower[GetPlayerId(GetOwningPlayer(SGE))]),GetUnitY(CirclesOfPower[GetPlayerId(GetOwningPlayer(SGE))]),0)
  call SelectUnitAddForPlayer(d,GetOwningPlayer(SGE))
  call TriggerRegisterUnitEvent(t,d,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterDeathEvent(t,SGE)
  call SaveUnitHandle(HY,h,2,d)
  call SaveReal(HY,h,5,GetWidgetLife(u)/GetUnitState(u,UNIT_STATE_MAX_LIFE))
  set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call SaveUnitHandle(HY,h,112,d)
  call UnitAddAbility(d,'AInv')
  call UnitPauseTimedLife(d,true)
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(SGE,0)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(SGE,1)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(SGE,2)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(SGE,3)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(SGE,4)))
  call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(SGE,5)))
  set t=null
  set d=null
  set u=null
  set SGE=null
endfunction

function Func3690 takes nothing returns nothing
  if IsUnitIllusion(GetSpellTargetUnit())then
    call Func0658('TX0V')
  elseif Func1474(GetSpellTargetUnit())then
    call Func0658('n038')
  endif
endfunction

function Func3691 takes nothing returns nothing
  if(IsUnitEnemy(GetSpellTargetUnit(),GetTriggerPlayer())and(IsHeroUnitId(GetUnitTypeId(GetSpellTargetUnit()))or Func0630(GetSpellTargetUnit())))or IsCourier(GetSpellTargetUnit())then
    call Func0658('n0K9')
  endif
endfunction

function Func3692 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  if GetUnitTypeId(source)=='E02X' then
    call SetUnitVertexColor(source,255,255,255,255)
  else
    call SetUnitVertexColor(source,100,100,100,255)
  endif
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),175))
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),176))
  call UnitRemoveAbility(source,'A0SR')
  call UnitRemoveAbility(source,'A0ST')
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func3693 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(source,'A2TT')
  call PurgingTriggered(source,false)
  call Func0860(source)
  call SetUnitVertexColor(source,0,0,0,255)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A0ST',false)
  call UnitAddAbility2(source,'A0ST')
  call UnitAddAbility3(source,'A0SR',QIE)
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call SaveEffectHandle(HY,(ZAE),175,(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",source,"right hand")))
  call SaveEffectHandle(HY,(ZAE),176,(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",source,"left hand")))
  call TriggerRegisterTimerEvent(RBX,2+QIE,false)
  call TriggerAddCondition(RBX,Condition(function Func3692))
  set source=null
  set RBX=null
endfunction

function Func3694 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call Stat_Sub(LoadUnitHandle(MHT,h,0),LoadInteger(MHT,h,0),"+DMG")
  call RemoveSavedHandle(MHT,GetHandleId(LoadUnitHandle(MHT,h,0)),'A0SS')
  call FlushChildHashtable(MHT,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func3695 takes unit u,unit SGE,integer QIE returns nothing
  local timer t
  local integer h
  local integer d
  local real r=GetWidgetLife(SGE)
  local boolean b=HaveSavedHandle(MHT,GetHandleId(u),'A0SS')
  if b then
    set t=LoadTimerHandle(MHT,GetHandleId(u),'A0SS')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(MHT,GetHandleId(u),'A0SS',t)
    call SaveUnitHandle(MHT,h,0,u)
  endif
  call TimerStart(t,2,false,function Func3694)
  set d=R2I((0.035+0.01*QIE)*r)
  if b then
    if d!=LoadInteger(MHT,h,0)then
      call Stats_Fucking_Modify(u,d-LoadInteger(MHT,h,0),"+DMG")
    endif
  else
    call Stat_Add(u,d,"+DMG")
  endif
  call SaveInteger(MHT,h,0,d)
  call SaveUnitHandle(MHT,h,0,u)
  set t=null
endfunction

function Func3696 takes unit WXE,unit SGE returns nothing
  local integer lvl=GetUnitAbilityLevel(WXE,'A0SS')
  if lvl==0 then
    return
  endif
  if IsUnitEnemy(WXE,GetOwningPlayer(SGE))and GetUnitAbilityLevel(SGE,'A04R')==0 and SGE!=Roshan and IsUnitType(SGE,UNIT_TYPE_STRUCTURE)==false then
    call Func3695(WXE,SGE,lvl)
  endif
endfunction

function Func3697 takes unit LBO,unit LCO returns nothing
  local integer YGX=GetUnitAbilityLevel(LBO,'A0SS')
  local real PZA=(.035+.01*YGX)*GetWidgetLife(LCO)
  call SetWidgetLife(LBO,PZA+GetWidgetLife(LBO))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",LBO,"origin"))
endfunction

function Func3698 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local real ch=GetUnitState(u,UNIT_STATE_LIFE)
  local real mh=GetUnitState(u,UNIT_STATE_MAX_LIFE)
  local real dmg=((0.002+0.004*integer512)*mh)/2
  call DamageTarget(unit229,u,11,dmg)
  set u=null
endfunction

function Func3699 takes nothing returns boolean
  return ((IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or IsUnitSpiritBear(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),'B084')>0 and GetFilterUnit()!=Roshan
endfunction

function Func3700 takes nothing returns boolean
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit u=(LoadUnitHandle(HY,h,2))
  local group g
  if IsDead(u)==false and GetUnitAbilityLevel(u,'A36D')==0 then
    set g=GetAvailableGroup()
    set tt_unit1=u
    set unit229=u
    set integer512=GetUnitAbilityLevel(u,'A01N')
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),950,Condition(function Func3699))
    call ForGroup(g,function Func3698)
    call KillGroup(g)
  endif
  set g=null
  set u=null
  return false
endfunction

function Func3701 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,0.5,true)
  call TriggerAddCondition(RBX,Condition(function Func3700))
  call SaveUnitHandle(HY,(GetHandleId(RBX)),2,(GetTriggerUnit()))
  set RBX=null
endfunction

function Func3702 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(source,'A060')
  local real result=2*QIE
  local real ZEE=QIE
  local integer ZBE=(LoadInteger(HY,(ZAE),34))
  if QIE==4 then
    set result=12
    set ZEE=6
  endif
  set ZEE=ZEE*ZBE
  set result=result*ZBE
  call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MANA)+result)
  call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_LIFE)+ZEE)
  if GetTriggerEvalCount(RBX)>5 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3703 takes unit source returns nothing
  local integer ZAE=GetUnitAbilityLevel(source,'A060')
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",source,"origin"))
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerAddCondition(RBX,Condition(function Func3702))
  call SaveUnitHandle(HY,(QIE),2,(source))
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
    call SaveInteger(HY,(QIE),34,10)
  else
    call SaveInteger(HY,(QIE),34,1)
  endif
  set RBX=null
endfunction

function Func3704 takes nothing returns boolean
  local unit P5A=GetTriggerUnit()
  local unit E3X=GetKillingUnit()
  if GetUnitAbilityLevel(E3X,'B02R')>0 then
    if GetUnitAbilityLevel(E3X,'A36D')==0 and IsPowerCog(P5A)==false then
      call Func3703(E3X)
    endif
  elseif((LoadInteger(HY,(GetHandleId(P5A)),4333))==1)then
    if GetUnitAbilityLevel(unit230,'A36D')==0 and GetUnitAbilityLevel(unit230,'A060')>0 then
      call Func3703(unit230)
    endif
  elseif GetUnitAbilityLevel(E3X,'Aloc')==1 then
    if GetUnitAbilityLevel(udg_Hero[GetPlayerId(GetOwningPlayer(E3X))],'B02R')>0 then
      set E3X=udg_Hero[GetPlayerId(GetOwningPlayer(E3X))]
      if GetUnitAbilityLevel(E3X,'A36D')==0 and IsPowerCog(P5A)==false then
        call Func3703(E3X)
      endif
    endif
  endif
  set P5A=null
  set E3X=null
  return false
endfunction

function Func3705 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(RBX,Condition(function Func3704))
  set RBX=null
  call AddDispellableBuff('B02S')
endfunction

function Func3706 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=tt_unit1
  local unit RCX=tt_unit3
  local real result=(LoadReal(HY,(ZAE),20))
  local real ZEE=(LoadReal(HY,(ZAE),21))
  if IsUnitAlly(RCX,GetOwningPlayer(source))then
    if IsDead(RCX)==false then
      call SetWidgetLife(RCX,GetWidgetLife(RCX)+ZEE)
      call FuckingAssistBuffWrap(source,RCX)
    endif
  else
    call DamageTarget(source,RCX,1,result)
  endif
  set source=null
  set RCX=null
endfunction

function Func3707 takes nothing returns nothing
  local trigger RBX=AddProjectile(tt_unit1,GetEnumUnit(),'h00W',"Func3706",400,false)
  local integer ZAE=GetHandleId(RBX)
  call SaveReal(HY,(ZAE),20,((real023)*1.0))
  call SaveReal(HY,(ZAE),21,((real024)*1.0))
  set RBX=null
endfunction

function Func3708 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local integer ZAE=GetUnitAbilityLevel(source,'A05V')
  local real result=500
  local real ZEE=75+50*ZAE
  local real ZWE=50+20*ZAE
  set tt_unit1=source
  set real023=ZEE
  set real024=ZWE
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),result,Condition(function Func0838))
  call GroupRemoveUnit(g,source)
  call ForGroup(g,function Func3707)
  call KillGroup(g)
  call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_LIFE)+ZWE)
  set source=null
  set g=null
endfunction

function Func3709 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local real FRX=(LoadReal(HY,(h),680))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",SGE,"origin"))
  call DamageTarget(SKE,SGE,1,FRX*(GetUnitState(SGE,UNIT_STATE_MAX_LIFE)-GetWidgetLife(SGE)))
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3710 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A067')
  local integer KPX=GetUnitAbilityLevel(SKE,'A08P')
  local real FRX
  if QIE==1 then
    set FRX=0.6
  elseif QIE==2 or KPX==1 then
    set FRX=0.75
  elseif QIE==3 or KPX==2 then
    set FRX=0.9
  elseif KPX==3 then
    set FRX=1.2
  endif
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveReal(HY,(h),680,FRX)
  call TriggerRegisterTimerEvent(t,1.5,false)
  call TriggerAddCondition(t,Condition(function Func3709))
  call Func0522(SGE,4333,QIE+KPX,1.51)
  if KPX>0 then
    call Func0522(SGE,4418,QIE+KPX,1.51)
  endif
  if GetUnitTypeId(SKE)=='e00E' then
    set unit230=udg_Hero[GetPlayerId(GetOwningPlayer(SKE))]
  else
    set unit230=SKE
  endif
  call SaveUnitHandle(HY,GetHandleId(SGE),4333,unit230)
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3711 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real cx=GetUnitX(u)
  local real cy=GetUnitY(u)
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a=Atan2(ty-cy,tx-cx)
  local integer lvl=GetUnitAbilityLevel(u,'A0X7')
  local real b
  local real c
  local real d=700.
  if lvl==0 then
    set lvl=GetUnitAbilityLevel(u,'A3D0')
    set d=1225
  endif
  set b=lvl*60.+20.
  set c=0.7+lvl*0.4
  if GetUnitAbilityLevel(u,'A3O3')>0 then
    set d=d+200.
  endif
  set tx=cx+d*Cos(a)
  set ty=cy+d*Sin(a)
  call Func0854(u,null,b,c,0.5,cx,cy,tx,ty,168,null,true,1600)
  set u=null
endfunction

function Func3712 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local integer ZAE=GetUnitAbilityLevel(source,'A1H5')+GetUnitAbilityLevel(source,'A3CY')
  local real result=GetHeroInt(RCX,true)*(3+0.5*ZAE)
  local integer QIE=IMinBJ(R2I(result),R2I(GetUnitState(RCX,UNIT_STATE_MANA)))
  call DamageTarget(source,RCX,1,QIE)
  call SetUnitState(RCX,UNIT_STATE_MANA,GetUnitState(RCX,UNIT_STATE_MANA)-QIE)
  call CreateLightningOnUnit("MBUR",source,RCX,65,1,1,1,1,0.3,.2)
  call TextTagOnUnit("-"+I2S(QIE),3,RCX,0.023,82,82,255,255,Func0590(RCX)or PlayerObserver)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl",RCX,"chest"))
  set source=null
  set RCX=null
endfunction

function Func3713 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit u
  local integer QIE=GetUnitAbilityLevel(SKE,'A2KO')+GetUnitAbilityLevel(SKE,'A3CZ')
  local group g=LoadGroupHandle(HY,h,22)
  local group gg
  local unit u2
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if IsDamageReal(GetEventDamage())and IsPlayerEnemy(GetOwningPlayer(GetEventDamageSource()),GetOwningPlayer(SKE))then
      if IsPlayerBelongToTeams(GetOwningPlayer(GetEventDamageSource()))and Func0610(GetEventDamageSource())==false then
        set u=GetEventDamageSource()
        if GetUnitAbilityLevel(u,'A04R')>0 then
          set u=udg_Hero[GetPlayerId(GetOwningPlayer(u))]
        endif
        if IsUnitInGroup(u,g)==false and GetUnitAbilityLevel(u,'Aloc')==0 then
          call GroupAddUnit(g,u)
          call Func0673(SKE,GetEventDamage())
          if IsDead(u)==false then
            call StunTargetEx(u,0.6*QIE,false)
            set NoReflection=NoReflection+1
            call DamageTarget(SKE,u,3,GetEventDamage())
            set NoReflection=NoReflection-1
          endif
        endif
      endif
    endif
  elseif LoadBoolean(HY,h,0)then
    set gg=GetAvailableGroup()
    set tt_unit1=SKE
    call GroupEnumUnitsInRange(gg,GetUnitX(SKE),GetUnitY(SKE),325,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      call StunTargetEx(u2,0.6*QIE,false)
      call GroupAddUnit(g,u2)
      call GroupRemoveUnit(gg,u2)
    endloop
    call KillGroup(gg)
    call SaveBoolean(HY,h,0,false)
  else
    call UnitRemoveAbility(SKE,'A2KP')
    call UnitRemoveAbility(SKE,'A3I1')
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set u=null
  return false
endfunction

function Func3714 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,2.25,false)
  if GetSpellAbilityId()=='A3CZ' then
    call TriggerRegisterTimerEvent(RBX,0.0,false)
    call SaveBoolean(HY,ZAE,0,true)
    call UnitAddAbility2(source,'A3I1')
  endif
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(RBX,Condition(function Func3713))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveGroupHandle(HY,(ZAE),22,(GetAvailableGroup()))
  call UnitAddAbility2(source,'A2KP')
  set source=null
  set RBX=null
endfunction

function Func3715 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    set u=GetTriggerUnit()
    if GetSpellAbilityId()=='A2KO' then
      call SaveBoolean(HY,h,0,true)
      if GetUnitAbilityLevel(u,'A09U')+GetUnitAbilityLevel(u,'A3D1')>0 then
        call Func0909(u,'I0TS'-1+GetUnitAbilityLevel(u,'A09U')+GetUnitAbilityLevel(u,'A3D1'))
      endif
    elseif GetSpellAbilityId()=='A09U' or GetSpellAbilityId()=='A3D1' then
      call SaveBoolean(HY,h,0,false)
      call SaveReal(HY,h,0,5.+GetUnitAbilityLevel(u,GetSpellAbilityId())*15.)
    else
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
  else
    set u=LoadUnitHandle(HY,h,0)
    if GetUnitAbilityLevel(u,'B00K')==1 then
      call SaveReal(HY,h,0,LoadReal(HY,h,0)-0.2)
      if LoadReal(HY,h,0)<=0 then
        if LoadBoolean(HY,h,0)then
          call UnitRemoveAbility(u,'B00K')
        endif
        call FlushChildHashtable(HY,h)
        call DestroyTrigger(t)
      endif
    else
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3716 takes unit u returns nothing
  call UnitRemoveAbility(u,'A3D3')
  call UnitAddAbility(u,'A3CU')
  call UnitRemoveAbility(u,'A3CU')
  call Func0735(u,0,7)
  if Func0898(u)then
    call UnitAddAbility2(u,'A3CT')
  endif
endfunction

function Func3717 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local real D1E=5.+GetUnitAbilityLevel(u,GetSpellAbilityId())*15.
  if GetUnitTypeId(u)=='U0A9' then
    call Func3716(u)
  endif
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func3715))
  call SaveReal(HY,h,0,D1E)
  call SaveUnitHandle(HY,h,0,u)
  call EvasionSourceActivate(20,80)
  set t=null
  set u=null
endfunction

function Func3718 takes nothing returns nothing
  call Func0735(GetTriggerUnit(),0,8)
endfunction

function Func3719 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SaveBoolean(HY,h,0,true)
  else
    if GetUnitTypeId(u)!='U0A9' or GetHandleId(u)==0 then
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    elseif LoadBoolean(HY,h,0)==false then
      if GetWidgetLife(u)>1 then
        call SetWidgetLife(u,GetWidgetLife(u)+GetUnitState(u,UNIT_STATE_MAX_LIFE)*.003)
        call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+GetUnitState(u,UNIT_STATE_MAX_MANA)*0.003)
        if GetUnitX(u)!=x or GetUnitY(u)!=y then
          call SetUnitPosition(u,GetUnitX(u),GetUnitY(u))
          call SaveReal(HY,h,0,GetUnitX(u))
          call SaveReal(HY,h,1,GetUnitY(u))
        endif
      endif
    else
      if IsDead(u)==false then
        call Func3716(u)
        call FlushChildHashtable(HY,h)
        call DestroyTrigger(t)
      endif
    endif
  endif
  set u=null
  set t=null
  return false
endfunction

function Func3720 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3719))
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,GetUnitX(u))
  call SaveReal(HY,h,1,GetUnitY(u))
  set t=null
endfunction

function Func3721 takes nothing returns nothing
  call UnitAddAbility(GetTriggerUnit(),'A3CS')
  call UnitRemoveAbility(GetTriggerUnit(),'A3CS')
  call UnitAddAbility(GetTriggerUnit(),'A3D3')
  call Func0735(GetTriggerUnit(),0,9)
  call AddUnitAnimationProperties(GetTriggerUnit(),"alternate",false)
  call UnitRemoveAbility(GetTriggerUnit(),'A3CT')
  call Func3720(GetTriggerUnit())
  call UnitRemoveAbility(GetTriggerUnit(),'Amov')
endfunction

function Func3722 takes nothing returns nothing
  call Func1276()
  call Func0656(GetTriggerUnit())
endfunction

function Func3723 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  call UnitRemoveAbility(u,'A3KP')
  call UnitRemoveAbility(u,'A3KQ')
  call FlushChildHashtable(HY,h)
  call DestroyTrigger(t)
  set u=null
  set t=null
endfunction

function Func3724 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_ENDCAST)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call TriggerAddCondition(t,Condition(function Func3723))
  call TriggerRegisterTimerEvent(t,0.41,false)
  call RemoveEndlessFadetime(GetTriggerUnit())
  call UnitAddAbility2(GetTriggerUnit(),'A3KP')
  call UnitAddAbility2(GetTriggerUnit(),'A3KQ')
  set t=null
endfunction

function Func3725 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  local integer id=GetSpellAbilityId()
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
    if id=='A3CV' then
      call Func3716(u)
    endif
    if(GetUnitTypeId(u)=='U0A9')then
      call Func0735(u,0,9)
    endif
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CHANNEL then
    if id=='A3CT' then
      call Func3718()
      call  DamageBlockActiveTracking(9999.)
    endif
  else
    if id=='A3CT' or(GetUnitTypeId(u)=='U0A9')then
      if GetUnitAbilityLevel(u,'B00K')==1 then
        call Func3724()
      endif
      call Func0735(u,0,9)
      call  DamageBlockActiveTracking(9999.)
    endif
  endif
  set u=null
  return false
endfunction

function Func3726 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CAST)
  call TriggerAddCondition(t,Condition(function Func3725))
  set t=null
  call HideAbility('A3D3')
endfunction

function Func3727 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func3728 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit d
  local group g=GetAvailableGroup()
  local real a=GetUnitFacing(u)
  local real x
  local real y
  local real ILX=0
  local unit u2
  local integer id=GetSpellAbilityId()
  local integer QIE=GetUnitAbilityLevel(u,id)
  if id=='A0EY' or id=='A3K6' then
    set ILX=200.
  elseif id=='A0FH' or id=='A3K7' then
    set ILX=450.
  elseif id=='A0F0' then
    set ILX=700.
  endif
  set x=GetUnitX(u)+ILX*Cos(a*bj_DEGTORAD)
  set y=GetUnitY(u)+ILX*Sin(a*bj_DEGTORAD)
  set d=CreateUnit(GetOwningPlayer(u),'e006',x,y,0)
  call UnitApplyTimedLife(d,'BTLF',2)
  call GroupEnumUnitsInRange(g,x,y,275,Condition(function Func3727))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(u,u2,1,75*QIE+25)
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
  set u=null
  set d=null
endfunction

function Func3729 takes nothing returns nothing
  if(GetLearnedSkillLevel()==1)then
    call UnitAddAbility2(GetTriggerUnit(),'A0F0')
    call UnitAddAbility2(GetTriggerUnit(),'A0FH')
  else
    call SetUnitAbilityLevel(GetTriggerUnit(),'A0F0',GetLearnedSkillLevel())
    call SetUnitAbilityLevel(GetTriggerUnit(),'A0FH',GetLearnedSkillLevel())
  endif
endfunction

function NecromasteryEffect takes nothing returns nothing
  call UnitAddAbility2(GetTriggerUnit(),'A0CQ')
endfunction

function RequiemOfSouls_BackWave takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer lvl=LoadInteger(HY,h,1)
  local integer souls=LoadInteger(HY,h,0)
  local integer souls2=souls
  local integer i
  local integer k
  local real a
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local integer j
  local real r
  local real step=50
  local player p=GetOwningPlayer(u)
  local unit d
  local real dx
  local real dy
  if LoadBoolean(HY,h,0)==false then
    set souls2=souls2/2
    set a=360./(souls2*1.)
    set i=1
    set k=souls2
    loop
      exitwhen i>k
      set r=i*a*bj_DEGTORAD
      set j=2
      set dx=SafeX50(x+(1160)*(Cos(r)))
      set dy=SafeY50(y+(1160)*(Sin(r)))
      set d=CreateUnit(p,'e00C',dx,dy,0)
      call UnitAddAbility(d,'Aloc')
      call SetUnitX(d,dx)
      call SetUnitY(d,dy)
      call UnitApplyTimedLife(d,'BTLF',15.00)
      call UnitAddAbility(d,'A3OL')
      call SetUnitAbilityLevel(d,'A3OL',lvl)
      call SaveUnitHandle(HY,h,i+10,d)
      call  ThrowSpellXY(d,'A3OL',x,y)
      set i=i+1
      set d=null
    endloop
    call SaveBoolean(HY,h,0,true)
    call TimerStart(t,LoadReal(HY,h,0),false,function RequiemOfSouls_BackWave)
  else
    set i=1
    loop
      set d=LoadUnitHandle(HY,h,i+10)
      if GetWidgetLife(d)!=GetUnitState(d,UNIT_STATE_MAX_LIFE)then
        if IsDead(u)==false then
          call SetWidgetLife(u,GetWidgetLife(u)+(16.+16.*lvl)*(GetUnitState(d,UNIT_STATE_MAX_LIFE)-GetWidgetLife(d)))
        endif
      endif
      set d=null
      set i=i+1
      exitwhen i>souls/2
    endloop
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  endif
  set u=null
  set t=null
endfunction

function RequiemOfSouls_Aghanim takes unit u,integer souls,integer lvl returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  if IsL1ch then
    set souls=36
  endif
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,souls)
  call SaveInteger(HY,h,1,lvl)
  call SaveReal(HY,h,0,1.4)
  call TimerStart(t,LoadReal(HY,h,0),false,function RequiemOfSouls_BackWave)
  set t=null
endfunction

function SF_Requiem_Damage takes unit d,unit u returns nothing
  if GetUnitAbilityLevel(d,'A0HG')>0 then
    call Func0377(u,'A0HH',1)
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(d))],u,1,40+40*GetUnitAbilityLevel(d,'A0HG'))
  elseif GetUnitAbilityLevel(d,'A3OL')>0 then
    call Func0377(u,'A0HH',1)
    if IsHeroUnitId(GetUnitTypeId(u))then
      call SetWidgetLife(d,GetWidgetLife(d)-1)
    endif
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(d))],u,1,(40+40*GetUnitAbilityLevel(d,'A3OL'))*0.4)
  endif
endfunction

function Func3734 takes unit u,integer souls returns nothing
  local integer souls2=souls
  local integer i
  local integer k
  local integer lvl=GetUnitAbilityLevel(u,'A29J')+GetUnitAbilityLevel(u,'A3OJ')
  local unit d
  local real a
  local real x
  local real y
  local integer j
  local real r
  local real step=50
  local player p=GetOwningPlayer(u)
  local boolean isAgh=GetUnitAbilityLevel(u,'A3OJ')>0
  if lvl==0 then
    return
  endif
  set x=GetUnitX(u)
  set y=GetUnitY(u)
  set souls2=souls2/2
  if souls2==0 then
    return
  endif
  set a=360./(souls2*1.)
  set i=1
  set k=souls2
  call DummyDamageTracking(10)
  loop
    exitwhen i>k
    set j=2
    set d=CreateUnit(p,'e00C',x,y,0)
    call UnitAddAbility(d,'Aloc')
    call SetUnitX(d,x)
    call SetUnitY(d,y)
    call UnitApplyTimedLife(d,'BTLF',15.00)
    call UnitAddAbility(d,'A0HG')
    call SetUnitAbilityLevel(d,'A0HG',lvl)
    set r=i*a*bj_DEGTORAD
    call  ThrowSpellXY(d,'A0HG',x+50*Cos(r),y+50*Sin(r))
    set i=i+1
    set d=null
  endloop
  if isAgh then
    call RequiemOfSouls_Aghanim(u,souls,lvl)
  endif
  set d=null
endfunction

function RequiemOfSouls_SpellEffect takes nothing returns nothing
  call Func3734(GetTriggerUnit(),LoadInteger(HY,(GetHandleId(GetTriggerUnit())),710))
endfunction

function Func3736 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit u=tt_unit3
  local unit P5A=tt_unit1
  local integer QIE=GetUnitAbilityLevel(u,'A0CQ')
  local integer QJA=QIE
  local integer XXO
  set XXO=Func2086(u)
  set XXO=XXO+1
  if IsUnitType(P5A,UNIT_TYPE_HERO)==false then
    set QIE=QIE+1
  else
    set QIE=QIE+12
  endif
  set QIE=IMinBJ(XXO,QIE)
  call Stats_Fucking_Modify(u,(QIE-QJA)*2,"+DMG")
  call SetUnitAbilityLevel(u,'A0CQ',QIE)
  call SaveInteger(HY,(GetHandleId(u)),710,(QIE))
  set u=null
  set P5A=null
endfunction

function Func3737 takes nothing returns nothing
  local integer QLA
  local integer QIE
  local integer XXO
  local unit u=GetKillingUnit()
  if GetUnitTypeId(u)=='e00C' then
    set u=udg_Hero[GetPlayerId(GetOwningPlayer(u))]
  endif
  if GetUnitAbilityLevel(u,'A36D')==1 then
    set u=null
    return
  endif
  set QLA=GetUnitAbilityLevel(u,'A0CQ')
  set XXO=Func2086(u)
  if QLA<=XXO and IsDead(u)==false then
    call AddProjectile(GetTriggerUnit(),u,'h0CR',"Func3736",3000,false)
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
  endif
  set u=null
endfunction

function Func3738 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer h=GetHandleId(u)
  local integer QIE=GetUnitAbilityLevel(u,'A0CQ')
  local integer c=LoadInteger(HY,h,710)
  local integer f=R2I(QIE*0.5)+1
  call SaveInteger(HY,h,710,f)
  call SetUnitAbilityLevel(u,'A0CQ',f)
  call Stats_Fucking_Modify(u,(f-QIE)*2,"+DMG")
  call Func3734(u,c-LoadInteger(HY,h,710))
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdx",GetUnitX(u),GetUnitY(u)))
  set u=null
endfunction

function Func3739 takes nothing returns boolean
  local unit u=GetKillingUnit()
  if GetUnitTypeId(u)=='e00C' then
    set u=udg_Hero[GetPlayerId(GetOwningPlayer(u))]
  endif
  if IsUnitIllusion(GetTriggerUnit())==false then
    if(GetUnitAbilityLevel(u,'A0BR')>0 or GetUnitAbilityLevel(u,'A3T6')>0)then
      if IsPowerCog(GetTriggerUnit())==false then
        call Func3737()
      endif
    endif
    if GetUnitAbilityLevel(GetTriggerUnit(),'A0CQ')>0 then
      call Func3738()
    endif
  endif
  set u=null
  return false
endfunction

function Func3740 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(RBX,Condition(function Func3739))
  set RBX=null
  call AddToPurgeList('B04Q','PRGE')
endfunction

function Func3741 takes nothing returns nothing
  local unit source
  local real dmg=0
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A02H')
  if QIE==1 then
    set dmg=90
  elseif QIE==2 then
    set dmg=160
  elseif QIE==3 then
    set dmg=255
  else
    set dmg=335
  endif
  call DamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),1,dmg)
  set source=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)
  if((GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00))then
    call UnitAddAbility2(source,'A1H1')
  else
    call UnitAddAbility2(source,'A02R')
  endif
  call IssueTargetOrder(source,"slow",GetSpellTargetUnit())
  set source=null
endfunction

function Func3742 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  call ResetUnitAnimation(source)
  call RemoveUnit(RCX)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set source=null
  set RCX=null
  set RBX=null
  return false
endfunction

function Func3743 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=CreateUnit(GetOwningPlayer(source),'u01I',GetUnitX(source),GetUnitY(source),GetUnitFacing(source))
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(RBX,Condition(function Func3742))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),19,(RCX))
  call SetUnitVertexColorBJ(RCX,0,0,0,75)
  call SetUnitAnimation(RCX,"spell third")
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func3744 takes nothing returns nothing
  if GetUnitAbilityLevel(GetTriggerUnit(),'A08C')<5 then
    call Func3743()
  endif
endfunction

function Func3745 takes nothing returns nothing
  call EvasionSourceActivate(11,9)
endfunction

function Func3746 takes nothing returns nothing
  local real sight
  local real QUA=800
  local integer id
  local integer i
  local integer QWA=0
  local integer QIE
  local integer QYA
  if IsCourier(GetEnumUnit())then
    return
  endif
  if LoadInteger(UnitsData,GetUnitTypeId(GetEnumUnit()),0x43B762FC)>0 then
    set QUA=LoadInteger(UnitsData,GetUnitTypeId(GetEnumUnit()),0x43B762FC)*1.0
  endif
  if GetUnitTypeId(GetEnumUnit())=='E005' and GetPlayerTechResearched(GetOwningPlayer(GetEnumUnit()),'R00I',true)then
    set QUA=1800
  endif
  set QYA=R2I(QUA/128)
  if QYA>5 then
    set QWA=Func0464(QYA-5,8)
  endif
  if QWA>0 then
    set id='DRK0'-1+QWA
    if GetUnitAbilityLevel(GetEnumUnit(),id)==0 then
      call UnitRemoveAbility(GetEnumUnit(),'DRK0')
      call UnitRemoveAbility(GetEnumUnit(),'DRK1')
      call UnitRemoveAbility(GetEnumUnit(),'DRK2')
      call UnitRemoveAbility(GetEnumUnit(),'DRK3')
      call UnitRemoveAbility(GetEnumUnit(),'DRK4')
      call UnitRemoveAbility(GetEnumUnit(),'DRK5')
      call UnitRemoveAbility(GetEnumUnit(),'DRK6')
      call UnitRemoveAbility(GetEnumUnit(),'DRK7')
      call UnitAddAbility2(GetEnumUnit(),id)
    endif
  endif
endfunction

function Func3747 takes nothing returns nothing
  if GetUnitAbilityLevel(GetEnumUnit(),'DRK0')>0 or GetUnitAbilityLevel(GetEnumUnit(),'DRK1')>0 or GetUnitAbilityLevel(GetEnumUnit(),'DRK2')>0 or GetUnitAbilityLevel(GetEnumUnit(),'DRK3')>0 or GetUnitAbilityLevel(GetEnumUnit(),'DRK4')>0 or GetUnitAbilityLevel(GetEnumUnit(),'DRK5')>0 or GetUnitAbilityLevel(GetEnumUnit(),'DRK6')>0 or GetUnitAbilityLevel(GetEnumUnit(),'DRK7')>0 then
    call UnitRemoveAbility(GetEnumUnit(),'DRK0')
    call UnitRemoveAbility(GetEnumUnit(),'DRK1')
    call UnitRemoveAbility(GetEnumUnit(),'DRK2')
    call UnitRemoveAbility(GetEnumUnit(),'DRK3')
    call UnitRemoveAbility(GetEnumUnit(),'DRK4')
    call UnitRemoveAbility(GetEnumUnit(),'DRK5')
    call UnitRemoveAbility(GetEnumUnit(),'DRK6')
    call UnitRemoveAbility(GetEnumUnit(),'DRK7')
  endif
endfunction

function Func3748 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local player p=LoadPlayerHandle(HY,h,0)
  local real Y2E=LoadReal(HY,h,0)-0.5
  local group g=GetAvailableGroup()
  local group gg=GetAvailableGroup()
  local player p2
  local integer i=0
  loop
    set p2=Player(i)
    if IsPlayerEnemy(p,p2)then
      call GroupEnumUnitsOfPlayer(gg,p2,Condition(function ReturnTrue))
      call GroupAddGroup(gg,g)
    endif
    set i=i+1
    exitwhen i>15
  endloop
  call SaveReal(HY,h,0,Y2E)
  set tt_player1=p
  if Y2E>0 then
    call ForGroup(g,function Func3746)
  else
    call ForGroup(g,function Func3747)
  endif
  if Y2E<-20 then
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  call KillGroup(g)
  call KillGroup(gg)
  set t=null
endfunction

function Func3749 takes unit u,real D1E returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function Func3748))
  call SavePlayerHandle(HY,h,0,GetOwningPlayer(u))
  call SaveReal(HY,h,0,D1E)
  set t=null
endfunction

function Func3750 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,GetSpellAbilityId())
  local real D1E=50.
  local unit d=CreateUnit(Sentinels[1],'e00E',0,0,0)
  call Func2735(D1E,false)
  call Func3749(u,D1E)
  call UnitAddAbility(d,'A1T6')
  call IssueImmediateOrderByIdExFunc(d,852621)
  set d=null
  set u=null
endfunction

function Func3751 takes nothing returns boolean
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=(LoadUnitHandle(HY,(ZAE),304))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),305))
  if source==null or IsDead(source)or (GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00)or Func0898(source)==false then
    call ShowUnit(RCX,false)
  else
    call ShowUnit(RCX,true)
    call SetUnitX(RCX,GetUnitX(source))
    call SetUnitY(RCX,GetUnitY(source))
  endif
  if GetOwningPlayer(RCX)!=GetOwningPlayer(source)then
    call SetUnitOwner(RCX,GetOwningPlayer(source),true)
  endif
  set source=null
  set RCX=null
  return false
endfunction

function Func3752 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=(LoadUnitHandle(HY,(ZAE),304))
  if source!=null and IsDead(source)==false then
    if (GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00)then
      call UnitRemoveAbility(source,'A116')
      call UnitRemoveAbility(source,'A117')
      call SetUnitAbilityLevel(source,'S00A',5)
      call SetUnitAbilityLevel(source,'A08C',5)
    else
      call UnitAddAbility2(source,'A116')
      call UnitAddAbility2(source,'A117')
      call SetUnitAbilityLevel(source,'S00A',GetUnitAbilityLevel(source,'A086'))
      call SetUnitAbilityLevel(source,'A08C',GetUnitAbilityLevel(source,'A08E'))
    endif
  endif
  set source=null
endfunction

function Func3753 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer h=GetHandleId(u)
  local trigger t
  if((LoadBoolean(HY,(h),306))==false)then
    call SaveBoolean(HY,(h),306,(true))
    set t=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(t,2.00)
    call TriggerRegisterGameStateEventTimeOfDay(t,LESS_THAN,6.00)
    call TriggerRegisterGameStateEventTimeOfDay(t,GREATER_THAN,18.00)
    call TriggerAddAction(t,function Func3752)
    call SaveUnitHandle(HY,(GetHandleId(t)),304,(u))
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.5,true)
    call TriggerAddCondition(t,Condition(function Func3751))
    call SaveUnitHandle(HY,(h),304,(u))
    call SaveUnitHandle(HY,(h),305,(CreateUnit(GetOwningPlayer(u),'o01A',GetUnitX(u),GetUnitY(u),0)))
    set t=null
  endif
  if(GetLearnedSkill()=='A086')then
    call UnitAddAbility2(u,'S00A')
    if((GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00))then
      call SetUnitAbilityLevel(u,'S00A',5)
    else
      call SetUnitAbilityLevel(u,'S00A',GetUnitAbilityLevel(u,'A086'))
    endif
  elseif(GetLearnedSkill()=='A08E')then
    call UnitAddAbility(u,'A08C')
    if((GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00))then
      call SetUnitAbilityLevel(u,'A08C',5)
    else
      call SetUnitAbilityLevel(u,'A08C',GetUnitAbilityLevel(u,'A08E'))
    endif
  endif
  set u=null
endfunction

function Func3754 takes nothing returns nothing
  call AddToPurgeList('B00P','PRGE')
  call AddToPurgeList('B02M','PRGE')
  call ExecuteFunc("Func4593")
endfunction

function Func3755 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit SKE=tt_unit1
  local unit SGE=tt_unit3
  local integer QIE=(LoadInteger(HY,h,5))
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  set tt_unit1=SKE
  set tt_unit3=SGE
  set unit032=LoadUnitHandle(HY,h,45)
  set tt_real1=75.
  set tt_real2=0.1+0.15*QIE
  call ExecuteFunc("Func4681")
  if GetUnitAbilityLevel(SGE,'A3E9')==1 and LoadBoolean(HY,h,5)==false and IsMagicImmune(SKE)==false then
    if IsBlocked(SKE)==false then
      call SaveUnitHandle(TempHash,'A3E9',0,SGE)
      call SaveUnitHandle(TempHash,'A3E9',1,SKE)
      call SaveInteger(TempHash,'A3E9',0,QIE)
      call ExecuteFunc("Func3757")
    else
      call RemoveLinkenBuff(SKE)
    endif
  endif
  call UnitAddAbility2(d,'A0YL')
  call SetUnitAbilityLevel(d,'A0YL',QIE)
  call IssueTargetOrder(d,"slow",SGE)
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func3756 takes unit SKE,unit SGE,integer QIE,boolean UII returns nothing
  local integer h=GetHandleId(AddProjectile(SKE,SGE,'h010',"Func3755",1200,true))
  call SaveInteger(HY,h,5,QIE)
  call SaveBoolean(HY,h,5,UII)
endfunction

function Func3757 takes nothing returns nothing
  call LotusOrbFX(LoadUnitHandle(TempHash,'A3E9',0))
  call Func3756(LoadUnitHandle(TempHash,'A3E9',0),LoadUnitHandle(TempHash,'A3E9',1),LoadInteger(TempHash,'A3E9',0),true)
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func3758 takes nothing returns nothing
  call Func3756(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A0YM'),false)
endfunction

function Func3759 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,2)
  call UnitRemoveAbility(SKE,'A1CO')
  call UnitRemoveAbility(SKE,'B1CO')
  call RemoveSavedHandle(HY,GetHandleId(SKE),'A1CO')
  call PauseTimer(LoadTimerHandle(HY,h,1))
  call DestroyTimer(LoadTimerHandle(HY,h,1))
  call CleanTrigger(t)
  call FlushChildHashtable(HY,h)
  set t=null
  set SKE=null
endfunction

function Func3760 takes nothing returns nothing
  local integer hu=GetHandleId(CastedUnit)
  local trigger t=LoadTriggerHandle(HY,hu,'A1CO')
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,3)
  local integer QIE=GetUnitAbilityLevel(CastedUnit,'A1CO')
  if TriggeredUnit==SGE then
    if QIE==1 then
      call TriggerEvaluate(t)
    else
      call SetUnitAbilityLevel(CastedUnit,'A1CO',QIE-1)
    endif
  else
    call TriggerEvaluate(t)
  endif
  set t=null
  set SGE=null
endfunction

function Func3761 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A1CO')>0 then
    call Func3760()
  endif
endfunction

function Func3762 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0PL')
  local trigger t
  local integer h
  local timer tt
  call DestroyEffect(AddSpecialEffect("war3mapImported\\PhantomStrike.mdx",GetUnitX(SKE),GetUnitY(SKE)))
  call SetUnitX(SKE,GetUnitX(SGE))
  call SetUnitY(SKE,GetUnitY(SGE))
  if IsUnitEnemy(SKE,GetOwningPlayer(SGE))then
    if HaveSavedHandle(HY,GetHandleId(SKE),'A1CO')then
      set t=LoadTriggerHandle(HY,GetHandleId(SKE),'A1CO')
      set h=GetHandleId(t)
      set tt=LoadTimerHandle(HY,h,1)
    else
      set t=CreateTrigger()
      set h=GetHandleId(t)
      set tt=CreateTimer()
      call SaveTriggerHandle(HY,GetHandleId(SKE),'A1CO',t)
      call SaveTimerHandle(HY,h,1,tt)
      call IssueTargetOrder(SKE,"attack",SGE)
      call TriggerRegisterTimerExpireEvent(t,tt)
      call TriggerRegisterDeathEvent(t,SKE)
      call TriggerAddCondition(t,Condition(function Func3759))
      call SaveUnitHandle(HY,h,2,(SKE))
    endif
    call SaveUnitHandle(HY,h,3,(SGE))
    call UnitAddAbility3(SKE,'A1CO',4)
    call TimerStart(tt,4,false,null)
    set tt=null
  endif
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3763 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())==false then
    call Func3762()
  elseif IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))then
    call Func3762()
  else
    call RemoveLinkenBuff(GetSpellTargetUnit())
  endif
endfunction

function Func3764 takes nothing returns nothing
  call AddToPurgeList('A1CO','PRGA')
  call AddToPurgeList('B1CO','PRGA')
  call AddWrapper("Func3761",-1)
  call AddToPurgeList('B092','PRGA')
  set boolean005=true
endfunction

function Func3765 takes unit source,boolean ZSE returns nothing
  if ZSE then
    call UnitAddAbility2(source,'A13F')
  else
    call UnitRemoveAbility(source,'A13F')
    call UnitRemoveAbility(source,'B0A2')
  endif
endfunction

function Func3766 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false and(IsHeroUnitId(GetUnitTypeId(GetFilterUnit())))
endfunction

function Func3767 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local group g
  local integer c=(LoadInteger(HY,h,34))
  local boolean SRA=(LoadBoolean(HY,h,674))
  local player SIA
  if IsSentinel(GetOwningPlayer(u))then
    set SIA=Scourges[1]
  else
    set SIA=Sentinels[1]
  endif
  set c=c+1
  call SaveInteger(HY,h,34,(c))
  if u!=null and IsDead(u)==false and(GetUnitAbilityLevel(u,'A03P')>0)then
    set tt_unit1=u
    set g=GetAvailableGroup()
    if GetUnitAbilityLevel(u,'A36D')==0 then
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1625,Condition(function Func3766))
    else
      call GroupAddUnit(g,u)
    endif
    if FirstOfGroup(g)==null then
      if SRA then
        set SRA=false
        call SaveBoolean(HY,h,674,(SRA))
        set c=0
        call SaveInteger(HY,h,34,(c))
      endif
      if SRA==false then
        set c=0
        call SaveInteger(HY,h,34,(c))
        call SaveInteger(HY,(GetHandleId(u)),4302,2)
        call Func3765(u,true)
        if IsUnitVisibleEx(u,SIA)then
          if IsPlayerEnemy(GetOwningPlayer(u),LocalPlayer)and PlayerObserver==false then
            call UnitSetUsesAltIcon(u,true)
          endif
        elseif GetUnitAbilityLevel(u,'A20O')==0 then
          call UnitSetUsesAltIcon(u,false)
        endif
      endif
    else
      if SRA==false then
        set SRA=true
        set c=0
        call SaveBoolean(HY,h,674,(SRA))
        call SaveInteger(HY,h,34,(c))
      endif
      if SRA then
        set c=0
        call SaveInteger(HY,h,34,(c))
        call SaveInteger(HY,(GetHandleId(u)),4302,1)
        call Func3765(u,false)
        if GetUnitAbilityLevel(u,'A20O')==0 then
          call UnitSetUsesAltIcon(u,false)
        endif
      endif
    endif
    call KillGroup(g)
    set g=null
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3768 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterTimerEvent(RBX,0.1,true)
  call TriggerAddCondition(RBX,Condition(function Func3767))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveInteger(HY,(ZAE),34,0)
  call SaveBoolean(HY,(ZAE),674,(false))
  set RBX=null
  set source=null
endfunction

function Func3769 takes nothing returns nothing
  if GetUnitAbilityLevel(GetTriggerUnit(),'A03P')==1 then
    call Func3768()
  endif
  call EvasionSourceActivate(4,99999)
endfunction

function Func3770 takes nothing returns nothing
  local unit d=GetEnumUnit()
  if IsUnitInGroup(d,group016)==false and IsUnitVisibleEx(d,GetOwningPlayer(unit231))then
    call GroupAddUnit(group016,d)
    call DamageTarget(unit231,d,1,100)
    call Func0847(d,0.5+0.5*GetUnitAbilityLevel(unit231,'A0RA'),'A3UE','B08F',0)
    call StunTargetEx(d,0.1,true)
    call Func1330(unit231,d,'B08F')
  endif
  set d=null
endfunction

function Func3771 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer i
  local group g=(LoadGroupHandle(HY,(h),22))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local group gg=GetAvailableGroup()
  local unit SKE=(LoadUnitHandle(HY,(h),221))
  set tt_unit1=SKE
  set unit231=SKE
  call GroupEnumUnitsInRange(gg,x,y,300,Condition(function Func0816))
  set group016=g
  call ForGroup(gg,function Func3770)
  call KillGroup(gg)
  if GetTriggerEvalCount(t)>70 then
    set i=1
    loop
      call DestroyEffect(LoadEffectHandle(HY,(h),(2700+i)))
      set i=i+1
      exitwhen i>16
    endloop
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set g=null
  set gg=null
  set SKE=null
  return false
endfunction

function Func3772 takes nothing returns nothing
  local integer i=1
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real dx
  local real dy
  local string s="Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl"
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local group g=GetAvailableGroup()
  call PlaySoundAtPos(sound006,x,y)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func3771))
  call SaveGroupHandle(HY,(h),22,(g))
  call SaveUnitHandle(HY,(h),221,(GetTriggerUnit()))
  call SaveReal(HY,(h),6,x)
  call SaveReal(HY,(h),7,y)
  loop
    set dx=x+300.*Cos(i*360/16*bj_DEGTORAD)
    set dy=y+300.*Sin(i*360/16*bj_DEGTORAD)
    call SaveEffectHandle(HY,(h),(2700+i),AddSpecialEffect(s,dx,dy))
    set i=i+1
    exitwhen i>16
  endloop
  set t=null
  set g=null
endfunction

function Func3773 takes nothing returns nothing
  call PreloadUnit('h094')
  call PreloadUnit('h095')
  call PreloadUnit('h096')
  call AddToPurgeList('B08F','PRGE')
  call AddToPurgeList('B08E','PRGE')
  call AddToPurgeList('BNrd','PRGE')
  call AddToPurgeList('A3TE','PRGE')
  call AddToPurgeList('A3UE','PRGE')
endfunction

function Func3774 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),393))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=99
  local integer ZCE=(LoadInteger(HY,(ZAE),34))
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A2MB' then
    call KillUnit(RCX)
    call CleanTrigger(RBX)
    call FlushChildHashtable(HY,(ZAE))
  else
    set ZCE=ZCE+1
    call SaveInteger(HY,(ZAE),34,(ZCE))
  endif
  if QIE==1 then
    set ZBE=155
  elseif QIE==2 then
    set ZBE=132
  endif
  call SetUnitX(RCX,GetUnitX(source))
  call SetUnitY(RCX,GetUnitY(source))
  if ZCE>ZBE then
    call KillUnit(RCX)
    call CleanTrigger(RBX)
    call FlushChildHashtable(HY,(ZAE))
  elseif ZCE>20 then
    call UnitRemoveAbility(RCX,'Aloc')
    call ShowUnit(RCX,true)
    call UnitAddAbility2(RCX,'Aloc')
  endif
  set RBX=null
  set RCX=null
  set source=null
  return false
endfunction

function Func3775 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
  call Func0770(GetEnumUnit(),true,real023,real024)
  call PanCameraToTimedForPlayer(GetOwningPlayer(GetEnumUnit()),real023,real024,0)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
endfunction

function Func3776 takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false and(Func0632(GetFilterUnit())or IsUnitIdType(GetUnitTypeId(GetFilterUnit()),UNIT_TYPE_HERO))
endfunction

function Func3777 takes unit source,unit RCX returns nothing
  local group g=GetAvailableGroup()
  call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(source),GetUnitY(source)))
  call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(RCX),GetUnitY(RCX)))
  set real023=GetUnitX(RCX)
  set real024=GetUnitY(RCX)
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),475,Condition(function Func3776))
  call ForGroup(g,function Func3775)
  call KillGroup(g)
  set g=null
endfunction

function Func3778 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or RCX==null or IsDead(RCX)then
    call CleanTrigger(RBX)
    call FlushChildHashtable(HY,(ZAE))
    call UnitRemoveType(RCX,UNIT_TYPE_PEON)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A0R0',true)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2MB',false)
    call Error(GetOwningPlayer(source),GetObjectName('n03F'))
  elseif source==null or IsDead(source)then
    call CleanTrigger(RBX)
    call FlushChildHashtable(HY,(ZAE))
    call UnitRemoveType(RCX,UNIT_TYPE_PEON)
    call Error(GetOwningPlayer(source),GetObjectName('n03G'))
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A0R0',true)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2MB',false)
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A2MB' then
      call CleanTrigger(RBX)
      call FlushChildHashtable(HY,(ZAE))
      call UnitRemoveType(RCX,UNIT_TYPE_PEON)
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A0R0',true)
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2MB',false)
    endif
  else
    call CleanTrigger(RBX)
    call FlushChildHashtable(HY,(ZAE))
    call UnitRemoveType(RCX,UNIT_TYPE_PEON)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A0R0',true)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2MB',false)
    call Func3777(source,RCX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3779 takes nothing returns boolean
  local real result
  if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))or IsDead(GetFilterUnit())or Func2806(GetFilterUnit())==false or GetOwningPlayer(GetFilterUnit())==Player(15)then
    return false
  endif
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false then
    set result=DistanceBetweenXY(real024,real025,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
    if result<real023 then
      set real023=result
      set tt_unit1=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func3780 takes unit source returns unit
  local group g
  local real result
  local real ZEE
  set result=GetSpellTargetX()
  set ZEE=GetSpellTargetY()
  set g=GetAvailableGroup()
  set integer089=GetUnitAbilityLevel(source,'A0R0')
  set tt_unit1=null
  set real023=9999
  set real024=result
  set real025=ZEE
  call GroupEnumUnitsInRange(g,result,ZEE,4000,Condition(function Func3779))
  call KillGroup(g)
  set g=null
  return tt_unit1
endfunction

function Func3781 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit RCX=GetSpellTargetUnit()
  local real result
  local real ZEE
  local unit M_X
  if RCX==null then
    set RCX=Func3780(source)
  endif
  if RCX==null then
    call Error(GetOwningPlayer(source),GetObjectName('n03H'))
    return
  endif
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A0R0',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2MB',true)
  call UnitAddAbility2(source,'A2MB')
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(source))then
    call nPngMinimapEx(GetUnitX(RCX),GetUnitY(RCX),3,255,255,255,false)
  endif
  call TriggerRegisterTimerEvent(RBX,6-GetUnitAbilityLevel(source,'A0R0'),false)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func3778))
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("war3mapImported\\DarkHands.mdl",RCX,"overhead")))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  call UnitAddType(RCX,UNIT_TYPE_PEON)
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,.03,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func3774))
  call SaveInteger(HY,(ZAE),5,(GetUnitAbilityLevel(source,'A0R0')))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set M_X=CreateUnit(GetOwningPlayer(source),'h098',GetUnitX(source),GetUnitY(source),0)
  call SaveUnitHandle(HY,(ZAE),393,(M_X))
  call ShowUnit(M_X,false)
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func3782 takes nothing returns nothing
  local unit source=GetSpellTargetUnit()
  local unit RCX=GetTriggerUnit()
  if source!=null then
    if IsUnitAlly(source,GetOwningPlayer(RCX))==false then
      call InterruptUnitError(RCX,'n041')
    elseif IsUnitType(source,UNIT_TYPE_HERO)or GetUnitAbilityLevel(source,'A04R')>0 then
      call InterruptUnitError(RCX,'n041')
    endif
  endif
  if source==null then
    set source=Func3780(RCX)
  endif
  if source==null then
    call InterruptUnitError(RCX,'n040')
  endif
  set source=null
  set RCX=null
endfunction

function Func3783 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit HDE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local timer tt=LoadTimerHandle(HY,h,10)
  local integer QIE=LoadInteger(HY,h,5)
  if GetUnitAbilityLevel(SGE,'BNrd')>0 then
    call DamageTarget(HDE,SGE,1,GetUnitState(SGE,UNIT_STATE_MAX_LIFE)*0.0075*QIE)
  else
    call RemoveSavedHandle(HY,GetHandleId(SGE),'A262')
    call PauseTimer(tt)
    call DestroyTimer(tt)
    call CleanTrigger(t)
    call FlushChildHashtable(HY,h)
  endif
  set tt=null
  set t=null
  set SGE=null
  set HDE=null
endfunction

function Func3784 takes unit SKE,unit SGE,integer QIE returns nothing
  local integer hu=GetHandleId(SGE)
  local trigger t
  local integer h
  local timer tt
  call UnitAddAbilityTimedExF(SGE,'A3TE',1,2.01,'BNrd')
  if HaveSavedHandle(HY,hu,'A262')then
    set t=LoadTriggerHandle(HY,hu,'A262')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,10)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'A262',t)
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,10,tt)
    call SaveUnitHandle(HY,h,0,SKE)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveInteger(HY,h,5,QIE)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerAddCondition(t,Condition(function Func3783))
  endif
  call TimerStart(tt,0.98,true,null)
  set SGE=null
  set SKE=null
  set t=null
  set tt=null
endfunction

function Func3785 takes unit u,real x,real y,integer QIE returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,x,y,425,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call Func3784(u,u2,QIE)
    call DamageTarget(u,u2,1,15*QIE+10)
  endloop
endfunction

function Func3786 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local integer c=LoadInteger(HY,h,1)
  call Func3785(LoadUnitHandle(HY,h,0),LoadReal(HY,h,0),LoadReal(HY,h,1),LoadInteger(HY,h,5))
  if c==0 then
    call TimerStart(t,1.,true,function Func3786)
  endif
  call SaveInteger(HY,h,1,c+1)
  if c==5 then
    call FlushChildHashtable(HY,h)
    call DestroyTimer(t)
  endif
  set t=null
endfunction

function Func3787 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local integer QIE=GetUnitAbilityLevel(u,'A01I')
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',x,y,0)
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call TimerStart(t,0.,false,function Func3786)
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,x)
  call SaveReal(HY,h,1,y)
  call SaveInteger(HY,h,5,QIE)
  call SaveInteger(HY,h,1,0)
  call UnitAddAbility(d,'A262')
  call ImminentTriggeredPointOrder(d,852238,x,y)
  set t=null
  set u=null
  set d=null
endfunction

function Func3788 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local integer d=(LoadInteger(HY,(h),34))
  call Stat_Sub(u,d,"+DMG")
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set u=null
  set t=null
  return false
endfunction

function Func3789 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local unit u2=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'AIcd')
  local integer FXE
  local integer sumbonus
  if IsUnitInRange(u,u2,925)and IsDead(u)==false and IsUnitAlly(u,GetOwningPlayer(u2))==false and GetUnitTypeId(u2)!='n0F5' and IsUnitIllusion(u2)==false and GetCloneHeroId(u2)==false and GetUnitAbilityLevel(u2,'A04R')==0 and GetUnitAbilityLevel(u,'A36D')==0 then
    if IsUnitType(u2,UNIT_TYPE_HERO)then
      set FXE=5*QIE+25
    else
      set FXE=5
    endif
    call Stat_Add(u,FXE,"+DMG")
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,20+QIE*10,false)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func3788))
    call SaveUnitHandle(HY,(h),2,(u))
    call SaveInteger(HY,(h),34,(FXE))
  endif
  set t=null
  set u=null
  set u2=null
  return false
endfunction

function Func3790 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local integer QIE=(LoadInteger(HY,(GetHandleId(u)),783))
  local integer ZBE=(LoadInteger(HY,(h),238))
  if ZBE!=QIE then
    call AddBonusDamage(u,QIE)
    call SaveInteger(HY,(h),238,(QIE))
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3791 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func3789))
  call SaveUnitHandle(HY,(h),2,(u))
  set u=null
  set t=null
endfunction

function Func3792 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  local group g
  local unit u2
  local real dmg
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(u,'A06K')==0 then
    call DestroyTrigger(t)
    call FlushChildHashtable(HY,h)
    call RemoveSavedHandle(HY,hu,'A0AZ')
  else
    set g=GetAvailableGroup()
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),275,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    set dmg=6*GetUnitAbilityLevel(u,'A06K')
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call DamageTarget(u,u2,1,dmg)
      call UnitAddAbilityTimedExF(u2,'A3T5',1,.5,'a3T5')
      call GroupRemoveUnit(g,u2)
    endloop
    call DamageTarget(u,u,1,dmg)
    call KillGroup(g)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func3793 takes unit u,boolean b returns nothing
  local trigger t=null
  local integer h=0
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'A0AZ')then
    set t=LoadTriggerHandle(HY,hu,'A0AZ')
    set h=GetHandleId(t)
  elseif b then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'A0AZ',t)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerRegisterTimerEvent(t,0.2,true)
    call TriggerRegisterTimerEvent(t,0.0,false)
    call TriggerAddCondition(t,Condition(function Func3792))
    call SaveUnitHandle(HY,h,0,u)
  endif
  if b==false then
    if t!=null then
      call DestroyTrigger(t)
      call FlushChildHashtable(HY,h)
      call RemoveSavedHandle(HY,hu,'A0AZ')
    endif
  endif
  set t=null
endfunction

function Func3794 takes nothing returns boolean
  return GetUnitAbilityLevel(GetTriggerUnit(),'A06K')>0
endfunction

function Func3795 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if IsDead(u)or(IsUnitSilenced(u)==false and IsUnitHexed(u)==false)then
    call Func3793(u,false)
  endif
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set u=null
  set t=null
endfunction

function Func3796 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call TimerStart(t,0,false,function Func3795)
  set t=null
endfunction

function Func3797 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  if GetUnitCurrentOrder(u)!=851973 then
    if(GetIssuedOrderId()==852177)then
      call Func3793(u,true)
    endif
    if(GetIssuedOrderId()==852178)then
      call Func3796()
    endif
  endif
  set u=null
endfunction

function Func3798 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetEnumUnit())
  if GetTriggerUnit()!=GetEnumUnit()then
    call SaveInteger(HY,(ZAE),672,((LoadInteger(HY,(ZAE),672))+1))
  endif
endfunction

function Func3799 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='U00F' and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction

function Func3800 takes nothing returns boolean
  local group g
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and GetCloneHeroId(GetTriggerUnit())==false and IsUnitIllusion(GetTriggerUnit())==false then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),475,Condition(function Func3799))
    if GetUnitTypeId(GetKillingUnit())=='U00F' then
      call GroupAddUnit(g,GetKillingUnit())
    endif
    call ForGroup(g,function Func3798)
    call KillGroup(g)
    set g=null
  endif
  return false
endfunction

function Func3801 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  if GetTriggerEvalCount(RBX)==1 then
    call ShowUnit(source,false)
  elseif GetTriggerEvalCount(RBX)>80 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3802 takes nothing returns boolean
  local unit source
  local unit RCX
  local unit M_X
  local trigger RBX
  local integer ZAE
  if GetUnitTypeId(GetTriggerUnit())=='U00F' then
    set RCX=GetTriggerUnit()
    set M_X=GetKillingUnit()
    if RCX==M_X then
      set source=CreateUnit(GetOwningPlayer(RCX),'h0BB',GetUnitX(RCX),GetUnitY(RCX),GetUnitFacing(RCX))
      call SetUnitTimeScale(source,0.75)
      call UnitApplyTimedLife(source,'BTLF',1.0)
      call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodAbomination.mdl",source,"origin"))
      set source=null
      call SetSoundPosition(sound037,GetUnitX(RCX),GetUnitY(RCX),50)
      call SetSoundVolumeBJ(sound037,100)
      call PlaySoundBJ(sound037)
      call SetSoundPosition(sound038,GetUnitX(RCX),GetUnitY(RCX),50)
      call SetSoundVolumeBJ(sound038,100)
      call PlaySoundBJ(sound038)
      set RBX=CreateTrigger()
      set ZAE=GetHandleId(RBX)
      call TriggerRegisterTimerEvent(RBX,.1,true)
      call TriggerAddCondition(RBX,Condition(function Func3801))
      call SaveUnitHandle(HY,(ZAE),2,(RCX))
      set RBX=null
    endif
    set RCX=null
    set M_X=null
  endif
  return false
endfunction

function Func3803 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local unit source=(LoadUnitHandle(HY,(GetHandleId(RBX)),2))
  local integer ZAE=GetHandleId(source)
  local integer QIE=(LoadInteger(HY,(ZAE),672))
  local integer ZBE=(LoadInteger(HY,(ZAE),673))
  local integer ZCE=GetUnitAbilityLevel(source,'A06D')
  local integer JUX=R2I(I2R(QIE)*(0.5+0.5*ZCE))
  if JUX>ZBE then
    call ModifyHeroStat(0,source,0,JUX-ZBE)
    call Func2328(source,'A3QN',JUX-ZBE)
    call SaveInteger(HY,(ZAE),673,(JUX))
    call SaveInteger(HeroStats,GetHandleId(GetOwningPlayer(source)),'FLSH',JUX)
    call TextTagOnUnit("+"+I2S(JUX-ZBE)+" "+GetObjectName('n0MJ'),3,source,0.023,0,255,0,230,Func0590(source)or PlayerObserver)
    call SetUnitScale(source,RMinIF(1.4,1+0.01*QIE),0,0)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3804 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.5,true)
  call TriggerAddCondition(RBX,Condition(function Func3803))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set source=null
  set RBX=null
endfunction

function Func3805 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func3802))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func3800))
  set t=CreateTrigger()
  call TriggerRegisterHumanUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
  call TriggerAddCondition(t,Condition(function Func3794))
  call TriggerAddAction(t,function Func3797)
  set t=null
  call AddDispellableBuff('B03I')
endfunction

function Func3806 takes unit source,unit RCX returns nothing
  local unit M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
  local unit M0X=CreateUnit(GetOwningPlayer(source),'e02A',GetUnitX(RCX),GetUnitY(RCX),0)
  call UnitAddAbility2(M_X,'A0PZ')
  call IssueTargetOrder(M_X,"thunderbolt",RCX)
  call UnitApplyTimedLife(M_X,'BTLF',1)
  call UnitApplyTimedLife(M0X,'BTLF',1)
  set M_X=null
  set M0X=null
endfunction

function Func3807 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer i=(LoadInteger(HY,h,376))
  local boolean S9A=(LoadBoolean(HY,h,377))
  local unit u
  local unit TVA=(LoadUnitHandle(HY,h,(2100+i)))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
  else
    if S9A then
      set u=LoadUnitHandle(HY,h,17)
      if DistanceBetweenXY(GetUnitX(TVA),GetUnitY(TVA),GetUnitX(u),GetUnitY(u))<1200 then
        call SetUnitX(u,GetUnitX(TVA))
        call SetUnitY(u,GetUnitY(TVA))
        if ModuloInteger(GetTriggerEvalCount(t),3)==0 and IsUnitEnemy(u,GetOwningPlayer(TVA))then
          call StunTargetEx(u,0.1,false)
        endif
      else
        call SaveBoolean(HY,h,377,false)
      endif
      if u==null then
        call SaveBoolean(HY,h,377,false)
      endif
    endif
    call RemoveUnit(TVA)
    set i=i-1
    call SaveInteger(HY,h,376,(i))
    if i==0 then
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      if S9A and(IsUnitInRegion(region008,u)or Func0429(GetUnitX(u),GetUnitY(u))==false)then
        call Func0776(u)
      endif
    endif
  endif
  set t=null
  set u=null
  set TVA=null
  return false
endfunction

function Func3808 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer i=(LoadInteger(HY,h,376))
  local integer QIE=(LoadInteger(HY,h,5))
  local boolean CTI=LoadBoolean(HY,h,5)
  local real GXE=(LoadReal(HY,h,13))
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local trigger R4I=(LoadTriggerHandle(HY,h,11))
  local integer ZCE=GetHandleId(R4I)
  local group g
  local unit u
  local real ZEE
  local real ZWE
  local real ZYE
  local real A7X=110
  if i<(22.5+2.5*QIE+LoadReal(HY,h,5))then
    set i=i+1
    if i==1 then
      set A7X=50
    elseif i==2 then
      set A7X=75
    endif
    call SaveInteger(HY,h,376,(i))
    set ZEE=GetUnitX(SKE)+i*40*Cos(GXE*bj_DEGTORAD)
    set ZWE=GetUnitY(SKE)+i*40*Sin(GXE*bj_DEGTORAD)
    call SaveUnitHandle(HY,(ZCE),(2100+i),(CreateUnit(GetOwningPlayer(SKE),'u00H',ZEE,ZWE,GXE)))
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,ZEE,ZWE,A7X,Condition(function Func0837))
    call GroupRemoveUnit(g,SKE)
    set u=GroupPickRandomUnit(g)
    call KillGroup(g)
    if u!=null then
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call TriggerRegisterTimerEvent(R4I,0.025,true)
      call TriggerRegisterDeathEvent(R4I,u)
      call TriggerAddCondition(R4I,Condition(function Func3807))
      call SaveInteger(HY,(ZCE),376,(i))
      call SaveBoolean(HY,(ZCE),377,(true))
      call SaveUnitHandle(HY,(ZCE),17,(u))
      if IsUnitEnemy(u,GetOwningPlayer(SKE))then
        if IsUnitType(u,UNIT_TYPE_HERO)then
          call SaveInteger(HeroStats,GetHandleId(GetTriggerPlayer()),'HOOK',LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(SKE)),'HOOK')+1)
          call Traffic_RegisterData("HA_Hits"+I2S(GetPlayerId(GetOwningPlayer(SKE))),LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(SKE)),'HOOK'))
          call AddTimedKeyToAgent(SKE,4400,1.5)
        endif
        call Func3806(SKE,u)
        if CTI then
          set QIE=QIE+1
        endif
        call DamageTarget(SKE,u,7,90*QIE)
        call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",u,"origin"))
      endif
    endif
  else
    if GetUnitAbilityLevel(SKE,'B35F')==1 and i<10 then
      call UnitRemoveAbility(SKE,'B35F')
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call TriggerRegisterTimerEvent(R4I,0.025,true)
    call TriggerAddCondition(R4I,Condition(function Func3807))
    call SaveInteger(HY,(ZCE),376,(i))
    call SaveBoolean(HY,(ZCE),377,(false))
  endif
  set t=null
  set SKE=null
  set R4I=null
  set g=null
  set u=null
  return false
endfunction

function Func3809 takes nothing returns nothing
  local timer tt=GetExpiredTimer()
  local integer ht=GetHandleId(tt)
  local unit SKE=LoadUnitHandle(HY,ht,0)
  local real GXE=LoadReal(HY,ht,0)
  local integer QIE=LoadInteger(HY,ht,0)
  local integer KPX=LoadInteger(HY,ht,1)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real TOA=0
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set TOA=200./40.
  endif
  call UnitAddAbilityTimedExF(SKE,'A35F',1,0.25,'B35F')
  call FlushChildHashtable(HY,ht)
  call DestroyTimer(tt)
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveReal(HY,h,5,TOA)
  if KPX>0 then
    call SaveBoolean(HY,h,5,true)
    call SaveInteger(HY,h,5,KPX)
  endif
  call SaveReal(HY,h,13,((GXE)*1.0))
  call SaveInteger(HY,h,376,0)
  call SaveTriggerHandle(HY,h,11,(CreateTrigger()))
  call TriggerRegisterTimerEvent(t,0.025,true)
  call TriggerAddCondition(t,Condition(function Func3808))
  call SaveInteger(HeroStats,GetHandleId(GetTriggerPlayer()),'HOOK'+1,LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(SKE)),'HOOK'+1)+1)
  call Traffic_RegisterData("HA_Total"+I2S(GetPlayerId(GetOwningPlayer(SKE))),LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(SKE)),'HOOK'+1))
  set SKE=null
  set tt=null
  set t=null
endfunction

function Func3810 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func3809)
  local unit SKE=GetTriggerUnit()
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(SKE,'A06I'))
  call SaveInteger(HY,h,1,GetUnitAbilityLevel(SKE,'A3NV'))
  call SaveReal(HY,h,0, AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetSpellTargetX(),GetSpellTargetY()))
  set SKE=null
endfunction

function Func3811 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=(LoadInteger(HY,h,5))
  local real dmg
  local integer c=(LoadInteger(HY,h,34))
  local boolean b=GetTriggerEventId()==EVENT_WIDGET_DEATH
  if b or GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
    if b or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()=='A0FL')then
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
        call Func0656(SKE)
      endif
    endif
  elseif GetTriggerEvalCount(t)>8 or(c>=3 and IsUnitIdType(GetUnitTypeId(SGE),UNIT_TYPE_HERO))then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call Func0656(SKE)
  else
    if QIE>0 then
      set c=c+1
      if(c<4 and IsUnitType(SGE,UNIT_TYPE_HERO))or(c<8 and IsUnitType(SGE,UNIT_TYPE_HERO)==false)then
        if GetUnitAbilityLevel(SKE,'Aloc')==1 then
          set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
        endif
        if IsUnitType(SKE,UNIT_TYPE_HERO)then
          set dmg=(30+30*QIE)+(0.15+0.15*QIE)*GetHeroStr(SKE,true)
        else
          set dmg=(30+30*QIE)+(0.15+0.15*QIE)*GetHeroStr(udg_Hero[GetPlayerId(GetOwningPlayer(SKE))],true)
        endif
        call SetUnitState(SKE,UNIT_STATE_LIFE,GetUnitState(SKE,UNIT_STATE_LIFE)+dmg)
        call DamageTarget(SKE,SGE,1,dmg)
      endif
      call SaveInteger(HY,h,34,(c))
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3812 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0FL')
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func3811))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveInteger(HY,h,34,0)
  call TriggerEvaluate(t)
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3813 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit IDO=(LoadUnitHandle(HY,h,19))
  local integer QIE=(LoadInteger(HY,h,5))
  local group g
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SetUnitAnimation(IDO,"death")
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>0 then
    call Func3410(IDO,4.,1.)
  endif
  set t=null
  set IDO=null
  return false
endfunction

function Func3814 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A09D')
  local real x=SafeX50(GetSpellTargetX())
  local real y=SafeY50(GetSpellTargetY())
  local unit IDO
  local integer id=0
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  if QIE==1 then
    set id='o00M'
  elseif QIE==2 then
    set id='o00L'
  elseif QIE==3 then
    set id='o00O'
  else
    set id='o00N'
  endif
  set IDO=CreateUnit(GetTriggerPlayer(),id,x,y,0)
  call TriggerRegisterDeathEvent(t,IDO)
  call TriggerRegisterUnitEvent(t,IDO,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func3813))
  call SaveUnitHandle(HY,h,19,(IDO))
  call SaveInteger(HY,h,5,QIE)
  call SetUnitAbilityLevel(IDO,'A08T',QIE)
  call SetUnitAbilityLevel(IDO,'A0CF',QIE)
  call IssueImmediateOrderByIdExFunc(IDO,852512)
  call UnitApplyTimedLife(IDO,'BTLF',30)
  set SKE=null
  set IDO=null
  set t=null
endfunction

function Func3815 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetUnitAbilityLevel(u,'B01N')==0 or IsDead(u)then
    call PauseTimer(t)
    call DestroyTimer(t)
    call UnitRemoveAbility(u,LoadInteger(HY,h,0))
    call FlushChildHashtable(HY,h)
    call UnitRemoveAbility(u,'A31C')
    call UnitRemoveAbility(u,'B31C')
    call UnitRemoveAbility(u,'A38G')
    call UnitRemoveAbility(u,'B38G')
    call UnitRemoveAbility(u,LoadInteger(HY,h,2))
  endif
  set u=null
  set t=null
endfunction

function Func3816 takes unit SKE,unit SGE,integer QIE returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local integer id
  local integer UYE
  if IsPlayerAlly(GetOwningPlayer(SKE),GetOwningPlayer(SGE))then
    set id='A318'
    set UYE='A318'
    call UnitAddAbility2(SGE,'A31C')
  else
    set id='A319'
    set UYE='A319'
    call UnitAddAbilityTimedExF(SGE,'A3C0'-1+QIE,1,3.5,'B38G')
  endif
  call TimerStart(t,0.1,true,function Func3815)
  call SaveUnitHandle(HY,h,0,SGE)
  call SaveInteger(HY,h,0,id)
  call UnitAddAbility3(SGE,id,QIE)
  call SaveInteger(HY,h,2,'A3C0'-1+QIE)
  set t=null
endfunction

function Func3817 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call IssueTargetOrderByIdFuckingEx(LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0),LoadUnitHandle(HY,h,1),true)
  call DelayedCallBackClean()
endfunction

function Func3818 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A2TD')
  local unit d
  if IsUnitAlly(SGE,GetOwningPlayer(SKE))or IsBlocked(SGE)==false then
    call Func0377(SGE,'A0CE',1)
    if Func0595(SGE)==false then
      call Func3816(SKE,SGE,QIE)
    endif
  elseif IsBlocked(SGE)then
    call RemoveLinkenBuff(SGE)
  endif
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func3819 takes nothing returns nothing
  if(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false and IsMagicImmune(GetSpellTargetUnit())==false)or Func0595(GetSpellTargetUnit())then
    call Func2329()
  else
    call Func0658('n0K9')
  endif
endfunction

function PugnaEtherealOrder takes nothing returns nothing
  local unit t=GetOrderTargetUnit()
  local unit u=GetTriggerUnit()
  if Func0610(t)and Func0599(t)==false then
    call InterruptUnitError(u,'TX0A')
  endif
  set t=null
  set u=null
endfunction

function Func3821 takes nothing returns nothing
  set boolean016=true
  call HideAbility('A318')
  call HideAbility('A319')
  call AddToPurgeList('A3C0','PRGC')
  call AddToPurgeList('A3C1','PRGC')
  call AddToPurgeList('A3C2','PRGC')
  call AddToPurgeList('A3C3','PRGC')
  call AddToPurgeList('B38G','PRGC')
  call AddToPurgeList('A38G','PRGC')
  call AddToPurgeList('A31C','PRGC')
  call AddToPurgeList('A318','PRGC')
  call AddToPurgeList('A319','PRGC')
  call AddToPurgeList('B01N','PRGC')
endfunction

function Func3822 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer QIE=GetUnitAbilityLevel(SKE,'A0CC')
  local real dmg=80+40*QIE
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A02Z')
    set dmg=120+60*QIE
  endif
  set dmg=dmg*0.25
  if GetUnitAbilityLevel(SKE,'Bdcl')==0 or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()=='A0CC' or GetSpellAbilityId()=='A02Z'))then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
    if LoadBoolean(HY,h,0)and GetWidgetLife(SKE)+dmg>=GetUnitState(SKE,UNIT_STATE_MAX_LIFE)then
      call SetUnitState(SKE,UNIT_STATE_MANA,GetUnitState(SKE,UNIT_STATE_MANA)+dmg+GetUnitState(SKE,UNIT_STATE_LIFE)-GetUnitState(SKE,UNIT_STATE_MAX_LIFE))
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3823 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveBoolean(HY,h,0,IsUnitEnemy(SKE,GetOwningPlayer(SGE)))
  if LoadBoolean(HY,h,0)==false then
    call FuckingAssistBuffWrap(SKE,SGE)
  endif
  call TriggerRegisterTimerEvent(t,0.25,true)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func3822))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3824 takes nothing returns nothing
  if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)then
    call Func3823()
  endif
  call SaveUnitHandle(HY,GetHandleId(GetTriggerUnit()),'A0CC',GetSpellTargetUnit())
endfunction

function Func3825 takes unit THA,unit SGE returns nothing
  local real TJA=10+20*integer513
  local real D8A=70+30*integer513
  local real dmg=(TJA+D8A*real100/700)*0.5
  call DamageTarget(THA,SGE,1,dmg)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",SGE,"chest"))
endfunction

function Func3826 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local group g=group035
  local unit RCX=unit232
  if IsUnitInGroup(source,g)==false then
    call GroupAddUnit(g,source)
    call Func3825(RCX,source)
  endif
  set source=null
  set g=null
  set RCX=null
endfunction

function Func3827 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  local group g=(LoadGroupHandle(HY,(ZAE),133))
  local effect I4X
  local integer QIE=GetTriggerEvalCount(RBX)
  local real result
  local real ZEE=GetUnitX(source)
  local real ZWE
  local real ZYE=GetUnitY(source)
  local integer ZBE
  local integer ZCE
  local group IBI=GetAvailableGroup()
  call SetUnitX(RCX,GetUnitX(source))
  call SetUnitY(RCX,GetUnitY(source))
  set group035=g
  set unit232=source
  set integer513=LoadInteger(HY,ZAE,5)
  if QIE>20 then
    set ZCE=21*36+(20-QIE)*36
    set real100=ZCE
    set ZBE=0
    loop
      exitwhen ZBE>36
      set result=ZEE+ZCE*Cos(360*ZBE/36*bj_DEGTORAD)
      set ZWE=ZYE+ZCE*Sin(360*ZBE/36*bj_DEGTORAD)
      set tt_unit1=source
      call GroupEnumUnitsInRange(IBI,result,ZWE,100,Condition(function Func0824))
      call ForGroup(IBI,function Func3826)
      set ZBE=ZBE+1
    endloop
  else
    set ZCE=QIE*36
    set real100=ZCE
    set ZBE=0
    loop
      exitwhen ZBE>36
      set result=ZEE+ZCE*Cos(360*ZBE/36*bj_DEGTORAD)
      set ZWE=ZYE+ZCE*Sin(360*ZBE/36*bj_DEGTORAD)
      set tt_unit1=source
      call GroupEnumUnitsInRange(IBI,result,ZWE,100,Condition(function Func0824))
      call ForGroup(IBI,function Func3826)
      set ZBE=ZBE+1
    endloop
  endif
  call KillGroup(IBI)
  if QIE==40 then
    call KillUnit(RCX)
    call Func0479(RCX,0.1)
    call KillGroup(g)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif QIE==20 then
    call GroupClear(g)
    set I4X=null
  endif
  set RBX=null
  set RCX=null
  set g=null
  set source=null
  set IBI=null
  return false
endfunction

function Func3828 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h092',result,ZEE,0)
  local integer ZAE=0
  local integer QIE=36
  local group g=GetAvailableGroup()
  local trigger RBX=CreateTrigger()
  local integer ZBE=GetHandleId(RBX)
  call SaveEffectHandle(HY,(ZBE),32,(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",source,"origin")))
  call SaveGroupHandle(HY,(ZBE),133,(g))
  call SaveUnitHandle(HY,(ZBE),2,(source))
  call SaveUnitHandle(HY,(ZBE),19,(RCX))
  call SaveInteger(HY,ZBE,5,GetUnitAbilityLevel(source,'A1E7'))
  call TriggerRegisterTimerEvent(RBX,0.06,true)
  call TriggerAddCondition(RBX,Condition(function Func3827))
  set RBX=null
  set RCX=null
  set source=null
endfunction

function Func3829 takes unit TPA,unit TQA,unit SGE,integer QIE returns nothing
  local unit d=CreateUnit(GetOwningPlayer(TPA),'e00E',GetUnitX(TQA),GetUnitY(TQA),0)
  call UnitAddAbility2(d,'A1AK')
  call SetUnitAbilityLevel(d,'A1AK',QIE)
  call Func1430(d,SGE,852119)
  call UnitAddAbility2(d,'A18D')
  call SetUnitAbilityLevel(d,'A18D',QIE)
  call Func1430(d,SGE,852111)
  set d=null
endfunction

function Func3830 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit u=GetSpellTargetUnit()
  local integer QIE
  if GetUnitAbilityLevel(u,'B03X')==1 and Func0795(GetSpellAbilityId())==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(u))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and GetUnitAbilityLevel(u,'A36D')==0 then
    set QIE=GetUnitAbilityLevel(u,'A1E6')
    call Func3829(u,u,GetTriggerUnit(),QIE)
  endif
  set RBX=null
  set u=null
  return false
endfunction

function Func3831 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func3830))
  set source=null
  set RBX=null
endfunction

function Func3832 takes unit source,integer ZAE returns nothing
  local integer array JTX
  local integer QIE=ZAE
  local integer ZBE=1
  local integer ZCE=0
  local integer JUX
  if ZAE<1 then
    call UnitRemoveAbility(source,integers151[0])
    call UnitRemoveAbility(source,integers151[1])
    call UnitRemoveAbility(source,integers151[2])
    call UnitRemoveAbility(source,integers151[3])
    call UnitRemoveAbility(source,integers151[4])
    call UnitRemoveAbility(source,integers151[5])
    call UnitRemoveAbility(source,integers151[6])
    call UnitRemoveAbility(source,integers151[7])
    return
  endif
  loop
    exitwhen ZBE==0
    set ZBE=QIE/2
    set JTX[ZCE]=QIE-ZBE*2
    set QIE=ZBE
    set ZCE=ZCE+1
  endloop
  set JUX=ZCE
  set ZCE=0
  loop
    exitwhen ZCE>JUX
    if JTX[ZCE]==1 then
      call UnitAddAbility2(source,integers151[ZCE])
    else
      call UnitRemoveAbility(source,integers151[ZCE])
    endif
    set ZCE=ZCE+1
  endloop
endfunction

function Func3833 takes unit source,integer ZAE returns nothing
  local integer array JTX
  local integer QIE=ZAE
  local integer ZBE=1
  local integer ZCE=0
  local integer JUX
  if ZAE<1 then
    call UnitRemoveAbility(source,integers152[0])
    call UnitRemoveAbility(source,integers152[1])
    call UnitRemoveAbility(source,integers152[2])
    call UnitRemoveAbility(source,integers152[3])
    call UnitRemoveAbility(source,integers152[4])
    call UnitRemoveAbility(source,integers152[5])
    call UnitRemoveAbility(source,integers152[6])
    call UnitRemoveAbility(source,integers152[7])
    return
  endif
  loop
    exitwhen ZBE==0
    set ZBE=QIE/2
    set JTX[ZCE]=QIE-ZBE*2
    set QIE=ZBE
    set ZCE=ZCE+1
  endloop
  set JUX=ZCE
  set ZCE=0
  loop
    exitwhen ZCE>JUX
    if JTX[ZCE]==1 then
      call UnitAddAbility2(source,integers152[ZCE])
    else
      call UnitRemoveAbility(source,integers152[ZCE])
    endif
    set ZCE=ZCE+1
  endloop
endfunction

function Func3834 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if GetTriggerUnit()==source then
      call Func3832(source,0)
      call SaveUnitHandle(HY,(ZAE),2,(null))
    else
      call Func3833(RCX,0)
      call SaveUnitHandle(HY,(ZAE),17,(null))
    endif
  else
    if source!=null then
      call Func3832(source,0)
    endif
    if RCX!=null then
      call Func3833(RCX,0)
    endif
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func3835 takes unit source,unit RCX,unit M_X returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  if M_X==null then
    call TriggerRegisterDeathEvent(RBX,source)
    call TriggerRegisterDeathEvent(RBX,RCX)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveUnitHandle(HY,(ZAE),17,(RCX))
  elseif M_X==RCX then
    call Func3833(RCX,0)
    call TriggerRegisterDeathEvent(RBX,source)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveUnitHandle(HY,(ZAE),17,(null))
  else
    call Func3832(source,0)
    call TriggerRegisterDeathEvent(RBX,RCX)
    call SaveUnitHandle(HY,(ZAE),2,(null))
    call SaveUnitHandle(HY,(ZAE),17,(RCX))
  endif
  call TriggerRegisterTimerEvent(RBX,18,false)
  call TriggerAddCondition(RBX,Condition(function Func3834))
  set RBX=null
endfunction

function Func3836 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local lightning fx=(LoadLightningHandle(HY,(h),196))
  local integer QIE=(LoadInteger(HY,(h),5))
  local integer c=GetTriggerEvalCount(t)
  local unit d=(LoadUnitHandle(HY,(h),19))
  call MoveLightning(fx,true,GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE))
  call SetUnitX(d,GetUnitX(SGE))
  call SetUnitY(d,GetUnitY(SGE))
  if DistanceBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE))>LoadReal(HY,h,5)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call DestroyLightning(fx)
    call KillUnit(d)
    call Func0479(d,0.1)
    if GetTriggerEventId()==EVENT_WIDGET_DEATH then
      call Func3835(SKE,SGE,GetTriggerUnit())
    else
      call Func3835(SKE,SGE,null)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif c>160 then
    call DestroyLightning(fx)
    call KillUnit(d)
    call Func0479(d,0.1)
    call Func3835(SKE,SGE,null)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call Func3832(SKE,R2I(QIE*7*c*1./20.))
    call Func3833(SGE,R2I(QIE*7*c*1./20.))
  endif
  set t=null
  set SKE=null
  set SGE=null
  set fx=null
  set d=null
  return false
endfunction

function Func3837 takes unit SKE,unit SGE,lightning fx,unit d,integer QIE,real UTI returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func3836))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveLightningHandle(HY,(h),196,(fx))
  call SaveUnitHandle(HY,(h),19,(d))
  call SaveReal(HY,h,5,UTI)
  set t=null
endfunction

function Func3838 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local lightning JSI
  local unit d
  local real UTI=800.
  local integer QIE=GetUnitAbilityLevel(SKE,'A1DP')
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set UTI=UTI+200.
  endif
  set JSI=AddLightning("CLSB",true,GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SKE),GetUnitY(SKE))
  set d=CreateUnit(GetOwningPlayer(SKE),'h088',GetUnitX(SKE),GetUnitY(SKE),0)
  call SetLightningColor(JSI,0.3,0.5,1,1)
  call Func3837(SKE,SGE,JSI,d,QIE,UTI)
  set JSI=null
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func3839 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())==false then
    call Func3838()
  else
    call RemoveLinkenBuff(GetSpellTargetUnit())
  endif
endfunction

function Func3840 takes nothing returns nothing
  call AddToPurgeList('B0BN','PRGE')
  set integers068[0]='A1DK'
  set integers068[1]='A1DL'
  set integers068[2]='A1DN'
  set integers068[3]='A1DM'
  set integers068[4]='A1DO'
  set integers151[0]='A1DV'
  set integers151[1]='A1DQ'
  set integers151[2]='A1DR'
  set integers151[3]='A1DS'
  set integers151[4]='A1DT'
  set integers151[5]='A1DU'
  set integers151[6]='A1DW'
  set integers151[7]='A1DX'
  set integers152[0]='A1E4'
  set integers152[1]='A1E3'
  set integers152[2]='A1E2'
  set integers152[3]='A1E1'
  set integers152[4]='A1E0'
  set integers152[5]='A1E5'
  set integers152[6]='A1DZ'
  set integers152[7]='A1DY'
  call PreloadAbility(integers151[0])
  call PreloadAbility(integers151[1])
  call PreloadAbility(integers151[2])
  call PreloadAbility(integers151[3])
  call PreloadAbility(integers151[4])
  call PreloadAbility(integers151[5])
  call PreloadAbility(integers151[6])
  call PreloadAbility(integers151[7])
  call PreloadAbility(integers152[0])
  call PreloadAbility(integers152[1])
  call PreloadAbility(integers152[2])
  call PreloadAbility(integers152[3])
  call PreloadAbility(integers152[4])
  call PreloadAbility(integers152[5])
  call PreloadAbility(integers152[6])
  call PreloadAbility(integers152[7])
  call PreloadUnit('h088')
endfunction

function Func3841 takes integer ZAE returns nothing
  local integer QIE=1
  local integer ZBE=(LoadInteger(HY,(ZAE),136))
  local unit source
  local integer ZCE
  if ZBE==0 then
    return
  endif
  loop
    exitwhen QIE>ZBE
    set source=LoadUnitHandle(HY,ZAE,2200+QIE)
    call UnitRemoveAbility(source,integers068[0])
    call UnitRemoveAbility(source,integers068[1])
    call UnitRemoveAbility(source,integers068[2])
    call UnitRemoveAbility(source,integers068[3])
    call UnitRemoveAbility(source,integers068[4])
    call UnitRemoveAbility(source,integers068[5])
    set QIE=QIE+1
  endloop
  set source=null
endfunction

function Func3842 takes unit source,integer ZAE returns nothing
  local integer ZBE=(LoadInteger(HY,(ZAE),136))
  set ZBE=ZBE+1
  call SaveInteger(HY,(ZAE),136,(ZBE))
  call SaveUnitHandle(HY,(ZAE),(2200+ZBE),source)
endfunction

function Func3843 takes unit u returns integer
  return GetUnitAbilityLevel(u,integers068[0])+GetUnitAbilityLevel(u,integers068[1])*2+GetUnitAbilityLevel(u,integers068[2])*4+GetUnitAbilityLevel(u,integers068[3])*8+GetUnitAbilityLevel(u,integers068[4])*16
endfunction

function Func3844 takes unit u,integer c returns nothing
  local integer array JTX
  local integer QIE=c
  local integer i=1
  local integer k=0
  local integer z
  if c<1 then
    call UnitRemoveAbility(u,integers068[0])
    call UnitRemoveAbility(u,integers068[1])
    call UnitRemoveAbility(u,integers068[2])
    call UnitRemoveAbility(u,integers068[3])
    call UnitRemoveAbility(u,integers068[4])
    call UnitRemoveAbility(u,integers068[5])
    return
  endif
  loop
    exitwhen i==0
    set i=QIE/2
    set JTX[k]=QIE-i*2
    set QIE=i
    set k=k+1
  endloop
  set z=k
  set k=0
  loop
    exitwhen k>z
    if JTX[k]==1 then
      call UnitAddAbility2(u,integers068[k])
    else
      call UnitRemoveAbility(u,integers068[k])
    endif
    set k=k+1
  endloop
endfunction

function Func3845 takes unit source,integer ZAE returns nothing
  if IsUnitType(source,UNIT_TYPE_STRUCTURE)==false then
    call Func3844(source,ZAE+Func3843(source))
    call Func3842(source,integer514)
  endif
endfunction

function Func3846 takes unit THA,unit T7A,unit SGE,integer QIE returns nothing
  call CreateLightningOnUnit("FORK",T7A,SGE,0,1,1,1,0.5,0.3,.1)
  call DamageTarget(THA,SGE,23,(50+30*QIE)/2.0)
  call Func3845(SGE,1)
endfunction

function Func3847 takes nothing returns boolean
  if IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and GetFilterUnit()!=Roshan and IsUnitInvulnerable(GetFilterUnit())==false then
    if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<real101 then
      set real101=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
      set unit233=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func3848 takes nothing returns boolean
  if(IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!='emow' and GetUnitTypeId(GetFilterUnit())!='uzig' and GetFilterUnit()!=Roshan and IsUnitInvulnerable(GetFilterUnit())==false then
    if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<real101 then
      set real101=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
      set unit233=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func3849 takes nothing returns boolean
  if(IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false))and GetFilterUnit()!=Roshan and IsUnitInvulnerable(GetFilterUnit())==false then
    if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<real101 then
      set real101=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
      set unit233=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func3850 takes unit THA,unit T7A,integer QIE returns nothing
  local group g=GetAvailableGroup()
  set unit233=null
  set real101=999999
  set tt_unit1=THA
  if GetUnitAbilityLevel(THA,'A1UV')>0 then
    call GroupEnumUnitsInRange(g,GetUnitX(THA),GetUnitY(THA),525,Condition(function Func3848))
    if unit233==null then
      call GroupEnumUnitsInRange(g,GetUnitX(THA),GetUnitY(THA),525,Condition(function Func3849))
    endif
  else
    call GroupEnumUnitsInRange(g,GetUnitX(THA),GetUnitY(THA),525,Condition(function Func3847))
  endif
  call KillGroup(g)
  if unit233!=null then
    call Func3846(THA,T7A,unit233,QIE)
  endif
  set g=null
endfunction

function Func3851 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit THA=(LoadUnitHandle(HY,h,2))
  local unit T7A=(LoadUnitHandle(HY,h,19))
  local integer QIE=(LoadInteger(HY,h,5))
  local integer c=GetTriggerEvalCount(t)
  local real cd
  if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func3841(h)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if GetTriggerUnit()==THA then
      call KillUnit(T7A)
    endif
  else
    if GetUnitAbilityLevel(THA,'A1UV')>0 then
      if QIE==1 then
        set cd=0.6
      elseif QIE==2 then
        set cd=0.5
      else
        set cd=0.4
      endif
    else
      if QIE==1 then
        set cd=0.7
      elseif QIE==2 then
        set cd=0.6
      else
        set cd=0.5
      endif
    endif
    set cd=cd/0.05
    if ModuloInteger(c,R2I(cd))==0 or c==1 then
      set integer514=h
      call Func3850(THA,T7A,QIE)
    endif
    call SetUnitX(T7A,GetUnitX(THA))
    call SetUnitY(T7A,GetUnitY(THA))
  endif
  set t=null
  set THA=null
  set T7A=null
  return false
endfunction

function Func3852 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A1AO')
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h081',GetUnitX(SKE),GetUnitY(SKE),0)
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A1UV')
  endif
  call UnitApplyTimedLife(d,'BTLF',30)
  call SetUnitAbilityLevel(d,'A1DJ',QIE)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_DEATH)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterUnitEvent(t,d,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerAddCondition(t,Condition(function Func3851))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveInteger(HY,h,5,(QIE))
  set SKE=null
  set d=null
  set t=null
endfunction

function Func3853 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local item it=CreateItem('I000',x,y)
  set x=GetItemX(it)
  set y=GetItemY(it)
  call RemoveItem(it)
  call SetUnitX(SKE,x)
  call SetUnitY(SKE,y)
  call SetUnitAnimation(SKE,"morph ALTERNATE")
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  return false
endfunction

function Func3854 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A06O')+GetUnitAbilityLevel(SKE,'A3NX')
  local real a
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real lx
  local real ly
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real dmg
  local real FTX=1.65
  local unit SGE=null
  local real NBX=2000.
  if Func0898(SKE)then
    set NBX=3000.
  endif
  set dmg=40+60*QIE
  if GetSpellTargetUnit()!=null then
    set lx=GetUnitX(GetSpellTargetUnit())
    set ly=GetUnitY(GetSpellTargetUnit())
    set SGE=GetSpellTargetUnit()
    if SGE==SKE then
      set lx=lx+10*Cos(GetUnitFacing(SKE)*bj_DEGTORAD)
      set ly=ly+10*Sin(GetUnitFacing(SKE)*bj_DEGTORAD)
    endif
  else
    set lx=GetSpellTargetX()
    set ly=GetSpellTargetY()
  endif
  set a= AngleBetweenXY(x,y,lx,ly)
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveReal(HY,h,6,lx)
  call SaveReal(HY,h,7,ly)
  call TriggerRegisterTimerEvent(t,DistanceBetweenXY(x,y,lx,ly)/NBX,false)
  call TriggerAddCondition(t,Condition(function Func3853))
  if DistanceBetweenXY(x,y,lx,ly)<100 then
    set lx=x+100*Cos(a*bj_DEGTORAD)
    set ly=y+100*Sin(a*bj_DEGTORAD)
  endif
  call Func0854(SKE,null,dmg,FTX,0.5,x,y,lx,ly,168,null,true,NBX)
  call KillUnit(CreateUnit(GetOwningPlayer(SKE),'o02B',lx,ly,0))
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3855 takes nothing returns nothing
  call DamageTarget(unit234,GetEnumUnit(),1,110)
  call IssueTargetOrder(unit235,"slow",GetEnumUnit())
endfunction

function Func3856 takes unit source,real result,real ZEE,integer ZAE,integer QIE returns nothing
  local group g=GetAvailableGroup()
  local real ZWE
  local string ZJE
  if QIE==8 then
    set ZWE=675
  elseif QIE==9 then
    set ZWE=700
  elseif QIE==10 then
    set ZWE=725
  else
    set ZWE=250+50*QIE
  endif
  if QIE<4 then
    set ZJE="war3mapImported\\EpiPulse_1_4.mdx"
  elseif QIE<8 then
    set ZJE="war3mapImported\\EpiPulse_5_8.mdx"
  else
    set ZJE="war3mapImported\\EpiPulse_9_12.mdx"
  endif
  call DestroyEffect(AddSpecialEffect(ZJE,result,ZEE))
  set tt_unit1=source
  set unit234=source
  set unit235=units024[GetPlayerId(GetOwningPlayer(source))]
  call GroupEnumUnitsInRange(g,result,ZEE,ZWE,Condition(function Func0816))
  call ForGroup(g,function Func3855)
  call KillGroup(g)
  call TerrainDeformRippleIF(0.03,false,result,ZEE,150+100*QIE,150+100*QIE,72,0.03,512)
  set g=null
endfunction

function Func3857 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local real result=(LoadReal(HY,(ZAE),23))
  local real ZEE=(LoadReal(HY,(ZAE),24))
  local boolean ZSE=(LoadBoolean(HY,(ZAE),15))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),25))
  local integer ZCE=4+QIE*2
  local real ZWE=result
  local real ZYE=ZEE
  if ZSE then
    set ZCE=ZCE+2
  endif
  if ZBE>ZCE then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    if source!=null and IsDead(source)==false then
      set ZWE=GetUnitX(source)
      set ZYE=GetUnitY(source)
    endif
    call Func3856(source,ZWE,ZYE,QIE,ZBE)
    call SaveInteger(HY,(ZAE),25,(ZBE+1))
    call SaveReal(HY,(ZAE),23,((ZWE)*1.0))
    call SaveReal(HY,(ZAE),24,((ZYE)*1.0))
  endif
  set RBX=null
  set whichPlayer=null
  set source=null
  return false
endfunction

function Func3858 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local player whichPlayer=GetOwningPlayer(source)
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetUnitAbilityLevel(source,'A06R')
  local boolean ZSE=false
  if IsSentinel(whichPlayer)then
    set units024[GetPlayerId(whichPlayer)]=CreateUnit(Scourges[0],'e00E',GetUnitX(source),GetUnitY(source),0)
  else
    set units024[GetPlayerId(whichPlayer)]=CreateUnit(Sentinels[0],'e00E',GetUnitX(source),GetUnitY(source),0)
  endif
  call UnitAddAbility2(units024[GetPlayerId(whichPlayer)],'A17B')
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call SavePlayerHandle(HY,(ZAE),54,(GetOwningPlayer(source)))
  call SaveReal(HY,(ZAE),23,((GetUnitX(source))*1.0))
  call SaveReal(HY,(ZAE),24,((GetUnitY(source))*1.0))
  call SaveInteger(HY,(ZAE),5,(QIE))
  call SaveInteger(HY,(ZAE),25,1)
  call SaveBoolean(HY,(ZAE),15,(ZSE))
  call TriggerRegisterTimerEvent(RBX,0.35,true)
  call TriggerAddCondition(RBX,Condition(function Func3857))
  set source=null
  set RBX=null
endfunction

function Func3859 takes nothing returns boolean
  if GetSpellAbilityId()=='A06R' then
    call Func3858()
  endif
  return false
endfunction

function Func3860 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
  call TriggerAddCondition(t,Condition(function Func3859))
  set t=null
  call PreloadAbility('A17B')
  call AddToPurgeList('B02V','PRGE')
  call AddToPurgeList('A38I','PRGE')
  call AddToPurgeList('B38I','PRGE')
  call AddWrapper("Func4613",3)
endfunction

function Func3861 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))!=null
endfunction

function Func3862 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  call DestroyEffect(LoadEffectHandle(HY,GetHandleId(t),0))
  call PauseTimer(t)
  call DestroyTimer(t)
  set t=null
endfunction

function Func3863 takes unit FKX returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,1,false,function Func3862)
  call SaveEffectHandle(HY,GetHandleId(t),0,AddSpecialEffectTarget("Abilities\\Spells\\Undead\\PlagueCloud\\PlagueCloudCaster.mdl",FKX,"chest"))
  set t=null
endfunction

function Func3864 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit FKX
  local unit sk
  local integer QIE
  local group g
  local real dmg
  local unit u2
  set sk=LoadUnitHandle(HY,h,0)
  set FKX=LoadUnitHandle(HY,h,1)
  set QIE=LoadInteger(HY,h,0)
  set dmg=50+40*QIE
  if QIE==4 then
    set dmg=220
  endif
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set dmg=dmg*0.5
  endif
  set g=GetAvailableGroup()
  call Func3863(FKX)
  set tt_unit1=sk
  call GroupEnumUnitsInRange(g,GetUnitX(FKX),GetUnitY(FKX),425,Condition(function Func3861))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(sk,u2,1,dmg)
    call UnitAddAbilityTimedExF(u2,'A38I',1,3,'B38I')
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
  call FlushChildHashtable(HY,h)
  call CleanTrigger(t)
  call RemoveSavedHandle(HY,GetHandleId(FKX),'CFNL')
  call RemoveSavedBoolean(HY,GetHandleId(FKX),'CFNL')
  call UnitRemoveAbility(FKX,'A38H')
  call UnitRemoveAbility(FKX,'B38H')
  set t=null
  set sk=null
  set FKX=null
endfunction

function Func3865 takes unit sk,unit SGE returns nothing
  local trigger t
  local integer h
  local integer ht=GetHandleId(SGE)
  if LoadBoolean(HY,ht,'CFNL')==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerRegisterTimerEvent(t,6,false)
    call TriggerAddCondition(t,Condition(function Func3864))
    call SaveBoolean(HY,ht,'CFNL',true)
    call SaveTriggerHandle(HY,ht,'CFNL',t)
    call SaveUnitHandle(HY,h,1,SGE)
    call UnitAddAbility2(SGE,'A38H')
    call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+8)
    call SaveInteger(HY,h,0,GetUnitAbilityLevel(sk,'A0FA'))
    call SaveUnitHandle(HY,h,0,sk)
  endif
  set t=null
endfunction

function Func3866 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  if(LoadInteger(HY,GetHandleId(SKE),4299)!=1)then
    call UnitRemoveAbility(SKE,'B04R')
  endif
  call RemoveUnit((LoadUnitHandle(HY,(h),382)))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  return false
endfunction

function Func3867 takes unit SKE,unit UMA returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveInteger(HY,(GetHandleId(SKE)),4299,2)
  call TriggerRegisterTimerEvent(t,1.5,false)
  call TriggerAddCondition(t,Condition(function Func3866))
  call SaveUnitHandle(HY,(h),14,(SKE))
  call SaveUnitHandle(HY,(h),382,(UMA))
  set t=null
endfunction

function Func3868 takes nothing returns boolean
  if(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit())))and IsMagicImmune(GetFilterUnit())==false then
    call DamageTarget(unit236,GetFilterUnit(),1,real102)
  endif
  return false
endfunction

function Func3869 takes unit u,integer QIE returns nothing
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call UnitAddAbility2(d,'A0HO')
  call RemoveEndlessFadetime(u)
  call IssueTargetOrder(d,"invisibility",u)
  set d=null
endfunction

function Func3870 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),14))
  local unit UMA=(LoadUnitHandle(HY,(h),382))
  local integer QIE=GetUnitAbilityLevel(SKE,'A0H0')
  local integer c=GetTriggerEvalCount(t)
  local group g
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST or c>QIE*20/0.5 then
    call Func3867(SKE,UMA)
    call SetUnitAnimation(SKE,"stand")
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if GetUnitAbilityLevel(SKE,'B04R')==0 then
      call Func3869(SKE,QIE)
    endif
    if GetUnitX(UMA)!=GetUnitX(SKE)or GetUnitY(UMA)!=GetUnitY(SKE)then
      call SetUnitX(UMA,GetUnitX(SKE))
      call SetUnitY(UMA,GetUnitY(SKE))
    endif
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    set unit236=SKE
    set real102=QIE*25*0.5
    call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),550.,Condition(function Func3868))
    call KillGroup(g)
    call SetUnitAnimation(SKE,"morph")
  endif
  set t=null
  set SKE=null
  set UMA=null
  set g=null
  return false
endfunction

function Func3871 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit UMA=CreateUnit(GetOwningPlayer(u),'e00Q',GetUnitX(u),GetUnitY(u),0)
  local integer QIE=GetUnitAbilityLevel(u,'A0H0')
  call SetUnitX(UMA,GetUnitX(u))
  call SetUnitY(UMA,GetUnitY(u))
  call SetUnitAnimation(UMA,"stand")
  call SetUnitAnimation(u,"morph")
  call SaveInteger(HY,(GetHandleId(u)),4299,1)
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func3870))
  call SaveUnitHandle(HY,(h),14,(u))
  call SaveUnitHandle(HY,(h),382,(UMA))
  call Func3869(u,QIE)
  set t=null
  set u=null
  set UMA=null
endfunction

function Func3872 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local unit D2O=CreateUnit(GetOwningPlayer(SKE),'e00E',x,y,0)
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,'A29K')
  local unit u2
  local real D1E=2.5+0.5*QIE
  call UnitAddAbility(D2O,'A01W')
  call SetUnitAbilityLevel(D2O,'A01W',QIE)
  call IssueImmediateOrderByIdExFunc(D2O,852127)
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,360,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitAddAbilityTimedExF(u2,'A3PI',1,D1E,'B063')
    call DamageTarget(SKE,u2,23,25+50*QIE)
  endloop
  call KillGroup(g)
  set SKE=null
  set D2O=null
endfunction

function Func3873 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer hu=GetHandleId(u)
  local real UUA=LoadReal(HY,h,0)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetUnitAbilityLevel(u,'B013')==0 and GetTriggerEvalCount(t)>2)or TimerGetElapsed(GlobalTimer)>=UUA then
    call RemoveSavedHandle(HY,hu,'A05C')
    call SetUnitPathing(u,true)
    call UnitRemoveAbility(u,'B3J7')
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  else
    call SetUnitPhased(u)
  endif
  set t=null
  set u=null
endfunction

function Func3874 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'A05C')then
    set t=LoadTriggerHandle(HY,hu,'A05C')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func3873))
    call SaveTriggerHandle(HY,hu,'A05C',t)
    call SetUnitPhased(u)
    call SaveUnitHandle(HY,h,0,u)
  endif
  call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer)+12.)
  set u=null
  set t=null
endfunction

function Func3875 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,0)
  local unit SKE=LoadUnitHandle(HY,h,1)
  if GetUnitAbilityLevel(SGE,'B00T')==0 then
    call UnitShareVision(LoadUnitHandle(HY,GetHandleId(SGE),'VisD'),GetOwningPlayer(SKE),false)
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  set SKE=null
endfunction

function Func3876 takes nothing returns nothing
  local trigger t
  local integer h
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local unit FVI=LoadUnitHandle(HY,GetHandleId(SGE),'VisD')
  if FVI!=null then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerAddCondition(t,Condition(function Func3875))
    call SaveUnitHandle(HY,h,0,SGE)
    call SaveUnitHandle(HY,h,1,SKE)
    call UnitShareVision(FVI,GetOwningPlayer(SKE),true)
    set t=null
  endif
  set SGE=null
  set SKE=null
  set FVI=null
endfunction

function Func3877 takes nothing returns nothing
  call AddToPurgeList('B063','PRGE')
  call AddToPurgeList('B00T','PRGE')
endfunction

function Func3878 takes unit source,unit RCX returns nothing
  local integer ZAE=GetUnitAbilityLevel(source,'A0JJ')
  local real result=40+20*ZAE
  if GetUnitAbilityLevel(RCX,'A04R')==0 then
    call DamageTarget(source,RCX,2,result)
  endif
endfunction

function Func3879 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=LoadUnitHandle(HY,ZAE,30)
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==RCX and GetEventDamage()>0 and GetEventDamage()<=0.02 and GetUnitAbilityLevel(source,'B0GG')>0 then
      call DisableTrigger(RBX)
      call Func3878(RCX,source)
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set RCX=null
  set source=null
  return false
endfunction

function Func3880 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local unit source=GetTriggerUnit()
  local unit RCX=GetAttacker()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(RBX,1,false)
  call TriggerAddCondition(RBX,Condition(function Func3879))
  call SaveUnitHandle(HY,(ZAE),30,source)
  call SaveUnitHandle(HY,(ZAE),2,(RCX))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func3881 takes nothing returns nothing
  local unit source=GetAttacker()
  if(LoadInteger(HY,GetHandleId(source),4274)!=1)then
    call AddTimedKeyToAgent(source,4274,0.1)
    call Func3880()
  endif
  set source=null
endfunction

function Func3882 takes nothing returns boolean
  if GetUnitAbilityLevel(GetAttacker(),'A0JJ')>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),14))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
    call Func3881()
  endif
  return false
endfunction

function Func3883 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerAddCondition(RBX,Condition(function Func3882))
  call SaveUnitHandle(HY,(GetHandleId(RBX)),14,(GetTriggerUnit()))
  set RBX=null
endfunction

function Func3884 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,221))
  local unit SKE=(LoadUnitHandle(HY,h,383))
  local unit d
  local real D1E=(LoadReal(HY,h,57))
  local integer QIE=GetUnitAbilityLevel(SKE,('A0HW'))
  local real lx=(LoadReal(HY,h,6))
  local real ly=(LoadReal(HY,h,7))
  local real tx=GetUnitX(SGE)
  local real ty=GetUnitY(SGE)
  if(tx-lx)*(tx-lx)+(ty-ly)*(ty-ly)>900 then
    set d=CreateUnit(GetOwningPlayer(SKE),('h002'),GetUnitX(SGE),GetUnitY(SGE),0)
    call SetUnitAbilityLevel(d,('A0I2'),QIE)
    call SetUnitAbilityLevel(d,('A0HY'),QIE)
    call UnitApplyTimedLife(d,'BTLF',7)
    call SaveReal(HY,h,6,((tx)*1.0))
    call SaveReal(HY,h,7,((ty)*1.0))
    set d=null
  endif
  set D1E=D1E+0.2
  call SaveReal(HY,h,57,((D1E)*1.0))
  if D1E>7 or GetUnitState(SGE,UNIT_STATE_LIFE)<1 then
    call PauseTimer(t)
    call FlushChildHashtable(HY,(h))
  endif
  set t=null
  set SGE=null
  set SKE=null
endfunction

function Func3885 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local sound ss
  local timer t
  local integer h
  call DamageTarget(TmpUnit376,u,1,real021)
  call GroupAddUnit(group015,u)
  if IsUnitType(u,UNIT_TYPE_HERO)then
    set t=CreateTimer()
    set h=GetHandleId(t)
    set ss=CreateSound("Sounds\\Spectral Dagger.mp3",false,true,true,10,10,"DefaultEAXON")
    call SetSoundPosition(ss,GetUnitX(u),GetUnitY(u),0)
    call SetSoundDistanceCutoff(ss,700)
    call StartSound(ss)
    call KillSoundWhenDone(ss)
    call SaveUnitHandle(HY,h,221,(u))
    call SaveUnitHandle(HY,h,383,(TmpUnit376))
    call SaveReal(HY,h,6,((GetUnitX(u))*1.0))
    call SaveReal(HY,h,7,((GetUnitY(u))*1.0))
    call TimerStart(t,0.2,true,function Func3884)
    set t=null
    set ss=null
  endif
  set u=null
endfunction

function Func3886 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(TmpUnit376))and IsUnitInGroup(GetFilterUnit(),group015)==false and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func3887 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,h,133))
  local group gg=GetAvailableGroup()
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local unit U6A=(LoadUnitHandle(HY,h,45))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local real tx=GetUnitX(SGE)
  local real ty=GetUnitY(SGE)
  local real cx=GetUnitX(U6A)
  local real cy=GetUnitY(U6A)
  local real GXE=Atan2(ty-cy,tx-cx)
  local real nx=SafeX50(GetUnitX(U6A)+30*Cos(GXE))
  local real ny=SafeY50(GetUnitY(U6A)+30*Sin(GXE))
  local unit d
  local integer QIE=GetUnitAbilityLevel(SKE,('A0HW'))
  if(LoadBoolean(HY,h,384))then
    call SaveBoolean(HY,h,384,(false))
    set d=CreateUnit(GetOwningPlayer(SKE),('h002'),cx,cy,0)
    call SetUnitAbilityLevel(d,('A0I2'),QIE)
    call SetUnitAbilityLevel(d,('A0HY'),QIE)
    call UnitApplyTimedLife(d,'BTLF',12)
  else
    call SaveBoolean(HY,h,384,(true))
  endif
  call SetUnitX(U6A,nx)
  call SetUnitY(U6A,ny)
  call SetUnitFacing(U6A,GXE*bj_RADTODEG)
  set group015=g
  set TmpUnit376=SKE
  set real021=50*GetUnitAbilityLevel(SKE,('A0HW'))
  call GroupEnumUnitsInRange(gg,nx,ny,150,Condition(function Func3886))
  call ForGroup(gg,function Func3885)
  call KillGroup(gg)
  if(nx-tx)*(nx-tx)+(ny-ty)*(ny-ty)<1600 then
    call PauseTimer(t)
    call FlushChildHashtable(HY,(h))
    call KillUnit(U6A)
    call KillGroup(g)
  endif
  set d=null
  set SGE=null
  set SKE=null
  set t=null
  set U6A=null
endfunction

function Func3888 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,h,133))
  local group gg=GetAvailableGroup()
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local unit U6A=(LoadUnitHandle(HY,h,45))
  local real dx=(LoadReal(HY,h,47))
  local real dy=(LoadReal(HY,h,48))
  local real cx=GetUnitX(U6A)
  local real cy=GetUnitY(U6A)
  local real GXE=(LoadReal(HY,h,13))
  local real nx=SafeX50(GetUnitX(U6A)+24*Cos(GXE))
  local real ny=SafeY50(GetUnitY(U6A)+24*Sin(GXE))
  local unit d
  local integer QIE=GetUnitAbilityLevel(SKE,('A0HW'))
  local integer c=LoadInteger(HY,h,-1)+1
  if(LoadBoolean(HY,h,384))then
    call SaveBoolean(HY,h,384,(false))
    set d=CreateUnit(GetOwningPlayer(SKE),('h002'),cx,cy,0)
    call SetUnitAbilityLevel(d,('A0I2'),QIE)
    call SetUnitAbilityLevel(d,('A0HY'),QIE)
    call UnitApplyTimedLife(d,'BTLF',12)
    set d=null
  else
    call SaveBoolean(HY,h,384,(true))
  endif
  call SetUnitX(U6A,nx)
  call SetUnitY(U6A,ny)
  set group015=g
  set TmpUnit376=SKE
  set real021=50*GetUnitAbilityLevel(SKE,('A0HW'))
  call GroupEnumUnitsInRange(gg,nx,ny,150,Condition(function Func3886))
  call ForGroup(gg,function Func3885)
  call KillGroup(gg)
  if(nx-dx)*(nx-dx)+(ny-dy)*(ny-dy)<1600 or c>90 then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,(h))
    call KillUnit(U6A)
    call KillGroup(g)
  else
    call SaveInteger(HY,h,-1,c)
  endif
  set SKE=null
  set U6A=null
  set t=null
endfunction

function Func3889 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='h002'
endfunction

function Func3890 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  local real r=(LoadReal(HY,h,57))
  local integer i=0
  local real MHI=LoadReal(HY,h,0)
  local boolean WVA=TimerGetElapsed(GlobalTimer)-MHI<1.25
  local group g
  local unit u2
  local boolean b=false
  if WVA==false then
    set g=GetAvailableGroup()
    call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(u),Condition(function Func3889))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      if DistanceBetweenUnits(u2,u)<=225 then
        call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer))
        set WVA=true
        exitwhen true
      endif
      call GroupRemoveUnit(g,u2)
    endloop
    call KillGroup(g)
  endif
  set r=r+0.2
  call SaveReal(HY,h,57,r*1.0)
  if WVA then
    if GetUnitTypeId(u)=='E01B'then
      call UnitAddAbility2(u,'A33Q')
      call UnitRemoveAbility(u,'A33Q')
      call UnitAddAbility(u,'Amrf')
      call UnitRemoveAbility(u,'Amrf')
    endif
  else
    if GetUnitTypeId(u)=='QTW4'then
      call UnitAddAbility2(u,'A33R')
      call UnitRemoveAbility(u,'A33R')
    endif
  endif
  if LoadInteger(HY,GetHandleId(u),'path')==0 and GetUnitAbilityLevel(u,'B047')>0 then
    call SetUnitPathing2(u,false)
  endif
  call SetUnitFlyHeight(u,-1,9999)
  if r>30 then
    call PauseTimer(t)
    call FlushChildHashtable(HY,(h))
    if GetUnitTypeId(u)=='QTW4'then
      call UnitAddAbility2(u,'A33R')
      call UnitRemoveAbility(u,'A33R')
    endif
    call SetUnitPathing2(u,true)
  endif
  set t=null
  set u=null
endfunction

function Func3891 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real tx=SafeX50(GetUnitX(u))
  local real ty=SafeY50(GetUnitY(u))
  local unit U6A=CreateUnit(GetOwningPlayer(u),('h003'),tx,ty,0)
  local timer tt=CreateTimer()
  local integer h=GetHandleId(tt)
  local group g=GetAvailableGroup()
  local real GXE
  local real dx
  local real dy
  call SetUnitPathing(U6A,false)
  call SaveGroupHandle(HY,h,133,(g))
  call SaveUnitHandle(HY,h,14,(u))
  call SaveUnitHandle(HY,h,45,(U6A))
  if SGE!=null then
    call SaveUnitHandle(HY,h,30,SGE)
    call TimerStart(tt,0.035,true,function Func3887)
  else
    set dx=GetSpellTargetX()
    set dy=GetSpellTargetY()
    set GXE=Atan2(dy-ty,dx-tx)
    call SetUnitFacing(U6A,GXE*bj_RADTODEG)
    set dx=SafeX50(tx+2100*Cos(GXE))
    set dy=SafeY50(ty+2100*Sin(GXE))
    call SaveReal(HY,h,47,dx)
    call SaveReal(HY,h,48,dy)
    call SaveReal(HY,h,13,GXE)
    call SaveInteger(HY,h,-1,0)
    call TimerStart(tt,0.03,true,function Func3888)
  endif
  set tt=CreateTimer()
  set h=GetHandleId(tt)
  call SaveUnitHandle(HY,h,14,(u))
  call TimerStart(tt,0.2,true,function Func3890)
  call SaveReal(HY,h,0,TimerGetElapsed(GlobalTimer))
  set tt=null
  set u=null
  set SGE=null
  set U6A=null
endfunction

function Func3892 takes nothing returns boolean
  return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(tt_unit1))and AliveNonBuildOrMarker(GetFilterUnit()))!=null
endfunction

function Func3893 takes unit WXE,unit SGE returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=SGE
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),275,Condition(function Func3892))
  call GroupRemoveUnit(g,SGE)
  if FirstOfGroup(g)==null then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl",SGE,"overhead"))
    call DamageTarget(WXE,SGE,3,5+15*GetUnitAbilityLevel(WXE,'A0FX'))
  endif
  call KillGroup(g)
endfunction

function Func3894 takes unit WXE,unit SGE returns nothing
  if GetUnitAbilityLevel(WXE,'A0FX')>0 and AliveNonBuildOrMarker(SGE)and IsUnitEnemy(SGE,GetOwningPlayer(WXE))and GetUnitAbilityLevel(WXE,'A36D')==0 then
    call Func3893(WXE,SGE)
  endif
endfunction

function Func3895 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGI=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local timer tt=LoadTimerHandle(HY,h,10)
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if IsFakeDamage==0 and GetEventDamage()>0 and GetEventDamageSource()==SGI then
      call DisableTrigger(t)
      call Func3893(SGI,SGE)
      call EnableTrigger(t)
    endif
  else
    call FlushChildHashtable(HY,h)
    call PauseTimer(tt)
    call DestroyTimer(tt)
    call CleanTrigger(t)
    call RemoveSavedHandle(HY,GetHandleId(SGI),'A0FX')
  endif
  set tt=null
  set t=null
  set SGI=null
  set SGE=null
endfunction

function Func3896 takes unit WXE,unit SGE returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(WXE)
  local timer tt
  if HaveSavedHandle(HY,hu,'A0FX')then
    set t=LoadTriggerHandle(HY,hu,'A0FX')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,10)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,10,tt)
    call SaveTriggerHandle(HY,hu,'A0FX',t)
    call TriggerRegisterDeathEvent(t,WXE)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
    call TriggerAddCondition(t,Condition(function Func3895))
    call SaveUnitHandle(HY,h,0,WXE)
    call SaveUnitHandle(HY,h,1,SGE)
  endif
  call TimerStart(tt,4,false,null)
  set tt=null
  set t=null
endfunction

function Func3897 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A0FX')>0 and IsUnitIllusion(CastedUnit)and GetUnitAbilityLevel(CastedUnit,'A36D')==0 and LoadInteger(HY,GetHandleId(CastedUnit),4275)!=1 and AliveNonBuildOrMarker(TriggeredUnit)then
    call Func3896(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func3898 takes nothing returns nothing
  local real d=DistanceBetweenUnits(GetTriggerUnit(),GetEnumUnit())-25
  local real m=0
  if d<300 then
    set m=1
  elseif d<1000 then
    set m=(1000-d)/700
  endif
  if m>0 then
    call DamageTarget(GetTriggerUnit(),GetEnumUnit(),11,real103*m)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl",GetEnumUnit(),"chest"))
  endif
endfunction

function Func3899 takes nothing returns boolean
  return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func3900 takes unit u,real d,integer at,integer dt returns nothing
  local integer QIE=GetUnitAbilityLevel(u,'A0NA')
  local group g
  local real m
  local unit u2
  if(IsDamageReal(d))and GetUnitAbilityLevel(u,'A36D')==0 then
    set real103=d*(0.06+0.04*QIE)
    if real103>1 then
      set g=GetAvailableGroup()
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1025,Condition(function Func0816))
      loop
        set u2=FirstOfGroup(g)
        exitwhen u2==null
        call GroupRemoveUnit(g,u2)
        set d=DistanceBetweenUnits(u,u2)-25
        set m=0
        if d<300 then
          set m=1
        elseif d<1000 then
          set m=(1000.-d)/700.
        endif
        if m>0 then
          call Func0647(u,u2,real103*m,at,dt)
          call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl",u2,"chest"))
        endif
      endloop
      call KillGroup(g)
    endif
  endif
endfunction

function Func3901 takes nothing returns nothing
  set boolean019=true
endfunction

function Func3902 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsDead(GetFilterUnit())==false
endfunction

function Func3903 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGI=(LoadUnitHandle(HY,h,386))
  local unit SGE=(LoadUnitHandle(HY,h,387))
  local integer QIE=(LoadInteger(HY,h,385))
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set QIE=QIE+1
    call SaveInteger(HY,h,385,(QIE))
  endif
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call DisableTrigger(t)
    call FlushChildHashtable(HY,(GetHandleId(t)))
    call SaveInteger(HY,h,385,(QIE))
    if SGE==GetTriggerUnit()then
      call KillUnit(SGI)
    endif
  elseif IsUnitPaused(SGI)==false then
    if QIE==2 then
      call SetUnitVertexColor(SGI,255,255,255,255)
    endif
    if GetIssuedOrderId()!=851973 then
      call DisableTrigger(t)
      if DistanceBetweenUnits(SGI,SGE)<1200 then
        call IssueTargetOrderByIdFuckingEx(SGI,851983,SGE,true)
      else
        call IssueImmediateOrderByIdExFunc(SGI,851972)
      endif
      call EnableTrigger(t)
    endif
  endif
  set SGI=null
  set SGE=null
  set t=null
endfunction

function Func3904 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local unit SKE=GetTriggerUnit()
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(u),GetUnitY(u),0)
  local trigger t
  local integer h
  local unit SGI
  local real a=GetRandomReal(0,3.13)
  call UnitAddAbility2(d,'A0N9')
  call SetUnitAbilityLevel(d,'A0N9',GetUnitAbilityLevel(SKE,'A0H9'))
  call DisableTrigger(trigger002)
  call SaveUnitHandle(HY,GetHandleId(d),'ilsr',SKE)
  call IssueTargetOrderByIdFuckingEx(d,852274,SKE,false)
  call SaveInteger(HY,GetHandleId(unit004),'ills','B06L')
  call EnableTrigger(trigger002)
  set SGI=unit004
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call SaveUnitHandle(HY,GetHandleId(SKE),7100+GetHandleId(SGI),u)
  call SetUnitPathing(SGI,false)
  call SetUnitMoveSpeed(SGI,400)
  call SetUnitX(SGI,GetUnitX(u)+85*Cos(a))
  call SetUnitY(SGI,GetUnitY(u)+85*Sin(a))
  call IssueTargetOrderByIdFuckingEx(SGI,851986,u,true)
  call SetUnitVertexColor(SGI,255,255,255,50)
  call TriggerRegisterUnitEvent(t,SGI,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,SGI,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,SGI,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddAction(t,function Func3903)
  call DestroyEffect(AddSpecialEffect("units\\nightelf\\SpiritOfVengeance\\SpiritOfVengeance.mdl",GetUnitX(SGI),GetUnitY(SGI)))
  call SaveUnitHandle(HY,(h),387,(u))
  call SaveUnitHandle(HY,(h),386,(SGI))
  call SaveInteger(HY,(h),385,0)
  set SGI=null
  set t=null
  set u=null
  set SKE=null
  set d=null
endfunction

function Func3905 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local sound RKX
  call UnitAddAbility2(source,('A0HA'))
  call SetUnitPathing2(source,false)
  call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function Func3902))
  call ForGroup(g,function Func3904)
  call SetUnitPathing2(source,true)
  if FirstOfGroup(g)!=null then
    set RKX=CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")
    call StartSound(RKX)
    call KillSoundWhenDone(RKX)
    set RKX=null
  endif
  call KillGroup(g)
  set source=null
endfunction

function Func3906 takes nothing returns nothing
  call UnitAddAbility2(GetTriggerUnit(),('A0HA'))
endfunction

function Func3907 takes nothing returns nothing
  call CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")
  call CreateSound("Sounds\\Spectral Dagger.mp3",false,false,false,10,10,"DefaultEAXON")
  call PreloadAbility('A0I2')
  call PreloadAbility('A0HY')
  call PreloadAbility('A0N9')
  call AddWrapper("Func4638",0)
endfunction

function Func3908 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'B06L')>0
endfunction

function Func3909 takes nothing returns nothing
  local real result=Func0676(GetEnumUnit(),GetSpellTargetLoc())
  if result<real021 then
    set TmpUnit376=GetEnumUnit()
    set real021=result
  endif
endfunction

function Func3910 takes nothing returns unit
  local group g=GetAvailableGroup()
  set TmpUnit376=null
  set real021=9999999
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function Func3908))
  call ForGroup(g,function Func3909)
  call KillGroup(g)
  set g=null
  return TmpUnit376
endfunction

function Func3911 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=Func3910()
  local unit M_X=(LoadUnitHandle(HY,(GetHandleId(source)),(7100+GetHandleId(RCX))))
  local real result
  local real ZEE
  if RCX==null then
    call Error(GetOwningPlayer(source),GetObjectName('n03Z'))
  else
    set result=GetUnitX(RCX)
    set ZEE=GetUnitY(RCX)
    call SetUnitX(RCX,GetUnitX(source))
    call SetUnitY(RCX,GetUnitY(source))
    call SetUnitX(source,result)
    call SetUnitY(source,ZEE)
    if DistanceBetweenXY(GetCameraEyePositionX(),GetCameraEyePositionY(),GetUnitX(RCX),GetUnitY(RCX))>1400 then
      call PanCameraToTimedForPlayer(GetOwningPlayer(source),result,ZEE,0)
    endif
    call IssueTargetOrder(source,"attack",M_X)
  endif
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func3912 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local group g
  local unit u2
  set g=GetAvailableGroup()
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func1893))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitRemoveAbility(u2,'B31O')
  endloop
  call KillGroup(g)
  call UnitRemoveAbility(u,LoadInteger(HY,h,0))
  call UnitRemoveAbility(u,'B31O')
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set u=null
  set t=null
endfunction

function Func3913 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer id=LoadInteger(HY,h,0)
  local group g
  local unit u2
  call UnitRemoveAbility(u,id)
  call UnitRemoveAbility(u,'B31N')
  if IsDead(u)==false then
    set g=GetAvailableGroup()
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function Func1893))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call UnitRemoveAbility(u2,'B31N')
    endloop
    call KillGroup(g)
    set id=id+4
    call UnitAddAbility2(u,id)
    call SaveInteger(HY,h,0,id)
    call TimerStart(t,6,false,function Func3912)
  else
    call FlushChildHashtable(HY,h)
    call DestroyTimer(t)
  endif
  set u=null
  set t=null
endfunction

function Func3914 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local integer id='A3HR'-1+GetUnitAbilityLevel(u,'A0ES')
  call TimerStart(t,6,false,function Func3913)
  call SaveUnitHandle(HY,h,0,u)
  call UnitAddAbility2(u,id)
  call SaveInteger(HY,h,0,id)
  call Func1276()
  set u=null
  set t=null
endfunction

function Func3915 takes nothing returns nothing
  if GetLearnedSkillLevel()==1 then
    call UnitAddAbility2(GetTriggerUnit(),'A31S')
  else
    call UnitAddAbility2(GetTriggerUnit(),'A31S')
    call SetUnitAbilityLevel(GetTriggerUnit(),'A31S',GetUnitAbilityLevel(GetTriggerUnit(),'A0ES'))
  endif
endfunction

function Func3916 takes nothing returns nothing
  call AddToPurgeList('A24G','PRGA')
  call AddToPurgeList('B0EC','PRGA')
  call HideAbility('A31M')
  call AddWrapper("Func4621",3)
endfunction

function Func3917 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local unit WPA=(LoadUnitHandle(HY,(h),2))
  local real a=(LoadReal(HY,(h),13))
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  local integer c=GetTriggerEvalCount(t)
  local real FGE=(LoadReal(HY,(h),193))
  local integer XXO=(LoadInteger(HY,(h),12))
  if c>35 then
    call SaveReal(HY,(h),193,FGE*0.98)
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c>XXO then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if ModuloInteger(c,50)==1 then
      call KillTrees(x,y,150)
    endif
    if ModuloInteger(c,10)==1 then
      call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
    endif
    set x=SafeX50(x+FGE*Cos(a))
    set y=SafeY50(y+FGE*Sin(a))
    if Func0429(x,y)then
      call SetUnitX(SGE,x)
      call SetUnitY(SGE,y)
    endif
    if c==1 and(LoadBoolean(HY,(h),698))==false then
      call IssueTargetOrder(WPA,"attack",SGE)
    endif
  endif
  set t=null
  set WPA=null
  set SGE=null
  return false
endfunction

function GreaterBashStart takes unit WPA,unit SGE,boolean isUlti,boolean WSA returns nothing
  local trigger t
  local integer h
  local real a=Atan2(GetUnitY(SGE)-GetUnitY(WPA),GetUnitX(SGE)-GetUnitX(WPA))
  local integer QIE=GetUnitAbilityLevel(WPA,'A0G5')
  local unit d
  if QIE>0 and GetUnitAbilityLevel(WPA,'A36D')==0 then
    if SGE==Roshan then
      call UnitAddAbilityTimedExF(WPA,'A24G',1,3,'B0EC')
    else
      set d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
      call UnitAddAbility2(d,'A1WQ')
      call SetUnitAbilityLevel(d,'A1WQ',QIE)
      if IssueTargetOrder(d,"thunderbolt",SGE)then
        set t=CreateTrigger()
        set h=GetHandleId(t)
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",WPA,"weapon"))
        call SaveUnitHandle(HY,(h),2,(WPA))
        call SaveUnitHandle(HY,(h),17,(SGE))
        call SaveReal(HY,(h),13,a)
        call SaveReal(HY,(h),193,1.)
        call SaveBoolean(HY,(h),698,(WSA))
        call SaveInteger(HY,(h),12,(80+20*QIE))
        call TriggerRegisterDeathEvent(t,SGE)
        call TriggerRegisterTimerEvent(t,0.01,true)
        call TriggerAddCondition(t,Condition(function Func3917))
        call DamageTarget(WPA,SGE,1,GetUnitMoveSpeed(WPA)*(0.14+0.08*QIE))
        call UnitAddAbilityTimedExF(WPA,'A24G',1,3,'B0EC')
      endif
    endif
    if WSA==false then
      call AddTimedKeyToAgent(WPA,4276,1.5)
    endif
  endif
  set t=null
  set WPA=null
  set SGE=null
  set d=null
endfunction

function SB_GreaterBash takes unit attacker,unit target returns nothing
  if LoadInteger(HY,GetHandleId(attacker),4276)!=1 and(PRD_Get(attacker,'A0G5',17))then
    call GreaterBashStart(attacker,target,false,false)
  endif
endfunction

function SBChargeEndReset2 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  call HideAbilityButton(u,'A1P8',false)
  call UnitRemoveAbility(u,'A31K')
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  call RemoveSavedHandle(HY,GetHandleId(u),'A1P8')
  set t=null
  set u=null
endfunction

function SBChargeEndReset takes nothing returns nothing
  if HaveSavedHandle(HY,GetHandleId(tt_unit1),'A1P8')then
    call TimerStart(LoadTimerHandle(HY,GetHandleId(tt_unit1),'A1P8'),0,false,function SBChargeEndReset2)
  endif
endfunction

function Func3922 takes unit u returns nothing
  local unit d
  local boolean b
  local boolean cd
  local integer a
  if GetUnitAbilityLevel(u,'A1P8')>0 then
    set a=GetUnitAbility(u,'A1P8')
    if a>0 then
      call Func0325(a,GetAbilityCD('A1P8',GetUnitAbilityLevel(u,'A1P8')))
      call SpecialAbilityCasted(u,'A1P8')
      call SetAbilityDisabled(a,GetAbilityDisabledCount(a)-1)
    endif
  endif
endfunction

function Func3923 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group036)==false then
    call GroupAddUnit(group036,GetEnumUnit())
    call GreaterBashStart(unit238,GetEnumUnit(),false,true)
  endif
endfunction

function Func3924 takes nothing returns boolean
  local integer slot=GetIssuedOrderId()
  if slot>=852002 and slot<=852007 then
    return true
  endif
  if slot>=852008 and slot<=852013 then
    return GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),slot-852008))==Item_Real[MixedWardsOrbs]or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),slot-852008))==Item_Real[MixedWardsSentry]
  endif
  return false
endfunction

function Func3925 takes integer i returns boolean
  return i==852177 or Func3924()or i>1000000
endfunction

function Func3926 takes nothing returns boolean
  if(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit())))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(unit238))then
    if DistanceBetweenUnits(unit239,GetFilterUnit())<real104 then
      set real104=DistanceBetweenUnits(unit239,GetFilterUnit())
      set unit237=GetFilterUnit()
    endif
  endif
  return false
endfunction

function Func3927 takes unit source,unit RCX returns unit
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set unit238=source
  set unit237=null
  set real104=999999
  set unit239=RCX
  call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),4000,Condition(function Func3926))
  call KillGroup(g)
  set g=null
  return unit237
endfunction

function Func3928 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=(LoadUnitHandle(HY,h,19))
  local integer QIE=(LoadInteger(HY,h,5))
  local real NBX=LoadReal(HY,h,5)
  local real x=(LoadReal(HY,h,23))
  local real y=(LoadReal(HY,h,24))
  local real nx
  local real ny
  local real a
  local real ILX
  local string s
  local group g
  local eventid W3A=GetTriggerEventId()
  local boolean W4A=W3A==EVENT_UNIT_ISSUED_ORDER or W3A==EVENT_UNIT_ISSUED_POINT_ORDER or W3A==EVENT_UNIT_ISSUED_TARGET_ORDER
  local boolean FEX=false
  local integer address=GetUnitAbility(SKE,'A1P8')
  if address>0 and GetTriggerEvalCount(t)==1 then
    call SetAbilityDisabled(address,GetAbilityDisabledCount(address)+1)
  endif
  if(GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==SKE)or W4A or IsUnitBadSpellTargeted(SKE)or IsUnitEnsnared(SKE)or(LoadReal(HY,h,442))<(TimerGetElapsed(GlobalTimer))or LoadInteger(HY,GetHandleId(SKE),4414)==1 then
    if W4A==false or Func3925(GetIssuedOrderId())==false then
      set FEX=true
      if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
        call ResetUnitAnimation(SKE)
      endif
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==SGE then
    set s=""
    if IsNeutralsOrObserversOrAllies(GetOwningPlayer(SKE))then
      set s="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
    endif
    set SGE=Func3927(SKE,SGE)
    if SGE!=null then
      call SaveUnitHandle(HY,h,17,(SGE))
      call DestroyEffect(LoadEffectHandle(HY,h,175))
      call DestroyEffect(LoadEffectHandle(HY,h,176))
      call SaveEffectHandle(HY,h,175,(AddSpecialEffectTarget(s,SGE,"overhead")))
      call SaveEffectHandle(HY,h,176,(AddSpecialEffectTarget(s,SGE,"overhead")))
      call SaveReal(HY,h,442,(((TimerGetElapsed(GlobalTimer))+50)*1.0))
      call TriggerRegisterDeathEvent(t,SGE)
      call GroupAddUnit(LoadGroupHandle(HY,h,187),SGE)
    else
      set FEX=true
      call ResetUnitAnimation(SKE)
      call SetUnitPosition(SKE,GetUnitX(SKE),GetUnitY(SKE))
    endif
  else
    set ILX=DistanceBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE))
    if ILX<100 then
      set FEX=true
      set d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
      call UnitAddAbility(d,'A0GS')
      call SetUnitAbilityLevel(d,'A0GS',QIE)
      call IssueTargetOrder(d,"thunderbolt",SGE)
      call GreaterBashStart(SKE,SGE,false,true)
      call SetUnitPosition(SKE,GetUnitX(SKE),GetUnitY(SKE))
      call IssueTargetOrder(SKE,"attack",SGE)
    else
      if GetTriggerEvalCount(t)==1 then
        call DisableTrigger(t)
        call IssueImmediateOrderByIdExFunc(SKE,851993)
        call EnableTrigger(t)
      endif
      if ModuloInteger(GetTriggerEvalCount(t),65)==0 then
        if GetUnitTypeId(SKE)=='E02X' then
          call SetUnitAnimationByIndex(SKE,1)
        else
          call SetUnitAnimationByIndex(SKE,2)
        endif
      endif
      set a=AngleBetweenUnits(SKE,SGE)*bj_DEGTORAD
      call SetUnitFacing(SKE,a*bj_RADTODEG)
      set nx=x+NBX*Cos(a)
      set ny=y+NBX*Sin(a)
      call SetUnitX(SKE,nx)
      call SetUnitY(SKE,ny)
      if Func0789(SKE)then
        call Func0788(SKE)
      endif
      call SetUnitX(d,GetUnitX(SGE))
      call SetUnitY(d,GetUnitY(SGE))
      call SaveReal(HY,h,23,((nx)*1.0))
      call SaveReal(HY,h,24,((ny)*1.0))
      set group036=(LoadGroupHandle(HY,h,187))
      set g=GetAvailableGroup()
      set tt_unit1=SKE
      set unit238=SKE
      call GroupEnumUnitsInRange(g,nx,ny,316,Condition(function Func0816))
      call ForGroup(g,function Func3923)
      call KillGroup(g)
      set g=null
    endif
  endif
  if FEX then
    call DestroyEffect(LoadEffectHandle(HY,h,175))
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call DestroyEffect(LoadEffectHandle(HY,h,177))
    call SetUnitPathing2(SKE,true)
    call MakeUnitTransparent(SKE)
    call Func3922(SKE)
    call KillTrees(GetUnitX(SKE),GetUnitY(SKE),150)
    call SetUnitTimeScale(SKE,1)
    call KillGroup((LoadGroupHandle(HY,h,187)))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  return false
endfunction

function Func3929 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local unit MPI=CreateUnit(GetOwningPlayer(SKE),'o00Q',GetUnitX(SGE),GetUnitY(SGE),0)
  local integer QIE=GetUnitAbilityLevel(SKE,'A1P8')
  local string s=""
  call UnitAddAbility(MPI,'A3OX')
  call UnitAddAbility(MPI,'A3OY')
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(SKE))then
    set s="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
    call nPngMinimapEx(GetUnitX(SGE),GetUnitY(SGE),2,255,255,255,false)
  endif
  if GetUnitTypeId(SKE)=='e00E'then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  call IssueTargetOrder(SKE,"move",SGE)
  call SetUnitPathing2(SKE,false)
  if GetUnitTypeId(SKE)=='E02X' then
    call SetUnitAnimationByIndex(SKE,1)
  else
    call SetUnitAnimationByIndex(SKE,2)
  endif
  call SetUnitTimeScale(SKE,2.5)
  call SetUnitVertexColor(SKE,255,255,255,100)
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,19,(MPI))
  call SaveInteger(HY,h,5,(QIE))
  call SaveReal(HY,h,5,(550+50*QIE)*0.02)
  call SaveReal(HY,h,442,TimerGetElapsed(GlobalTimer)+50.)
  call SaveReal(HY,h,23,GetUnitX(SKE))
  call SaveReal(HY,h,24,GetUnitY(SKE))
  call SaveEffectHandle(HY,h,175,(AddSpecialEffectTarget(s,SGE,"overhead")))
  call SaveEffectHandle(HY,h,176,(AddSpecialEffectTarget(s,SGE,"overhead")))
  call SaveEffectHandle(HY,h,177,(AddSpecialEffectTarget("war3mapImported\\ShockwaveMissilePurple.mdx",SKE,"origin")))
  call SaveGroupHandle(HY,h,187,(GetAvailableGroup()))
  call GroupAddUnit(LoadGroupHandle(HY,h,187),SGE)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddCondition(t,Condition(function Func3928))
  set t=null
  set SKE=null
  set SGE=null
  set MPI=null
endfunction

function Func3930 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())==false then
    call Func3929()
  else
    call Func3922(GetTriggerUnit())
  endif
endfunction

function Func3931 takes nothing returns nothing
  if IsUnitEnsnared(GetTriggerUnit())then
    call Func0658('TX1U')
  endif
endfunction

function Func3932 takes unit u,unit u2 returns nothing
  local real result=Atan2(GetUnitY(u2)-GetUnitY(u),GetUnitX(u2)-GetUnitX(u))
  call GreaterBashStart(u,u2,true,true)
endfunction

function Func3933 takes nothing returns nothing
  call Func3932(unit240,GetEnumUnit())
endfunction

function Func3934 takes unit u,unit u2 returns nothing
  local group g=GetAvailableGroup()
  local unit u3
  set tt_unit1=u
  set unit240=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),275,Condition(function Func0816))
  loop
    set u3=FirstOfGroup(g)
    exitwhen u3==null
    call GroupRemoveUnit(g,u3)
    call Func3932(u,u3)
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func3935 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer c=GetTriggerEvalCount(t)
  local integer N4E
  local integer QIE
  local real a
  local real cx=(LoadReal(HY,(h),23))
  local real cy=(LoadReal(HY,(h),24))
  local real tx=GetUnitX(SGE)
  local real ty=GetUnitY(SGE)
  local real ILX=DistanceBetweenXY(tx,ty,cx,cy)
  call SaveReal(HY,(h),23,((tx)*1.0))
  call SaveReal(HY,(h),24,((ty)*1.0))
  if GetTriggerEventId()==EVENT_UNIT_DEATH or c==200 or ILX>1800 then
    call SetUnitVertexColor(SKE,255,255,255,255)
    call UnitShareVision(SGE,GetOwningPlayer(SKE),false)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if c<100 then
      set N4E=c
    else
      set N4E=200-c
    endif
    call SetUnitVertexColor(SKE,255,255,255,255*(100-N4E)/100)
    if c==100 then
      set QIE=(LoadInteger(HY,(h),5))
      set a=Atan2(GetUnitY(SGE)-GetUnitY(SKE),GetUnitX(SGE)-GetUnitX(SKE))
      call SetUnitPosition(SKE,GetUnitX(SGE)+80*Cos(a),GetUnitY(SGE)+80*Sin(a))
      call SetUnitAnimation(SKE,"attack")
      call IssueTargetOrder(SKE,"attack",SGE)
      if GetUnitAbilityLevel(SKE,'A0G4')>0 then
        call Func3932(SKE,SGE)
      else
        call Func3934(SKE,SGE)
      endif
      call DamageTarget(SKE,SGE,1,50+100*QIE)
      if GetUnitAbilityLevel(SGE,'A3E9')==1 then
        if IsBlocked(SKE)==false then
          call DamageTarget(SGE,SKE,1,50+100*QIE)
          call IssueTargetOrder(SGE,"attack",SKE)
        else
          call RemoveLinkenBuff(SKE)
        endif
      endif
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3936 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0G4')
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A1D8')
  endif
  call UnitShareVision(SGE,GetOwningPlayer(SKE),true)
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveReal(HY,(h),23,((GetUnitX(SGE))*1.0))
  call SaveReal(HY,(h),24,((GetUnitY(SGE))*1.0))
  call TriggerRegisterTimerEvent(t,0.001,true)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func3935))
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3937 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  call SetUnitAnimation(u,"spell morph")
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func3938 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  call UnitShareVision(LoadUnitHandle(HY,(h),17),GetOwningPlayer(u),false)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func3939 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  call SaveUnitHandle(HY,(h),2,(u))
  call TriggerRegisterTimerEvent(t,0.,true)
  call TriggerAddCondition(t,Condition(function Func3937))
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveUnitHandle(HY,(h),17,(GetSpellTargetUnit()))
  call TriggerRegisterTimerEvent(t,1.,true)
  call TriggerAddCondition(t,Condition(function Func3938))
  call UnitShareVision(GetSpellTargetUnit(),GetOwningPlayer(u),true)
  set t=null
  set u=null
endfunction

function Func3940 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())==false then
    call Func3939()
  endif
endfunction

function Func3941 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real YOA=(LoadReal(HY,h,295))
  local real YRA=(LoadReal(HY,h,296))
  local integer QIE=GetUnitAbilityLevel(SKE,'A07Q')
  local real XXO=0.33
  if QIE==2 then
    set XXO=0.28
  elseif QIE==3 then
    set XXO=0.23
  endif
  call SetWidgetLife(SKE,RMaxBJ(GetUnitState(SKE,UNIT_STATE_MAX_LIFE)*YRA*0.01,GetUnitState(SKE,UNIT_STATE_MAX_LIFE)*XXO))
  call SetUnitLifePercentBJ(SGE,YOA)
  if GetUnitLifePercent(SGE)<25.00 and GetUnitState(SGE,UNIT_STATE_LIFE)>1 then
    call SetUnitLifePercentBJ(SGE,25.00)
  endif
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3942 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local unit d
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveReal(HY,h,295,((GetUnitLifePercent(SKE))*1.0))
  call SaveReal(HY,h,296,((GetUnitLifePercent(SGE))*1.0))
  call TriggerAddCondition(t,Condition(function Func3941))
  call TriggerRegisterTimerEvent(t,0,false)
  set t=null
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func3943 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())==false or IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))then
    call Func3942()
  endif
endfunction

function IsBackmorphSpellStart takes unit u,integer id returns boolean
  if id=='ANcr' then
    return GetUnitTypeId(u)!='N01I'
  elseif id=='A03G' then
    return GetUnitTypeId(u)!='Hlgr'
  elseif id=='A093' then
    return GetUnitTypeId(u)!='U008'
  elseif id=='A19Z' then
    return GetUnitTypeId(u)!='O016'
  elseif id=='A1RI' then
    return GetUnitTypeId(u)!='Eevi'
  elseif id=='A1TX' then
    return GetUnitTypeId(u)!='E02N'
  elseif id=='A1WH' then
    return GetUnitTypeId(u)!='H001'
  elseif id=='A31T' then
    return GetUnitTypeId(u)!='H001'
  elseif id=='A34X' then
    return GetUnitTypeId(u)!='E02X'
  elseif id=='A34Y' then
    return GetUnitTypeId(u)!='E02X'
  elseif id=='A34Z' then
    return GetUnitTypeId(u)!='E02X'
  elseif id=='A350' then
    return GetUnitTypeId(u)!='E02X'
  elseif id=='A11T' then
    return GetUnitTypeId(u)!='Hblm'
  elseif id=='A15J' then
    return GetUnitTypeId(u)!='H00R'
  elseif id=='A2NE' then
    return GetUnitTypeId(u)!='N0M7'
  endif
  return false
endfunction

function Func3945 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
  else
  endif
  set t=null
endfunction

function Func3946 takes nothing returns nothing
  local unit u
  local trigger t
  local integer h
  if IsBackmorphSpellStart(GetTriggerUnit(),GetSpellAbilityId())then
    return
  endif
  set u=GetTriggerUnit()
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,36+4*GetUnitAbilityLevel(u,GetSpellAbilityId()),false)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3945))
  call SaveUnitHandle(HY,h,0,u)
  set t=null
  set u=null
endfunction

function Func3947 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGI=(LoadUnitHandle(HY,(h),335))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call UnitRemoveAbility(SGE,'A26T')
    call UnitRemoveAbility(SGE,'B0EJ')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if GetTriggerUnit()!=SGI then
      call KillUnit(SGI)
    endif
  else
    if IssueTargetOrder(SGI,"attack",SGE)==false then
      call UnitShareVision(SGE,GetOwningPlayer(SGI),true)
      call IssueTargetOrder(SGI,"attack",SGE)
      call UnitShareVision(SGE,GetOwningPlayer(SGI),false)
    endif
    if IsMagicImmune(SGE)then
      call UnitRemoveAbility(SGE,'A26T')
      call UnitRemoveAbility(SGE,'B0EJ')
    endif
  endif
  set t=null
  set SGI=null
  set SGE=null
  return false
endfunction

function Func3948 takes player p,unit SGI,unit SGE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SetUnitOwner(SGI,p,false)
  call TriggerRegisterDeathEvent(t,SGI)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerAddCondition(t,Condition(function Func3947))
  call SaveUnitHandle(HY,(h),335,(SGI))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call UnitAddAbility(SGI,'Aloc')
  call SetUnitPosition(SGI,GetUnitX(SGE)+100,GetUnitY(SGE)+100)
  call IssueTargetOrder(SGI,"attack",SGE)
  call SetUnitMoveSpeed(SGI,522)
  call SetUnitVertexColorBJ(SGI,100,100,100,60)
  set t=null
endfunction

function Func3949 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))
endfunction

function Func3950 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit u
  local integer QIE=GetUnitAbilityLevel(SKE,'A2KZ')
  local unit d
  local group g=GetAvailableGroup()
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),925,Condition(function Func3949))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    call UnitAddAbilityTimedExF(u,'A26T',1,1.5+QIE,'B0EJ')
    set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
    call UnitAddAbility2(d,'A24K')
    call SetUnitAbilityLevel(d,'A24K',QIE)
    call SaveUnitHandle(HY,GetHandleId(d),'ilsr',u)
    call IssueTargetOrderByIdFuckingEx(d,852274,u,false)
    call SaveInteger(HY,GetHandleId(unit004),'ills','B0EN')
    call Func3948(GetOwningPlayer(SKE),unit004,u)
    set d=null
  endloop
  call KillGroup(g)
  call PlaySoundAtPos(sound049,GetUnitX(u),GetUnitY(u))
  set SKE=null
  set u=null
  set d=null
  set SKE=null
endfunction

function Func3951 takes unit u returns boolean
  local integer id=GetUnitTypeId(u)
  return id=='Eevm' or id=='E02V' or id=='E02W' or id=='E02U' or id=='Eevi'
endfunction

function Func3952 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and IsUnitIllusion(GetFilterUnit())and Func3951(GetFilterUnit())
endfunction

function Func3953 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit tb=LoadUnitHandle(HY,h,0)
  local group g=LoadGroupHandle(HY,h,1)
  local unit u
  local integer YJA
  local integer YKA
  local integer BHX
  local integer L4A
  local integer aid3=0
  if GetHandleId(tb)==0 then
    call KillGroup(g)
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  elseif IsDead(tb)==false then
    set tt_player1=GetOwningPlayer(tb)
    set tt_unit1=tb
    set YKA=GetUnitTypeId(tb)
    set L4A=0
    if YKA=='Eevm'then
      set L4A='A3IZ'
    elseif YKA=='E02V' then
      set L4A='A3J0'
    elseif YKA=='E02W' then
      set L4A='A3J1'
    elseif YKA=='E02U' then
      set L4A='A3J2'
    endif
    call GroupEnumUnitsOfPlayer(g,tt_player1,Condition(function Func3952))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      set YJA=GetUnitTypeId(u)
      set BHX=0
      if YJA=='Eevm'then
        set BHX='A3IV'
      elseif YJA=='E02V' then
        set BHX='A3IW'
      elseif YJA=='E02W' then
        set BHX='A3IX'
      else
        set BHX='A3IY'
      endif
      if DistanceBetweenUnits(u,tb)<925 then
        if YJA!=YKA then
          if GetUnitUserData(u)==0 then
            call SetUnitUserData(u,YJA)
          endif
          if L4A!=0 then
            call UnitAddAbility(u,L4A)
            call UnitRemoveAbility(u,L4A)
            call AddUnitAnimationProperties(u,"alternate",true)
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",u,"chest"))
          else
            call UnitAddAbility(u,BHX)
            call UnitRemoveAbility(u,BHX)
            call AddUnitAnimationProperties(u,"alternate",false)
            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",u,"chest"))
          endif
          call SetUnitVertexColor(u,150,150,150,200)
        endif
      elseif YJA!='Eevi' then
        call UnitAddAbility(u,BHX)
        call UnitRemoveAbility(u,BHX)
        call SetUnitVertexColor(u,150,150,150,200)
      endif
      call GroupRemoveUnit(g,u)
    endloop
  endif
  set t=null
  set tb=null
endfunction

function Func3954 takes unit u returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call SaveGroupHandle(HY,h,1,GetAvailableGroup())
  call TimerStart(t,0.5,true,function Func3953)
  set t=null
endfunction

function Func3955 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A0H4')
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call UnitAddAbility(d,'A2JN')
  call SetUnitAbilityLevel(d,'A2JN',QIE)
  call SaveUnitHandle(HY,GetHandleId(d),'ilsr',u)
  call IssueTargetOrderByIdFuckingEx(d,852274,u,false)
  call SaveInteger(HY,GetHandleId(unit004),'ills','BIil')
  call SetUnitVertexColor(unit004,150,150,150,200)
  set u=null
  set d=null
endfunction

function Func3956 takes nothing returns nothing
  call AddToPurgeList('A26T','PRGE')
  call AddToPurgeList('B0EJ','PRGE')
  call HideAbility('A3FI')
  call ExecuteFunc("Func3957")
endfunction

function Func3957 takes nothing returns nothing
  call Func3954(tt_unit1)
endfunction

function Func3958 takes nothing returns nothing
  local unit SKE=tt_unit1
  local unit SGE=tt_unit3
  local integer QIE=GetUnitAbilityLevel(SKE,'A046')
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",SGE,"chest"))
  call UnitAddAbilityTimedExF(SGE,'A3EJ',QIE,4,'A3EJ')
  call UnitAddAbilityTimedExF(SGE,'A3EI',1,4,'B3EI')
  call DamageTarget(SKE,SGE,1,60.00+QIE*50.00)
  set SKE=null
  set SGE=null
endfunction

function Func3959 takes nothing returns nothing
  call AddProjectile(GetTriggerUnit(),GetSpellTargetUnit(),'h0EN',"Func3958",4000,false)
endfunction

function Func3960 takes nothing returns nothing
  local unit u=tt_unit1
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",u,"origin"))
  call UnitAddAbilityTimedExF(u,'A3EJ',tt_int1,4,'A3EJ')
  call UnitAddAbilityTimedExF(u,'A3EI',1,4,'B3EI')
  set u=null
endfunction

function Func3961 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,GetSpellAbilityId())
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  call Func2325(u,'h08O',60+50*QIE,1800,240,240,x,y,GetSpellTargetX(),GetSpellTargetY(),1500,1,false,"Func3960",QIE)
  set u=null
endfunction

function Func3962 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call Func0862(LoadUnitHandle(HY,h,0))
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
endfunction

function Func3963 takes unit u returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,0,u)
  call TimerStart(t,0.01,false,function Func3962)
  set t=null
endfunction

function Func3964 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local unit YUA=GetEventDamageSource()
  local integer QIE=GetUnitAbilityLevel(u,'A04E')
  local real dmg=GetEventDamage()
  local real YWA=(LoadReal(HY,(h),412))
  local real WNE=(LoadReal(HY,(h),411))
  local integer h2
  if IsPlayerBelongToTeams(GetOwningPlayer(YUA))and GetUnitAbilityLevel(u,'A36D')==0 then
    if(WNE+6.)<(TimerGetElapsed(GlobalTimer))then
      set YWA=0
    endif
    set WNE=TimerGetElapsed(GlobalTimer)
    set YWA=YWA+dmg
    if YWA>650-50*QIE then
      set YWA=0
      call Func3963(u)
      call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",u,"origin"))
    endif
    call SaveReal(HY,(h),412,YWA)
    call SaveReal(HY,(h),411,WNE)
  endif
  set t=null
  set u=null
  set YUA=null
  return false
endfunction

function Func3965 takes nothing returns nothing
  if GetEventDamage()>0 then
    call Func3964()
  endif
endfunction

function Func3966 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func3965))
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveReal(HY,(h),412,0.0)
  call SaveReal(HY,(h),411,TimerGetElapsed(GlobalTimer))
  set t=null
  set u=null
endfunction

function Func3967 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,(h),22))
  call KillGroup(g)
  call FlushChildHashtable(HY,(h))
  call DestroyTimer(t)
  set t=null
  set g=null
endfunction

function Func3968 takes group g returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  call SaveGroupHandle(HY,(h),22,(g))
  call TimerStart(t,10.,false,function Func3967)
  set t=null
endfunction

function Func3969 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer i=1
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real tx
  local real ty
  local real dmg
  local real H_I
  local integer QIE=GetUnitAbilityLevel(SKE,'A29I')
  local group g=GetAvailableGroup()
  if QIE==1 then
    set H_I=1.5
    set dmg=200
  elseif QIE==2 then
    set H_I=1.8
    set dmg=290
  elseif QIE==3 then
    set H_I=2.2
    set dmg=380
  endif
  loop
    set tx=x+800*Cos(22.5*i*bj_DEGTORAD)
    set ty=y+800*Sin(22.5*i*bj_DEGTORAD)
    call Func0854(SKE,null,dmg,H_I,0.5,x,y,tx,ty,250,g,false,775)
    set i=i+1
    exitwhen i>16
  endloop
  call Func3968(g)
  set SKE=null
  set g=null
endfunction

function Func3970 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A226')
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  local unit u2
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),400,Condition(function Func0824))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if u2!=Roshan then
      call UnitAddAbilityTimedExF(u2,'A3P1'-1+QIE,1,6,'B0E8')
      call DamageTarget(u,u2,23,25+50*QIE)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",u2,"chest"))
    endif
  endloop
  call KillGroup(g)
  set d=null
  set u=null
endfunction

function Func3971 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  call SetUnitTimeScale(LoadUnitHandle(HY,(h),2),1)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  return false
endfunction

function Func3972 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local unit u=GetTriggerUnit()
  call TriggerRegisterTimerEvent(t,0.3,false)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func3971))
  call SaveUnitHandle(HY,GetHandleId(t),2,(u))
  call SetUnitTimeScale(u,2)
  set t=null
  set u=null
endfunction

function Func3973 takes nothing returns nothing
  call AddToPurgeList('A228','PRGE')
  call AddToPurgeList('A227','PRGE')
  call AddToPurgeList('B0E8','PRGE')
  call AddToPurgeList('A3EJ','PRGE')
  call AddToPurgeList('A3EI','PRGE')
  call AddToPurgeList('B3EI','PRGE')
endfunction

function Func3974 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(TmpUnit376))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0
endfunction

function Func3975 takes unit source,unit RCX,real result returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  set TmpUnit376=source
  call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),210,Condition(function Func3974))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call DamageTarget(source,u2,23,result)
    call GroupRemoveUnit(g,u2)
  endloop
  call KillGroup(g)
endfunction

function Func3976 takes nothing returns boolean
  return IsUnitInGroup(GetFilterUnit(),group015)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsDead(GetFilterUnit())==false and GetFilterUnit()!=unit241
endfunction

function Func3977 takes group g,unit source,unit RCX,unit M_X returns unit
  local group IBI=GetAvailableGroup()
  local unit M0X=null
  local unit M1X
  set group015=g
  set TmpUnit376=RCX
  call GroupEnumUnitsInRange(IBI,GetUnitX(source),GetUnitY(source),500,Condition(function Func3976))
  set M1X=FirstOfGroup(IBI)
  set M0X=M1X
  loop
    exitwhen M1X==null
    if GetUnitState(M1X,UNIT_STATE_LIFE)!=GetUnitState(M1X,UNIT_STATE_MAX_LIFE)then
      if M1X!=RCX and IsUnitType(M1X,UNIT_TYPE_HERO)and IsUnitType(M0X,UNIT_TYPE_HERO)==false then
        set M0X=M1X
      elseif M1X!=RCX and GetUnitState(M1X,UNIT_STATE_LIFE)<GetUnitState(M0X,UNIT_STATE_LIFE)and IsUnitType(M1X,UNIT_TYPE_HERO)and IsUnitType(M0X,UNIT_TYPE_HERO)then
        set M0X=M1X
      elseif M1X!=RCX and IsUnitType(M0X,UNIT_TYPE_HERO)==false and GetUnitState(M1X,UNIT_STATE_LIFE)<GetUnitState(M0X,UNIT_STATE_LIFE)then
        set M0X=M1X
      elseif M1X==RCX then
        set M0X=M1X
      endif
    endif
    call GroupRemoveUnit(IBI,M1X)
    set M1X=FirstOfGroup(IBI)
  endloop
  call KillGroup(IBI)
  set M1X=null
  set tt_unit1=M0X
  set M0X=null
  return tt_unit1
endfunction

function Func3978 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local string s="Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl"
  local string Y5A="origin"
  local unit array WXI
  local integer i=1
  local integer QIE=GetUnitAbilityLevel(SKE,('A0OR'))
  local real IIX=60+QIE*20
  local group g=GetAvailableGroup()
  local integer count
  local boolean b=false
  set unit241=SKE
  if QIE==1 then
    set count=3
  elseif QIE==2 then
    set count=4
  elseif QIE==3 then
    set count=5
  elseif QIE==4 then
    set count=6
  endif
  call SetUnitState(SKE,UNIT_STATE_LIFE,GetUnitState(SKE,UNIT_STATE_LIFE)+IIX)
  call FuckingAssistBuffWrap(SKE,WXI[i])
  call Func3975(SKE,SKE,IIX)
  call GroupAddUnit(g,SKE)
  call Func0690(s,SKE,Y5A,2)
  if SGE==SKE then
    set WXI[i]=Func3977(g,SKE,SKE,SGE)
  else
    set WXI[i]=SGE
  endif
  if WXI[i]==null then
    call KillGroup(g)
    return
  endif
  call SetUnitState(WXI[i],UNIT_STATE_LIFE,GetUnitState(WXI[i],UNIT_STATE_LIFE)+IIX)
  call FuckingAssistBuffWrap(SKE,WXI[i])
  call Func3975(SKE,WXI[i],IIX)
  call GroupAddUnit(g,WXI[i])
  call Func0690(s,WXI[i],Y5A,2)
  call CreateLightningOnUnit("SPLK",SKE,WXI[i],85,.3,.5,1,1,.7,.7)
  call PlaySoundOnUnitEx("Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissileHit2.wav",127,1.2,WXI[i])
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl",WXI[i],"chest"))
  set i=2
  loop
    exitwhen i>count or b
    set WXI[i]=Func3977(g,WXI[i-1],SKE,SGE)
    if WXI[i]==null then
      set b=true
    else
      call GroupAddUnit(g,WXI[i])
      call Func0690(s,WXI[i],Y5A,2)
      call SetUnitState(WXI[i],UNIT_STATE_LIFE,GetUnitState(WXI[i],UNIT_STATE_LIFE)+IIX)
      call FuckingAssistBuffWrap(SKE,WXI[i])
      call Func3975(SKE,WXI[i],IIX)
      call CreateLightningOnUnit("SPLK",WXI[i-1],WXI[i],85,.3,.5,1,1,.7,.7)
      call PlaySoundOnUnitEx("Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissileHit2.wav",127,1.2,WXI[i])
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl",WXI[i],"chest"))
      set i=i+1
    endif
  endloop
  call KillGroup(g)
  loop
    exitwhen count<=0
    set WXI[count]=null
    set count=count-1
  endloop
  set SKE=null
  set SGE=null
endfunction

function Func3979 takes unit source,unit RCX,integer ZAE returns nothing
  local unit M_X=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
  call UnitAddAbility2(M_X,('A0NJ'))
  call SetUnitAbilityLevel(M_X,('A0NJ'),ZAE)
  call IssueTargetOrder(M_X,"slow",RCX)
  set M_X=null
endfunction

function Func3980 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=LoadInteger(HY,h,5)
  local integer c=GetTriggerExecCount(t)
  local real dmg=8+6*QIE
  local unit d=(LoadUnitHandle(HY,h,19))
  local unit QFI
  local boolean FEX=GetTriggerEventId()==EVENT_WIDGET_DEATH
  if QIE==4 then
    set dmg=36
  endif
  if FEX==false and GetUnitAbilityLevel(SGE,'A304')>0 then
    if c>2 then
      call DamageTarget(Func0440(SKE,SGE),SGE,23,dmg)
      if c==8 then
        set FEX=true
      endif
    endif
    if QIE==1 then
      if c==1 then
        call Func3979(SKE,SGE,1)
      elseif c==2 then
        call Func3979(SKE,SGE,1)
      endif
    elseif QIE==2 then
      if c==1 then
        call Func3979(SKE,SGE,1)
      elseif c==2 then
        call Func3979(SKE,SGE,2)
      endif
    elseif QIE==3 then
      if c==1 then
        call Func3979(SKE,SGE,2)
      elseif c==2 then
        call Func3979(SKE,SGE,3)
      endif
    elseif QIE==4 then
      if c==1 then
        call Func3979(SKE,SGE,2)
      elseif c==2 then
        call StunTargetEx(SGE,1.0,false)
      endif
    endif
  else
    set FEX=true
  endif
  if FEX then
    call UnitRemoveAbility(SGE,'A304')
    call UnitRemoveAbility(SGE,'a304')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set QFI=null
  set SKE=null
  set SGE=null
  set t=null
  set d=null
endfunction

function Func3981 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=tt_unit1
  local unit SGE=tt_unit3
  local integer ht=GetHandleId(GetTriggeringTrigger())
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local integer QIE=LoadInteger(HY,ht,'A3E9')
  local boolean UII=LoadBoolean(HY,ht,'A3E9')
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddAction(t,function Func3980)
  call UnitAddAbility2(SGE,'A304')
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,19,(d))
  call SaveInteger(HY,h,5,QIE)
  if UII==false and GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(SKE)==false then
    if IsBlocked(SKE)==false then
      call SaveUnitHandle(TempHash,'A3E9',0,SGE)
      call SaveUnitHandle(TempHash,'A3E9',1,SKE)
      call SaveInteger(TempHash,'A3E9',0,QIE)
      call ExecuteFunc("Func3982")
    else
      call RemoveLinkenBuff(SKE)
    endif
  endif
  call Func3979(SKE,SGE,1)
  set d=null
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func3982 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  local trigger t=AddProjectile(SKE,SGE,'h0EQ',"Func3981",1300,true)
  local integer h=GetHandleId(t)
  call SaveBoolean(HY,h,'A3E9',true)
  call SaveInteger(HY,h,'A3E9',QIE)
  call FlushChildHashtable(TempHash,'A3E9')
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func3983 takes nothing returns nothing
  local trigger t=AddProjectile(GetTriggerUnit(),GetSpellTargetUnit(),'h0EQ',"Func3981",1300,true)
  local integer h=GetHandleId(t)
  call SaveInteger(HY,h,'A3E9',GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
  set t=null
endfunction

function Func3984 takes nothing returns nothing
  call PreloadAbility('A0NJ')
  call AddToPurgeList('A304','PRGE')
  call AddToPurgeList('a304','PRGE')
  call AddToPurgeList('B07E','PRGE')
endfunction

function Func3985 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local integer h=GetHandleId(GetTriggeringTrigger())
  local integer hu=GetHandleId(u)
  local string s
  if IsUnitEnemy(u,tt_player1)then
    set s="-DEF"
  else
    set s="+DEF"
  endif
  call Stats_Fucking_Modify(u,-LoadInteger(HY,h,hu),s)
  set u=null
endfunction

function Func3986 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local integer h=GetHandleId(GetTriggeringTrigger())
  local integer hu=GetHandleId(u)
  local real ZXA=LoadReal(HY,h,hu)
  local integer ZOA=LoadInteger(HY,h,hu)
  local real r1=real105
  local integer FXE
  local string s
  if IsDead(u)==false then
    if IsUnitEnemy(u,tt_player1)then
      set s="-DEF"
    else
      set s="+DEF"
    endif
    call SaveReal(HY,h,hu,ZXA*1.+r1)
    set FXE=R2I(ZXA*1.+r1)
    if ZOA!=FXE then
      call Stats_Fucking_Modify(u,FXE-ZOA,s)
      call SaveInteger(HY,h,hu,FXE)
    endif
  endif
  set u=null
endfunction

function Func3987 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local group g=(LoadGroupHandle(HY,(ZAE),22))
  local player whichPlayer=(LoadPlayerHandle(HY,(ZAE),54))
  local integer QIE=GetTriggerEvalCount(RBX)
  local integer ZBE=(LoadInteger(HY,(ZAE),188))
  local real result=(LoadReal(HY,(ZAE),68))
  set real105=result
  set tt_player1=whichPlayer
  set integer089=QIE
  if QIE>=ZBE/1.0 then
    call ForGroup(g,function Func3985)
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call ForGroup(g,function Func3986)
  endif
  set RBX=null
  set g=null
  set whichPlayer=null
  return false
endfunction

function Func3988 takes nothing returns nothing
  call Func1033(tt_player1,GetOwningPlayer(GetEnumUnit()))
  call Func0690(string009,GetEnumUnit(),"chest",3)
  call Func0690(string009,GetEnumUnit(),"chest",3)
  call Func0690(string009,GetEnumUnit(),"right hand",3)
  call Func0690(string009,GetEnumUnit(),"left hand",3)
endfunction

function Func3989 takes nothing returns boolean
  return AliveNonBuildOrMarker(GetFilterUnit())and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or IsUnitIllusion(GetFilterUnit()))
endfunction

function Func3990 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetUnitAbilityLevel(source,'A10Q')
  local integer ZBE=24
  local real result=0.5+0.25*QIE
  local real ZEE=GetSpellTargetX()
  local real ZWE=GetSpellTargetY()
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h007',ZEE,ZWE,0)
  local integer ZCE=0
  local boolean ZSE=false
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(source,'A1DB')
    set ZBE=24
    set result=1.+0.25*QIE
    set ZSE=true
  endif
  set string009=""
  set integer089=ZBE
  set ZCE=255
  set string009="Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl"
  call SetUnitVertexColor(RCX,255,255,255,ZCE)
  call UnitApplyTimedLife(RCX,'BTLF',5)
  if ZSE then
    call GroupEnumUnitsInRange(g,ZEE,ZWE,800,Condition(function Func3989))
  else
    call GroupEnumUnitsInRange(g,ZEE,ZWE,600,Condition(function Func3989))
  endif
  set tt_player1=GetOwningPlayer(source)
  call ForGroup(g,function Func3988)
  call SaveGroupHandle(HY,(ZAE),22,(g))
  call SavePlayerHandle(HY,(ZAE),54,(GetOwningPlayer(source)))
  call SaveInteger(HY,(ZAE),188,(ZBE))
  call SaveReal(HY,(ZAE),68,((result)*1.0))
  call TriggerRegisterTimerEvent(RBX,1.0,true)
  call TriggerAddCondition(RBX,Condition(function Func3987))
  call TriggerEvaluate(RBX)
  set source=null
  set g=null
  set RCX=null
  set RBX=null
endfunction

function Func3991 takes string ZJE,unit source,unit RCX returns nothing
  local texttag VQO=CreateTextTag()
  call SetTextTagText(VQO,ZJE,0.033)
  call SetTextTagPosUnit(VQO,source,64)
  call SetTextTagColor(VQO,160,0,255,255)
  call SetTextTagVelocity(VQO,0,0.0355)
  call SetTextTagFadepoint(VQO,0.15)
  call SetTextTagPermanent(VQO,false)
  call SetTextTagLifespan(VQO,0.65)
  if IsUnitAlly(RCX,LocalPlayer)or PlayerObserver then
    call SetTextTagVisibility(VQO,true)
  else
    call SetTextTagVisibility(VQO,false)
  endif
  set VQO=null
endfunction

function Func3992 takes real result returns string
  if result>4.5 then
    return"5.0"
  elseif result>4.0 then
    return"4.5"
  elseif result>3.5 then
    return"4.0"
  elseif result>3.0 then
    return"3.5"
  elseif result>2.5 then
    return"3.0"
  elseif result>2.0 then
    return"2.5"
  elseif result>1.5 then
    return"2.0"
  elseif result>1.0 then
    return"1.5"
  elseif result>0.5 then
    return"1.0"
  elseif result>0.0 then
    return"0.5"
  else
    return"0.0"
  endif
  return" "
endfunction

function Func3993 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=GetTriggerEvalCount(RBX)
  if QIE>11 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call Func3991(Func3992(5.5-0.5*QIE),source,source)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func3994 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local real result=(LoadReal(HY,(ZAE),20))
  local real ZEE=Func0468(GetUnitState(source,UNIT_STATE_LIFE)-result,1)
  local real ZWE=(LoadReal(HY,(GetHandleId(source)),243))
  call SetUnitState(source,UNIT_STATE_LIFE,ZEE)
  call SaveReal(HY,(GetHandleId(source)),243,((ZWE-result)*1.0))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func3995 takes unit source,real result returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real ZEE=(LoadReal(HY,(GetHandleId(source)),243))
  call SaveUnitHandle(HY,(ZAE),17,(source))
  call SaveReal(HY,(ZAE),20,((result)*1.0))
  call SaveReal(HY,(GetHandleId(source)),243,((ZEE+result)*1.0))
  call TriggerRegisterTimerEvent(RBX,0,false)
  call TriggerAddCondition(RBX,Condition(function Func3994))
  set RBX=null
endfunction

function Func3996 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source
  local real result
  local real ZEE
  local integer QIE=GetTriggerEvalCount(RBX)
  local real ZWE
  local real ZYE=(LoadReal(HY,(ZAE),389))
  local real ICX=(LoadReal(HY,(ZAE),390))
  if ZYE!=(TimerGetElapsed(GlobalTimer))then
    set ZYE=(TimerGetElapsed(GlobalTimer))
    set ICX=0
    call SaveReal(HY,(ZAE),389,((ZYE)*1.0))
    call SaveReal(HY,(ZAE),390,((ICX)*1.0))
  endif
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    set source=GetTriggerUnit()
    set ZWE=(LoadReal(HY,(GetHandleId(source)),243))
    set result=GetUnitState(source,UNIT_STATE_LIFE)
    set ZEE=GetEventDamage()
    if((result-ZWE-ICX)-ZEE)<1 then
      call SetUnitState(source,UNIT_STATE_LIFE,result+ZEE+ICX)
      call Func3995(source,ZEE)
    else
      set ICX=ICX+ZEE
      call SaveReal(HY,(ZAE),390,((ICX)*1.0))
    endif
  else
    call SaveInteger(HY,(GetHandleId(((LoadUnitHandle(HY,(ZAE),17))))),2485,2)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),33))
    call UnitRemoveAbility((LoadUnitHandle(HY,(ZAE),17)),'A21I')
    call UnitRemoveAbility((LoadUnitHandle(HY,(ZAE),17)),'B07D')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set source=null
  set RBX=null
  return false
endfunction

function Func3997 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local string s=""
  call UnitAddAbility2(SGE,'A21I')
  call TriggerRegisterTimerEvent(t,5,false)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func3996))
  call SaveEffectHandle(HY,(h),32,(AddSpecialEffectTarget("war3mapImported\\DarkHands.mdx",SGE,"overhead")))
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(SGE))then
    set s="war3mapImported\\ShallowGrave.mdx"
  endif
  call SaveEffectHandle(HY,(h),33,(AddSpecialEffectTarget(s,SGE,"origin")))
  call SaveReal(HY,(GetHandleId(SGE)),243,(0*1.0))
  call SaveReal(HY,(h),389,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call SaveReal(HY,(h),390,(0*1.0))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,(GetHandleId(SGE)),2485,1)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerAddCondition(t,Condition(function Func3993))
  call SaveUnitHandle(HY,(h),17,(SGE))
  set t=null
  set SKE=null
  set SGE=null
  call FuckingAssistBuffWrap(SKE,SGE)
endfunction

function Func3998 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer QIE=(LoadInteger(HY,(h),5))
  local real d
  if GetTriggerEvalCount(t)>5 or GetUnitAbilityLevel(SGE,'B0AQ')==0 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call CleanTrigger(t)
    call FlushChildHashtable(HY,(h))
  else
    set d=30*QIE-20
    call DamageTarget(SKE,SGE,1,d)
    call TextTagOnUnit(I2S(R2I(d)),3,SGE,0.025,160,255,0,230,Func0590(SGE)or PlayerObserver)
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func3999 takes unit source,unit RCX,integer ZAE returns nothing
  local unit M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
  local trigger t
  local integer QIE
  call UnitAddAbility2(M_X,'A17N')
  call SetUnitAbilityLevel(M_X,'A17N',ZAE)
  if IssueTargetOrder(M_X,"shadowstrike",RCX)then
    call DamageTarget(source,RCX,1,25*ZAE)
    call TextTagOnUnit(I2S(25*ZAE)+"!",3,RCX,0.025,160,255,0,230,Func0590(RCX)or PlayerObserver)
    if ZAE>1 then
      set t=CreateTrigger()
      set QIE=GetHandleId(t)
      call TriggerRegisterTimerEvent(t,3,true)
      call TriggerRegisterDeathEvent(t,RCX)
      call TriggerAddCondition(t,Condition(function Func3998))
      call SaveUnitHandle(HY,(QIE),2,(source))
      call SaveUnitHandle(HY,(QIE),17,(RCX))
      call SaveInteger(HY,(QIE),5,(ZAE))
      set t=null
    endif
  endif
  set M_X=null
endfunction

function Func4000 takes nothing returns nothing
  local unit source=GetEnumUnit()
  if IsUnitInGroup(source,group016)==false then
    call Func3999(unit242,source,integer515)
    call GroupAddUnit(group016,source)
  endif
  set source=null
endfunction

function Func4001 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local group g=(LoadGroupHandle(HY,(ZAE),22))
  local unit source=(LoadUnitHandle(HY,(ZAE),19))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),14))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local real result=(LoadReal(HY,(ZAE),13))
  local group IBI
  local real ZEE
  local real ZWE
  local real ZYE
  local real ICX
  local real N1X=30
  local unit M_X
  set integer515=QIE
  if GetTriggerEvalCount(RBX)>LoadInteger(HY,ZAE,11)then
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call ShowUnit(source,false)
    call KillUnit(source)
  else
    set ZEE=GetUnitX(source)
    set ZWE=GetUnitY(source)
    set IBI=GetAvailableGroup()
    set group016=g
    set tt_unit1=RCX
    set unit242=RCX
    call GroupEnumUnitsInRange(IBI,ZEE,ZWE,150,Condition(function Func0824))
    call ForGroup(IBI,function Func4000)
    call KillGroup(IBI)
    set ZYE=SafeX50(ZEE+N1X*Cos(result*bj_DEGTORAD))
    set ICX=SafeY50(ZWE+N1X*Sin(result*bj_DEGTORAD))
    call SetUnitX(source,ZYE)
    call SetUnitY(source,ICX)
    if ModuloInteger(GetTriggerEvalCount(RBX),3)==0 then
      set M_X=CreateUnit(GetOwningPlayer(source),'o01W',ZYE,ICX,0)
      call KillUnit(M_X)
      set M_X=null
    endif
  endif
  set RBX=null
  set g=null
  set IBI=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4002 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local group g=GetAvailableGroup()
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetSpellTargetX()
  local real ZYE=GetSpellTargetY()
  local real ICX= AngleBetweenXY(result,ZEE,ZWE,ZYE)
  local integer QIE=GetUnitAbilityLevel(source,'A173')
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h07K',result,ZEE,ICX)
  local integer XXO=28
  if GetUnitAbilityLevel(source,'A3O3')>0 then
    set XXO=XXO+R2I(200./30)
  endif
  call PlaySoundAtPos(sound031,result,ZEE)
  call SaveUnitHandle(HY,(ZAE),19,(RCX))
  call SaveInteger(HY,(ZAE),5,(QIE))
  call SaveGroupHandle(HY,(ZAE),22,(g))
  call SaveReal(HY,(ZAE),13,((ICX)*1.0))
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call TriggerRegisterTimerEvent(RBX,0.025,true)
  call TriggerAddCondition(RBX,Condition(function Func4001))
  call SetUnitAnimation(source,"Attack")
  call SaveInteger(HY,ZAE,11,XXO)
  set RBX=null
  set RCX=null
  set g=null
  set source=null
endfunction

function Func4003 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(tt_unit1))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitInGroup(GetFilterUnit(),group014)==false
endfunction

function Func4004 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local group D9X=LoadGroupHandle(HY,h,1)
  local real dmg=LoadReal(HY,h,0)
  local group g=GetAvailableGroup()
  local integer c=GetTriggerEvalCount(t)
  local unit u
  if c>23 then
    call DestroyTrigger(t)
    call FlushChildHashtable(HY,h)
    call KillGroup(D9X)
  else
    set tt_unit1=SKE
    set group014=D9X
    call GroupEnumUnitsInRange(g,LoadReal(HY,h,1),LoadReal(HY,h,2),25*c+255,Condition(function Func4003))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call GroupAddUnit(D9X,u)
      call UnitAddAbilityTimedExF(u,'A1W5',1,16.,'B028')
      call Func0906(SKE,u,dmg,16,'A1W5')
      call GroupRemoveUnit(g,u)
    endloop
  endif
  call KillGroup(g)
  set SKE=null
  set t=null
endfunction

function Func4005 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  local boolean CTI=GetSpellAbilityId()=='A0A6'
  local real dmg
  local group g=GetAvailableGroup()
  local integer i=1
  local unit d
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  loop
    exitwhen i>18
    set d=CreateUnit(GetOwningPlayer(SKE),'e017',x,y,0)
    call ImminentTriggeredPointOrder(d,851986,x+675*Cos(i*20*bj_DEGTORAD),y+675*Sin(i*20*bj_DEGTORAD))
    call UnitApplyTimedLife(d,'BTLF',1.15)
    set i=i+1
  endloop
  if CTI then
    set dmg=35+25*QIE
  else
    set dmg=5+25*QIE
  endif
  call SetUnitAnimation(SKE,"attack")
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerAddCondition(t,Condition(function Func4004))
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveGroupHandle(HY,h,1,g)
  call SaveReal(HY,h,0,dmg)
  call SaveReal(HY,h,1,x)
  call SaveReal(HY,h,2,y)
  set d=null
  set t=null
  set SKE=null
endfunction

function Func4006 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call ShowUnit(LoadUnitHandle(HY,h,0),false)
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func4007 takes nothing returns boolean
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local timer tt=CreateTimer()
  call TimerStart(tt,1,false,function Func4006)
  call SaveUnitHandle(HY,GetHandleId(tt),0,GetTriggerUnit())
  call CleanTrigger(t)
  set t=null
  set tt=null
  return false
endfunction

function Func4008 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterUnitEvent(t,GetSummonedUnit(),EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func4007))
  set t=null
endfunction

function Func4009 takes nothing returns nothing
  local unit SKE=GetSummoningUnit()
  local unit w=GetSummonedUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A0MY')
  if QIE>0 then
    call UnitAddAbility2(w,'A35K')
    call SetUnitAbilityLevel(w,'A35K',QIE)
  endif
  if RectContainsUnit(rect010,w)then
    call UnitAddAbility(w,'Aeth')
  endif
  call Func4008()
  set SKE=null
  set w=null
endfunction

function Func4010 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit WXE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer JXX=LoadInteger(HY,h,1)
  local real dmg=LoadReal(HY,h,0)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(SGE,JXX)==0 then
    if JXX=='B35K' then
      call UnitRemoveAbility(SGE,'A35L')
      call UnitRemoveAbility(SGE,'B35L')
      call UnitRemoveAbility(SGE,'A35K')
    endif
    call UnitRemoveAbility(SGE,JXX)
    call RemoveSavedHandle(HY,GetHandleId(SGE),LoadInteger(HY,h,2))
    call DestroyTrigger(t)
    call FlushChildHashtable(HY,h)
  else
    if GetUnitAbilityLevel(SGE,'B35K')>0 and GetUnitAbilityLevel(SGE,'B0MY')==0 then
      call UnitAddAbility3(SGE,'A35L',LoadInteger(HY,h,4))
    else
      call UnitRemoveAbility(SGE,'A35L')
    endif
    if LoadInteger(HY,h,2)=='A0MY' or GetUnitAbilityLevel(SGE,'B0MY')==0 then
      call DamageTarget(WXE,SGE,11,Func0907(SGE,dmg))
    endif
  endif
  set WXE=null
  set SGE=null
  set t=null
endfunction

function Func4011 takes unit WXE,unit SGE returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(SGE)
  local integer ZZA=GetUnitAbilityLevel(WXE,'A0MY')
  local integer Z_A=GetUnitAbilityLevel(WXE,'A35K')
  local integer id
  local integer JXX
  local integer QIE=ZZA+Z_A
  if ZZA>0 then
    set id='A0MY'
    set JXX='B0MY'
  else
    set id='A35K'
    set JXX='B35K'
  endif
  if HaveSavedHandle(HY,hu,id)then
    set t=LoadTriggerHandle(HY,hu,id)
    set h=GetHandleId(t)
    if id=='A35K'then
      call UnitAddAbilityTimedExF(SGE,'A35M',QIE,6*QIE,'B35K')
      if GetUnitAbilityLevel(SGE,'B0MY')==0 then
        call UnitAddAbility3(SGE,'A35L',QIE)
      endif
    endif
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerRegisterDeathEvent(t,SGE)
    call SaveUnitHandle(HY,h,0,WXE)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveTriggerHandle(HY,hu,id,t)
    call SaveInteger(HY,h,1,JXX)
    call SaveInteger(HY,h,2,id)
    if id=='A35K'then
      call UnitAddAbilityTimedExF(SGE,'A35M',QIE,3+3*QIE,'B35K')
      if GetUnitAbilityLevel(SGE,'B0MY')==0 then
        call UnitAddAbility3(SGE,'A35L',QIE)
      endif
    endif
    call TriggerAddCondition(t,Condition(function Func4010))
  endif
  if id=='A0MY'then
    call SaveReal(HY,h,0,6*QIE)
  else
    call SaveReal(HY,h,0,3*QIE)
  endif
  call SaveInteger(HY,h,4,QIE)
  set t=null
endfunction

function Func4012 takes nothing returns nothing
  call AddWrapper("Func4625",0)
  call AddDispellableBuff('B0AQ')
endfunction

function Func4013 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call Stat_Sub(LoadUnitHandle(MHT,h,0),LoadInteger(MHT,h,0),"+DMG")
  call RemoveSavedHandle(MHT,GetHandleId(LoadUnitHandle(MHT,h,0)),'A1A3')
  call FlushChildHashtable(MHT,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func4014 takes unit u,unit SGE,integer QIE returns nothing
  local timer t
  local integer h
  local integer d=R2I(2.5*QIE)
  local real dr=2.5*QIE
  local real r=100*GetWidgetLife(SGE)/GetUnitState(SGE,UNIT_STATE_MAX_LIFE)
  local boolean b=HaveSavedHandle(MHT,GetHandleId(u),'A1A3')
  if b then
    set t=LoadTimerHandle(MHT,GetHandleId(u),'A1A3')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(MHT,GetHandleId(u),'A1A3',t)
    call SaveUnitHandle(MHT,h,0,u)
  endif
  call TimerStart(t,2,false,function Func4013)
  if r>80 then
  elseif r>60 then
    set dr=dr*2
  elseif r>40 then
    set dr=dr*4
  elseif r>20 then
    set dr=dr*8
  else
    set dr=dr*16
  endif
  if IsHeroUnitId(GetUnitTypeId(SGE))==false then
    set dr=dr/2
  endif
  set d=R2I(dr)
  if b then
    if d!=LoadInteger(MHT,h,0)then
      call Stats_Fucking_Modify(u,d-LoadInteger(MHT,h,0),"+DMG")
    endif
  else
    call Stat_Add(u,d,"+DMG")
  endif
  call SaveInteger(MHT,h,0,d)
  call SaveUnitHandle(MHT,h,0,u)
  set t=null
endfunction

function Func4015 takes unit WXE,unit SGE returns nothing
  local integer lvl=GetUnitAbilityLevel(WXE,'A1A3')*(1-GetUnitAbilityLevel(WXE,'A36D'))
  if lvl==0 then
    return
  endif
  if IsUnitEnemy(WXE,GetOwningPlayer(SGE))then
    call Func4014(WXE,SGE,lvl)
  endif
endfunction

function Func4016 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local real result=(LoadReal(HY,(GetHandleId(RCX)),684))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or result<(TimerGetElapsed(GlobalTimer))or IsMagicImmune(RCX)then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call SaveReal(HY,(GetHandleId(RCX)),684,(0*1.0))
    call UnitRemoveAbility(RCX,'A23S')
    call UnitRemoveAbility(RCX,'A23P')
    call UnitRemoveAbility(RCX,'A23Q')
    call UnitRemoveAbility(RCX,'A23R')
    call UnitRemoveAbility(RCX,'B0EA')
  else
    call DamageTarget(source,RCX,1,5+5*QIE)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4017 takes unit source,unit RCX returns nothing
  local trigger RBX
  local integer ZAE
  local real result=(LoadReal(HY,(GetHandleId(RCX)),684))
  local integer QIE=GetUnitAbilityLevel(source,'A0MM')
  if result>(TimerGetElapsed(GlobalTimer))then
    call SaveReal(HY,(GetHandleId(RCX)),684,(((TimerGetElapsed(GlobalTimer))+real106)*1.0))
  else
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveReal(HY,(GetHandleId(RCX)),684,(((TimerGetElapsed(GlobalTimer))+real106)*1.0))
    call TriggerRegisterTimerEvent(RBX,1,true)
    call TriggerRegisterDeathEvent(RBX,RCX)
    call TriggerAddCondition(RBX,Condition(function Func4016))
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveUnitHandle(HY,(ZAE),17,(RCX))
    call SaveInteger(HY,(ZAE),5,(QIE))
    if QIE==1 then
      call UnitAddAbility2(RCX,'A23S')
    elseif QIE==2 then
      call UnitAddAbility2(RCX,'A23P')
    elseif QIE==3 then
      call UnitAddAbility2(RCX,'A23Q')
    elseif QIE==4 then
      call UnitAddAbility2(RCX,'A23R')
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func4018 takes nothing returns boolean
  local unit source=GetTriggerUnit()
  local unit RCX=GetEventDamageSource()
  if IsUnitDummyOfPlayer(RCX)then
    set RCX=(udg_Hero[GetPlayerId(GetOwningPlayer(RCX))])
  endif
  if IsUnitType(RCX,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(source,GetOwningPlayer(RCX))and DistanceBetweenUnits(source,RCX)<1425 and GetEventDamage()>0 and IsMagicImmune(RCX)==false and IsUnitInvulnerable(RCX)==false and GetUnitAbilityLevel(source,'A36D')==0 and(IsFakeDamage>0 or LoadInteger(HY,GetHandleId(RCX),'B39C')!=1)then
    call Func4017(source,RCX)
  endif
  set source=null
  set RCX=null
  return false
endfunction

function Func4019 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  call TriggerRegisterUnitEvent(RBX,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(RBX,Condition(function Func4018))
  call SaveUnitHandle(HY,(GetHandleId(RBX)),14,(GetTriggerUnit()))
  set RBX=null
endfunction

function Func4020 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit HDE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  if IsDead(SGE)or GetUnitAbilityLevel(SGE,'B06D')==0 then
    call RemoveSavedHandle(HY,LoadInteger(HY,h,-1),'A09V')
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    call DamageTarget(HDE,SGE,1,4+6*LoadInteger(HY,h,0))
  endif
  set HDE=null
  set SGE=null
  set t=null
endfunction

function Func4021 takes unit WXE,unit SGE returns nothing
  local timer t
  local integer h
  local integer hu=GetHandleId(SGE)
  if HaveSavedHandle(HY,hu,'A09V')then
    set t=LoadTimerHandle(HY,hu,'A09V')
    set h=GetHandleId(t)
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveTimerHandle(HY,hu,'A09V',t)
    call TimerStart(t,1,true,function Func4020)
    call SaveUnitHandle(HY,h,0,WXE)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveInteger(HY,h,-1,hu)
  endif
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(WXE,'A09V'))
  call Func2340(WXE,SGE,GetEventDamage())
  set t=null
endfunction

function Func4022 takes nothing returns nothing
  local unit source=GetSpellTargetUnit()
  call UnitRemoveAbility(source,'BEsh')
  call UnitRemoveAbility(source,'B0AQ')
  set source=null
endfunction

function Func4023 takes nothing returns nothing
  call AddWrapper("Func4650",4)
  call AddWrapper("Func4637",-2)
  call AddToPurgeList('A23S','PRGE')
  call AddToPurgeList('A23P','PRGE')
  call AddToPurgeList('A23Q','PRGE')
  call AddToPurgeList('A23R','PRGE')
  call AddToPurgeList('B0EA','PRGE')
  call AddToPurgeList('B06D','PRGE')
  call AddToPurgeList('B06D','PRGE')
endfunction

function Func4024 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  call UnitAddAbilityTimedExF(SKE,'A3JN',1,2+QIE,'Bcrs')
  set SKE=null
  set SGE=null
endfunction

function Func4025 takes unit source,integer ZAE,integer QIE returns nothing
  call UnitRemoveAbility(source,'A1KR')
  call UnitRemoveAbility(source,'A1KS')
  call UnitRemoveAbility(source,'A1KQ')
  call UnitRemoveAbility(source,'A1KP')
  call UnitRemoveAbility(source,'A1K1')
  call UnitRemoveAbility(source,'A1KW')
  call UnitRemoveAbility(source,'A1KX')
  call UnitRemoveAbility(source,'A1KY')
  call UnitRemoveAbility(source,'A1L4')
  call UnitRemoveAbility(source,'A1L3')
  call UnitRemoveAbility(source,'A1L2')
  call UnitRemoveAbility(source,'A1L1')
  call UnitRemoveAbility(source,'A1L8')
  call UnitRemoveAbility(source,'A1L7')
  call UnitRemoveAbility(source,'A1L9')
  call UnitRemoveAbility(source,'A1LB')
  if ZAE==1 then
    if QIE==1 then
      call UnitAddAbility2(source,'A1KR')
    elseif QIE==2 then
      call UnitAddAbility2(source,'A1KS')
    elseif QIE==3 then
      call UnitAddAbility2(source,'A1KQ')
    elseif QIE==4 then
      call UnitAddAbility2(source,'A1KP')
    endif
  elseif ZAE==2 then
    if QIE==1 then
      call UnitAddAbility2(source,'A1K1')
    elseif QIE==2 then
      call UnitAddAbility2(source,'A1KW')
    elseif QIE==3 then
      call UnitAddAbility2(source,'A1KX')
    elseif QIE==4 then
      call UnitAddAbility2(source,'A1KY')
    endif
  elseif ZAE==3 then
    if QIE==1 then
      call UnitAddAbility2(source,'A1L4')
    elseif QIE==2 then
      call UnitAddAbility2(source,'A1L3')
    elseif QIE==3 then
      call UnitAddAbility2(source,'A1L2')
    elseif QIE==4 then
      call UnitAddAbility2(source,'A1L1')
    endif
  elseif ZAE==4 then
    if QIE==1 then
      call UnitAddAbility2(source,'A1L8')
    elseif QIE==2 then
      call UnitAddAbility2(source,'A1L7')
    elseif QIE==3 then
      call UnitAddAbility2(source,'A1L9')
    elseif QIE==4 then
      call UnitAddAbility2(source,'A1LB')
    endif
  endif
endfunction

function Func4026 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),426))
  local unit source=(LoadUnitHandle(HY,(QIE),2))
  local integer ZBE=(LoadInteger(HY,(QIE),425))
  local integer ZCE=GetUnitAbilityLevel(source,'A0VX')
  set ZBE=Func0464(ZBE+1,4)
  call SaveInteger(HY,(QIE),425,(ZBE))
  call Func4025(source,ZCE,ZBE)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func4027 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),425))
  local integer ZBE=GetUnitAbilityLevel(GetTriggerUnit(),'A0VX')
  if GetEventDamage()>15. and GetEventDamageSource()!=GetTriggerUnit()and IsPlayerBelongToTeams(GetOwningPlayer(GetEventDamageSource()))then
    set QIE=IMaxIF(QIE-1,0)
    if GetUnitAbilityLevel(source,'A36D')==1 then
      set QIE=0
    endif
    call SaveInteger(HY,(ZAE),425,(QIE))
    call Func4025(source,ZBE,QIE)
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call TriggerRegisterTimerEvent(RBX,3,false)
    call TriggerAddCondition(RBX,Condition(function Func4026))
    call SaveInteger(HY,(ZAE),426,(GetHandleId(GetTriggeringTrigger())))
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4028 takes nothing returns nothing
  local trigger RBX
  local integer ZAE
  local unit source=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A0VX')
  if QIE==1 then
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
    call TriggerAddCondition(RBX,Condition(function Func4027))
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveInteger(HY,(ZAE),425,4)
  endif
  call Func4025(source,QIE,4)
  set RBX=null
  set source=null
endfunction

function Func4029 takes player p returns nothing
  call SetPlayerAbilityAvailable(p,'A1KR',false)
  call SetPlayerAbilityAvailable(p,'A1KS',false)
  call SetPlayerAbilityAvailable(p,'A1KQ',false)
  call SetPlayerAbilityAvailable(p,'A1KP',false)
  call SetPlayerAbilityAvailable(p,'A1KU',false)
  call SetPlayerAbilityAvailable(p,'A1KV',false)
  call SetPlayerAbilityAvailable(p,'A1K1',false)
  call SetPlayerAbilityAvailable(p,'A1KW',false)
  call SetPlayerAbilityAvailable(p,'A1KX',false)
  call SetPlayerAbilityAvailable(p,'A1KY',false)
  call SetPlayerAbilityAvailable(p,'A1KZ',false)
  call SetPlayerAbilityAvailable(p,'A1KT',false)
  call SetPlayerAbilityAvailable(p,'A1L4',false)
  call SetPlayerAbilityAvailable(p,'A1L3',false)
  call SetPlayerAbilityAvailable(p,'A1L2',false)
  call SetPlayerAbilityAvailable(p,'A1L1',false)
  call SetPlayerAbilityAvailable(p,'A1L0',false)
  call SetPlayerAbilityAvailable(p,'A1L5',false)
  call SetPlayerAbilityAvailable(p,'A1L8',false)
  call SetPlayerAbilityAvailable(p,'A1L7',false)
  call SetPlayerAbilityAvailable(p,'A1L9',false)
  call SetPlayerAbilityAvailable(p,'A1LB',false)
  call SetPlayerAbilityAvailable(p,'A1LA',false)
  call SetPlayerAbilityAvailable(p,'A1L6',false)
  call SetPlayerAbilityAvailable(p,'A1LH',false)
endfunction

function Func4030 takes nothing returns nothing
  local integer i=0
  call AddWrapper("Func4649",0)
  loop
    call Func4029(Sentinels[i])
    call Func4029(Scourges[i])
    set i=i+1
    exitwhen i>5
  endloop
  call AddToPurgeList('Bcrs','PRGA')
  call AddToPurgeList('A3JN','PRGA')
  call AddToPurgeList('Bcri','PRGE')
  call Func1774("Func4049")
endfunction

function Func4031 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SetWidgetLife(LoadUnitHandle(HY,h,0),0)
  else
    call SetUnitTimeScale(LoadUnitHandle(HY,h,1),1.)
  endif
  call FlushChildHashtable(HY,h)
  call DestroyTrigger(t)
  set t=null
endfunction

function Func4032 takes nothing returns nothing
  local integer QIE
  local unit VBN=GetTriggerUnit()
  local unit d
  local integer id=GetUnitTypeId(VBN)
  local trigger t
  local integer h
  if id=='u017' or id=='u019' or id=='u018' or id=='u01A' or id=='u01B' or id=='u01C' or id=='u01U' or id=='u01V' or id=='u01W' then
    return
  endif
  set d=CreateUnit(GetOwningPlayer(VBN),'e00E',GetUnitX(VBN),GetUnitY(VBN),0)
  if id=='u014' or id=='u01D' or id=='u01R' then
    set QIE=1
  elseif id=='u015' or id=='u01E' or id=='u01S' then
    set QIE=2
  else
    set QIE=3
  endif
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterDeathEvent(t,VBN)
  call TriggerRegisterTimerEvent(t,1.2,false)
  call SaveUnitHandle(HY,h,0,d)
  call SetUnitTimeScale(VBN,1.6)
  call SaveUnitHandle(HY,h,1,VBN)
  call TriggerAddCondition(t,Condition(function Func4031))
  set t=null
  call UnitAddAbility2(d,'A1NF')
  call SetUnitAbilityLevel(d,'A1NF',QIE)
  call IssueImmediateOrderByIdExFunc(d,852127)
  set VBN=null
  set d=null
endfunction

function Func4033 takes unit source,integer ZAE,integer QIE returns nothing
  local integer ZBE
  if QIE==1 then
    set ZBE=8
  elseif QIE==2 then
    set ZBE=14
  elseif QIE==3 then
    set ZBE=22
  endif
  call AddBonusDamage(source,ZAE*ZBE)
endfunction

function Func4034 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=source
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),28))
  local integer ZCE=(LoadInteger(HY,(ZAE),194))
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    if GetAttacker()==source then
      set ZCE=IMaxBJ(ZCE-1,0)
      call SaveInteger(HY,(ZAE),194,(ZCE))
      call Func4033(source,ZCE,QIE)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call Func0673(source,GetEventDamage())
  else
    set ZBE=ZBE+1
    call SaveInteger(HY,(ZAE),28,(ZBE))
    if ModuloInteger(ZBE,15)==0 then
      set ZCE=IMinBJ(ZCE+1,7)
      call SaveInteger(HY,(ZAE),194,(ZCE))
    endif
    if GetUnitTypeId(RCX)=='u017' or GetUnitTypeId(RCX)=='u019' or GetUnitTypeId(RCX)=='u018' or GetUnitTypeId(RCX)=='u01A' or GetUnitTypeId(RCX)=='u01B' or GetUnitTypeId(RCX)=='u01C' or GetUnitTypeId(RCX)=='u01U' or GetUnitTypeId(RCX)=='u01V' or GetUnitTypeId(RCX)=='u01W' then
      set ZCE=7
      call SaveInteger(HY,(ZAE),194,(ZCE))
    endif
    call Func4033(source,ZCE,QIE)
    if GetUnitTypeId(source)=='u017' or GetUnitTypeId(source)=='u019' or GetUnitTypeId(source)=='u018' or GetUnitTypeId(source)=='u01A' or GetUnitTypeId(source)=='u01B' or GetUnitTypeId(source)=='u01C' or GetUnitTypeId(source)=='u01U' or GetUnitTypeId(source)=='u01V' or GetUnitTypeId(source)=='u01W' then
      call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_LIFE)+3750)
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4035 takes nothing returns boolean
  if Func0594(GetFilterUnit())then
    call KillUnit(GetFilterUnit())
  endif
  return false
endfunction

function Func4036 takes unit u,integer QIE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SelectUnitAddForPlayer(u,GetOwningPlayer(u))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",u,"origin"))
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func4034))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveInteger(HY,h,5,(QIE))
  call SaveInteger(HY,h,28,0)
  call SaveInteger(HY,h,194,7)
  call Func4033(u,7,QIE)
  set t=null
endfunction

function Func4037 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local integer QIE=GetUnitAbilityLevel(SKE,'A1NE')
  local unit VHN
  local unit VJN
  local unit VKN
  local boolean CTI=false
  local real a=GetUnitFacing(SKE)
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(SKE),Condition(function Func4035))
  call KillGroup(g)
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A2IG')
    set CTI=true
  endif
  set VHN=CreateUnit(GetOwningPlayer(SKE),'u014'-1+QIE,x+75*Cos((a+45)*bj_DEGTORAD),y+75*Sin((a+45)*bj_DEGTORAD),a)
  set VJN=CreateUnit(GetOwningPlayer(SKE),'u01D'-1+QIE,x+75*Cos((a-45)*bj_DEGTORAD),y+75*Sin((a-45)*bj_DEGTORAD),a)
  call Func4036(VHN,QIE)
  call Func4036(VJN,QIE)
  if CTI then
    set VKN=CreateUnit(GetOwningPlayer(SKE),'u01R'-1+QIE,x+75*Cos(a*bj_DEGTORAD),y+75*Sin(a*bj_DEGTORAD),a)
    call Func4036(VKN,QIE)
  endif
  set g=null
  set SKE=null
  set VHN=null
  set VJN=null
  set VKN=null
endfunction

function Func4038 takes unit source,integer ZAE,integer QIE returns nothing
  local string ZJE="|c0000cc00"
  local string I3X="||"
  local string VDO=" "
  local string ZCR=ZJE+"|||r"
  local string ZDR
  local boolean ZSE=false
  local texttag VQO=(LoadTextTagHandle(HY,(GetHandleId(source)),451))
  if ZAE==0 then
    set ZDR=" "
  elseif QIE==1 then
    if ZAE==0 then
      set ZDR=I3X+VDO+I3X+VDO+I3X
    elseif ZAE==1 then
      set ZDR=ZCR+VDO+I3X+VDO+I3X
    elseif ZAE==2 then
      set ZDR=ZCR+VDO+ZCR+VDO+I3X
    elseif ZAE==3 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR
    endif
  elseif QIE==2 then
    if ZAE==0 then
      set ZDR=I3X+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==1 then
      set ZDR=ZCR+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==2 then
      set ZDR=ZCR+VDO+ZCR+VDO+I3X+VDO+I3X
    elseif ZAE==3 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+I3X
    elseif ZAE==4 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR
    endif
  elseif QIE==3 then
    if ZAE==0 then
      set ZDR=I3X+VDO+I3X+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==1 then
      set ZDR=ZCR+VDO+I3X+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==2 then
      set ZDR=ZCR+VDO+ZCR+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==3 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+I3X+VDO+I3X
    elseif ZAE==4 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR+VDO+I3X
    elseif ZAE==5 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR
    endif
  elseif QIE==4 then
    if ZAE==0 then
      set ZDR=I3X+VDO+I3X+VDO+I3X+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==1 then
      set ZDR=ZCR+VDO+I3X+VDO+I3X+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==2 then
      set ZDR=ZCR+VDO+ZCR+VDO+I3X+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==3 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+I3X+VDO+I3X+VDO+I3X
    elseif ZAE==4 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR+VDO+I3X+VDO+I3X
    elseif ZAE==5 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR+VDO+I3X
    elseif ZAE==6 then
      set ZDR=ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR+VDO+ZCR
    endif
  endif
  call SetTextTagText(VQO,ZDR,0.023)
  if GetOwningPlayer(source)==LocalPlayer then
    set ZSE=true
  endif
  if IsDead(source)then
    set ZSE=false
  endif
  call SetTextTagPosUnit(VQO,source,0)
  call SetTextTagVisibility(VQO,ZSE)
  call SetTextTagPermanent(VQO,true)
endfunction

function Func4039 takes unit source,integer ZAE returns nothing
  local integer QIE=GetUnitAbilityLevel(source,'A1NA')
  call Func4038(source,ZAE,QIE)
  if ZAE==0 or((LoadInteger(HY,(GetHandleId(source)),2484))==1)then
    call UnitRemoveAbility(source,'A1O7')
    call UnitRemoveAbility(source,'A1O8')
    call UnitRemoveAbility(source,'A1O9')
    call UnitAddAbility2(source,'A1O1')
    call UnitRemoveAbility(source,'A1O2')
    call UnitRemoveAbility(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitRemoveAbility(source,'A1O0')
    call UnitRemoveAbility(source,'A1O3')
    call UnitRemoveAbility(source,'A0LR')
    call UnitRemoveAbility(source,'A0YP')
    call UnitRemoveAbility(source,'A0OG')
    call UnitRemoveAbility(source,'A0YO')
    call UnitRemoveAbility(source,'A0NF')
    call UnitRemoveAbility(source,'A0MD')
  elseif ZAE==1 then
    call UnitRemoveAbility(source,'A1O7')
    call UnitRemoveAbility(source,'A1O8')
    call UnitRemoveAbility(source,'A1O9')
    call UnitRemoveAbility(source,'A1O1')
    call UnitAddAbility2(source,'A1O2')
    call UnitRemoveAbility(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitRemoveAbility(source,'A1O0')
    call UnitRemoveAbility(source,'A1O3')
    call UnitAddAbility2(source,'A0LR')
    call UnitRemoveAbility(source,'A0YP')
    call UnitRemoveAbility(source,'A0OG')
    call UnitRemoveAbility(source,'A0YO')
    call UnitRemoveAbility(source,'A0NF')
    call UnitRemoveAbility(source,'A0MD')
  elseif ZAE==2 then
    call UnitRemoveAbility(source,'A1O7')
    call UnitRemoveAbility(source,'A1O8')
    call UnitRemoveAbility(source,'A1O9')
    call UnitRemoveAbility(source,'A1O1')
    call UnitRemoveAbility(source,'A1O2')
    call UnitAddAbility2(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitRemoveAbility(source,'A1O0')
    call UnitRemoveAbility(source,'A1O3')
    call UnitRemoveAbility(source,'A0LR')
    call UnitAddAbility2(source,'A0YP')
    call UnitRemoveAbility(source,'A0OG')
    call UnitRemoveAbility(source,'A0YO')
    call UnitRemoveAbility(source,'A0NF')
    call UnitRemoveAbility(source,'A0MD')
  elseif ZAE==3 then
    call UnitRemoveAbility(source,'A1O7')
    call UnitRemoveAbility(source,'A1O8')
    call UnitRemoveAbility(source,'A1O9')
    call UnitRemoveAbility(source,'A0LR')
    call UnitRemoveAbility(source,'A0YP')
    call UnitAddAbility2(source,'A0OG')
    call UnitRemoveAbility(source,'A0YO')
    call UnitRemoveAbility(source,'A0NF')
    call UnitRemoveAbility(source,'A0MD')
    call UnitRemoveAbility(source,'A1O1')
    call UnitRemoveAbility(source,'A1O2')
    call UnitRemoveAbility(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitRemoveAbility(source,'A1O0')
    call UnitRemoveAbility(source,'A1O3')
    if QIE==1 then
      call UnitAddAbility2(source,'A1O7')
    else
      call UnitAddAbility2(source,'A1N9')
    endif
  elseif ZAE==4 then
    call UnitRemoveAbility(source,'A1O7')
    call UnitRemoveAbility(source,'A1O8')
    call UnitRemoveAbility(source,'A1O9')
    call UnitRemoveAbility(source,'A0LR')
    call UnitRemoveAbility(source,'A0YP')
    call UnitRemoveAbility(source,'A0OG')
    call UnitAddAbility2(source,'A0YO')
    call UnitRemoveAbility(source,'A0NF')
    call UnitRemoveAbility(source,'A0MD')
    call UnitRemoveAbility(source,'A1O1')
    call UnitRemoveAbility(source,'A1O2')
    call UnitRemoveAbility(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitRemoveAbility(source,'A1O0')
    call UnitRemoveAbility(source,'A1O3')
    if QIE==2 then
      call UnitAddAbility2(source,'A1O8')
    else
      call UnitAddAbility2(source,'A1NY')
    endif
  elseif ZAE==5 then
    call UnitRemoveAbility(source,'A1O7')
    call UnitRemoveAbility(source,'A1O8')
    call UnitRemoveAbility(source,'A1O9')
    call UnitRemoveAbility(source,'A1O1')
    call UnitRemoveAbility(source,'A1O2')
    call UnitRemoveAbility(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitAddAbility2(source,'A1O0')
    call UnitRemoveAbility(source,'A1O3')
    call UnitRemoveAbility(source,'A0LR')
    call UnitRemoveAbility(source,'A0YP')
    call UnitRemoveAbility(source,'A0OG')
    call UnitRemoveAbility(source,'A0YO')
    call UnitAddAbility2(source,'A0NF')
    call UnitRemoveAbility(source,'A0MD')
    call UnitRemoveAbility(source,'A1O1')
    call UnitRemoveAbility(source,'A1O2')
    call UnitRemoveAbility(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitRemoveAbility(source,'A1O0')
    call UnitRemoveAbility(source,'A1O3')
    if QIE==3 then
      call UnitAddAbility2(source,'A1O9')
    else
      call UnitAddAbility2(source,'A1O0')
    endif
  elseif ZAE==6 then
    call UnitRemoveAbility(source,'A1O7')
    call UnitRemoveAbility(source,'A1O8')
    call UnitRemoveAbility(source,'A1O9')
    call UnitRemoveAbility(source,'A1O1')
    call UnitRemoveAbility(source,'A1O2')
    call UnitRemoveAbility(source,'A1NZ')
    call UnitRemoveAbility(source,'A1N9')
    call UnitRemoveAbility(source,'A1NY')
    call UnitRemoveAbility(source,'A1O0')
    call UnitAddAbility2(source,'A1O3')
    call UnitRemoveAbility(source,'A0LR')
    call UnitRemoveAbility(source,'A0YP')
    call UnitRemoveAbility(source,'A0OG')
    call UnitRemoveAbility(source,'A0YO')
    call UnitRemoveAbility(source,'A0NF')
    call UnitAddAbility2(source,'A0MD')
  endif
  if(GetUnitAbilityLevel(source,'A1NA')+2)==ZAE then
    call UnitAddAbility2(source,'A1NJ')
  else
    call UnitRemoveAbility(source,'A1NJ')
  endif
endfunction

function Func4040 takes unit source,real result returns nothing
  local integer ZAE=0
  local real ZEE=110
  if result>ZEE*6 then
    set ZAE=6
  elseif result>ZEE*5 then
    set ZAE=5
  elseif result>ZEE*4 then
    set ZAE=4
  elseif result>ZEE*3 then
    set ZAE=3
  elseif result>ZEE*2 then
    set ZAE=2
  elseif result>ZEE*1 then
    set ZAE=1
  endif
  set ZAE=Func0464(ZAE,2+GetUnitAbilityLevel(source,'A1NA'))
  call SaveInteger(HY,(GetHandleId(source)),450,(ZAE))
  call Func4039(source,ZAE)
endfunction

function Func4041 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=GetUnitAbilityLevel(source,'A1NA')
  call Func4038(source,(LoadInteger(HY,(GetHandleId(source)),450)),QIE)
  call Func4040(source,(LoadReal(HY,(GetHandleId(source)),443)))
  set RBX=null
  set source=null
  return false
endfunction

function Func4042 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  local unit SKE=tt_unit1
  local unit SGE=tt_unit3
  local real dmg=(LoadReal(HY,h,20))
  local integer O6O=LoadInteger(HY,h,0)
  if GetUnitAbilityLevel(SGE,'A3E9')==1 and LoadBoolean(HY,h,5)==false and IsMagicImmune(SKE)==false then
    if IsBlocked(SKE)==false then
      call SaveUnitHandle(TempHash,'A3E9',0,SGE)
      call SaveUnitHandle(TempHash,'A3E9',1,SKE)
      call SaveInteger(TempHash,'A3E9',0,LoadInteger(HY,h,5))
      call ExecuteFunc("Func4045")
    else
      call RemoveLinkenBuff(SKE)
    endif
  endif
  set boolean180=true
  call DamageTarget(SKE,SGE,1,dmg)
  set boolean180=false
  set SKE=null
  set SGE=null
endfunction

function Func4043 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call Func4040(source,(LoadReal(HY,(GetHandleId(source)),443)))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func4044 takes unit SKE,unit SGE,integer O6O,boolean UII returns nothing
  local trigger t=AddProjectile(SKE,SGE,'h0BE',"Func4042",1000,false)
  local integer h=GetHandleId(t)
  call SaveReal(HY,h,20,((20+O6O*65)*1.0))
  call SaveInteger(HY,h,5,O6O)
  call SaveBoolean(HY,h,5,UII)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AntiMagicShell\\AntiMagicShell.mdl",SKE,"chest"))
  call SaveReal(HY,(GetHandleId(SKE)),443,(0*1.0))
  call Func4040(SKE,0)
  call AddTimedKeyToAgent(SKE,2484,4)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerAddCondition(t,Condition(function Func4043))
  call TriggerRegisterTimerEvent(t,4,false)
  call SaveUnitHandle(HY,h,2,(SKE))
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func4045 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  call Func4044(SKE,SGE,QIE,true)
  set SKE=null
  set SGE=null
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func4046 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),20))
  if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A1NA')then
    if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
      call SaveReal(HY,(GetHandleId(source)),443,(((LoadReal(HY,(GetHandleId(source)),443))-result)*1.0))
    endif
    call Func4040(source,(LoadReal(HY,(GetHandleId(source)),443)))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4047 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local integer ZAE=GetHandleId(source)
  local texttag VQO=CreateTextTag()
  local boolean ZSE=false
  local trigger RBX=CreateTrigger()
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerAddCondition(RBX,Condition(function Func4041))
  call SaveUnitHandle(HY,(GetHandleId(RBX)),2,(source))
  if GetOwningPlayer(source)==LocalPlayer then
    set ZSE=true
  endif
  call SetTextTagText(VQO," ",0.023)
  call SetTextTagPosUnit(VQO,source,0)
  call SetTextTagVisibility(VQO,ZSE)
  call SetTextTagPermanent(VQO,true)
  set units025[GetPlayerId(GetOwningPlayer(source))]=source
  call SaveReal(HY,(ZAE),443,(0*1.0))
  call Func4040(source,0)
  call SaveTextTagHandle(HY,(ZAE),451,(VQO))
  set source=null
  set RBX=null
  set VQO=null
endfunction

function Func4048 takes unit source,unit RCX returns nothing
  local real result=GetEventDamage()
  local integer ZAE=GetUnitAbilityLevel(source,'A1NA')
  local real ZEE=(LoadReal(HY,(GetHandleId(source)),443))
  local trigger RBX
  local integer QIE
  if DistanceBetweenUnits(source,RCX)<1400 and boolean180==false then
    if IsDamageReal(result)and GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(IsPlayerBelongToTeams(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())=='n00L')then
      set ZEE=ZEE+result
      call SaveReal(HY,(GetHandleId(source)),443,((ZEE)*1.0))
      set RBX=CreateTrigger()
      set QIE=GetHandleId(RBX)
      call SaveUnitHandle(HY,(QIE),2,(source))
      call SaveReal(HY,(QIE),20,((result)*1.0))
      call TriggerRegisterTimerEvent(RBX,6,false)
      call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
      call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
      call TriggerAddCondition(RBX,Condition(function Func4046))
      call Func4040(source,ZEE)
    endif
  endif
  set RBX=null
endfunction

function Func4049 takes nothing returns nothing
  local integer ZAE=0
  loop
    exitwhen ZAE>12
    if units025[ZAE]!=null then
      call Func4048(units025[ZAE],GetTriggerUnit())
    endif
    set ZAE=ZAE+1
  endloop
endfunction

function Func4050 takes nothing returns nothing
  call Func4044(GetTriggerUnit(),GetSpellTargetUnit(),LoadInteger(HY,GetHandleId(GetTriggerUnit()),450),false)
endfunction

function Func4051 takes unit SGE,integer QIE returns nothing
  local unit d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local integer F_I
  local integer OWA
  local integer i
  if QIE>12 then
    set QIE=12
  elseif QIE<1 then
    set QIE=1
  endif
  set F_I='A3HN'+(QIE-1)/4
  set OWA=ModuloInteger(QIE,4)
  if OWA==0 then
    set OWA=4
  endif
  call UnitAddAbility(d,F_I)
  call SetUnitAbilityLevel(d,F_I,OWA)
  call IssueTargetOrder(d,"slow",SGE)
  call UnitRemoveAbility(d,F_I)
  set d=null
endfunction

function Func4052 takes nothing returns nothing
  call Func4051(GetEnumUnit(),integer081)
endfunction

function Func4053 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),tt_player1)and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func4054 takes unit source,unit RCX returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  set tt_player1=GetOwningPlayer(RCX)
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),675,Condition(function Func4053))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call Func1032(RCX,u2)
    call Func4051(u2,integer081)
  endloop
  call ForGroup(g,function Func4052)
  call KillGroup(g)
endfunction

function Func4055 takes nothing returns nothing
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
    call KillUnit(RCX)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetTriggerEvalCount(RBX)>32 then
    call KillUnit(RCX)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call Func0656((LoadUnitHandle(HY,(ZAE),14)))
  else
    call SetUnitAnimation(RCX,"birth")
    set source=(LoadUnitHandle(HY,(ZAE),14))
    set integer081=GetTriggerExecCount(RBX)*GetUnitAbilityLevel(source,('A06P'))/2
    call Func4054(RCX,source)
  endif
  set RBX=null
  set RCX=null
  set source=null
endfunction

function Func4056 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  local unit RCX=CreateUnit(GetOwningPlayer(source),('e01G'),result,ZEE,0)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerRegisterTimerEvent(RBX,0.5,true)
  call TriggerAddAction(RBX,function Func4055)
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call SaveUnitHandle(HY,(ZAE),19,(RCX))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func4057 takes nothing returns nothing
  call UnitAddAbility2(GetEnumUnit(),('A0P2'))
endfunction

function Func4058 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'A0P2')
  call UnitRemoveAbility(GetEnumUnit(),'B048')
endfunction

function Func4059 takes unit source,unit RCX returns nothing
  if source!=null and RCX!=null then
    call CreateLightningOnUnit("CLPB",source,RCX,70,0.7,0.1,0.9,1,0.3,.1)
  endif
endfunction

function Func4060 takes nothing returns nothing
  local unit source=(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),14))
  local real result=0.25*GetEventDamage()
  set result=RMinIF(result,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))
  if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>1 and GetEnumUnit()!=GetTriggerUnit()then
    set NoReflection=NoReflection+1
    call CreateLightningOnUnit("CLPB",GetTriggerUnit(),GetEnumUnit(),70,.7,.1,.4,.7,.1,.1)
    call DamageTarget(source,GetEnumUnit(),3,result)
    set NoReflection=NoReflection-1
  endif
  set source=null
endfunction

function Func4061 takes nothing returns nothing
  if IsDead(GetEnumUnit())==false then
    set tt_int1=tt_int1+1
  endif
endfunction

function Func4062 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local group g=(LoadGroupHandle(HY,h,220))
  if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
    call ForGroup(g,function Func4058)
    call FlushChildHashtable(HY,(h))
    call KillGroup(g)
    call CleanTrigger(t)
  elseif GetEventDamage()>10 and GetEventDamage()<6000 then
    set tt_int1=0
    call ForGroup(g,function Func4061)
    if tt_int1>1 then
      call DisableTrigger(t)
      call ForGroup(g,function Func4060)
      call EnableTrigger(t)
    else
      call TriggerRegisterTimerEvent(t,0,false)
    endif
  endif
  set t=null
endfunction

function Func4063 takes nothing returns boolean
  return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1
endfunction

function Func4064 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local group g=GetAvailableGroup()
  local integer QIE=GetUnitAbilityLevel(SKE,('A0J5'))
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer i=2
  local group gg=GetAvailableGroup()
  local unit array us
  local string ZJE="Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl"
  call SaveUnitHandle(HY,h,14,(SKE))
  call Func4059(SKE,SGE)
  call Func0690(ZJE,SGE,"overhead",25)
  set us[1]=SGE
  call SaveUnitHandle(HY,h,246,(us[1]))
  call TriggerRegisterUnitEvent(t,us[1],EVENT_UNIT_DAMAGED)
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),725,Condition(function Func4063))
  call GroupRemoveUnit(g,SGE)
  call GroupAddUnit(gg,SGE)
  call SaveGroupHandle(HY,h,220,(gg))
  loop
    exitwhen i>(2+QIE)or FirstOfGroup(g)==null
    set us[i]=GetClosestOfGroup(g,GetUnitX(SGE),GetUnitY(SGE))
    call Func4059(us[i-1],us[i])
    call TriggerRegisterUnitEvent(t,us[i],EVENT_UNIT_DAMAGED)
    call GroupAddUnit(gg,us[i])
    call GroupRemoveUnit(g,us[i])
    call Func0690(ZJE,us[i],"overhead",25)
    set i=i+1
  endloop
  call SaveInteger(HY,h,245,(i-1))
  set integer081=GetUnitAbilityLevel(SKE,('A0J5'))
  call ForGroup(gg,function Func4057)
  call TriggerRegisterTimerEvent(t,25,false)
  call TriggerAddAction(t,function Func4062)
  call KillGroup(g)
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func4065 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=GetUnitAbilityLevel(source,'A0AS')
  if GetTriggerEvalCount(RBX)>=12 or GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(RCX,'A17K')==0 then
    if GetTriggerEvalCount(RBX)==12 and GetTriggerEventId()!=EVENT_WIDGET_DEATH and GetUnitAbilityLevel(RCX,'A17K')!=0 then
      call DamageTarget(source,RCX,1,QIE*10+5)
    endif
    call UnitRemoveAbility(RCX,'A17K')
    call UnitRemoveAbility(RCX,'B0AP')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call DamageTarget(source,RCX,1,QIE*10+5)
  endif
  set source=null
  set RCX=null
  set RBX=null
  return false
endfunction

function Func4066 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=GetUnitAbilityLevel(source,'A0AS')
  if GetTriggerEvalCount(RBX)>=12 or GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(RCX,'A0P0')==0 then
    if GetTriggerEvalCount(RBX)==12 and GetTriggerEventId()!=EVENT_WIDGET_DEATH and GetUnitAbilityLevel(RCX,'A0P0')!=0 then
      call Func0686(RCX,QIE*10+5)
    endif
    call UnitRemoveAbility(RCX,'A0P0')
    call UnitRemoveAbility(RCX,'B073')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call Func0686(RCX,QIE*10+5)
  endif
  set source=null
  set RCX=null
  set RBX=null
  return false
endfunction

function Func4067 takes nothing returns nothing
  local unit wl=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t
  local integer h
  if IsUnitAlly(SGE,GetOwningPlayer(wl))then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerRegisterDeathEvent(t,SGE)
    call SaveUnitHandle(HY,h,17,(SGE))
    call SaveUnitHandle(HY,h,2,(wl))
    call TriggerAddCondition(t,Condition(function Func4066))
    call UnitAddAbility2(SGE,'A0P0')
    call FuckingAssistBuffWrap(wl,SGE)
  elseif IsBlocked(GetSpellTargetUnit())==false then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerRegisterDeathEvent(t,SGE)
    call SaveUnitHandle(HY,h,17,(SGE))
    call SaveUnitHandle(HY,h,2,(wl))
    call TriggerAddCondition(t,Condition(function Func4065))
    call UnitAddAbility2(SGE,'A17K')
  else
    call RemoveLinkenBuff(SGE)
  endif
  set wl=null
  set SGE=null
  set t=null
endfunction

function ShadowWordTargeting takes nothing returns nothing
  if IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and IsMagicImmune(GetOrderTargetUnit())then
    call Func0658('n0LR')
  endif
endfunction

function Func4069 takes nothing returns nothing
  call DamageTarget(unit243,GetEnumUnit(),1,20+10*integer516)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl",GetEnumUnit(),"head"))
endfunction

function Func4070 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE
  local integer ZBE=GetUnitTypeId(source)
  local group g
  if ZBE=='n00U' or ZBE=='n0KU' then
    set QIE=1
  elseif ZBE=='n00Y' or ZBE=='n0KV' then
    set QIE=2
  elseif ZBE=='n00Z' or ZBE=='n0KW' then
    set QIE=3
  endif
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set tt_unit1=source
    set unit243=source
    set integer516=QIE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),325,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func4069)
    call KillGroup(g)
    set g=null
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4071 takes unit source returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
  call TriggerAddCondition(RBX,Condition(function Func4070))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set RBX=null
endfunction

function Func4072 takes nothing returns boolean
  local integer ZAE=GetUnitTypeId(GetTriggerUnit())
  if ZAE=='n00U' or ZAE=='n0KU' or ZAE=='n00Y' or ZAE=='n0KV' or ZAE=='n00Z' or ZAE=='n0KW' then
    call Func4071(GetTriggerUnit())
  endif
  return false
endfunction

function Func4073 takes unit WXE,unit SGE returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local real a=AngleBetweenUnits(WXE,SGE)*bj_DEGTORAD
  local real dmg
  if GetUnitAbilityLevel(WXE,'A0IM')==1 then
    set dmg=40
  elseif GetUnitAbilityLevel(WXE,'A0IQ')==1 then
    set dmg=50
  else
    set dmg=60
  endif
  call GroupEnumUnitsInRange(g,GetUnitX(SGE)+150*Cos(a),GetUnitY(SGE)+150*Sin(a),325,Condition(function Func0816))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",u,"origin"))
    call DamageTarget(WXE,u,7,dmg)
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
endfunction

function Func4074 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local real ZWE=(LoadReal(HY,(ZAE),191))
  local real ZYE=(LoadReal(HY,(ZAE),192))
  local integer QIE=GetUnitAbilityLevel(source,'S00U')
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e00E',ZWE,ZYE,0)
  call UnitAddAbility2(RCX,'S00U')
  call SetUnitAbilityLevel(RCX,'S00U',QIE)
  call ImminentTriggeredPointOrder(RCX,852224,result,ZEE)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set source=null
  set RCX=null
  set RBX=null
  return false
endfunction

function Func4075 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.3,false)
  call TriggerAddCondition(RBX,Condition(function Func4074))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveReal(HY,(ZAE),6,((GetSpellTargetX())*1.0))
  call SaveReal(HY,(ZAE),7,((GetSpellTargetY())*1.0))
  call SaveReal(HY,(ZAE),191,((GetUnitX(source))*1.0))
  call SaveReal(HY,(ZAE),192,((GetUnitY(source))*1.0))
  set source=null
  set RBX=null
endfunction

function Func4076 takes nothing returns nothing
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
    call Func4075()
  endif
endfunction

function Func4077 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
  call TriggerAddCondition(t,Condition(function Func4072))
  set t=null
  call PreloadAbility('A0P0')
  call PreloadAbility('A17K')
  call PreloadAbility('A0J9')
  call AddToPurgeList('A17K','PRGE')
  call AddToPurgeList('B0AP','PRGE')
  call AddToPurgeList('A0P0','PRGA')
  call AddToPurgeList('B073','PRGA')
  call AddToPurgeList('B071','PRGE')
  call AddWrapper("Func4643",0)
endfunction

function Func4078 takes nothing returns boolean
  local unit t=GetFilterUnit()
  local unit u=LoadUnitHandle(TempHash,'A0CA',0)
  local group g=LoadGroupHandle(HY,GetHandleId(u),StringHash("ShukuGroup"))
  if u!=null and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(u))and(t!=u)and IsUnitInGroup(t,g)==false and IsUnitInvulnerable(t)==false and IsMagicImmune(t)==false and AliveNonBuildOrMarker(GetFilterUnit())then
    call GroupAddUnit(g,t)
    call DamageTarget(u,t,1,LoadInteger(HY,GetHandleId(u),StringHash("ShukuDamage")))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",t,"chest"))
  endif
  set g=null
  set u=null
  set t=null
  return false
endfunction

function Func4079 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer BJO=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,BJO,0)
  local group g
  if GetUnitAbilityLevel(u,'BHfs')==0 then
    call KillGroup(LoadGroupHandle(HY,GetHandleId(u),StringHash("ShukuGroup")))
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,BJO)
    set t=null
    set u=null
    return
  endif
  call SaveUnitHandle(TempHash,'A0CA',0,u)
  set g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetWidgetX(u),GetWidgetY(u),200,Condition(function Func4078))
  call KillGroup(g)
  call RemoveSavedHandle(TempHash,'A0CA',0)
  set g=null
  set t=null
  set u=null
endfunction

function Func4080 takes nothing returns nothing
  local timer t=CreateTimer()
  local unit u=GetTriggerUnit()
  local integer BJO=GetHandleId(t)
  local integer lvl=GetUnitAbilityLevel(u,'A0CA')
  call SaveUnitHandle(HY,BJO,0,u)
  call SaveGroupHandle(HY,GetHandleId(u),StringHash("ShukuGroup"),GetAvailableGroup())
  call SaveInteger(HY,GetHandleId(u),StringHash("ShukuDamage"),lvl*25+50)
  call TimerStart(t,0.05,true,function Func4079)
  set t=null
  set u=null
endfunction

function Func4081 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SetUnitState((LoadUnitHandle(HY,(ZAE),26)),UNIT_STATE_MANA,(LoadReal(HY,(ZAE),242)))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  return false
endfunction

function Func4082 takes unit source,real result returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0,false)
  call TriggerAddCondition(RBX,Condition(function Func4081))
  call SaveUnitHandle(HY,(ZAE),26,(source))
  call SaveReal(HY,(ZAE),242,((result)*1.0))
  set RBX=null
endfunction

function Func4083 takes nothing returns nothing
  local unit SGE=GetTriggerUnit()
  local integer hu
  local real hp
  local real mp
  local real x
  local real y
  if GetSpellAbilityId()=='A3DM' then
    set SGE=GetSpellTargetUnit()
  endif
  set hu=GetHandleId(SGE)
  set hp=Func0468((LoadReal(HY,(hu),7201)),1)
  set mp=Func0468((LoadReal(HY,(hu),7251)),1)
  set x=(LoadReal(HY,(hu),7301))
  set y=(LoadReal(HY,(hu),7351))
  if(LoadReal(HY,(hu),7201))>1 and GetUnitState(SGE,UNIT_STATE_LIFE)>1 then
    call AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(SGE),GetUnitY(SGE))
    call SetUnitState(SGE,UNIT_STATE_LIFE,hp)
    call SetUnitState(SGE,UNIT_STATE_MANA,mp)
    call Func0862(SGE)
    call Func4082(SGE,mp)
    call Func0770(SGE,true,x,y)
  endif
  set SGE=null
endfunction

function Func4084 takes nothing returns nothing
  if IsUnitIllusion(GetSpellTargetUnit())then
    call Func0658('TX0V')
  elseif Func1474(GetSpellTargetUnit())and GetOwningPlayer(GetSpellTargetUnit())!=GetOwningPlayer(GetTriggerUnit())then
    call Func0658('n038')
  endif
endfunction

function Func4085 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local unit u=(LoadUnitHandle(HY,(GetHandleId(t)),221))
  local integer hu=GetHandleId(u)
  local integer i=1
  if hu==0 then
    call FlushChildHashtable(HY,LoadInteger(HY,GetHandleId(t),0))
    call DestroyTrigger(t)
    return
  endif
  loop
    call SaveReal(HY,hu,7300+(i-1),LoadReal(HY,hu,7300+i))
    call SaveReal(HY,hu,7350+(i-1),LoadReal(HY,hu,7350+i))
    call SaveReal(HY,hu,7200+(i-1),LoadReal(HY,hu,7200+i))
    call SaveReal(HY,hu,7250+(i-1),LoadReal(HY,hu,7250+i))
    set i=i+1
    exitwhen i>10
  endloop
  call SaveReal(HY,(hu),7310,GetUnitX(u))
  call SaveReal(HY,(hu),7360,GetUnitY(u))
  call SaveReal(HY,(hu),7210,GetUnitState(u,UNIT_STATE_LIFE))
  call SaveReal(HY,(hu),7260,GetUnitState(u,UNIT_STATE_MANA))
  set u=null
  set t=null
endfunction

function Func4086 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddAction(t,function Func4085)
  call SaveUnitHandle(HY,(GetHandleId(t)),221,(tt_unit1))
  call SaveInteger(HY,GetHandleId(t),0,GetHandleId(tt_unit1))
  set t=null
endfunction

function Func4087 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer c=LoadInteger(HY,ZAE,2)
  if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Stat_Sub(RCX,c,"-DEF")
    call SaveInteger(HY,(GetHandleId(RCX)),4290,2)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    if GetTriggerUnit()==RCX then
      call KillUnit(source)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==source then
      call Stat_Add(RCX,1,"-DEF")
      call SaveInteger(HY,ZAE,2,c+1)
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",RCX,"chest"))
    endif
  else
    call SetUnitX(source,GetUnitX(RCX)-40)
    call SetUnitY(source,GetUnitY(RCX)-40)
    if Func0592(RCX)and IsUnitVisibleEx(RCX,GetOwningPlayer(source))==false then
      call KillUnit(source)
    elseif ModuloInteger(GetTriggerEvalCount(RBX),5)==0 then
      call IssueTargetOrder(source,"attack",RCX)
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4088 takes unit source,unit RCX,integer ZAE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  local integer id=GetUnitTypeId(source)
  local player p=GetOwningPlayer(source)
  local real x=GetUnitX(source)
  local real y=GetUnitY(source)
  local real a=GetUnitFacing(source)
  call KillUnit(source)
  set source=CreateUnit(p,id,x,y,a)
  call UnitRemoveAbility(source,'Avul')
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveUnitHandle(HY,(QIE),17,(RCX))
  call TriggerRegisterTimerEvent(RBX,0.05,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DEATH)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerRegisterUnitEvent(RBX,RCX,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(RBX,Condition(function Func4087))
  call TriggerEvaluate(RBX)
  call UnitApplyTimedLife(source,'BTLF',16)
  set RBX=null
endfunction

function Func4089 takes nothing returns boolean
  return(IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsDead(GetFilterUnit())==false))and((LoadInteger(HY,(GetHandleId((GetFilterUnit()))),4290))!=1)and(IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1))or Func0592(GetFilterUnit())==false)
endfunction

function Func4090 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local group g
  local integer i=1
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local real ZWE=(LoadReal(HY,(ZAE),137))
  local unit RCX
  local unit M_X
  local real ZYE=(LoadReal(HY,(ZAE),47))
  local real ICX=(LoadReal(HY,(ZAE),48))
  set result=SafeX50(result+18*Cos(ZWE))
  set ZEE=SafeY50(ZEE+18*Sin(ZWE))
  call SaveReal(HY,(ZAE),6,((result)*1.0))
  call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
  if GetTriggerEvalCount(RBX)>166 then
    loop
      exitwhen i>12
      if(LoadBoolean(HY,(ZAE),(511+i-1)))==false then
        call KillUnit((LoadUnitHandle(HY,(ZAE),(393+i-1))))
      endif
      set i=i+1
    endloop
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set g=GetAvailableGroup()
    set tt_unit1=source
    call GroupEnumUnitsInRange(g,result,ZEE,400,Condition(function Func4089))
    loop
      exitwhen i>12
      if(LoadBoolean(HY,(ZAE),(511+i-1)))==false then
        set RCX=(LoadUnitHandle(HY,(ZAE),(393+i-1)))
        set result=(LoadReal(HY,(ZAE),(549+i-1)))
        set ZEE=(LoadReal(HY,(ZAE),(567+i-1)))
        set result=SafeX50(result+18*Cos(ZWE))
        set ZEE=SafeY50(ZEE+18*Sin(ZWE))
        call SaveReal(HY,(ZAE),(549+i-1),((result)*1.0))
        call SaveReal(HY,(ZAE),(567+i-1),((ZEE)*1.0))
        call SetUnitX(RCX,result)
        call SetUnitY(RCX,ZEE)
        set M_X=FirstOfGroup(g)
        if M_X!=null then
          call GroupRemoveUnit(g,M_X)
          call SaveInteger(HY,(GetHandleId(M_X)),4290,1)
          call SaveBoolean(HY,(ZAE),(511+i-1),(true))
          call Func4088(RCX,M_X,GetUnitAbilityLevel(source,'A1QW'))
        endif
      endif
      set i=i+1
    endloop
    call KillGroup(g)
    set g=null
    set RCX=null
    set M_X=null
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4091 takes nothing returns nothing
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  local unit source=GetTriggerUnit()
  local real ZWE=GetUnitX(source)
  local real ZYE=GetUnitY(source)
  local real ICX= AngleBetweenXY(ZWE,ZYE,result,ZEE)*bj_DEGTORAD
  local unit RCX
  local real N1X=SafeX50(ZWE+3000*Cos(ICX))
  local real N2X=SafeY50(ZYE+3000*Sin(ICX))
  local integer ZAE=1
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  local real N3X
  local integer ZBE=GetUnitAbilityLevel(source,'A1QW')
  local integer ZCE
  if ZBE==1 then
    set ZCE='u01K'
  elseif ZBE==2 then
    set ZCE='u01H'
  elseif ZBE==3 then
    set ZCE='u01J'
  elseif ZBE==4 then
    set ZCE='u01L'
  endif
  loop
    exitwhen ZAE>12
    set RCX=CreateUnit(GetOwningPlayer(source),ZCE,ZWE+GetRandomInt(-300,300),ZYE+GetRandomInt(-300,300),ICX*bj_RADTODEG)
    call SaveUnitHandle(HY,(QIE),(393+ZAE-1),(RCX))
    call SaveBoolean(HY,(QIE),(511+ZAE-1),(false))
    call SaveReal(HY,(QIE),(549+ZAE-1),((GetUnitX(RCX))*1.0))
    call SaveReal(HY,(QIE),(567+ZAE-1),((GetUnitY(RCX))*1.0))
    call UnitAddAbility(RCX,'Abun')
    call UnitAddAbility(RCX,'Aloc')
    set ZAE=ZAE+1
  endloop
  call TriggerRegisterTimerEvent(RBX,0.03,true)
  call TriggerAddCondition(RBX,Condition(function Func4090))
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveReal(HY,(QIE),6,((ZWE)*1.0))
  call SaveReal(HY,(QIE),7,((ZYE)*1.0))
  call SaveReal(HY,(QIE),137,((ICX)*1.0))
  call SaveReal(HY,(QIE),47,((N1X)*1.0))
  call SaveReal(HY,(QIE),48,((N2X)*1.0))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func4092 takes nothing returns nothing
  call PreloadUnit('u01K')
  call PreloadUnit('u01H')
  call PreloadUnit('u01J')
  call PreloadUnit('u01L')
  call HideAbility('A3KH')
  call AddWrapper("Func3353",1)
endfunction

function Func4093 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and(Func0592(GetFilterUnit())==false or IsUnitVisibleEx(GetFilterUnit(),GetOwningPlayer(tt_unit1)))and IsUnitInvulnerable(GetFilterUnit())==false and IsMagicImmune(GetFilterUnit())==false
endfunction

function Func4094 takes unit LBO,unit EWN returns unit
  local group g=GetAvailableGroup()
  set tt_unit1=LBO
  call GroupEnumUnitsInRange(g,GetUnitX(EWN),GetUnitY(EWN),600,Condition(function Func4093))
  call GroupRemoveUnit(g,EWN)
  set tt_unit1=GroupPickRandomUnit(g)
  call KillGroup(g)
  set g=null
  return tt_unit1
endfunction

function Func4095 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit D2O=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local unit HDE=LoadUnitHandle(HY,h,2)
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==D2O then
      if LoadUnitHandle(HY,h,-1)==LoadUnitHandle(HY,h,2)then
        if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsMagicImmune(HDE)==false and LoadBoolean(HY,h,0)==false then
          if IsBlocked(HDE)==false then
            call SaveUnitHandle(TempHash,'A3E9',0,SGE)
            call SaveUnitHandle(TempHash,'A3E9',1,HDE)
            call SaveInteger(TempHash,'A3E9',0,LoadInteger(HY,h,0))
            call ExecuteFunc("Func4100")
          else
            call RemoveLinkenBuff(HDE)
          endif
        endif
      endif
      if IsUnitType(SGE,UNIT_TYPE_HERO)then
        call DamageTarget(HDE,SGE,1,50)
      else
        call DamageTarget(HDE,SGE,1,50+25*LoadInteger(HY,h,0))
      endif
      if LoadInteger(HY,h,1)>0 then
        call SaveUnitHandle(TempHash,'cask',0,SGE)
        call RemoveSavedHandle(TempHash,'cask',1)
        call SaveUnitHandle(TempHash,'cask',2,HDE)
        call SaveInteger(TempHash,'cask',0,LoadInteger(HY,h,0))
        call SaveInteger(TempHash,'cask',1,LoadInteger(HY,h,1))
        call ExecuteFunc("Func4098")
      else
        call FlushChildHashtable(TempHash,'cask')
      endif
      call CleanTrigger(t)
      call FlushChildHashtable(HY,h)
    endif
  else
    call CleanTrigger(t)
    call FlushChildHashtable(HY,h)
  endif
  set HDE=null
  set D2O=null
  set SGE=null
  set t=null
endfunction

function Func4096 takes unit LBO,unit E1N,unit E2N,integer QIE,integer c,boolean GRI returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit LDO=CreateUnit(GetOwningPlayer(LBO),'e00E',GetUnitX(E1N),GetUnitY(E1N),0)
  call TriggerRegisterUnitEvent(t,E2N,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(t,15,false)
  call SaveUnitHandle(HY,h,0,LDO)
  call SaveUnitHandle(HY,h,-1,E1N)
  call SaveUnitHandle(HY,h,1,E2N)
  call SaveUnitHandle(HY,h,2,LBO)
  call SaveInteger(HY,h,0,QIE)
  call SaveBoolean(HY,h,0,GRI)
  call SaveInteger(HY,h,1,c-1)
  call TriggerAddCondition(t,Condition(function Func4095))
  set t=null
  if IsUnitType(E2N,UNIT_TYPE_HERO)then
    call UnitAddAbility(LDO,'A0WY')
  else
    call UnitAddAbility(LDO,'A0NL')
  endif
  call Func1430(LDO,E2N,852095)
  set LDO=null
endfunction

function Func4097 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call SaveUnitHandle(HY,'cask',0,LoadUnitHandle(HY,h,0))
  call SaveUnitHandle(TempHash,'cask',1,LoadUnitHandle(HY,h,1))
  call SaveUnitHandle(TempHash,'cask',2,LoadUnitHandle(HY,h,2))
  call SaveInteger(TempHash,'cask',0,LoadInteger(HY,h,0))
  call SaveInteger(TempHash,'cask',1,LoadInteger(HY,h,1))
  call RemoveSavedBoolean(TempHash,'cask',0)
  call RemoveSavedBoolean(TempHash,'cask',1)
  call SaveBoolean(TempHash,'cask',2,true)
  call DelayedCallBackClean()
  call ExecuteFunc("Func4098")
endfunction

function Func4098 takes nothing returns nothing
  local unit E1N=LoadUnitHandle(TempHash,'cask',0)
  local unit E2N=LoadUnitHandle(TempHash,'cask',1)
  local unit LBO=LoadUnitHandle(TempHash,'cask',2)
  local integer QIE=LoadInteger(TempHash,'cask',0)
  local integer c=LoadInteger(TempHash,'cask',1)
  local integer h
  if LoadBoolean(TempHash,'cask',1)==false and LoadBoolean(TempHash,'cask',2)==false then
    set h=DelayedCallBack(0.3,function Func4097)
    call SaveUnitHandle(HY,h,0,E1N)
    call SaveUnitHandle(HY,h,1,E2N)
    call SaveUnitHandle(HY,h,2,LBO)
    call SaveInteger(HY,h,0,QIE)
    call SaveInteger(HY,h,1,c)
  else
    if E2N==null then
      set E2N=Func4094(LBO,E1N)
    endif
    if E2N!=null then
      call Func4096(LBO,E1N,E2N,QIE,c,LoadBoolean(TempHash,'cask',0))
    endif
  endif
  call RemoveSavedBoolean(TempHash,'cask',1)
  call RemoveSavedBoolean(TempHash,'cask',2)
  set E1N=null
  set LBO=null
  set E2N=null
endfunction

function Func4099 takes unit Hero,unit SGE,integer YGX,boolean GRI,boolean E5N returns nothing
  call SaveUnitHandle(TempHash,'cask',0,Hero)
  call SaveUnitHandle(TempHash,'cask',1,SGE)
  call SaveUnitHandle(TempHash,'cask',2,Hero)
  call SaveInteger(TempHash,'cask',0,YGX)
  call SaveInteger(TempHash,'cask',1,YGX*2+1)
  call SaveBoolean(TempHash,'cask',0,GRI)
  call SaveBoolean(TempHash,'cask',1,E5N)
  call Func4098()
endfunction

function Func4100 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  call Func4099(SKE,SGE,QIE,true,true)
  call FlushChildHashtable(TempHash,'A3E9')
  set SKE=null
  set SGE=null
endfunction

function Func4101 takes nothing returns nothing
  call Func4099(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A0NM'),false,true)
endfunction

function Func4102 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local integer QIE=GetUnitAbilityLevel(source,'A0NE')
  call UnitRemoveAbility(source,'A0NE')
  call UnitAddAbility3(source,'A0NE',QIE)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func4103 takes unit source,integer ZAE returns nothing
  local real result=(8+ZAE*8)/3
  call SetWidgetLife(source,GetWidgetLife(source)+result)
endfunction

function Func4104 takes nothing returns boolean
  if(IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit()))then
    call Func4103(GetFilterUnit(),integer089)
    call FuckingAssistBuffWrap(tt_unit1,GetFilterUnit())
  endif
  return false
endfunction

function Func4105 takes unit source returns nothing
  local integer ZAE=GetUnitAbilityLevel(source,'A0NE')
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set integer089=ZAE
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),525,Condition(function Func4104))
  call KillGroup(g)
  set g=null
endfunction

function Func4106 takes unit source returns nothing
  local integer ZAE=GetUnitAbilityLevel(source,'A0NE')
  local real result=4+4*ZAE
  call SetUnitState(source,UNIT_STATE_MANA,GetUnitState(source,UNIT_STATE_MANA)-(result/3))
  call ManaFlareCheck(source,result/3)
  if GetUnitState(source,UNIT_STATE_MANA)<result then
    if(LoadInteger(HY,GetHandleId(source),4265)!=1)then
      call IssueImmediateOrderByIdExFunc(source,852178)
    endif
  endif
endfunction

function Func4107 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
    if GetIssuedOrderId()==852178 then
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
      set RBX=CreateTrigger()
      set ZAE=GetHandleId(RBX)
      call SaveUnitHandle(HY,(ZAE),14,(source))
      call TriggerRegisterTimerEvent(RBX,0,false)
      call TriggerAddCondition(RBX,Condition(function Func4102))
    endif
  else
    call Func4105(source)
    call Func4106(source)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4108 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveUnitHandle(HY,(ZAE),14,(source))
  call TriggerRegisterTimerEvent(RBX,0.33,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_ISSUED_ORDER)
  call TriggerAddCondition(RBX,Condition(function Func4107))
  set source=null
  set RBX=null
endfunction

function Func4109 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=GetUnitAbilityLevel(SKE,'A0NO')
  local integer c=GetTriggerEvalCount(t)
  local real XON=(LoadReal(HY,h,392))
  local real d=0
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call UnitRemoveAbility(SGE,'A3L3')
    call UnitRemoveAbility(SGE,'B3L3')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if c==4 or c==8 or c==12 then
      call DestroyEffect(LoadEffectHandle(HY,h,32))
      if c==12 then
        call UnitRemoveAbility(SGE,'A3L3')
        call UnitRemoveAbility(SGE,'B3L3')
        call FlushChildHashtable(HY,(h))
        call CleanTrigger(t)
      elseif c==4 or c==8 then
        call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("effects\\NetherInferno.mdx",SGE,"origin")))
      endif
      set d=(0.08+QIE*0.08)*Func0468(XON-GetUnitState(SGE,UNIT_STATE_LIFE),0)
      if d>0 then
        call TextTagOnUnit("+"+I2S(R2I(d)),2,SGE,0.023,68,0,187,216,Func0590(SGE)or PlayerObserver)
      endif
    endif
    call DamageTarget(SKE,SGE,1,5*QIE+d)
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4110 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetEnumUnit()
  call DestroyEffect(AddSpecialEffectTarget("effects\\NetherInferno.mdx",SGE,"origin"))
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func4109))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveReal(HY,h,392,((GetUnitState(SGE,UNIT_STATE_LIFE))*1.0))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("effects\\NetherInferno.mdx",SGE,"origin")))
  call UnitAddAbility2(SGE,'A3L3')
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func4111 takes nothing returns boolean
  return IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func4112 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  local group g=GetAvailableGroup()
  local integer ZAE=GetUnitAbilityLevel(source,'A0NO')
  call GroupEnumUnitsInRange(g,result,ZEE,205,Condition(function Func4111))
  call ForGroup(g,function Func4110)
  call KillGroup(g)
  set source=null
endfunction

function Func4113 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
    call Func0656(source)
  endif
  set source=null
  set RBX=null
  return false
endfunction

function Func4114 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerRegisterTimerEvent(RBX,10,false)
  call TriggerAddCondition(RBX,Condition(function Func4113))
  set RBX=null
  set source=null
endfunction

function Func4115 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SaveUnitHandle(HY,GetHandleId(t),0,GetTriggerUnit())
    call TriggerRegisterTimerEvent(t,5,false)
  else
    call ShowUnit(LoadUnitHandle(HY,GetHandleId(t),0),false)
    call FlushChildHashtable(HY,GetHandleId(t))
    call CleanTrigger(t)
  endif
  set t=null
endfunction

function Func4116 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterDeathEvent(t,GetSummonedUnit())
  call TriggerAddCondition(t,Condition(function Func4115))
  set t=null
endfunction

function Func4117 takes nothing returns nothing
endfunction

function Func4118 takes nothing returns boolean
  local integer ZAE=0
  local unit source
  local real result=(TimerGetElapsed(GlobalTimer))
  local real ZEE
  local real ZWE
  loop
    exitwhen ZAE>12
    set source=udg_Hero[ZAE]
    if source!=null and GetUnitAbilityLevel(source,'A1JA')==0 and reals024[ZAE]>result then
      set reals024[ZAE]=0
    endif
    if source!=null and GetUnitAbilityLevel(source,'A1JA')>0 then
      if reals024[ZAE]>result and IsDead(source)==false then
        set ZWE=GetUnitState(source,UNIT_STATE_LIFE)
        set ZEE=GetUnitState(source,UNIT_STATE_MANA)
        if ZWE<reals025[ZAE]then
          set reals025[ZAE]=ZWE
        else
        endif
        if ZEE<reals026[ZAE]then
          set reals026[ZAE]=ZEE
        else
        endif
        call SetUnitState(source,UNIT_STATE_LIFE,reals025[ZAE])
        set integers153[ZAE]=integers153[ZAE]+1
        if integers153[ZAE]==10 then
          set integers153[ZAE]=0
          if integers154[ZAE]==1 then
            call DamageTarget(units026[ZAE],source,1,12.5)
          elseif integers154[ZAE]==2 then
            call DamageTarget(units026[ZAE],source,1,20)
          elseif integers154[ZAE]==3 then
            call DamageTarget(units026[ZAE],source,1,32)
          endif
        endif
      elseif reals024[ZAE]>result and IsDead(source)then
        set reals024[ZAE]=0
        set reals025[ZAE]=9999
        set reals026[ZAE]=9999
      endif
      if(GetUnitAbilityLevel(source,'A1JA')>0 and reals024[ZAE]<result)then
        call UnitRemoveAbility(source,'A1JA')
        call UnitRemoveAbility(source,'B0CD')
        call UnitRemoveAbility(source,'A1LD')
      endif
    endif
    set ZAE=ZAE+1
  endloop
  set source=null
  return false
endfunction

function Func4119 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local unit RCX
  if GetUnitAbilityLevel(source,'B0CD')==0 then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetOwningPlayer(source)!=GetOwningPlayer(GetEventDamageSource())and GetUnitState(source,UNIT_STATE_MAX_LIFE)*(0.09+0.01*QIE)>GetUnitState(source,UNIT_STATE_LIFE)and((LoadInteger(HY,(GetHandleId(source)),2485))!=1)then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call UnitRemoveAbility(source,'A1JA')
    call UnitRemoveAbility(source,'B0CD')
    call UnitRemoveAbility(source,'A1LD')
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",source,"overhead"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",source,"chest"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",source,"origin"))
    set RCX=CreateUnit(GetOwningPlayer(GetEventDamageSource()),'e00E',0,0,0)
    call UnitRemoveBuffs(source,true,true)
    call UnitRemoveAbility(source,'Aetl')
    call DamageTarget(RCX,source,2,100000000)
    set RCX=null
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4120 takes unit SKE,unit SGE returns nothing
  local integer QIE=GetUnitAbilityLevel(SKE,'A1MI')
  local integer WVE=GetPlayerId(GetOwningPlayer(SGE))
  local trigger t
  local integer h
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A2QE')
  endif
  if QIE>0 and IsUnitType(SGE,UNIT_TYPE_HERO)and GetCloneHeroId(SGE)==false then
    if GetUnitAbilityLevel(SKE,'A2QE')>0 then
      set reals024[WVE]=(TimerGetElapsed(GlobalTimer))+17.
    else
      set reals024[WVE]=(TimerGetElapsed(GlobalTimer))+7+QIE
    endif
    set reals025[WVE]=GetUnitState(SGE,UNIT_STATE_LIFE)
    set reals026[WVE]=GetUnitState(SGE,UNIT_STATE_MANA)
    set units026[WVE]=SKE
    set integers154[WVE]=QIE
    if GetUnitAbilityLevel(SGE,'A1JA')==0 then
      call UnitAddAbility2(SGE,'A1JA')
      call UnitAddAbility2(SGE,'A1LD')
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
      call TriggerAddCondition(t,Condition(function Func4119))
      call SaveUnitHandle(HY,h,17,(SGE))
      call SaveInteger(HY,h,5,(QIE))
    endif
  endif
  set t=null
endfunction

function Func4121 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer i=0
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func4118))
  loop
    set reals025[i]=9999
    set reals026[i]=9999
    set i=i+1
    exitwhen i>12
  endloop
  call HideAbility('A1LD')
  set t=null
  call AddToPurgeList('A1HN','PRGA')
  call AddToPurgeList('B0CJ','PRGA')
  call AddToPurgeList('B0CC','PRGE')
  call AddToPurgeList('A1J9','PRGE')
  call HideAbility('A1HZ')
  call HideAbility('A1I3')
  call HideAbility('A1I4')
  call HideAbility('A1I6')
endfunction

function Func4122 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(GetHandleId(source)),822))
  if result+0.5<(TimerGetElapsed(GlobalTimer))or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    if GetUnitAbilityLevel(source,'A1HZ')>0 then
      call UnitRemoveAbility(source,'A1HZ')
      call UnitRemoveAbility(source,'B0C5')
    endif
    if GetUnitAbilityLevel(source,'A1I4')>0 then
      call UnitRemoveAbility(source,'A1I4')
      call UnitRemoveAbility(source,'B0C5')
    endif
    if GetUnitAbilityLevel(source,'A1I3')>0 then
      call UnitRemoveAbility(source,'A1I3')
      call UnitRemoveAbility(source,'B0C5')
    endif
    if GetUnitAbilityLevel(source,'A1I6')>0 then
      call UnitRemoveAbility(source,'A1I6')
      call UnitRemoveAbility(source,'B0C5')
    endif
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4123 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.1,true)
  call TriggerRegisterDeathEvent(RBX,GetEnumUnit())
  call TriggerAddCondition(RBX,Condition(function Func4122))
  call SaveUnitHandle(HY,(ZAE),2,(GetEnumUnit()))
  set RBX=null
endfunction

function Func4124 takes nothing returns nothing
  local unit u=GetEnumUnit()
  if IsMagicImmune(u)==false then
    call Func1032(LoadUnitHandle(TempHash,'A1HS',0),u)
    if integer517==1 then
      if GetUnitAbilityLevel(u,'A1HZ')==0 then
        call UnitRemoveAbility(u,'B0C5')
        call UnitAddAbility2(u,'A1HZ')
      endif
    elseif integer517==2 then
      if GetUnitAbilityLevel(u,'A1I4')==0 then
        call UnitRemoveAbility(u,'B0C5')
        call UnitAddAbility2(u,'A1I4')
      endif
    elseif integer517==3 then
      if GetUnitAbilityLevel(u,'A1I3')==0 then
        call UnitRemoveAbility(u,'B0C5')
        call UnitAddAbility2(u,'A1I3')
      endif
    elseif integer517==4 then
      if GetUnitAbilityLevel(u,'A1I6')==0 then
        call UnitRemoveAbility(u,'B0C5')
        call UnitAddAbility2(u,'A1I6')
      endif
    endif
    call SaveReal(HY,(GetHandleId(u)),822,TimerGetElapsed(GlobalTimer))
  endif
  set u=null
endfunction

function Func4125 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func4126 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit d=(LoadUnitHandle(HY,h,19))
  local group g=(LoadGroupHandle(HY,h,340))
  local real x=GetUnitX(d)
  local real y=GetUnitY(d)
  local group gg=GetAvailableGroup()
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call ForGroup(g,function Func4123)
    call KillGroup(gg)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call ShowUnit(d,false)
    set t=null
    set SKE=null
    set d=null
    set g=null
    return false
  endif
  set integer517=GetUnitAbilityLevel(SKE,'A1HS')
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(gg,x,y,300,Condition(function Func4125))
  call GroupRemoveGroup(gg,g)
  call ForGroup(g,function Func4123)
  call SaveUnitHandle(TempHash,'A1HS',0,SKE)
  call ForGroup(gg,function Func4124)
  call RemoveSavedHandle(TempHash,'A1HS',0)
  call SaveGroupHandle(HY,h,340,(gg))
  call KillGroup(g)
  set t=null
  set SKE=null
  set d=null
  set g=null
  return false
endfunction

function Func4127 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local integer QIE=GetUnitAbilityLevel(u,'A1HS')
  local unit XMN=CreateUnit(GetOwningPlayer(u),'n0HQ',x,y,0)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call UnitApplyTimedLife(XMN,'BTLF',16)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterUnitEvent(t,XMN,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func4126))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,19,(XMN))
  call SaveGroupHandle(HY,h,340,(GetAvailableGroup()))
  set u=null
  set t=null
  set XMN=null
endfunction

function Func4128 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,2)
  local unit SGE=LoadUnitHandle(HY,h,17)
  local real x=LoadReal(HY,h,6)
  local real y=LoadReal(HY,h,7)
  local integer QIE=LoadInteger(HY,h,5)
  local unit d
  local real dmg=(100+50*QIE)/4
  local integer c=GetTriggerEvalCount(t)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or DistanceBetweenXY(x,y,GetUnitX(SGE),GetUnitY(SGE))>765 or GetUnitAbilityLevel(SGE,'B0CC')==0 then
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call UnitRemoveAbility(SGE,'A1J9')
    call UnitRemoveAbility(SGE,'B0CC')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  elseif c==1 or c==11 or c==21 or c==31 then
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call DamageTarget(SKE,SGE,1,dmg)
    if c!=34 then
      call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",SGE,"overhead")))
    endif
  elseif c>40 then
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call UnitRemoveAbility(SGE,'A1J9')
    call UnitRemoveAbility(SGE,'B0CC')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
    call UnitAddAbility2(d,'A1MJ')
    call SetUnitAbilityLevel(d,'A1MJ',QIE)
    call IssueTargetOrderByIdFuckingEx(d,852095,SGE,false)
    set d=null
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4129 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A1MG')
  call UnitAddAbility2(SGE,'A1J9')
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveReal(HY,h,6,GetUnitX(SGE))
  call SaveReal(HY,h,7,GetUnitY(SGE))
  call SaveInteger(HY,h,5,QIE)
  call SaveInteger(HY,h,0,0)
  call SaveEffectHandle(HY,h,32,AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",SGE,"overhead"))
  call SaveEffectHandle(HY,h,176,AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl",GetUnitX(SGE),GetUnitY(SGE)))
  call TriggerRegisterTimerEvent(t,0.,false)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func4128))
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func4130 takes nothing returns nothing
  local unit source=unit244
  local unit RCX=GetEnumUnit()
  local integer ZAE=integer518
  call Func4120(source,RCX)
  call DamageTarget(source,RCX,1,150+100*ZAE)
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\PlasmaShot.mdl",RCX,"chest"))
  set source=null
  set RCX=null
endfunction

function Func4131 takes nothing returns nothing
  local unit source=unit244
  local unit RCX=GetEnumUnit()
  local integer ZAE=integer518
  call Func4120(source,RCX)
  set source=null
  set RCX=null
endfunction

function Func4132 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),45))
  local real result=(LoadReal(HY,(ZAE),47))
  local real ZEE=(LoadReal(HY,(ZAE),48))
  local real ZWE=(LoadReal(HY,(ZAE),13))
  local real ZYE=(LoadReal(HY,(ZAE),432))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local real ICX=GetUnitX(source)+30*Cos(ZWE)
  local real N1X=GetUnitY(source)+30*Sin(ZWE)
  local group g
  local fogmodifier A3X
  if DistanceBetweenXY(ICX,N1X,result,ZEE)<35 or ICX!=SafeX50(ICX)or N1X!=SafeY50(N1X)then
    set ICX=result
    set N1X=ZEE
    call SetUnitX(source,ICX)
    call SetUnitY(source,N1X)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    set A3X=(LoadFogModifierHandle(HY,(ZAE),440))
    call FogModifierStop(A3X)
    call DestroyFogModifier(A3X)
    set A3X=null
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call KillUnit(source)
    set tt_unit1=RCX
    set unit244=RCX
    set integer518=QIE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,ICX,N1X,ZYE+25,Condition(function Func0816))
    call ForGroup(g,function Func4130)
    call KillGroup(g)
    set g=null
  else
    call SetUnitX(source,ICX)
    call SetUnitY(source,N1X)
    set tt_unit1=RCX
    set unit244=RCX
    set integer518=QIE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,ICX,N1X,300,Condition(function DefaultEnemyFilter))
    call ForGroup(g,function Func4131)
    call KillGroup(g)
    set g=null
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4133 takes unit SKE,real x,real y,real WNE,effect fx,fogmodifier fm,real A7X returns nothing
  local real a=Atan2(y-GetUnitY(SKE),x-GetUnitX(SKE))
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h0B6',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
  local integer QIE=GetUnitAbilityLevel(SKE,'A1MI')
  local real ILX=DistanceBetweenXY(GetUnitX(SKE),GetUnitY(SKE),x,y)
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(SKE,'A2QE')
  endif
  if IsUnitEnemy(d,LocalPlayer)and PlayerObserver==false then
    call UnitSetUsesAltIcon(d,true)
  endif
  call TriggerRegisterTimerEvent(t,RMinIF(2.0/(ILX/30),0.04),true)
  call TriggerAddCondition(t,Condition(function Func4132))
  call SaveUnitHandle(HY,h,45,(d))
  call SaveReal(HY,h,47,((x)*1.0))
  call SaveReal(HY,h,48,((y)*1.0))
  call SaveReal(HY,h,13,((a)*1.0))
  call SaveReal(HY,h,432,((A7X)*1.0))
  call SaveInteger(HY,h,5,(QIE))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveFogModifierHandle(HY,h,440,(fm))
  call SaveEffectHandle(HY,h,32,(fx))
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1MI',true)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A2QE',true)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1MN',false)
  set t=null
  set d=null
endfunction

function Func4134 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,h,45))
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real a=(LoadReal(HY,h,13))
  local real x
  local real y
  local real WNE=(TimerGetElapsed(GlobalTimer))-(LoadReal(HY,h,431))
  local string s
  local fogmodifier fm
  local effect fx
  local real nx=GetUnitX(d)+30*Cos(a)
  local real ny=GetUnitY(d)+30*Sin(a)
  local real A7X
  set x=SafeX50(nx)
  set y=SafeY50(ny)
  call SetUnitX(d,x)
  call SetUnitY(d,y)
  if ModuloInteger(GetTriggerEvalCount(t),8)==1 then
    if IsNeutralsOrObserversOrAllies(GetOwningPlayer(SKE))then
      call nPngMinimapEx(x,y,0.1,255,255,255,false)
    endif
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A1MN')or x!=nx or y!=ny then
    if IsNeutralsOrObserversOrAllies(GetOwningPlayer(SKE))then
      call nPngMinimapEx(x,y,0.5,255,255,255,true)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    set A7X=RMinIF(25+250+50*WNE,1000)
    call RemoveUnit(d)
    set s=""
    if IsPlayerAlly(GetOwningPlayer(SKE),LocalPlayer)or PlayerObserver then
      set s="war3mapImported\\IceWindGroundFX.mdl"
    endif
    set fm=CreateFogModifierRadius(GetOwningPlayer(SKE),FOG_OF_WAR_VISIBLE,x,y,500,true,true)
    call FogModifierStart(fm)
    set fx=AddSpecialEffect(s,x,y)
    call Func4133(SKE,x,y,WNE,fx,fm,A7X)
    set fm=null
    set fx=null
  endif
  set t=null
  set d=null
  set SKE=null
  return false
endfunction

function Func4135 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real a=Atan2(y-GetUnitY(SKE),x-GetUnitX(SKE))
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(SKE),'H0B8',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
  call SaveUnitHandle(HY,h,45,(d))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveReal(HY,h,13,((a)*1.0))
  call SaveReal(HY,h,431,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerAddCondition(t,Condition(function Func4134))
  call SetUnitColor(d,GetPlayerColor(Player(14)))
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1MI',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A2QE',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1MN',true)
  call UnitAddAbility2(SKE,'A1MN')
  set SKE=null
  set t=null
  set d=null
endfunction

function Func4136 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),17))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),2))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),19))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(GetHandleId(RCX)),449))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==RCX and GetEventDamage()>1 then
      call DisableTrigger(RBX)
      if ZBE>0 then
        call SaveInteger(HY,(GetHandleId(RCX)),449,(ZBE-1))
        call TextTagOnUnit("+"+I2S(40+10*QIE),1,RCX,0.024,100,200,255,255,Func0590(RCX)or PlayerObserver)
        call DamageTarget(RCX,source,1,40+10*QIE)
      endif
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set RCX=null
  set M_X=null
  set source=null
  return false
endfunction

function Func4137 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED or(LoadInteger(HY,(GetHandleId(source)),449))==0 or GetUnitAbilityLevel(source,'A1HN')==0 then
    call SaveInteger(HY,(GetHandleId(source)),449,0)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call UnitRemoveAbility(source,'A1HN')
    call UnitRemoveAbility(source,'B0CJ')
  elseif GetAttacker()==source and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and((LoadInteger(HY,(GetHandleId(source)),4289))!=1)then
    call AddTimedKeyToAgent(source,4289,0.4)
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call TriggerRegisterUnitEvent(RBX,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
    call TriggerRegisterTimerEvent(RBX,2.0,false)
    call TriggerAddCondition(RBX,Condition(function Func4136))
    call SaveUnitHandle(HY,(ZAE),17,(GetTriggerUnit()))
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveUnitHandle(HY,(ZAE),19,(RCX))
    call SaveInteger(HY,(ZAE),5,(QIE))
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4138 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetEnumUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetUnitAbilityLevel(source,'A1HQ')
  call UnitAddAbility2(RCX,'A1HN')
  call SaveInteger(HY,(GetHandleId(RCX)),449,(2+QIE))
  call SaveUnitHandle(HY,(ZAE),2,(RCX))
  call SaveUnitHandle(HY,(ZAE),19,(source))
  call SaveInteger(HY,(ZAE),5,(QIE))
  call TriggerRegisterTimerEvent(RBX,30,false)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerAddCondition(RBX,Condition(function Func4137))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func4139 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  call GroupEnumUnitsInRange(g,result,ZEE,550,Condition(function Func0832))
  call GroupAddUnit(g,source)
  call ForGroup(g,function Func4138)
  call KillGroup(g)
  set source=null
  set g=null
endfunction

function Func4140 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,2)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local group g
  local integer c=GetTriggerEvalCount(t)
  local unit u2
  local real r
  local unit YFI=LoadUnitHandle(HY,h,5)
  call DestroyEffect(LoadEffectHandle(HY,h,0))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    set u=null
    set t=null
    set YFI=null
    call CleanTrigger(t)
    return false
  else
    if c==1 then
      set YFI=CreateUnit(GetOwningPlayer(u),'h0B2',x,y,0)
      call SaveUnitHandle(HY,h,5,YFI)
      call SetUnitAnimationByIndex(YFI,1)
      call UnitApplyTimedLife(YFI,'BTLF',1)
      call TriggerRegisterTimerEvent(t,0.1,true)
      set YFI=null
    elseif c>=10 then
      call CleanTrigger(t)
    endif
    call SetUnitX(YFI,GetUnitX(u))
    call SetUnitY(YFI,GetUnitY(u))
    call Func0862(u)
    set g=GetAvailableGroup()
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,x,y,350,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    set r=GetUnitAbilityLevel(u,'A1IM')*7.5
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call DamageTarget(u,u2,1,r)
    endloop
    call Func2342(u,u)
    call DamageTarget(u,u,1,r/2.)
    call KillGroup(g)
  endif
  set t=null
  set g=null
  set u=null
  return false
endfunction

function Func4141 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local string s="war3mapImported\\DarkPact.mdx"
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(u))==false then
    set s=""
  endif
  call SaveEffectHandle(HY,h,0,AddSpecialEffectTarget(s,u,"origin"))
  call TriggerRegisterTimerEvent(t,1.5,false)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func4140))
  call SaveUnitHandle(HY,h,2,u)
  set t=null
  set u=null
endfunction

function Func4142 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local player p
  local integer QIE=GetUnitAbilityLevel(u,'A1IN')
  local real WNE=(TimerGetElapsed(GlobalTimer))
  local real X2N=(LoadReal(HY,(h),415))
  local real X3N=(LoadReal(HY,(h),416))
  local real FRX
  if IsDead(u)then
    set t=null
    set u=null
    return false
  endif
  if IsSentinel(GetOwningPlayer(u))then
    set p=Scourges[1]
  else
    set p=Sentinels[1]
  endif
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetOwningPlayer(GetEventDamageSource())==Neutrals then
    if GetUnitAbilityLevel(u,'A1I8')>0 then
      call UnitRemoveAbility(u,'A1I8')
    endif
    if GetUnitAbilityLevel(u,'A1I9')>0 then
      call UnitRemoveAbility(u,'A1I9')
    endif
    if GetUnitAbilityLevel(u,'A1IA')>0 then
      call UnitRemoveAbility(u,'A1IA')
    endif
    call UnitRemoveAbility(u,'B0C9')
    call SaveReal(HY,(h),414,WNE+2.)
    set t=null
    set u=null
    return false
  endif
  if(LoadReal(HY,(h),414))>WNE then
    set t=null
    set u=null
    return false
  endif
  if(IsUnitVisibleEx(u,p)and Func0799(u)==false)or GetUnitAbilityLevel(u,'A36D')>0 then
    set X3N=0
    if GetUnitAbilityLevel(u,'A1I8')>0 or GetUnitAbilityLevel(u,'A1I9')>0 or GetUnitAbilityLevel(u,'A1IA')>0 then
      set X2N=X2N+0.1
      if X2N>0.4 then
        set X2N=0.
        if GetUnitAbilityLevel(u,'A1I8')>0 then
          call UnitRemoveAbility(u,'A1I8')
          call UnitRemoveAbility(u,'B0C9')
        endif
        if GetUnitAbilityLevel(u,'A1I9')>0 then
          call UnitRemoveAbility(u,'A1I9')
          call UnitRemoveAbility(u,'B0C9')
        endif
        if GetUnitAbilityLevel(u,'A1IA')>0 then
          call UnitRemoveAbility(u,'A1IA')
          call UnitRemoveAbility(u,'B0C9')
        endif
      endif
    endif
    call SaveReal(HY,(h),415,X2N)
    call SaveReal(HY,(h),416,X3N)
  elseif IsUnitVisibleEx(u,p)==false or Func0799(u)then
    set X2N=0
    if(QIE==1 and GetUnitAbilityLevel(u,'A1I8')==0)or(QIE==2 and GetUnitAbilityLevel(u,'A1I9')==0)or(QIE==3 and GetUnitAbilityLevel(u,'A1IA')==0)then
      set X3N=X3N+0.1
      if X3N>0.4 then
        set X3N=0.
        if QIE==1 then
          if GetUnitAbilityLevel(u,'A1I8')==0 then
            call UnitAddAbility2(u,'A1I8')
          endif
        elseif QIE==2 then
          if GetUnitAbilityLevel(u,'A1I8')>0 then
            call UnitRemoveAbility(u,'A1I8')
            call UnitRemoveAbility(u,'B0C9')
          endif
          if GetUnitAbilityLevel(u,'A1I9')==0 then
            call UnitAddAbility2(u,'A1I9')
          endif
        elseif QIE==3 then
          if GetUnitAbilityLevel(u,'A1I8')>0 then
            call UnitRemoveAbility(u,'A1I8')
            call UnitRemoveAbility(u,'B0C9')
          endif
          if GetUnitAbilityLevel(u,'A1I9')>0 then
            call UnitRemoveAbility(u,'A1I9')
            call UnitRemoveAbility(u,'B0C9')
          endif
          if GetUnitAbilityLevel(u,'A1IA')==0 then
            call UnitAddAbility2(u,'A1IA')
          endif
        endif
      endif
    elseif IsDead(u)==false then
      set FRX=1+2*QIE
      call SetWidgetLife(u,GetWidgetLife(u)+GetUnitState(u,UNIT_STATE_MAX_LIFE)/1000*FRX)
    endif
    call SaveReal(HY,(h),415,X2N)
    call SaveReal(HY,(h),416,X3N)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func4143 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveReal(HY,(h),415,0.)
  call SaveReal(HY,(h),416,0.)
  call SaveReal(HY,(h),414,TimerGetElapsed(GlobalTimer))
  call SaveUnitHandle(HY,(h),2,GetTriggerUnit())
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func4142))
  set t=null
endfunction

function Func4144 takes integer h,integer SLI,integer KXE,integer RVX,unit u,boolean X5N returns nothing
  if X5N then
    call SaveBoolean(HY,h,276,true)
    call SetHeroAgi(u,GetHeroAgi(u,false)-3,true)
    call Func2328(u,'A3Q8',-1)
    call SaveInteger(HeroStats,GetHandleId(u),31,LoadInteger(HeroStats,GetHandleId(u),31)-3)
  else
    call SaveBoolean(HY,h,277,true)
    call SetHeroAgi(u,GetHeroAgi(u,false)+SLI,true)
    call SetHeroStr(u,GetHeroStr(u,false)+KXE,true)
    call SetHeroInt(u,GetHeroInt(u,false)+RVX,true)
  endif
endfunction

function Func4145 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LBO=LoadUnitHandle(HY,h,2)
  local unit LCO=LoadUnitHandle(HY,h,17)
  local integer SLI=LoadInteger(HY,h,422)
  local integer KXE=LoadInteger(HY,h,424)
  local integer RVX=LoadInteger(HY,h,423)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    if(LoadBoolean(HY,h,276))==false and GetTriggerUnit()==LBO then
      call Func4144(h,SLI,KXE,RVX,LBO,true)
    elseif(LoadBoolean(HY,h,277))==false and GetTriggerUnit()==LCO then
      call Func4144(h,SLI,KXE,RVX,LCO,false)
    endif
    if LoadBoolean(HY,h,276)and LoadBoolean(HY,h,277)then
      call FlushChildHashtable(HY,h)
      call CleanTrigger(t)
    endif
  else
    if(LoadBoolean(HY,h,276))==false then
      call Func4144(h,SLI,KXE,RVX,LBO,true)
    endif
    if(LoadBoolean(HY,h,277))==false then
      call Func4144(h,SLI,KXE,RVX,LCO,false)
    endif
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
  set LBO=null
  set LCO=null
  return false
endfunction

function Func4146 takes unit LBO,unit LCO returns nothing
  local integer QIE=GetUnitAbilityLevel(LBO,'A1HR')
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer SLI=IMinBJ(GetHeroAgi(LCO,false)-1,1)
  local integer KXE=IMinBJ(GetHeroStr(LCO,false)-1,1)
  local integer RVX=IMinBJ(GetHeroInt(LCO,false)-1,1)
  local real D1E
  local integer WVE=GetPlayerId(GetOwningPlayer(LBO))
  call SetHeroAgi(LBO,GetHeroAgi(LBO,false)+3,true)
  call Func2328(LBO,'A3Q8',1)
  call SaveInteger(HeroStats,GetHandleId(LBO),31,LoadInteger(HeroStats,GetHandleId(LBO),31)+3)
  call SetHeroAgi(LCO,GetHeroAgi(LCO,false)-SLI,true)
  call SetHeroStr(LCO,GetHeroStr(LCO,false)-KXE,true)
  call SetHeroInt(LCO,GetHeroInt(LCO,false)-RVX,true)
  call SaveInteger(HY,h,422,SLI)
  call SaveInteger(HY,h,424,KXE)
  call SaveInteger(HY,h,423,RVX)
  call SaveUnitHandle(HY,h,2,LBO)
  call SaveUnitHandle(HY,h,17,LCO)
  call SaveBoolean(HY,h,276,false)
  call SaveBoolean(HY,h,277,false)
  if QIE==4 then
    set D1E=120
  elseif QIE==3 then
    set D1E=60
  elseif QIE==2 then
    set D1E=30
  else
    set D1E=15
  endif
  call TriggerRegisterTimerEvent(t,D1E,false)
  call TriggerRegisterDeathEvent(t,LBO)
  call TriggerRegisterDeathEvent(t,LCO)
  call TriggerAddCondition(t,Condition(function Func4145))
  set t=null
endfunction

function Func4147 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LBO=LoadUnitHandle(HY,h,2)
  local unit LCO=LoadUnitHandle(HY,h,17)
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    call Func4146(LBO,LCO)
  endif
  call FlushChildHashtable(HY,h)
  call CleanTrigger(t)
  set t=null
  set LBO=null
  set LCO=null
  return false
endfunction

function Func4148 takes unit WXE,unit SGE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,.01,false)
  call TriggerAddCondition(t,Condition(function Func4147))
  call TriggerRegisterDeathEvent(t,WXE)
  call TriggerRegisterDeathEvent(t,SGE)
  call SaveUnitHandle(HY,h,2,WXE)
  call SaveUnitHandle(HY,h,17,SGE)
  set t=null
endfunction

function Func4149 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit OEN=(LoadUnitHandle(HY,(h),19))
  local integer QIE=(LoadInteger(HY,(h),5))
  local integer c=(LoadInteger(HY,(h),34))
  if c>(4.0)/0.03 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func0394(SKE)
    call SaveInteger(HY,(GetHandleId(SKE)),4421,2)
    call KillUnit(OEN)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set c=c+1
    call SaveInteger(HY,(h),34,(c))
    call Func0395(SKE)
    call SetUnitX(OEN,GetUnitX(SKE))
    call SetUnitY(OEN,GetUnitY(SKE))
  endif
  set t=null
  set SKE=null
  set OEN=null
  return false
endfunction

function Func4150 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A1IN')
  local real D1E=4.0
  local unit OEN=CreateUnit(GetOwningPlayer(u),'h0B1',GetUnitX(u),GetUnitY(u),0)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call Func0395(u)
  call UnitAddAbilityTimedExF(u,'A3RA',1,D1E,0)
  call SaveInteger(HY,(GetHandleId(u)),4421,1)
  call Func0770(u,false,0,0)
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func4149))
  call SaveUnitHandle(HY,(h),19,(OEN))
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveInteger(HY,(h),34,0)
  set u=null
  set OEN=null
  set t=null
endfunction

function ShadowDanceAttacker takes nothing returns nothing
  local group g
  local unit u=GetAttacker()
  local unit u2
  call IssueImmediateOrderByIdExFunc(u,851972)
  if IsUnitOwnedByPlayer(u,Scourges[0])or IsUnitOwnedByPlayer(u,Sentinels[0])then
    set g=GetAvailableGroup()
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),Func0468(GetUnitAcquireRange(u),600),Condition(function Func0816))
    call GroupRemoveUnit(g,GetTriggerUnit())
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      if IssueTargetOrder(u,"attack",u2)then
        call GroupClear(g)
      endif
      call GroupRemoveUnit(g,u2)
    endloop
    call KillGroup(g)
  endif
  set u=null
  set u2=null
endfunction

function Func4152 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetTriggerEvalCount(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local lightning JSI=(LoadLightningHandle(HY,(ZAE),196))
  local integer ZBE=(LoadInteger(HY,(ZAE),5))
  local real result=(LoadReal(HY,(ZAE),189))
  local real ZEE=(LoadReal(HY,(ZAE),190))
  local real ZWE=GetUnitX(RCX)
  local real ZYE=GetUnitY(RCX)
  local real ICX
  local real N1X
  local real N2X=(LoadReal(HY,(ZAE),23))
  local real N3X=(LoadReal(HY,(ZAE),24))
  local real N4X
  local real N5X=DistanceBetweenXY(N2X,N3X,ZWE,ZYE)
  call SaveReal(HY,(ZAE),23,((ZWE)*1.0))
  call SaveReal(HY,(ZAE),24,((ZYE)*1.0))
  if N5X>100 or QIE>(3.5/.03)or IsMagicImmune(RCX)or GetTriggerEventId()==EVENT_WIDGET_DEATH or LoadBoolean(HY,GetHandleId(RCX),'PUNC')==false then
    call Func0788(RCX)
    call DestroyLightning(JSI)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call MoveLightning(JSI,true,result,ZEE,ZWE,ZYE)
    if DistanceBetweenXY(result,ZEE,ZWE,ZYE)>real013 then
      set N4X=Atan2(ZYE-ZEE,ZWE-result)
      set ICX=result+real013*Cos(N4X)
      set N1X=ZEE+real013*Sin(N4X)
      call SetUnitX(RCX,ICX)
      call SetUnitY(RCX,N1X)
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  set JSI=null
  return false
endfunction

function Func4153 takes unit u,unit SGE,integer ZAE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local lightning JSI=AddLightning("PONC",true,GetUnitX(u),GetUnitY(u),GetUnitX(SGE),GetUnitY(SGE))
  call SetLightningColor(JSI,1,1,1,1)
  call SaveLightningHandle(HY,h,196,(JSI))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,(ZAE))
  call SaveReal(HY,h,189,((GetUnitX(u))*1.0))
  call SaveReal(HY,h,190,((GetUnitY(u))*1.0))
  call SaveReal(HY,h,23,((GetUnitX(SGE))*1.0))
  call SaveReal(HY,h,24,((GetUnitY(SGE))*1.0))
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func4152))
  call DamageTarget(u,SGE,1,40*ZAE)
  call IssueTargetOrder(u,"attack",SGE)
  call SaveBoolean(HY,GetHandleId(SGE),'PUNC',true)
  call SaveReal(HY,GetHandleId(SGE),'PUNC',GetUnitX(SGE))
  call SaveReal(HY,GetHandleId(SGE),'PUNC'+1,GetUnitY(SGE))
  set t=null
  set JSI=null
endfunction

function Func4154 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer c=GetTriggerEvalCount(t)
  local integer QIE=(LoadInteger(HY,h,5))
  local unit u=(LoadUnitHandle(HY,h,2))
  local real GXE=(LoadReal(HY,h,13))
  local real x=(LoadReal(HY,h,189))
  local real y=(LoadReal(HY,h,190))
  local real dx=(LoadReal(HY,h,47))
  local real dy=(LoadReal(HY,h,48))
  local real nx=x+(30*(20+4*2)/30)*c*Cos(GXE*bj_DEGTORAD)
  local real ny=y+(30*(20+4*2)/30)*c*Sin(GXE*bj_DEGTORAD)
  local real ILX=SquareRoot((nx-dx)*(nx-dx)+(ny-dy)*(ny-dy))
  local real J9O=700
  local real OAN=175
  local real AHX=(1-ILX/J9O)*OAN*2
  local group g=GetAvailableGroup()
  local unit SGE
  local player p
  if c==1 then
    call SetUnitAnimationByIndex(u,5)
    call SetUnitTimeScale(u,1.5)
  endif
  if AHX>OAN then
    call SetUnitAnimationByIndex(u,5)
    set AHX=OAN*2-AHX
  endif
  call SetUnitFlyHeight(u,Func0468(AHX,0),0)
  call SetUnitX(u,SafeX50(nx))
  call SetUnitY(u,SafeY50(ny))
  call SetUnitFacing(u,GXE)
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,nx,ny,120,Condition(function Func0836))
  set SGE=FirstOfGroup(g)
  call KillGroup(g)
  if ILX<30 or IsDead(u)or SGE!=null or GetTriggerEvalCount(t)>25 then
    call SetUnitFlyHeight(u,0,0)
    call SetUnitFacing(u,GXE)
    call SetUnitTimeScale(u,1)
    call SetUnitAnimation(u,"stand")
    call SetUnitPathing2(u,true)
    call UnitRemoveAbility(u,'A1J6')
    call KillTrees(GetUnitX(u),GetUnitY(u),100)
    if SGE!=null and IsMagicImmune(SGE)==false and IsDead(u)==false then
      call AddTimedKeyToAgent(SGE,4408,5)
      call Func4153(u,SGE,QIE)
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call Func2343(u,0.05)
  endif
  set t=null
  set u=null
  set SGE=null
  return false
endfunction

function Func4155 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A1J7')
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real J9O=700
  local real GXE=GetUnitFacing(u)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local real sx=SafeX50(x+J9O*Cos(GXE*bj_DEGTORAD))
  local real sy=SafeY50(y+J9O*Sin(GXE*bj_DEGTORAD))
  call Func0770(u,false,0,0)
  call UnitAddAbility2(u,'Amrf')
  call UnitRemoveAbility(u,'Amrf')
  call SetUnitPathing2(u,false)
  call UnitAddAbility2(u,'A1J6')
  call TriggerRegisterTimerEvent(t,0.,false)
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerAddCondition(t,Condition(function Func4154))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveInteger(HY,h,5,(QIE))
  call SaveReal(HY,h,13,((GXE)*1.0))
  call SaveReal(HY,h,189,((x)*1.0))
  call SaveReal(HY,h,190,((y)*1.0))
  call SaveReal(HY,h,47,((sx)*1.0))
  call SaveReal(HY,h,48,((sy)*1.0))
  set u=null
  set t=null
endfunction

function Func4156 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=tt_unit1
  local unit RCX=tt_unit3
  local real result=(LoadReal(HY,(ZAE),20))
  call DamageTarget(source,RCX,1,result)
  set source=null
  set RCX=null
endfunction

function Func4157 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=AddProjectile(source,GetEnumUnit(),'h0BP',"Func4156",700,false)
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetUnitAbilityLevel(source,'A04A')
  call SaveReal(HY,(ZAE),20,75*QIE)
  set source=null
  set RBX=null
endfunction

function Func4158 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local integer ZAE=GetUnitAbilityLevel(source,'A04A')
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),500,Condition(function Func0812))
  call ForGroup(g,function Func4157)
  call KillGroup(g)
  call PlaySoundOnUnitBJ(sound040,100,source)
  set source=null
endfunction

function Func4159 takes nothing returns nothing
  local real dmg=210+115*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())
  call Func2325(GetTriggerUnit(),'h02C',dmg,800,100,450,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetSpellTargetX(),GetSpellTargetY(),900,7,true,null,0)
endfunction

function Func4160 takes nothing returns nothing
  local real dmg=200+90*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())
  call Func2325(GetTriggerUnit(),'h02C',dmg,800,100,450,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetSpellTargetX(),GetSpellTargetY(),900,7,true,null,0)
endfunction

function Func4161 takes nothing returns nothing
  call AddToPurgeList('BEsh','PRGE')
endfunction

function Func4162 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=LoadUnitHandle(HY,h,3)
  local real r=LoadReal(HY,h,0)-0.1
  if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif r<=0 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call Func0656(SKE)
  else
    call SaveReal(HY,h,0,r)
    call DamageTarget(SKE,SGE,1,LoadReal(HY,h,1))
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4163 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A00P')
  local unit SGE=GetSpellTargetUnit()
  local real dmg=(40.+80.*QIE)/(2.+0.75*QIE)/10.
  call TriggerRegisterTimerEvent(t,0.1,true)
  call SaveReal(HY,h,0,2.75+0.75*QIE)
  call SaveReal(HY,h,1,dmg)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func4162))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,3,SGE)
  call Func1330(SKE,SGE,'B090')
  set SGE=null
  set SKE=null
  set t=null
endfunction

function Func4164 takes nothing returns nothing
endfunction

function Func4165 takes nothing returns nothing
  call AddToPurgeList('B00H','PRGE')
endfunction

function Func4166 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A00H')
  local integer id
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real dx
  local real dy
  local real offset
  local real val
  local real D1E=45
  local unit u2
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(u,'A0A1')
    set id='o01C'-1+QIE
  else
    if QIE==1 then
      set id='osp4'
    elseif QIE==2 then
      set id='o008'
    elseif QIE==3 then
      set id='o009'
    endif
  endif
  set offset=65
  set val=65
  set dx=x+0*offset
  set dy=y+1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x+1*offset
  set dy=y+1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x+2*offset
  set dy=y+1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x-1*offset
  set dy=y+1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x-2*offset
  set dy=y+1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x-1*offset
  set dy=y+0*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x+1*offset
  set dy=y+0*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x-1*offset
  set dy=y-1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x+0*offset
  set dy=y-1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set dx=x+1*offset
  set dy=y-1*val
  set u2=CreateUnit(GetOwningPlayer(u),id,dx,dy,0)
  call UnitApplyTimedLife(u2,'BTLF',D1E)
  set u=null
  set u2=null
endfunction

function Func4167 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(RBX)==4 or IsMagicImmune(RCX)then
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call UnitRemoveAbility(RCX,'A2O7')
    call UnitRemoveAbility(RCX,'B0GC')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    call DamageTarget(source,RCX,1,20*QIE-10)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4168 takes unit source,unit RCX,integer ZAE returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call UnitAddAbility2(RCX,'A2O7')
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerAddCondition(RBX,Condition(function Func4167))
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveUnitHandle(HY,(QIE),17,(RCX))
  call SaveInteger(HY,(QIE),5,(ZAE))
  call SaveEffectHandle(HY,(QIE),32,(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",RCX,"chest")))
  set RBX=null
endfunction

function Func4169 takes nothing returns boolean
  if IsUnitInGroup(GetEnumUnit(),group037)==false and IsMagicImmune(GetEnumUnit())==false then
    call GroupAddUnit(group037,GetEnumUnit())
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireBlast.mdx",GetEnumUnit(),"chest"))
    call Func4168(unit245,GetEnumUnit(),integer519)
  endif
  return false
endfunction

function Func4170 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer i=(LoadInteger(HY,h,34))
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real x=(LoadReal(HY,h,189))
  local real y=(LoadReal(HY,h,190))
  local real tx=(LoadReal(HY,h,47))
  local real ty=(LoadReal(HY,h,48))
  local real GXE=(LoadReal(HY,h,13))
  local real OJN=(1-I2R(i)/50)*bj_PI
  local real OKN=1400/2*Cos(OJN)
  local real IRO=500/2*Sin(OJN)
  local real nx=SafeX50(tx+OKN*Cos(GXE)-IRO*Sin(GXE))
  local real ny=SafeY50(ty+OKN*Sin(GXE)+IRO*Cos(GXE))
  local group g=(LoadGroupHandle(HY,h,133))
  local group gg
  local integer QIE=GetUnitAbilityLevel(SKE,'A1RJ')
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and i>0 and(GetSpellAbilityId()=='A20N' or GetSpellAbilityId()=='A1RK' or GetSpellAbilityId()=='A315'))or i>100 or IsUnitBadSpellTargeted(SKE)then
    call KillTrees(nx,ny,300)
    call SetUnitVertexColor(SKE,255,255,255,255)
    if(LoadInteger(HY,(GetHandleId(SKE)),704))==0 or(LoadInteger(HY,(GetHandleId(SKE)),704))=='A1RJ' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1RJ',true)
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A20N',false)
    call SetUnitPathing2(SKE,true)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if ModuloInteger(i,10)==0 then
      call KillTrees(nx,ny,200)
    endif
    call SaveInteger(HY,h,34,(i+1))
    call SetUnitX(SKE,nx)
    call SetUnitY(SKE,ny)
    call SetUnitFacing(SKE,(GXE+OJN-bj_PI/2)*bj_RADTODEG)
    set gg=GetAvailableGroup()
    set group037=g
    set tt_unit1=SKE
    set unit245=SKE
    set integer519=GetUnitAbilityLevel(SKE,'A1RJ')
    call GroupEnumUnitsInRange(gg,nx,ny,225,Condition(function Func0821))
    call ForGroup(gg,function Func4169)
    call KillGroup(gg)
  endif
  set t=null
  set SKE=null
  set gg=null
  set g=null
  return false
endfunction

function Func4171 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real GXE= AngleBetweenXY(x,y,GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
  local real tx=x+1400/2*Cos(GXE)
  local real ty=y+1400/2*Sin(GXE)
  call SetUnitState(SKE,UNIT_STATE_LIFE,GetUnitState(SKE,UNIT_STATE_LIFE)-GetUnitState(SKE,UNIT_STATE_LIFE)*0.15)
  call AddTimedKeyToAgent(SKE,4301,2)
  call AddTimedKeyToAgent(SKE,4415,2)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4170))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveReal(HY,h,189,((x)*1.0))
  call SaveReal(HY,h,190,((y)*1.0))
  call SaveReal(HY,h,47,((tx)*1.0))
  call SaveReal(HY,h,48,((ty)*1.0))
  call SaveReal(HY,h,13,((GXE)*1.0))
  call SaveGroupHandle(HY,h,133,(GetAvailableGroup()))
  call SetUnitPathing2(SKE,false)
  call SetUnitVertexColor(SKE,255,255,255,50)
  call UnitAddAbility2(SKE,'A20N')
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1RJ',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A20N',true)
  set t=null
  set SKE=null
endfunction

function Func4172 takes nothing returns nothing
  local unit source=unit246
  local unit RCX=GetEnumUnit()
  call DamageTarget(source,RCX,1,30+30*integer520)
  call Func0690("Doodads\\Cinematic\\FireTrapUp\\FireTrapUp.mdl",RCX,"origin",1)
  set source=null
  set RCX=null
endfunction

function Func4173 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,3))
  local integer QIE=GetUnitAbilityLevel(SKE,'A1RK')+GetUnitAbilityLevel(SKE,'A315')
  local group g
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set tt_unit1=SKE
    set unit246=SKE
    set integer520=QIE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),1025,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func4172)
    call KillGroup(g)
    set g=null
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4174 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,589))
  local unit E9O=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,3))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local unit M_X=(LoadUnitHandle(HY,h,19))
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if IsFakeDamage>0 or IsUnitIllusion(GetEventDamageSource())then
      call Func0673(SKE,GetEventDamage())
    endif
  else
    if GetUnitX(SKE)!=x or GetUnitY(SKE)!=y then
      call SetUnitPosition(SKE,x,y)
    endif
    if GetUnitY(E9O)!=x or GetUnitY(E9O)!=y then
      call SetUnitPosition(E9O,x,y)
    endif
    if SGE!=null then
      if GetUnitY(SGE)!=x or GetUnitY(SGE)!=y then
        call SetUnitPosition(SGE,x,y)
      endif
    endif
    call SetUnitX(M_X,GetUnitX(E9O))
    call SetUnitY(M_X,GetUnitY(E9O))
  endif
  if GetTriggerEvalCount(t)==1 then
  endif
  set t=null
  set SGE=null
  set SKE=null
  set E9O=null
  set M_X=null
  return false
endfunction

function Func4175 takes unit u returns nothing
  local integer NFX=integers026[GetPlayerId(GetOwningPlayer(u))]
  local integer QIE
  local integer i=0
  local integer id
  local integer JWE
  loop
    exitwhen HaveSavedInteger(HeroStats,NFX,i)==false
    set id=LoadInteger(HeroStats,NFX,i)
    call Func0410(u,id)
    set i=i+1
  endloop
endfunction

function Func4176 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=LoadUnitHandle(HY,h,3)
  local unit RCX=(LoadUnitHandle(HY,h,588))
  local unit M_X=(LoadUnitHandle(HY,h,589))
  local real result=(LoadReal(HY,h,6))
  local real ZEE=(LoadReal(HY,h,7))
  local unit M0X=(LoadUnitHandle(HY,h,239))
  local integer QIE=GetUnitAbilityLevel(SKE,'A1RK')+GetUnitAbilityLevel(SKE,'A315')
  local group g
  local unit M1X
  local integer ZBE
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEventId()==EVENT_UNIT_DEATH then
    call StopSound(sound041,false,false)
    call ShowUnit(RCX,false)
    call ShowUnit(M0X,false)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call ShowUnit(SKE,true)
    call SaveInteger(HY,(GetHandleId(SKE)),4326,2)
    call UnitRemoveAbility(SKE,'A04R')
    call SetUnitInvulnerable(SKE,false)
    call PauseUnit(SKE,false)
    if GetTriggerUnit()!=SKE then
      call SetUnitState(SKE,UNIT_STATE_LIFE,1)
      set M1X=CreateUnit(GetOwningPlayer(GetKillingUnit()),'e00E',0,0,0)
      call UnitRemoveBuffs(SKE,true,true)
      call UnitRemoveAbility(SKE,'Aetl')
      call DamageTarget(M1X,SKE,2,100000000)
    endif
    if SGE!=null then
      call ShowUnit(SGE,true)
      call SaveInteger(HY,(GetHandleId(SGE)),4326,2)
      call UnitRemoveAbility(SGE,'A04R')
      call SetUnitInvulnerable(SGE,false)
      call PauseUnit(SGE,false)
      call SetUnitState(SGE,UNIT_STATE_LIFE,1)
      call UnitRemoveBuffs(SGE,true,true)
      call UnitRemoveAbility(SGE,'Aetl')
      set M1X=CreateUnit(GetOwningPlayer(GetKillingUnit()),'e00E',0,0,0)
      call DamageTarget(M1X,SGE,2,100000000)
    endif
    set M1X=null
  else
    if GetTriggerEvalCount(t)==1 then
      call SetUnitFlyHeight(M_X,0,200)
    elseif GetTriggerEvalCount(t)==2 then
      call PauseUnit(M_X,false)
      call ShowUnit(RCX,false)
      call ShowUnit(M0X,false)
      call UnitApplyTimedLife(M_X,'BTLF',0.1)
      call StopSound(sound041,false,false)
      call StartSound(sound042)
      call DestroyEffect(AddSpecialEffect("war3mapImported\\FireNova2.mdx",GetUnitX(RCX),GetUnitY(RCX)))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call ShowUnit(SKE,true)
      call SaveInteger(HY,(GetHandleId(SKE)),4326,2)
      call UnitRemoveAbility(SKE,'A04R')
      call SetUnitInvulnerable(SKE,false)
      call SetUnitAnimationByIndex(SKE,8)
      call QueueUnitAnimation(SKE,"idle")
      call PauseUnit(SKE,false)
      if IsUnitOwnedByPlayer(SKE,LocalPlayer)then
        call ClearSelection()
        call SelectUnit(SKE,true)
      endif
      call SetUnitState(SKE,UNIT_STATE_LIFE,GetUnitState(SKE,UNIT_STATE_MAX_LIFE))
      call SetUnitState(SKE,UNIT_STATE_MANA,GetUnitState(SKE,UNIT_STATE_MAX_MANA))
      call Func4175(SKE)
      if SGE!=null then
        call ShowUnit(SGE,true)
        call SaveInteger(HY,(GetHandleId(SGE)),4326,2)
        call UnitRemoveAbility(SGE,'A04R')
        call SetUnitInvulnerable(SGE,false)
        call PauseUnit(SGE,false)
        if IsUnitOwnedByPlayer(SGE,LocalPlayer)then
          call ClearSelection()
          call SelectUnit(SGE,true)
        endif
        if GetWidgetLife(SGE)>0.5 then
          call SetUnitState(SGE,UNIT_STATE_LIFE,GetUnitState(SGE,UNIT_STATE_MAX_LIFE))
          call SetUnitState(SGE,UNIT_STATE_MANA,GetUnitState(SGE,UNIT_STATE_MAX_MANA))
          call Func4175(SGE)
        endif
      endif
      set M1X=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
      call UnitAddAbility2(M1X,'A1ZT')
      call SetUnitAbilityLevel(M1X,'A1ZT',QIE)
      call IssueImmediateOrderByIdExFunc(M1X,852127)
      set M1X=null
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  set RCX=null
  set M0X=null
  set M_X=null
  return false
endfunction

function Func4177 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local unit d0
  local unit OTN
  local unit d1=CreateUnit(GetOwningPlayer(SKE),'h0CL',GetUnitX(SKE),GetUnitY(SKE),0)
  local integer QIE=GetUnitAbilityLevel(SKE,'A1RK')
  local unit M1X
  local unit d2=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
  local boolean OUN=QIE==0
  local unit SGE=null
  if OUN then
    set QIE=GetUnitAbilityLevel(SKE,'A315')
  endif
  set d0=CreateUnit(GetOwningPlayer(SKE),'h0BX',x,y,0)
  if QIE==1 then
    set OTN=CreateUnit(GetOwningPlayer(SKE),'h0CV',x,y,0)
  elseif QIE==2 then
    set OTN=CreateUnit(GetOwningPlayer(SKE),'h0CX',x,y,0)
  elseif QIE==3 then
    set OTN=CreateUnit(GetOwningPlayer(SKE),'h0CW',x,y,0)
  endif
  if OUN then
    call Func0167(OTN,4.+3.*QIE)
    call SetWidgetLife(OTN,99)
  endif
  call KillTrees(x,y,400)
  call AddSpecialEffectTarget("war3mapImported\\PhoenixDown_2.mdl",d0,"origin")
  if IsUnitOwnedByPlayer(SKE,LocalPlayer)then
    call ClearSelection()
    call SelectUnit(OTN,true)
  endif
  if OUN then
    set SGE=GetSpellTargetUnit()
    if Func1474(SGE)then
      set SGE=null
      call Error(GetOwningPlayer(SKE),GetObjectName('n038'))
    endif
  endif
  call ShowUnit(SKE,false)
  call SaveInteger(HY,(GetHandleId(SKE)),4326,1)
  call Func0862(SKE)
  call UnitAddAbility2(SKE,'A04R')
  call SetUnitInvulnerable(SKE,true)
  if SGE!=null and SGE!=SKE then
    call ShowUnit(SGE,false)
    call FuckingAssistBuffWrap(SKE,SGE)
    call SaveInteger(HY,(GetHandleId(SGE)),4326,1)
    call UnitAddAbility2(SGE,'A04R')
    call SetUnitInvulnerable(SGE,true)
    call Func0862(SGE)
  endif
  call StartSound(sound041)
  call UnitRemoveAbility(OTN,'Arav')
  call UnitApplyTimedLife(d0,'BTLF',6.1)
  call UnitApplyTimedLife(d1,'BTLF',6.1)
  call UnitApplyTimedLife(OTN,'BTLF',6.1)
  call TriggerRegisterTimerEvent(t,5.2,false)
  call TriggerRegisterTimerEvent(t,6,false)
  call TriggerAddCondition(t,Condition(function Func4176))
  call TriggerRegisterUnitEvent(t,OTN,EVENT_UNIT_DEATH)
  call TriggerRegisterDeathEvent(t,SKE)
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,3,(SGE))
  call SaveUnitHandle(HY,h,588,(d0))
  call SaveUnitHandle(HY,h,589,(OTN))
  call SaveUnitHandle(HY,h,239,(d1))
  call SaveReal(HY,h,6,((GetUnitX(SKE))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(SKE))*1.0))
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerRegisterUnitEvent(t,OTN,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func4173))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,3,(SGE))
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,.02,true)
  call TriggerRegisterUnitEvent(t,OTN,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,OTN,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func4174))
  call SaveUnitHandle(HY,h,589,(OTN))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,3,(SGE))
  call SaveReal(HY,h,6,((GetUnitX(SKE))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(SKE))*1.0))
  call SaveUnitHandle(HY,h,19,(d2))
  set t=null
  set SKE=null
  set d0=null
  set OTN=null
  set d1=null
  set d2=null
  set M1X=null
endfunction

function SupernovaAghFilter takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetOrderTargetUnit()
  if SGE!=null then
    if Func1474(SGE)then
      call InterruptUnitError(SKE,'n038')
    elseif GetUnitAbilityLevel(SGE,'A04R')==1 then
      call InterruptUnitError(SKE,'TX0W')
    endif
  endif
  set SKE=null
  set SGE=null
endfunction

function Func4179 takes nothing returns nothing
  call PreloadAbility('A1ZT')
  call ExecuteFunc("Func0965")
  call AddToPurgeList('B2L7','PRGE')
  call AddToPurgeList('B2W4','PRGE')
  call AddToPurgeList('B2W5','PRGE')
  call AddToPurgeList('B2W6','PRGE')
  call AddToPurgeList('A2L7','PRGE')
  call AddToPurgeList('A2W4','PRGE')
  call AddToPurgeList('A2W5','PRGE')
  call AddToPurgeList('A2W6','PRGE')
  call AddToPurgeList('A2O7','PRGE')
  call AddToPurgeList('B0GC','PRGE')
endfunction

function Func4180 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local real result=real111
  local real ZEE=real112
  local real ZWE=result+ZEE*GetUnitState(source,UNIT_STATE_MAX_LIFE)
  set ZWE=ZWE/5
  if IsUnitEnemy(source,GetOwningPlayer(unit247))then
    call DamageTarget(unit247,source,3,ZWE)
  else
    call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_LIFE)+ZWE*0.5)
  endif
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireRayTarget.mdx",source,"origin"))
  call TimedReveal(GetOwningPlayer(source),2,GetUnitX(unit247),GetUnitY(unit247),500)
  set source=null
endfunction

function Func4181 takes nothing returns boolean
  return AliveNonBuildOrMarker(GetFilterUnit())and Roshan!=GetFilterUnit()
endfunction

function Func4182 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer c=(LoadInteger(HY,h,34))
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real FOO=GetUnitFacing(SKE)
  local real O0N=FOO*bj_DEGTORAD
  local location B7R=GetUnitLoc(SKE)
  local real AHX=GetLocationZ(B7R)
  local location B8R=Location(GetUnitX(SKE)+real107*Cos(O0N),GetUnitY(SKE)+real107*Sin(O0N))
  local real O1N=GetLocationZ(B8R)
  local lightning l1=(LoadLightningHandle(HY,h,676))
  local lightning l2=(LoadLightningHandle(HY,h,677))
  local lightning l3=(LoadLightningHandle(HY,h,678))
  local lightning l4=(LoadLightningHandle(HY,h,679))
  local lightning l5=(LoadLightningHandle(HY,h,680))
  local real N4E=1
  local real x
  local real y
  local real r1
  local real O2N
  local real O3N
  local real O4N
  local real O5N
  local real O6N
  local real O7N
  local real O8N
  local real O9N
  local real RVN
  local real REN
  local real RXN
  local real RON
  local real RRN
  local real RIN
  local real RAN
  local real RNN
  local real RBN
  local real RCN
  local real RDN
  local real RFN
  local real RGN
  local real RHN
  local real RJN
  local real RKN
  local real RLN
  local real RMN
  local real RPN
  local real RQN
  local real RSN
  local real RTN
  local group g
  local real RUN
  local real RWN
  local integer i
  local real RYN
  local real RZN
  local boolean ZSE=false
  local boolean ZTE=false
  local real R_N
  local real R0N
  local real R1N
  local real R2N=(LoadReal(HY,h,688))
  local boolean ABO=(LoadBoolean(HY,h,689))
  local boolean RGI=(LoadBoolean(HY,h,672))
  local real R3N
  local ubersplat B2X
  local real R4N
  local real R5N=5
  if GetUnitCurrentOrder(SKE)==852001 then
    call DisableTrigger(t)
    call Func0656(SKE)
    call EnableTrigger(t)
  endif
  call RemoveLocation(B7R)
  call RemoveLocation(B8R)
  if IsUnitPaused(SKE)==false and(GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)then
    set x=GetUnitX(SKE)
    set y=GetUnitY(SKE)
    if GetIssuedOrderId()!=852490 and GetIssuedOrderId()!=852185 and GetIssuedOrderId()!=852600 then
      call DisableTrigger(t)
      call Func0656(SKE)
      call EnableTrigger(t)
    elseif GetIssuedOrderId()==852185 then
      if DistanceBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetOrderPointX(),GetOrderPointY())>1400 then
        call DisableTrigger(t)
        call Func0656(SKE)
        call EnableTrigger(t)
      elseif RAbsBJ(RAbsBJ( AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetOrderPointX(),GetOrderPointY()))-RAbsBJ(GetUnitFacing(SKE)))>30 then
        call DisableTrigger(t)
        call Func0656(SKE)
        call EnableTrigger(t)
      endif
    endif
    if GetIssuedOrderId()==851971 then
      if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
        set RUN=GetUnitX(GetOrderTargetUnit())
        set RWN=GetUnitY(GetOrderTargetUnit())
      else
        set RUN=GetOrderPointX()
        set RWN=GetOrderPointY()
      endif
      set RYN= AngleBetweenXY(RUN,RWN,x,y)
      if RYN<0 then
        set RYN=RYN+360
      endif
      set RZN=FOO-RYN
      if RZN<0 then
        set RZN=RZN+360
      endif
      if RZN<180 then
        set ZSE=true
      else
        set ZTE=true
      endif
      set R2N= AngleBetweenXY(RUN,RWN,x,y)+180
      call SaveReal(HY,h,688,((R2N)*1.0))
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT or GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(HY,(GetHandleId(SKE)),704))==-1 or c>=6.0/.02 or IsUnitDisabledSomehow(SKE)or IsUnitSilenced(SKE)then
    if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()=='A1Z3' or GetSpellAbilityId()=='A1RK' or GetSpellAbilityId()=='A315' or GetSpellAbilityId()=='A27H'))then
      call SaveInteger(HY,(GetHandleId(SKE)),4312,2)
      call Func0803(SKE)
      call SetUnitPathing2(SKE,true)
      call RemoveUnit(LoadUnitHandle(HY,h,0))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call UnitRemoveAbility(SKE,'A205')
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1Z3',false)
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A205',false)
      if(LoadInteger(HY,(GetHandleId(SKE)),704))==0 or(LoadInteger(HY,(GetHandleId(SKE)),704))=='A1YY' then
        call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1YY',true)
      endif
      call DestroyLightning(l1)
      call DestroyLightning(l2)
      call DestroyLightning(l3)
      call DestroyLightning(l4)
      call DestroyLightning(l5)
      call StopSound(sound047,false,true)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
    if GetIssuedOrderId()==String2OrderIdBJ("immolation")then
      set ABO=true
    endif
    if GetIssuedOrderId()==852178 then
      set ABO=false
    endif
    call SaveBoolean(HY,h,689,(ABO))
  else
    set RYN=FOO-R2N
    if RYN<-180 then
      set RYN=RYN+360
    elseif RYN>180 then
      set RYN=RYN-360
    endif
    set R3N=1.25
    if c<35 and RGI then
      set R3N=7
    endif
    if RYN<(-1*R3N)then
      set FOO=FOO+R3N
    elseif RYN>R3N then
      set FOO=FOO-R3N
    else
      set RGI=false
      call SaveBoolean(HY,h,672,(RGI))
      set FOO=R2N
    endif
    if((LoadInteger(HY,(GetHandleId(SKE)),4301))!=1)then
      call SetUnitFacing(SKE,FOO)
    endif
    set O0N=FOO*bj_DEGTORAD
    set c=c+1
    call SaveInteger(HY,h,34,(c))
    set r1=real107
    set x=GetUnitX(SKE)+50*Cos(O0N)
    set y=GetUnitY(SKE)+50*Sin(O0N)
    if ABO and IsUnitDisabledSomehow(SKE)==false then
      if(LoadInteger(HY,GetHandleId(SKE),4331)==1)then
        set R5N=R5N*2
      endif
      set R1N=O0N
      set R_N=SafeX50(GetUnitX(SKE)+R5N*Cos(R1N))
      set R0N=SafeY50(GetUnitY(SKE)+R5N*Sin(R1N))
      call KillTrees(R_N,R0N,200)
      call SetUnitX(SKE,R_N)
      call SetUnitY(SKE,R0N)
    endif
    call SetUnitState(SKE,UNIT_STATE_LIFE,GetUnitState(SKE,UNIT_STATE_LIFE)-GetUnitState(SKE,UNIT_STATE_LIFE)*0.06*0.02)
    call KillTrees(x,y,200)
    if ModuloInteger(c,10)==0 then
      set group038=GetAvailableGroup()
      set tt_unit1=SKE
      set i=0
      loop
        set RUN=x+i*50*Cos(O0N)
        set RWN=y+i*50*Sin(O0N)
        set g=GetAvailableGroup()
        call GroupEnumUnitsInRange(g,RUN,RWN,155,Condition(function Func4181))
        call GroupAddGroup(g,group038)
        call KillGroup(g)
        if ModuloInteger(i,3)==0 then
          call TimedReveal(GetOwningPlayer(SKE),2,RUN,RWN,225)
        endif
        set i=i+1
        exitwhen i*50>real107
      endloop
      set unit247=SKE
      set integer521=GetUnitAbilityLevel(SKE,'A1YY')
      set R4N=(I2R(c)/50.0)/6
      set real111=(5*integer521+5)+(5*integer521+5)*R4N
      set real112=(integer521*1.25+R4N*(integer521*1.25))/100
      call GroupRemoveUnit(group038,SKE)
      call ForGroup(group038,function Func4180)
      call KillGroup(group038)
      set g=null
      set group038=null
    endif
    if IsDead(SKE)==false then
      set O2N=x
      set O3N=y
      set O4N=AHX+200
      set O5N=O2N+r1*Cos(O0N)
      set O6N=O3N+r1*Sin(O0N)
      set O7N=O1N
      set O8N=x+real108*Cos((FOO-90)*bj_DEGTORAD)
      set O9N=y+real109*Cos((FOO-90)*bj_DEGTORAD)
      set RVN=AHX+200
      set REN=O8N+r1*Cos(O0N)
      set RXN=O9N+r1*Sin(O0N)
      set RON=O1N
      set RRN=x+real108*Cos((FOO+90)*bj_DEGTORAD)
      set RIN=y+real109*Cos((FOO+90)*bj_DEGTORAD)
      set RAN=AHX+200
      set RNN=RRN+r1*Cos(O0N)
      set RBN=RIN+r1*Sin(O0N)
      set RCN=O1N
      set RDN=x
      set RFN=y
      set RGN=AHX+200+real110
      set RHN=RDN+r1*Cos(O0N)
      set RJN=RFN+r1*Sin(O0N)
      set RKN=O1N
      set RLN=x
      set RMN=y
      set RPN=AHX+200-real110
      set RQN=RLN+r1*Cos(O0N)
      set RSN=RMN+r1*Sin(O0N)
      set RTN=O1N
      if ModuloInteger(c,10)==0 then
        set RUN=GetUnitX(SKE)+(real107)*Cos(O0N)
        set RWN=GetUnitY(SKE)+(real107)*Sin(O0N)
        call DestroyEffect(AddSpecialEffect("war3mapImported\\FireRayTarget.mdx",RUN,RWN))
        call SetSoundPosition(sound047,GetUnitX(SKE),GetUnitY(SKE),100)
        set RUN=GetUnitX(SKE)+(r1)*Cos(O0N)
        set RWN=GetUnitY(SKE)+(r1)*Sin(O0N)
        set B2X=Func0681(RUN,RWN,"SRAY",255,255,255,255,false,false)
        call Func0683(B2X,true)
        call Func0768(B2X,10)
        set B2X=null
      endif
      call MoveLightningEx(l1,false,O2N,O3N,O4N,O5N,O6N,O7N)
      call MoveLightningEx(l2,false,O8N,O9N,RVN,REN,RXN,RON)
      call MoveLightningEx(l3,false,RRN,RIN,RAN,RNN,RBN,RCN)
      call MoveLightningEx(l4,false,RDN,RFN,RGN,RHN,RJN,RKN)
      call MoveLightningEx(l5,false,RLN,RMN,RPN,RQN,RSN,RTN)
      if c==1 then
        call SetLightningColor(l1,1.00,1.00,1.00,N4E)
        call SetLightningColor(l2,1.00,1.00,1.00,N4E)
        call SetLightningColor(l3,1.00,1.00,1.00,N4E)
        call SetLightningColor(l4,1.00,1.00,1.00,N4E)
        call SetLightningColor(l5,1.00,1.00,1.00,N4E)
      endif
    endif
  endif
  set t=null
  set SKE=null
  set l1=null
  set l2=null
  set l3=null
  set l4=null
  set l5=null
  set B7R=null
  set B8R=null
  return false
endfunction

function Func4183 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real GXE= AngleBetweenXY(x,y,GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
  local real dx=SafeX50(x+real107*Cos(GXE))
  local real dy=SafeY50(y+real107*Sin(GXE))
  local lightning l1=AddLightning("SRAY",false,x,y,dx,dy)
  local lightning l2=AddLightning("SRAY",false,x,y,dx,dy)
  local lightning l3=AddLightning("SRAY",false,x,y,dx,dy)
  local lightning l4=AddLightning("SRAY",false,x,y,dx,dy)
  local lightning l5=AddLightning("SRAY",false,x,y,dx,dy)
  local unit D2O
  if GetUnitAbilityLevel(SKE,'A14K')>0 then
    set D2O=CreateUnit(GetOwningPlayer(SKE),'e00E',x,y,0)
    call UnitAddAbility2(D2O,'A14K')
    call SaveUnitHandle(HY,h,0,D2O)
    set D2O=null
  endif
  call SetUnitFacing(SKE,GXE*bj_RADTODEG)
  call StartSound(sound047)
  call SetSoundPosition(sound047,x,y,100)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4182))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveReal(HY,h,13,((GXE)*1.0))
  call SaveReal(HY,h,688,((GXE*bj_RADTODEG)*1.0))
  call SaveLightningHandle(HY,h,676,(l1))
  call SaveLightningHandle(HY,h,677,(l2))
  call SaveLightningHandle(HY,h,678,(l3))
  call SaveLightningHandle(HY,h,679,(l4))
  call SaveLightningHandle(HY,h,680,(l5))
  call SaveBoolean(HY,h,689,(false))
  call SaveBoolean(HY,h,672,(true))
  call SaveReal(HY,h,688,((GXE*bj_RADTODEG)*1.0))
  call SaveReal(HY,h,23,((x)*1.0))
  call SaveReal(HY,h,24,((y)*1.0))
  call Func0802(SKE)
  call SaveInteger(HY,(GetHandleId(SKE)),4312,1)
  call SetUnitPathing2(SKE,false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1Z3',true)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A205',true)
  call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1YY',false)
  call UnitAddAbility2(SKE,'A1Z3')
  call UnitAddAbility2(SKE,'A205')
  call TriggerEvaluate(t)
  set t=null
  set SKE=null
  set SKE=null
  set l1=null
  set l2=null
  set l3=null
  set l4=null
  set l5=null
endfunction

function Func4184 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=LoadInteger(HY,h,5)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(SGE,LoadInteger(HY,h,6))==0 or(TimerGetElapsed(GlobalTimer))>=(LoadReal(HY,(GetHandleId(SGE)),757))or IsMagicImmune(SGE)then
    call UnitRemoveAbility(SGE,LoadInteger(HY,h,6))
    call UnitRemoveAbility(SGE,LoadInteger(HY,h,6)+0x1000000)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
    call DamageTarget(u,SGE,1,20*QIE-10)
  endif
  set t=null
  set u=null
  set SGE=null
  return false
endfunction

function Func4185 takes nothing returns nothing
  local unit u=unit248
  local unit t=GetEnumUnit()
  local trigger tt
  local integer h
  local integer QIE=GetUnitAbilityLevel(u,'A1YX')
  local integer id
  call SaveReal(HY,GetHandleId(t),757,TimerGetElapsed(GlobalTimer)+4.)
  if GetUnitAbilityLevel(t,'A2L7')==0 and GetUnitAbilityLevel(t,'A2W5')==0 and GetUnitAbilityLevel(t,'A2W4')==0 and GetUnitAbilityLevel(t,'A2W6')==0 then
    set tt=CreateTrigger()
    set h=GetHandleId(tt)
    call TriggerRegisterTimerEvent(tt,0.25,true)
    call TriggerAddCondition(tt,Condition(function Func4184))
    call TriggerRegisterDeathEvent(tt,t)
    call SaveInteger(HY,h,5,QIE)
    call SaveUnitHandle(HY,h,2,(u))
    call SaveUnitHandle(HY,h,17,(t))
    if QIE==1 then
      set id='A2L7'
    elseif QIE==2 then
      set id='A2W5'
    elseif QIE==3 then
      set id='A2W4'
    elseif QIE==4 then
      set id='A2W6'
    endif
    call UnitAddAbility2(t,id)
    call SaveInteger(HY,h,6,id)
  endif
  set u=null
  set t=null
  set tt=null
endfunction

function Func4186 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  call ShowUnit(u,false)
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set u=null
  set t=null
endfunction

function Func4187 takes unit u,real d returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,d,false,function Func4186)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function Func4188 takes unit source,unit RCX,real result,unit M_X,unit M0X returns nothing
  local real ZEE=GetUnitX(RCX)
  local real ZWE=GetUnitY(RCX)
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set unit248=source
  call GroupEnumUnitsInRange(g,ZEE,ZWE,200,Condition(function Func0820))
  call ForGroup(g,function Func4185)
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",ZEE,ZWE))
  call KillUnit(RCX)
  call Func4187(RCX,1.)
  set g=null
endfunction

function Func4189 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),19))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),393))
  local real result=(LoadReal(HY,(ZAE),685))
  local real ZEE
  local real ZWE
  local real ZYE
  local real ICX
  local real N1X
  local real N2X=18
  local integer ZBE=GetUnitAbilityLevel(source,'A1YX')
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    set ZEE=GetUnitX(RCX)
    set ZWE=GetUnitY(RCX)
    call SaveReal(HY,(ZAE),47,((ZEE)*1.0))
    call SaveReal(HY,(ZAE),48,((ZWE)*1.0))
    call RemoveSavedHandle(HY,(ZAE),17)
    call SaveUnitHandle(HY,(ZAE),17,(null))
  elseif RCX==null then
    set ZEE=(LoadReal(HY,(ZAE),47))
    set ZWE=(LoadReal(HY,(ZAE),48))
  else
    set ZEE=GetUnitX(RCX)
    set ZWE=GetUnitY(RCX)
  endif
  set N1X= AngleBetweenXY(GetUnitX(M0X),GetUnitY(M0X),ZEE,ZWE)
  call SetUnitFacing(M0X,N1X)
  set ZYE=GetUnitX(M0X)+N2X*Cos(N1X*bj_DEGTORAD)
  set ICX=GetUnitY(M0X)+N2X*Sin(N1X*bj_DEGTORAD)
  call SetUnitX(M0X,ZYE)
  call SetUnitY(M0X,ICX)
  if DistanceBetweenXY(ZYE,ICX,ZEE,ZWE)<N2X*2 then
    call Func4188(source,M0X,result,M_X,RCX)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M0X=null
  set M_X=null
  return false
endfunction

function Func4190 takes unit source,unit RCX,unit M_X,real result,unit M0X returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local group g
  if source==M_X then
    call KillUnit(RCX)
    call ShowUnit(RCX,false)
  else
    call SetUnitVertexColor(RCX,255,255,255,255)
    call TriggerRegisterTimerEvent(RBX,0.02,true)
    call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
    call TriggerRegisterDeathEvent(RBX,M_X)
    call TriggerAddCondition(RBX,Condition(function Func4189))
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveUnitHandle(HY,(ZAE),17,(M_X))
    call SaveUnitHandle(HY,(ZAE),393,(RCX))
    call SaveReal(HY,(ZAE),47,((GetSpellTargetX())*1.0))
    call SaveReal(HY,(ZAE),48,((GetSpellTargetY())*1.0))
    call SaveReal(HY,(ZAE),685,((result)*1.0))
    call SaveUnitHandle(HY,(ZAE),19,(M0X))
  endif
  set RBX=null
endfunction

function Func4191 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local unit RCX=(LoadUnitHandle(HY,(ZAE),393))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),394))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),395))
  local unit M1X=(LoadUnitHandle(HY,(ZAE),396))
  local integer ZBE=GetUnitAbilityLevel(source,'A1YX')
  local real ZWE=GetUnitFacing(source)
  local real ZYE
  local real ICX
  local group g
  local group IBI
  local real N1X=-1*360*0.02/4
  local real N2X
  local real N3X
  local real N4X=(LoadReal(HY,(ZAE),685))
  local real N5X
  local unit M2X=(LoadUnitHandle(HY,(ZAE),19))
  local integer ZCE=800
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A1Z2' then
      if IsDead(RCX)==false then
        call Func4190(source,RCX,GetSpellTargetUnit(),N4X,M2X)
        call RemoveSavedHandle(HY,(ZAE),393)
      elseif IsDead(M_X)==false then
        call Func4190(source,M_X,GetSpellTargetUnit(),N4X,M2X)
        call RemoveSavedHandle(HY,(ZAE),394)
      elseif IsDead(M0X)==false then
        call Func4190(source,M0X,GetSpellTargetUnit(),N4X,M2X)
        call RemoveSavedHandle(HY,(ZAE),395)
      elseif IsDead(M1X)==false then
        call Func4190(source,M1X,GetSpellTargetUnit(),N4X,M2X)
        call RemoveSavedHandle(HY,(ZAE),396)
        call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1Z2',false)
        if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A1YX' then
          call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1YX',true)
        endif
        call FlushChildHashtable(HY,(ZAE))
        call CleanTrigger(RBX)
      endif
    elseif GetSpellAbilityId()=='A1RK' or GetSpellAbilityId()=='A315' then
      if RCX!=null and IsDead(RCX)==false then
        call Func4190(source,RCX,source,N4X,M2X)
      endif
      if M_X!=null and IsDead(M_X)==false then
        call Func4190(source,M_X,source,N4X,M2X)
      endif
      if M0X!=null and IsDead(M0X)==false then
        call Func4190(source,M0X,source,N4X,M2X)
      endif
      if M1X!=null and IsDead(M1X)==false then
        call Func4190(source,M1X,source,N4X,M2X)
      endif
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1Z2',false)
      if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A1YX' then
        call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1YX',true)
      endif
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    endif
  else
    set QIE=QIE+1
    call SaveInteger(HY,(ZAE),34,(QIE))
    if RCX!=null and IsDead(RCX)==false then
      set N3X=360*4/4.0
      set N2X=N3X+N1X*QIE
      set ZYE=SafeX50(result+200*Cos(N2X*bj_DEGTORAD))
      set ICX=SafeY50(ZEE+200*Sin(N2X*bj_DEGTORAD))
      call SetUnitFacing(RCX,N2X-90)
      call SetUnitX(RCX,ZYE)
      call SetUnitY(RCX,ICX)
    endif
    if M_X!=null and IsDead(M_X)==false then
      set N3X=360*3/4.0
      set N2X=N3X+N1X*QIE
      set ZYE=SafeX50(result+200*Cos(N2X*bj_DEGTORAD))
      set ICX=SafeY50(ZEE+200*Sin(N2X*bj_DEGTORAD))
      call SetUnitFacing(M_X,N2X-90)
      call SetUnitX(M_X,ZYE)
      call SetUnitY(M_X,ICX)
    endif
    if M0X!=null and IsDead(M0X)==false then
      set N3X=360*2/4.0
      set N2X=N3X+N1X*QIE
      set ZYE=SafeX50(result+200*Cos(N2X*bj_DEGTORAD))
      set ICX=SafeY50(ZEE+200*Sin(N2X*bj_DEGTORAD))
      call SetUnitFacing(M0X,N2X-90)
      call SetUnitX(M0X,ZYE)
      call SetUnitY(M0X,ICX)
    endif
    if M1X!=null and IsDead(M1X)==false then
      set N3X=360*1/4.0
      set N2X=N3X+N1X*QIE
      set ZYE=SafeX50(result+200*Cos(N2X*bj_DEGTORAD))
      set ICX=SafeY50(ZEE+200*Sin(N2X*bj_DEGTORAD))
      call SetUnitFacing(M1X,N2X-90)
      call SetUnitX(M1X,ZYE)
      call SetUnitY(M1X,ICX)
    endif
    if QIE>ZCE or GetTriggerEventId()==EVENT_WIDGET_DEATH then
      if RCX!=null and IsDead(RCX)==false then
        call Func4190(source,RCX,source,N4X,M2X)
      endif
      if M_X!=null and IsDead(M_X)==false then
        call Func4190(source,M_X,source,N4X,M2X)
      endif
      if M0X!=null and IsDead(M0X)==false then
        call Func4190(source,M0X,source,N4X,M2X)
      endif
      if M1X!=null and IsDead(M1X)==false then
        call Func4190(source,M1X,source,N4X,M2X)
      endif
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1Z2',false)
      if(LoadInteger(HY,(GetHandleId(source)),704))==0 or(LoadInteger(HY,(GetHandleId(source)),704))=='A1YX' then
        call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1YX',true)
      endif
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    else
      set N4X=RMinBJ(0.25+0.75*(I2R(QIE)/500.0),1)
      call SaveReal(HY,(ZAE),685,((N4X)*1.0))
      set N5X=0.25+(1-0.2)*2.5
      call SetUnitScale(RCX,N5X,N5X,N5X)
      call SetUnitScale(M_X,N5X,N5X,N5X)
      call SetUnitScale(M0X,N5X,N5X,N5X)
      call SetUnitScale(M1X,N5X,N5X,N5X)
      if QIE==(ZCE-175)then
        call Func0748(sound048,GetOwningPlayer(source))
      endif
      if QIE>(ZCE-200)then
        if ModuloInteger(QIE,10)==0 or ModuloInteger(QIE,10)==1 or ModuloInteger(QIE,10)==2 or ModuloInteger(QIE,10)==3 or ModuloInteger(QIE,10)==4 then
          call SetUnitVertexColor(RCX,255,0,0,255)
          call SetUnitVertexColor(M_X,255,0,0,255)
          call SetUnitVertexColor(M0X,255,0,0,255)
          call SetUnitVertexColor(M1X,255,0,0,255)
        else
          call SetUnitVertexColor(RCX,255,255,255,255)
          call SetUnitVertexColor(M_X,255,255,255,255)
          call SetUnitVertexColor(M0X,255,255,255,255)
          call SetUnitVertexColor(M1X,255,255,255,255)
        endif
      endif
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  set M2X=null
  return false
endfunction

function Func4192 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE
  local real ZYE
  local unit RCX
  local unit M_X
  local unit M0X
  local unit M1X
  local real ICX=GetUnitFacing(source)
  local unit M2X=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call SetUnitState(source,UNIT_STATE_LIFE,GetUnitState(source,UNIT_STATE_LIFE)-GetUnitState(source,UNIT_STATE_LIFE)*0.20)
  call UnitAddAbility2(source,'A1Z2')
  call UnitMakeAbilityPermanent(source,true,'A1Z2')
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1Z2',true)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1YX',false)
  set ZWE=GetUnitX(source)+200*Cos(bj_DEGTORAD*360*4/4.0*-1.0)
  set ZYE=GetUnitY(source)+200*Sin(bj_DEGTORAD*360*4/4.0*-1.0)
  set RCX=CreateUnit(GetOwningPlayer(source),'h0CU',ZWE,ZYE,360*4/4.0*-1.0)
  set ZWE=GetUnitX(source)+200*Cos(bj_DEGTORAD*360*3/4.0*-1.0)
  set ZYE=GetUnitY(source)+200*Sin(bj_DEGTORAD*360*3/4.0*-1.0)
  set M_X=CreateUnit(GetOwningPlayer(source),'h0CU',ZWE,ZYE,360*3/4.0*-1.0)
  set ZWE=GetUnitX(source)+200*Cos(bj_DEGTORAD*360*2/4.0*-1.0)
  set ZYE=GetUnitY(source)+200*Sin(bj_DEGTORAD*360*2/4.0*-1.0)
  set M0X=CreateUnit(GetOwningPlayer(source),'h0CU',ZWE,ZYE,360*2/4.0*-1.0)
  set ZWE=GetUnitX(source)+200*Cos(bj_DEGTORAD*360*1/4.0*-1.0)
  set ZYE=GetUnitY(source)+200*Sin(bj_DEGTORAD*360*1/4.0*-1.0)
  set M1X=CreateUnit(GetOwningPlayer(source),'h0CU',ZWE,ZYE,360*1/4.0*-1.0)
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerAddCondition(RBX,Condition(function Func4191))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),393,(RCX))
  call SaveUnitHandle(HY,(ZAE),394,(M_X))
  call SaveUnitHandle(HY,(ZAE),395,(M0X))
  call SaveUnitHandle(HY,(ZAE),396,(M1X))
  call SaveUnitHandle(HY,(ZAE),19,(M2X))
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  set M2X=null
  set RBX=null
endfunction

function Func4193 takes unit SKE,unit SGE,real dmg returns nothing
  local boolean b=false
  if IsUnitInvulnerable(SGE)and SGE==LoadUnitHandle(HY,GetHandleId(SKE),673)then
    call SetUnitInvulnerable(SGE,false)
    set b=true
  endif
  call DamageTarget(SKE,SGE,1,dmg)
  if b and IsDead(SGE)==false then
    call SetUnitInvulnerable(SGE,true)
  endif
endfunction

function Func4194 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer count=LoadInteger(HY,(GetHandleId(SGE)),627)
  local integer QIE=GetUnitAbilityLevel(SKE,'A1S4')
  local real dmg=(5+QIE*15)*Pow(2,IMinBJ(count,5)-1)
  local boolean IAN=LoadBoolean(HY,h,0)
  local boolean FEX=false
  local eventid IWO=GetTriggerEventId()
  local boolean INN=IAN or IWO!=EVENT_UNIT_SPELL_EFFECT or GetSpellAbilityId()=='A1S9'
  local boolean b
  if count==0 then
    set dmg=0
  else
    set dmg=dmg+IMaxBJ(count-5,0)*50
  endif
  if INN then
    set FEX=true
    call DisableTrigger(t)
  endif
  if dmg>0 and IWO!=EVENT_WIDGET_DEATH and INN then
    set FEX=true
    call DisableTrigger(t)
    call Func4193(SKE,SGE,dmg)
    call TextTagOnUnit(I2S(R2I(dmg))+"!",2,SGE,0.025,100,0,200,216,Func0590(SGE)or PlayerObserver)
  endif
  if FEX then
    call UnitRemoveAbility(SGE,'A3RS')
    call UnitRemoveAbility(SGE,'a3RS')
    call DestroyTimer(LoadTimerHandle(HY,h,1))
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call RemoveSavedInteger(HY,GetHandleId(SGE),627)
    call RemoveSavedHandle(HY,GetHandleId(SGE),'A3RS')
  endif
  set IWO=null
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4195 takes unit SKE,unit SGE returns nothing
  local trigger t
  local integer h
  local integer QIE=GetUnitAbilityLevel(SKE,'A1S4')
  local integer hu=GetHandleId(SGE)
  local timer tt
  local boolean b=false
  if(LoadInteger(HY,(hu),627))>0 then
    call SaveInteger(HY,hu,627,LoadInteger(HY,hu,627)+1)
    set h=GetHandleId(LoadTriggerHandle(HY,hu,'A3RS'))
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,(h),2,(SKE))
    call SaveUnitHandle(HY,(h),17,(SGE))
    call SaveInteger(HY,(hu),627,1)
    call UnitAddAbility2(SGE,'A3RS')
    set tt=CreateTimer()
    call SaveTriggerHandle(HY,hu,'A3RS',t)
    call SaveTimerHandle(HY,h,1,tt)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_SPELL_EFFECT)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerAddCondition(t,Condition(function Func4194))
  endif
  call TimerStart(LoadTimerHandle(HY,h,1),10.,false,null)
  call TextTagOnUnit("+"+I2S((LoadInteger(HY,(hu),627))),3,SGE,0.025,100,0,200,216,Func0590(SGE)or PlayerObserver)
  call Func4193(SKE,SGE,50)
  set t=null
  set tt=null
endfunction

function Func4196 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group039)==false then
    call GroupAddUnit(group039,GetEnumUnit())
    call Func4195(unit249,GetEnumUnit())
  endif
endfunction

function Func4197 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit d=(LoadUnitHandle(HY,(h),45))
  local integer c=GetTriggerEvalCount(t)
  local real x=SafeX50(GetUnitX(d)+20*LoadReal(HY,h,138))
  local real y=SafeY50(GetUnitY(d)+20*LoadReal(HY,h,139))
  local group g
  local group gg=(LoadGroupHandle(HY,(h),133))
  local unit u
  if c==LoadInteger(HY,h,11)then
    call KillGroup(gg)
    call KillUnit(d)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set tt_unit1=SKE
    set unit249=SKE
    set group039=gg
    call SetUnitX(d,x)
    call SetUnitY(d,y)
    set g=GetAvailableGroup()
    set u=LoadUnitHandle(HY,GetHandleId(SKE),673)
    call GroupEnumUnitsInRange(g,x,y,215,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    if u!=null and IsUnitInRangeXY(u,x,y,220)then
      call GroupAddUnit(g,u)
      set u=null
    endif
    call ForGroup(g,function Func4196)
    call KillGroup(g)
  endif
  set t=null
  set SKE=null
  set d=null
  set g=null
  set gg=null
  return false
endfunction

function Func4198 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real tx=GetSpellTargetX()
  local real ty=GetSpellTargetY()
  local real a= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),tx,ty)*bj_DEGTORAD
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h0C2',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
  local integer XXO=75
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set XXO=XXO+10
  endif
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func4197))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveInteger(HY,h,11,XXO)
  call SaveUnitHandle(HY,(h),45,(d))
  call SaveReal(HY,(h),137,a)
  call SaveReal(HY,(h),139,Sin(a))
  call SaveReal(HY,(h),138,Cos(a))
  call SaveGroupHandle(HY,(h),133,(GetAvailableGroup()))
  call UnitAddAbility2(SKE,'A1S9')
  set t=null
  set SKE=null
  set d=null
endfunction

function Func4199 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local unit IFN=GetSummonedUnit()
  if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SUMMON then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetUnitAbilityLevel(IFN,'B0DA')>0 and GetOwningPlayer(GetSummoningUnit())==GetOwningPlayer(SKE)then
    if IsUnitAlly(SGE,GetOwningPlayer(SKE))then
      call SelectUnitAddForPlayer(IFN,GetOwningPlayer(SKE))
    else
      call IssueTargetOrder(IFN,"attack",SGE)
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  set IFN=null
  return false
endfunction

function Func4200 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local integer QIE=LoadInteger(HY,h,5)
  call UnitRemoveAbility(SGE,'A3TN')
  call Func0234(SGE)
  call DestroyEffect(LoadEffectHandle(HY,(h),32))
  call RemoveSavedInteger(HY,(GetHandleId(SGE)),4293)
  call SetUnitInvulnerable(SGE,false)
  call ShowUnit(SGE,true)
  call RemoveSavedHandle(HY,(GetHandleId(SKE)),673)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    call SelectUnitAddForPlayer(SGE,GetOwningPlayer(SGE))
    call PlaySoundAtPos(sound043,GetUnitX(SGE),GetUnitY(SGE))
    call UnitAddAbility2(d,'A1S5')
    call SetUnitAbilityLevel(d,'A1S5',QIE)
    call SaveUnitHandle(HY,GetHandleId(d),'ilsr',SGE)
    call IssueTargetOrderByIdFuckingEx(d,852274,SGE,true)
    call SaveInteger(HY,GetHandleId(unit004),'ills','B0DA')
    if IsUnitAlly(SGE,GetOwningPlayer(SKE))then
      call SelectUnitAddForPlayer(unit004,GetOwningPlayer(SKE))
    else
      call IssueTargetOrderByIdFuckingEx(unit004,851983,SGE,false)
    endif
    call IssueTargetOrderByIdFuckingEx(d,852274,SGE,true)
    call SaveInteger(HY,GetHandleId(unit004),'ills','B0DA')
    if IsUnitAlly(SGE,GetOwningPlayer(SKE))then
      call SelectUnitAddForPlayer(unit004,GetOwningPlayer(SKE))
    else
      call IssueTargetOrderByIdFuckingEx(unit004,851983,SGE,false)
    endif
  endif
  call UnitRemoveAbility(SGE,'A3KR')
  set t=null
  set d=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4201 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local integer QIE=LoadInteger(HY,h,0)
  local trigger tt=CreateTrigger()
  local integer ht=GetHandleId(tt)
  local unit FVI=CreateUnit(GetOwningPlayer(SGE),'o019',GetUnitX(SGE),GetUnitY(SGE),0)
  local unit d
  call SetUnitVertexColor(FVI,0,0,0,0)
  call UnitApplyTimedLife(FVI,'BTLF',2.6)
  if IsUnitAlly(SGE,GetOwningPlayer(SKE))==false then
    set FVI=CreateUnit(GetOwningPlayer(SKE),'o019',GetUnitX(SGE),GetUnitY(SGE),0)
    call SetUnitVertexColor(FVI,0,0,0,0)
    call UnitApplyTimedLife(FVI,'BTLF',2.6)
  endif
  call SetUnitInvulnerable(SGE,true)
  call UnitAddAbility2(SGE,'A3TN')
  call IssueImmediateOrderByIdExFunc(SGE,851972)
  call Func0233(SGE)
  call ShowUnit(SGE,false)
  call SaveEffectHandle(HY,(ht),32,(AddSpecialEffect("war3mapImported\\WILLTHEALMIGHTY-Void5.mdx",GetUnitX(SGE),GetUnitY(SGE))))
  call SaveUnitHandle(HY,(ht),2,(SKE))
  call SaveUnitHandle(HY,(ht),17,(SGE))
  call TriggerRegisterTimerEvent(tt,2.5,false)
  call TriggerRegisterDeathEvent(tt,SGE)
  call TriggerAddCondition(tt,Condition(function Func4200))
  call SaveUnitHandle(HY,(GetHandleId(SKE)),673,(SGE))
  call SaveInteger(HY,(GetHandleId(SGE)),4293,1)
  call SaveInteger(HY,ht,5,QIE)
  set SKE=null
  set SGE=null
  set tt=null
  set FVI=null
  set t=null
  call FlushChildHashtable(HY,h)
endfunction

function Func4202 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer h=DelayedCallBack(0,function Func4201)
  local integer QIE=GetUnitAbilityLevel(SKE,'A1S8')
  if GetUnitTypeId(SKE)=='e00E' then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),0)
  endif
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveUnitHandle(HY,h,1,SGE)
  call SaveInteger(HY,h,0,QIE)
  set SKE=null
  set SGE=null
endfunction

function Func4203 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or IsBlocked(GetSpellTargetUnit())==false then
    call Func4202()
  endif
endfunction

function Func4204 takes nothing returns nothing
endfunction

function Func4205 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local real FRX=LoadReal(HY,h,5)
  local unit SGE=LoadUnitHandle(HY,h,1)
  call UnitRemoveAbility(SGE,'A3TO')
  call UnitRemoveAbility(SGE,'a3TO')
  call Func0670(SGE,-LoadReal(HY,h,5))
  call RemoveSavedHandle(HY,GetHandleId(SGE),'A3TO')
  call PauseTimer(LoadTimerHandle(HY,h,10))
  call DestroyTimer(LoadTimerHandle(HY,h,10))
  call FlushChildHashtable(HY,h)
  call CleanTrigger(t)
  set t=null
  set SGE=null
endfunction

function Func4206 takes unit u,unit SGE,integer QIE returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(SGE)
  local timer tt
  local real FRX=0.
  local real IMN=0.1*QIE+0.1
  if HaveSavedHandle(HY,hu,'A3TO')then
    set t=LoadTriggerHandle(HY,hu,'A3TO')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,10)
    set FRX=LoadReal(HY,h,5)
  else
    set t=CreateTrigger()
    call SaveTriggerHandle(HY,hu,'A3TO',t)
    set h=GetHandleId(t)
    call FlushChildHashtable(HY,h)
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,10,tt)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerRegisterDeathEvent(t,SGE)
    call SaveUnitHandle(HY,h,0,u)
    call SaveUnitHandle(HY,h,1,SGE)
    call TriggerAddCondition(t,Condition(function Func4205))
  endif
  call TimerStart(tt,12,false,null)
  if FRX!=IMN then
    call Func0670(SGE,IMN-FRX)
  endif
  call SaveReal(HY,h,5,IMN)
  call UnitAddAbility2(SGE,'A3TO')
  set t=null
  set tt=null
endfunction

function Func4207 takes nothing returns nothing
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local group g=GetAvailableGroup()
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A1SB')
  local unit SGE
  local trigger t
  local integer h
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,x,y,475,Condition(function Func0821))
  set SGE=(LoadUnitHandle(HY,(GetHandleId(u)),673))
  if SGE!=null then
    if DistanceBetweenXY(GetUnitX(SGE),GetUnitY(SGE),x,y)<475 and IsUnitEnemy(SGE,GetOwningPlayer(u))then
      call GroupAddUnit(g,SGE)
    endif
  endif
  set SGE=GroupPickRandomUnit(g)
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffect("war3mapImported\\Desecrate.mdx",x,y))
  if SGE!=null then
    call Func4206(u,SGE,QIE)
  endif
  set g=null
  set u=null
  set SGE=null
  set t=null
endfunction

function Func4208 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  call Func4193(udg_Hero[GetPlayerId(GetOwningPlayer(SKE))],LoadUnitHandle(HY,h,17),4*(25+25*GetUnitAbilityLevel(SKE,'A1SA')))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set SKE=null
  return false
endfunction

function Func4209 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,5,false)
  call TriggerAddCondition(t,Condition(function Func4208))
  call SaveUnitHandle(HY,h,2,GetTriggerUnit())
  call SaveUnitHandle(HY,h,17,GetSpellTargetUnit())
  set t=null
endfunction

function Func4210 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer ms=LoadInteger(HY,h,0)
  local integer F4X=LoadInteger(HY,h,1)
  local unit SGE=LoadUnitHandle(HY,h,0)
  local unit SKE=LoadUnitHandle(HY,h,1)
  local integer QIE=LoadInteger(HY,h,2)
  local integer ITN
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)==F4X then
    if ms>0 then
      call Stat_Sub(SGE,ms,"-MS")
    endif
    if IsDead(SGE)==false then
      if(LoadInteger(HY,GetHandleId(SGE),4293)==1)then
        call SetUnitInvulnerable(SGE,false)
      endif
      call DamageTarget(SKE,SGE,1,4*(25+25*QIE))
      if(LoadInteger(HY,GetHandleId(SGE),4293)==1)then
        call SetUnitInvulnerable(SGE,true)
      endif
    endif
    call UnitRemoveAbility(SGE,'A3JY')
    call UnitRemoveAbility(SGE,'B0DB')
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  else
    set ITN=LoadInteger(HY,h,3)
    if ITN<=ms then
      call Stat_Sub(SGE,ITN,"-MS")
      call SaveInteger(HY,h,0,ms-ITN)
    else
    endif
  endif
  set SGE=null
  set SKE=null
  set t=null
endfunction

function Func4211 takes unit SKE,unit SGE,integer QIE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real FGE=5./(QIE*1.)
  local integer perlvl
  if QIE==1 then
    call SaveInteger(HY,h,3,20)
    call SaveInteger(HY,h,1,5)
    call TriggerRegisterTimerEvent(t,1.,true)
  elseif QIE==2 then
    call SaveInteger(HY,h,3,33)
    call SaveInteger(HY,h,1,3)
    call TriggerRegisterTimerEvent(t,1.66,true)
  elseif QIE==3 then
    call SaveInteger(HY,h,3,50)
    call SaveInteger(HY,h,1,2)
    call TriggerRegisterTimerEvent(t,2.5,true)
  endif
  call PurgingTriggered(SGE,true)
  call UnitAddAbility2(SGE,'A3JY')
  call Stat_Add(SGE,100,"-MS")
  call SaveInteger(HY,h,0,100)
  call SaveInteger(HY,h,2,QIE)
  call TriggerAddCondition(t,Condition(function Func4210))
  call SaveUnitHandle(HY,h,0,SGE)
  call SaveUnitHandle(HY,h,1,SKE)
  call TriggerRegisterDeathEvent(t,SGE)
  set t=null
endfunction

function Func4212 takes nothing returns nothing
  if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and IsBlocked(GetSpellTargetUnit())==false then
    call Func4209()
  endif
endfunction

function Func4213 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local unit d
  local integer QIE=GetUnitAbilityLevel(SKE,'A31F')+GetUnitAbilityLevel(SKE,'A31G')
  if true or IsHeroUnitId(GetUnitTypeId(SGE))==false then
    set d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
    call SaveBoolean(HY,GetHandleId(d),'REFL',true)
    call SaveUnitHandle(HY,GetHandleId(d),'REFL',SKE)
    call UnitAddAbility(d,'A1SA')
    call SetUnitAbilityLevel(d,'A1SA',QIE)
    call IssueTargetOrder(d,"purge",SGE)
    set d=null
  else
    call Func4211(SKE,SGE,QIE)
  endif
  if GetUnitAbilityLevel(SKE,'A31G')>0 then
    call Break_Main(SGE,5.)
  endif
  set SKE=null
  set SGE=null
endfunction

function Func4214 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,0))
  local real WNE=(LoadReal(HY,h,0))
  local integer O6O=(LoadInteger(HY,(GetHandleId(u)),801))
  local group g
  local real cd=40.
  if GetUnitAbilityLevel(u,'A39S')==1 then
    set cd=cd*(100.-25*1.)/100.
  endif
  if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
    if(GetSpellAbilityId()=='A31G')and O6O<=0 and GetUnitTypeId(GetTriggerUnit())!='e00E' then
      call InterruptUnitError(u,'TX0U')
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if(GetSpellAbilityId()=='A31G')and GetUnitTypeId(GetTriggerUnit())!='e00E' then
      call SaveInteger(HY,GetHandleId(u),801,O6O-1)
      call Func0458(u,O6O,false)
    endif
    if(GetSpellAbilityId()=='A31G'or GetSpellAbilityId()=='A31F')and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and IsBlocked(GetSpellTargetUnit())==false then
      call Func4213()
    endif
  elseif GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if O6O<3 then
      set WNE=WNE-0.2
      if WNE<=0. or boolean147 then
        call SaveInteger(HY,GetHandleId(u),801,O6O+1)
        call Func0458(u,O6O,true)
        call SaveReal(HY,h,0,cd)
      else
        call SaveReal(HY,h,0,WNE*1.0)
      endif
    elseif GetUnitAbilityLevel(u,'A31G')>0 and GetUnitAbilityLevel(u,integers024[3])==0 then
      call Func0458(u,4,false)
    endif
  endif
  set u=null
  set t=null
  return false
endfunction

function Func4215 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterUnitEvent(t,tt_unit1,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(t,tt_unit1,EVENT_UNIT_SPELL_CAST)
  call TriggerAddCondition(t,Condition(function Func4214))
  call SaveUnitHandle(HY,GetHandleId(t),0,tt_unit1)
  call SaveReal(HY,GetHandleId(t),0,40.)
  call SaveInteger(HY,GetHandleId(tt_unit1),801,3)
  call SaveTriggerHandle(HY,GetHandleId(tt_unit1),801,t)
  set t=null
endfunction

function Func4216 takes unit YCI,unit sd returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterUnitEvent(t,YCI,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(t,YCI,EVENT_UNIT_SPELL_CAST)
  call TriggerAddCondition(t,Condition(function Func4214))
  call SaveUnitHandle(HY,GetHandleId(t),0,YCI)
  call SaveReal(HY,GetHandleId(t),0,40.)
  call SaveInteger(HY,GetHandleId(YCI),801,3)
  call SaveTriggerHandle(HY,GetHandleId(YCI),801,t)
  call SaveBoolean(HY,GetHandleId(YCI),'A31F',true)
  set t=null
endfunction

function Func4217 takes unit WXE,unit SGE returns nothing
  local integer QIE=GetUnitAbilityLevel(WXE,'A1SP')
  if QIE>0 then
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(WXE))],SGE,1,2+5.*QIE)
    if GetUnitAbilityLevel(SGE,'B1SP')>0 then
      call UnitRemoveAbility(SGE,'B1SP')
    endif
  endif
endfunction

function Func4218 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>3/0.05 then
    call UnitRemoveAbility(LoadUnitHandle(HY,h,2),'A1SP')
    call KillUnit(LoadUnitHandle(HY,h,19))
    call CleanTrigger(t)
    call FlushChildHashtable(HY,h)
  else
    call SetUnitX(LoadUnitHandle(HY,h,19),GetUnitX(LoadUnitHandle(HY,h,2)))
    call SetUnitY(LoadUnitHandle(HY,h,19),GetUnitY(LoadUnitHandle(HY,h,2)))
    call SetUnitFlyHeight(LoadUnitHandle(HY,h,19),GetUnitFlyHeight(LoadUnitHandle(HY,h,2)),0)
  endif
  set t=null
  return false
endfunction

function Func4219 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local unit d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  call DummyDamageTracking(10)
  call UnitAddAbility2(d,'A1SP')
  call SetUnitAbilityLevel(d,'A1SP',GetUnitAbilityLevel(u,'A1SO'))
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func4218))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,19,d)
  set t=null
  set d=null
  set u=null
endfunction

function Func4220 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer c=GetTriggerEvalCount(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=(LoadUnitHandle(HY,h,45))
  local real nx
  local real ny
  local real x
  local real y
  local real I2N=GetUnitX(d)
  local real I3N=GetUnitY(d)
  local real GXE= AngleBetweenXY(I2N,I3N,GetUnitX(SGE),GetUnitY(SGE))*bj_DEGTORAD
  local integer QIE=GetUnitAbilityLevel(SKE,'A1SQ')
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call UnitShareVision(d,GetOwningPlayer(SGE),false)
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if GetTriggerUnit()!=d then
      call KillUnit(d)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    call UnitRemoveBuffs(d,true,true)
  elseif c<3/0.02 then
    call SetUnitFacing(d,GXE*bj_RADTODEG)
    call ResetUnitLookAt(d)
    call SetUnitLookAt(d,"head",d,0,270,270-9*c/5)
    if c==2/0.02 then
      call SetUnitAnimation(d,"stand")
    endif
  else
    call ResetUnitLookAt(d)
    if c==4/0.02 then
      call UnitShareVision(d,GetOwningPlayer(SGE),true)
    endif
    call SetUnitFacing(d,GXE*bj_RADTODEG)
    set nx=I2N+(280+real113*c*0.02)*0.02*Cos(GXE)
    set ny=I3N+(280+real113*c*0.02)*0.02*Sin(GXE)
    call SetUnitPosition(d,nx,ny)
    call SaveReal(HY,h,23,((nx)*1.0))
    call SaveReal(HY,h,24,((ny)*1.0))
    if DistanceBetweenXY(nx,ny,GetUnitX(SGE),GetUnitY(SGE))<20 then
      set x=RMinBJ(DistanceBetweenXY(nx,ny,(LoadReal(HY,h,6)),(LoadReal(HY,h,7))),1500)
      set y=x/1500*(125*GetUnitAbilityLevel(SKE,'A1SQ'))
      set y=RMaxBJ(y,50)
      call DestroyEffect(LoadEffectHandle(HY,h,32))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call KillUnit(d)
      call DamageTarget(SKE,SGE,1,y)
      call StunTargetEx(SGE,2+0.2*QIE,false)
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  set d=null
  return false
endfunction

function Func4221 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real GXE= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetUnitX(SGE),GetUnitY(SGE))*bj_DEGTORAD
  local real x=SafeX50(GetUnitX(SKE)+150*Cos(GXE))
  local real y=SafeY50(GetUnitY(SKE)+150*Sin(GXE))
  local integer QIE=GetUnitAbilityLevel(SKE,'A1SQ')
  local unit d
  local integer id
  local string s="effects\\Snipe Target.mdx"
  if IsPlayerAlly(LocalPlayer,GetOwningPlayer(SKE))==false and PlayerObserver==false then
    set s=""
  endif
  if QIE==1 then
    set id='h0CG'
  elseif QIE==2 then
    set id='h0C1'
  elseif QIE==3 then
    set id='h0CF'
  elseif QIE==4 then
    set id='h0CH'
  endif
  set d=CreateUnit(GetOwningPlayer(SKE),id,x,y,GXE*bj_RADTODEG)
  call UnitRemoveAbility(d,'Amov')
  call SetUnitAnimation(d,"birth")
  call SetUnitLookAt(d,"head",d,0,0,270)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterDeathEvent(t,d)
  call TriggerRegisterUnitEvent(t,d,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,d,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func4220))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,45,(d))
  call SaveReal(HY,h,6,((GetUnitX(SKE))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(SKE))*1.0))
  call SaveReal(HY,h,23,((GetUnitX(d))*1.0))
  call SaveReal(HY,h,24,((GetUnitY(d))*1.0))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget(s,SGE,"overhead")))
  set t=null
  set SGE=null
  set SKE=null
  set d=null
endfunction

function Func4222 takes nothing returns nothing
  local integer QIE=GetUnitAbilityLevel(unit250,'A1T5')
  if IsUnitInvulnerable(GetEnumUnit())then
    return
  endif
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(unit250,'A235')
  endif
  call UnitAddAbilityTimedExF(GetEnumUnit(),'A1T3',1,4,'B0DE')
  call DamageTarget(unit250,GetEnumUnit(),1,QIE*75+125)
endfunction

function Func4223 takes nothing returns nothing
  local integer QIE=GetUnitAbilityLevel(unit250,'A1T5')
  local boolean ZSE=false
  if IsUnitInvulnerable(GetEnumUnit())then
    return
  endif
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(unit250,'A235')
    set ZSE=true
  endif
  call UnitAddAbilityTimedExF(GetEnumUnit(),'A1ST',1,4,'B0DG')
  if ZSE then
    call DamageTarget(unit250,GetEnumUnit(),1,QIE*50+50+75)
  else
    call DamageTarget(unit250,GetEnumUnit(),1,QIE*50+50)
  endif
endfunction

function Func4224 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local group g
  local integer QIE=GetTriggerEvalCount(RBX)
  local fogmodifier A3X=(LoadFogModifierHandle(HY,(ZAE),42))
  if QIE==1 then
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",source,"chest"))
  elseif QIE==2 then
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",source,"chest"))
  elseif QIE==3 then
    call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",result,ZEE))
  elseif QIE==4 then
    set g=GetAvailableGroup()
    set tt_unit1=source
    set unit250=source
    call GroupEnumUnitsInRange(g,result,ZEE,625,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func4222)
    call KillGroup(g)
    call DestroyEffect(AddSpecialEffect("war3mapImported\\RemoteMineBlast.mdx",result,ZEE))
  elseif QIE==5 then
    call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",result,ZEE))
  elseif QIE==6 then
    set g=GetAvailableGroup()
    set tt_unit1=source
    set unit250=source
    call GroupEnumUnitsInRange(g,result,ZEE,625,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func4223)
    call KillGroup(g)
    call DestroyEffect(AddSpecialEffect("war3mapImported\\RemoteMineBlast.mdx",result,ZEE))
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FogModifierStop(A3X)
    call DestroyFogModifier(A3X)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set g=null
  return false
endfunction

function Func4225 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local string ZJE=""
  local fogmodifier A3X=CreateFogModifierRadius(GetOwningPlayer(source),FOG_OF_WAR_VISIBLE,result,ZEE,350,true,true)
  call FogModifierStart(A3X)
  if IsNeutralsOrObserversOrAllies(GetOwningPlayer(source))then
    set ZJE="war3mapImported\\CallDown_4.mdx"
  endif
  call TriggerRegisterTimerEvent(RBX,0.1,false)
  call TriggerRegisterTimerEvent(RBX,0.8,false)
  call TriggerRegisterTimerEvent(RBX,1.6,false)
  call TriggerRegisterTimerEvent(RBX,2,false)
  call TriggerRegisterTimerEvent(RBX,3.6,false)
  call TriggerRegisterTimerEvent(RBX,4,false)
  call TriggerAddCondition(RBX,Condition(function Func4224))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveReal(HY,(ZAE),6,((result)*1.0))
  call SaveReal(HY,(ZAE),7,((ZEE)*1.0))
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffect(ZJE,result,ZEE)))
  call SaveFogModifierHandle(HY,(ZAE),42,(A3X))
  set RBX=null
  set source=null
endfunction

function Func4226 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),375))
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer ZBE
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==source and(GetEventDamage()>20 or IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))then
      set ZBE=(LoadInteger(HY,(QIE),34))
      if ZBE>0 then
        call SaveInteger(HY,(QIE),34,(ZBE+1))
      endif
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4227 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  if IsUnitHexed(source)==false then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call UnitAddAbility(source,'A22B')
    call UnitRemoveAbility(source,'A22B')
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4228 takes unit source returns nothing
  local trigger RBX
  local integer ZAE
  if IsUnitHexed(source)==false then
    call UnitAddAbility(source,'A22B')
    call UnitRemoveAbility(source,'A22B')
  else
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call TriggerRegisterTimerEvent(RBX,0.1,true)
    call TriggerAddCondition(RBX,Condition(function Func4227))
    set RBX=null
  endif
endfunction

function Func4229 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local integer ZBE=GetUnitAbilityLevel(source,'A229')
  local integer ZCE=ZAE
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    if IsUnitIllusion(GetAttacker())and GetUnitAbilityLevel(GetAttacker(),'A1TW')>0 then
      call Func4228(GetAttacker())
      call UnitRemoveAbility(GetAttacker(),'A1TW')
    endif
    if GetAttacker()==source then
      set QIE=QIE+1
      if QIE>3+ZBE then
        call UnitRemoveAbility(source,'A1TW')
        call UnitRemoveAbility(source,'B0DJ')
        call Func4228(source)
        call FlushChildHashtable(HY,(ZAE))
        call CleanTrigger(RBX)
      else
        set RBX=CreateTrigger()
        set ZAE=GetHandleId(RBX)
        call TriggerRegisterUnitEvent(RBX,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
        call TriggerRegisterTimerEvent(RBX,2,false)
        call TriggerAddCondition(RBX,Condition(function Func4226))
        call SaveUnitHandle(HY,(ZAE),2,(source))
        call SaveInteger(HY,(ZAE),375,(ZCE))
      endif
    endif
  else
    call UnitRemoveAbility(source,'A1TW')
    call UnitRemoveAbility(source,'B0DJ')
    call Func4228(source)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4230 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterTimerEvent(RBX,15,false)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerAddCondition(RBX,Condition(function Func4229))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveInteger(HY,(ZAE),34,1)
  call UnitAddAbility(source,'A22A')
  call UnitRemoveAbility(source,'A22A')
  set RBX=null
  set source=null
endfunction

function Func4231 takes nothing returns boolean
  if IsUnitIllusion(GetTriggerUnit())and GetUnitTypeId(GetTriggerUnit())=='E02O' then
    call Func4228(GetTriggerUnit())
  endif
  return false
endfunction

function Func4232 takes nothing returns nothing
  if GetUnitTypeId(GetTriggerUnit())=='E02N' then
    call Func4230()
  endif
endfunction

function Func4233 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
  call TriggerAddCondition(t,Condition(function Func4231))
  set t=null
  call AddToPurgeList('A1T3','PRGE')
  call AddToPurgeList('B0DE','PRGE')
  call AddToPurgeList('A1ST','PRGE')
  call AddToPurgeList('B0DG','PRGE')
  call HideAbility('A30V')
  set boolean036=true
endfunction

function Func4234 takes nothing returns boolean
  local unit u=GetFilterUnit()
  local unit SKE=unit251
  local real cx=real114
  local real cy=real115
  local real nx
  local real ny
  local real a
  local real ILX
  if(IsMagicImmune(u)==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(u))and AliveNonBuildOrMarker(u))then
    if((LoadInteger(HY,(GetHandleId(u)),4324))!=1)then
      call AddTimedKeyToAgent(u,4324,0.3)
    endif
    set ILX=DistanceBetweenXY(cx,cy,GetUnitX(u),GetUnitY(u))
    set a= AngleBetweenXY(cx,cy,GetUnitX(u),GetUnitY(u))*bj_DEGTORAD
    if ILX>real118 then
      set nx=GetUnitX(u)+11*Cos(a)
      set ny=GetUnitY(u)+11*Sin(a)
    else
      set nx=GetUnitX(u)-11*Cos(a)
      set ny=GetUnitY(u)-11*Sin(a)
    endif
    if GetUnitAbilityLevel(u,'B0BE')==0 then
      call SetUnitX(u,nx)
      call SetUnitY(u,ny)
    endif
  endif
  set u=null
  set SKE=null
  return false
endfunction

function Func4235 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local real ZWE
  local real ZYE
  local integer QIE=0
  local group g
  if GetTriggerEvalCount(RBX)>(50*(2+0.6*GetUnitAbilityLevel(source,'A1SU')))then
    loop
      exitwhen QIE>16
      set QIE=QIE+1
    endloop
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set g=GetAvailableGroup()
    set real114=result
    set real115=ZEE
    set unit251=source
    set tt_unit1=source
    loop
      exitwhen QIE>16
      set ZWE=result+(real118)*Cos(bj_DEGTORAD*360.0*QIE/16.0)
      set ZYE=ZEE+(real118)*Sin(bj_DEGTORAD*360.0*QIE/16.0)
      set real116=ZWE
      set real117=ZYE
      call GroupEnumUnitsInRange(g,ZWE,ZYE,75,Condition(function Func4234))
      set QIE=QIE+1
    endloop
    call KillGroup(g)
    set g=null
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4236 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local real dx
  local real dy
  local integer i=0
  local effect fx=LoadEffectHandle(HY,(h),32)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  loop
    set dx=x+real118*Cos(bj_DEGTORAD*360.0*i/16.0)
    set dy=y+real118*Sin(bj_DEGTORAD*360.0*i/16.0)
    set i=i+1
    exitwhen i>16
  endloop
  call SaveEffectHandle(HY,(h),32,fx)
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveReal(HY,(h),6,x)
  call SaveReal(HY,(h),7,y)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func4235))
  set t=null
  set fx=null
  set SKE=null
  return false
endfunction

function Func4237 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  call SaveEffectHandle(HY,(h),32,(AddSpecialEffect("war3mapImported\\KineticField.mdx",x,y)))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveReal(HY,(h),6,((x)*1.0))
  call SaveReal(HY,(h),7,((y)*1.0))
  call TriggerRegisterTimerEvent(t,1.2,false)
  call TriggerAddCondition(t,Condition(function Func4236))
  call TimedReveal(GetOwningPlayer(SKE),5.5,x,y,400)
  set t=null
  set SKE=null
endfunction

function Func4238 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit d=(LoadUnitHandle(HY,h,45))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local real cx=GetUnitX(d)
  local real cy=GetUnitY(d)
  local real a= AngleBetweenXY(cx,cy,x,y)
  local real ILX=DistanceBetweenXY(cx,cy,x,y)
  local real NBX=(LoadReal(HY,h,671))
  call SetUnitFacing(d,a)
  set cx=cx+NBX*Cos(a*bj_DEGTORAD)
  set cy=cy+NBX*Sin(a*bj_DEGTORAD)
  call SetUnitX(d,cx)
  call SetUnitY(d,cy)
  if ILX<40 then
    call KillUnit(d)
    call DestroyEffect(LoadEffectHandle(HY,h,175))
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call AddTimedKeyToAgent(SGE,4411,1)
    call SetUnitPosition(SGE,x,y)
    call PanCameraToTimedForPlayer(GetOwningPlayer(SGE),x,y,0)
  elseif IsMagicImmune(SGE)then
    call KillUnit(d)
    call DestroyEffect(LoadEffectHandle(HY,h,175))
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  set d=null
  return false
endfunction

function Func4239 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local real x=(LoadReal(HY,(GetHandleId(SGE)),7400))
  local real y=(LoadReal(HY,(GetHandleId(SGE)),7500))
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h0C6',GetUnitX(SGE),GetUnitY(SGE),0)
  local real ILX=DistanceBetweenXY(x,y,GetUnitX(SGE),GetUnitY(SGE))
  local real NBX=0.02*(RMaxBJ(ILX/1.8,600))
  call Func1032(SKE,SGE)
  call TriggerAddCondition(t,Condition(function Func4238))
  call TriggerRegisterTimerEvent(t,0.02,true)
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveUnitHandle(HY,h,45,(d))
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call SaveReal(HY,h,671,((NBX)*1.0))
  call SaveEffectHandle(HY,h,175,(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",SGE,"overhead")))
  call SaveEffectHandle(HY,h,176,(AddSpecialEffect("effects\\Lightning_Ball_Tail_FX.mdx",x,y)))
  call TriggerEvaluate(t)
  set SKE=null
  set SGE=null
  set t=null
  set d=null
endfunction

function Func4240 takes nothing returns nothing
  if IsUnitIllusion(GetSpellTargetUnit())then
    call DamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),6,999999)
  else
    call Func4239()
  endif
endfunction

function Func4241 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local integer h=GetHandleId(u)
  local integer i=1
  loop
    call SaveReal(HY,h,7400+i-1,LoadReal(HY,h,7400+i))
    call SaveReal(HY,h,7500+i-1,LoadReal(HY,h,7500+i))
    set i=i+1
    exitwhen i>15
  endloop
  call SaveReal(HY,h,7415,GetUnitX(u))
  call SaveReal(HY,h,7515,GetUnitY(u))
  set u=null
endfunction

function Func4242 takes nothing returns boolean
  call ForGroup(group004,function Func4241)
  return false
endfunction

function Func4243 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.25,true)
  call TriggerAddCondition(t,Condition(function Func4242))
  set t=null
  call AddToPurgeList('B302','PRGE')
  call AddToPurgeList('A302','PRGE')
endfunction

function Func4244 takes nothing returns nothing
  call DamageTarget(unit253,GetEnumUnit(),1,integer522*20+20)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetEnumUnit(),"chest"))
endfunction

function Func4245 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),19))
  local unit M0X=(LoadUnitHandle(HY,(ZAE),45))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local group g
  local integer ZBE=GetTriggerEvalCount(RBX)
  local unit M1X=null
  call SetUnitX(M_X,GetUnitX(RCX))
  call SetUnitY(M_X,GetUnitY(RCX))
  call SetUnitX(M0X,GetUnitX(RCX))
  call SetUnitY(M0X,GetUnitY(RCX))
  if ZBE==1 or ZBE==100 or ZBE==200 or ZBE==300 then
    set g=GetAvailableGroup()
    if IsDead(RCX)then
      set M1X=CreateUnit(GetOwningPlayer(RCX),'e00C',GetUnitX(RCX),GetUnitY(RCX),0)
      call UnitApplyTimedLife(M1X,'BTLF',0.2)
      call IssueTargetOrder(M_X,"chainlightning",M1X)
    else
      call IssueTargetOrder(M_X,"chainlightning",RCX)
      call DamageTarget(source,RCX,1,QIE*20+20)
    endif
    call Func0690("war3mapImported\\ThunderStorm_Groundeffect.mdx",RCX,"origin",0.6)
    set tt_unit1=source
    set unit253=source
    set unit252=RCX
    set integer522=QIE
    call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),265,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call GroupRemoveUnit(g,RCX)
    call ForGroup(g,function Func4244)
    call KillGroup(g)
  endif
  if GetTriggerEvalCount(RBX)==300 or(GetUnitAbilityLevel(RCX,'A302')==0)then
    call UnitRemoveAbility(RCX,'A302')
    call UnitRemoveAbility(RCX,'B302')
    call KillUnit(M_X)
    call KillUnit(M0X)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set M1X=null
  return false
endfunction

function Func4246 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetUnitAbilityLevel(source,'A1TV')
  local unit M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
  local unit M0X=CreateUnit(GetOwningPlayer(source),'e02P',GetUnitX(RCX),GetUnitY(RCX),0)
  call UnitAddAbility2(M0X,'Aloc')
  call UnitAddAbility2(M_X,'A1U7')
  call SetUnitAbilityLevel(M_X,'A1U7',QIE)
  call UnitAddAbility2(M_X,'Aloc')
  call UnitAddAbility2(RCX,'A302')
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func4245))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  call SaveUnitHandle(HY,(ZAE),19,(M_X))
  call SaveUnitHandle(HY,(ZAE),45,(M0X))
  call SaveInteger(HY,(ZAE),5,(QIE))
  set source=null
  set RCX=null
  set M_X=null
  set M0X=null
  set RBX=null
endfunction

function Func4247 takes nothing returns nothing
  if boolean181 then
    call Func2306(GetEnumUnit(),'B0DL',0.25)
  endif
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Purge_NoBirth.mdx",GetEnumUnit(),"origin"))
  call DamageTarget(unit254,GetEnumUnit(),1,real119)
endfunction

function Func4248 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),45))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),19))
  local boolean ZSE=(LoadBoolean(HY,(ZAE),15))
  local group g
  local integer ZBE=GetTriggerEvalCount(RBX)
  local integer ZCE=20
  if ZSE then
    set ZCE=28
  endif
  if ZBE>ZCE then
    call StopSound(sound044,false,true)
    call KillUnit(RCX)
    call ShowUnit(RCX,false)
    call KillUnit(M_X)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    set g=GetAvailableGroup()
    set tt_unit1=source
    set unit254=source
    set real119=0.25*(150+50*QIE)*(ZBE/20)
    set boolean181=ZSE
    call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),475,Condition(function Func0824))
    call ForGroup(g,function Func4247)
    call KillGroup(g)
    set g=null
  endif
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
  return false
endfunction

function Func4249 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  local real result=GetSpellTargetX()
  local real ZEE=GetSpellTargetY()
  local unit RCX=CreateUnit(GetOwningPlayer(source),'h0CK',result,ZEE,0)
  local integer QIE=GetUnitAbilityLevel(source,'A1U6')
  local unit M_X=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  local boolean ZSE=false
  if QIE==0 then
    set QIE=GetUnitAbilityLevel(source,'A2V8')
    set ZSE=true
  endif
  call SetSoundVolume(sound044,200)
  call StartSound(sound044)
  call SetSoundPosition(sound044,result,ZEE,100)
  if IsScourge(GetOwningPlayer(source))then
    call UnitAddAbility2(M_X,'A1U5')
    if ZSE then
      call SetUnitAbilityLevel(M_X,'A1U5',2)
    endif
  else
    call UnitAddAbility2(M_X,'A1U4')
    if ZSE then
      call SetUnitAbilityLevel(M_X,'A1U4',2)
    endif
  endif
  call ImminentTriggeredPointOrder(M_X,852473,result,ZEE)
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),45,(RCX))
  call SaveUnitHandle(HY,(ZAE),19,(M_X))
  call SaveInteger(HY,(ZAE),5,(QIE))
  call SaveBoolean(HY,(ZAE),15,(ZSE))
  call TriggerRegisterTimerEvent(RBX,0.25,true)
  call TriggerAddCondition(RBX,Condition(function Func4248))
  set RBX=null
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func4250 takes nothing returns nothing
  local integer ZAE=integer524
  local unit source=GetEnumUnit()
  local integer QIE=662-1+ZAE
  local real result=(LoadReal(HY,(GetHandleId(source)),(QIE)))
  local real ZEE=(TimerGetElapsed(GlobalTimer))
  if result<ZEE then
    call SaveReal(HY,(GetHandleId(source)),(QIE),((ZEE+2)*1.0))
    if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
      call DamageTarget(unit255,source,1,2+6*integer523)
    else
    endif
  endif
  set source=null
endfunction

function Func4251 takes nothing returns nothing
  if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
    call DamageTarget(unit255,GetEnumUnit(),1,real120)
  else
  endif
endfunction

function Func4252 takes unit source,unit RCX returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set real120=25*integer523
  set unit255=source
  call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),325,Condition(function Func0827))
  call ForGroup(g,function Func4251)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(RCX),GetUnitY(RCX)))
  call KillUnit(RCX)
  call Func0479(RCX,0.5)
  call KillGroup(g)
  call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(source),'o00Q',GetUnitX(RCX),GetUnitY(RCX),0),'BTLF',2)
endfunction

function Func4253 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local unit APN=(LoadUnitHandle(HY,h,393))
  local unit AQN=(LoadUnitHandle(HY,h,394))
  local unit ASN=(LoadUnitHandle(HY,h,395))
  local unit ATN=(LoadUnitHandle(HY,h,396))
  local unit AUN=(LoadUnitHandle(HY,h,397))
  local integer QIE=LoadInteger(HY,h,5)
  local real dx
  local real dy
  local real ZWE
  local real offset=(LoadReal(HY,h,138))
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local real N2X
  local integer c=GetTriggerEvalCount(t)
  local real N3X
  local group g
  local integer ZBE=0
  local real N4X=2.25
  local real N5X
  if IsDead(APN)==false then
    set ZBE=ZBE+1
  endif
  if IsDead(AQN)==false then
    set ZBE=ZBE+1
  endif
  if IsDead(ASN)==false then
    set ZBE=ZBE+1
  endif
  if IsDead(ATN)==false then
    set ZBE=ZBE+1
  endif
  if IsDead(AUN)==false then
    set ZBE=ZBE+1
  endif
  if ZBE==5 then
    set N4X=2.25
  elseif ZBE==4 then
    set N4X=2.1
  elseif ZBE==3 then
    set N4X=1.95
  elseif ZBE==2 then
    set N4X=1.8
  elseif ZBE==1 then
    set N4X=1.65
  endif
  set N2X=-1*360*0.02/N4X
  set N5X=(LoadReal(HY,h,137))+N2X
  call SaveReal(HY,h,137,((N5X)*1.0))
  set integer523=QIE
  set unit255=u
  if c==50 then
    call ShowUnit(AQN,true)
    call SaveBoolean(HY,h,512,(true))
    call UnitAddAbility2(AQN,'Aloc')
  endif
  if c==100 then
    call ShowUnit(ASN,true)
    call SaveBoolean(HY,h,513,(true))
    call UnitAddAbility2(ASN,'Aloc')
  endif
  if c==150 then
    call ShowUnit(ATN,true)
    call SaveBoolean(HY,h,514,(true))
    call UnitAddAbility2(ATN,'Aloc')
  endif
  if c==200 then
    call ShowUnit(AUN,true)
    call SaveBoolean(HY,h,515,(true))
    call UnitAddAbility2(AUN,'Aloc')
  endif
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A24A' then
      if(LoadBoolean(HY,h,655))then
        call SaveBoolean(HY,h,655,(false))
        call SaveBoolean(HY,h,656,(false))
      else
        call SaveBoolean(HY,h,655,(true))
        call SaveBoolean(HY,h,656,(false))
      endif
    elseif GetSpellAbilityId()=='A24B' then
      if(LoadBoolean(HY,h,656))then
        call SaveBoolean(HY,h,655,(false))
        call SaveBoolean(HY,h,656,(false))
      else
        call SaveBoolean(HY,h,655,(false))
        call SaveBoolean(HY,h,656,(true))
      endif
    endif
  endif
  if(LoadBoolean(HY,h,655))then
    set offset=RMaxBJ(offset-5,100)
    call SaveReal(HY,h,138,((offset)*1.0))
  elseif(LoadBoolean(HY,h,656))then
    set offset=RMinBJ(offset+5,875)
    call SaveReal(HY,h,138,((offset)*1.0))
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c==950 or(IsDead(APN)and IsDead(AQN)and IsDead(ASN)and IsDead(ATN)and IsDead(AUN))or(c>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A1T8')then
    if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
      call UnitRemoveAbility(u,'A24A')
      call UnitRemoveAbility(u,'A24B')
    endif
    if GetUnitTypeId(u)!='O01F' then
      if LoadInteger(HY,GetHandleId(u),704)=='A1T8'then
        call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A1T8',true)
      endif
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    if IsDead(APN)==false then
      call Func4252(u,APN)
    endif
    if IsDead(AQN)==false then
      call Func4252(u,AQN)
    endif
    if IsDead(ASN)==false then
      call Func4252(u,ASN)
    endif
    if IsDead(ATN)==false then
      call Func4252(u,ATN)
    endif
    if IsDead(AUN)==false then
      call Func4252(u,AUN)
    endif
  else
    set g=GetAvailableGroup()
    if IsDead(APN)==false and(LoadBoolean(HY,h,511))then
      set N3X=360*5/5.0
      set ZWE=N3X+N5X
      set dx=SafeX50(x+offset*Cos(ZWE*bj_DEGTORAD))
      set dy=SafeY50(y+offset*Sin(ZWE*bj_DEGTORAD))
      call SetUnitX(APN,dx)
      call SetUnitY(APN,dy)
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,dx,dy,95,Condition(function Func0836))
      if FirstOfGroup(g)!=null then
        call Func4252(u,APN)
      endif
      call GroupClear(g)
      set integer524=1
      set unit255=u
      call GroupEnumUnitsInRange(g,dx,dy,175,Condition(function Func0826))
      call ForGroup(g,function Func4250)
      call GroupClear(g)
    endif
    if IsDead(AQN)==false and(LoadBoolean(HY,h,512))then
      set N3X=360*4/5.0
      set ZWE=N3X+N5X
      set dx=SafeX50(x+offset*Cos(ZWE*bj_DEGTORAD))
      set dy=SafeY50(y+offset*Sin(ZWE*bj_DEGTORAD))
      call SetUnitX(AQN,dx)
      call SetUnitY(AQN,dy)
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,dx,dy,95,Condition(function Func0836))
      if FirstOfGroup(g)!=null then
        call Func4252(u,AQN)
      endif
      call GroupClear(g)
      set integer524=2
      set unit255=u
      call GroupEnumUnitsInRange(g,dx,dy,175,Condition(function Func0826))
      call ForGroup(g,function Func4250)
      call GroupClear(g)
    endif
    if IsDead(ASN)==false and(LoadBoolean(HY,h,513))then
      set N3X=360*3/5.0
      set ZWE=N3X+N5X
      set dx=SafeX50(x+offset*Cos(ZWE*bj_DEGTORAD))
      set dy=SafeY50(y+offset*Sin(ZWE*bj_DEGTORAD))
      call SetUnitX(ASN,dx)
      call SetUnitY(ASN,dy)
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,dx,dy,95,Condition(function Func0836))
      if FirstOfGroup(g)!=null then
        call Func4252(u,ASN)
      endif
      call GroupClear(g)
      set integer524=3
      set unit255=u
      call GroupEnumUnitsInRange(g,dx,dy,175,Condition(function Func0826))
      call ForGroup(g,function Func4250)
      call GroupClear(g)
    endif
    if IsDead(ATN)==false and(LoadBoolean(HY,h,514))then
      set N3X=360*2/5.0
      set ZWE=N3X+N5X
      set dx=SafeX50(x+offset*Cos(ZWE*bj_DEGTORAD))
      set dy=SafeY50(y+offset*Sin(ZWE*bj_DEGTORAD))
      call SetUnitX(ATN,dx)
      call SetUnitY(ATN,dy)
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,dx,dy,95,Condition(function Func0836))
      if FirstOfGroup(g)!=null then
        call Func4252(u,ATN)
      endif
      call GroupClear(g)
      set integer524=4
      set unit255=u
      call GroupEnumUnitsInRange(g,dx,dy,175,Condition(function Func0826))
      call ForGroup(g,function Func4250)
      call GroupClear(g)
    endif
    if IsDead(AUN)==false and(LoadBoolean(HY,h,515))then
      set N3X=360*1/5.0
      set ZWE=N3X+N5X
      set dx=SafeX50(x+offset*Cos(ZWE*bj_DEGTORAD))
      set dy=SafeY50(y+offset*Sin(ZWE*bj_DEGTORAD))
      call SetUnitX(AUN,dx)
      call SetUnitY(AUN,dy)
      set tt_unit1=u
      call GroupEnumUnitsInRange(g,dx,dy,95,Condition(function Func0836))
      if FirstOfGroup(g)!=null then
        call Func4252(u,AUN)
      endif
      call GroupClear(g)
      set integer524=5
      set unit255=u
      call GroupEnumUnitsInRange(g,dx,dy,175,Condition(function Func0826))
      call ForGroup(g,function Func4250)
      call GroupClear(g)
    endif
    call KillGroup(g)
  endif
  set t=null
  set u=null
  set APN=null
  set AQN=null
  set ASN=null
  set ATN=null
  set AUN=null
  return false
endfunction

function Func4254 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit APN
  local unit AQN
  local unit ASN
  local unit ATN
  local unit AUN
  local real x
  local real y
  set x=GetUnitX(u)+250*Cos(bj_DEGTORAD*360*5/5.0*-1.0)
  set y=GetUnitY(u)+250*Sin(bj_DEGTORAD*360*5/5.0*-1.0)
  set APN=CreateUnit(GetOwningPlayer(u),'h0CJ',x,y,360*5/5.0*-1.0)
  call UnitAddAbility2(APN,'Aloc')
  set x=GetUnitX(u)+250*Cos(bj_DEGTORAD*360*4/5.0*-1.0)
  set y=GetUnitY(u)+250*Sin(bj_DEGTORAD*360*4/5.0*-1.0)
  set AQN=CreateUnit(GetOwningPlayer(u),'h0CJ',x,y,360*4/5.0*-1.0)
  call ShowUnit(AQN,false)
  call SetUnitInvulnerable(AQN,true)
  set x=GetUnitX(u)+250*Cos(bj_DEGTORAD*360*3/5.0*-1.0)
  set y=GetUnitY(u)+250*Sin(bj_DEGTORAD*360*3/5.0*-1.0)
  set ASN=CreateUnit(GetOwningPlayer(u),'h0CJ',x,y,360*3/5.0*-1.0)
  call ShowUnit(ASN,false)
  call SetUnitInvulnerable(AQN,true)
  set x=GetUnitX(u)+250*Cos(bj_DEGTORAD*360*2/5.0*-1.0)
  set y=GetUnitY(u)+250*Sin(bj_DEGTORAD*360*2/5.0*-1.0)
  set ATN=CreateUnit(GetOwningPlayer(u),'h0CJ',x,y,360*2/5.0*-1.0)
  call ShowUnit(ATN,false)
  call SetUnitInvulnerable(ATN,true)
  set x=GetUnitX(u)+250*Cos(bj_DEGTORAD*360*1/5.0*-1.0)
  set y=GetUnitY(u)+250*Sin(bj_DEGTORAD*360*1/5.0*-1.0)
  set AUN=CreateUnit(GetOwningPlayer(u),'h0CJ',x,y,360*1/5.0*-1.0)
  call ShowUnit(AUN,false)
  call SetUnitInvulnerable(AUN,true)
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,393,(APN))
  call SaveUnitHandle(HY,h,394,(AQN))
  call SaveUnitHandle(HY,h,395,(ASN))
  call SaveUnitHandle(HY,h,396,(ATN))
  call SaveUnitHandle(HY,h,397,(AUN))
  call SaveBoolean(HY,h,511,(true))
  call SaveBoolean(HY,h,512,(false))
  call SaveBoolean(HY,h,513,(false))
  call SaveBoolean(HY,h,514,(false))
  call SaveBoolean(HY,h,515,(false))
  call SaveBoolean(HY,h,655,(false))
  call SaveBoolean(HY,h,656,(false))
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(u,'A1T8'))
  call SaveReal(HY,h,138,(150*1.0))
  call UnitAddAbility2(u,'A24B')
  call UnitAddAbility2(u,'A24A')
  if GetUnitTypeId(u)!='O01F' then
    call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A1T8',false)
  endif
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4253))
  set u=null
  set t=null
  set APN=null
  set AQN=null
  set ASN=null
  set ATN=null
  set AUN=null
endfunction

function Func4255 takes unit source returns nothing
  call UnitRemoveAbility(source,'A1TQ')
  call UnitRemoveAbility(source,'A1VM')
  if(LoadBoolean(HY,(GetHandleId(source)),708))then
    call SaveBoolean(HY,(GetHandleId(source)),708,(false))
  endif
endfunction

function Func4256 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call Func4255(source)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func4257 takes unit u,integer QIE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,h,2,(u))
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func4256))
  call UnitAddAbility2(u,'A1VM')
  call SetUnitAbilityLevel(u,'A1VM',QIE)
  call UnitAddAbility2(u,'A1TQ')
  if(LoadBoolean(HY,(GetHandleId(u)),708))==false then
    call SaveBoolean(HY,(GetHandleId(u)),708,(true))
  endif
  set t=null
endfunction

function Func4258 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local integer QIE=GetUnitAbilityLevel(u,'A28Q')
  local unit WYR=(LoadUnitHandle(HY,(h),17))
  local unit A0N=(LoadUnitHandle(HY,(GetHandleId(u)),652))
  local boolean A1N=false
  local real hp=0.2*(GetUnitState(u,UNIT_STATE_LIFE)*0.045)
  local real mp=0.2*(GetUnitState(u,UNIT_STATE_MANA)*0.045)
  if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
    if GetIssuedOrderId()==String2OrderIdBJ("manashieldon")then
      call Func4257(u,QIE)
    elseif GetIssuedOrderId()==String2OrderIdBJ("manashieldoff")then
      call Func4255(u)
    endif
  endif
  if GetUnitAbilityLevel(u,'A1TQ')>0 then
    set A1N=true
    call SetUnitState(u,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(u,UNIT_STATE_LIFE)-hp,1))
    call SetUnitState(u,UNIT_STATE_MANA,RMaxBJ(GetUnitState(u,UNIT_STATE_MANA)-mp,1))
  endif
  if A0N==null then
    if WYR!=null then
      call Func4255(WYR)
      set WYR=null
      call SaveUnitHandle(HY,(h),17,(WYR))
    endif
  else
    if WYR==null then
      set WYR=A0N
      if A1N then
        call SaveUnitHandle(HY,(h),17,(WYR))
        call Func4257(WYR,QIE)
      else
        call Func4255(WYR)
      endif
    elseif WYR!=A0N then
      call Func4255(WYR)
      if A1N then
        set WYR=A0N
        call SaveUnitHandle(HY,(h),17,(WYR))
        call Func4257(WYR,QIE)
      endif
    elseif A1N==false then
      call Func4255(WYR)
    elseif WYR==A0N then
      if A1N then
        set WYR=A0N
        call SaveUnitHandle(HY,(h),17,(WYR))
        call Func4257(WYR,QIE)
      endif
    endif
  endif
  set t=null
  set u=null
  set WYR=null
  set A0N=null
  return false
endfunction

function Func4259 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveUnitHandle(HY,(h),2,u)
  call SaveUnitHandle(HY,(h),17,null)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  call TriggerAddCondition(t,Condition(function Func4258))
  set u=null
  set t=null
  set boolean020=true
endfunction

function Func4260 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group040)==false then
    call GroupAddUnit(group040,GetEnumUnit())
    call UnitAddAbilityTimedExF(GetEnumUnit(),'A2TP',1,0.25+0.5*integer525,'B0GU')
    call Func1032(LoadUnitHandle(TempHash,'A1TA',0),GetEnumUnit())
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",GetEnumUnit(),"chest"))
  endif
endfunction

function Func4261 takes unit source,unit RCX,group g returns nothing
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetUnitX(RCX)
  local real ZYE=GetUnitY(RCX)
  local real ICX= AngleBetweenXY(result,ZEE,ZWE,ZYE)*bj_DEGTORAD
  local real N1X
  local real N2X
  local real N3X=DistanceBetweenXY(result,ZEE,ZWE,ZYE)
  local group IBI=GetAvailableGroup()
  local integer ZAE=1
  set group040=g
  set integer525=GetUnitAbilityLevel(source,'A1TA')
  loop
    exitwhen ZAE>8
    set tt_unit1=source
    set N1X=result+N3X*ZAE/8*Cos(ICX)
    set N2X=ZEE+N3X*ZAE/8*Sin(ICX)
    call GroupEnumUnitsInRange(IBI,N1X,N2X,100,Condition(function DefaultEnemyFilter))
    call SaveUnitHandle(TempHash,'A1TA',0,source)
    call ForGroup(IBI,function Func4260)
    call RemoveSavedHandle(TempHash,'A1TA',0)
    call GroupClear(IBI)
    set ZAE=ZAE+1
  endloop
  call KillGroup(IBI)
  set IBI=null
endfunction

function Func4262 takes unit source,unit RCX returns boolean
  return((LoadInteger(HY,(GetHandleId(source)),4294))==1)
endfunction

function Func4263 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local real result=DistanceBetweenUnits(source,RCX)
  local real ZEE=AngleBetweenUnits(source,RCX)*bj_DEGTORAD
  local real ZWE=GetUnitX(source)+20*Cos(ZEE)
  local real ZYE=GetUnitY(source)+20*Sin(ZEE)
  local location IGX
  if(result<300 or result>2150)or HaveSavedHandle(HY,GetHandleId(source),652)==false then
    set IGX=Func0800(ZWE,ZYE)
    set ZWE=GetLocationX(IGX)
    set ZYE=GetLocationY(IGX)
    call SetUnitX(source,SafeX50(ZWE))
    call SetUnitY(source,SafeY50(ZYE))
    call KillTrees(ZWE,ZYE,350)
    call RemoveLocation(IGX)
    set IGX=null
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call SaveInteger(HY,(GetHandleId(source)),4295,2)
  else
    call SetUnitX(source,ZWE)
    call SetUnitY(source,ZYE)
    call Func0788(source)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4264 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit A7N=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local group g=(LoadGroupHandle(HY,(h),133))
  local lightning A8N=(LoadLightningHandle(HY,(h),196))
  local integer c=GetTriggerEvalCount(t)
  local real ILX=DistanceBetweenUnits(A7N,SGE)
  local real ZEE=1
  local real A9N=GetUnitState(A7N,UNIT_STATE_LIFE)
  local real NVN=GetUnitState(A7N,UNIT_STATE_MANA)
  local real NEN=(LoadReal(HY,(h),670))
  local real NXN=(LoadReal(HY,(h),667))
  local real NON
  local real NRN
  local real NIN=1.5
  local real NVI
  local real NAN
  if IsDead(A7N)or IsDead(SGE)or(c>600 and Func4262(A7N,SGE)==false and(LoadInteger(HY,GetHandleId(A7N),4295)!=1))or(ILX>925 and(LoadInteger(HY,GetHandleId(A7N),4295)!=1))or GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A1TU')then
    call KillGroup(g)
    call DestroyLightning(A8N)
    call UnitRemoveAbility(SGE,'A1TM')
    call UnitRemoveAbility(SGE,'A1TL')
    call UnitRemoveAbility(SGE,'A1TK')
    call UnitRemoveAbility(SGE,'A1TN')
    call UnitRemoveAbility(SGE,'B0DH')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call UnitRemoveAbility(A7N,'A1TM')
    call UnitRemoveAbility(A7N,'A1TL')
    call UnitRemoveAbility(A7N,'A1TK')
    call UnitRemoveAbility(A7N,'A1TN')
    call UnitRemoveAbility(A7N,'B0DH')
    call UnitRemoveAbility(A7N,'A1TU')
    if(LoadInteger(HY,(GetHandleId(A7N)),704))==0 or(LoadInteger(HY,(GetHandleId(A7N)),704))=='A1TA' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(A7N),'A1TA',true)
    endif
    call RemoveSavedHandle(HY,GetHandleId(A7N),652)
  else
    set NVI=GetUnitState(A7N,UNIT_STATE_MAX_LIFE)
    set NAN=GetUnitState(A7N,UNIT_STATE_MAX_MANA)
    set NON=A9N/NVI
    set NRN=NVN/NAN
    if NON-NEN>0 and(NON-NEN)<0.5 then
      if(LoadInteger(HY,GetHandleId(A7N),4298)!=1)then
        call SetUnitState(SGE,UNIT_STATE_LIFE,GetUnitState(SGE,UNIT_STATE_LIFE)+NIN*(NON-NEN)*NVI)
      endif
    endif
    if NRN-NXN>0 and(NRN-NXN)<0.5 then
      call SetUnitState(SGE,UNIT_STATE_MANA,GetUnitState(SGE,UNIT_STATE_MANA)+NIN*(NRN-NXN)*NAN)
    endif
    call SaveReal(HY,(h),670,((A9N/NVI)*1.0))
    call SaveReal(HY,(h),667,((NVN/NAN)*1.0))
    call MoveLightning(A8N,true,GetUnitX(A7N),GetUnitY(A7N),GetUnitX(SGE),GetUnitY(SGE))
    call Func4261(A7N,SGE,g)
    if IsUnitVisibleEx(A7N,LocalPlayer)==false and IsUnitVisibleEx(SGE,LocalPlayer)==false then
      set ZEE=0
    endif
    if PlayerObserver then
      set ZEE=1
    endif
    if ILX<700 or((LoadInteger(HY,(GetHandleId(A7N)),4295))==1)then
      call SetLightningColor(A8N,0.00,1.00,1.00,ZEE)
    else
      call SetLightningColor(A8N,0.80,0.70,0.40,ZEE)
    endif
  endif
  set t=null
  set A7N=null
  set SGE=null
  set g=null
  set A8N=null
  return false
endfunction

function Wisp_Tether takes nothing returns nothing
  local unit Source=GetTriggerUnit()
  local unit Target=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local lightning l=AddLightning("CHIM",true,GetUnitX(Source),GetUnitY(Source),GetUnitX(Target),GetUnitY(Target))
  local integer lvl=GetUnitAbilityLevel(Source,'A1TA')
  local integer i
  local real r=DistanceBetweenUnits(Source,Target)
  local real a=AngleBetweenUnits(Source,Target)*bj_DEGTORAD
  call SetLightningColor(l,0.00,1.00,1.00,1)
  call UnitAddAbility2(Source,'A1TU')
  if lvl==1 then
    set i='A1TM'
  elseif lvl==2 then
    set i='A1TL'
  elseif lvl==3 then
    set i='A1TK'
  elseif lvl==4 then
    set i='A1TN'
  endif
  call SetPlayerAbilityAvailable(GetOwningPlayer(Source),'A1TA',false)
  call UnitAddAbility2(Source,i)
  call UnitAddAbility2(Target,i)
  call FuckingAssistBuffWrap(Source,Target)
  call SaveUnitHandle(HY,(h),2,(Source))
  call SaveUnitHandle(HY,(h),17,(Target))
  call SaveGroupHandle(HY,(h),133,(GetAvailableGroup()))
  call SaveLightningHandle(HY,(h),196,(l))
  call SaveReal(HY,(h),670,((GetUnitState(Source,UNIT_STATE_LIFE)/GetUnitState(Source,UNIT_STATE_MAX_LIFE))*1.0))
  call SaveReal(HY,(h),667,((GetUnitState(Source,UNIT_STATE_MANA)/GetUnitState(Source,UNIT_STATE_MAX_MANA))*1.0))
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,Source)
  call TriggerRegisterDeathEvent(t,Target)
  call TriggerRegisterUnitEvent(t,Source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4264))
  call SaveUnitHandle(HY,(GetHandleId(Source)),652,(Target))
  if r>700 then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,(h),2,(Source))
    call SaveUnitHandle(HY,(h),17,(Target))
    call SaveEffectHandle(HY,(h),32,(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",Source,"chest")))
    call TriggerRegisterTimerEvent(t,0.02,true)
    call TriggerAddCondition(t,Condition(function Func4263))
    call SaveInteger(HY,(GetHandleId(Source)),4295,1)
  endif
  set Source=null
  set t=null
  set Target=null
endfunction

function Func4266 takes unit source,real result,real ZEE returns boolean
  local boolean ZSE=false
  local player whichPlayer=GetOwningPlayer(source)
  local unit RCX=CreateUnit(whichPlayer,'e02Q',GetUnitX(source),GetUnitY(source),0)
  call UnitAddAbility2(RCX,'A1V4')
  if ImminentTriggeredPointOrder(RCX,852525,result,ZEE)then
    call KillUnit(RCX)
    set RCX=null
    return true
  else
    call KillUnit(RCX)
    set RCX=null
    return false
  endif
endfunction

function Func4267 takes string s,unit u returns nothing
  local texttag tt=CreateTextTag()
  call SetTextTagText(tt,s,0.033)
  call SetTextTagPosUnit(tt,u,64)
  call SetTextTagColor(tt,0,50,255,255)
  call SetTextTagVelocity(tt,0,0.0355)
  call SetTextTagFadepoint(tt,0.15)
  call SetTextTagPermanent(tt,false)
  call SetTextTagLifespan(tt,0.85)
  call SetTextTagVisibility(tt,IsNeutralsOrObserversOrAllies(GetOwningPlayer(u)))
  set tt=null
endfunction

function Func4268 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local integer c=GetTriggerEvalCount(t)
  if c==12 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif IsDead(u)==false and c<12 then
    call Func4267(I2S(12-c),u)
  endif
  set t=null
  set u=null
  return false
endfunction

function Func4269 takes unit u,unit SGE,real x,real y returns nothing
  local string s="Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl"
  call DestroyEffect(AddSpecialEffect(s,GetUnitX(SGE),GetUnitY(SGE)))
  call AddTimedKeyToAgent(SGE,4402,1)
  call KillTrees(x,y,250)
  if IsUnitHidden(SGE)==false then
    call SetUnitPosition(SGE,x,y)
  else
    call SetUnitX(SGE,x)
    call SetUnitY(SGE,y)
  endif
  call AddTimedKeyToAgent(SGE,'gtot',0.2)
  call FuckingAssistBuffWrap(u,SGE)
  if IsUnitType(SGE,UNIT_TYPE_HERO)and IsDead(SGE)==false then
    call PanCameraToTimedForPlayer(GetOwningPlayer(SGE),x,y,0)
  endif
  call DestroyEffect(AddSpecialEffect(s,GetUnitX(SGE),GetUnitY(SGE)))
endfunction

function Func4270 takes unit u,real x,real y,boolean NGN returns nothing
  local string s="Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl"
  call DestroyEffect(AddSpecialEffect(s,GetUnitX(u),GetUnitY(u)))
  call SetUnitPosition(u,x,y)
  call KillTrees(x,y,250)
  call AddTimedKeyToAgent(u,'gtot',0.2)
  if NGN then
    call Func0770(u,false,0,0)
  endif
  call PanCameraToTimedForPlayer(GetOwningPlayer(u),x,y,0)
  call DestroyEffect(AddSpecialEffect(s,GetUnitX(u),GetUnitY(u)))
endfunction

function Func4271 takes unit SGE returns boolean
  return SGE!=null and IsDead(SGE)==false and GetOwningPlayer(SGE)!=Sentinels[0]and GetOwningPlayer(SGE)!=Scourges[0]and Func1474(SGE)==false
endfunction

function Func4272 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(GetHandleId(u)),652))
  local real x1=(LoadReal(HY,(h),47))
  local real y1=(LoadReal(HY,(h),48))
  local real x2=(LoadReal(HY,(h),189))
  local real y2=(LoadReal(HY,(h),190))
  local fogmodifier ff=(LoadFogModifierHandle(HY,(h),42))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SaveInteger(HY,(GetHandleId(u)),4294,2)
    call DestroyEffect(LoadEffectHandle(HY,(h),32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if GetTriggerEvalCount(t)==1 then
      if IsDead(u)==false then
        call Func4270(u,x1,y1,true)
      endif
      if Func4271(SGE)then
        call Func4269(u,SGE,x1,y1)
      endif
    else
      if IsDead(u)==false then
        call Func4270(u,x2,y2,false)
      endif
      if Func4271(SGE)then
        call Func4269(u,SGE,x2,y2)
      endif
      call SaveInteger(HY,(GetHandleId(u)),4294,2)
      call DestroyEffect(LoadEffectHandle(HY,(h),32))
      call DestroyFogModifier(ff)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  endif
  set t=null
  set u=null
  set SGE=null
  set ff=null
  return false
endfunction

function Func4273 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local real result=(LoadReal(HY,(ZAE),47))
  local real ZEE=(LoadReal(HY,(ZAE),48))
  local fogmodifier A3X
  local integer QIE=GetUnitAbilityLevel(source,'A1TB')
  if IsUnitBadSpellTargeted(source)or IsDead(source)then
    call SaveInteger(HY,(GetHandleId(source)),4294,2)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetTriggerEvalCount(RBX)==(2.75-0.25*QIE)/.05 then
    set A3X=null
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call TriggerRegisterTimerEvent(RBX,0.01,false)
    call TriggerRegisterTimerEvent(RBX,12,false)
    call TriggerRegisterDeathEvent(RBX,source)
    call TriggerAddCondition(RBX,Condition(function Func4272))
    call SaveReal(HY,(ZAE),189,((GetUnitX(source))*1.0))
    call SaveReal(HY,(ZAE),190,((GetUnitY(source))*1.0))
    call SaveReal(HY,(ZAE),47,((result)*1.0))
    call SaveReal(HY,(ZAE),48,((ZEE)*1.0))
    call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",GetUnitX(source),GetUnitY(source))))
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call TriggerRegisterTimerEvent(RBX,1,true)
    call TriggerRegisterDeathEvent(RBX,source)
    call TriggerAddCondition(RBX,Condition(function Func4268))
  endif
  set source=null
  set RBX=null
  set A3X=null
  return false
endfunction

function Func4274 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local unit A0N=(LoadUnitHandle(HY,(GetHandleId(u)),652))
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  local integer QIE=GetUnitAbilityLevel(u,'A1TB')
  if DistanceBetweenXY(x,y,GetUnitX(u),GetUnitY(u))<200 then
    if IsSentinel(GetOwningPlayer(u))then
      set x=GetUnitX(SentFountain)
      set y=GetUnitY(SentFountain)
    else
      set x=GetUnitX(ScourgeFountain)
      set y=GetUnitY(ScourgeFountain)
    endif
  endif
  set x=SafeX50(x)
  set y=SafeY50(y)
  call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",u,"chest"))
  call nPngMinimapEx(x,y,4.0,255,0,0,false)
  call TimedReveal(Sentinels[1],2.5,x,y,300)
  call TimedReveal(Scourges[1],2.5,x,y,300)
  call SaveUnitHandle(HY,(h),2,(u))
  call TriggerRegisterTimerEvent(t,.05,true)
  call TriggerAddCondition(t,Condition(function Func4273))
  call SaveReal(HY,(h),47,((x)*1.0))
  call SaveReal(HY,(h),48,((y)*1.0))
  call SaveEffectHandle(HY,(h),32,(AddSpecialEffect("war3mapImported\\RelocateVisual.mdl",x,y)))
  call SaveInteger(HY,(GetHandleId(u)),4294,1)
  set u=null
  set t=null
  set A0N=null
endfunction

function Func4275 takes nothing returns nothing
  if Func4266(GetTriggerUnit(),GetSpellTargetX(),GetSpellTargetY())==false then
    call Func0658('n0KX')
  else
    if IsSentinel(GetOwningPlayer(GetTriggerUnit()))then
      if IsPointInRegion(region012,GetSpellTargetX(),GetSpellTargetY())then
        call Func0658('n03Y')
      endif
    else
      if IsPointInRegion(region011,GetSpellTargetX(),GetSpellTargetY())then
        call Func0658('n03Y')
      endif
    endif
  endif
endfunction

function Func4276 takes nothing returns nothing
  set region011=CreateRegion()
  call RegionAddRect(region011,rect022)
  call RegionAddRect(region011,SentFountainForItemsRect)
  set region012=CreateRegion()
  call RegionAddRect(region012,rect021)
  call RegionAddRect(region012,ScrgFountainForItemsRect)
  call AddToPurgeList('A1TM','PRGE')
  call AddToPurgeList('A1TL','PRGE')
  call AddToPurgeList('A1TK','PRGE')
  call AddToPurgeList('A1TN','PRGE')
  call AddToPurgeList('B0DH','PRGE')
endfunction

function Func4277 takes unit SKE,unit SGE,real nx,real ny,real a returns nothing
  local real NMN
  local real NPN
  local real a2=a
  local real x
  local real y
  local real NQN
  local group g=GetAvailableGroup()
  local unit u
  local player p=GetOwningPlayer(SKE)
  local ubersplat ub
  set NMN=nx+50*Cos(a2*bj_DEGTORAD)
  set NPN=ny+50*Sin(a2*bj_DEGTORAD)
  call GroupEnumUnitsInRange(g,NMN,NPN,157,Condition(function ReturnTrue))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    if AliveNonBuildOrMarker(u)and GetUnitDefaultMoveSpeed(u)>0 and DistanceBetweenXY(GetUnitX(u),GetUnitY(u),NMN,NPN)>120 then
      set NQN= AngleBetweenXY(GetUnitX(u),GetUnitY(u),NMN,NPN)*bj_DEGTORAD
      call SetUnitX(u,NMN+GetRandomReal(0,100)*Cos(NQN))
      call SetUnitY(u,NPN+GetRandomReal(0,100)*Sin(NQN))
    endif
    call GroupRemoveUnit(g,u)
  endloop
  set NQN=a2
  set x=NMN+200*Cos(NQN*bj_DEGTORAD)
  set y=NPN+200*Sin(NQN*bj_DEGTORAD)
  call SetDestructableLifespan(CreateDestructable('B006',x,y,-1*NQN,0.6,1),7)
  call TimedReveal(GetOwningPlayer(SKE),2,x,y,400)
  set NQN=a2-40
  set x=NMN+200*Cos(NQN*bj_DEGTORAD)
  set y=NPN+200*Sin(NQN*bj_DEGTORAD)
  call SetDestructableLifespan(CreateDestructable('B006',x,y,-1*NQN,0.6,1),7)
  set NQN=a2-80
  set x=NMN+200*Cos(NQN*bj_DEGTORAD)
  set y=NPN+200*Sin(NQN*bj_DEGTORAD)
  call SetDestructableLifespan(CreateDestructable('B006',x,y,-1*NQN,0.6,1),7)
  set NQN=a2+40
  set x=NMN+200*Cos(NQN*bj_DEGTORAD)
  set y=NPN+200*Sin(NQN*bj_DEGTORAD)
  call SetDestructableLifespan(CreateDestructable('B006',x,y,-1*NQN,0.6,1),7)
  set NQN=a2+80
  set x=NMN+200*Cos(NQN*bj_DEGTORAD)
  set y=NPN+200*Sin(NQN*bj_DEGTORAD)
  call SetDestructableLifespan(CreateDestructable('B006',x,y,-1*NQN,0.6,1),7)
  set NQN=a2+120
  set x=NMN+220*Cos(NQN*bj_DEGTORAD)
  set y=NPN+220*Sin(NQN*bj_DEGTORAD)
  call SetDestructableLifespan(CreateDestructable('B006',x,y,-1*NQN,0.6,1),7)
  set NQN=a2-120
  set x=NMN+220*Cos(NQN*bj_DEGTORAD)
  set y=NPN+220*Sin(NQN*bj_DEGTORAD)
  call SetDestructableLifespan(CreateDestructable('B006',x,y,-1*NQN,0.6,1),7)
endfunction

function Func4278 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group041)==false then
    call GroupAddUnit(group041,GetEnumUnit())
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",GetEnumUnit(),"chest"))
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetEnumUnit(),"chest"))
    call DamageTarget(unit256,GetEnumUnit(),1,integer526*60)
  endif
endfunction

function Func4279 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit d=(LoadUnitHandle(HY,h,45))
  local real PII=(LoadReal(HY,h,683))
  local real PAI=(LoadReal(HY,h,684))
  local real x=GetUnitX(d)
  local real y=GetUnitY(d)
  local real GXE=Atan2(PAI-y,PII-x)
  local real nx=x+22*Cos(GXE)
  local real ny=y+22*Sin(GXE)
  local group g=(LoadGroupHandle(HY,h,133))
  local integer QIE=GetUnitAbilityLevel(SKE,'A1YO')
  local group gg=GetAvailableGroup()
  set tt_unit1=SKE
  set unit256=SKE
  set group041=g
  set integer526=QIE
  call GroupEnumUnitsInRange(gg,nx,ny,225,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(gg,function Func4278)
  call KillGroup(gg)
  call SetUnitPosition(d,nx,ny)
  if DistanceBetweenXY(nx,ny,PII,PAI)<40 then
    call KillUnit(d)
    call ShowUnit(d,false)
    call SetUnitPathing(d,true)
    call Func4277(SKE,null,nx,ny,GXE*bj_RADTODEG)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set d=null
  set SKE=null
  set g=null
  set gg=null
  return false
endfunction

function Func4280 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h0CS',GetUnitX(SKE),GetUnitY(SKE),0)
  local real cx=GetUnitX(SKE)
  local real cy=GetUnitY(SKE)
  local real PII=GetSpellTargetX()
  local real PAI=GetSpellTargetY()
  local real GXE=Atan2(PAI-cy,PII-cx)
  local real CWI=SafeX50(PII)
  local real CYI=SafeY50(PAI)
  call SetUnitFacing(d,GXE*bj_RADTODEG)
  call SetUnitPathing(d,false)
  call TriggerRegisterTimerEvent(t,.02,true)
  call TriggerAddCondition(t,Condition(function Func4279))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveReal(HY,h,683,((CWI)*1.0))
  call SaveReal(HY,h,684,((CYI)*1.0))
  call SaveReal(HY,h,13,((GXE)*1.0))
  call SaveUnitHandle(HY,h,45,(d))
  call SaveGroupHandle(HY,h,133,(GetAvailableGroup()))
  set SKE=null
  set d=null
  set t=null
endfunction

function Func4281 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer QIE=LoadInteger(HY,h,5)
  local integer c=GetTriggerEvalCount(t)
  local real AHX=(c-50)*(c-50)/4.3
  local boolean b=LoadBoolean(HY,h,17)
  if c<50 then
    if b==false then
      call SetUnitFlyHeight(SGE,700*c/50,0)
    endif
  elseif c<100 then
    if b==false then
      call SetUnitFlyHeight(SGE,700-700*(c-50)/50,0)
    endif
  else
    if b==false then
      call SetUnitFlyHeight(SGE,GetUnitDefaultFlyHeight(SGE),0)
    endif
    call DestroyEffect(LoadEffectHandle(HY,(h),175))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call UnitAddAbilityTimedExF(SGE,'A203',1,1+QIE,'B0DY')
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4282 takes unit SKE,unit SGE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer BHX
  local integer QIE
  local string s="Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl"
  local boolean b=IsBuggyFlying(SGE)
  local integer a
  if GetUnitAbilityLevel(SKE,'A3Q4')>0 then
    set BHX='A3Q4'
  else
    set BHX='A3Q5'
  endif
  set QIE=GetUnitAbilityLevel(SKE,BHX)
  call Func0424(SKE,BHX)
  set a=GetUnitAbility(SKE,BHX)
  if a>0 then
    call TimerStart(UltimateCDTimers[GetPlayerId(GetOwningPlayer(SKE))],GetAbilityCurrentCooldownConverted(a/4),false,null)
  endif
  call StunTargetEx(SGE,1.,true)
  call TextTagOnUnit("WALRUS PUNCH !!",3.5,SKE,0.03,255,0,0,255,Func0590(SKE)or PlayerObserver)
  call PlaySoundAtPos(sound046,GetUnitX(SGE),GetUnitY(SGE))
  if b==false then
    call UnitAddAbility(SGE,'Amrf')
    call UnitRemoveAbility(SGE,'Amrf')
  endif
  call DestroyEffect(AddSpecialEffectTarget(s,SGE,"overhead"))
  call DestroyEffect(AddSpecialEffectTarget(s,SGE,"head"))
  call DestroyEffect(AddSpecialEffectTarget(s,SGE,"left,hand"))
  call DestroyEffect(AddSpecialEffectTarget(s,SGE,"right,hand"))
  call DestroyEffect(AddSpecialEffectTarget(s,SGE,"chest"))
  call DestroyEffect(AddSpecialEffectTarget(s,SGE,"origin"))
  call TriggerRegisterTimerEvent(t,.01,true)
  call TriggerAddCondition(t,Condition(function Func4281))
  call SaveUnitHandle(HY,(h),2,SKE)
  call SaveUnitHandle(HY,(h),17,SGE)
  call SaveBoolean(HY,h,17,b)
  call SaveInteger(HY,h,5,QIE)
  call SaveEffectHandle(HY,(h),175,(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",SGE,"chest")))
  set t=null
endfunction

function Func4283 takes unit u returns boolean
  local integer a=GetUnitAbility(u,'A3Q4')
  if a==0 then
    set a=GetUnitAbility(u,'A3Q5')
  endif
  if a<1 then
    return false
  endif
  set a=Memory[a/4+0x20/4]
  if IsFlagBitSet(a,0x1)or(not(IsFlagBitSet(a,0x200)or IsFlagBitSet(a,0x10000))and IsFlagBitSet(a,0x80))then
    return true
  endif
  return false
endfunction

function Func4284 takes nothing returns boolean
  local integer h=GetHandleId(GetTriggeringTrigger())
  local boolean MCA=LoadBoolean(HY,h,0)
  local integer a
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if LoadUnitHandle(HY,h,2)==GetEventDamageSource()and GetEventDamage()>1 and IsFakeDamage<1 then
      if GetUnitAbilityLevel(GetEventDamageSource(),'A3Q4')>0 then
        set a=GetUnitAbility(GetEventDamageSource(),'A3Q4')
      else
        set a=GetUnitAbility(GetEventDamageSource(),'A3Q5')
      endif
      if a>0 then
        if(MCA or(IsAbilityOnCooldown(a)and IsFlagBitSet(Memory[a/4+0x20/4],0x400000)))then
          call RemoveSavedHandle(HY,GetHandleId(LoadUnitHandle(HY,h,2))+'A3Q5',GetHandleId(GetTriggerUnit()))
          call DestroyTimer(LoadTimerHandle(HY,h,0))
          call FlushChildHashtable(HY,(h))
          call CleanTrigger(GetTriggeringTrigger())
          call Func4282(GetEventDamageSource(),GetTriggerUnit())
        endif
      endif
    endif
  else
    call DestroyTimer(LoadTimerHandle(HY,h,0))
    call RemoveSavedHandle(HY,GetHandleId(LoadUnitHandle(HY,h,2))+'A3Q5',GetHandleId(LoadUnitHandle(HY,h,3)))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(GetTriggeringTrigger())
  endif
  return false
endfunction

function Func4285 takes unit SKE,unit SGE,boolean MCA returns nothing
  local trigger t
  local integer h
  local timer tt
  if HaveSavedHandle(HY,GetHandleId(SKE)+'A3Q5',GetHandleId(SGE))then
    set h=GetHandleId(LoadTriggerHandle(HY,GetHandleId(SKE)+'A3Q5',GetHandleId(SGE)))
    set tt=LoadTimerHandle(HY,h,0)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call TriggerRegisterTimerExpireEvent(t,tt)
    call SaveTimerHandle(HY,h,0,tt)
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
    call SaveUnitHandle(HY,h,2,SKE)
    call TriggerAddCondition(t,Condition(function Func4284))
    call SaveTriggerHandle(HY,GetHandleId(SKE)+'A3Q5',GetHandleId(SGE),t)
  endif
  call SaveBoolean(HY,h,0,MCA)
  call SaveUnitHandle(HY,h,3,SGE)
  call TimerStart(tt,4,false,null)
  set tt=null
  set t=null
endfunction

function Func4286 takes nothing returns boolean
  local unit u
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    set u=GetAttacker()
    if(GetUnitAbilityLevel(u,'A3Q4')+GetUnitAbilityLevel(u,'A3Q5')>0)and LoadBoolean(HY,GetHandleId(GetTriggeringTrigger()),263)and u==LoadUnitHandle(HY,GetHandleId(GetTriggeringTrigger()),14)then
      if GetUnitCurrentOrder(u)==0 then
        call Func0656(u)
        call IssueTargetOrder(u,"attack",GetTriggerUnit())
      endif
      if AliveNonBuildOrMarker(GetTriggerUnit())then
        call Func4285(u,GetTriggerUnit(),false)
      endif
    endif
    set u=null
  elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
    if(GetIssuedOrderId()==OrderId("poisonarrows"))then
      call SaveBoolean(HY,(GetHandleId(GetTriggeringTrigger())),263,(true))
    elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
      call SaveBoolean(HY,(GetHandleId(GetTriggeringTrigger())),263,(false))
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()=='A3Q4' or GetSpellAbilityId()=='A3Q5')then
    call Func4285(GetTriggerUnit(),GetSpellTargetUnit(),true)
  endif
  return false
endfunction

function Func4287 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ATTACKED)
  call TriggerAddCondition(t,Condition(function Func4286))
  call SaveUnitHandle(HY,GetHandleId(t),14,GetTriggerUnit())
  set t=null
endfunction

function Func4288 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local real N2N=(LoadReal(HY,h,6))
  local real N3N=(LoadReal(HY,h,7))
  local real a=LoadReal(HY,h,1)
  local real CPI=(LoadReal(HY,h,23))
  local real CQI=(LoadReal(HY,h,24))
  local real nX
  local real nY
  local boolean UUA=false
  local real FGE=LoadReal(HY,h,0)
  set nX=CPI+FGE*Cos(a)
  set nY=CQI+FGE*Sin(a)
  if DistanceBetweenXY(nX,nY,N2N,N3N)<(5+FGE)then
    set nX=N2N
    set nY=N3N
    set UUA=true
  endif
  set nX=SafeX50(nX)
  set nY=SafeY50(nY)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(SGE,'B08V')>0 or GetTriggerEvalCount(t)>200 then
    set UUA=true
  else
    call SetUnitPosition(SGE,nX,nY)
    call SetUnitX(SGE,nX)
    call SetUnitY(SGE,nY)
    call KillTrees(nX,nY,120)
    call SaveReal(HY,h,23,((nX)*1.0))
    call SaveReal(HY,h,24,((nY)*1.0))
  endif
  if UUA then
    call SetUnitPathing2(SGE,true)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set SGE=null
  set t=null
  set SKE=null
  return false
endfunction

function Func4289 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local integer QIE=1
  local trigger t
  local integer h
  local real FOO
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local integer i=-1
  local boolean N4N=false
  local real ILX=900
  set FOO=AngleBetweenUnits(SKE,SGE)*bj_DEGTORAD
  set t=CreateTrigger()
  set h=GetHandleId(t)
  loop
    exitwhen N4N or i==23
    set i=i+1
    set x=SafeX50(GetUnitX(SGE)+(ILX-i*25)*Cos(FOO))
    set y=SafeY50(GetUnitY(SGE)+(ILX-i*25)*Sin(FOO))
    if Func0429(x,y)then
      set N4N=true
    endif
  endloop
  call SetUnitPathing2(SGE,false)
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func4288))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call SaveReal(HY,h,23,((GetUnitX(SGE))*1.0))
  call SaveReal(HY,h,24,((GetUnitY(SGE))*1.0))
  call SaveInteger(HY,h,34,0)
  call SaveReal(HY,h,0,900*0.03)
  call SaveReal(HY,h,1,FOO)
  call UnitAddAbilityTimedExF(SGE,'A3DG',1,5,'B3DG')
  call DamageTarget(SKE,SGE,1,350)
  set SGE=null
  set SKE=null
  set t=null
endfunction

function Func4290 takes nothing returns nothing
  if GetUnitTypeId(GetSpellTargetUnit())=='n00L' then
    call Func0658('n0K9')
  else
    call Func0735(GetTriggerUnit(),0,3)
    call AddEffectTargetTimed("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetTriggerUnit(),"hand",0.2)
  endif
endfunction

function Func4291 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A3DF',false)
endfunction

function Func4292 takes nothing returns nothing
  call UnitAddAbility2(tt_unit1,'A3DF')
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A3DF',true)
endfunction

function Func4293 takes nothing returns nothing
  call ShowUnit(GetEnumUnit(),true)
  call UnitRemoveAbility(GetEnumUnit(),'A04R')
  call SetUnitInvulnerable(GetEnumUnit(),false)
  call UnitRemoveAbility(GetEnumUnit(),'A3KR')
  if IsDead(GetEnumUnit())==false then
    if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
      call SetUnitPosition(GetEnumUnit(),real121,real122)
      call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetEnumUnit()))
    else
      call SetUnitX(GetEnumUnit(),real121)
      call SetUnitY(GetEnumUnit(),real122)
    endif
  endif
  if GetEnumUnit()==unit257 and unit258!=null then
    call IssueTargetOrder(unit257,"attack",unit258)
  endif
  if GetEnumUnit()==tt_unit1 then
    call MakeUnitTransparent(GetEnumUnit())
  endif
  call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
  call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
endfunction

function Func4294 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group042)==false then
    call GroupAddUnit(group042,GetEnumUnit())
    call StunTargetEx(GetEnumUnit(),0.25*integer527+0.25,false)
    call DamageTarget(unit257,GetEnumUnit(),1,40*integer527+40+integer528*(10+10*integer527))
  endif
endfunction

function Func4295 takes nothing returns nothing
  call SetUnitX(GetEnumUnit(),real121)
  call SetUnitY(GetEnumUnit(),real122)
endfunction

function Func4296 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit NCX=(LoadUnitHandle(HY,h,45))
  local real x=GetUnitX(SGE)
  local real y=GetUnitY(SGE)
  local real ZWE=(LoadReal(HY,h,671))
  local real a= AngleBetweenXY(GetUnitX(NCX),GetUnitY(NCX),x,y)*bj_DEGTORAD
  local real nx=GetUnitX(NCX)+ZWE*Cos(a)
  local real ny=GetUnitY(NCX)+ZWE*Sin(a)
  local group g=(LoadGroupHandle(HY,h,133))
  local group gg
  local integer c=GetTriggerEvalCount(t)
  local real LDX=RMinBJ(2.5+(c*0.02),10)
  local real A7X=225+40*(c*0.02)
  local integer QIE=(LoadInteger(HY,h,34))
  set integer528=QIE
  set integer527=LoadInteger(HY,h,5)
  set tt_unit1=SKE
  set group042=g
  set unit257=SKE
  set unit258=SGE
  set unit259=(LoadUnitHandle(HY,h,19))
  call SetUnitX(NCX,nx)
  call SetUnitY(NCX,ny)
  call SetUnitX(SKE,nx)
  call SetUnitY(SKE,ny)
  call SetUnitFacing(NCX,a*bj_RADTODEG-180)
  call SetUnitScale(NCX,LDX,LDX,LDX)
  set real121=nx
  set real122=ny
  call ForGroup((LoadGroupHandle(HY,h,22)),function Func4295)
  if DistanceBetweenXY(nx,ny,x,y)<ZWE*2 or c==150 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call KillTrees(nx,ny,200)
    set gg=GetAvailableGroup()
    call GroupEnumUnitsInRange(gg,nx,ny,A7X,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(gg,function Func4294)
    call KillGroup(gg)
    if c<150 then
      if GetUnitAbilityLevel(SGE,'A3E9')==1 and LoadBoolean(HY,h,5)==false and IsMagicImmune(SKE)==false then
        set tt_unit1=SKE
        set tt_unit3=SGE
        call ExecuteFunc("Func4301")
      endif
    endif
    set gg=null
    set real121=nx
    set real122=ny
    set tt_unit1=SKE
    call ForGroup((LoadGroupHandle(HY,h,22)),function Func4293)
    call KillGroup((LoadGroupHandle(HY,h,22)))
    call KillGroup(g)
    call KillUnit(NCX)
    call Func0479(NCX,0.2)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call SetUnitInvulnerable(SKE,false)
    call UnitRemoveAbility(SKE,'Abun')
    call UnitRemoveAbility(SKE,'Aeth')
    if GetUnitTypeId(SKE)==HeroID[50]then
      call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A1S7',true)
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(SKE),'A2XK',false)
  else
    if ModuloInteger(GetTriggerEvalCount(t),5)==0 then
      call KillTrees(nx,ny,200)
      set gg=GetAvailableGroup()
      call GroupEnumUnitsInRange(gg,nx,ny,A7X,Condition(function DefaultEnemyFilterWithAncientNonImmune))
      call ForGroup(gg,function Func4294)
      call KillGroup(gg)
      set gg=null
    endif
  endif
  set t=null
  set SGE=null
  set SKE=null
  set NCX=null
  set g=null
  return false
endfunction

function Func4297 takes unit source,group g,unit RCX returns nothing
  if IsUnitInGroup(RCX,g)==false and(Func1474(RCX)==false or GetOwningPlayer(RCX)==GetOwningPlayer(tt_unit1))and GetUnitAbilityLevel(RCX,'Amov')==1 and Func0610(RCX)==false then
    call GroupAddUnit(g,RCX)
    call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(RCX),GetUnitY(RCX)))
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(RCX),GetUnitY(RCX)))
    if source!=RCX then
      call ShowUnit(RCX,false)
      call UnitAddAbility2(RCX,'A04R')
      call SetUnitInvulnerable(RCX,true)
      call UnitAddAbility(RCX,'A3KR')
      call IssueImmediateOrderByIdExFunc(RCX,851993)
    endif
    if source!=RCX then
      set integer528=integer528+1
    endif
  endif
endfunction

function Func4298 takes unit source,unit RCX,integer ZAE,integer BXN,boolean UII returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  local real result=GetUnitX(source)
  local real ZEE=GetUnitY(source)
  local real ZWE=GetUnitX(RCX)
  local real ZYE=GetUnitY(RCX)
  local real ICX= AngleBetweenXY(result,ZEE,ZWE,ZYE)*bj_DEGTORAD
  local group g=GetAvailableGroup()
  set real123=0
  set integer528=ZAE
  set unit257=source
  call SetUnitVertexColor(source,255,255,255,0)
  set real123=675
  call SetUnitTimeScale(unit260,2)
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerAddCondition(RBX,Condition(function Func4296))
  call SaveInteger(HY,QIE,5,BXN)
  call SaveBoolean(HY,QIE,5,UII)
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveUnitHandle(HY,(QIE),17,(RCX))
  call SaveUnitHandle(HY,(QIE),19,(unit259))
  call SaveUnitHandle(HY,(QIE),45,(unit260))
  call SaveReal(HY,(QIE),137,((ICX)*1.0))
  call SaveReal(HY,(QIE),671,((real123*0.02)*1.0))
  call SaveReal(HY,(QIE),47,((ZWE)*1.0))
  call SaveReal(HY,(QIE),48,((ZYE)*1.0))
  call SaveInteger(HY,(QIE),34,(ZAE))
  call SaveGroupHandle(HY,(QIE),22,(group043))
  call SaveGroupHandle(HY,(QIE),133,(GetAvailableGroup()))
  set RBX=null
  set g=null
endfunction

function Func4299 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local unit NCX=(LoadUnitHandle(HY,h,45))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local group g
  local integer c=(LoadInteger(HY,h,34))
  local real LDX=RMinBJ(2.5+(c*0.02),10)
  local unit u2
  local unit u
  call SetUnitX(SKE,x)
  call SetUnitY(SKE,y)
  set integer527=GetUnitAbilityLevel(SKE,'A1S7')
  set tt_unit1=SKE
  set unit257=SKE
  set unit258=SGE
  set unit259=(LoadUnitHandle(HY,h,19))
  set unit260=NCX
  call SetUnitScale(NCX,LDX,LDX,LDX)
  if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
    if GetIssuedOrderId()==851971 then
      set u2=GetOrderTargetUnit()
      if IsUnitAlly(u2,GetOwningPlayer(SKE))and(GetOwningPlayer(u2)==GetOwningPlayer(SKE)or(IsUnitType(u2,UNIT_TYPE_HERO)and Func1474(u2)==false))and DistanceBetweenUnits(SKE,u2)<375 and GetUnitAbilityLevel(u2,'B08V')==0 and LoadBoolean(HY,GetHandleId(u2),4306)==false then
        call Func4297(SKE,(LoadGroupHandle(HY,h,22)),u2)
      endif
      set u2=null
    endif
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER then
    if GetIssuedOrderId()==851971 then
      set u=GetTriggerUnit()
      if IsUnitAlly(u,GetOwningPlayer(SKE))and GetOwningPlayer(SKE)!=GetOwningPlayer(u)and DistanceBetweenUnits(u,SKE)<375 and IsUnitType(u,UNIT_TYPE_HERO)and GetUnitAbilityLevel(u,'B08V')==0 and LoadBoolean(HY,GetHandleId(u),4306)==false then
        call Func4297(SKE,(LoadGroupHandle(HY,h,22)),u)
      endif
      set u=null
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A2XK' then
      call Func4298(SKE,SGE,integer528,LoadInteger(HY,h,5),LoadBoolean(HY,h,5))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func4298(SKE,SKE,integer528,LoadInteger(HY,h,5),LoadBoolean(HY,h,5))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set c=c+1
    call SaveInteger(HY,h,34,(c))
    if c==150 then
      call Func4298(SKE,SGE,integer528,LoadInteger(HY,h,5),LoadBoolean(HY,h,5))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    endif
  endif
  set t=null
  set SKE=null
  set SGE=null
  set NCX=null
  return false
endfunction

function Func4300 takes unit SKE,unit SGE,integer QIE,boolean UII returns nothing
  local unit source=SKE
  local unit RCX=SGE
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit M_X=CreateUnit(GetOwningPlayer(source),'h0C3',GetUnitX(source),GetUnitY(source),GetUnitFacing(source))
  local group g=GetAvailableGroup()
  set real123=0
  set integer528=0
  set unit257=source
  set group043=GetAvailableGroup()
  set real123=1.5*RMaxBJ(133,GetUnitMoveSpeed(source))
  set tt_unit1=source
  call KillGroup(g)
  set unit259=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),0)
  call UnitAddAbility(source,'A04R')
  call UnitAddAbility(source,'Aeth')
  call SetUnitInvulnerable(source,true)
  call UnitAddAbility2(source,'Abun')
  if GetUnitTypeId(SKE)==HeroID[50]then
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A1S7',false)
  endif
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A2XK',true)
  call UnitAddAbility2(source,'A2XK')
  call SetUnitTimeScale(M_X,2)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterUnitEvent(t,source,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterDeathEvent(t,source)
  call TriggerAddCondition(t,Condition(function Func4299))
  call SaveUnitHandle(HY,h,2,(source))
  call SaveInteger(HY,h,5,QIE)
  call SaveUnitHandle(HY,h,17,(RCX))
  call SaveUnitHandle(HY,h,19,(unit259))
  call SaveUnitHandle(HY,h,45,(M_X))
  call SaveReal(HY,h,6,((GetUnitX(source))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(source))*1.0))
  call SaveGroupHandle(HY,h,22,(group043))
  call SaveBoolean(HY,h,5,UII)
  call GroupAddUnit(group043,source)
  set t=null
  set source=null
  set RCX=null
  set M_X=null
  set g=null
endfunction

function Func4301 takes nothing returns nothing
  call LotusOrbFX(tt_unit3)
  call Func4300(tt_unit3,tt_unit1,integer527,true)
endfunction

function Func4302 takes nothing returns nothing
  call Func4300(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A1S7'),false)
endfunction

function Func4303 takes nothing returns boolean
  if IsUnitEnemy(GetFilterUnit(),tt_player1)and AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false then
    call UnitAddAbilityTimedExF(GetFilterUnit(),tt_int1,1,2,'B0DT')
  endif
  return false
endfunction

function Func4304 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit BNN=(LoadUnitHandle(HY,h,2))
  local unit SKE=(LoadUnitHandle(HY,h,17))
  local group g
  local integer QIE=LoadInteger(HY,h,5)
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if GetTriggerEvalCount(t)==1 then
      call IssueTargetOrder(BNN,"move",SKE)
      call TriggerRegisterDeathEvent(t,BNN)
    endif
    set tt_player1=GetOwningPlayer(BNN)
    set tt_int1='A3JA'+QIE-1
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(BNN),GetUnitY(BNN),625,Condition(function Func4303))
    call KillGroup(g)
  else
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(BNN),GetUnitY(BNN)))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set BNN=null
  set SKE=null
  return false
endfunction

function Func4305 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerAddCondition(t,Condition(function Func4304))
  call TriggerRegisterTimerEvent(t,0.2,true)
  call SaveUnitHandle(HY,h,2,GetSummonedUnit())
  call SaveUnitHandle(HY,h,17,GetSummoningUnit())
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(GetSummoningUnit(),'A1YR'))
  set t=null
endfunction

function Func4306 takes nothing returns nothing
  call AddToPurgeList('A3DG','PRGE')
  call AddToPurgeList('B3DG','PRGE')
  call AddToPurgeList('A203','PRGE')
  call AddToPurgeList('B0DY','PRGE')
  set boolean005=true
endfunction

function Func4307 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit BDN=(LoadUnitHandle(HY,h,17))
  local unit JFI=(LoadUnitHandle(HY,h,16))
  local unit BFN=(LoadUnitHandle(HY,h,15))
  local unit d=(LoadUnitHandle(HY,h,19))
  local unit BGN=null
  if GetTriggerEventId()==EVENT_UNIT_DEATH then
    if GetTriggerUnit()==BDN then
      call RemoveSavedHandle(HY,h,17)
    elseif GetTriggerUnit()==JFI then
      call RemoveSavedHandle(HY,h,16)
    else
      call RemoveSavedHandle(HY,h,15)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    set unit261=GetEventDamageSource()
  else
    if BDN!=null then
      set BGN=BDN
    elseif JFI!=null then
      set BGN=JFI
    elseif BFN!=null then
      set BGN=BFN
    endif
    if BGN!=null then
      call SetUnitX(SKE,GetUnitX(BGN))
      call SetUnitY(SKE,GetUnitY(BGN))
      call SetUnitX(d,GetUnitX(BGN))
      call SetUnitY(d,GetUnitY(BGN))
    else
      call RemoveItem(UnitRemoveItemFromSlot(d,0))
      call RemoveItem(UnitRemoveItemFromSlot(d,1))
      call RemoveItem(UnitRemoveItemFromSlot(d,2))
      call RemoveItem(UnitRemoveItemFromSlot(d,3))
      call RemoveItem(UnitRemoveItemFromSlot(d,4))
      call RemoveItem(UnitRemoveItemFromSlot(d,5))
      call RemoveSavedHandle(HY,GetHandleId(SKE),'A1B6')
      call FlushChildHashtable(HY,h)
      call CleanTrigger(t)
    endif
  endif
  set t=null
  set SKE=null
  set BDN=null
  set JFI=null
  set BFN=null
  set d=null
  set BGN=null
  return false
endfunction

function Func4308 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call ShowUnit(LoadUnitHandle(HY,h,0),true)
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
endfunction

function Func4309 takes unit u returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.6,false,function Func4308)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function Func4310 takes nothing returns nothing
  local trigger t
  local integer h
  local unit u=GetSummoningUnit()
  local unit BLN=GetSummonedUnit()
  local unit d
  local integer QIE
  local integer id=GetUnitTypeId(BLN)
  local boolean BMN=Func0627(id)
  local boolean BPN=Func0626(id)
  local boolean BQN=BPN==false and BMN==false
  if BPN then
    if id=='npn5' then
      call SetUnitAbilityLevel(BLN,'ANwk',2)
    elseif id=='n012' then
      call SetUnitAbilityLevel(BLN,'ANwk',3)
    endif
  elseif BQN then
    if id=='npn6' then
      call SetUnitAbilityLevel(BLN,'ACtb',2)
    elseif id=='n010' then
      call SetUnitAbilityLevel(BLN,'ACtb',3)
    endif
  endif
  call Func4309(BLN)
  if HaveSavedHandle(HY,GetHandleId(u),'A1B6')then
    set t=LoadTriggerHandle(HY,GetHandleId(u),'A1B6')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,GetHandleId(u),'A1B6',t)
    set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
    call UnitAddAbility(d,'AInv')
    call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(u,0)))
    call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(u,1)))
    call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(u,2)))
    call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(u,3)))
    call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(u,4)))
    call UnitAddItemById(d,GetItemTypeId(UnitItemInSlot(u,5)))
    call TriggerRegisterTimerEvent(t,0.05,true)
    call TriggerAddCondition(t,Condition(function Func4307))
    call SaveUnitHandle(HY,h,19,(d))
    call SaveUnitHandle(HY,h,2,(u))
  endif
  call TriggerRegisterUnitEvent(t,BLN,EVENT_UNIT_DEATH)
  call TriggerRegisterUnitEvent(t,BLN,EVENT_UNIT_DAMAGED)
  if BQN then
    call SaveUnitHandle(HY,h,17,(BLN))
  elseif BPN then
    call SaveUnitHandle(HY,h,16,(BLN))
  elseif BMN then
    call SaveUnitHandle(HY,h,15,(BLN))
  endif
  if GetUnitAbilityLevel(u,'A1B6')>0 then
    if BMN then
      set QIE=GetUnitAbilityLevel(u,'A0MX')
      if QIE>0 then
        call UnitAddAbility2(BLN,'A0MX')
        call SetUnitAbilityLevel(BLN,'A0MX',QIE)
      endif
    elseif BPN then
      set QIE=GetUnitAbilityLevel(u,'Acdh')
      if QIE>0 then
        call UnitAddAbility2(BLN,'Acdh')
        call SetUnitAbilityLevel(BLN,'Acdh',QIE)
      endif
    elseif BQN then
      set QIE=GetUnitAbilityLevel(u,'A06M')
      if QIE>0 then
        call UnitAddAbility2(BLN,'A06M')
        call SetUnitAbilityLevel(BLN,'A06M',QIE)
      endif
    endif
  endif
  set t=null
  set u=null
  set BLN=null
  set d=null
endfunction

function Func4311 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local group g
  local unit u2
  local integer QIE=GetUnitAbilityLevel(SKE,GetSpellAbilityId())-1+'A3PR'
  set tt_unit1=SKE
  set g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),225,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if Func2344(u2)then
      call UnitAddAbilityTimedExF(u2,QIE,1,8.,'BNdh')
    else
      call UnitAddAbilityTimedExF(u2,QIE,1,12.,'BNdh')
    endif
    call Func1032(SKE,u2)
  endloop
  call KillGroup(g)
  call EvasionSourceActivate(8,13)
  set SKE=null
  set SGE=null
endfunction

function Func4312 takes nothing returns nothing
  call AddToPurgeList('BNdh','PRGE')
  call AddToPurgeList('A3PR','PRGE')
  call AddToPurgeList('A3PS','PRGE')
  call AddToPurgeList('A3PT','PRGE')
  call AddToPurgeList('A3PU','PRGE')
  call AddWrapper("Func4598",1)
  set boolean005=true
endfunction

function Func4313 takes nothing returns boolean
  return AliveNonBuildOrMarker(GetFilterUnit())and IsMagicImmune(GetFilterUnit())==false
endfunction

function Func4314 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit u
  local group g=GetAvailableGroup()
  local player p=GetOwningPlayer(SKE)
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),625,Condition(function Func4313))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call PurgingTriggered(u,IsUnitEnemy(u,p))
    call GroupRemoveUnit(g,u)
  endloop
  call KillGroup(g)
  set SKE=null
endfunction

function Func4315 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  call UnitRemoveAbility(u,'A33B')
  call FlushChildHashtable(HY,GetHandleId(t))
  call PauseTimer(t)
  call DestroyTimer(t)
  set t=null
  set u=null
endfunction

function Func4316 takes unit u returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.3,false,function Func4315)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  set t=null
endfunction

function Func4317 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  call UnitRemoveAbility(u,'A33E')
  call FlushChildHashtable(HY,GetHandleId(t))
  call PauseTimer(t)
  call DestroyTimer(t)
  set t=null
  set u=null
endfunction

function Func4318 takes nothing returns nothing
  call SaveReal(MHT,GetHandleId(GetTriggerUnit()),'LSTE',TimerGetElapsed(GlobalTimer))
  call Func4316(GetTriggerUnit())
endfunction

function Func4319 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  local integer hu=GetHandleId(u)
  local real B6I=TimerGetElapsed(GlobalTimer)
  if GetUnitAbilityLevel(u,'A33E')==0 and GetUnitAbilityLevel(u,'A36D')==0 and B6I-LoadReal(MHT,hu,'LSTC')>=18-GetUnitAbilityLevel(u,'A0MX')*2 then
    call UnitAddAbility2(u,'A33E')
  endif
  if GetUnitAbilityLevel(u,'A33B')==0 and GetUnitAbilityLevel(u,'A36D')==0 and B6I-LoadReal(MHT,hu,'LSTE')>=18-GetUnitAbilityLevel(u,'A0MX')*2 then
    call UnitAddAbility2(u,'A33B')
  endif
  set t=null
  set u=null
endfunction

function Func4320 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local unit u=GetTriggerUnit()
  local timer tt=CreateTimer()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ATTACKED)
  call TriggerAddCondition(t,Condition(function Func4318))
  call TimerStart(tt,1,true,function Func4319)
  call SaveUnitHandle(HY,GetHandleId(tt),0,u)
  call SaveReal(MHT,GetHandleId(u),'LSTC',TimerGetElapsed(GlobalTimer))
  call SaveReal(MHT,GetHandleId(u),'LSTE',TimerGetElapsed(GlobalTimer))
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A33D',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A33E',false)
  set tt=null
  set u=null
  set t=null
endfunction

function Func4321 takes nothing returns nothing
  if GetUnitAbilityLevel(GetTriggerUnit(),'A0MX')==1 then
    call Func4320()
  endif
  call EvasionSourceActivate(1,99999)
endfunction

function Func4322 takes nothing returns nothing
  call StunTargetEx(GetEnumUnit(),0.75+0.25*GetUnitAbilityLevel(unit262,'A27F'),false)
endfunction

function Func4323 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local real result=(LoadReal(HY,(ZAE),137))
  local real ZEE=(LoadReal(HY,(ZAE),47))
  local real ZWE=(LoadReal(HY,(ZAE),48))
  local real ZYE=(LoadReal(HY,(ZAE),189))
  local real ICX=(LoadReal(HY,(ZAE),190))
  local group g
  local real N1X=DistanceBetweenXY(ZYE,ICX,ZEE,ZWE)/25
  local integer QIE=GetTriggerEvalCount(RBX)
  local real N2X=ZYE+N1X*QIE*Cos(result)
  local real N3X=ICX+N1X*QIE*Sin(result)
  local unit u
  local real x
  local real y
  call SetUnitX(RCX,SafeX50(N2X))
  call SetUnitY(RCX,SafeY50(N3X))
  if IsBuggyFlying(RCX)==false then
    call SetUnitFlyHeight(RCX,325-13*QIE,0)
  endif
  if QIE==25 then
    set x=SafeX50(ZEE)
    set y=SafeY50(ZWE)
    call SetUnitX(RCX,x)
    call SetUnitY(RCX,y)
    call CurrentSafestLocationWrapper(RCX)
    set tt_unit1=source
    set unit262=source
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),350,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call GroupRemoveUnit(g,RCX)
    call ForGroup(g,function Func4322)
    call KillGroup(g)
    call KillTrees(GetUnitX(RCX),GetUnitY(RCX),150)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(RCX),GetUnitY(RCX)))
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),176))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    if IsBuggyFlying(RCX)==false then
      call SetUnitFlyHeight(RCX,GetUnitDefaultFlyHeight(RCX),0)
    endif
    call SetUnitPathing2(RCX,true)
  endif
  set RBX=null
  set source=null
  set RCX=null
  set g=null
  set RBX=null
  return false
endfunction

function Func4324 takes unit source,unit RCX,unit M_X,real result,real ZEE,effect I4X,effect B3N returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local real ZWE=result
  local real ZYE=ZEE
  local real ICX= AngleBetweenXY(GetUnitX(RCX),GetUnitY(RCX),result,ZEE)*bj_DEGTORAD
  if DistanceBetweenXY(GetUnitX(RCX),GetUnitY(RCX),result,ZEE)>375 then
    set ZWE=GetUnitX(RCX)+375*Cos(ICX)
    set ZYE=GetUnitY(RCX)+375*Sin(ICX)
  endif
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  call SaveReal(HY,(ZAE),137,((ICX)*1.0))
  call SaveReal(HY,(ZAE),47,((ZWE)*1.0))
  call SaveReal(HY,(ZAE),48,((ZYE)*1.0))
  call SaveReal(HY,(ZAE),189,((GetUnitX(RCX))*1.0))
  call SaveReal(HY,(ZAE),190,((GetUnitY(RCX))*1.0))
  call SaveEffectHandle(HY,(ZAE),32,(I4X))
  call SaveEffectHandle(HY,(ZAE),176,(B3N))
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func4323))
  set RBX=null
endfunction

function Func4325 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local integer ZBE=(LoadInteger(HY,(ZAE),12))
  local real result=(LoadReal(HY,(ZAE),47))
  local real ZEE=(LoadReal(HY,(ZAE),48))
  local integer ZCE=(LoadInteger(HY,(ZAE),706))
  local real ZWE
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and IsUnitDisabledSomehow(RCX)==false)then
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A27F',true)
    call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A27X',false)
    call Func4324(source,RCX,(LoadUnitHandle(HY,(ZAE),711)),result,ZEE,(LoadEffectHandle(HY,(ZAE),32)),(LoadEffectHandle(HY,(ZAE),176)))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A27X' then
      if IsPointInRegion(region008,GetSpellTargetX(),GetSpellTargetY())==false and Func0429(GetSpellTargetX(),GetSpellTargetY())then
        call DestroyEffect(LoadEffectHandle(HY,(ZAE),176))
        set ZWE= AngleBetweenXY(GetUnitX(RCX),GetUnitY(RCX),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
        if DistanceBetweenXY(GetUnitX(RCX),GetUnitY(RCX),GetSpellTargetX(),GetSpellTargetY())>375 then
          set result=GetUnitX(RCX)+375*Cos(ZWE)
          set ZEE=GetUnitY(RCX)+375*Sin(ZWE)
        else
          set result=GetSpellTargetX()
          set ZEE=GetSpellTargetY()
        endif
        call SaveEffectHandle(HY,(ZAE),176,(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",result,ZEE)))
        call SaveReal(HY,(ZAE),47,((result)*1.0))
        call SaveReal(HY,(ZAE),48,((ZEE)*1.0))
        call SaveUnitHandle(HY,(ZAE),711,(GetSpellTargetUnit()))
        call SaveEffectHandle(HY,(ZAE),176,(AddSpecialEffectTarget("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetSpellTargetUnit(),"origin")))
      endif
    endif
  else
    set QIE=QIE+1
    call SaveInteger(HY,(ZAE),34,(QIE))
    if(LoadInteger(HY,(ZAE),707))==1 then
      set ZCE=ZCE+3
    else
      set ZCE=ZCE-3
    endif
    call SaveInteger(HY,(ZAE),706,(ZCE))
    if ZCE==30 then
      call SaveInteger(HY,(ZAE),707,(-1))
    elseif ZCE==-30 then
      call SaveInteger(HY,(ZAE),707,1)
    endif
    if IsBuggyFlying(RCX)==false then
      if QIE<15 then
        call SetUnitFlyHeight(RCX,QIE*20,0)
      else
        call SetUnitFlyHeight(RCX,300+ZCE,0)
      endif
    endif
    if QIE>(ZBE-25)then
      if IsBuggyFlying(RCX)==false then
        call SetUnitFlyHeight(RCX,300,0)
      endif
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A27F',true)
      call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A27X',false)
      call Func4324(source,RCX,(LoadUnitHandle(HY,(ZAE),711)),result,ZEE,(LoadEffectHandle(HY,(ZAE),32)),(LoadEffectHandle(HY,(ZAE),176)))
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4326 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local integer QIE=GetUnitAbilityLevel(source,'A27F')
  local unit M_X=CreateUnit(GetOwningPlayer(RCX),'e00E',GetUnitX(RCX),GetUnitY(RCX),0)
  call UnitAddAbility(M_X,'A282')
  call SetUnitAbilityLevel(M_X,'A282',QIE)
  call IssueTargetOrder(M_X,"thunderbolt",RCX)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A27F',false)
  call SetPlayerAbilityAvailable(GetOwningPlayer(source),'A27X',true)
  call UnitAddAbility(source,'A27X')
  call SetUnitPathing2(RCX,false)
  call Func0433(RCX)
  if IsBuggyFlying(RCX)==false then
    call UnitAddAbility2(RCX,'Amrf')
    call UnitRemoveAbility(RCX,'Amrf')
  endif
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  call SaveUnitHandle(HY,(ZAE),711,(RCX))
  call SaveInteger(HY,(ZAE),12,(R2I((1.25+0.25*QIE)/.02)))
  call SaveInteger(HY,(ZAE),34,0)
  call SaveInteger(HY,(ZAE),706,0)
  call SaveInteger(HY,(ZAE),707,1)
  call SaveReal(HY,(ZAE),47,((GetUnitX(RCX))*1.0))
  call SaveReal(HY,(ZAE),48,((GetUnitY(RCX))*1.0))
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("war3mapImported\\AntiGravityTarget.mdx",RCX,"origin")))
  call SaveEffectHandle(HY,(ZAE),176,(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetUnitX(RCX),GetUnitY(RCX))))
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func4325))
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func4327 takes unit SGE,integer QIE returns nothing
  if IsHeroUnitId(GetUnitTypeId(SGE))then
    if QIE==1 then
      call UnitAddAbilityTimedExF(SGE,'A27W',1,10,0)
    elseif QIE==2 then
      call UnitAddAbilityTimedExF(SGE,'A286',1,10,0)
    elseif QIE==3 then
      call UnitAddAbilityTimedExF(SGE,'A285',1,10,0)
    elseif QIE==4 then
      call UnitAddAbilityTimedExF(SGE,'A287',1,10,0)
    endif
  else
    if QIE==1 then
      call UnitAddAbilityTimedExF(SGE,'A291',1,10,0)
    elseif QIE==2 then
      call UnitAddAbilityTimedExF(SGE,'A28Z',1,10,0)
    elseif QIE==3 then
      call UnitAddAbilityTimedExF(SGE,'A292',1,10,0)
    elseif QIE==4 then
      call UnitAddAbilityTimedExF(SGE,'A290',1,10,0)
    endif
  endif
  call PlaySoundAtPos(sound053,GetUnitX(SGE),GetUnitY(SGE))
endfunction

function Func4328 takes nothing returns nothing
  local integer h=GetHandleId(GetTriggeringTrigger())
  call Func4327(LoadUnitHandle(HY,h,'targ'),GetUnitAbilityLevel(LoadUnitHandle(HY,h,'0src'),'A27G'))
endfunction

function Func4329 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local real d=75.*GetUnitAbilityLevel(SKE,'A27G')
  call PlaySoundAtPos(sound053,GetUnitX(SKE),GetUnitY(SKE))
  call Func0843(SKE,GetSpellTargetUnit(),d,9999,0.96,440.,0.25,"FADE",false,function Func4328)
  set SKE=null
endfunction

function Func4330 takes nothing returns nothing
  call UnitRemoveAbility(GetTriggerUnit(),'A27I')
  call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A27I',false)
endfunction

function Func4331 takes nothing returns nothing
  call UnitRemoveAbility(GetTriggerUnit(),'A27K')
  call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A27K',false)
endfunction

function Func4332 takes nothing returns nothing
  call UnitRemoveAbility(GetTriggerUnit(),'A27J')
  call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A27J',false)
endfunction

function Func4333 takes nothing returns boolean
  if GetUnitPointValue(GetTriggerUnit())==53 and IsUnitIllusion(GetTriggerUnit())==false and GetHeroLevel(GetTriggerUnit())==25 and GetHeroSkillPoints(GetTriggerUnit())==1 then
    call UnitAddAbility2(GetTriggerUnit(),'A3KK')
  endif
  return false
endfunction

function Func4334 takes integer b,integer u returns nothing
  set integers156[integer530]=b
  set integers157[integer530]=u
  set integer530=integer530+1
endfunction

function Func4335 takes integer i returns integer
  local integer k=0
  loop
    exitwhen k==integer530
    if i==integers156[k]or i==integers157[k]then
      return k
    endif
    set k=k+1
  endloop
  return-1
endfunction

function Func4336 takes integer id returns nothing
  set integers155[integer529]=id
  set integer529=integer529+1
endfunction

function Func4337 takes integer id returns boolean
  local integer i=0
  loop
    exitwhen i==integer529
    if id==integers155[i]then
      return true
    endif
    set i=i+1
  endloop
  return false
endfunction

function RubitchAddSpell takes nothing returns nothing
  local integer id=tt_int1
  local unit u=tt_unit1
  if IsUnitType(u,UNIT_TYPE_HERO)then
    call SaveInteger(HY,GetHandleId(u),705,id)
    call SaveInteger(HY,GetHandleId(u),712,GetUnitAbilityLevel(u,id))
  endif
  set u=null
endfunction

function Func4339 takes nothing returns boolean
  local integer id=GetSpellAbilityId()
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and Func4337(id)==false and IsItemAbility(id)==false then
    if HaveSavedInteger(UTable,'SPST',id)then
      set id=LoadInteger(UTable,'SPST',id)
    endif
    call SaveInteger(HY,GetHandleId(GetTriggerUnit()),705,id)
    call SaveInteger(HY,GetHandleId(GetTriggerUnit()),712,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
  endif
  return false
endfunction

function Func4340 takes unit u,integer id,integer QIE returns nothing
  if id=='A0ES'then
    call UnitAddAbility2(u,'A31S')
    call SetUnitAbilityLevel(u,'A31S',QIE)
  endif
  if id=='A0KX'then
    call Morph_InitTrigger(u)
  endif
  if id=='A2O2'then
    set tt_unit1=u
    call ExecuteFunc("Func4526")
  endif
endfunction

function Func4341 takes unit u returns nothing
  call UnitRemoveAbility(u,integers024[0])
  call UnitRemoveAbility(u,integers024[1])
  call UnitRemoveAbility(u,integers024[2])
  call UnitRemoveAbility(u,integers024[3])
  call UnitRemoveAbility(u,integers024[4])
  call UnitRemoveAbility(u,integers024[5])
  call UnitRemoveAbility(u,integers024[6])
  call UnitRemoveAbility(u,'A10S')
  call UnitRemoveAbility(u,'A0KW')
  call UnitRemoveAbility(u,'A0KX')
  call UnitRemoveAbility(u,'A13D')
  call UnitRemoveAbility(u,'A31S')
  call UnitRemoveAbility(u,'A2NI')
  call UnitRemoveAbility(u,'A1TU')
  call UnitRemoveAbility(u,'A24A')
  call UnitRemoveAbility(u,'A24B')
  call UnitRemoveAbility(u,'A1NH')
  call UnitRemoveAbility(u,'A20N')
  call UnitRemoveAbility(u,'A1Z2')
  call UnitRemoveAbility(u,'A1Z3')
  call UnitRemoveAbility(u,'A205')
  call UnitRemoveAbility(u,'A0GC')
  call UnitRemoveAbility(u,'A24E')
  call UnitRemoveAbility(u,'A2XJ')
  call UnitRemoveAbility(u,'A0HA')
  call UnitRemoveAbility(u,'A0SA')
  call UnitRemoveAbility(u,'A121')
  call UnitRemoveAbility(u,'A1WF')
  call UnitRemoveAbility(u,'A1S9')
  call UnitRemoveAbility(u,'A21H')
  call UnitRemoveAbility(u,'A1MN')
  call UnitRemoveAbility(u,'A06K')
  call UnitRemoveAbility(u,'A0NE')
  call UnitRemoveAbility(u,'A0MP')
  call UnitRemoveAbility(u,'A2MB')
  call UnitRemoveAbility(u,'A31K')
  call UnitRemoveAbility(u,'A31L')
  call UnitRemoveAbility(u,'A31Z')
  call UnitRemoveAbility(u,'A2FX')
endfunction

function Func4342 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),704))
  local integer ZBE=(LoadInteger(HY,(ZAE),713))
  if QIE==(LoadInteger(HY,(GetHandleId(source)),704))then
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  elseif GetTriggerEvalCount(RBX)>(80-ZBE)and IsDead(source)==false then
    call UnitRemoveAbility(source,QIE)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4343 takes unit source,integer ZAE,real result returns nothing
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,1,true)
  call TriggerAddCondition(RBX,Condition(function Func4342))
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveInteger(HY,(QIE),704,(ZAE))
  call SaveInteger(HY,(GetHandleId(source)),704,(-1))
  call SaveInteger(HY,(QIE),713,(R2I((TimerGetElapsed(GlobalTimer))-result)))
  set RBX=null
endfunction

function Func4344 takes unit u returns nothing
  local trigger t=LoadTriggerHandle(HY,GetHandleId(u),'A27H')
  local integer h=GetHandleId(t)
  local integer CCN=LoadInteger(HY,h,704)
  local real D1E=LoadInteger(HY,h,411)
  local integer z
  if h>0 then
    set z=GetUnitAbility(u,CCN)
    if z>0 and IsAbilityOnCooldown(z)==false then
      call UnitRemoveAbility(u,CCN)
    else
      call SetPlayerAbilityAvailable(GetOwningPlayer(u),CCN,false)
    endif
    if CCN=='A3UG' then
      set tt_unit1=u
      call ExecuteFunc("Func2747")
    endif
    call Func4341(u)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call Func4343(u,CCN,D1E)
    call RemoveSavedHandle(HY,GetHandleId(u),'A27H')
  endif
  set t=null
endfunction

function Func4345 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local integer QIE=(LoadInteger(HY,(ZAE),704))
  local integer ZBE=(LoadInteger(HY,(ZAE),34))
  local integer ZCE=GetUnitAbilityLevel(source,'A27H')
  local real result=(LoadReal(HY,(ZAE),411))
  if ZCE==0 then
    set ZCE=GetUnitAbilityLevel(source,'A2V9')
  endif
  if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    if ZBE==0 then
      call SaveInteger(HY,(ZAE),34,1)
      call DisplayTimedTextToPlayer(GetOwningPlayer(source),0,0,10,"|c00ff0303"+GetObjectName('n0LW')+"|r")
    else
      call Func4344(source)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()==QIE then
      call SaveReal(HY,(ZAE),411,(((TimerGetElapsed(GlobalTimer)))*1.0))
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call Func4344(source)
  endif
  set RBX=null
  set source=null
  return false
endfunction

function Func4346 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit YCI=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer iid=(LoadInteger(HY,h,704))
  local integer QIE=(LoadInteger(HY,h,5))
  local real result=60*(2+GetUnitAbilityLevel(YCI,'A27H'))
  call Func4344(YCI)
  if GetUnitAbilityLevel(YCI,'A27H')==0 then
    set result=60*(2+GetUnitAbilityLevel(YCI,'A2V9'))
  endif
  if(LoadInteger(HY,(GetHandleId(SGE)),3000))>0 then
    call SaveInteger(HY,(GetHandleId(YCI)),3000,((LoadInteger(HY,(GetHandleId(SGE)),3000))))
  endif
  if(LoadInteger(HY,(GetHandleId(SGE)),3001))>0 then
    call SaveInteger(HY,(GetHandleId(YCI)),3001,((LoadInteger(HY,(GetHandleId(SGE)),3001))))
  endif
  if(LoadInteger(HY,(GetHandleId(SGE)),3002))>0 then
    call SaveInteger(HY,(GetHandleId(YCI)),3002,((LoadInteger(HY,(GetHandleId(SGE)),3002))))
  endif
  if(LoadInteger(HY,(GetHandleId(SGE)),710))>0 then
    call SaveInteger(HY,(GetHandleId(YCI)),710,((LoadInteger(HY,(GetHandleId(SGE)),710))))
  endif
  if iid=='A3N5' then
    set tt_unit1=YCI
    call ExecuteFunc("Func2958")
  elseif iid=='A31G' and LoadBoolean(HY,GetHandleId(YCI),'A31F')==false then
    call Func4216(YCI,SGE)
  elseif iid=='A064' and LoadBoolean(HY,GetHandleId(YCI),'A064')==false then
    call Func2941(YCI,SGE)
  elseif iid=='A3UG' and HaveSavedHandle(HY,GetHandleId(YCI),'A3UF')==false then
    set tt_unit1=YCI
    call ExecuteFunc("Func2750")
  endif
  call PlaySoundAtPos(sound051,GetUnitX(YCI),GetUnitY(YCI))
  call SaveInteger(HY,(GetHandleId(YCI)),704,(iid))
  call SetPlayerAbilityAvailable(GetOwningPlayer(YCI),iid,true)
  call UnitAddAbility2(YCI,iid)
  call SetUnitAbilityLevel(YCI,iid,QIE)
  call Func4340(YCI,iid,QIE)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call SaveUnitHandle(HY,h,2,(YCI))
  call SaveInteger(HY,h,34,0)
  call SaveInteger(HY,h,704,(iid))
  call TriggerRegisterUnitEvent(t,YCI,EVENT_UNIT_SPELL_EFFECT)
  call TriggerRegisterTimerEvent(t,result,false)
  call TriggerRegisterDeathEvent(t,YCI)
  call TriggerRegisterTimerEvent(t,result-20,false)
  call TriggerAddCondition(t,Condition(function Func4345))
  call SaveTriggerHandle(HY,GetHandleId(YCI),'A27H',t)
  set t=null
  set YCI=null
  set SGE=null
endfunction

function Func4347 takes unit u,unit t,integer id,integer QIE returns nothing
  local trigger tt=AddProjectile(t,u,'h0DB',"Func4346",900,false)
  local integer h=GetHandleId(tt)
  call PlaySoundAtPos(sound050,GetUnitX(t),GetUnitY(t))
  call TextTagOnUnit(GetObjectName(id),3.75,t,0.024,170,0,255,216,IsNeutralsOrObserversOrAllies(GetOwningPlayer(u)))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,17,(t))
  call SaveInteger(HY,h,704,(id))
  call SaveInteger(HY,h,5,(QIE))
  set tt=null
endfunction

function Func4348 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit t=GetSpellTargetUnit()
  local integer CHN
  local integer id=(LoadInteger(HY,(GetHandleId(t)),705))
  if id!=0 then
    call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Nebula.mdx",t,"origin"))
    set CHN=Func4335(id)
    if CHN!=-1 then
      if GetSpellAbilityId()=='A27H' then
        set id=integers156[CHN]
      else
        set id=integers157[CHN]
      endif
    endif
    call Func4347(u,t,id,(LoadInteger(HY,(GetHandleId(t)),712)))
  endif
  set u=null
  set t=null
endfunction

function Func4349 takes nothing returns nothing
  call SaveInteger(UTable,'SPST','ANcr','A350')
  call SaveInteger(UTable,'SPST','A03G','A34Z')
  call SaveInteger(UTable,'SPST','A093','A34X')
  call SaveInteger(UTable,'SPST','A19Z','A34Y')
  call SaveInteger(UTable,'SPST','A0VQ','A3JZ')
  call SaveInteger(UTable,'SPST','A0VK','A3K0')
  call SaveInteger(UTable,'SPST','A073','A3K1')
  call SaveInteger(UTable,'SPST','A0EY','A3K6')
  call SaveInteger(UTable,'SPST','A0FH','A3K7')
  call SaveBoolean(UTable,'SPSA','A0ES',true)
endfunction

function Func4350 takes nothing returns nothing
  call Func4336('A3CT')
  call Func4336('A3CV')
  call Func4336('A38R')
  call Func4336('A38V')
  call Func4336('A38K')
  call Func4336('A3DP')
  call Func4336('A3BP')
  call Func4336('A395')
  call Func4336('A39K')
  call Func4336('A39C')
  call Func4336('A397')
  call Func4336('A31K')
  call Func4336('A30Z')
  call Func4336('A1WH')
  call Func4336('A308')
  call Func4336('A31T')
  call Func4336('A15J')
  call Func4336('A0AG')
  call Func4336('A3JS')
  call Func4336('A0BE')
  call Func4336('A1TX')
  call Func4336('A229')
  call Func4336('A1RI')
  call Func4336('A1C0')
  call Func4336('A11T')
  call Func4336('A2NE')
  call Func4336('A13D')
  call Func4336('A2NI')
  call Func4336('A1TU')
  call Func4336('A24A')
  call Func4336('A24B')
  call Func4336('A1NH')
  call Func4336('A20N')
  call Func4336('A1Z2')
  call Func4336('A1Z3')
  call Func4336('A205')
  call Func4336('A0GC')
  call Func4336('A24E')
  call Func4336('A2XJ')
  call Func4336('A0HA')
  call Func4336('A0SA')
  call Func4336('A121')
  call Func4336('A1WF')
  call Func4336('A1S9')
  call Func4336('A21H')
  call Func4336('A1MN')
  call Func4336('A0KX')
  call Func4336('A0KW')
  call Func4336('A0A5')
  call Func4336('A0BG')
  call Func4336('A0Bg')
  call Func4336('A21W')
  call Func4336('A21X')
  call Func4336('A21V')
  call Func4336('A21Y')
  call Func4336('A1GU')
  call Func4336('A2MB')
  call Func4336('A2O9')
  call Func4336('A0QN')
  call Func4336('A026')
  call Func4336('A3E4')
  call Func4336('AHfa')
  call Func4336('A09V')
  call Func4336('A0DY')
  call Func4336('A1WB')
  call Func4336('A0LZ')
  call Func4336('A0OI')
  call Func4336('A2UM')
  call Func4336('A3Q4')
  call Func4336('A3Q5')
  call Func4336('A0NS')
  call Func4336('A1DA')
  call Func4336('A28Q')
  call Func4336('A0WQ')
  call Func4336('A11N')
  call Func4336('A27F')
  call Func4336('A27X')
  call Func4336('A27G')
  call Func4336('A27H')
  call Func4336('A0Q5')
  call Func4336('A0TK')
  call Func4336('AIbk')
  call Func4336('A0JY')
  call Func4336('A1AC')
  call Func4336('AIpl')
  call Func4336('AIpr')
  call Func4336('Aeat')
  call Func4336('A3KO')
  call Func4336('A2VG')
  call Func4336('A0K0')
  call Func4336('A0H7')
  call Func4336('A0H6')
  call Func4336('A0FO')
  call Func4336('A02X')
  call Func4336('A2WH')
  call Func4336('A2WI')
  call Func4336('AIsw')
  call Func4336('AItb')
  call Func4336('A0B6')
  call Func4336('A1R5')
  call Func4336('A206')
  call Func4336('A1FD')
  call Func4336('A1FO')
  call Func4336('A1FQ')
  call Func4336('A1IO')
  call Func4336('A0B8')
  call Func4336('A1WE')
  call Func4336('A0T8')
  call Func4336('A0T7')
  call Func4336('A017')
  call Func4336('A1QD')
  call Func4336('A1FP')
  call Func4336('A0JL')
  call Func4336('ACch')
  call Func4336('AIxk')
  call Func4336('AIpg')
  call Func4336('A11F')
  call Func4336('A11E')
  call Func4336('A0S3')
  call Func4336('A11D')
  call Func4336('A11G')
  call Func4336('A11H')
  call Func4336('A0T9')
  call Func4336('A15W')
  call Func4336('AChx')
  call Func4336('A0FD')
  call Func4336('A1T7')
  call Func4336('A19M')
  call Func4336('A02O')
  call Func4336('A08Y')
  call Func4336('A08Z')
  call Func4336('A090')
  call Func4336('A092')
  call Func4336('A0HB')
  call Func4336('A0D3')
  call Func4336('A0DF')
  call Func4336('A02W')
  call Func4336('A0CK')
  call Func4336('A0K7')
  call Func4336('A0JT')
  call Func4336('AIda')
  call Func4336('A269')
  call Func4336('A1WO')
  call Func4336('A1EW')
  call Func4336('A1MO')
  call Func4336('A3E8')
  call Func4336('A1ZI')
  call Func4336('A1ZH')
  call Func4336('A1ZW')
  call Func4336('A231')
  call Func4336('A3AG')
  call Func4336('A12W')
  call Func4336('A14A')
  call Func4336('A1Q8')
  call Func4336('A28Y')
  call Func4336('A28D')
  call Func4336('A28F')
  call Func4336('A2N1')
  call Func4336('A2VE')
  call Func4336('A2JO')
  call Func4336('A2JQ')
  call Func4336('A2JP')
  call Func4336('A2JR')
  call Func4336('A2JL')
  call Func4336('A2FX')
  call Func4336('A31Z')
  call Func4336('A2K1')
  call Func4336('A2K4')
  call Func4336('A2K7')
  call Func4336('A2KG')
  call Func4336('A2KE')
  call Func4336('A2KH')
  call Func4336('A2K9')
  call Func4336('A2EA')
  call Func4336('A2TH')
  call Func4336('A330')
  call Func4336('A331')
  call Func4336('A332')
  call Func4336('A333')
  call Func4336('A334')
  call Func4336('A335')
  call Func4336('A336')
  call Func4336('A2XK')
  call Func4336('A3FA')
  call Func4336('A2TJ')
  call Func4336('A2TK')
  call Func4336('A3DB')
  call Func4336('A2LI')
  call Func4334('A1W8','A1W9')
  call Func4334('A31F','A31G')
  call Func4334('A1RK','A315')
  call Func4334('A1A1','A30S')
  call Func4334('A07U','A38E')
  call Func4334('A2CI','A38C')
  call Func4334('A2O6','A384')
  call Func4334('A0CT','A3DM')
  call Func4334('A09U','A3D0')
  call Func4334('A1YQ','A3DE')
  call Func4334('A19O','A1MV')
  call Func4334('A15S','A3J3')
  call Func4334('A21F','A21G')
  call Func4334('A05T','A08H')
  call Func4334('A01P','A09Z')
  call Func4334('A095','A09W')
  call Func4334('A0MU','A0A2')
  call Func4334('A054','A00U')
  call Func4334('A067','A08P')
  call Func4334('A0CC','A02Z')
  call Func4334('A28R','A28S')
  call Func4334('A00H','A0A1')
  call Func4334('A03R','A0AV')
  call Func4334('A013','A0A6')
  call Func4334('A0NT','A0NX')
  call Func4334('A0LC','A3NY')
  call Func4334('A29G','A29H')
  call Func4334('A0Z8','A1CV')
  call Func4334('A0IN','A1AW')
  call Func4334('A0M1','A1AX')
  call Func4334('A03K','A1B0')
  call Func4334('A0O5','A1B1')
  call Func4334('A06O','A3NX')
  call Func4334('A0QR','A1B3')
  call Func4334('A21Y','A1GU')
  call Func4334('A01Y','A1AZ')
  call Func4334('A0MQ','A1B6')
  call Func4334('A06I','A3NV')
  call Func4334('A12P','A1D6')
  call Func4334('A0J1','A1D7')
  call Func4334('A0G4','A1D8')
  call Func4334('A02Q','A1D9')
  call Func4334('A0NS','A1DA')
  call Func4334('A10Q','A1DB')
  call Func4334('A0AK','A1FY')
  call Func4334('A0E2','A1MR')
  call Func4334('A19O','A1MV')
  call Func4334('A0DH','A1OB')
  call Func4334('A0S8','A1QP')
  call Func4334('S008','S00U')
  call Func4334('A1AO','A1UV')
  call Func4334('A080','A1UZ')
  call Func4334('A0OK','A1VW')
  call Func4334('A0DY','A1WB')
  call Func4334('A0QK','A21Q')
  call Func4334('A1T5','A235')
  call Func4334('A0MW','A27C')
  call Func4334('A0O2','A289')
  call Func4334('A1NE','A2IG')
  call Func4334('A0L3','A2QC')
  call Func4334('A1MI','A2QE')
  call Func4334('A0ER','A2S8')
  call Func4334('A2BG','A2TU')
  call Func4334('A1BX','A2TX')
  call Func4334('A27H','A2V9')
  call Func4334('A1U6','A2V8')
  call Func4334('A049','A2WB')
  call Func4334('A05E','A2WA')
  call Func4334('A0KV','A3UG')
endfunction

function Func4351 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4339))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_HERO_SKILL)
  call TriggerAddCondition(t,Condition(function Func4333))
  set t=null
  call Func4350()
  call Func4349()
  call PreloadAbility('A282')
  call AddToPurgeList('A27W','PRGE')
  call AddToPurgeList('A286','PRGE')
  call AddToPurgeList('A285','PRGE')
  call AddToPurgeList('A287','PRGE')
  call AddToPurgeList('A291','PRGE')
  call AddToPurgeList('A28Z','PRGE')
  call AddToPurgeList('A292','PRGE')
  call AddToPurgeList('A290','PRGE')
  call PreloadAbility('A27F')
  call PreloadAbility('A27X')
  call PreloadAbility('A27H')
  call PreloadAbility('A2V9')
  call PreloadAbility('A27V')
  call PreloadAbility('A27G')
  call PreloadAbility('A27I')
  call PreloadAbility('A27K')
  call PreloadAbility('A27J')
endfunction

function Func4352 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'A27P')
endfunction

function Func4353 takes nothing returns nothing
  call UnitAddAbility3(GetEnumUnit(),'A27P',integer531)
endfunction

function Func4354 takes nothing returns boolean
  return IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())
endfunction

function Func4355 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local group g=(LoadGroupHandle(HY,h,340))
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local group gg=GetAvailableGroup()
  if u==null then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call ForGroup(g,function Func4352)
    call KillGroup(g)
    call KillGroup(gg)
    return false
  endif
  set tt_unit1=u
  set integer531=GetUnitAbilityLevel(u,'A27V')
  if IsDead(u)==false and GetUnitAbilityLevel(u,'A36D')==0 then
    set tt_unit1=u
    call GroupEnumUnitsInRange(gg,x,y,925,Condition(function Func4354))
  endif
  call GroupRemoveGroup(gg,g)
  call ForGroup(g,function Func4352)
  if IsDead(u)==false then
    call ForGroup(gg,function Func4353)
  endif
  call SaveGroupHandle(HY,h,340,(gg))
  call KillGroup(g)
  set t=null
  set u=null
  set g=null
  set gg=null
  return false
endfunction

function Func4356 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=GetTriggerUnit()
  call TriggerRegisterTimerEvent(RBX,0.3,true)
  call TriggerAddCondition(RBX,Condition(function Func4355))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveGroupHandle(HY,(ZAE),340,(GetAvailableGroup()))
  call HideAbility('A27N')
  call HideAbility('A27O')
  call HideAbility('A27M')
  call HideAbility('A27P')
  set RBX=null
  set source=null
endfunction

function Func4357 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit E9O=LoadUnitHandle(HY,h,1)
  local unit d=LoadUnitHandle(HY,h,0)
  local real CTN=LoadReal(HY,h,0)
  local integer c=LoadInteger(HY,h,0)+1
  if IsDead(E9O)and LoadBoolean(HY,h,0)==false then
    call SaveBoolean(HY,h,0,true)
  endif
  if LoadBoolean(HY,h,0)==false then
    call SetUnitPosition(d,GetUnitX(E9O),GetUnitY(E9O))
    if GetWidgetLife(d)>CTN then
      call SetWidgetLife(E9O,GetWidgetLife(E9O)+(GetWidgetLife(d)-CTN))
      call SaveReal(HY,h,0,GetWidgetLife(d))
    endif
  endif
  if c>2500 or IsDead(E9O)or IsDead(d)then
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
    call KillUnit(d)
    call RemoveSavedHandle(HY,GetHandleId(E9O),'EXOR')
  else
    call SaveInteger(HY,h,0,c)
  endif
  set d=null
  set E9O=null
  set t=null
endfunction

function Func4358 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit d=CreateUnit(GetOwningPlayer(u),'e01V',GetUnitX(u),GetUnitY(u),0)
  local timer t=CreateTimer()
  local integer castid=GetSpellAbilityId()
  local integer id='A073'
  call KillUnit(LoadUnitHandle(HY,GetHandleId(u),'EXOR'))
  call UnitAddAbility2(d,id)
  call SetUnitAbilityLevel(d,id,GetUnitAbilityLevel(u,id))
  call IssueImmediateOrderByIdExFunc(d,852556)
  call SetWidgetLife(d,1)
  call TimerStart(t,0.02,true,function Func4357)
  call SaveUnitHandle(HY,GetHandleId(t),0,d)
  call SaveUnitHandle(HY,GetHandleId(t),1,u)
  call SaveReal(HY,GetHandleId(t),0,1)
  call SaveInteger(HY,GetHandleId(t),0,0)
  call SaveUnitHandle(HY,GetHandleId(u),'EXOR',d)
  set t=null
  set u=null
  set d=null
endfunction

function Func4359 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
endfunction

function Func4360 takes nothing returns boolean
  if GetUnitTypeId(GetTriggerUnit())=='H00S' then
    call Func4359()
  endif
  return false
endfunction

function Func4361 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func4360))
  set t=null
  call AddDispellableBuff('B0AE')
  call AddDispellableBuff('B0AD')
  call AddToPurgeList('B0AF','PRGE')
  call AddToPurgeList('B08B','PRGE')
  call AddToPurgeList('A3T7','PRGE')
  call AddToPurgeList('A3JL','PRGA')
  call AddWrapper("Func2540",3)
endfunction

function Func4362 takes nothing returns nothing
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedDamage.mdl",GetEnumUnit(),"chest"))
  call DamageTarget(unit263,GetEnumUnit(),1,(20+10*integer532)/5)
endfunction

function Func4363 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local integer QIE=GetUnitAbilityLevel(SKE,'A2HS')
  local group g
  if GetUnitAbilityLevel(SKE,'B0FP')==0 and GetUnitAbilityLevel(SKE,'B0FQ')==0 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call UnitRemoveAbility(SKE,'A2H7')
    call UnitRemoveAbility(SKE,'B0FO')
    call UnitRemoveAbility(SKE,'A2IX')
    call UnitRemoveAbility(SKE,'A2IW')
    call UnitRemoveAbility(SKE,'A2IV')
    call UnitRemoveAbility(SKE,'A2IY')
  else
    set tt_unit1=SKE
    set unit263=SKE
    set integer532=QIE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(SKE),GetUnitY(SKE),425,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func4362)
    call KillGroup(g)
  endif
  set g=null
  set t=null
  set SKE=null
  return false
endfunction

function Func4364 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SKE),GetUnitY(SKE),0)
  local integer QIE=GetUnitAbilityLevel(SKE,'A2HS')
  call UnitAddAbility(d,'A2H5')
  call SetUnitAbilityLevel(d,'A2H5',QIE)
  call IssueTargetOrder(d,"antimagicshell",SKE)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerAddCondition(t,Condition(function Func4363))
  call SaveUnitHandle(HY,(h),2,(SKE))
  set SKE=null
  set d=null
  set t=null
endfunction

function Func4365 takes unit u returns nothing
  call UnitRemoveAbility(u,'A2JH')
endfunction

function Func4366 takes unit C1N,unit SGE returns nothing
  local real a=GetRandomReal(0,360)
  local real x=GetUnitX(SGE)+50*Cos(a*bj_DEGTORAD)
  local real y=GetUnitY(SGE)+50*Sin(a*bj_DEGTORAD)
  call SetUnitPosition(C1N,x,y)
  call SetUnitFacing(C1N,bj_RADTODEG*Atan2(GetUnitY(SGE)-GetUnitY(C1N),GetUnitX(SGE)-GetUnitX(C1N)))
  call SetUnitAnimation(C1N,"Attack")
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Fire_Blink_2.mdx",C1N,"chest"))
  call Func4365(C1N)
  if IsUnitType(SGE,UNIT_TYPE_HERO)or IsUnitIllusion(SGE)then
    call UnitAddAbility3(C1N,'A2JH',GetUnitAbilityLevel(C1N,'A2H0'))
    call UnitRemoveAbility(C1N,'A2JF')
  else
    call UnitAddAbility(C1N,'A2JF')
  endif
  call Func0226(C1N)
  call IssueTargetOrderByIdFuckingEx(C1N,851985,SGE,false)
endfunction

function Func4367 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit C1N=(LoadUnitHandle(HY,h,2))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local real ox=(LoadReal(HY,h,189))
  local real oy=(LoadReal(HY,h,190))
  local group C3N=(LoadGroupHandle(HY,h,187))
  local group gg=(LoadGroupHandle(HY,h,22))
  local unit SGE=null
  local boolean b=false
  local fogmodifier fm=(LoadFogModifierHandle(HY,h,42))
  local integer QIE=GetUnitAbilityLevel(C1N,'A2H0')
  loop
    exitwhen FirstOfGroup(gg)==null or b
    set SGE=FirstOfGroup(gg)
    if IsDead(SGE)then
      call GroupRemoveUnit(gg,SGE)
    elseif(IsUnitInGroup(SGE,C3N)and SGE!=null)then
      set SGE=null
      set b=false
    else
      set b=true
    endif
  endloop
  call SetUnitInvulnerable(C1N,true)
  if b==false or((LoadInteger(HY,(GetHandleId(C1N)),4319))==1)then
    call SaveInteger(HY,(GetHandleId(C1N)),4318,2)
    call UnitRemoveAbility(C1N,'A2GR')
    call UnitRemoveAbility(C1N,'B0FM')
    call UnitRemoveAbility(C1N,'A2JF')
    call Func4365(C1N)
    if(LoadInteger(HY,GetHandleId(C1N),4319)!=1)then
      call SetUnitX(C1N,ox)
      call SetUnitY(C1N,oy)
    endif
    call SetUnitVertexColor(C1N,255,255,255,255)
    call SetUnitPathing2(C1N,true)
    call SetUnitInvulnerable(C1N,false)
    call SetUnitTimeScale(C1N,1)
    call KillGroup(C3N)
    call KillGroup(gg)
    call RemoveUnit((LoadUnitHandle(HY,h,19)))
    call FogModifierStop(fm)
    call DestroyFogModifier(fm)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    call GroupAddUnit(C3N,SGE)
    call GroupRemoveUnit(gg,SGE)
    call Func4366(C1N,SGE)
  endif
  set t=null
  set C1N=null
  set SGE=null
  set gg=null
  set C3N=null
  return false
endfunction

function Func4368 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit C1N=LoadUnitHandle(HY,h,0)
  local real x=LoadReal(HY,h,1)
  local real y=LoadReal(HY,h,2)
  local integer QIE=LoadInteger(HY,h,0)
  local trigger tt=CreateTrigger()
  local integer ht=GetHandleId(tt)
  local fogmodifier fm=CreateFogModifierRadius(GetOwningPlayer(C1N),FOG_OF_WAR_VISIBLE,x,y,600,true,true)
  local unit d=CreateUnit(GetOwningPlayer(C1N),'h0E7',GetUnitX(C1N),GetUnitY(C1N),GetUnitFacing(C1N))
  local group g=GetAvailableGroup()
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  call SetUnitVertexColor(d,255,255,255,100)
  call FogModifierStart(fm)
  call SaveInteger(HY,(GetHandleId(C1N)),4318,1)
  set tt_unit1=C1N
  call GroupEnumUnitsInRange(g,x,y,150+100*QIE+25,Condition(function Func0823))
  call SetUnitVertexColor(C1N,255,255,255,125)
  call SetUnitPathing2(C1N,false)
  call SetUnitInvulnerable(C1N,true)
  call SetUnitTimeScale(C1N,3)
  call TriggerRegisterTimerEvent(tt,0.2,true)
  call TriggerAddCondition(tt,Condition(function Func4367))
  call SaveUnitHandle(HY,(ht),2,(C1N))
  call SaveReal(HY,(ht),6,((x)*1.0))
  call SaveReal(HY,(ht),7,((y)*1.0))
  call SaveReal(HY,(ht),189,((GetUnitX(C1N))*1.0))
  call SaveReal(HY,(ht),190,((GetUnitY(C1N))*1.0))
  call SaveGroupHandle(HY,(ht),187,(GetAvailableGroup()))
  call SaveGroupHandle(HY,(ht),22,(g))
  call SaveFogModifierHandle(HY,(ht),42,(fm))
  call SaveUnitHandle(HY,(ht),19,(d))
  call UnitAddAbility2(C1N,'A2GR')
  call TriggerEvaluate(tt)
  set C1N=null
  set tt=null
  set fm=null
  set d=null
  set g=null
  set t=null
endfunction

function Func4369 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local integer QIE=GetUnitAbilityLevel(u,'A2H0')
  local integer h=DelayedCallBack(0,function Func4368)
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,1,x)
  call SaveReal(HY,h,2,y)
  call SaveInteger(HY,h,0,QIE)
  set u=null
endfunction

function Func4370 takes nothing returns nothing
  call UnitRemoveAbility(unit004,'A2GR')
  call UnitRemoveAbility(unit004,'B0FM')
  call UnitRemoveAbility(unit004,'A2JF')
  call Func4365(unit004)
  call UnitAddAbility(unit004,'A2H2')
  call UnitRemoveAbility(unit004,'A2H2')
endfunction

function Func4371 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer QIE=LoadInteger(HY,h,5)
  local integer c=1
  local real d
  if QIE==1 then
    set c=1
    set d=80
  endif
  if QIE==2 then
    set c=2
    set d=60
  endif
  if QIE==3 then
    set c=2
    set d=120
  endif
  if QIE==4 then
    set c=3
    set d=100
  endif
  if GetTriggerEvalCount(t)==c then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  call DamageTarget(SKE,SGE,1,d)
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4372 takes unit SKE,unit SGE,real D1E,integer QIE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call Func0847(SGE,D1E,'A3P9','B3FN',0)
  call StunTargetEx(SGE,0.1,false)
  call Func1330(SKE,SGE,'A3P9')
  call TriggerAddCondition(t,Condition(function Func4371))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,h,5,QIE)
  call TriggerRegisterTimerEvent(t,0,false)
  call TriggerRegisterTimerEvent(t,1,true)
  set t=null
endfunction

function Func4373 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local unit C7N=null
  local unit C8N=null
  local unit C9N=null
  local integer tc=0
  local unit u2
  local real D1E=1.
  local integer QIE=GetUnitAbilityLevel(SKE,'A2H3')
  if QIE==4 then
    set D1E=3.
  elseif QIE!=1 then
    set D1E=2.
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,x,y,425,Condition(function Func0822))
  loop
    exitwhen FirstOfGroup(g)==null or tc==2
    set u2=GroupPickRandomUnit(g)
    call GroupRemoveUnit(g,u2)
    if u2!=null then
      if tc==0 then
        set C7N=u2
      elseif tc==1 then
        set C8N=u2
      endif
      set tc=tc+1
    endif
  endloop
  call KillGroup(g)
  if C7N!=null then
    call Func4372(SKE,C7N,D1E,QIE)
  endif
  if C8N!=null then
    call Func4372(SKE,C8N,D1E,QIE)
  endif
  set g=null
  set SKE=null
  set u2=null
  set C7N=null
  set C8N=null
  set C9N=null
endfunction

function Func4374 takes nothing returns boolean
  local unit source=(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),2))
  local integer ZAE=GetHandleId(source)
  local integer QIE=0
  local real result=(TimerGetElapsed(GlobalTimer))
  local integer ZBE=(LoadInteger(HY,(ZAE),749))
  local real ZEE
  local real ZWE
  local real ZYE
  loop
    exitwhen QIE>ZBE
    set ZYE=(LoadReal(HY,(ZAE),(10000+QIE)))
    if ZYE+10>result then
      set ZEE=(LoadReal(HY,(ZAE),(11000+QIE)))
      set ZWE=(LoadReal(HY,(ZAE),(12000+QIE)))
    endif
    set QIE=QIE+1
  endloop
  set source=null
  return false
endfunction

function Func4375 takes integer ZAE,integer QIE,real result,real ZEE returns boolean
  local real ZWE
  local real ZYE
  local real ICX
  local integer ZBE=0
  local real N1X=(TimerGetElapsed(GlobalTimer))
  loop
    exitwhen ZBE>QIE
    set ICX=(LoadReal(HY,(ZAE),(10000+ZBE)))
    if ICX+10>N1X then
      set ZWE=(LoadReal(HY,(ZAE),(11000+ZBE)))
      set ZYE=(LoadReal(HY,(ZAE),(12000+ZBE)))
      if DistanceBetweenXY(ZWE,ZYE,result,ZEE)<75 then
        return true
      endif
    endif
    set ZBE=ZBE+1
  endloop
  return false
endfunction

function Func4376 takes integer ZAE,integer QIE returns integer
  local real result
  local integer ZBE=0
  local real ZEE=(TimerGetElapsed(GlobalTimer))
  loop
    exitwhen ZBE>QIE
    set result=(LoadReal(HY,(ZAE),(10000+ZBE)))
    if result+10<ZEE then
      return ZBE
    endif
    set ZBE=ZBE+1
  endloop
  return-1
endfunction

function Func4377 takes unit source,integer ZAE,real result,real ZEE returns nothing
  local integer QIE=GetHandleId(source)
  local integer ZBE=(LoadInteger(HY,(QIE),749))
  local integer ZCE
  if Func4375(QIE,ZBE,result,ZEE)then
    return
  endif
  set ZCE=Func4376(QIE,ZBE)
  if ZCE==-1 then
    set ZCE=ZBE
    set ZBE=ZBE+1
    call SaveInteger(HY,(QIE),749,(ZBE))
  endif
  call SaveInteger(HY,(QIE),13000,(ZAE))
  call SaveReal(HY,(QIE),10000,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call SaveReal(HY,(QIE),11000,((result)*1.0))
  call SaveReal(HY,(QIE),11000,((ZEE)*1.0))
endfunction

function Func4378 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.5,true)
  call TriggerAddCondition(RBX,Condition(function Func4374))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set source=null
  set RBX=null
endfunction

function Func4379 takes nothing returns nothing
  call DamageTarget(unit264,GetEnumUnit(),1,50+integer533*50)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",GetEnumUnit(),"origin"))
endfunction

function Func4380 takes unit source,unit RCX,real result,real ZEE returns nothing
  local group g
  call KillUnit(RCX)
  call Func0692("war3mapImported\\Firaga_2.mdx",result,ZEE,2)
  set g=GetAvailableGroup()
  set tt_unit1=source
  set unit264=source
  set integer533=GetUnitAbilityLevel(source,'A2JK')
  call GroupEnumUnitsInRange(g,result,ZEE,475,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call UnitRemoveAbility(source,'A04R')
  call ForGroup(g,function Func4379)
  call UnitAddAbility2(source,'A04R')
  call KillGroup(g)
  set g=null
endfunction

function Func4381 takes unit u,unit d returns nothing
  local integer hu=GetHandleId(u)
  local integer DBN=(LoadInteger(HY,(hu),746))
  local unit DCN
  local integer i=1
  local integer k
  loop
    exitwhen i>DBN
    set DCN=(LoadUnitHandle(HY,(hu),(1450+i)))
    if DCN==d then
      set DBN=DBN-1
      call SaveUnitHandle(HY,(hu),(1450+i),((LoadUnitHandle(HY,(hu),(1450+i+1)))))
      call SaveInteger(HY,(hu),746,(DBN))
      set k=i+1
      loop
        exitwhen k>DBN
        call SaveUnitHandle(HY,(hu),(1450+k),((LoadUnitHandle(HY,(hu),(1450+k+1)))))
        set k=k+1
      endloop
    endif
    set i=i+1
  endloop
  set DCN=null
endfunction

function Func4382 takes unit u,real WNE returns nothing
  local texttag tt=LoadTextTagHandle(HY,GetHandleId(u),'time')
  call SetTextTagText(tt,I2S(R2I(WNE)),0.025)
  if LoadBoolean(HY,GetHandleId(GetTriggeringTrigger()),'000d')==false then
    call SetTextTagPosUnit(tt,u,-32)
    call SetTextTagColor(tt,255,200,0,255)
    call SetTextTagVelocity(tt,0,0)
    call SetTextTagVisibility(tt,IsNeutralsOrObserversOrAllies(GetOwningPlayer(u)))
    call SetTextTagPermanent(tt,true)
  endif
  set tt=null
endfunction

function Func4383 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit d=(LoadUnitHandle(HY,h,19))
  local real dx=GetUnitX(d)
  local real dy=GetUnitY(d)
  local real tX=(LoadReal(HY,h,47))
  local real tY=(LoadReal(HY,h,48))
  local real GXE= AngleBetweenXY(dx,dy,tX,tY)*bj_DEGTORAD
  local real nx
  local real ny
  local real ILX=DistanceBetweenXY(dx,dy,tX,tY)
  local real ms=GetUnitMoveSpeed(SKE)*2.5*0.02
  local group g
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call DestroyTextTag(LoadTextTagHandle(HY,GetHandleId(d),'time'))
    call Func4381(SKE,d)
    call DestroyEffect(LoadEffectHandle(HY,h,175))
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call DestroyEffect(LoadEffectHandle(HY,h,177))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    if ILX<ms then
      set nx=tX
      set ny=tY
      call Func4382(d,45-GetTriggerEvalCount(t)*0.02)
      call SetUnitAnimationByIndex(d,1)
    else
      set nx=dx+ms*Cos(GXE)
      set ny=dy+ms*Sin(GXE)
    endif
    call SetUnitX(d,nx)
    call SetUnitY(d,ny)
  endif
  set t=null
  set SKE=null
  set d=null
  return false
endfunction

function Func4384 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=SafeX50(GetSpellTargetX())
  local real y=SafeY50(GetSpellTargetY())
  local real GXE= AngleBetweenXY(GetUnitX(u),GetUnitY(u),x,y)*bj_DEGTORAD
  local integer hu=GetHandleId(u)
  local integer DBN=(LoadInteger(HY,(hu),746))
  local integer QIE=GetUnitAbilityLevel(u,'A2JK')
  local unit d=CreateUnit(GetOwningPlayer(u),'h0E8',GetUnitX(u),GetUnitY(u),GXE*bj_RADTODEG)
  local trigger t
  local integer ZCE=1
  set DBN=DBN+1
  call SaveUnitHandle(HY,(hu),(1450+DBN),(d))
  call SaveInteger(HY,(hu),746,(DBN))
  set t=CreateTrigger()
  set hu=GetHandleId(t)
  call SetUnitVertexColor(d,255,255,255,75)
  call SetUnitTimeScale(d,2)
  call SetUnitAnimationByIndex(d,0)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func4383))
  call TriggerRegisterDeathEvent(t,d)
  call SaveTextTagHandle(HY,GetHandleId(d),'time',CreateTextTag())
  call UnitApplyTimedLife(d,'BTLF',45)
  call SaveEffectHandle(HY,(hu),175,(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",d,"hand right alternate")))
  call SaveEffectHandle(HY,(hu),176,(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",d,"hand left alternate")))
  call SaveEffectHandle(HY,(hu),177,(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",d,"origin")))
  call SaveUnitHandle(HY,(hu),2,(u))
  call SaveUnitHandle(HY,(hu),19,(d))
  call SaveReal(HY,(hu),47,x)
  call SaveReal(HY,(hu),48,y)
  set u=null
  set t=null
  set d=null
endfunction

function Func4385 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer h=(LoadInteger(HY,(GetHandleId(u)),747))
  if h>0 then
    call Func4384()
    call UnitRemoveAbility(u,integers158[h])
    set h=h-1
    call SaveInteger(HY,(GetHandleId(u)),747,(h))
    call UnitAddAbility2(u,integers158[h])
  else
    call Error(GetOwningPlayer(GetTriggerUnit()),GetObjectName('TX0U'))
  endif
  set u=null
endfunction

function Func4386 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='h0E8'
endfunction

function Func4387 takes nothing returns nothing
  local real result=DistanceBetweenXY(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),real124,real125)
  if result>real126 and IsDead(GetEnumUnit())==false then
    set unit265=GetEnumUnit()
    set real126=result
  endif
endfunction

function Func4388 takes unit source,real result,real ZEE returns unit
  local group g=GetAvailableGroup()
  set unit265=null
  set real126=-1
  set real124=result
  set real125=ZEE
  call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(source),Condition(function Func4386))
  call ForGroup(g,function Func4387)
  call KillGroup(g)
  set g=null
  return unit265
endfunction

function Func4389 takes unit u,unit d returns real
  local real ILX=DistanceBetweenUnits(u,d)
  local real WNE=ILX/1300.0
  if WNE>0.4 then
    return ILX/0.4
  endif
  return 1300.0
endfunction

function Func4390 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local real PII=(LoadReal(HY,h,47))
  local real PAI=(LoadReal(HY,h,48))
  local unit d=(LoadUnitHandle(HY,h,19))
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local real DPN=(LoadReal(HY,h,6))
  local real DQN=(LoadReal(HY,h,7))
  local real GXE
  local real nx
  local real ny
  local real ILX
  local real NBX=(LoadReal(HY,h,44))
  local real FGE=NBX*0.02
  local group g
  local integer QIE=(LoadInteger(HY,h,34))
  if d!=null then
    set DPN=GetUnitX(d)
    set DQN=GetUnitY(d)
    call SaveReal(HY,h,6,((DPN)*1.0))
    call SaveReal(HY,h,7,((DQN)*1.0))
  endif
  set GXE= AngleBetweenXY(x,y,DPN,DQN)*bj_DEGTORAD
  set ILX=DistanceBetweenXY(x,y,DPN,DQN)
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SaveInteger(HY,(GetHandleId(SKE)),4319,2)
    call SetUnitVertexColor(SKE,255,255,255,255)
    call SetUnitTimeScale(SKE,1)
    call SetUnitAnimationByIndex(SKE,0)
    call SetUnitPathing2(SKE,true)
    call SetUnitInvulnerable(SKE,false)
    call UnitRemoveAbility(SKE,'A04R')
    call DestroyEffect(LoadEffectHandle(HY,h,175))
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call DestroyEffect(LoadEffectHandle(HY,h,177))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif ILX<FGE then
    call SetUnitX(SKE,DPN)
    call SetUnitY(SKE,DQN)
    call Func4380(SKE,d,DPN,DQN)
    set d=Func4388(SKE,PII,PAI)
    if d==null then
      call SaveInteger(HY,(GetHandleId(SKE)),4319,2)
      call KillTrees(DPN,DQN,100)
      call SetUnitVertexColor(SKE,255,255,255,255)
      call SetUnitTimeScale(SKE,1)
      call SetUnitAnimationByIndex(SKE,1)
      call SetUnitPathing2(SKE,true)
      call SetUnitInvulnerable(SKE,false)
      call UnitRemoveAbility(SKE,'A04R')
      call DestroyEffect(LoadEffectHandle(HY,h,175))
      call DestroyEffect(LoadEffectHandle(HY,h,176))
      call DestroyEffect(LoadEffectHandle(HY,h,177))
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
    else
      call SaveInteger(HY,h,34,(QIE+1))
      call SaveUnitHandle(HY,h,19,(d))
      call SaveReal(HY,h,44,((Func4389(SKE,d))*1.0))
      call SaveReal(HY,h,6,((GetUnitX(d))*1.0))
      call SaveReal(HY,h,7,((GetUnitY(d))*1.0))
    endif
  else
    call SetUnitAnimationByIndex(SKE,0)
    set nx=x+FGE*Cos(GXE)
    set ny=y+FGE*Sin(GXE)
    call SetUnitX(SKE,nx)
    call SetUnitY(SKE,ny)
    call SetUnitFacing(SKE,GXE*bj_RADTODEG)
    call KillTrees(nx,ny,100)
  endif
  call Func4377(SKE,QIE,GetUnitX(SKE),GetUnitY(SKE))
  set t=null
  set SKE=null
  set d=null
  return false
endfunction

function Func4391 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+150)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func4392 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t
  local integer h=GetHandleId(u)
  local integer DBN=(LoadInteger(HY,h,746))
  local unit d
  if DBN>0 and((LoadInteger(HY,(GetHandleId(u)),4319))!=1)then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SetUnitVertexColor(u,255,0,0,75)
    call SetUnitTimeScale(u,2)
    call SetUnitAnimationByIndex(u,0)
    call SetUnitPathing2(u,false)
    call SetUnitInvulnerable(u,true)
    call UnitAddAbility2(u,'A04R')
    call SaveInteger(HY,(GetHandleId(u)),4319,1)
    call TriggerRegisterTimerEvent(t,0.02,true)
    call TriggerAddCondition(t,Condition(function Func4390))
    call TriggerRegisterDeathEvent(t,u)
    call SaveEffectHandle(HY,h,175,(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",u,"hand right alternate")))
    call SaveEffectHandle(HY,h,176,(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",u,"hand left alternate")))
    call SaveEffectHandle(HY,h,177,(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",u,"origin")))
    call SaveUnitHandle(HY,h,2,(u))
    call SaveReal(HY,h,47,((GetSpellTargetX())*1.0))
    call SaveReal(HY,h,48,((GetSpellTargetY())*1.0))
    set d=Func4388(u,GetSpellTargetX(),GetSpellTargetY())
    call SaveUnitHandle(HY,h,19,(d))
    call SaveReal(HY,h,44,((Func4389(u,d))*1.0))
    call SaveReal(HY,h,6,((GetUnitX(d))*1.0))
    call SaveReal(HY,h,7,((GetUnitY(d))*1.0))
    call SaveInteger(HY,h,34,1)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.0,false)
    call TriggerAddCondition(t,Condition(function Func4391))
    call SaveUnitHandle(HY,h,2,(u))
  endif
  set t=null
  set u=null
  set d=null
endfunction

function Func4393 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local integer O6O=(LoadInteger(HY,(GetHandleId(u)),747))
  local real cd=LoadReal(HY,h,34)
  local real YNI=35.
  if GetUnitAbilityLevel(u,'A39S')==1 then
    set YNI=YNI*(100.-25*1.)/100.
  endif
  if O6O<3 then
    set cd=cd-1.
    call SaveReal(HY,h,34,(cd))
    if cd<=0 or boolean147 then
      call UnitRemoveAbility(u,integers158[O6O])
      call SaveReal(HY,h,34,YNI)
      set O6O=O6O+1
      call SaveInteger(HY,(GetHandleId(u)),747,(O6O))
      call UnitAddAbility2(u,integers158[O6O])
    endif
  endif
  set t=null
  set u=null
  return false
endfunction

function Func4394 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SaveInteger(HY,(GetHandleId(u)),747,3)
  call UnitAddAbility2(u,integers158[3])
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func4393))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveReal(HY,h,34,30.)
  set u=null
  set t=null
endfunction

function Func4395 takes nothing returns nothing
  call UnitAddAbility3(GetTriggerUnit(),'A2JL',GetUnitAbilityLevel(GetTriggerUnit(),'A2JK'))
  if GetUnitAbilityLevel(GetTriggerUnit(),'A2JK')==1 then
    call Func4394()
    call Func4378()
  endif
endfunction

function Func4396 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func2532))
  set t=null
  call AddToPurgeList('B0FN','PRGE')
  call AddToPurgeList('A3P9','PRGE')
  call AddToPurgeList('B0FP','PRGA')
  call AddToPurgeList('B0FQ','PRGA')
  set integers158[0]='A2JO'
  set integers158[1]='A2JQ'
  set integers158[2]='A2JP'
  set integers158[3]='A2JR'
  call HideAbility('A2JF')
endfunction

function Func4397 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LBO=(LoadUnitHandle(HY,h,2))
  local integer DYN=(LoadInteger(HY,h,59))
  call FlushChildHashtable(HY,h)
  call CleanTrigger(t)
  call UnitRemoveAbility(LBO,DYN)
  call UnitRemoveAbility(LBO,'B0FJ')
  call UnitRemoveAbility(LBO,'B0FK')
  set t=null
  set LBO=null
  return false
endfunction

function Func4398 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  call UnitRemoveAbility(u,'A2GD')
  call UnitRemoveAbility(u,'A2GE')
  call UnitRemoveAbility(u,'A2GF')
  call UnitRemoveAbility(u,'A2GC')
  call UnitRemoveAbility(u,'B0FJ')
  call UnitRemoveAbility(u,'B0FK')
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set t=null
  set u=null
endfunction

function Func4399 takes unit u,unit SGE returns nothing
  local integer h=DelayedCallBack(0,function Func4398)
  call SaveUnitHandle(HY,h,0,u)
endfunction

function Func4400 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit u=LoadUnitHandle(HY,h,0)
  local integer a=GetUnitAbility(u,'A2EY')
  if a>0 then
    set Memory[a/4+0x44/4]=1
  endif
  call DelayedCallBackClean()
  set u=null
endfunction

function Func4401 takes nothing returns nothing
  local integer h=DelayedCallBack(0.,function Func4400)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
endfunction

function Func4402 takes unit SGE returns nothing
  local trigger t
  local integer h
  local integer YGX=GetUnitAbilityLevel(SGE,'A2EY')
  local integer id
  if PRD_Get(SGE,'A2EY',25)then
    call AddTimedKeyToAgent(SGE,4316,2.8-0.5*YGX)
    if YGX==1 then
      set id='A2GD'
    elseif YGX==2 then
      set id='A2GE'
    elseif YGX==3 then
      set id='A2GF'
    elseif YGX==4 then
      set id='A2GC'
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(SGE),id,false)
    call UnitAddAbility2(SGE,id)
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerRegisterTimerEvent(t,0.5,false)
    call TriggerAddCondition(t,Condition(function Func4397))
    call SaveUnitHandle(HY,h,2,SGE)
    call SaveInteger(HY,h,59,id)
    set t=null
  endif
endfunction

function Func4403 takes unit WXE,unit SGE returns nothing
  if(GetUnitAbilityLevel(SGE,'A2EY')>0 and GetUnitAbilityLevel(SGE,'A36D')==0)and LoadInteger(HY,GetHandleId(SGE),4316)!=1 and IsUnitEnemy(SGE,GetOwningPlayer(WXE))then
    call Func4402(SGE)
  endif
endfunction

function Func4404 takes unit D4N,integer QIE,unit FKX returns nothing
  local integer h=GetHandleId(D4N)
  local integer dmg=(LoadInteger(HY,h,739))
  if IsUnitType(FKX,UNIT_TYPE_HERO)then
    set dmg=dmg+6+4*QIE
    call SaveInteger(HY,h,739,(dmg))
    call TextTagOnUnit(GetUnitName(D4N)+" Won The Duel!!",5,D4N,0.03,255,0,0,255,Func0590(D4N)or PlayerObserver)
    call Func0992(D4N,dmg)
    set h=GetHandleId(GetOwningPlayer(D4N))
    call SaveInteger(HeroStats,h,'DUEL'+1,LoadInteger(HeroStats,h,'DUEL'+1)+1)
    call SaveInteger(HeroStats,h,'DUEL'+2,dmg)
  endif
endfunction

function Func4405 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=(LoadInteger(HY,h,5))
  local real result=(LoadReal(HY,h,442))
  local real D1E
  call Func0803(u)
  call Func0803(SGE)
  if GetTriggerEvalCount(t)==1 then
    set D1E=0.75*QIE+3.25
    if LoadBoolean(HY,h,0)then
      set D1E=5+QIE
      call SavePlayerHandle(HY,GetHandleId(u),'DUEL',GetOwningPlayer(SGE))
      call SavePlayerHandle(HY,GetHandleId(SGE),'DUEL',GetOwningPlayer(u))
    endif
    call  DamageBlockActiveTracking(D1E)
    call UnitAddAbilityTimedExF(u,'A32U',1,D1E,'B32U')
    call UnitAddAbilityTimedExF(SGE,'A32U',1,D1E,'B32U')
    call Func2306(u,'A32U',D1E)
    call Func2306(SGE,'A32U',D1E)
    call SaveInteger(HeroStats,GetHandleId(GetOwningPlayer(u)),'DUEL'+0,LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(u)),'DUEL'+0)+1)
    if IsUnitIllusion(SGE)==false then
      call SaveInteger(HeroStats,GetHandleId(GetOwningPlayer(SGE)),'DUEL'+0,LoadInteger(HeroStats,GetHandleId(GetOwningPlayer(SGE)),'DUEL'+0)+1)
    endif
  endif
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or result<(TimerGetElapsed(GlobalTimer))or IsUnitCycloned(u)or IsUnitCycloned(SGE)or DistanceBetweenUnits(u,SGE)>2000 then
    call DisableTrigger(t)
    if GetTriggerEventId()==EVENT_WIDGET_DEATH then
      if GetTriggerUnit()==u then
        call Func4404(SGE,QIE,GetTriggerUnit())
      else
        call Func4404(u,QIE,GetTriggerUnit())
      endif
    else
      call IssueTargetOrder(u,"attack",SGE)
      call IssueTargetOrder(SGE,"attack",u)
    endif
    call EnableUnitControl(SGE)
    call EnableUnitControl(u)
    call RemoveSavedHandle(HY,GetHandleId(u),'DUEL')
    call RemoveSavedHandle(HY,GetHandleId(SGE),'DUEL')
    call SaveBoolean(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(u),'STFU')),'SLDR',true)
    call SaveBoolean(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(SGE),'STFU')),'SLDR',true)
    call UnitRemoveAbility(u,'A32U')
    call UnitRemoveAbility(u,'B32U')
    call UnitRemoveAbility(SGE,'A32U')
    call UnitRemoveAbility(SGE,'B32U')
    call DestroyEffect(LoadEffectHandle(HY,h,175))
    call DestroyEffect(LoadEffectHandle(HY,h,176))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call SetUnitPathing2(u,true)
    call SetUnitPathing2(SGE,true)
  elseif GetIssuedOrderId()!=851973 then
    if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    else
      if IsItPriorAttackforce(GetTriggerUnit(),'A32U')then
        if IsTriggeredOrder(GetTriggerUnit())==false then
          call DisableTrigger(t)
          call EnableUnitControl(SGE)
          call ForceFulAttack(SGE,u)
          call DisableUnitControl(SGE)
          call EnableUnitControl(u)
          call ForceFulAttack(u,SGE)
          call DisableUnitControl(u)
          call EnableTrigger(t)
        endif
      endif
    endif
  endif
  set t=null
  set u=null
  set SGE=null
  return false
endfunction

function Duel_SpellEffect takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local integer lvl=GetUnitAbilityLevel(u,'A2CI')+GetUnitAbilityLevel(u,'A38C')
  local trigger t
  local integer h
  local boolean isAgh=GetUnitAbilityLevel(u,'A38C')>0
  if GetUnitTypeId(u)=='e00E'then
    set u=LoadUnitHandle(HY,GetHandleId(u),0)
  endif
  call SetUnitPathing2(u,false)
  call SetUnitPathing2(target,false)
  call ForceFulAttack(u,target)
  if IsItPriorAttackforce(target,'A32U')then
    call ForceFulAttack(target,u)
    call DisableUnitControl(target)
  endif
  call DisableUnitControl(u)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call SaveEffectHandle(HY,h,175,(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",u,"overhead")))
  call SaveEffectHandle(HY,h,176,(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",target,"overhead")))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveUnitHandle(HY,h,17,(target))
  call SaveInteger(HY,h,5,(lvl))
  if isAgh then
    call SaveReal(HY,h,442,(((TimerGetElapsed(GlobalTimer))+0.75*(lvl+1)+3.25)*1.0))
    call SaveBoolean(HY,h,0,true)
  else
    call SaveReal(HY,h,442,(((TimerGetElapsed(GlobalTimer))+0.75*lvl+3.25)*1.0))
  endif
  call TriggerAddCondition(t,Condition(function Func4405))
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterTimerEvent(t,0.01,false)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerRegisterDeathEvent(t,target)
  call TriggerRegisterUnitEvent(t,target,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,target,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,target,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  set u=null
  set target=null
  set t=null
endfunction

function Func4407 takes nothing returns nothing
  set integers159[0]='A2GK'
  set integers159[1]='A2GJ'
  set integers159[2]='A2GI'
  set integers159[3]='A2GH'
  set integers159[4]='A2GN'
  set integers159[5]='A2GO'
  set integers159[6]='A2GM'
  set integers159[7]='A2GL'
  set integers159[8]='A2GP'
  set integers159[9]='A33S'
  set integers159[10]='A33T'
  call AddWrapper("Func4609",1)
  call AddWrapper("Func4610",-2)
  call AddWrapper("Func4641",-1)
  call AddToPurgeList('A3EB','PRGA')
  call AddToPurgeList('B0FW','PRGA')
  set integers160[1]='A2J4'
  set integers160[2]='A2J5'
  set integers160[3]='A2J3'
  set integers160[4]='A2J6'
  call AddToPurgeList('B2J4','PRGA')
  call AddToPurgeList('A2J3','PRGA')
  call AddToPurgeList('A2J4','PRGA')
  call AddToPurgeList('A2J5','PRGA')
  call AddToPurgeList('A2J6','PRGA')
endfunction

function Func4408 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),34))
  local integer ZCE=50
  set ZBE=ZBE+1
  call SaveInteger(HY,(ZAE),34,(ZBE))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZBE>ZCE or GetUnitAbilityLevel(RCX,integers160[QIE])==0 then
    call UnitRemoveAbility(RCX,integers160[QIE])
    call UnitRemoveAbility(RCX,'B2J4')
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  else
    call SetUnitState(RCX,UNIT_STATE_LIFE,GetUnitState(RCX,UNIT_STATE_LIFE)+2+1*QIE)
    if ModuloInteger(GetTriggerEvalCount(RBX),10)==1 then
      call Func0690("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",RCX,"chest",1.9)
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4409 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local integer ZAE=GetUnitAbilityLevel(source,'A2J2')
  local trigger RBX=CreateTrigger()
  local integer QIE=GetHandleId(RBX)
  call Func0862(RCX)
  call FuckingAssistBuffWrap(source,RCX)
  call UnitAddAbility2(RCX,integers160[ZAE])
  call SaveUnitHandle(HY,(QIE),2,(source))
  call SaveUnitHandle(HY,(QIE),17,(RCX))
  call SaveInteger(HY,(QIE),5,(ZAE))
  call SaveInteger(HY,(QIE),34,0)
  call TriggerAddCondition(RBX,Condition(function Func4408))
  call TriggerRegisterTimerEvent(RBX,0.1,true)
  call TriggerRegisterDeathEvent(RBX,RCX)
  call TriggerEvaluate(RBX)
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func4410 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetUnitAbilityLevel(u,'A3EB')==0 or GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>=70 then
    call Stats_Fucking_Modify(u,-LoadInteger(HY,h,0),"+MS")
    call UnitRemoveAbility(u,'A3EB')
    call UnitRemoveAbility(u,'B0FW')
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
  set u=null
endfunction

function Func4411 takes unit u,integer ms returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterDeathEvent(t,u)
  call UnitAddAbility2(u,'A3EB')
  call Stats_Fucking_Modify(u,ms,"+MS")
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,ms)
  call TriggerAddCondition(t,Condition(function Func4410))
  set t=null
endfunction

function Func4412 takes nothing returns nothing
  if IsUnitSummoned(GetEnumUnit())or IsUnitIllusion(GetEnumUnit())then
    call DamageTarget(GetTriggerUnit(),GetEnumUnit(),1,GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*0.25)
  endif
  call DamageTarget(GetTriggerUnit(),GetEnumUnit(),1,40*integer536+(12+2*integer536)*integer534+(20*integer536)*integer535)
endfunction

function Func4413 takes nothing returns nothing
  if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)then
    set integer535=integer535+1
  else
    set integer534=integer534+1
  endif
endfunction

function Func4414 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local group g=GetAvailableGroup()
  call DestroyEffect(AddSpecialEffect("war3mapImported\\OverwhelmingOdds.mdx",x,y))
  call GroupEnumUnitsInRange(g,x,y,355,Condition(function Func0811))
  set integer534=0
  set integer535=0
  set integer536=GetUnitAbilityLevel(u,'A2JB')
  call ForGroup(g,function Func4413)
  call ForGroup(g,function Func4412)
  call KillGroup(g)
  if 9*integer535+3*integer534>0 then
    call Func4411(u,9*integer535+3*integer534)
  endif
  set u=null
endfunction

function Func4415 takes nothing returns nothing
  call DamageTarget(unit266,GetEnumUnit(),1,((200+400*integer538)/integer537)/24)
endfunction

function Func4416 takes nothing returns boolean
  return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))and IsMagicImmune(GetFilterUnit())==false and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func4417 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local group g
  local integer XXO=LoadInteger(HY,h,0)
  local integer QIE=LoadInteger(HY,h,5)
  local unit u2
  local real dmg=9+16.66*QIE
  local integer c=GetTriggerEvalCount(t)
  if c+2==XXO then
    call DestroyEffect(LoadEffectHandle(HY,(h),10))
  endif
  if c>XXO then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set g=GetAvailableGroup()
    set tt_unit1=u
    call GroupEnumUnitsInRange(g,x,y,195,Condition(function Func4416))
    set integer538=LoadInteger(HY,h,5)
    set unit266=u
    set integer537=CountUnitsInGroup(g)
    set dmg=dmg/I2R(IMaxIF(1,integer537))
    loop
      set u2=FirstOfGroup(g)
      exitwhen u2==null
      call GroupRemoveUnit(g,u2)
      call DamageTarget(u,u2,1,dmg)
    endloop
    call KillGroup(g)
    set g=null
  endif
  set t=null
  set u=null
  return false
endfunction

function Func4418 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local location IGX=GetSpellTargetLoc()
  local integer Y2E=24
  if GetSpellAbilityId()=='A2TU' then
    set Y2E=120
  endif
  call PlaySoundAtPointBJ(sound062,100,IGX,0)
  call RemoveLocation(IGX)
  set IGX=null
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func4417))
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveReal(HY,(h),6,x)
  call SaveReal(HY,(h),7,y)
  call SaveInteger(HY,h,0,Y2E)
  call SaveInteger(HY,h,5,GetUnitAbilityLevel(u,GetSpellAbilityId()))
  call SaveEffectHandle(HY,h,10,AddSpecialEffect("war3mapImported\\DivineWrathTarget.mdx",x,y))
  set t=null
  set u=null
endfunction

function Func4419 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=tt_unit1
  local unit RCX=tt_unit3
  local integer QIE=LoadInteger(HY,ZAE,5)
  local real result=40+20*QIE+1.6*GetHeroInt(source,true)
  if GetUnitAbilityLevel(RCX,'A3E9')==1 and LoadBoolean(HY,ZAE,5)==false and IsMagicImmune(tt_unit1)==false then
    if IsBlocked(tt_unit1)==false then
      set tt_int1=QIE
      call ExecuteFunc("Func4421")
    else
      call RemoveLinkenBuff(tt_unit1)
    endif
  endif
  call DamageTarget(source,RCX,1,result)
  set source=null
  set RCX=null
endfunction

function Func4420 takes unit SKE,unit SGE,integer QIE,boolean UII returns nothing
  local integer h=GetHandleId(AddProjectile(SKE,SGE,'h0DQ',"Func4419",500,false))
  call SaveInteger(HY,h,5,QIE)
  call SaveBoolean(HY,h,5,UII)
endfunction

function Func4421 takes nothing returns nothing
  call Func4420(tt_unit3,tt_unit1,tt_int1,true)
endfunction

function Func4422 takes nothing returns nothing
  call Func4420(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A2BE'),false)
endfunction

function Func4423 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(source,'A2HN')
  local real result=2+QIE
  local integer ZBE='A2HV'
  if QIE==1 then
    set ZBE='A2HV'
  elseif QIE==2 then
    set ZBE='A2HW'
  elseif QIE==3 then
    set ZBE='A2HU'
  elseif QIE==4 then
    set ZBE='A2HT'
  endif
  call UnitAddAbilityTimedExF(RCX,ZBE,1,result,0)
  call SetPlayerAbilityAvailable(GetOwningPlayer(RCX),ZBE,false)
  set source=null
  set RCX=null
endfunction

function Func4424 takes nothing returns nothing
  if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)and IsBlocked(GetSpellTargetUnit())==false then
    call Func4423()
  endif
endfunction

function Func4425 takes nothing returns nothing
  call AddToPurgeList('B0FT','PRGE')
  call AddToPurgeList('A2HV','PRGE')
  call AddToPurgeList('A2HW','PRGE')
  call AddToPurgeList('A2HU','PRGE')
  call AddToPurgeList('A2HT','PRGE')
  call AddToPurgeList('B0FY','PRGE')
  set sound062=CreateSound("Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget2.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound062,"StarfallTarget")
  call SetSoundDuration(sound062,3000)
endfunction

function Func4426 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=tt_unit1
  local unit RCX=tt_unit3
  local real result=GetUnitX(RCX)
  local real ZEE=GetUnitY(RCX)
  local integer QIE=GetUnitAbilityLevel(source,'A2IT')
  local unit M_X=CreateUnit(GetOwningPlayer(source),'e00E',result,ZEE,0)
  call UnitAddAbility(M_X,'A2IU')
  call SetUnitAbilityLevel(M_X,'A2IU',QIE)
  call IssueImmediateOrderByIdExFunc(M_X,852096)
  set source=null
  set RCX=null
  set M_X=null
endfunction

function Func4427 takes unit source,group g returns unit
  local unit RCX=null
  local real result=99999
  local unit M_X=FirstOfGroup(g)
  call GroupRemoveUnit(g,M_X)
  loop
    exitwhen M_X==null
    if DistanceBetweenUnits(source,M_X)<result then
      set result=DistanceBetweenUnits(source,M_X)
      set RCX=M_X
    endif
    set M_X=FirstOfGroup(g)
    call GroupRemoveUnit(g,M_X)
  endloop
  set tt_unit1=RCX
  set RCX=null
  return tt_unit1
endfunction

function Func4428 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local unit RCX=null
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(source),GetUnitY(source),1625,Condition(function Func0834))
  set RCX=Func4427(source,g)
  call KillGroup(g)
  if RCX!=null then
    call AddProjectile(source,RCX,'h0E6',"Func4426",800,true)
  endif
  set g=null
  set RCX=null
  set source=null
endfunction

function Func4429 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer SLI=(LoadInteger(HY,h,422))
  local integer KXE=(LoadInteger(HY,h,423))
  local integer RVX=(LoadInteger(HY,h,424))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)==140 or GetUnitAbilityLevel(SGE,'A305')==0 then
    call SetHeroAgi(SGE,GetHeroAgi(SGE,false)+SLI,true)
    call SetHeroStr(SGE,GetHeroStr(SGE,false)+KXE,true)
    call SetHeroInt(SGE,GetHeroInt(SGE,false)+RVX,true)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  return false
endfunction

function Func4430 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit u=GetEnumUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A2FK')
  local trigger t
  local integer h
  local integer FJN
  local integer SLI
  local integer KXE
  local integer RVX
  local real m
  if IsUnitType(u,UNIT_TYPE_HERO)and IsUnitInvulnerable(u)==false then
    set FJN=GetHeroPrimaryAttribute_Act(u)
    set m=0.15
    call UnitAddAbilityTimedExF(u,'A305',1,14,'B305')
    if FJN==3 then
      set SLI=R2I(m*GetHeroAgi(u,false))-1
      call SetHeroAgi(u,GetHeroAgi(u,false)-SLI,true)
      set KXE=0
      set RVX=0
    elseif FJN==1 then
      set SLI=0
      set KXE=R2I(m*GetHeroStr(u,false))-1
      call SetHeroStr(u,GetHeroStr(u,false)-KXE,true)
      set RVX=0
    elseif FJN==2 then
      set SLI=0
      set KXE=0
      set RVX=R2I(m*GetHeroInt(u,false))-1
      call SetHeroInt(u,GetHeroInt(u,false)-RVX,true)
    endif
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerRegisterDeathEvent(t,u)
    call TriggerAddCondition(t,Condition(function Func4429))
    call SaveInteger(HY,h,422,(SLI))
    call SaveInteger(HY,h,424,(RVX))
    call SaveInteger(HY,h,423,(KXE))
    call SaveUnitHandle(HY,h,17,(u))
    set t=null
  endif
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",u,"chest"))
  call DamageTarget(SKE,u,integer539,50+50*QIE)
  set SKE=null
  set u=null
endfunction

function Func4431 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  set x=GetUnitX(SKE)
  set y=GetUnitY(SKE)
  if KillTrees(x,y,300)>0 then
    set integer539=3
  else
    set integer539=1
  endif
  call GroupEnumUnitsInRange(g,x,y,325,Condition(function Func0812))
  call ForGroup(g,function Func4430)
  call KillGroup(g)
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\WhirlingDeath_01.mdx",SKE,"origin"))
  set SKE=null
  set g=null
endfunction

function Func4432 takes unit source,unit RCX returns nothing
  local integer ZAE=GetUnitAbilityLevel(source,'A2E3')
  call DamageTarget(source,RCX,3,60+40*ZAE)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",RCX,"origin"))
endfunction

function Func4433 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group016)==false then
    call GroupAddUnit(group016,GetEnumUnit())
    call Func4432(tt_unit1,GetEnumUnit())
  endif
endfunction

function Func4434 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),14))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),18))
  local integer ZBE=GetTriggerEvalCount(RBX)
  local unit M_X
  local group g=(LoadGroupHandle(HY,(ZAE),16))
  local group IBI
  local boolean ZSE=(LoadBoolean(HY,(ZAE),727))
  local boolean ZTE=(LoadBoolean(HY,(ZAE),740))
  if IsUnitDisabledSomehow(source)then
    set ZTE=true
    call SaveBoolean(HY,(ZAE),740,(ZTE))
  endif
  if ZSE==false then
    set M_X=(LoadUnitHandle(HY,(ZAE),(700+QIE+1-ZBE)))
    call RemoveUnit(M_X)
  else
    set M_X=(LoadUnitHandle(HY,(ZAE),(700+ZBE)))
    if ZTE==false then
      call SetUnitX(source,GetUnitX(M_X))
      call SetUnitY(source,GetUnitY(M_X))
    endif
    call RemoveUnit(M_X)
    set IBI=GetAvailableGroup()
    set tt_unit1=source
    set group016=g
    call GroupEnumUnitsInRange(IBI,GetUnitX(source),GetUnitY(source),250,Condition(function Func0816))
    call ForGroup(IBI,function Func4433)
    call KillGroup(IBI)
  endif
  if ZBE==(QIE)then
    call KillTrees(GetUnitX(source),GetUnitY(source),90)
    call KillGroup(g)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set M_X=null
  set g=null
  set IBI=null
  set RCX=null
  return false
endfunction

function Func4435 takes nothing returns nothing
  if IsValidTree(GetEnumDestructable())and IsDestructableDeadBJ(GetEnumDestructable())==false then
    set integer540=integer540+1
  endif
endfunction

function Func4436 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,14))
  local real a=(LoadReal(HY,h,13))
  local integer XXO=(LoadInteger(HY,h,12))
  local integer c=GetTriggerEvalCount(t)
  local real nx=(LoadReal(HY,h,6))+c*50*Cos(a*bj_DEGTORAD)
  local real ny=(LoadReal(HY,h,7))+c*50*Sin(a*bj_DEGTORAD)
  local boolean b=(LoadBoolean(HY,h,15))
  local unit FSN
  local trigger tt=(LoadTriggerHandle(HY,h,11))
  local integer hh=GetHandleId(tt)
  local integer FTN='u01Q'
  local rect r
  local real FUN=90
  set r=Rect(nx-FUN,ny-FUN,nx+FUN,ny+FUN)
  set integer540=0
  call EnumDestructablesInRect(r,Condition(function ReturnTrue),function Func4435)
  if integer540>0 or c>=XXO-2 then
    set FTN='u01P'
  endif
  set FSN=CreateUnit(GetOwningPlayer(u),FTN,nx,ny,a)
  call SaveUnitHandle(HY,(hh),(700+c),(FSN))
  if integer540>0 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call TriggerRegisterTimerEvent(tt,0.5/XXO,true)
    call TriggerAddCondition(tt,Condition(function Func4434))
    call SaveInteger(HY,(hh),18,(c))
    call SaveBoolean(HY,(hh),727,(true))
    call SaveUnitHandle(HY,(hh),14,(u))
    call SaveGroupHandle(HY,(hh),16,(GetAvailableGroup()))
    call SaveReal(HY,(hh),6,((nx)*1.0))
    call SaveReal(HY,(hh),7,((ny)*1.0))
    call SaveBoolean(HY,(hh),740,(false))
  elseif c>XXO then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call TriggerRegisterTimerEvent(tt,0.5/XXO,true)
    call TriggerAddCondition(tt,Condition(function Func4434))
    call SaveInteger(HY,(hh),18,(c))
    call SaveBoolean(HY,(hh),727,(false))
    call SaveUnitHandle(HY,(hh),14,(u))
    call SaveGroupHandle(HY,(hh),16,(GetAvailableGroup()))
    call SaveBoolean(HY,(hh),740,(false))
  endif
  set t=null
  set u=null
  set FSN=null
  set tt=null
  return false
endfunction

function Func4437 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real a= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetSpellTargetX(),GetSpellTargetY())
  local integer QIE=GetUnitAbilityLevel(SKE,'A2E3')
  local integer J9O=600+200*QIE
  local integer c
  local trigger tt=CreateTrigger()
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set J9O=J9O+R2I(200.)
  endif
  set c=J9O/50
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveReal(HY,h,13,((a)*1.0))
  call SaveInteger(HY,h,12,(c))
  call SaveTriggerHandle(HY,h,11,(tt))
  call SaveReal(HY,h,6,((GetUnitX(SKE))*1.0))
  call SaveReal(HY,h,7,((GetUnitY(SKE))*1.0))
  call TriggerRegisterTimerEvent(t,0.5/c,true)
  call TriggerAddCondition(t,Condition(function Func4436))
  set t=null
  set tt=null
  set SKE=null
endfunction

function Func4438 takes integer i,integer QIE returns integer
  return R2I((0.8+0.2*QIE)*i)
endfunction

function Func4439 takes nothing returns nothing
  local unit FYN=GetTriggerUnit()
  local integer i=LoadInteger(HY,GetHandleId(FYN),'A2E4')
  local integer QIE=GetUnitAbilityLevel(FYN,'A2E4')
  local integer FZN
  local integer F_N
  local integer r1=0
  if i>0 then
    set FZN=Func4438(i,QIE-1)
    set F_N=Func4438(i,QIE)
    set r1=F_N-FZN
    if r1>0 then
      call Stat_Add(FYN,r1,"REGEN")
      call Stat_Add(FYN,r1,"+DEF")
    endif
  endif
  set FYN=null
endfunction

function Func4440 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,2)
  local integer hu=GetHandleId(u)
  local integer FZN
  local integer F_N
  local integer r1=0
  local integer i=LoadInteger(HY,hu,'A2E4')-1
  local integer QIE=GetUnitAbilityLevel(u,'A2E4')
  call SaveInteger(HY,hu,'A2E4',i)
  if 5*QIE>i then
    set F_N=Func4438(i,QIE)
    set FZN=Func4438(i+1,QIE)
    set r1=FZN-F_N
    if r1>0 then
      call Stat_Sub(u,r1,"REGEN")
      call Stat_Sub(u,r1,"+DEF")
    endif
  endif
  call FlushChildHashtable(HY,h)
  call CleanTrigger(t)
  set t=null
  set u=null
  return false
endfunction

function Func4441 takes unit FYN returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer i=LoadInteger(HY,GetHandleId(FYN),'A2E4')
  local integer QIE=GetUnitAbilityLevel(FYN,'A2E4')
  local integer FZN
  local integer F_N
  local integer r1=0
  if 5*QIE>i then
    set FZN=Func4438(i,QIE)
    set F_N=Func4438(i+1,QIE)
    set r1=F_N-FZN
    if r1>0 then
      call Stat_Add(FYN,r1,"REGEN")
      call Stat_Add(FYN,r1,"+DEF")
    endif
  endif
  call SaveInteger(HY,GetHandleId(FYN),'A2E4',i+1)
  call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ReactiveArmor.mdx",FYN,"chest"))
  call TriggerRegisterTimerEvent(t,7+3*QIE,false)
  call TriggerRegisterDeathEvent(t,FYN)
  call TriggerAddCondition(t,Condition(function Func4440))
  call SaveUnitHandle(HY,h,2,FYN)
  set t=null
endfunction

function Func4442 takes unit WXE,unit SGE returns nothing
  if(GetUnitAbilityLevel(SGE,'A2E4')>0 and GetUnitAbilityLevel(SGE,'A36D')==0)and IsUnitEnemy(WXE,GetOwningPlayer(SGE))then
    call Func4441(SGE)
  endif
endfunction

function Func4443 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call UnitRemoveAbility(source,'Bpig')
  call UnitRemoveAbility(source,'BEia')
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func4444 takes unit u returns nothing
  local integer i=R2I(100*GetWidgetLife(u)/GetUnitState(u,UNIT_STATE_MAX_LIFE))
  local integer QIE=IMaxIF(Func0464(R2I(100-i)/5,20),1)
  call Func0377(u,'A3GA'-1+QIE,1)
endfunction

function Func4445 takes nothing returns nothing
  if boolean094==false then
    call DamageTarget(unit267,GetEnumUnit(),3,(25+25*integer541)*0.5)
    call Func4444(GetEnumUnit())
  endif
endfunction

function Func4446 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group044)==false then
    call GroupAddUnit(group044,GetEnumUnit())
    call Func4444(GetEnumUnit())
    call DamageTarget(unit267,GetEnumUnit(),3,60+40*integer541)
  endif
endfunction

function Func4447 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit LBO=LoadUnitHandle(HY,h,2)
  local unit F8N=LoadUnitHandle(HY,h,45)
  local real DLA=LoadReal(HY,h,6)
  local real DMA=LoadReal(HY,h,7)
  local real x
  local real y
  local real a
  local integer F9N=LoadInteger(HY,h,33)
  local group C3N=LoadGroupHandle(HY,h,187)
  local group g
  local integer GVN=LoadInteger(HY,h,34)
  local real NDI
  local integer GEN=LoadInteger(HY,h,2)
  local integer GXN=LoadInteger(HY,h,3)
  local integer GON=LoadInteger(HY,h,4)
  local integer c=GetTriggerEvalCount(t)
  call UnitAddAbility2(LBO,GXN)
  if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()==GON then
      call SaveInteger(HY,h,33,2)
      call GroupClear(C3N)
      call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GON,false)
      set t=CreateTrigger()
      set h=GetHandleId(t)
      call TriggerRegisterTimerEvent(t,0,false)
      call TriggerAddCondition(t,Condition(function Func4443))
      call SaveUnitHandle(HY,h,2,(LBO))
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(HY,GetHandleId(LBO),704))==-1 then
    if(LoadInteger(HY,GetHandleId(LBO),704))==0 or(LoadInteger(HY,GetHandleId(LBO),704))==GEN then
      if GEN=='A31Y' then
        call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GEN,LoadBoolean(MHT,GetHandleId(LBO),'A31Y'))
        call echo("1 "+Func0457(LoadBoolean(MHT,GetHandleId(LBO),'A31Y')))
      else
        call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GEN,true)
      endif
    endif
    call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GON,false)
    if GEN!='A31Y' then
      call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),'A2E5',true)
      call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),'A322',true)
    endif
    call UnitRemoveAbility(LBO,'Bpig')
    call UnitRemoveAbility(LBO,'BEia')
    call KillUnit(F8N)
    call KillGroup(C3N)
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  elseif F9N==0 then
    set a= AngleBetweenXY(GetUnitX(F8N),GetUnitY(F8N),DLA,DMA)*bj_DEGTORAD
    set x=GetUnitX(F8N)+18*Cos(a)
    set y=GetUnitY(F8N)+18*Sin(a)
    call KillTrees(x,y,175)
    if DistanceBetweenXY(x,y,DLA,DMA)<40 then
      set x=DLA
      set y=DMA
    endif
    call SetUnitX(F8N,x)
    call SetUnitY(F8N,y)
    set tt_unit1=LBO
    set unit267=LBO
    set integer541=LoadInteger(HY,h,0)
    set group044=C3N
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,x,y,225,Condition(function Func0816))
    call ForGroup(g,function Func4446)
    call KillGroup(g)
    if x==DLA and y==DMA then
      call SaveInteger(HY,h,33,1)
      call GroupClear(C3N)
    endif
  elseif F9N==1 then
    set GVN=GVN+1
    if GVN==25 then
      set x=GetUnitX(F8N)
      set y=GetUnitY(F8N)
      call KillTrees(x,y,175)
      set GVN=0
      set tt_unit1=LBO
      set unit267=LBO
      set integer541=LoadInteger(HY,h,0)
      set g=GetAvailableGroup()
      call GroupEnumUnitsInRange(g,x,y,225,Condition(function DefaultEnemyFilterWithAncientNonImmune))
      call ForGroup(g,function Func4445)
      call KillGroup(g)
      set NDI=(15+5*integer541)/ 2
      if GetUnitState(LBO,UNIT_STATE_MANA)<NDI or DistanceBetweenUnits(LBO,F8N)>2000 or GetUnitAbilityLevel(LBO,GON)==0 then
        call SaveInteger(HY,h,33,2)
        call GroupClear(C3N)
        call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GON,false)
        call UnitRemoveAbility(LBO,'Bpig')
        call UnitRemoveAbility(LBO,'BEia')
      else
        call SetUnitState(LBO,UNIT_STATE_MANA,GetUnitState(LBO,UNIT_STATE_MANA)-NDI)
        call ManaFlareCheck(LBO,NDI)
      endif
    endif
    call SaveInteger(HY,h,34,(GVN))
  elseif F9N==2 then
    set a= AngleBetweenXY(GetUnitX(F8N),GetUnitY(F8N),GetUnitX(LBO),GetUnitY(LBO))*bj_DEGTORAD
    set x=GetUnitX(F8N)+16*Cos(a)
    set y=GetUnitY(F8N)+16*Sin(a)
    call KillTrees(x,y,175)
    call SetUnitX(F8N,x)
    call SetUnitY(F8N,y)
    set tt_unit1=LBO
    set unit267=LBO
    set integer541=LoadInteger(HY,h,0)
    set group044=C3N
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,x,y,225,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    call ForGroup(g,function Func4446)
    call KillGroup(g)
    if DistanceBetweenXY(x,y,GetUnitX(LBO),GetUnitY(LBO))<40 then
      call UnitRemoveAbility(LBO,GXN)
      call KillUnit(F8N)
      call KillGroup(C3N)
      call FlushChildHashtable(HY,h)
      call CleanTrigger(t)
      if(LoadInteger(HY,(GetHandleId(LBO)),704))==0 or(LoadInteger(HY,(GetHandleId(LBO)),704))==GEN then
        if GEN=='A31Y' then
          call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GEN,LoadBoolean(MHT,GetHandleId(LBO),'A31Y'))
        else
          call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GEN,true)
        endif
      endif
      call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GON,false)
      if GEN!='A31Y' and(LoadInteger(HY,GetHandleId(LBO),704)==0 or LoadInteger(HY,GetHandleId(LBO),704)==GEN)then
        call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),'A2E5',true)
        call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),'A322',true)
      endif
    endif
  endif
  set t=null
  set LBO=null
  set F8N=null
  set C3N=null
  set g=null
  return false
endfunction

function Func4448 takes nothing returns nothing
  local unit LBO=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real a= AngleBetweenXY(GetUnitX(LBO),GetUnitY(LBO),x,y)*bj_DEGTORAD
  local unit F8N=CreateUnit(GetOwningPlayer(LBO),'h0DS',GetUnitX(LBO),GetUnitY(LBO),a*bj_RADTODEG)
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer GXN
  local integer GON
  local integer GEN=GetSpellAbilityId()
  if GEN=='A31Y' then
    call AddUnitAnimationProperties(F8N,"alternate",true)
    call SetUnitAnimation(F8N,"stand alternate")
  endif
  call TriggerRegisterTimerEvent(t,.02,true)
  call TriggerRegisterDeathEvent(t,LBO)
  call TriggerRegisterUnitEvent(t,LBO,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4447))
  call SaveUnitHandle(HY,h,45,F8N)
  call SaveUnitHandle(HY,h,2,LBO)
  call SaveReal(HY,h,6,x*1.)
  call SaveReal(HY,h,7,y*1.)
  call SaveInteger(HY,h,33,0)
  call SaveInteger(HY,h,0,GetUnitAbilityLevel(LBO,GEN))
  call SaveGroupHandle(HY,h,187,GetAvailableGroup())
  call SaveInteger(HY,h,2,GEN)
  if GEN=='A2E5' or GEN=='A322' then
    set GXN='A320'
    set GON='A2FX'
  else
    set GXN='A321'
    set GON='A31Z'
  endif
  call UnitAddAbility2(LBO,GXN)
  call UnitAddAbility2(LBO,GON)
  call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GEN,false)
  if GEN!='A31Y' then
    call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),'A2E5',false)
    call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),'A322',false)
  endif
  call SetPlayerAbilityAvailable(GetOwningPlayer(LBO),GON,true)
  call SaveInteger(HY,h,3,GXN)
  call SaveInteger(HY,h,4,GON)
  set LBO=null
  set t=null
  set F8N=null
endfunction

function Func4449 takes nothing returns nothing
  if GetUnitAbilityLevel(GetTriggerUnit(),'A31Y')>0 then
    call SetUnitAbilityLevel(GetTriggerUnit(),'A31Y',GetUnitAbilityLevel(GetTriggerUnit(),'A2E5')+GetUnitAbilityLevel(GetTriggerUnit(),'A322'))
  endif
endfunction

function Func4450 takes nothing returns nothing
  call UnitAddAbility2(tt_unit1,'A31Y')
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A31Y',GetUnitAbilityLevel(tt_unit1,'A321')==0)
  call SaveBoolean(MHT,GetHandleId(tt_unit1),'A31Y',true)
  call SetUnitAbilityLevel(tt_unit1,'A31Y',GetUnitAbilityLevel(tt_unit1,'A2E5')+GetUnitAbilityLevel(tt_unit1,'A322'))
endfunction

function Func4451 takes nothing returns nothing
  call SetPlayerAbilityAvailable(GetOwningPlayer(tt_unit1),'A31Y',false)
  call SaveBoolean(MHT,GetHandleId(tt_unit1),'A31Y',false)
endfunction

function Func4452 takes nothing returns nothing
  call AddToPurgeList('A305','PRGE')
  call AddToPurgeList('B305','PRGE')
  call PreloadAbility('A2DV')
  call AddDispellableBuff('B0G0')
  call AddWrapper("Func4640",0)
endfunction

function Func4453 takes nothing returns nothing
  local integer ZAE=GetHandleId(GetTriggeringTrigger())
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=tt_unit1
  local unit M_X=tt_unit3
  local integer QIE=GetUnitAbilityLevel(source,'A2LA')
  if IsMagicImmune(M_X)==false then
    call DamageTarget(source,M_X,1,20+80*QIE)
    if IsDead(M_X)==false then
      call UnitAddAbilityTimedExF(M_X,'A2MJ',1,4,'B0G4')
    endif
  endif
  set source=null
  set M_X=null
  set RCX=null
endfunction

function Func4454 takes nothing returns nothing
  local unit source=unit268
  local unit RCX=GetEnumUnit()
  local trigger RBX=AddProjectile(unit269,RCX,'h0EE',"Func4453",600,false)
  local integer ZAE=GetHandleId(RBX)
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func4455 takes unit source,unit RCX,integer ZAE,boolean UII returns nothing
  local group g=GetAvailableGroup()
  set tt_unit1=source
  set unit268=source
  set unit269=RCX
  call GroupEnumUnitsInRange(g,GetUnitX(RCX),GetUnitY(RCX),525,Condition(function Func0816))
  call GroupRemoveUnit(g,RCX)
  call ForGroup(g,function Func4454)
  if UII==false and GetUnitAbilityLevel(RCX,'A3E9')==1 and IsMagicImmune(source)==false then
    if IsBlocked(source)==false then
      call SaveUnitHandle(TempHash,'A3E9',0,RCX)
      call SaveUnitHandle(TempHash,'A3E9',1,source)
      call SaveInteger(TempHash,'A3E9',0,ZAE)
      call ExecuteFunc("Func4458")
    else
      call RemoveLinkenBuff(source)
    endif
  endif
  call KillGroup(g)
  set source=null
  set RCX=null
  set g=null
endfunction

function Func4456 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local unit M_X=(LoadUnitHandle(HY,(ZAE),45))
  local real result=GetUnitX(M_X)
  local real ZEE=GetUnitY(M_X)
  local real ZWE=GetUnitX(RCX)
  local real ZYE=GetUnitY(RCX)
  local real ICX=DistanceBetweenXY(ZWE,ZYE,result,ZEE)
  local integer QIE=GetTriggerEvalCount(RBX)
  local real N1X= AngleBetweenXY(result,ZEE,ZWE,ZYE)
  local real N2X
  local real N3X
  local real N4X=ICX/((1.0/.02)-QIE)
  if LoadInteger(HY,GetHandleId(RCX),4422)==1 then
    call SaveBoolean(HY,ZAE,0,true)
  endif
  if N4X<650*0.02 then
    set N4X=650*0.02
  endif
  set N2X=result+N4X*Cos(N1X*bj_DEGTORAD)
  set N3X=ZEE+N4X*Sin(N1X*bj_DEGTORAD)
  call SetUnitX(M_X,N2X)
  call SetUnitY(M_X,N3X)
  call SetUnitFacing(M_X,N1X)
  if DistanceBetweenXY(ZWE,ZYE,N2X,N3X)<=N4X then
    call KillUnit(M_X)
    if LoadBoolean(HY,ZAE,0)==false then
      call Func4455(source,RCX,LoadInteger(HY,ZAE,5),LoadBoolean(HY,ZAE,5))
    endif
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set RCX=null
  set source=null
  set M_X=null
  return false
endfunction

function Func4457 takes unit source,unit RCX,integer QIE,boolean UII returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit M_X=CreateUnit(GetOwningPlayer(source),'h0EJ',GetUnitX(source),GetUnitY(source),0)
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func4456))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveUnitHandle(HY,(ZAE),17,(RCX))
  call SaveUnitHandle(HY,(ZAE),45,(M_X))
  call SaveInteger(HY,ZAE,5,QIE)
  call SaveBoolean(HY,ZAE,5,UII)
  set source=null
  set RCX=null
  set M_X=null
  set RBX=null
endfunction

function Func4458 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  call LotusOrbFX(SKE)
  call Func4457(SKE,LoadUnitHandle(TempHash,'A3E9',1),QIE,true)
  set SKE=null
  call FlushChildHashtable(TempHash,'A3E9')
endfunction

function Func4459 takes nothing returns nothing
  call Func4457(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),false)
endfunction

function Func4460 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=GetUnitAbilityLevel(SKE,'A2LB')
  call SetUnitState(SGE,UNIT_STATE_LIFE,GetUnitState(SGE,UNIT_STATE_LIFE)+0.1*(20+GetUnitState(SGE,UNIT_STATE_MAX_LIFE)*(0.02+0.01*QIE)))
  if GetTriggerEvalCount(t)>39 or(GetTriggerEvalCount(t)==1 and IsUnitHidden(SGE))or(IsUnitStunned(SGE)==false and GetTriggerEvalCount(t)>4)then
    call UnitRemoveAbility(SGE,'A2LD')
    call SetUnitTimeScale(SGE,1)
    call DestroyEffect(LoadEffectHandle(HY,h,609))
    call DestroyEffect(LoadEffectHandle(HY,h,610))
    call DestroyEffect(LoadEffectHandle(HY,h,611))
    call DestroyEffect(LoadEffectHandle(HY,h,612))
    call DestroyEffect(LoadEffectHandle(HY,h,613))
    call DestroyEffect(LoadEffectHandle(HY,h,614))
    call DestroyEffect(LoadEffectHandle(HY,h,615))
    call DestroyEffect(LoadEffectHandle(HY,h,616))
    call DestroyEffect(LoadEffectHandle(HY,h,617))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4461 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t
  local integer h
  local unit d=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  call UnitAddAbility(d,'A2LG')
  if IssueTargetOrder(d,"thunderbolt",SGE)then
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call UnitAddAbility2(SGE,'A2LD')
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerAddCondition(t,Condition(function Func4460))
    call SaveUnitHandle(HY,h,2,(SKE))
    call SaveUnitHandle(HY,h,17,(SGE))
    call SaveEffectHandle(HY,h,609,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"hand right")))
    call SaveEffectHandle(HY,h,610,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"hand left")))
    call SaveEffectHandle(HY,h,611,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"foot right")))
    call SaveEffectHandle(HY,h,612,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"foot left")))
    call SaveEffectHandle(HY,h,613,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"foot right mount rear")))
    call SaveEffectHandle(HY,h,614,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"foot left mount rear")))
    call SaveEffectHandle(HY,h,615,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"head")))
    call SaveEffectHandle(HY,h,616,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"chest")))
    call SaveEffectHandle(HY,h,617,(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",SGE,"weapon")))
    call SetUnitTimeScale(SGE,0)
    call FuckingAssistBuffWrap(SKE,SGE)
  endif
  set d=null
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func4462 takes nothing returns nothing
  local unit u=GetEnumUnit()
  if IsItPriorAttackforce(u,'A38P')then
    call DisableTrigger(trigger047)
    call UnitWakeUp(u)
    call EnableUnitControl(u)
    call ForceFulAttack(u,unit270)
    call DisableUnitControl(u)
    call EnableTrigger(trigger047)
  endif
  set u=null
endfunction

function Func4463 takes nothing returns nothing
  call AddTimedKeyToAgent(GetEnumUnit(),4328,0.75)
  call UnitRemoveAbility(GetEnumUnit(),'A38P')
  call UnitRemoveAbility(GetEnumUnit(),'B38P')
  call IssueImmediateOrderByIdExFunc(GetEnumUnit(),851972)
  call EnableUnitControl(GetEnumUnit())
endfunction

function Func4464 takes nothing returns nothing
  local unit source=GetEnumUnit()
  if IsUnitInGroup(source,group045)==false then
    call GroupAddUnit(group045,source)
    call TriggerRegisterUnitEvent(trigger047,source,EVENT_UNIT_ISSUED_TARGET_ORDER)
    call TriggerRegisterUnitEvent(trigger047,source,EVENT_UNIT_ISSUED_POINT_ORDER)
    call TriggerRegisterUnitEvent(trigger047,source,EVENT_UNIT_ISSUED_ORDER)
    call SaveInteger(HY,GetHandleId(source),4328,1)
    call  DamageBlockActiveTracking(6.)
    call UnitAddAbility2(source,'A38P')
  endif
  set source=null
endfunction

function Func4465 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local integer QIE=(LoadInteger(HY,(ZAE),5))
  local integer ZBE=(LoadInteger(HY,(ZAE),34))
  local group g=(LoadGroupHandle(HY,(ZAE),22))
  local group IBI
  local unit tu
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    set ZBE=ZBE+1
    call SaveInteger(HY,(ZAE),34,(ZBE))
    set group045=g
    set trigger047=RBX
    set IBI=GetAvailableGroup()
    set tt_unit1=source
    call GroupEnumUnitsInRange(IBI,GetUnitX(RCX),GetUnitY(RCX),525,Condition(function Func0821))
    call GroupRemoveUnit(IBI,RCX)
    call ForGroup(IBI,function Func4464)
    call KillGroup(IBI)
    if ZBE==(2.+0.5*QIE)*20 or IsDead(RCX)then
      call UnitRemoveAbility(RCX,'A38P')
      call UnitRemoveAbility(RCX,'B38P')
      call DisableTrigger(RBX)
      call RemoveUnit(LoadUnitHandle(HY,ZAE,5))
      call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
      call DestroyEffect(LoadEffectHandle(HY,(ZAE),176))
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
      call ForGroup(g,function Func4463)
      call KillGroup(g)
    else
      set trigger047=RBX
      set unit270=RCX
      call ForGroup(g,function Func4462)
    endif
  else
    if GetIssuedOrderId()!=851973 and boolean177==false then
      set tu=GetTriggerUnit()
      if IsTriggeredOrder(tu)==false then
        call SetUnitAbilityLevel(tu,'A38P',2)
        call DisableTrigger(RBX)
        call EnableUnitControl(tu)
        call ForceFulAttack(tu,RCX)
        call DisableUnitControl(tu)
        call EnableTrigger(RBX)
      endif
      set tu=null
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4466 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A0Z0')
  local unit SGE=GetSpellTargetUnit()
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local unit YJI
  call UnitAddAbility(d,'A2NJ')
  call SetUnitAbilityLevel(d,'A2NJ',QIE)
  call IssueTargetOrder(d,"thunderbolt",SGE)
  set unit271=SKE
  call TriggerRegisterTimerEvent(t,0.05,true)
  call UnitAddAbility2(SGE,'A38P')
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveGroupHandle(HY,h,22,(GetAvailableGroup()))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("war3mapImported\\WintersCurse.mdx",SGE,"overhead")))
  call Func2336("war3mapImported\\WintersCurseAoE.mdx")
  call Func2337("WNTR")
  set YJI=CreateUnit(GetOwningPlayer(SKE),'h02C',GetUnitX(SGE),GetUnitY(SGE),0)
  call Func2337("")
  call Func2338()
  call SaveUnitHandle(HY,h,5,YJI)
  set YJI=null
  call TriggerAddCondition(t,Condition(function Func4465))
  set d=null
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func4467 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),19))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call KillUnit(RCX)
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    set RBX=null
    set source=null
    set RCX=null
    return false
  endif
  if IsDead(source)==false then
    call SetUnitX(RCX,GetUnitX(source))
    call SetUnitY(RCX,GetUnitY(source))
  else
    if IsUnitAlly(RCX,Sentinels[0])then
      call SetUnitX(RCX,real026)
      call SetUnitY(RCX,real027)
    else
      call SetUnitX(RCX,real028)
      call SetUnitY(RCX,real029)
    endif
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4468 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer Y0I=LoadInteger(HY,h,0)
  if IsDead(SGE)==false and GetUnitAbilityLevel(SGE,Y0I)>0 then
    call DamageTarget(SKE,SGE,1,0.08*GetWidgetLife(SGE))
  endif
  if GetTriggerEvalCount(t)==5 or GetUnitAbilityLevel(SGE,Y0I)==0 then
    call UnitRemoveAbility(SGE,Y0I)
    call UnitRemoveAbility(SGE,'B0GA')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func4469 takes unit SKE,unit SGE returns nothing
  local trigger t
  local integer h
  local integer QIE
  local integer id
  if((LoadInteger(HY,(GetHandleId(SGE)),4329))!=1)and IsMagicImmune(SGE)==false and GetUnitTypeId(SGE)!='n00L' then
    call AddTimedKeyToAgent(SGE,4329,6.)
    set QIE=GetUnitAbilityLevel(SKE,'A2NE')
    if QIE==1 then
      set id='A2NA'
    elseif QIE==2 then
      set id='A2N8'
    elseif QIE==3 then
      set id='A2N7'
    elseif QIE==4 then
      set id='A2N9'
    endif
    call UnitAddAbilityTimedExF(SGE,id,1,4,'B0GA')
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,1,true)
    call TriggerAddCondition(t,Condition(function Func4468))
    call SaveUnitHandle(HY,h,2,(SKE))
    call SaveUnitHandle(HY,h,17,(SGE))
    call SaveInteger(HY,h,0,id)
    set t=null
  endif
endfunction

function Func4470 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    if GetEventDamageSource()==source then
      call DisableTrigger(RBX)
      call Func4469(source,RCX)
      call FlushChildHashtable(HY,(ZAE))
      call CleanTrigger(RBX)
    endif
  else
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set RCX=null
  set source=null
  return false
endfunction

function Func4471 takes nothing returns nothing
  local trigger RBX=CreateTrigger()
  local unit source=GetTriggerUnit()
  local unit RCX=GetAttacker()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_DAMAGED)
  call TriggerRegisterTimerEvent(RBX,2.5,false)
  call TriggerAddCondition(RBX,Condition(function Func4470))
  call SaveUnitHandle(HY,(ZAE),2,(RCX))
  call SaveUnitHandle(HY,(ZAE),17,(source))
  set RBX=null
  set source=null
  set RCX=null
endfunction

function Func4472 takes nothing returns boolean
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
    if GetAttacker()==(LoadUnitHandle(HY,(GetHandleId(GetTriggeringTrigger())),2))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
      if GetUnitTypeId(GetAttacker())=='N0MB' or GetUnitTypeId(GetAttacker())=='N0MC' or GetUnitTypeId(GetAttacker())=='N0MO' or GetUnitTypeId(GetAttacker())=='N0MA' then
        call Func4471()
      endif
    endif
  else
    call Func4467()
  endif
  return false
endfunction

function Func4473 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local unit RCX=CreateUnit(GetOwningPlayer(source),'o01Y',GetUnitX(source),GetUnitY(source),0)
  if IsUnitIllusion(source)==false then
    call TriggerRegisterAnyUnitEvent(RBX,EVENT_PLAYER_UNIT_ATTACKED)
  else
    call TriggerRegisterDeathEvent(RBX,source)
  endif
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func4472))
  call SaveUnitHandle(HY,(GetHandleId(RBX)),2,(source))
  call SaveUnitHandle(HY,(GetHandleId(RBX)),19,(RCX))
  set source=null
  set RCX=null
  set RBX=null
endfunction

function Func4474 takes nothing returns boolean
  if GetSpellAbilityId()=='A2NE' then
    if GetUnitTypeId(GetTriggerUnit())!='N0M7' then
      call KillTrees(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),150)
      call Func0431(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
    endif
  endif
  return false
endfunction

function Func4475 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4474))
  set t=null
  call AddToPurgeList('A2MK','PRGE')
  call AddToPurgeList('B0G4','PRGE')
  call AddToPurgeList('B0GA','PRGE')
  call AddToPurgeList('A2NA','PRGE')
  call AddToPurgeList('A2N8','PRGE')
  call AddToPurgeList('A2N7','PRGE')
  call AddToPurgeList('A2N9','PRGE')
endfunction

function Func4476 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,h,30))
  local unit SGE=LoadUnitHandle(HY,h,30)
  local unit SKE=LoadUnitHandle(HY,h,43)
  local real NBX=(LoadReal(HY,h,44))
  local unit NCX=(LoadUnitHandle(HY,h,45))
  local real cx=GetUnitX(NCX)
  local real cy=GetUnitY(NCX)
  local real tx
  local real ty
  local real FGE=NBX*0.03
  local real a
  local real nx
  local real ny
  local boolean GYN=(LoadBoolean(HY,h,698))
  local boolean NGX=(LoadBoolean(HY,h,818))
  if GYN then
    set tx=LoadReal(HY,h,0)
    set ty=LoadReal(HY,h,1)
  else
    set tx=GetUnitX(SGE)
    set ty=GetUnitY(SGE)
  endif
  set a= AngleBetweenXY(cx,cy,tx,ty)
  set nx=cx+FGE*Cos(a*bj_DEGTORAD)
  set ny=cy+FGE*Sin(a*bj_DEGTORAD)
  call SetUnitX(NCX,nx)
  call SetUnitY(NCX,ny)
  call SetUnitFacing(NCX,a)
  if LoadInteger(HY,GetHandleId(SGE),4422)==1 and NGX then
    call KillUnit(NCX)
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  elseif DistanceBetweenXY(tx,ty,nx,ny)<=FGE then
    call KillUnit(NCX)
    set tt_unit1=SKE
    set tt_unit3=SGE
    call ExecuteFunc(LoadStr(HY,h,46))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  endif
  set t=null
  set SGE=null
  set SKE=null
  set NCX=null
  return false
endfunction

function Func4477 takes unit HDE,unit SGE,unit D2O,string UPE,real NBX,boolean NGX returns trigger
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetUnitX(HDE)
  local real y=GetUnitY(HDE)
  local real a=GetUnitFacing(HDE)
  if IsDead(SGE)then
    call SaveBoolean(HY,h,698,true)
    call SaveReal(HY,h,0,LoadReal(HY,GetHandleId(HDE),356))
    call SaveReal(HY,h,1,LoadReal(HY,GetHandleId(HDE),357))
  endif
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerAddCondition(t,Condition(function Func4476))
  call SaveReal(HY,h,44,((NBX)*1.0))
  call SaveUnitHandle(HY,h,30,SGE)
  call SaveStr(HY,h,46,(UPE))
  call SaveUnitHandle(HY,h,43,HDE)
  call SaveUnitHandle(HY,h,45,D2O)
  call SaveBoolean(HY,h,818,(NGX))
  set AddProjectileTrigger=t
  set t=null
  return AddProjectileTrigger
endfunction

function Func4478 takes nothing returns nothing
  local unit SKE=tt_unit1
  local unit SGE=tt_unit3
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),GetUnitFacing(SGE))
  local real D1E=LoadReal(HY,GetHandleId(SKE),'A2QT')
  local integer QIE=GetUnitAbilityLevel(SKE,'A2QT')
  local integer G0N
  local group g=GetAvailableGroup()
  local unit u
  local unit G1N=CreateUnit(GetOwningPlayer(SKE),'o00Z',GetUnitX(SGE),GetUnitY(SGE),0)
  local integer G2N='A3IC'
  if IsUnitAlly(SKE,GetOwningPlayer(SGE))then
    call FuckingAssistBuffWrap(SKE,SGE)
  endif
  if QIE==0 then
    set QIE=LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),0)
  endif
  set G0N=R2I(2.0*D1E)
  if G0N>3 then
    set G2N=G2N+1
    set G0N=G0N-3
  endif
  call UnitApplyTimedLife(G1N,'BTLF',0.5)
  call UnitAddAbility(d,G2N)
  call SetUnitAbilityLevel(d,G2N,G0N)
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),325,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call Func0688("war3mapImported\\FortunesEndTarget.mdx",u,"origin",3)
    call SetUnitX(d,GetUnitX(u))
    call SetUnitY(d,GetUnitY(u))
    if GetUnitAbilityLevel(u,'B014')>0 and IsPlayerAlly(GetOwningPlayer(SGE),GetOwningPlayer(SKE))==false then
      call UnitRemoveAbility(u,'B014')
    endif
    call Func1430(d,u,852111)
    call DamageTarget(SKE,u,1,60+30*QIE)
    call GroupRemoveUnit(g,u)
  endloop
  if IsPlayerAlly(GetOwningPlayer(SGE),GetOwningPlayer(SKE))then
    call Func1430(d,SGE,852111)
  endif
  if GetUnitAbilityLevel(SGE,'A3E9')==1 and IsPlayerEnemy(GetOwningPlayer(SGE),GetOwningPlayer(SKE))and IsMagicImmune(SKE)==false and LoadBoolean(HY,GetHandleId(GetTriggeringTrigger()),0)==false then
    call SaveUnitHandle(TempHash,'A3E9',0,SGE)
    call SaveUnitHandle(TempHash,'A3E9',1,SKE)
    call SaveReal(TempHash,'A3E9',0,D1E)
    call SaveInteger(TempHash,'A3E9',0,QIE)
    call ExecuteFunc("Func4480")
  endif
  call KillGroup(g)
  set d=LoadUnitHandle(HY,GetHandleId(GetTriggeringTrigger()),45)
  call Func0477(d,D1E)
  call SetUnitTimeScale(d,0.8)
  set G1N=null
  set SKE=null
  set SGE=null
  set d=null
endfunction

function Func4479 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  call SetUnitTimeScale(LoadUnitHandle(HY,GetHandleId(t),0),0.1)
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set t=null
endfunction

function Func4480 takes nothing returns nothing
  local unit SKE=LoadUnitHandle(TempHash,'A3E9',0)
  local unit SGE=LoadUnitHandle(TempHash,'A3E9',1)
  local real D1E=LoadReal(TempHash,'A3E9',0)
  local integer QIE=LoadInteger(TempHash,'A3E9',0)
  local unit d=CreateUnit(GetOwningPlayer(SKE),'h0BQ',GetUnitX(SKE),GetUnitY(SKE),0)
  local trigger t=Func4477(SKE,SGE,d,"Func4478",1200,true)
  local timer tt=CreateTimer()
  call TimerStart(tt,0.1,false,function Func4479)
  call SaveUnitHandle(HY,GetHandleId(tt),0,d)
  set tt=null
  call SetUnitTimeScale(d,4)
  call SaveReal(HY,GetHandleId(SKE),'A2QT',D1E)
  call SaveBoolean(HY,GetHandleId(t),0,true)
  call SaveInteger(HY,GetHandleId(t),0,QIE)
  call FlushChildHashtable(TempHash,'A3E9')
  set SKE=null
  set SGE=null
  set d=null
  set t=null
endfunction

function Func4481 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=(LoadUnitHandle(HY,(GetHandleId(SKE)),796))
  local real D1E=RMinIF((TimerGetElapsed(GlobalTimer))-(LoadReal(HY,(GetHandleId(SKE)),358)),3)
  if SGE!=null then
    call SaveReal(HY,GetHandleId(SKE),'A2QT',D1E)
    call Func4477(SKE,SGE,LoadUnitHandle(HY,GetHandleId(SKE),'h0BQ'),"Func4478",1200,true)
  endif
  set SKE=null
  set SGE=null
endfunction

function Func4482 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,14))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call SaveReal(HY,(GetHandleId(SKE)),356,((GetUnitX(SGE))*1.0))
    call SaveReal(HY,(GetHandleId(SKE)),357,((GetUnitY(SGE))*1.0))
  elseif GetTriggerEvalCount(t)>200 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEvalCount(t)==10 then
    call SetUnitTimeScale(LoadUnitHandle(HY,GetHandleId(SKE),'h0BQ'),0.1)
  endif
  set t=null
  set SGE=null
  set SKE=null
  return false
endfunction

function Func4483 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit U6A=CreateUnit(GetTriggerPlayer(),'h0BQ',GetUnitX(SKE)+20*Cos(GetUnitFacing(SKE)*bj_DEGTORAD),GetUnitY(SKE)+20*Sin(GetUnitFacing(SKE)*bj_DEGTORAD),GetUnitFacing(SKE))
  if HaveSavedHandle(HY,GetHandleId(SKE),'h0BQ')then
    call RemoveUnit(LoadUnitHandle(HY,GetHandleId(SKE),'h0BQ'))
    call RemoveSavedHandle(HY,GetHandleId(SKE),'h0BQ')
    call FlushChildHashtable(HY,GetHandleId(LoadTriggerHandle(HY,GetHandleId(SKE),'h0BQ'+1)))
    call DisableTrigger(LoadTriggerHandle(HY,GetHandleId(SKE),'h0BQ'+1))
    call DestroyTrigger(LoadTriggerHandle(HY,GetHandleId(SKE),'h0BQ'+1))
  endif
  call SaveTriggerHandle(HY,GetHandleId(SKE),'h0BQ'+1,t)
  call SetUnitTimeScale(U6A,1.5)
  call SaveReal(HY,(GetHandleId(SKE)),358,(((TimerGetElapsed(GlobalTimer)))*1.0))
  call SaveUnitHandle(HY,(GetHandleId(SKE)),796,(GetSpellTargetUnit()))
  call DestroyEffect(AddSpecialEffect("war3mapImported\\CleanseTargetArea.mdx",GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit())))
  call SaveUnitHandle(HY,h,14,(SKE))
  call SaveUnitHandle(HY,GetHandleId(SKE),'h0BQ',U6A)
  call SaveUnitHandle(HY,h,17,(GetSpellTargetUnit()))
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,GetSpellTargetUnit())
  call TriggerAddCondition(t,Condition(function Func4482))
  set U6A=null
  set t=null
  set SKE=null
endfunction

function Func4484 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetTriggerPlayer())then
    call SaveBoolean(HY,GetHandleId(GetTriggerUnit()),360,true)
  elseif IsBlocked(GetSpellTargetUnit())==false then
    call SaveBoolean(HY,GetHandleId(GetTriggerUnit()),360,true)
  else
    call RemoveLinkenBuff(GetSpellTargetUnit())
  endif
endfunction

function Func4485 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetTriggerPlayer())or IsMagicImmune(GetSpellTargetUnit())==false then
    call SaveBoolean(HY,(GetHandleId(GetTriggerUnit())),360,(false))
    call Func4483()
  else
    call Func0658('n0K9')
  endif
endfunction

function Func4486 takes nothing returns boolean
  if GetSpellAbilityId()=='A2QT' then
    if(LoadBoolean(HY,(GetHandleId(GetTriggerUnit())),360))then
      call Func4481()
    endif
  endif
  return false
endfunction

function Func4487 takes nothing returns nothing
  local integer QIE=GetUnitAbilityLevel(GetTriggerUnit(),'A2T5')
  call UnitAddAbilityTimedExF(GetSpellTargetUnit(),'A3IU',1,2.5+QIE*.5,'B3IU')
  call UnitAddAbilityTimedExF(GetSpellTargetUnit(),'A2T4',1,2.5+QIE*.5,0)
  call UnitAddAbilityTimedExF(GetSpellTargetUnit(),'A3JT',1,2.5+QIE*.5,0)
endfunction

function Func4488 takes nothing returns nothing
  if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or IsBlocked(GetSpellTargetUnit())==false then
    call Func4487()
  endif
endfunction

function Func4489 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=LoadInteger(HY,h,5)
  local integer c=(LoadInteger(HY,h,34))
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or c>45 or LoadInteger(HY,GetHandleId(SGE),'A2SG')==0 then
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call SaveInteger(HY,GetHandleId(SGE),'A2SG',IMaxIF(LoadInteger(HY,GetHandleId(SGE),'A2SG')-1,0))
    if LoadInteger(HY,GetHandleId(SGE),'A2SG')==0 then
      call UnitRemoveAbility(SGE,'A3KJ')
      call UnitRemoveAbility(SGE,'B3KJ')
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set c=c+1
    call SaveInteger(HY,h,34,(c))
    if ModuloInteger(c,5)==0 then
      call SetWidgetLife(SGE,GetWidgetLife(SGE)+11.*QIE)
    endif
  endif
  set t=null
  set SGE=null
  return false
endfunction

function Func4490 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A2SG')
  local real dmg=QIE*90
  call UnitAddAbility2(SGE,'A3KJ')
  call SaveInteger(HY,GetHandleId(SGE),'A2SG',LoadInteger(HY,GetHandleId(SGE),'A2SG')+1)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerAddCondition(t,Condition(function Func4489))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveInteger(HY,h,5,(QIE))
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("war3mapImported\\DarkMending.mdx",SGE,"origin")))
  if IsUnitAlly(SGE,GetOwningPlayer(SKE))then
    call Func2342(SGE,SKE)
    call DamageTarget(SKE,SGE,1,dmg)
    call FuckingAssistBuffWrap(SKE,SGE)
  else
    call DamageTarget(SKE,SGE,1,dmg)
  endif
  set t=null
  set SKE=null
  set SGE=null
endfunction

function Func4491 takes nothing returns nothing
  if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or IsBlocked(GetSpellTargetUnit())==false then
    call Func4490()
  endif
endfunction

function Func4492 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func4486))
  set t=null
  call AddToPurgeList('B0GT','PRGE')
  call AddToPurgeList('A2T4','PRGC')
  call AddToPurgeList('A3IU','PRGC')
  call AddToPurgeList('B3IU','PRGC')
  call AddToPurgeList('A3JT','PRGC')
  call HideAbility('A2T4')
  call AddToPurgeList('A3KJ','PRGA')
  call AddToPurgeList('B3KJ','PRGA')
endfunction

function Func4493 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local integer c=(LoadInteger(HY,(h),34))
  local integer XXO=(LoadInteger(HY,(h),25))
  local integer QIE=(LoadInteger(HY,(h),5))
  local integer z=0
  local real result=(LoadReal(HY,(h),697))
  local real ZEE=(LoadReal(HY,(h),811))
  local real HON=GetUnitState(SGE,UNIT_STATE_LIFE)
  local real HRN=GetUnitState(SGE,UNIT_STATE_MAX_LIFE)
  local real ICX=(LoadReal(HY,(h),808))
  local real N1X
  local real N2X
  if XXO>(QIE+6)*50 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call DisableTrigger(t)
    call UnitRemoveAbility(SGE,'A2KD')
    call UnitRemoveAbility(SGE,'B2KD')
    if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
      set ICX=ICX*2
      loop
        exitwhen z>c
        set z=z+1
        set HON=GetUnitState(SGE,UNIT_STATE_LIFE)
        set N1X=RMinBJ(HRN-HON,ICX)
        call SetUnitState(SGE,UNIT_STATE_LIFE,HON+N1X)
        set ICX=ICX-N1X
        set N2X=(LoadReal(HY,(h),(20000+z)))
        if(LoadUnitHandle(HY,(h),(22000+z)))==SKE or((LoadInteger(HY,(GetHandleId(SGE)),2485))==1)then
          if GetUnitState(SGE,UNIT_STATE_LIFE)<=N2X+2 then
            set N2X=GetUnitState(SGE,UNIT_STATE_LIFE)-2
          endif
        endif
        call DamageTarget((LoadUnitHandle(HY,(h),(22000+z))),SGE,6,N2X)
      endloop
      set HON=GetUnitState(SGE,UNIT_STATE_LIFE)
      set N1X=RMinBJ(HRN-HON,ICX)
      call SetUnitState(SGE,UNIT_STATE_LIFE,HON+N1X)
      set ICX=ICX-N1X
    endif
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and IsDamageReal(GetEventDamage())then
    set c=c+1
    call SaveInteger(HY,(h),34,(c))
    call SaveUnitHandle(HY,(h),(22000+c),(GetEventDamageSource()))
    call SaveReal(HY,(h),(20000+c),((GetEventDamage())*1.0))
  elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_WIDGET_DEATH then
    set XXO=XXO+1
    call SaveInteger(HY,(h),25,(XXO))
    if HRN!=ZEE then
      set ZEE=HRN
      set result=HON
      call SaveReal(HY,(h),697,((result)*1.0))
      call SaveReal(HY,(h),811,((ZEE)*1.0))
    endif
    if HON>result then
      if((LoadInteger(HY,(GetHandleId(SGE)),4298))!=1)then
        set ICX=ICX+HON-result
        call SaveReal(HY,(h),808,((ICX)*1.0))
      else
        call SetUnitState(SGE,UNIT_STATE_LIFE,HON)
      endif
    endif
    call SetUnitState(SGE,UNIT_STATE_LIFE,result)
  endif
  set t=null
  set SGE=null
  set SKE=null
  return false
endfunction

function Func4494 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=GetUnitAbilityLevel(SKE,'A2TF')
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call  DamageBlockActiveTracking(10)
  call UnitAddAbility2(SGE,'A2KD')
  call FuckingAssistBuffWrap(SKE,SGE)
  call TriggerAddCondition(t,Condition(function Func4493))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveInteger(HY,(h),34,0)
  call SaveInteger(HY,(h),25,0)
  call SaveInteger(HY,(h),5,(QIE))
  call SaveReal(HY,(h),808,(0*1.0))
  call SaveReal(HY,(h),697,((GetUnitState(SGE,UNIT_STATE_LIFE))*1.0))
  call SaveReal(HY,(h),811,((GetUnitState(SGE,UNIT_STATE_MAX_LIFE))*1.0))
  call Func0862(SGE)
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func4495 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local unit d=(LoadUnitHandle(HY,(h),45))
  local integer QIE=(LoadInteger(HY,(h),5))
  local real x
  local real y
  local real a
  if GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
  else
    set a= AngleBetweenXY(GetUnitX(d),GetUnitY(d),GetUnitX(SGE),GetUnitY(SGE))
    set x=GetUnitX(d)+20*Cos(a*bj_DEGTORAD)
    set y=GetUnitY(d)+20*Sin(a*bj_DEGTORAD)
    call SetUnitX(d,x)
    call SetUnitY(d,y)
    call SetUnitFacing(d,a)
    if DistanceBetweenUnits(d,SGE)<30 then
      call DamageTarget(LoadUnitHandle(HY,h,2),SGE,1,40+60*QIE)
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call UnitAddAbility(d,'A3SW')
      call SetUnitAbilityLevel(d,'A3SW',QIE)
      call IssueTargetOrderByIdFuckingEx(d,852111,SGE,true)
      call KillUnit(d)
      call SetUnitAnimationByIndex(d,3)
    endif
  endif
  set t=null
  set SGE=null
  set d=null
  return false
endfunction

function Func4496 takes integer QIE,unit d,unit SGE,unit HDE returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call SetUnitAnimationByIndex(d,2)
  call SetUnitVertexColor(d,255,255,255,150)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,SGE)
  call TriggerAddCondition(t,Condition(function Func4495))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveUnitHandle(HY,(h),17,(SGE))
  call SaveUnitHandle(HY,(h),45,d)
  call SaveUnitHandle(HY,(h),2,HDE)
  call SetUnitAnimationByIndex(d,2)
  set t=null
endfunction

function Func4497 takes nothing returns boolean
  return IsMagicImmune(GetFilterUnit())==false and IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and AliveNonBuildOrMarker(GetFilterUnit())and IsUnitInvulnerable(GetFilterUnit())==false
endfunction

function Func4498 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,(h),5))
  local unit u=(LoadUnitHandle(HY,(h),45))
  local group g
  local unit HDE=LoadUnitHandle(HY,h,2)
  local unit RCX
  if GetTriggerEvalCount(t)>250 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(u)
  else
    set tt_unit1=u
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),400,Condition(function Func4497))
    set RCX=GetClosestOfGroup(g,GetUnitX(u),GetUnitY(u))
    call KillGroup(g)
    if RCX!=null then
      call FlushChildHashtable(HY,(h))
      call CleanTrigger(t)
      call Func4496(QIE,u,RCX,HDE)
    endif
    set g=null
    set RCX=null
  endif
  set HDE=null
  set t=null
  set u=null
  return false
endfunction

function Func4499 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local integer QIE=(LoadInteger(HY,(h),5))
  local unit u=(LoadUnitHandle(HY,(h),45))
  local unit HDE=LoadUnitHandle(HY,h,2)
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.2,true)
  call TriggerAddCondition(t,Condition(function Func4498))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveUnitHandle(HY,(h),45,(u))
  call SaveUnitHandle(HY,(h),2,HDE)
  call SetUnitAnimationByIndex(u,1)
  set t=null
  set u=null
  return false
endfunction

function Gnoll_Spark_Start takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit d=CreateUnit(GetOwningPlayer(u),'h0EG',GetSpellTargetX(),GetSpellTargetY(),270)
  local integer QIE=GetUnitAbilityLevel(u,'A2LL')
  call SetUnitAnimationByIndex(d,0)
  call TriggerRegisterTimerEvent(t,2.,false)
  call TriggerAddCondition(t,Condition(function Func4499))
  call SaveInteger(HY,(h),5,(QIE))
  call SaveUnitHandle(HY,(h),45,(d))
  call SaveUnitHandle(HY,h,2,u)
  set u=null
  set d=null
  set t=null
endfunction

function Func4501 takes nothing returns boolean
  return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and GetWidgetLife(GetFilterUnit())>0.5 and IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0
endfunction

function Func4502 takes nothing returns boolean
  return IsUnitEnemy(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Func4503 takes nothing returns boolean
  return(IsHeroUnitId(GetUnitTypeId(GetFilterUnit())))and IsUnitAlly(tt_unit1,GetOwningPlayer(GetFilterUnit()))and(AliveNonBuildOrMarker(GetFilterUnit()))
endfunction

function Gnoll_Field_Duration takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,(h),2))
  local real x=(LoadReal(HY,(h),6))
  local real y=(LoadReal(HY,(h),7))
  local real i=(LoadReal(HY,(h),442))
  local integer lvl=LoadInteger(HY,h,5)
  local group g
  local unit u2
  local integer id='A2M4'-1+lvl
  if(TimerGetElapsed(GlobalTimer))>i then
    call DestroyEffect(LoadEffectHandle(HY,(h),32))
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    set t=null
    set u=null
    return false
  endif
  set g=GetAvailableGroup()
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,x,y,300,Condition(function Func4503))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitAddAbilityTimedExF(u2,id,1,0.15,'a2M4')
    call UnitAddAbilityTimedExF(u2,'ACes',1,0.15,0)
    call FuckingAssistBuffWrap(u,u2)
  endloop
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,x,y,300,Condition(function Func4502))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitAddAbilityTimedExF(u2,'A3SV',1,0.15,'a3SV')
  endloop
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,x,y,419,Condition(function Func4501))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitAddAbilityTimedExF(u2,id,1,0.15,'a2M4')
    call UnitAddAbilityTimedExF(u2,'ACes',1,0.15,0)
  endloop
  call KillGroup(g)
  set t=null
  set u=null
  return false
endfunction

function Gnoll_Field_Start takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local integer lvl=GetUnitAbilityLevel(u,'A2LM')
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Gnoll_Field_Duration))
  call SaveUnitHandle(HY,(h),2,(u))
  call SaveReal(HY,(h),6,x)
  call SaveReal(HY,(h),7,y)
  call SaveInteger(HY,h,5,lvl)
  call SaveReal(HY,(h),442,TimerGetElapsed(GlobalTimer)+3.+0.5*lvl)
  call SaveEffectHandle(HY,(h),32,(AddSpecialEffect("war3mapImported\\MagneticField04.mdl",x,y)))
  call TriggerEvaluate(t)
  call EvasionSourceActivate(0,6)
  set u=null
  set t=null
endfunction

function Func4506 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SGE=(LoadUnitHandle(HY,h,17))
  local integer QIE=LoadInteger(HY,h,5)
  local integer id=(LoadInteger(HY,h,758))
  local integer c=(LoadInteger(HY,h,34))
  local group g
  if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEvalCount(t)>1 and GetUnitAbilityLevel(SGE,LoadInteger(HY,h,759))==0)or c>120 or IsMagicImmune(SGE)then
    call UnitRemoveAbility(SGE,'A2LU')
    call UnitRemoveAbility(SGE,'A2LT')
    call UnitRemoveAbility(SGE,'B0G2')
    call UnitRemoveAbility(SGE,'B0G3')
    call UnitRemoveAbility(SGE,LoadInteger(HY,h,759))
    call DestroyEffect(LoadEffectHandle(HY,h,32))
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
  else
    set c=c+1
    call SaveInteger(HY,h,34,(c))
    set tt_unit1=SKE
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),250,Condition(function Func0816))
    call GroupRemoveUnit(g,SGE)
    if FirstOfGroup(g)==null and IsMagicImmune(SGE)==false then
      if id=='A2LU' then
        if GetUnitAbilityLevel(SGE,'A2LU')==0 then
          call UnitAddAbility2(SGE,'A2LU')
        endif
      else
        if GetUnitAbilityLevel(SGE,'A2LT')==0 then
          call UnitAddAbility2(SGE,'A2LT')
        endif
      endif
      if ModuloInteger(c,10)==0 then
        call DamageTarget(SKE,SGE,1,QIE*15*0.5)
      endif
    else
      if id=='A2LU' then
        if GetUnitAbilityLevel(SGE,'A2LU')>0 then
          call UnitRemoveAbility(SGE,'A2LU')
          call UnitRemoveAbility(SGE,'B0G2')
        endif
      else
        if GetUnitAbilityLevel(SGE,'A2LT')>0 then
          call UnitRemoveAbility(SGE,'A2LT')
          call UnitRemoveAbility(SGE,'B0G3')
        endif
      endif
    endif
    call KillGroup(g)
  endif
  set t=null
  set SKE=null
  set SGE=null
  return false
endfunction

function Func4507 takes nothing returns nothing
  local unit caster=GetTriggerUnit()
  local unit target=GetSpellTargetUnit()
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local integer id='A2LU'
  local integer id2='A2ME' //Ether Essence FX
  local integer a
  local integer lvl=GetUnitAbilityLevel(caster,GetSpellAbilityId())
  if GetUnitTypeId(caster)=='N0MM' then
    set id='A2LT'
    set id2='A3KL'
  endif
  set a=GetAbilityDataDefAddr(id)
  if a<1 then
    call UnitAddAbility(SentFountain,id)
    call UnitRemoveAbility(SentFountain,id)
    set a=GetAbilityDataDefAddr(id)
  endif
  if a>0 then
    set Memory[(a+0x78)/4]=SetRealIntoMemory(-0.30-0.05*lvl)
  endif
  call UnitAddAbility2(target,id2)
  call TriggerRegisterTimerEvent(t,0.05,true)
  call TriggerRegisterDeathEvent(t,target)
  call TriggerAddCondition(t,Condition(function Func4506))
  call SaveUnitHandle(HY,h,2,(caster))
  call SaveUnitHandle(HY,h,17,(target))
  call SaveInteger(HY,h,758,(id))
  call SaveInteger(HY,h,759,id2)
  call SaveInteger(HY,h,5,lvl)
  call SaveEffectHandle(HY,h,32,(AddSpecialEffectTarget("war3mapImported\\Flux3.mdx",target,"origin")))
  call TriggerEvaluate(t)
  set caster=null
  set target=null
  set t=null
endfunction

function Func4508 takes nothing returns nothing
  call HideAbility('A2M9')
  call HideAbility('A2MA')
  call HideAbility('A2LN')
  call HideAbility('A2M8')
  call AddToPurgeList('A2ME','PRGE')
  call AddToPurgeList('A3KL','PRGE')
endfunction

function Func4509 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SVI=(LoadUnitHandle(HY,h,17))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call FlushChildHashtable(HY,(GetHandleId(SVI)))
  call RemoveUnit(SVI)
  set t=null
  set SVI=null
  return false
endfunction

function Func4510 takes unit u returns nothing
  call SetUnitInvulnerable(u,true)
  call UnitAddAbility(u,'A04R')
  call UnitRemoveBuffs(u,true,true)
  call Func0862(u)
endfunction

function Func4511 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call ReviveHero(LoadUnitHandle(HY,h,0),LoadReal(HY,h,0),LoadReal(HY,h,1),false)
  if IsDead(LoadUnitHandle(HY,h,0))==false then
    call Func4510(LoadUnitHandle(HY,h,0))
    call FlushChildHashtable(HY,h)
    call DestroyTimer(t)
  endif
  set t=null
endfunction

function Func4512 takes unit u,real x,real y returns nothing
  local timer t
  local integer h
  if IsDead(u)then
    call ReviveHero(u,x,y,false)
    call Func4510(u)
    if IsDead(u)then
      set t=CreateTimer()
      set h=GetHandleId(t)
      call TimerStart(t,0.1,true,function Func4511)
      call SaveUnitHandle(HY,h,0,u)
      call SaveReal(HY,h,0,x)
      call SaveReal(HY,h,1,y)
      set t=null
    endif
  endif
endfunction

function Func4513 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SVI=(LoadUnitHandle(HY,h,2))
  call FlushChildHashtable(HY,(h))
  call CleanTrigger(t)
  call SetUnitPosition(SVI,GetUnitX(CirclesOfPower[GetPlayerId(GetOwningPlayer(SVI))]),GetUnitY(CirclesOfPower[GetPlayerId(GetOwningPlayer(SVI))]))
  call KillUnit(SVI)
  if IsDead(SVI)then
    call Func4512(SVI,GetUnitX(CirclesOfPower[GetPlayerId(GetOwningPlayer(SVI))]),GetUnitY(CirclesOfPower[GetPlayerId(GetOwningPlayer(SVI))]))
  endif
  call Func4510(SVI)
  set t=null
  set SVI=null
  return false
endfunction

function Func4514 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local unit SVI=(LoadUnitHandle(HY,h,17))
  local integer c=LoadInteger(HY,h,1)
  if c==1 then
    call SaveReal(HY,GetHandleId(SVI),'FnLv',0.)
  endif
  if c==LoadInteger(HY,h,0)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call RemoveSavedHandle(HY,GetHandleId(SVI),'trid')
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",GetUnitX(SVI),GetUnitY(SVI)))
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,2,(SVI))
    call TriggerRegisterTimerEvent(t,0,false)
    call TriggerAddCondition(t,Condition(function Func4513))
  else
    call SaveInteger(HY,h,1,c+1)
    if ModuloInteger(c,10)==0 then
      call Func2778(SVI,(LoadInteger(HY,h,0)-c)/10)
    endif
    call SuspendHeroXP(SVI,true)
    call UnitModifySkillPoints(SVI,-25)
    if GetEmptyInventorySlots(SVI)>0 then
      call UnitAddItem(SVI,CreateItem('I02M',0,0))
    endif
  endif
  set t=null
  set SKE=null
  set SVI=null
  return false
endfunction

function Func4515 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  if HaveSavedHandle(HY,GetHandleId(u),'trid')==false and GetIssuedOrderId()!=851972 and GetIssuedOrderId()!=851973 then
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitPosition(u,GetUnitX(CirclesOfPower[GetPlayerId(GetOwningPlayer(u))]),GetUnitY(CirclesOfPower[GetPlayerId(GetOwningPlayer(u))]))
    call Func0656(u)
    call EnableTrigger(GetTriggeringTrigger())
  endif
  set u=null
endfunction

function Func4516 takes unit u returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerAddCondition(t,Condition(function Func4515))
  set t=null
endfunction

function Func4517 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local trigger t
  local integer h
  local integer QIE=GetUnitAbilityLevel(SKE,'A2M0')
  local unit SVI
  if HaveSavedHandle(HY,GetHandleId(SKE),'tmps')then
    set SVI=LoadUnitHandle(HY,GetHandleId(SKE),'tmps')
    call Func2346(SKE,SVI,1)
    call Func2345(SKE,SVI,1,false)
    call Func1012(SKE,SVI)
    call SetUnitInvulnerable(SVI,false)
    call UnitRemoveAbility(SVI,'A04R')
    call SetUnitPosition(SVI,GetUnitX(SKE),GetUnitY(SKE))
    call SelectUnitAddForPlayer(SVI,GetOwningPlayer(SKE))
  else
    set SVI=Func2347(SKE,1)
    call SaveUnitHandle(HY,GetHandleId(SKE),'tmps',SVI)
    call UnitAddAbility2(SVI,'A3SX')
    call Func4516(SVI)
  endif
  if HaveSavedHandle(HY,GetHandleId(SVI),'trid')then
    set t=LoadTriggerHandle(HY,GetHandleId(SVI),'trid')
  else
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,0.1,true)
    call TriggerRegisterDeathEvent(t,SVI)
    call TriggerAddCondition(t,Condition(function Func4514))
    call SaveTriggerHandle(HY,GetHandleId(SVI),'trid',t)
  endif
  set h=GetHandleId(t)
  call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",SVI,"chest"))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveInteger(HY,h,0,110+20*QIE)
  call SaveInteger(HY,h,1,0)
  call SaveUnitHandle(HY,h,17,(SVI))
  call SetUnitState(SVI,UNIT_STATE_LIFE,GetUnitState(SKE,UNIT_STATE_LIFE))
  call SetUnitState(SVI,UNIT_STATE_MANA,GetUnitState(SKE,UNIT_STATE_MANA))
  set SKE=null
  set SVI=null
  set t=null
endfunction

function Func4518 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local group g
  local integer QIE=GetUnitAbilityLevel(u,'A0VC')
  set tt_unit1=u
  if LoadBoolean(HY,h,0)then
    if GetHandleId(u)<1 then
      call DestroyTrigger(t)
      call FlushChildHashtable(HY,h)
      set t=null
      set u=null
      return false
    endif
  endif
  set g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),425,Condition(function Func0835))
  if FirstOfGroup(g)==null and GetUnitAbilityLevel(u,'A36D')==0 then
    if GetUnitAbilityLevel(u,'A2NX')!=QIE then
      call UnitAddAbility2(u,'A2NX')
      call SetUnitAbilityLevel(u,'A2NX',QIE)
    endif
  else
    if GetUnitAbilityLevel(u,'A2NX')>0 then
      call UnitRemoveAbility(u,'A2NX')
    endif
  endif
  call KillGroup(g)
  set u=null
  set t=null
  set g=null
  return false
endfunction

function Func4519 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit u=GetTriggerUnit()
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func4518))
  call SaveUnitHandle(HY,h,2,(u))
  set t=null
  set u=null
endfunction

function Func4520 takes unit u returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func4518))
  call SaveUnitHandle(HY,h,2,(u))
  call SaveBoolean(HY,h,0,true)
  set t=null
endfunction

function Func4521 takes nothing returns nothing
  set group012=CreateGroup()
  call AddToPurgeList('B07V','PRGE')
  call AddToPurgeList('BHca','PRGE')
  call AddToPurgeList('Bcsd','PRGE')
endfunction

function Func4522 takes nothing returns boolean
  local unit t=GetFilterUnit()
  local integer dmg=0
  local integer h=GetHandleId(t)
  local integer VDX=344691
  local boolean b=false
  if IsUnitAlly(t,player002)and GetUnitAbilityLevel(t,'A04R')==0 and IsDead(t)==false then
    if LoadBoolean(HY,h,VDX)then
      set dmg=LoadInteger(HY,h,VDX)
      set b=true
    endif
    if IsHeroUnitId(GetUnitTypeId(t))then
      if IsUnitType(t,UNIT_TYPE_MELEE_ATTACKER)==false then
        if b or GetUnitAbilityLevel(t,'A35H')>0 then
          if boolean053 then
            if dmg!=integer047 then
              call Stat_Sub(t,dmg,"+DMG")
              call SaveInteger(HY,h,VDX,integer047)
              call Stat_Add(t,integer047,"+DMG")
            endif
          else
            call UnitRemoveAbility(t,'A35H')
            call UnitRemoveAbility(t,'B35H')
            call Stat_Sub(t,dmg,"+DMG")
            call SaveInteger(HY,h,VDX,0)
            call SaveBoolean(HY,h,VDX,false)
          endif
        else
          if boolean053 then
            call SaveInteger(HY,h,VDX,integer047)
            call SaveBoolean(HY,h,VDX,true)
            call Stat_Add(t,integer047,"+DMG")
            call UnitAddAbility2(t,'A35H')
          endif
        endif
      else
        if b then
          call Stat_Sub(t,dmg,"+DMG")
          call SaveInteger(HY,h,VDX,0)
          call SaveBoolean(HY,h,VDX,false)
          call UnitRemoveAbility(t,'A35H')
          call UnitRemoveAbility(t,'B35H')
        endif
      endif
    else
      if IsUnitType(t,UNIT_TYPE_MELEE_ATTACKER)==false and IsUnitType(t,UNIT_TYPE_STRUCTURE)==false then
        if b then
          if boolean053 and LoadInteger(HY,GetHandleId(unit016),344692)==1 then
            if dmg!=integer047 then
              call SaveInteger(HY,h,VDX,integer047)
              call Stat_Sub(t,dmg,"+DMG")
              call Stat_Add(t,integer047,"+DMG")
            endif
          else
            call UnitRemoveAbility(t,'A35H')
            call UnitRemoveAbility(t,'B35H')
            call Stat_Sub(t,dmg,"+DMG")
            call SaveInteger(HY,h,VDX,0)
            call SaveBoolean(HY,h,VDX,false)
          endif
        else
          if boolean053 and LoadInteger(HY,GetHandleId(unit016),344692)==1 then
            call SaveInteger(HY,h,VDX,integer047)
            call SaveBoolean(HY,h,VDX,true)
            call Stat_Add(t,integer047,"+DMG")
            call UnitAddAbility2(t,'A35H')
          endif
        endif
      endif
    endif
  endif
  set t=null
  return false
endfunction

function Func4523 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer QIE=GetUnitAbilityLevel(u,'A2O2')
  local real H_N=GetHeroAgi(u,true)*1.
  local integer dmg=R2I((0.14+0.06*QIE)*H_N)
  local boolean TDR=LoadBoolean(HY,h,10)and LoadInteger(HY,(GetHandleId(u)),704)!='A2O2'
  local player p=LoadPlayerHandle(HY,h,10)
  local boolean H0N
  set unit016=u
  set player002=GetOwningPlayer(u)
  set integer047=dmg
  set boolean053=true
  set H0N=p!=player002
  if IsDead(u)or u==null or GetUnitTypeId(u)<1 or TDR or H0N or GetUnitAbilityLevel(u,'A36D')==1 then
    set integer047=0
    set boolean053=false
  endif
  if H0N then
    set player002=p
  endif
  call GroupEnumUnitsInRange(group012,0,0,12000,Condition(function Func4522))
  if H0N then
    call SavePlayerHandle(HY,h,10,GetOwningPlayer(u))
  endif
  if TDR then
    call RemoveSavedHandle(HY,GetHandleId(u),'TSHT')
    call FlushChildHashtable(HY,h)
    call PauseTimer(t)
    call DestroyTimer(t)
  endif
  set t=null
  set u=null
endfunction

function Func4524 takes unit u returns nothing
  local timer t
  local integer h
  if HaveSavedHandle(HY,GetHandleId(u),'TSHT')==false then
    set t=CreateTimer()
    set h=GetHandleId(t)
    call TimerStart(t,0.5,true,function Func4523)
    call SaveUnitHandle(HY,h,0,u)
    call SaveTimerHandle(HY,GetHandleId(u),'TSHT',t)
    call SaveBoolean(HY,h,10,GetUnitTypeId(u)!='Nbrn')
    call SavePlayerHandle(HY,h,10,GetOwningPlayer(u))
    set t=null
  endif
endfunction

function Func4525 takes nothing returns nothing
  call Func4524(GetTriggerUnit())
endfunction

function Func4526 takes nothing returns nothing
  call Func4524(tt_unit1)
endfunction

function Func4527 takes nothing returns nothing
  call AddTimedKeyToAgent(GetTriggerUnit(),344692,30)
endfunction

function Func4528 takes unit RCX,integer ZAE returns nothing
  call Func0377(RCX,'A2WG',ZAE)
endfunction

function Func4529 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=(LoadUnitHandle(HY,(h),17))
  local real KEO=LoadReal(HY,h,10)
  local real KXO=LoadReal(HY,h,11)
  local real FGE=LoadReal(HY,h,12)
  local real CSI=LoadInteger(HY,h,100)
  local integer c=GetTriggerEvalCount(t)
  if c>CSI or GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(SGE,'B07V')==0 then
    if ModuloInteger(c,2)==1 then
      call KillTrees(GetUnitX(SGE),GetUnitY(SGE),100)
    endif
    call CleanTrigger(t)
  else
    call SetUnitX(SGE,SafeX50(GetUnitX(SGE)+FGE*KEO))
    call SetUnitY(SGE,SafeY50(GetUnitY(SGE)+FGE*KXO))
    call Func1471(SGE)
  endif
  set t=null
  set SGE=null
  return false
endfunction

function Func4530 takes unit d,unit u,unit SKE,real sx,real sy returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local real a=Func0696(d,u)
  local real ILX=DistanceBetweenXY(sx,sy,x,y)
  local real r
  local real KEO=Cos(a)
  local real KXO=Sin(a)
  local integer QIE=GetUnitAbilityLevel(SKE,'A2WF')
  local real CSI=(.5+.1*QIE)/.02
  local real FGE
  local real H5N=900.
  if GetUnitAbilityLevel(SKE,'A3O3')>0 then
    set H5N=H5N+200.
  endif
  set r=RMaxBJ(1,350.*(1.-ILX/H5N))
  set FGE=r/CSI
  call Func2343(u,0.5+0.1*QIE)
  call SaveReal(HY,h,10,KEO)
  call SaveReal(HY,h,11,KXO)
  call SaveReal(HY,h,12,FGE)
  call SaveInteger(HY,h,100,R2I(CSI))
  call SaveUnitHandle(HY,(h),17,(u))
  call Func4528(u,GetUnitAbilityLevel(SKE,'A2WF'))
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,u)
  call TriggerAddCondition(t,Condition(function Func4529))
  set t=null
endfunction

function Func4531 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group016)==false and Roshan!=GetEnumUnit()then
    call GroupAddUnit(group016,GetEnumUnit())
    call Func4530(tt_unit1,GetEnumUnit(),unit272,real127,real128)
  endif
endfunction

function Func4532 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit d=(LoadUnitHandle(HY,(h),19))
  local unit SKE=(LoadUnitHandle(HY,(h),2))
  local real a=(LoadReal(HY,(h),137))
  local real sx=(LoadReal(HY,(h),64))
  local real sy=(LoadReal(HY,(h),65))
  local real H8N=(LoadReal(HY,(h),66))
  local real H9N=(LoadReal(HY,(h),67))
  local group g=(LoadGroupHandle(HY,(h),22))
  local real x=GetUnitX(d)
  local real y=GetUnitY(d)
  local group gg
  if DistanceBetweenXY(x,y,H8N,H9N)<100 then
    set x=H8N
    set y=H9N
  else
    set x=x+40*Cos(a)
    set y=y+40*Sin(a)
  endif
  call SetUnitX(d,SafeX50(x))
  call SetUnitY(d,SafeY50(y))
  set gg=GetAvailableGroup()
  set tt_unit1=d
  set unit272=SKE
  set real127=sx
  set real128=sy
  set group016=g
  call GroupEnumUnitsInRange(gg,x,y,275,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  call ForGroup(gg,function Func4531)
  call KillGroup(gg)
  if(x==H8N and y==H9N)or GetTriggerEvalCount(t)>23 then
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call KillUnit(d)
    call KillGroup(g)
  endif
  set t=null
  set d=null
  set g=null
  set gg=null
  set SKE=null
  return false
endfunction

function Func4533 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=GetTriggerUnit()
  local real x=GetSpellTargetX()
  local real y=GetSpellTargetY()
  local real a=Atan2(y-GetUnitY(SKE),x-GetUnitX(SKE))
  local unit d=CreateUnit(GetOwningPlayer(SKE),'n0NI',GetUnitX(SKE),GetUnitY(SKE),a*bj_RADTODEG)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func4532))
  call SaveUnitHandle(HY,(h),2,(SKE))
  call SaveUnitHandle(HY,(h),19,(d))
  call SaveReal(HY,(h),137,((a)*1.0))
  call SaveReal(HY,(h),64,GetUnitX(SKE))
  call SaveReal(HY,(h),65,GetUnitY(SKE))
  call SaveReal(HY,(h),66,GetUnitX(SKE)+900.*Cos(a))
  call SaveReal(HY,(h),67,GetUnitY(SKE)+900.*Sin(a))
  call SaveGroupHandle(HY,(h),22,(GetAvailableGroup()))
  set t=null
  set SKE=null
  set d=null
endfunction

function Func4534 takes unit u returns boolean
  return GetUnitTypeId(u)=='o01X' or GetUnitAbilityLevel(u,'A30O')>0
endfunction

function Func4535 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and IsUnitEnemy(unit273,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and((LoadInteger(HY,(GetHandleId((GetFilterUnit()))),809))==1)
endfunction

function Func4536 takes unit source returns nothing
  local unit RCX=CreateUnit(GetOwningPlayer(source),'e00E',GetUnitX(source),GetUnitY(source),0)
  call UnitAddAbility(RCX,'A2TG')
  call SetUnitAbilityLevel(RCX,'A2TG',integer542)
  call IssueTargetOrder(RCX,"soulburn",source)
  set RCX=null
endfunction

function Func4537 takes nothing returns nothing
  call Func4536(GetEnumUnit())
endfunction

function Func4538 takes unit source returns nothing
  local group g=GetAvailableGroup()
  if((LoadInteger(HY,(GetHandleId(source)),809))==1)then
    call GroupEnumUnitsInRange(g,0,0,99999,Condition(function Func4535))
  endif
  call GroupAddUnit(g,source)
  call ForGroup(g,function Func4537)
  call KillGroup(g)
  set g=null
endfunction

function Func4539 takes nothing returns nothing
  local unit source=GetEnumUnit()
  if GetUnitTypeId(source)!='o01X' then
    call SetUnitPathing2(source,true)
  endif
  call SaveInteger(HY,(GetHandleId(source)),4336,2)
  set source=null
endfunction

function Func4540 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group046)==false then
    call GroupAddUnit(group046,GetEnumUnit())
    call Func4538(GetEnumUnit())
    if integer543==1 then
      call DamageTarget(unit273,GetEnumUnit(),1,50*integer542)
    endif
  endif
endfunction

function Func4541 takes nothing returns nothing
  local unit source=GetEnumUnit()
  local real result=(LoadReal(HY,(GetHandleId(source)),801))
  local real ZEE=(LoadReal(HY,(GetHandleId(source)),802))
  local real ZWE=real129+ZEE*Cos(result)
  local real ZYE=real130+ZEE*Sin(result)
  call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",ZWE,ZYE))
  if GetUnitTypeId(source)=='o01X' or GetUnitTypeId(source)=='o020' or GetUnitAbilityLevel(source,'A30O')>0 then
    set integer543=1
    call SetUnitPosition(source,ZWE,ZYE)
    call SetUnitX(source,ZWE)
    call SetUnitY(source,ZYE)
  else
    call SetUnitX(source,ZWE)
    call SetUnitY(source,ZYE)
    if IsHeroUnitId(GetUnitTypeId(source))then
      call KillTrees(ZWE,ZYE,100)
    endif
  endif
  if Func0789(source)then
    call Func0788(source)
  endif
  set source=null
endfunction

function Func4542 takes nothing returns nothing
  local unit source=GetEnumUnit()
  if IsDead(source)or((LoadInteger(HY,(GetHandleId(source)),4306))==1)or GetUnitAbilityLevel(source,'B08V')>0 or((LoadInteger(HY,(GetHandleId(source)),4335))==1)then
    call GroupRemoveUnit(group046,source)
    call SaveInteger(HY,(GetHandleId(source)),4336,2)
    if GetUnitTypeId(source)!='o01X' then
      call SetUnitPathing2(source,true)
    endif
  endif
  set source=null
endfunction

function Func4543 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local group g=(LoadGroupHandle(HY,(ZAE),803))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local real ZWE=(LoadReal(HY,(ZAE),23))
  local real ZYE=(LoadReal(HY,(ZAE),24))
  local real ICX=bj_DEGTORAD* AngleBetweenXY(ZWE,ZYE,result,ZEE)
  local real N1X
  local real N2X
  local boolean ZSE=false
  local group IBI=(LoadGroupHandle(HY,(ZAE),187))
  local group HFI
  local real NBX=1000.
  set integer543=0
  set group046=g
  call ForGroup(g,function Func4542)
  if GetTriggerEvalCount(RBX)>200 or FirstOfGroup(g)==null then
    set ZSE=true
  else
    if Func4534(FirstOfGroup(g))==false then
      set NBX=600
    endif
    set N1X=ZWE+NBX*0.03*Cos(ICX)
    set N2X=ZYE+NBX*0.03*Sin(ICX)
    if DistanceBetweenXY(N1X,N2X,result,ZEE)<30 then
      set N1X=result
      set N2X=ZEE
      set ZSE=true
    endif
    set N1X=SafeX50(N1X)
    set N2X=SafeY50(N2X)
    set group046=g
    set real129=N1X
    set real130=N2X
    call ForGroup(g,function Func4541)
    call SaveReal(HY,(ZAE),23,((N1X)*1.0))
    call SaveReal(HY,(ZAE),24,((N2X)*1.0))
    set HFI=GetAvailableGroup()
    set tt_unit1=source
    set group046=IBI
    set unit273=source
    set integer542=GetUnitAbilityLevel(source,'A2QI')
    call GroupEnumUnitsInRange(HFI,N1X,N2X,205,Condition(function Func0816))
    call ForGroup(HFI,function Func4540)
    call KillGroup(HFI)
    set HFI=null
  endif
  if ZSE then
    call ForGroup(g,function Func4539)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call KillGroup(IBI)
    call KillGroup(g)
  endif
  set source=null
  set RBX=null
  set IBI=null
  set g=null
  return false
endfunction

function Func4544 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='o01X' or GetUnitAbilityLevel(GetFilterUnit(),'A30O')>0
endfunction

function Func4545 takes nothing returns nothing
  local unit source=GetEnumUnit()
  call SetUnitPathing2(source,false)
  call SaveInteger(HY,(GetHandleId(source)),4336,1)
  call SaveReal(HY,(GetHandleId(source)),801,((bj_DEGTORAD* AngleBetweenXY(real129,real130,GetUnitX(source),GetUnitY(source)))*1.0))
  call SaveReal(HY,(GetHandleId(source)),802,((DistanceBetweenXY(real129,real130,GetUnitX(source),GetUnitY(source)))*1.0))
  set source=null
endfunction

function Func4546 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX
  local integer ZAE
  local real result=GetUnitX(GetSpellTargetUnit())
  local real ZEE=GetUnitY(GetSpellTargetUnit())
  local real ZWE=GetUnitX(source)
  local real ZYE=GetUnitY(source)
  local real ICX= AngleBetweenXY(ZWE,ZYE,result,ZEE)
  local unit RCX=GetSpellTargetUnit()
  local group g
  if RCX==null then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),265,Condition(function Func4544))
    if FirstOfGroup(g)==null then
      call KillGroup(g)
      set source=null
      set g=null
      return
    endif
    set RCX=FirstOfGroup(g)
    call KillGroup(g)
  endif
  set g=GetAvailableGroup()
  call GroupAddUnit(g,RCX)
  set result=GetUnitX(RCX)
  set ZEE=GetUnitY(RCX)
  set ICX= AngleBetweenXY(ZWE,ZYE,result,ZEE)
  set RBX=CreateTrigger()
  set ZAE=GetHandleId(RBX)
  set real129=result
  set real130=ZEE
  call ForGroup(g,function Func4545)
  set ZWE=ZWE+100*Cos(ICX*bj_DEGTORAD)
  set ZYE=ZYE+100*Sin(ICX*bj_DEGTORAD)
  call TriggerRegisterTimerEvent(RBX,0.03,true)
  call TriggerAddCondition(RBX,Condition(function Func4543))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveReal(HY,(ZAE),6,((ZWE)*1.0))
  call SaveReal(HY,(ZAE),7,((ZYE)*1.0))
  call SaveReal(HY,(ZAE),23,((result)*1.0))
  call SaveReal(HY,(ZAE),24,((ZEE)*1.0))
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call SaveGroupHandle(HY,(ZAE),803,(g))
  call SaveEffectHandle(HY,(ZAE),32,(AddSpecialEffectTarget("war3mapImported\\MagneticGripTarget.mdx",RCX,"chest")))
  set source=null
  set RCX=null
  set RBX=null
  set g=null
endfunction

function Func4547 takes nothing returns nothing
  local unit u=GetSpellTargetUnit()
  local group g
  if u==null then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),265,Condition(function Func4544))
    if FirstOfGroup(g)==null then
      call Func0658('n0N5')
    endif
    call KillGroup(g)
  elseif GetUnitTypeId(u)=='ewsp' then
    call Func0658('n0K9')
  elseif GetUnitAbilityLevel(u,'A30O')==0 and(IsHeroUnitId(GetUnitTypeId(u))or IsUnitEnemy(u,GetOwningPlayer(GetTriggerUnit())))then
    call Func0658('TX1N')
  endif
  call Func2329()
  set u=null
endfunction

function Func4548 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and IsUnitEnemy(unit274,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and((LoadInteger(HY,(GetHandleId((GetFilterUnit()))),809))==1)
endfunction

function Func4549 takes nothing returns nothing
  call UnitAddAbilityTimedExF((GetEnumUnit()),'A2QN',1,2,'B0GK')
endfunction

function Func4550 takes unit source,integer QIE returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  if((LoadInteger(HY,(GetHandleId(source)),809))==1)then
    call GroupEnumUnitsInRange(g,0,0,99999,Condition(function Func4548))
  endif
  call GroupAddUnit(g,source)
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call UnitAddAbilityTimedExF(u2,'A2QN',1,1.2+0.2*QIE,'B0GK')
  endloop
  call KillGroup(g)
  set g=null
endfunction

function Func4551 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group047)==false then
    call GroupAddUnit(group047,GetEnumUnit())
    if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)and GetUnitAbilityLevel(GetEnumUnit(),'A30O')==0 and LoadInteger(HY,GetHandleId(GetEnumUnit()),'A30O'+1)!=1 then
      set boolean182=true
      set unit275=GetEnumUnit()
      if((LoadInteger(HY,(GetHandleId((GetEnumUnit()))),809))==1)then
        set unit276=GetEnumUnit()
      endif
      call DamageTarget(unit274,GetEnumUnit(),1,real132)
      if integer544==1 then
        call Func4550(GetEnumUnit(),GetUnitAbilityLevel(unit274,'A2TJ'))
      endif
    else
      call DamageTarget(unit274,GetEnumUnit(),1,real132)
    endif
  endif
endfunction

function Func4552 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='o01X' or GetUnitAbilityLevel(GetFilterUnit(),'A30O')>0
endfunction

function Func4553 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SKE=(LoadUnitHandle(HY,h,2))
  local group g=(LoadGroupHandle(HY,h,187))
  local group gg
  local unit JMN=(LoadUnitHandle(HY,h,19))
  local real x=(LoadReal(HY,h,6))
  local real y=(LoadReal(HY,h,7))
  local real cx=GetUnitX(SKE)
  local real cy=GetUnitY(SKE)
  local real ILX=DistanceBetweenXY(x,y,cx,cy)
  local real nx
  local real ny
  local real a=(LoadReal(HY,h,137))
  local real JPN=800
  local integer JQN=(LoadInteger(HY,h,34))
  local real JSN=(LoadReal(HY,h,138))
  local boolean JTN=false
  local unit SGE=(LoadUnitHandle(HY,h,810))
  local unit JUN
  local integer c=GetTriggerEvalCount(t)
  set boolean182=false
  call SetUnitTimeScale(SKE,3)
  call SetUnitFacing(SKE,a)
  call SetUnitAnimationByIndex(SKE,0)
  if c>30 then
    if JQN==0 then
      set gg=GetAvailableGroup()
      call GroupEnumUnitsInRange(gg,cx,cy,175,Condition(function Func4552))
      if FirstOfGroup(gg)!=null then
        if IsUnitType(FirstOfGroup(gg),UNIT_TYPE_HERO)==false then
          call KillUnit(FirstOfGroup(gg))
        else
          set JUN=FirstOfGroup(gg)
          call TriggerEvaluate(LoadTriggerHandle(HY,GetHandleId(JUN),'A30O'))
          call AddTimedKeyToAgent(JUN,'A30O'+1,.5)
          set JUN=null
        endif
        set JQN=1
        call SaveInteger(HY,h,34,(JQN))
      endif
      call KillGroup(gg)
    endif
    if JQN==1 then
      set JPN=JPN*2
    endif
    if SGE!=null then
      set a=AngleBetweenUnits(SKE,SGE)
      call SaveReal(HY,h,137,((a)*1.0))
    endif
    set nx=x+0.02*JPN*Cos(a*bj_DEGTORAD)
    set ny=y+0.02*JPN*Sin(a*bj_DEGTORAD)
    call SetUnitX(SKE,SafeX50(nx))
    call SetUnitY(SKE,SafeY50(ny))
    if Func0789(SKE)then
      call Func0788(SKE)
    endif
    call SaveReal(HY,h,6,((GetUnitX(SKE))*1.0))
    call SaveReal(HY,h,7,((GetUnitY(SKE))*1.0))
    call SetUnitX(JMN,GetUnitX(SKE))
    call SetUnitY(JMN,GetUnitY(SKE))
    call KillTrees(GetUnitX(SKE),GetUnitY(SKE),100)
    set ILX=DistanceBetweenXY(x,y,GetUnitX(SKE),GetUnitY(SKE))
    set JSN=JSN+ILX
    call SaveReal(HY,h,138,((JSN)*1.0))
    set gg=GetAvailableGroup()
    set tt_unit1=SKE
    set unit274=SKE
    set group047=g
    set unit275=null
    set real132=100
    set integer544=JQN
    set unit276=null
    if c<40 then
      if c<35 then
        call GroupEnumUnitsInRange(gg,GetUnitX(SKE),GetUnitY(SKE),RMinIF(100,(c-30)*25),Condition(function Func0816))
      else
        call GroupEnumUnitsInRange(gg,GetUnitX(SKE),GetUnitY(SKE),125,Condition(function Func0816))
      endif
    else
      call GroupEnumUnitsInRange(gg,GetUnitX(SKE),GetUnitY(SKE),175,Condition(function Func0816))
    endif
    call ForGroup(gg,function Func4551)
    call KillGroup(gg)
    if unit276!=null then
      set gg=GetAvailableGroup()
      set unit275=null
      set real023=9999
      call GroupEnumUnitsInRange(gg,GetUnitX(unit276),GetUnitY(unit276),625,Condition(function Func4548))
      call KillGroup(gg)
      if unit275==null then
        set JTN=true
        set unit275=unit276
      else
        set SGE=unit275
        call SaveUnitHandle(HY,h,810,(SGE))
      endif
    endif
  else
    call SetUnitX(SKE,x)
    call SetUnitY(SKE,y)
    if IsUnitDisabledSomehow(SKE)then
      set JTN=true
    endif
  endif
  if IsUnitDisabledSomehow(SKE)or GetTriggerEventId()==EVENT_WIDGET_DEATH or JTN or(SGE==null and(GetTriggerEvalCount(t)>130 or boolean182 or(JQN==0 and JSN>800)or(JQN==1 and JSN>1600)))then
    call KillUnit(JMN)
    call KillGroup(g)
    call FlushChildHashtable(HY,(h))
    call CleanTrigger(t)
    call UnitAddAbility(SKE,'A2QR')
    call UnitRemoveAbility(SKE,'A2QR')
    call UnitAddAbility(SKE,integers161[LoadInteger(HY,GetHandleId(SKE),800)])
    call SetUnitTimeScale(SKE,1)
    if boolean182 then
      set nx=GetUnitX(unit275)+50*Cos(a*bj_DEGTORAD)
      set ny=GetUnitY(unit275)+50*Sin(a*bj_DEGTORAD)
      call SetUnitX(SKE,SafeX50(nx))
      call SetUnitY(SKE,SafeY50(ny))
      call IssueTargetOrder(SKE,"attack",unit275)
    endif
  endif
  set SKE=null
  set t=null
  set gg=null
  set g=null
  set JMN=null
  set SGE=null
  return false
endfunction

function Func4554 takes unit source,unit RCX returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit M_X=CreateUnit(GetOwningPlayer(source),'o01P',GetUnitX(source),GetUnitY(source),0)
  local real result= AngleBetweenXY(GetUnitX(source),GetUnitY(source),GetSpellTargetX(),GetSpellTargetY())
  call UnitAddAbility(source,'A2QQ')
  call UnitRemoveAbility(source,'A2QQ')
  call SetUnitTimeScale(source,3)
  call TriggerRegisterDeathEvent(RBX,source)
  call TriggerRegisterTimerEvent(RBX,0.02,true)
  call TriggerAddCondition(RBX,Condition(function Func4553))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveGroupHandle(HY,(ZAE),187,(GetAvailableGroup()))
  call SaveUnitHandle(HY,(ZAE),19,(M_X))
  call SaveReal(HY,(ZAE),6,((GetUnitX(source))*1.0))
  call SaveReal(HY,(ZAE),7,((GetUnitY(source))*1.0))
  call SaveReal(HY,(ZAE),137,((result)*1.0))
  call SaveInteger(HY,(ZAE),34,0)
  call SaveReal(HY,(ZAE),138,(0*1.0))
  call SaveUnitHandle(HY,(ZAE),810,(null))
  if RCX!=null and(GetUnitTypeId(RCX)=='o01X' or GetUnitAbilityLevel(RCX,'A30O')>0)then
    call KillUnit(RCX)
  endif
  set RBX=null
  set M_X=null
endfunction

function Func4555 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='N0MU' and IsUnitIllusion(GetFilterUnit())==false
endfunction

function Func4556 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=(LoadUnitHandle(HY,h,2))
  local real WNE=(LoadReal(HY,h,442))
  local integer O6O=(LoadInteger(HY,(GetHandleId(u)),800))
  local group g
  local real cd
  if u==null then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,0,0,99999,Condition(function Func4555))
    set u=FirstOfGroup(g)
    call KillGroup(g)
    set g=null
    if u!=null then
      call SaveUnitHandle(HY,h,2,(u))
      call SaveInteger(HY,(GetHandleId(u)),800,6)
      call UnitAddAbility2(u,integers161[6])
    endif
  endif
  if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
    if Func0961(GetSpellAbilityId())and O6O<=0 then
      call Func0656(u)
    endif
  elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
    if GetSpellAbilityId()=='A2TJ' then
      call Func4554(u,null)
    endif
  elseif O6O<6 then
    set WNE=WNE-0.2
    call SaveReal(HY,h,442,((WNE)*1.0))
    if WNE<=0. or boolean147 then
      call UnitRemoveAbility(u,integers161[O6O])
      set O6O=O6O+1
      call UnitAddAbility2(u,integers161[O6O])
      call SaveInteger(HY,(GetHandleId(u)),800,(O6O))
      set cd=real131
      if GetUnitAbilityLevel(u,'A39S')==1 then
        set cd=cd*(100.-25*1.)/100.
      endif
      call SaveReal(HY,h,442,cd)
    endif
  endif
  set u=null
  set t=null
  return false
endfunction

function Func4557 takes unit source returns nothing
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call TriggerRegisterTimerEvent(RBX,0.2,true)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_CAST)
  call TriggerRegisterUnitEvent(RBX,source,EVENT_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(RBX,Condition(function Func4556))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  call SaveReal(HY,(ZAE),442,((real131)*1.0))
  call SaveInteger(HY,(GetHandleId(source)),800,6)
  call UnitAddAbility2(source,integers161[6])
  set RBX=null
endfunction

function Func4558 takes nothing returns nothing
  call Func4557(tt_unit1)
endfunction

function Func4559 takes unit source returns nothing
  local unit RCX=udg_Hero[GetPlayerId(GetOwningPlayer(source))]
  local integer ZAE=GetHandleId(RCX)
  local integer QIE=getstonelvl(RCX)
  local integer ZBE=(LoadInteger(HY,(ZAE),279))
  local integer ZCE=1
  local integer JUX=1
  local unit M_X
  loop
    exitwhen ZCE>ZBE
    set M_X=(LoadUnitHandle(HY,(ZAE),(1400+ZCE)))
    if IsDead(M_X)==false then
      call SaveUnitHandle(HY,(ZAE),(1400+JUX),(M_X))
      set JUX=JUX+1
    endif
    set ZCE=ZCE+1
  endloop
  set ZBE=ZBE-1
  call SaveInteger(HY,(ZAE),279,(ZBE))
  set M_X=null
  set RCX=null
endfunction

function Func4560 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local integer c=LoadInteger(HY,h,0)
  call UnitRemoveAbility(u,integers161[c])
  call UnitAddAbility2(u,integers161[IMaxIF(c-1,0)])
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set u=null
  set t=null
endfunction

function Func4561 takes unit u,integer O6O returns nothing
  local integer h=DelayedCallBack(0,function Func4560)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,O6O)
endfunction

function Func4562 takes nothing returns nothing
  local unit u
  local unit J4N=GetTriggerUnit()
  local integer hu=GetHandleId(J4N)
  local integer QIE=getstonelvl(J4N)
  local integer DAI=(LoadInteger(HY,(hu),279))
  local unit J5N=(LoadUnitHandle(HY,(hu),1401))
  local real x
  local real y
  local integer i=(LoadInteger(HY,(GetHandleId(J4N)),800))
  if i>0 then
    call Func4561(J4N,i)
    set i=IMaxBJ(0,i-1)
    call SaveInteger(HY,(GetHandleId(J4N)),800,(i))
    if GetSpellTargetUnit()==null then
      set x=GetSpellTargetX()
      set y=GetSpellTargetY()
    else
      set x=GetUnitX(GetSpellTargetUnit())
      set y=GetUnitY(GetSpellTargetUnit())
    endif
    set u=CreateUnit(GetOwningPlayer(J4N),'o01X',SafeX50(x),SafeY50(y),0)
    call UnitApplyTimedLife(u,'BTLF',120)
    call SetUnitPathing(u,false)
  endif
  set u=null
  set J4N=null
  set J5N=null
endfunction

function Func4563 takes nothing returns boolean
  if Func0961(GetSpellAbilityId())then
    call Func4562()
  endif
  return false
endfunction

function Func4564 takes nothing returns nothing
  if IsUnitInGroup(GetEnumUnit(),group048)==false then
    call GroupAddUnit(group048,GetEnumUnit())
    call DamageTarget(unit277,GetEnumUnit(),1,real134)
    if integer546==1 then
      call StunTargetEx(GetEnumUnit(),0.25+0.5*integer545,false)
    endif
    if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)and((LoadInteger(HY,(GetHandleId((GetEnumUnit()))),809))==1)then
      set unit279=GetEnumUnit()
    endif
  endif
endfunction

function Func4565 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local real result=(LoadReal(HY,(ZAE),6))
  local real ZEE=(LoadReal(HY,(ZAE),7))
  local real ZWE
  local real ZYE=(LoadReal(HY,(ZAE),23))
  local real ICX=(LoadReal(HY,(ZAE),24))
  local real N1X
  local real N2X
  local boolean ZSE=false
  local group g=(LoadGroupHandle(HY,(ZAE),187))
  local group IBI
  local integer QIE=(LoadInteger(HY,(ZAE),34))
  local integer ZBE=GetHeroStr(source,true)
  local unit M_X=(LoadUnitHandle(HY,(ZAE),810))
  if M_X!=null then
    set result=GetUnitX(M_X)
    set ZEE=GetUnitY(M_X)
  endif
  set ZWE=bj_DEGTORAD* AngleBetweenXY(GetUnitX(RCX),GetUnitY(RCX),result,ZEE)
  set N1X=ZYE+(real133)*0.03*Cos(ZWE)
  set N2X=ICX+(real133)*0.03*Sin(ZWE)
  if DistanceBetweenXY(N1X,N2X,result,ZEE)<(5+(real133)*0.03)then
    set N1X=result
    set N2X=ZEE
    set ZSE=true
  endif
  set N1X=SafeX50(N1X)
  set N2X=SafeY50(N2X)
  set group048=g
  set unit277=source
  set integer545=GetUnitAbilityLevel(source,'A2UU')
  set real134=50*integer545
  set unit279=null
  if((LoadInteger(HY,(GetHandleId(RCX)),4306))==1)or GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(RCX,'B08V')>0 or((LoadInteger(HY,(GetHandleId(RCX)),4336))==1)or(M_X==null and GetTriggerEvalCount(RBX)>LoadInteger(HY,ZAE,10))then
    set ZSE=true
  else
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",N1X,N2X))
    if GetUnitTypeId(RCX)=='o01X' or GetUnitTypeId(RCX)=='o020' or GetUnitAbilityLevel(RCX,'A30O')>0 then
      set integer546=1
      call SetUnitPosition(RCX,N1X,N2X)
      call SetUnitX(RCX,SafeX50(N1X))
      call SetUnitY(RCX,SafeY50(N2X))
    else
      set integer546=0
      call SetUnitX(RCX,SafeX50(N1X))
      call SetUnitY(RCX,SafeY50(N2X))
    endif
    if Func0789(RCX)then
      call Func0788(RCX)
    endif
    call KillTrees(N1X,N2X,150)
    call SaveReal(HY,(ZAE),23,((N1X)*1.0))
    call SaveReal(HY,(ZAE),24,((N2X)*1.0))
    set IBI=GetAvailableGroup()
    set tt_unit1=source
    call GroupEnumUnitsInRange(IBI,N1X,N2X,185,Condition(function Func0816))
    call GroupRemoveUnit(IBI,RCX)
    call ForGroup(IBI,function Func4564)
    call KillGroup(IBI)
    if unit279!=null and integer546==1 then
      set IBI=GetAvailableGroup()
      set unit278=null
      set real023=9999
      call GroupEnumUnitsInRange(IBI,GetUnitX(unit279),GetUnitY(unit279),625,Condition(function Func4535))
      call KillGroup(IBI)
      if unit278!=null then
        set M_X=unit278
        call SaveUnitHandle(HY,(ZAE),810,(M_X))
        set ZSE=false
      endif
    endif
    set IBI=null
  endif
  if ZSE then
    if GetUnitTypeId(RCX)!='o01X' then
      call SetUnitPathing2(RCX,true)
    endif
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
    call KillGroup(g)
    call SaveInteger(HY,(GetHandleId(RCX)),4335,2)
    if GetTriggerEventId()!=EVENT_UNIT_DEATH then
      if IsPlayerAlly(GetOwningPlayer(source),GetOwningPlayer(RCX))==false then
        call DamageTarget(unit277,RCX,1,real134)
      endif
    endif
  endif
  set RCX=null
  set RBX=null
  set g=null
  set source=null
  set M_X=null
  return false
endfunction

function Func4566 takes nothing returns boolean
  return GetUnitTypeId(GetFilterUnit())=='o01X' or GetUnitAbilityLevel(GetFilterUnit(),'A30O')>0
endfunction

function Func4567 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(SKE,'A2UU')
  local trigger t
  local integer h
  local real FOO
  local real x=GetUnitX(SKE)
  local real y=GetUnitY(SKE)
  local integer i=-1
  local boolean N4N=false
  local real ILX=400+100*QIE
  local group g
  local real tx
  local real ty
  local real KEO
  local real KXO
  if SGE==null then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,x,y,185,Condition(function Func4566))
    set SGE=GetClosestOfGroup(g,x,y)
    call KillGroup(g)
    set FOO= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetSpellTargetX(),GetSpellTargetY())
  elseif SGE==SKE then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),125,Condition(function Func4566))
    set SGE=GetClosestOfGroup(g,GetSpellTargetX(),GetSpellTargetY())
    call KillGroup(g)
    set FOO= AngleBetweenXY(GetUnitX(SKE),GetUnitY(SKE),GetSpellTargetX(),GetSpellTargetY())
  else
    set FOO=AngleBetweenUnits(SKE,SGE)
  endif
  if SGE==null then
    return
  endif
  set t=CreateTrigger()
  set h=GetHandleId(t)
  if GetUnitTypeId(SGE)=='o01X' or GetUnitAbilityLevel(SGE,'A30O')>0 then
    set ILX=2000
  endif
  set tx=GetUnitX(SGE)
  set ty=GetUnitY(SGE)
  set KEO=Cos(FOO*bj_DEGTORAD)
  set KXO=Sin(FOO*bj_DEGTORAD)
  loop
    exitwhen N4N or i==23
    set i=i+1
    set x=SafeX50(tx+(ILX-i*25)*KEO)
    set y=SafeY50(ty+(ILX-i*25)*KXO)
    if Func0429(x,y)then
      set N4N=true
    endif
  endloop
  call SaveInteger(HY,h,10,R2I(DistanceBetweenXY(x,y,tx,ty)/36)+1)
  call SetUnitPathing2(SGE,false)
  call TriggerRegisterTimerEvent(t,0.03,true)
  call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func4565))
  call SaveUnitHandle(HY,h,2,(SKE))
  call SaveUnitHandle(HY,h,17,(SGE))
  call SaveReal(HY,h,6,((x)*1.0))
  call SaveReal(HY,h,7,((y)*1.0))
  call SaveReal(HY,h,23,((GetUnitX(SGE))*1.0))
  call SaveReal(HY,h,24,((GetUnitY(SGE))*1.0))
  call SaveInteger(HY,h,34,0)
  call SaveGroupHandle(HY,h,187,(GetAvailableGroup()))
  call SaveUnitHandle(HY,h,810,(null))
  call SaveInteger(HY,(GetHandleId(SGE)),4335,1)
  set SGE=null
  set SKE=null
  set t=null
endfunction

function Func4568 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,1)
  local integer hu=GetHandleId(u)
  local unit SGE=LoadUnitHandle(HY,h,0)
  local integer KXN=GetUnitCurrentOrder(u)
  if KXN!=LoadInteger(HY,h,0)then
    if KXN!=851973 then
      call CleanTrigger(t)
      call FlushChildHashtable(HY,h)
      call RemoveSavedHandle(HY,hu,'A2UU')
    else
      call ImminentTriggeredPointOrder(u,851986,GetUnitX(SGE),GetUnitY(SGE))
    endif
  else
    if DistanceBetweenUnits(u,SGE)<=200 then
      call CleanTrigger(t)
      call FlushChildHashtable(HY,h)
      call RemoveSavedHandle(HY,hu,'A2UU')
      call IssueTargetOrder(u,"channel",SGE)
    endif
  endif
  set SGE=null
  set u=null
  set t=null
  return false
endfunction

function Func4569 takes unit u,unit SGE returns nothing
  local trigger t
  local integer h
  local integer hu=GetHandleId(u)
  if HaveSavedHandle(HY,hu,'A2UU')then
    set t=LoadTriggerHandle(HY,hu,'A2UU')
    set h=GetHandleId(t)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call TriggerRegisterTimerEvent(t,0.02,true)
    call TriggerAddCondition(t,Condition(function Func4568))
    call SaveTriggerHandle(HY,hu,'A2UU',t)
    call SaveUnitHandle(HY,h,1,u)
  endif
  call IssueTargetOrder(u,"move",SGE)
  call SaveUnitHandle(HY,h,0,SGE)
  call SaveInteger(HY,h,0,851986)
  set t=null
endfunction

function Func4570 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local group g
  if GetUnitTypeId(SGE)=='n00L' or GetUnitTypeId(SGE)=='ewsp' then
    call InterruptUnitError(u,'n0K9')
  elseif SGE==null or SGE==u then
    set g=GetAvailableGroup()
    call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),205,Condition(function Func4566))
    if FirstOfGroup(g)==null then
      call InterruptUnitError(u,'n0K9')
    endif
    call KillGroup(g)
  else
    if DistanceBetweenUnits(u,SGE)>200 then
      call Func4569(u,SGE)
    endif
  endif
  call Func2329()
  set u=null
  set SGE=null
endfunction

function Func4571 takes nothing returns nothing
  if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or IsBlocked(GetSpellTargetUnit())==false then
    call Func4567()
  endif
endfunction

function Func4572 takes nothing returns nothing
  set unit281=GetEnumUnit()
  call ExecuteFunc("Func4578")
endfunction

function Func4573 takes nothing returns boolean
  return IsDead(GetFilterUnit())==false and(GetUnitTypeId(GetFilterUnit())=='o01X' or(GetUnitAbilityLevel(GetFilterUnit(),'A30O')>0 and((LoadInteger(HY,(GetHandleId((GetFilterUnit()))),4340))!=1)))
endfunction

function Func4574 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  local unit RCX=(LoadUnitHandle(HY,(ZAE),17))
  local real result=GetUnitX(RCX)
  local real ZEE=GetUnitY(RCX)
  local group g=GetAvailableGroup()
  local integer QIE=GetTriggerEvalCount(RBX)
  local integer ZBE=GetUnitAbilityLevel(source,'A2TI')+GetUnitAbilityLevel(source,'A30P')
  local real ZWE=(LoadReal(HY,(GetHandleId(RCX)),807))
  if ModuloInteger(QIE,5)==0 then
    call DamageTarget(source,RCX,1,(25+25*ZBE)/2)
  endif
  set unit280=source
  set tt_unit1=source
  call GroupEnumUnitsInRange(g,result,ZEE,425,Condition(function Func4573))
  call ForGroup(g,function Func4572)
  call KillGroup(g)
  if(TimerGetElapsed(GlobalTimer))>ZWE or IsDead(RCX)or GetUnitAbilityLevel(RCX,'A38A')==0 then
    call UnitRemoveAbility(RCX,'A38A')
    call UnitRemoveAbility(RCX,'B38A')
    call SaveInteger(HY,(GetHandleId(RCX)),809,2)
    call DestroyEffect(LoadEffectHandle(HY,(ZAE),32))
    call FlushChildHashtable(HY,(ZAE))
    call CleanTrigger(RBX)
  endif
  set RBX=null
  set source=null
  set RCX=null
  return false
endfunction

function Func4575 takes unit source,unit RCX returns nothing
  local trigger RBX
  local integer ZAE
  local real result=(LoadReal(HY,(GetHandleId(RCX)),807))
  call SaveReal(HY,(GetHandleId(RCX)),807,(((TimerGetElapsed(GlobalTimer))+6)*1.0))
  if result<(TimerGetElapsed(GlobalTimer))then
    call SaveInteger(HY,(GetHandleId(RCX)),809,1)
    set RBX=CreateTrigger()
    set ZAE=GetHandleId(RBX)
    call SaveUnitHandle(HY,(ZAE),2,(source))
    call SaveUnitHandle(HY,(ZAE),17,(RCX))
    call UnitAddAbility2(RCX,'A38A')
    call TriggerRegisterTimerEvent(RBX,0.1,true)
    call TriggerAddCondition(RBX,Condition(function Func4574))
  endif
  set RBX=null
endfunction

function Func4576 takes nothing returns nothing
  call Func4575(unit280,GetEnumUnit())
endfunction

function Func4577 takes unit source,unit RCX returns nothing
  local group g=GetAvailableGroup()
  local real result=GetUnitX(RCX)
  local real ZEE=GetUnitY(RCX)
  local real ZWE=300
  if GetUnitTypeId(RCX)=='o01X' or GetUnitAbilityLevel(RCX,'A30O')>0 then
    call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherMissile\\DemolisherMissile.mdx",GetUnitX(RCX),GetUnitY(RCX)))
    if GetUnitAbilityLevel(RCX,'A30O')==0 then
      call UnitApplyTimedLife(RCX,'BTLF',8)
      call SaveInteger(HY,(GetHandleId(RCX)),4340,1)
      call SetUnitVertexColor(RCX,150,150,150,200)
    endif
    set ZWE=600
  else
    call DestroyEffect(AddSpecialEffect("war3mapImported\\MagnetizeCastAoE.mdx",GetUnitX(RCX),GetUnitY(RCX)))
  endif
  set tt_unit1=source
  set unit280=source
  set unit281=RCX
  call GroupEnumUnitsInRange(g,result,ZEE,ZWE+25,Condition(function Func0816))
  call ForGroup(g,function Func4576)
  call KillGroup(g)
  set source=null
  set g=null
endfunction

function Func4578 takes nothing returns nothing
  call Func4577(unit280,unit281)
endfunction

function Func4579 takes nothing returns boolean
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local unit SKE=LoadUnitHandle(HY,h,0)
  local real x
  local real y
  local group g
  local unit u
  if not(GetUnitX(SGE)==0 and GetUnitY(SGE)==0)then
    set g=GetAvailableGroup()
    set tt_unit1=SKE
    call UnitRemoveAbility(SGE,'Avul')
    call UnitRemoveAbility(SGE,'A30O')
    call UnitRemoveAbility(SGE,'B30O')
    call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),300,Condition(function DefaultEnemyFilterWithAncientNonImmune))
    loop
      set u=FirstOfGroup(g)
      exitwhen u==null
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",u,"origin"))
      call DamageTarget(SKE,u,1,300)
      call GroupRemoveUnit(g,u)
    endloop
    call KillGroup(g)
    call SetUnitTimeScale(SGE,1)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",SGE,"origin"))
    call DestroyTimer(LoadTimerHandle(HY,h,10))
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
    call RemoveSavedHandle(HY,GetHandleId(SGE),'A30O')
  endif
  set SGE=null
  set SKE=null
  set t=null
  return false
endfunction

function Func4580 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local unit u=LoadUnitHandle(HY,GetHandleId(t),0)
  if IsDead(u)==false then
    call UnitAddAbility2(u,'Avul')
  endif
  call FlushChildHashtable(HY,GetHandleId(t))
  call DestroyTimer(t)
  set t=null
  set u=null
endfunction

function Func4581 takes unit u returns nothing
  local integer h=DelayedCallBack(0,function Func4580)
  call SaveUnitHandle(HY,h,0,u)
endfunction

function Func4582 takes nothing returns nothing
  local trigger t
  local integer h
  local unit SKE=GetTriggerUnit()
  local unit SGE=GetSpellTargetUnit()
  local integer hu=GetHandleId(SGE)
  local timer tt
  local unit d
  if HaveSavedHandle(HY,hu,'A30O')then
    set t=LoadTriggerHandle(HY,hu,'A30O')
    set h=GetHandleId(t)
    set tt=LoadTimerHandle(HY,h,10)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    call SaveTriggerHandle(HY,hu,'A30O',t)
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,10,tt)
    call SaveUnitHandle(HY,h,0,SKE)
    call SaveUnitHandle(HY,h,1,SGE)
    call TriggerRegisterDeathEvent(t,SGE)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerAddCondition(t,Condition(function Func4579))
  endif
  call TimerStart(tt,3,false,null)
  set d=Func0439(SGE)
  call UnitAddAbility(d,'A3QA')
  call SetUnitAbilityLevel(d,'A3QA',3)
  call IssueTargetOrder(d,"sleep",SGE)
  call UnitRemoveAbility(d,'A3QA')
  set d=null
  call UnitAddAbility2(SGE,'A30O')
  call Func4581(SGE)
  call SetUnitTimeScale(SGE,0)
  set tt=null
  set SKE=null
  set SGE=null
  set t=null
endfunction

function Func4583 takes nothing returns nothing
  if IsBlocked(GetSpellTargetUnit())==false or IsUnitAlly(GetSpellTargetUnit(),GetTriggerPlayer())then
    call Func4582()
  endif
endfunction

function EarthSpiritEnchantedRemnantTargetting takes nothing returns nothing
  if IsUnitEnemy(GetOrderTargetUnit(),GetTriggerPlayer())and IsMagicImmune(GetOrderTargetUnit())then
    call Func0658('TX13')
  endif
endfunction

function Func4585 takes nothing returns nothing
  call Func4577(GetTriggerUnit(),GetTriggerUnit())
endfunction

function Func4586 takes nothing returns nothing
  local unit u=tt_unit1
  call UnitAddAbility2(u,'A30N')
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A30N',true)
  set u=null
endfunction

function Func4587 takes nothing returns nothing
  local unit u=tt_unit1
  call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A30N',false)
  set u=null
endfunction

function Func4588 takes nothing returns boolean
  local trigger RBX=GetTriggeringTrigger()
  local integer ZAE=GetHandleId(RBX)
  local unit source=(LoadUnitHandle(HY,(ZAE),2))
  call SetUnitAnimationByIndex(source,8)
  call FlushChildHashtable(HY,(ZAE))
  call CleanTrigger(RBX)
  set RBX=null
  set source=null
  return false
endfunction

function Func4589 takes nothing returns nothing
  local unit source=GetTriggerUnit()
  local trigger RBX=CreateTrigger()
  local integer ZAE=GetHandleId(RBX)
  call SetUnitAnimationByIndex(source,7)
  call TriggerRegisterTimerEvent(RBX,2.5,false)
  call TriggerAddCondition(RBX,Condition(function Func4588))
  call SaveUnitHandle(HY,(ZAE),2,(source))
  set RBX=null
  set source=null
endfunction

function Func4590 takes nothing returns boolean
  if GetUnitTypeId(GetTriggerUnit())=='N0MU' or GetUnitTypeId(GetTriggerUnit())=='N0MW' then
    call Func4589()
  elseif GetUnitTypeId(GetTriggerUnit())=='o01X' then
    call Func4559(GetTriggerUnit())
  endif
  return false
endfunction

function Func4591 takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddCondition(t,Condition(function Func4563))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func4590))
  set t=null
  call AddToPurgeList('A38A','PRGE')
  call AddToPurgeList('B38A','PRGE')
  call AddToPurgeList('A2QN','PRGE')
  call AddToPurgeList('B0GK','PRGE')
endfunction

function Func4592 takes nothing returns nothing
  call SaveInteger(UnitsData,'ugho',1970250369,35)
  call SaveInteger(UnitsData,'ugho',1552560955,41)
  call SaveInteger(UnitsData,'ugho',integer044,45)
  call SaveInteger(UnitsData,'u001',1970250369,18)
  call SaveInteger(UnitsData,'u001',1552560955,26)
  call SaveInteger(UnitsData,'u001',integer044,25)
  call SaveInteger(UnitsData,'n12Q',1970250369,18)
  call SaveInteger(UnitsData,'n12Q',1552560955,26)
  call SaveInteger(UnitsData,'n12Q',integer044,25)
  call SaveInteger(UnitsData,'unec',1970250369,42)
  call SaveInteger(UnitsData,'unec',1552560955,48)
  call SaveInteger(UnitsData,'unec',integer044,90)
  call SaveInteger(UnitsData,'u002',1970250369,18)
  call SaveInteger(UnitsData,'u002',1552560955,26)
  call SaveInteger(UnitsData,'u002',integer044,25)
  call SaveInteger(UnitsData,'n12R',1970250369,18)
  call SaveInteger(UnitsData,'n12R',1552560955,26)
  call SaveInteger(UnitsData,'n12R',integer044,25)
  call SaveInteger(UnitsData,'esen',1970250369,35)
  call SaveInteger(UnitsData,'esen',1552560955,41)
  call SaveInteger(UnitsData,'esen',integer044,45)
  call SaveInteger(UnitsData,'e00V',1970250369,18)
  call SaveInteger(UnitsData,'e00V',1552560955,26)
  call SaveInteger(UnitsData,'e00V',integer044,25)
  call SaveInteger(UnitsData,'n12S',1970250369,18)
  call SaveInteger(UnitsData,'n12S',1552560955,26)
  call SaveInteger(UnitsData,'n12S',integer044,25)
  call SaveInteger(UnitsData,'edry',1970250369,42)
  call SaveInteger(UnitsData,'edry',1552560955,48)
  call SaveInteger(UnitsData,'edry',integer044,90)
  call SaveInteger(UnitsData,'e00W',1970250369,18)
  call SaveInteger(UnitsData,'e00W',1552560955,26)
  call SaveInteger(UnitsData,'e00W',integer044,25)
  call SaveInteger(UnitsData,'n12T',1970250369,18)
  call SaveInteger(UnitsData,'n12T',1552560955,26)
  call SaveInteger(UnitsData,'n12T',integer044,25)
  call SaveInteger(UnitsData,'ebal',1970250369,66)
  call SaveInteger(UnitsData,'ebal',1552560955,80)
  call SaveInteger(UnitsData,'ebal',integer044,88)
  call SaveInteger(UnitsData,'e026',1970250369,66)
  call SaveInteger(UnitsData,'e026',1552560955,80)
  call SaveInteger(UnitsData,'e026',integer044,88)
  call SaveInteger(UnitsData,'umtw',1970250369,66)
  call SaveInteger(UnitsData,'umtw',1552560955,80)
  call SaveInteger(UnitsData,'umtw',integer044,88)
  call SaveInteger(UnitsData,'u00R',1970250369,66)
  call SaveInteger(UnitsData,'u00R',1552560955,80)
  call SaveInteger(UnitsData,'u00R',integer044,88)
  call SaveInteger(UnitsData,'e019',1970250369,150)
  call SaveInteger(UnitsData,'e019',1552560955,250)
  call SaveInteger(UnitsData,'e00S',1970250369,150)
  call SaveInteger(UnitsData,'e00S',1552560955,250)
  call SaveInteger(UnitsData,'e011',1970250369,150)
  call SaveInteger(UnitsData,'e011',1552560955,250)
  call SaveInteger(UnitsData,'e00R',1970250369,150)
  call SaveInteger(UnitsData,'e00R',1552560955,250)
  call SaveInteger(UnitsData,'eaom',1970250369,100)
  call SaveInteger(UnitsData,'eaom',1552560955,150)
  call SaveInteger(UnitsData,'eaoe',1970250369,100)
  call SaveInteger(UnitsData,'eaoe',1552560955,150)
  call SaveInteger(UnitsData,'edob',1970250369,102)
  call SaveInteger(UnitsData,'edob',1552560955,120)
  call SaveInteger(UnitsData,'eaow',1970250369,102)
  call SaveInteger(UnitsData,'eaow',1552560955,120)
  call SaveInteger(UnitsData,'emow',1970250369,102)
  call SaveInteger(UnitsData,'emow',1552560955,120)
  call SaveInteger(UnitsData,'u00T',1970250369,150)
  call SaveInteger(UnitsData,'u00T',1552560955,250)
  call SaveInteger(UnitsData,'u00N',1970250369,150)
  call SaveInteger(UnitsData,'u00N',1552560955,250)
  call SaveInteger(UnitsData,'u00D',1970250369,150)
  call SaveInteger(UnitsData,'u00D',1552560955,250)
  call SaveInteger(UnitsData,'u00M',1970250369,150)
  call SaveInteger(UnitsData,'u00M',1552560955,250)
  call SaveInteger(UnitsData,'usep',1970250369,100)
  call SaveInteger(UnitsData,'usep',1552560955,150)
  call SaveInteger(UnitsData,'utod',1970250369,100)
  call SaveInteger(UnitsData,'utod',1552560955,150)
  call SaveInteger(UnitsData,'ubon',1970250369,102)
  call SaveInteger(UnitsData,'ubon',1552560955,120)
  call SaveInteger(UnitsData,'usap',1970250369,102)
  call SaveInteger(UnitsData,'usap',1552560955,120)
  call SaveInteger(UnitsData,'uzig',1970250369,102)
  call SaveInteger(UnitsData,'uzig',1552560955,120)
  call SaveInteger(UnitsData,'ndtw',1970250369,54)
  call SaveInteger(UnitsData,'ndtw',1552560955,62)
  call SaveInteger(UnitsData,'ndtw',integer044,119)
  call SaveInteger(UnitsData,'ndtr',1970250369,26)
  call SaveInteger(UnitsData,'ndtr',1552560955,33)
  call SaveInteger(UnitsData,'ndtr',integer044,62)
  call SaveInteger(UnitsData,'uske',1970250369,6)
  call SaveInteger(UnitsData,'uske',1552560955,12)
  call SaveInteger(UnitsData,'uske',integer044,25)
  call SaveInteger(UnitsData,'nfsh',1970250369,21)
  call SaveInteger(UnitsData,'nfsh',1552560955,25)
  call SaveInteger(UnitsData,'nfsh',integer044,41)
  call SaveInteger(UnitsData,'nftb',1970250369,22)
  call SaveInteger(UnitsData,'nftb',1552560955,26)
  call SaveInteger(UnitsData,'nftb',integer044,41)
  call SaveInteger(UnitsData,'nkol',1970250369,23)
  call SaveInteger(UnitsData,'nkol',1552560955,29)
  call SaveInteger(UnitsData,'nkol',integer044,41)
  call SaveInteger(UnitsData,'nowe',1970250369,67)
  call SaveInteger(UnitsData,'nowe',1552560955,87)
  call SaveInteger(UnitsData,'nowe',integer044,119)
  call SaveInteger(UnitsData,'nowb',1970250369,15)
  call SaveInteger(UnitsData,'nowb',1552560955,20)
  call SaveInteger(UnitsData,'nowb',integer044,25)
  call SaveInteger(UnitsData,'nomg',1970250369,35)
  call SaveInteger(UnitsData,'nomg',1552560955,45)
  call SaveInteger(UnitsData,'nomg',integer044,62)
  call SaveInteger(UnitsData,'nogm',1970250369,23)
  call SaveInteger(UnitsData,'nogm',1552560955,47)
  call SaveInteger(UnitsData,'nogm',integer044,41)
  call SaveInteger(UnitsData,'n026',1970250369,28)
  call SaveInteger(UnitsData,'n026',1552560955,36)
  call SaveInteger(UnitsData,'n026',integer044,42)
  call SaveInteger(UnitsData,'n127',1970250369,10)
  call SaveInteger(UnitsData,'n127',1552560955,16)
  call SaveInteger(UnitsData,'n127',integer044,46)
  call SaveInteger(UnitsData,'n128',1970250369,10)
  call SaveInteger(UnitsData,'n128',1552560955,16)
  call SaveInteger(UnitsData,'n128',integer044,46)
  call SaveInteger(UnitsData,'ncnk',1970250369,66)
  call SaveInteger(UnitsData,'ncnk',1552560955,78)
  call SaveInteger(UnitsData,'ncnk',integer044,119)
  call SaveInteger(UnitsData,'ncen',1970250369,20)
  call SaveInteger(UnitsData,'ncen',1552560955,24)
  call SaveInteger(UnitsData,'ncen',integer044,41)
  call SaveInteger(UnitsData,'ngns',1970250369,21)
  call SaveInteger(UnitsData,'ngns',1552560955,29)
  call SaveInteger(UnitsData,'ngns',integer044,41)
  call SaveInteger(UnitsData,'nfpu',1970250369,76)
  call SaveInteger(UnitsData,'nfpu',1552560955,88)
  call SaveInteger(UnitsData,'nfpu',integer044,119)
  call SaveInteger(UnitsData,'nfpc',1970250369,45)
  call SaveInteger(UnitsData,'nfpc',1552560955,55)
  call SaveInteger(UnitsData,'nfpc',integer044,88)
  call SaveInteger(UnitsData,'n0HW',1970250369,24)
  call SaveInteger(UnitsData,'n0HW',1552560955,27)
  call SaveInteger(UnitsData,'n0HW',integer044,41)
  call SaveInteger(UnitsData,'n0HX',1970250369,33)
  call SaveInteger(UnitsData,'n0HX',1552560955,37)
  call SaveInteger(UnitsData,'n0HX',integer044,62)
  call SaveInteger(UnitsData,'ngh1',1970250369,30)
  call SaveInteger(UnitsData,'ngh1',1552560955,40)
  call SaveInteger(UnitsData,'ngh1',integer044,62)
  call SaveInteger(UnitsData,'npfl',1970250369,20)
  call SaveInteger(UnitsData,'npfl',1552560955,23)
  call SaveInteger(UnitsData,'npfl',integer044,41)
  call SaveInteger(UnitsData,'nkot',1970250369,17)
  call SaveInteger(UnitsData,'nkot',1552560955,19)
  call SaveInteger(UnitsData,'nkot',integer044,25)
  call SaveInteger(UnitsData,'nkob',1970250369,7)
  call SaveInteger(UnitsData,'nkob',1552560955,9)
  call SaveInteger(UnitsData,'nkob',integer044,25)
  call SaveInteger(UnitsData,'nsat',1970250369,15)
  call SaveInteger(UnitsData,'nsat',1552560955,17)
  call SaveInteger(UnitsData,'nsat',integer044,41)
  call SaveInteger(UnitsData,'nstl',1970250369,27)
  call SaveInteger(UnitsData,'nstl',1552560955,33)
  call SaveInteger(UnitsData,'nstl',integer044,62)
  call SaveInteger(UnitsData,'nsth',1970250369,77)
  call SaveInteger(UnitsData,'nsth',1552560955,91)
  call SaveInteger(UnitsData,'nsth',integer044,119)
  call SaveInteger(UnitsData,'n00S',1970250369,37)
  call SaveInteger(UnitsData,'n00S',1552560955,45)
  call SaveInteger(UnitsData,'n00S',integer044,88)
  call SaveInteger(UnitsData,'nwlg',1970250369,22)
  call SaveInteger(UnitsData,'nwlg',1552560955,26)
  call SaveInteger(UnitsData,'nwlg',integer044,62)
  call SaveInteger(UnitsData,'ngst',1970250369,54)
  call SaveInteger(UnitsData,'ngst',1552560955,62)
  call SaveInteger(UnitsData,'ngst',integer044,119)
  call SaveInteger(UnitsData,'nggr',1970250369,102)
  call SaveInteger(UnitsData,'nggr',1552560955,121)
  call SaveInteger(UnitsData,'nggr',integer044,155)
  call SaveInteger(UnitsData,'nbwm',1970250369,150)
  call SaveInteger(UnitsData,'nbwm',1552560955,190)
  call SaveInteger(UnitsData,'nbwm',integer044,155)
  call SaveInteger(UnitsData,'nbdk',1970250369,35)
  call SaveInteger(UnitsData,'nbdk',1552560955,45)
  call SaveInteger(UnitsData,'nbdk',integer044,62)
  call SaveInteger(UnitsData,'njga',1970250369,152)
  call SaveInteger(UnitsData,'njga',1552560955,170)
  call SaveInteger(UnitsData,'njga',integer044,155)
  call SaveInteger(UnitsData,'njg1',1970250369,52)
  call SaveInteger(UnitsData,'njg1',1552560955,70)
  call SaveInteger(UnitsData,'njg1',integer044,119)
  call SaveInteger(UnitsData,'nbdo',1970250369,86)
  call SaveInteger(UnitsData,'nbdo',1552560955,98)
  call SaveInteger(UnitsData,'nbdo',integer044,119)
  call SaveInteger(UnitsData,'nbds',1970250369,74)
  call SaveInteger(UnitsData,'nbds',1552560955,82)
  call SaveInteger(UnitsData,'nbds',integer044,62)
  call SaveInteger(UnitsData,'n0LC',1970250369,89)
  call SaveInteger(UnitsData,'n0LC',1552560955,97)
  call SaveInteger(UnitsData,'n0LC',integer044,155)
  call SaveInteger(UnitsData,'n0LD',1970250369,60)
  call SaveInteger(UnitsData,'n0LD',1552560955,70)
  call SaveInteger(UnitsData,'n0LD',integer044,119)
  call SaveInteger(UnitsData,'n003',1970250369,106)
  call SaveInteger(UnitsData,'n003',1552560955,700)
  call SaveInteger(UnitsData,'n003',integer044,349)
  call SaveInteger(UnitsData,'n00E',1970250369,158)
  call SaveInteger(UnitsData,'n00E',1552560955,950)
  call SaveInteger(UnitsData,'n00E',integer044,410)
  call SaveInteger(UnitsData,'n00D',1970250369,111)
  call SaveInteger(UnitsData,'n00D',1552560955,1200)
  call SaveInteger(UnitsData,'n00D',integer044,476)
  call SaveInteger(UnitsData,'n00L',1970250369,150)
  call SaveInteger(UnitsData,'n00L',1552560955,400)
  call SaveInteger(UnitsData,'n00L',integer044,1789)
  call SaveInteger(UnitsData,'n01Q',1970250369,30)
  call SaveInteger(UnitsData,'n01Q',1552560955,30)
  call SaveInteger(UnitsData,'n01Q',integer044,155)
  call SaveInteger(UnitsData,'n01R',1970250369,40)
  call SaveInteger(UnitsData,'n01R',1552560955,40)
  call SaveInteger(UnitsData,'n01R',integer044,155)
  call SaveInteger(UnitsData,'u021',1970250369,50)
  call SaveInteger(UnitsData,'u021',1552560955,50)
  call SaveInteger(UnitsData,'u021',integer044,155)
  call SaveInteger(UnitsData,'u022',1970250369,60)
  call SaveInteger(UnitsData,'u022',1552560955,60)
  call SaveInteger(UnitsData,'u022',integer044,155)
  call SaveInteger(UnitsData,'n01M',1970250369,26)
  call SaveInteger(UnitsData,'n01M',1552560955,38)
  call SaveInteger(UnitsData,'n01M',integer044,120)
  call SaveInteger(UnitsData,'n01S',1970250369,26)
  call SaveInteger(UnitsData,'n01S',1552560955,38)
  call SaveInteger(UnitsData,'n01S',integer044,140)
  call SaveInteger(UnitsData,'u023',1970250369,26)
  call SaveInteger(UnitsData,'u023',1552560955,38)
  call SaveInteger(UnitsData,'u023',integer044,160)
  call SaveInteger(UnitsData,'u024',1970250369,26)
  call SaveInteger(UnitsData,'u024',1552560955,38)
  call SaveInteger(UnitsData,'u024',integer044,180)
  call SaveInteger(UnitsData,'n00O',integer044,14)
  call SaveInteger(UnitsData,'n00P',integer044,14)
  call SaveInteger(UnitsData,'n00Q',integer044,14)
  call SaveInteger(UnitsData,'n00N',integer044,14)
  call SaveInteger(UnitsData,'n00O',1970250369,10)
  call SaveInteger(UnitsData,'n00O',1552560955,10)
  call SaveInteger(UnitsData,'n00P',1970250369,10)
  call SaveInteger(UnitsData,'n00P',1552560955,10)
  call SaveInteger(UnitsData,'n00Q',1970250369,10)
  call SaveInteger(UnitsData,'n00Q',1552560955,10)
  call SaveInteger(UnitsData,'n00N',1970250369,10)
  call SaveInteger(UnitsData,'n00N',1552560955,10)
  call SaveInteger(UnitsData,'otot',integer044,12)
  call SaveInteger(UnitsData,'otot',1970250369,10)
  call SaveInteger(UnitsData,'otot',1552560955,10)
  call SaveInteger(UnitsData,'o01B',integer044,12)
  call SaveInteger(UnitsData,'o018',integer044,12)
  call SaveInteger(UnitsData,'o00B',integer044,12)
  call SaveInteger(UnitsData,'o002',integer044,12)
  call SaveInteger(UnitsData,'o01B',1970250369,10)
  call SaveInteger(UnitsData,'o01B',1552560955,10)
  call SaveInteger(UnitsData,'o018',1970250369,10)
  call SaveInteger(UnitsData,'o018',1552560955,10)
  call SaveInteger(UnitsData,'o00B',1970250369,10)
  call SaveInteger(UnitsData,'o00B',1552560955,10)
  call SaveInteger(UnitsData,'o002',1970250369,10)
  call SaveInteger(UnitsData,'o002',1552560955,10)
  call SaveInteger(UnitsData,'e020',1970250369,1)
  call SaveInteger(UnitsData,'e020',1552560955,1)
  call SaveInteger(UnitsData,'e020',integer044,24)
  call SaveInteger(UnitsData,'o01J',1970250369,90)
  call SaveInteger(UnitsData,'o01J',1552560955,90)
  call SaveInteger(UnitsData,'o01K',1970250369,100)
  call SaveInteger(UnitsData,'o01K',1552560955,100)
  call SaveInteger(UnitsData,'o01L',1970250369,110)
  call SaveInteger(UnitsData,'o01L',1552560955,110)
  call SaveInteger(UnitsData,'o01M',1970250369,120)
  call SaveInteger(UnitsData,'o01M',1552560955,120)
  call SaveInteger(UnitsData,'n004',1970250369,300)
  call SaveInteger(UnitsData,'n004',1552560955,300)
  call SaveInteger(UnitsData,'n004',integer044,300)
  call SaveInteger(UnitsData,'n018',1970250369,300)
  call SaveInteger(UnitsData,'n018',1552560955,300)
  call SaveInteger(UnitsData,'n018',integer044,300)
  call SaveInteger(UnitsData,'n01C',1970250369,300)
  call SaveInteger(UnitsData,'n01C',1552560955,300)
  call SaveInteger(UnitsData,'n01C',integer044,300)
  call SaveInteger(UnitsData,'n01G',1970250369,300)
  call SaveInteger(UnitsData,'n01G',1552560955,300)
  call SaveInteger(UnitsData,'n01G',integer044,300)
  call SaveInteger(UnitsData,'efon',1970250369,18)
  call SaveInteger(UnitsData,'efon',1552560955,24)
  call SaveInteger(UnitsData,'efon',integer044,60)
  call SaveInteger(UnitsData,'efo2',1970250369,18)
  call SaveInteger(UnitsData,'efo2',1552560955,24)
  call SaveInteger(UnitsData,'efo2',integer044,60)
  call SaveInteger(UnitsData,'osp4',1970250369,26)
  call SaveInteger(UnitsData,'osp4',1552560955,38)
  call SaveInteger(UnitsData,'osp4',integer044,62)
  call SaveInteger(UnitsData,'o008',1970250369,26)
  call SaveInteger(UnitsData,'o008',1552560955,38)
  call SaveInteger(UnitsData,'o008',integer044,62)
  call SaveInteger(UnitsData,'o009',1970250369,26)
  call SaveInteger(UnitsData,'o009',1552560955,38)
  call SaveInteger(UnitsData,'o009',integer044,62)
  call SaveInteger(UnitsData,'o01C',1970250369,26)
  call SaveInteger(UnitsData,'o01C',1552560955,38)
  call SaveInteger(UnitsData,'o01C',integer044,62)
  call SaveInteger(UnitsData,'o01D',1970250369,26)
  call SaveInteger(UnitsData,'o01D',1552560955,38)
  call SaveInteger(UnitsData,'o01D',integer044,62)
  call SaveInteger(UnitsData,'o01E',1970250369,26)
  call SaveInteger(UnitsData,'o01E',1552560955,38)
  call SaveInteger(UnitsData,'o01E',integer044,62)
  call SaveInteger(UnitsData,'o005',1970250369,21)
  call SaveInteger(UnitsData,'o005',1552560955,21)
  call SaveInteger(UnitsData,'o005',integer044,41)
  call SaveInteger(UnitsData,'o006',1970250369,26)
  call SaveInteger(UnitsData,'o006',1552560955,26)
  call SaveInteger(UnitsData,'o006',integer044,41)
  call SaveInteger(UnitsData,'o007',1970250369,36)
  call SaveInteger(UnitsData,'o007',1552560955,36)
  call SaveInteger(UnitsData,'o007',integer044,41)
  call SaveInteger(UnitsData,'o00F',1970250369,41)
  call SaveInteger(UnitsData,'o00F',1552560955,41)
  call SaveInteger(UnitsData,'o00F',integer044,41)
  call SaveInteger(UnitsData,'n0FJ',1970250369,125)
  call SaveInteger(UnitsData,'n0FJ',1552560955,125)
  call SaveInteger(UnitsData,'n0FI',1970250369,150)
  call SaveInteger(UnitsData,'n0FI',1552560955,150)
  call SaveInteger(UnitsData,'n0F6',1970250369,175)
  call SaveInteger(UnitsData,'n0F6',1552560955,175)
  call SaveInteger(UnitsData,'n0FH',1970250369,200)
  call SaveInteger(UnitsData,'n0FH',1552560955,200)
  call SaveInteger(UnitsData,'h0CH',1970250369,20)
  call SaveInteger(UnitsData,'h0CH',1552560955,30)
  call SaveInteger(UnitsData,'h0CH',integer044,40)
  call SaveInteger(UnitsData,'h0CF',1970250369,20)
  call SaveInteger(UnitsData,'h0CF',1552560955,30)
  call SaveInteger(UnitsData,'h0CF',integer044,40)
  call SaveInteger(UnitsData,'h0C1',1970250369,20)
  call SaveInteger(UnitsData,'h0C1',1552560955,30)
  call SaveInteger(UnitsData,'h0C1',integer044,40)
  call SaveInteger(UnitsData,'h0CG',1970250369,20)
  call SaveInteger(UnitsData,'h0CG',1552560955,30)
  call SaveInteger(UnitsData,'h0CG',integer044,40)
  call SaveInteger(UnitsData,'n019',1970250369,11)
  call SaveInteger(UnitsData,'n019',1552560955,13)
  call SaveInteger(UnitsData,'n019',integer044,62)
  call SaveInteger(UnitsData,'n01E',1970250369,16)
  call SaveInteger(UnitsData,'n01E',1552560955,21)
  call SaveInteger(UnitsData,'n01E',integer044,41)
  call SaveInteger(UnitsData,'u01K',1970250369,32)
  call SaveInteger(UnitsData,'u01K',1552560955,34)
  call SaveInteger(UnitsData,'u01K',integer044,41)
  call SaveInteger(UnitsData,'u01H',1970250369,32)
  call SaveInteger(UnitsData,'u01H',1552560955,34)
  call SaveInteger(UnitsData,'u01H',integer044,41)
  call SaveInteger(UnitsData,'u01J',1970250369,32)
  call SaveInteger(UnitsData,'u01J',1552560955,34)
  call SaveInteger(UnitsData,'u01J',integer044,41)
  call SaveInteger(UnitsData,'u01L',1970250369,32)
  call SaveInteger(UnitsData,'u01L',1552560955,34)
  call SaveInteger(UnitsData,'u01L',integer044,41)
  call SaveInteger(UnitsData,'o00T',1970250369,14)
  call SaveInteger(UnitsData,'o00T',1552560955,17)
  call SaveInteger(UnitsData,'o00T',integer044,40)
  call SaveInteger(UnitsData,'o00U',1970250369,14)
  call SaveInteger(UnitsData,'o00U',1552560955,17)
  call SaveInteger(UnitsData,'o00U',integer044,50)
  call SaveInteger(UnitsData,'o00V',1970250369,14)
  call SaveInteger(UnitsData,'o00V',1552560955,17)
  call SaveInteger(UnitsData,'o00V',integer044,60)
  call SaveInteger(UnitsData,'o00W',1970250369,14)
  call SaveInteger(UnitsData,'o00W',1552560955,17)
  call SaveInteger(UnitsData,'o00W',integer044,70)
  call SaveInteger(UnitsData,'hwat',1970250369,22)
  call SaveInteger(UnitsData,'hwat',1552560955,36)
  call SaveInteger(UnitsData,'hwat',integer044,25)
  call SaveInteger(UnitsData,'hwt2',1970250369,22)
  call SaveInteger(UnitsData,'hwt2',1552560955,36)
  call SaveInteger(UnitsData,'hwt2',integer044,25)
  call SaveInteger(UnitsData,'hwt3',1970250369,22)
  call SaveInteger(UnitsData,'hwt3',1552560955,36)
  call SaveInteger(UnitsData,'hwt3',integer044,25)
  call SaveInteger(UnitsData,'h006',1970250369,22)
  call SaveInteger(UnitsData,'h006',1552560955,36)
  call SaveInteger(UnitsData,'h006',integer044,25)
  call SaveInteger(UnitsData,'o00M',1970250369,20)
  call SaveInteger(UnitsData,'o00M',1552560955,20)
  call SaveInteger(UnitsData,'o00L',1970250369,40)
  call SaveInteger(UnitsData,'o00L',1552560955,40)
  call SaveInteger(UnitsData,'o00O',1970250369,60)
  call SaveInteger(UnitsData,'o00O',1552560955,60)
  call SaveInteger(UnitsData,'o00N',1970250369,80)
  call SaveInteger(UnitsData,'o00N',1552560955,80)
  call SaveInteger(UnitsData,'n00U',1970250369,100)
  call SaveInteger(UnitsData,'n00U',1552560955,100)
  call SaveInteger(UnitsData,'n00U',integer044,196)
  call SaveInteger(UnitsData,'n00Y',1970250369,150)
  call SaveInteger(UnitsData,'n00Y',1552560955,150)
  call SaveInteger(UnitsData,'n00Y',integer044,196)
  call SaveInteger(UnitsData,'n00Z',1970250369,200)
  call SaveInteger(UnitsData,'n00Z',1552560955,200)
  call SaveInteger(UnitsData,'n00Z',integer044,196)
  call SaveInteger(UnitsData,'n0KU',1970250369,50)
  call SaveInteger(UnitsData,'n0KU',1552560955,50)
  call SaveInteger(UnitsData,'n0KU',integer044,196)
  call SaveInteger(UnitsData,'n0KV',1970250369,75)
  call SaveInteger(UnitsData,'n0KV',1552560955,75)
  call SaveInteger(UnitsData,'n0KV',integer044,196)
  call SaveInteger(UnitsData,'n0KW',1970250369,100)
  call SaveInteger(UnitsData,'n0KW',1552560955,100)
  call SaveInteger(UnitsData,'n0KW',integer044,196)
  call SaveInteger(UnitsData,'n027',1970250369,32)
  call SaveInteger(UnitsData,'n027',1552560955,46)
  call SaveInteger(UnitsData,'n027',integer044,62)
  call SaveInteger(UnitsData,'u00S',1970250369,16)
  call SaveInteger(UnitsData,'u00S',1552560955,20)
  call SaveInteger(UnitsData,'h0GC',1970250369,16)
  call SaveInteger(UnitsData,'h0GC',1552560955,20)
  call SaveInteger(UnitsData,'u014',1970250369,100)
  call SaveInteger(UnitsData,'u014',1552560955,100)
  call SaveInteger(UnitsData,'u014',integer044,41)
  call SaveInteger(UnitsData,'u01D',1970250369,100)
  call SaveInteger(UnitsData,'u01D',1552560955,100)
  call SaveInteger(UnitsData,'u01D',integer044,41)
  call SaveInteger(UnitsData,'u01R',1970250369,100)
  call SaveInteger(UnitsData,'u01R',1552560955,100)
  call SaveInteger(UnitsData,'u01R',integer044,41)
  call SaveInteger(UnitsData,'u015',1970250369,100)
  call SaveInteger(UnitsData,'u015',1552560955,100)
  call SaveInteger(UnitsData,'u015',integer044,41)
  call SaveInteger(UnitsData,'u01E',1970250369,100)
  call SaveInteger(UnitsData,'u01E',1552560955,100)
  call SaveInteger(UnitsData,'u01E',integer044,41)
  call SaveInteger(UnitsData,'u01S',1970250369,100)
  call SaveInteger(UnitsData,'u01S',1552560955,100)
  call SaveInteger(UnitsData,'u01S',integer044,41)
  call SaveInteger(UnitsData,'u016',1970250369,100)
  call SaveInteger(UnitsData,'u016',1552560955,100)
  call SaveInteger(UnitsData,'u016',integer044,41)
  call SaveInteger(UnitsData,'u01F',1970250369,100)
  call SaveInteger(UnitsData,'u01F',1552560955,100)
  call SaveInteger(UnitsData,'u01F',integer044,41)
  call SaveInteger(UnitsData,'u01T',1970250369,100)
  call SaveInteger(UnitsData,'u01T',1552560955,100)
  call SaveInteger(UnitsData,'u01T',integer044,41)
  call SaveInteger(UnitsData,'u01T',integer044,149)
  call SaveInteger(UnitsData,'e01H',integer044,149)
  call SaveInteger(UnitsData,'e01Z',integer044,149)
  call SaveInteger(UnitsData,'e02R',integer044,149)
  call SaveInteger(UnitsData,'e02T',integer044,149)
  call SaveInteger(UnitsData,'e02S',integer044,149)
  call SaveInteger(UnitsData,'e030',integer044,149)
  call SaveInteger(UnitsData,'n00J',1970250369,100)
  call SaveInteger(UnitsData,'n00J',1552560955,100)
  call SaveInteger(UnitsData,'n00J',integer044,200)
  call SaveInteger(UnitsData,'n00H',1970250369,100)
  call SaveInteger(UnitsData,'n00H',1552560955,100)
  call SaveInteger(UnitsData,'n00H',integer044,200)
  call SaveInteger(UnitsData,'n00A',1970250369,150)
  call SaveInteger(UnitsData,'n00A',1552560955,150)
  call SaveInteger(UnitsData,'n00A',integer044,300)
  call SaveInteger(UnitsData,'n00G',1970250369,150)
  call SaveInteger(UnitsData,'n00G',1552560955,150)
  call SaveInteger(UnitsData,'n00G',integer044,300)
  call SaveInteger(UnitsData,'n006',1970250369,200)
  call SaveInteger(UnitsData,'n006',1552560955,200)
  call SaveInteger(UnitsData,'n006',integer044,400)
  call SaveInteger(UnitsData,'n00K',1970250369,200)
  call SaveInteger(UnitsData,'n00K',1552560955,200)
  call SaveInteger(UnitsData,'n00K',integer044,400)
  call SaveInteger(UnitsData,'o004',1970250369,100)
  call SaveInteger(UnitsData,'o004',1552560955,100)
  call SaveInteger(UnitsData,'o004',integer044,25)
endfunction

function Func4593 takes nothing returns nothing
  call SaveInteger(UnitsData,'ebal',0x43B762FC,850)
  call SaveInteger(UnitsData,'e026',0x43B762FC,850)
  call SaveInteger(UnitsData,'umtw',0x43B762FC,850)
  call SaveInteger(UnitsData,'u00R',0x43B762FC,850)
  call SaveInteger(UnitsData,'o02B',0x43B762FC,100)
  call SaveInteger(UnitsData,'oeye',0x43B762FC,100)
  call SaveInteger(UnitsData,'n01Q',0x43B762FC,700)
  call SaveInteger(UnitsData,'u021',0x43B762FC,900)
  call SaveInteger(UnitsData,'u022',0x43B762FC,1000)
  call SaveInteger(UnitsData,'h308',0x43B762FC,700)
  call SaveInteger(UnitsData,'n01R',0x43B762FC,900)
  call SaveInteger(UnitsData,'h309',0x43B762FC,1000)
  call SaveInteger(UnitsData,'n00U',0x43B762FC,1800)
  call SaveInteger(UnitsData,'n00Y',0x43B762FC,1800)
  call SaveInteger(UnitsData,'n00Z',0x43B762FC,1800)
  call SaveInteger(UnitsData,'n0KU',0x43B762FC,1800)
  call SaveInteger(UnitsData,'n0KV',0x43B762FC,1800)
  call SaveInteger(UnitsData,'n0KW',0x43B762FC,1800)
  call SaveInteger(UnitsData,'o004',0x43B762FC,1600)
  call SaveInteger(UnitsData,'Usyl',0x43B762FC,1000)
  call SaveInteger(UnitsData,'Naka',0x43B762FC,1000)
  call SaveInteger(UnitsData,'Udre',0x43B762FC,1800)
  call SaveInteger(UnitsData,'H071',0x43B762FC,1800)
  call SaveInteger(UnitsData,'H0ER',0x43B762FC,1800)
  call SaveInteger(UnitsData,'o01N',0x43B762FC,1800)
endfunction

function Func4594 takes unit HDE,unit SGE,real KTN,real KUN,real dmg,integer c returns nothing
  local group g=GetAvailableGroup()
  local unit u2
  local real a
  local real x
  local real y
  local group gg
  if unit033!=null then
    set a=bj_DEGTORAD*GetUnitFacing(unit033)
  else
    set a=Func0696(HDE,SGE)
  endif
  set x=GetUnitX(SGE)+KUN*Cos(a)
  set y=GetUnitY(SGE)+KUN*Sin(a)
  set tt_unit1=HDE
  call GroupEnumUnitsInRange(g,x,y,KUN+48,Condition(function Func0816))
  call GroupRemoveUnit(g,SGE)
  if c>1 then
    set gg=GetAvailableGroup()
  else
    set gg=g
  endif
  loop
    loop
      set u2=FirstOfGroup(gg)
      exitwhen u2==null
      call GroupRemoveUnit(gg,u2)
      call DamageTarget(HDE,u2,10,dmg*KTN)
    endloop
    set c=c-1
    exitwhen c<=0
    call GroupAddGroup(g,gg)
  endloop
  if gg!=g then
    call KillGroup(gg)
  endif
  call KillGroup(g)
endfunction

function Func4595 takes unit u,unit SGE,real dmg,boolean KYN,unit KZN returns nothing
  local real KTN=0.
  local real KUN=0.
  local integer i=0
  local integer k=0
  if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false then
    return
  endif
  set unit033=KZN
  if GetUnitAbilityLevel(u,'A36D')==0 then
    if GetUnitAbilityLevel(u,'A01K')>0 then
      set KTN=0.18+0.12*GetUnitAbilityLevel(u,'A01K')
      set KUN=300.
      call Func4594(u,SGE,KTN,KUN,dmg,1)
    endif
    if GetUnitAbilityLevel(u,'A13T')>0 and KYN==false then
      set KTN=1.
      if GetUnitAbilityLevel(u,'A144')==1 then
        set KUN=600.
      elseif GetUnitAbilityLevel(u,'A11S')==1 then
        set KUN=550.
      elseif GetUnitAbilityLevel(u,'A145')==1 then
        set KUN=500.
      elseif GetUnitAbilityLevel(u,'A146')==1 then
        set KUN=450.
      endif
      if KUN>0 then
        call Func4594(u,SGE,KTN,KUN,dmg,1)
      endif
    endif
  endif
  if GetUnitAbilityLevel(u,'A1W0')>0 then
    set KTN=.5
    set KUN=400.
    call Func4594(u,SGE,KTN,KUN,dmg,1)
  endif
  if GetUnitAbilityLevel(u,'B00U')>0 then
    if GetUnitAbilityLevel(u,'A1Q3')>0 then
      set KTN=.5
    elseif GetUnitAbilityLevel(u,'A1Q2')>0 then
      set KTN=.4
    elseif GetUnitAbilityLevel(u,'A1Q1')>0 then
      set KTN=.3
    elseif GetUnitAbilityLevel(u,'A1Q0')>0 then
      set KTN=.2
    endif
    set KUN=240.
    call Func4594(u,SGE,KTN,KUN,dmg,1)
  endif
  loop
    exitwhen i>UnitInventorySize(u)
    if GetItemTypeId(UnitItemInSlot(u,i))==Item_Real[integer242]then
      set k=k+1
    endif
    set i=i+1
  endloop
  if k>0 then
    call Func4594(u,SGE,0.35,280.,dmg,k)
  endif
endfunction

function Func4596 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit SGE=LoadUnitHandle(HY,h,1)
  local unit WXE
  local real dmg
  if IsDead(SGE)==false and GetUnitAbilityLevel(SGE,'A04R')==0 then
    set WXE=LoadUnitHandle(HY,h,0)
    set dmg=LoadReal(HY,h,0)
    if IsUnitType(WXE,UNIT_TYPE_MELEE_ATTACKER)then
      if GetUnitAbilityLevel(WXE,'A3AQ')==1 then
        call Func4595(WXE,SGE,dmg*0.6,true,null)
        call DamageTarget(WXE,SGE,10,dmg*0.6)
      else
        call Func4595(WXE,SGE,dmg*0.32,true,null)
        call DamageTarget(WXE,SGE,10,dmg*0.32)
      endif
    else
      if GetUnitAbilityLevel(WXE,'A3AQ')==1 then
        call DamageTarget(WXE,SGE,10,dmg*0.25)
      else
        call DamageTarget(WXE,SGE,10,dmg*0.12)
      endif
    endif
  endif
  call PauseTimer(t)
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set SGE=null
  set WXE=null
  set t=null
endfunction

function Func4597 takes unit WXE,unit SGE,real dmg returns nothing
  local integer h=DelayedCallBack(0,function Func4596)
  call SaveUnitHandle(HY,h,0,WXE)
  call SaveUnitHandle(HY,h,1,SGE)
  call SaveReal(HY,h,0,dmg)
endfunction

function Func4598 takes nothing returns nothing
  if IsUnitType(CastedUnit,UNIT_TYPE_HERO)and GetUnitTypeId(CastedUnit)==HeroID[30]and IsUnitEnemy(CastedUnit,GetOwningPlayer(TriggeredUnit))then
    if GetUnitAbilityLevel(CastedUnit,'A33E')==1 then
      call UnitRemoveAbility(CastedUnit,'A33E')
    endif
    call SaveReal(MHT,GetHandleId(CastedUnit),'LSTC',TimerGetElapsed(GlobalTimer))
  endif
endfunction

function Func4599 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'Afbt')==1 and GetUnitAbilityLevel(CastedUnit,'A022')==0 and GetUnitState(TriggeredUnit,UNIT_STATE_MANA)>0 and IsMagicImmune(TriggeredUnit)==false then
    call Func1466(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4600 takes integer i,unit u,unit t returns nothing
  local integer k=1
  loop
    if GetRandomInt(1,100)<26 then
      call DamageTarget(u,t,1,85)
    endif
    set k=k+1
    exitwhen k>=i
  endloop
endfunction

function Func4601 takes nothing returns nothing
  local integer c
  if integers105[GetPlayerId(GetOwningPlayer(CastedUnit))]>0 then
    set c=Func0891(CastedUnit,Item_Real[integer165])
    if c>0 then
      call Func4600(c,CastedUnit,TriggeredUnit)
    endif
  endif
endfunction

function Func4602 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'B3I8')>0 then
    call Func3584(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4603 takes nothing returns nothing
  call Func3534(CastedUnit,TriggeredUnit)
endfunction

function Func4604 takes nothing returns nothing
  local integer QIE
  local real M3I
  if GetUnitAbilityLevel(CastedUnit,'B07O')==0 then
    return
  endif
  if IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(TriggeredUnit)==false and IsUnitType(TriggeredUnit,UNIT_TYPE_MECHANICAL)==false and IsUnitEnemy(CastedUnit,GetOwningPlayer(TriggeredUnit))and IsDead(CastedUnit)==false then
    if IsUnitType(CastedUnit,UNIT_TYPE_MELEE_ATTACKER)then
      set M3I=0.15
    else
      set M3I=0.1
    endif
    call SetWidgetLife(CastedUnit,GetWidgetLife(CastedUnit)+GetEventDamage()*M3I)
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",CastedUnit,"origin"))
  endif
endfunction

function Func4605 takes nothing returns nothing
  if IsUnitType(TriggeredUnit,UNIT_TYPE_HERO)or IsUnitSpiritBear(TriggeredUnit)then
    call Func1309(TriggeredUnit)
  endif
  if IsUnitType(CastedUnit,UNIT_TYPE_HERO)or IsUnitSpiritBear(CastedUnit)then
    call Func1309(CastedUnit)
  endif
endfunction

function Func4606 takes nothing returns nothing
  if IsUnitIllusion(CastedUnit)==false and(GetUnitAbilityLevel(CastedUnit,'A1AB')>0 or GetUnitAbilityLevel(CastedUnit,'A1AD')>0 or GetUnitAbilityLevel(CastedUnit,'A3AQ')>0)and IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(TriggeredUnit,GetOwningPlayer(CastedUnit))and IsHeroUnitId(GetUnitTypeId(TriggeredUnit))==false and GetUnitAbilityLevel(TriggeredUnit,'A04R')==0 and TriggeredUnit!=Roshan then
    call Func4597(CastedUnit,TriggeredUnit,real014)
  endif
endfunction

function Func4607 takes nothing returns nothing
  if IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false and IsUnitType(TriggeredUnit,UNIT_TYPE_MECHANICAL)==false and IsUnitEnemy(TriggeredUnit,GetOwningPlayer(CastedUnit))and IsUnitIllusion(CastedUnit)==false and(GetUnitAbilityLevel(CastedUnit,'A0JH')>0 or GetUnitAbilityLevel(CastedUnit,'A0FJ')>0)then
    call Func1467(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4608 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'Broa')>0 then
    call UnitRemoveAbility(CastedUnit,'Broa')
    call UnitRemoveAbility(CastedUnit,'A3R0')
    call UnitRemoveAbility(CastedUnit,'A3R1')
    call UnitRemoveAbility(CastedUnit,'A3R2')
    call UnitRemoveAbility(CastedUnit,'A3R3')
  endif
endfunction

function Func4609 takes nothing returns nothing
  if LoadInteger(HY,integer045,120)>0 and(GetUnitAbilityLevel(CastedUnit,'A2GD')>0 or GetUnitAbilityLevel(CastedUnit,'A2GE')>0 or GetUnitAbilityLevel(CastedUnit,'A2GF')>0 or GetUnitAbilityLevel(CastedUnit,'A2GC')>0)then
    call SaveInteger(HY,integer045,120,LoadInteger(HY,integer045,120)-1)
    call Func4399(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4610 takes nothing returns nothing
  call SaveBoolean(HY,integer045,120,GetUnitAbilityLevel(CastedUnit,'B0FJ')>0)
  if GetUnitAbilityLevel(CastedUnit,'B0FJ')>0 then
    call SaveInteger(HY,integer045,120,LoadInteger(HY,integer045,120)+1)
  endif
endfunction

function Func4611 takes nothing returns nothing
  if GetUnitTypeId(CastedUnit)=='H00E' or GetUnitTypeId(CastedUnit)=='H00F' or GetUnitTypeId(CastedUnit)=='H00G' then
    if GetUnitAbilityLevel(TriggeredUnit,'A04R')==0 and IsDead(TriggeredUnit)==false then
      call Func2562(CastedUnit,TriggeredUnit)
    endif
  endif
endfunction

function Func4612 takes nothing returns nothing
  if IsHeroUnitId(GetUnitTypeId(tt_unit3))and GetUnitAbilityLevel(tt_unit1,'A3NX')>0 and GetUnitAbilityLevel(tt_unit1,'A0FA')>0 and GetUnitAbilityLevel(tt_unit1,'A36D')==0 then
    call Func3865(tt_unit1,tt_unit3)
  endif
endfunction

function Func4613 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A0FA')>0 and GetUnitAbilityLevel(CastedUnit,'A36D')==0 then
    call Func3865(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4614 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'B03U')>0 then
    call Func2586(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4615 takes nothing returns boolean
  return GetUnitAbilityLevel(CastedUnit,'A0SS')>0 and GetUnitTypeId(TriggeredUnit)!='n00L' and GetUnitTypeId(TriggeredUnit)!='n0F5' and Func0593(GetUnitTypeId(TriggeredUnit))==false and GetUnitAbilityLevel(CastedUnit,'A36D')==0 and IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(TriggeredUnit,'A04R')==0
endfunction

function Func4616 takes nothing returns nothing
  if (GetUnitAbilityLevel(CastedUnit,'A0SS')>0 and GetUnitTypeId(TriggeredUnit)!='n00L' and GetUnitTypeId(TriggeredUnit)!='n0F5' and Func0593(GetUnitTypeId(TriggeredUnit))==false and GetUnitAbilityLevel(CastedUnit,'A36D')==0 and IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(TriggeredUnit,'A04R')==0)then
    call Func3696(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4617 takes nothing returns nothing
  if (GetUnitAbilityLevel(CastedUnit,'A0SS')>0 and GetUnitTypeId(TriggeredUnit)!='n00L' and GetUnitTypeId(TriggeredUnit)!='n0F5' and Func0593(GetUnitTypeId(TriggeredUnit))==false and GetUnitAbilityLevel(CastedUnit,'A36D')==0 and IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(TriggeredUnit,'A04R')==0)then
    call Func3697(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4618 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'B06Y')>0 then
    call Func3368(CastedUnit,TriggeredUnit,LoadBoolean(HY,integer045,0))
  endif
endfunction

function Func4619 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'B05X')>0 then
    call Func2920(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4620 takes nothing returns nothing
  if(GetUnitAbilityLevel(CastedUnit,'A1HR')>0 and GetUnitAbilityLevel(CastedUnit,'A36D')==0)and IsUnitType(TriggeredUnit,UNIT_TYPE_HERO)then
    call Func4148(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4621 takes nothing returns nothing
  if(GetUnitAbilityLevel(CastedUnit,'A0G5')>0)then
    call SB_GreaterBash(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4622 takes nothing returns nothing
  if(GetUnitAbilityLevel(CastedUnit,'A2X2')>0)then
    call Func3136(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4623 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A1V7')>0 and NonBuildOrMarker(TriggeredUnit)then
    call Func1470(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4624 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A2KV')>0 then
    call Func1468(TriggeredUnit,IsUnitType(CastedUnit,UNIT_TYPE_MELEE_ATTACKER))
  endif
endfunction

function Func4625 takes nothing returns nothing
  if(GetUnitAbilityLevel(CastedUnit,'A0MY')>0 or GetUnitAbilityLevel(CastedUnit,'A35K')>0)and GetUnitAbilityLevel(CastedUnit,'A36D')==0 and LoadBoolean(HY,integer045,15)and LoadBoolean(HY,integer045,11)==false and LoadBoolean(HY,integer045,12)==false and LoadBoolean(HY,integer045,14)then
    call Func4011(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4626 takes nothing returns nothing
  if IsUnitSpiritBear(CastedUnit)and IsUnitIllusion(CastedUnit)==false then
    call Func2988(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4627 takes nothing returns nothing
  call Func2641(CastedUnit,TriggeredUnit)
endfunction

function Func4628 takes nothing returns nothing
  if(GetUnitAbilityLevel(CastedUnit,'A0N7')>0)and GetUnitAbilityLevel(CastedUnit,'A36D')==0 then
    call Func3554(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4629 takes nothing returns nothing
  call Huskar_BurningSpears_OnAttack(CastedUnit,TriggeredUnit)
endfunction

function Func4630 takes nothing returns nothing
  call Func3438(CastedUnit,TriggeredUnit)
endfunction

function Func4631 takes nothing returns nothing
  call Func3170(CastedUnit,TriggeredUnit)
endfunction

function Func4632 takes nothing returns nothing
  call Func3229(CastedUnit,TriggeredUnit)
endfunction

function RikiBackStabWrapper takes nothing returns nothing
  call Func2963(CastedUnit,TriggeredUnit)
endfunction

function Func4634 takes nothing returns nothing
  call Func2883(CastedUnit,TriggeredUnit)
endfunction

function Func4635 takes nothing returns nothing
  call Func3113(CastedUnit,TriggeredUnit)
endfunction

function Func4636 takes nothing returns nothing
  call Func3245(CastedUnit,TriggeredUnit)
endfunction

function Func4637 takes nothing returns nothing
  call Func4015(CastedUnit,TriggeredUnit)
endfunction

function Func4638 takes nothing returns nothing
  call Func3894(CastedUnit,TriggeredUnit)
endfunction

function Func4639 takes nothing returns nothing
  if GetUnitAbilityLevel(TriggeredUnit,'A00V')>0 and GetUnitAbilityLevel(CastedUnit,'A04R')==0 and Func0610(CastedUnit)==false and GetUnitAbilityLevel(TriggeredUnit,'A36D')==0 and LoadInteger(HY,GetHandleId(CastedUnit),'B39C')!=1 then
    call Func2460(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4640 takes nothing returns nothing
  call Func4442(CastedUnit,TriggeredUnit)
endfunction

function Func4641 takes nothing returns nothing
  call Func4403(CastedUnit,TriggeredUnit)
endfunction

function Func4642 takes nothing returns nothing
  call Func3261(CastedUnit,TriggeredUnit)
endfunction

function Func4643 takes nothing returns nothing
  if Func0619(CastedUnit)and IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false then
    call Func4073(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4644 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A0RM')>0 then
    call Func3172(CastedUnit)
  endif
endfunction

function Func4645 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A03S')>0 and GetUnitAbilityLevel(CastedUnit,'A36D')==0 and IsMagicImmune(TriggeredUnit)==false then
    if GetRandomReal(1,100)<=40 then
      call Func2930(CastedUnit,TriggeredUnit)
    endif
  endif
endfunction

function Func4646 takes nothing returns nothing
  if LoadBoolean(HY,integer045,20)then
    if IsMagicImmune(TriggeredUnit)==false then
      call  DamageBlockActiveTracking(5.)
      call UnitAddAbilityTimedExF(TriggeredUnit,'A39D',1,5.,'B39D')
      call Break_Main(TriggeredUnit,5.)
    endif
    call RemoveSavedBoolean(HY,integer045,20)
  endif
endfunction

function Func4647 takes nothing returns nothing
  if GetUnitTypeId(TriggeredUnit)=='n0F5' then
    call Func3402()
  endif
endfunction

function Func4648 takes nothing returns nothing
  local real FZE=GetWidgetLife(TriggeredUnit)
  local real dmg=2500
  if IsUnitType(CastedUnit,UNIT_TYPE_HERO)then
    set dmg=10000
  elseif IsUnitType(CastedUnit,UNIT_TYPE_STRUCTURE)then
    set dmg=5000
  endif
  if FZE>dmg+50 then
    call SetWidgetLife(TriggeredUnit,FZE-dmg)
  else
    call DamageTarget(CastedUnit,TriggeredUnit,6,9999999)
  endif
endfunction

function Func4649 takes nothing returns nothing
  if Func0593(GetUnitTypeId(TriggeredUnit))then
    call Func4648()
  endif
endfunction

function Func4650 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'A09V')>0 and GetUnitAbilityLevel(TriggeredUnit,'B06D')>0 then
    call Func4021(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4651 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'B0AR')==1 then
    call Func2600(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4652 takes nothing returns nothing
  if GetUnitAbilityLevel(CastedUnit,'B0AR')>0 then
    call Func2601(CastedUnit,TriggeredUnit)
  endif
endfunction

function Func4653 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local integer a=LoadInteger(HY,h,0)
  call SetAbilityDisabled(a,GetAbilityDisabledCount(a)-1)
  call DelayedCallBackClean()
endfunction

function Func4654 takes unit u,integer id returns nothing
  local integer a=GetUnitAbility(u,id)
  local integer h
  if a>0 then
    call SetAbilityDisabled(a,GetAbilityDisabledCount(a)+1)
    set h=DelayedCallBack(0.1,function Func4653)
    call SaveInteger(HY,h,0,a)
  endif
endfunction

function Func4655 takes nothing returns nothing
  local integer i=GetUnitCurrentOrder(CastedUnit)
  if i==852243 or i==852254 or i==852173 then
    if GetUnitAbilityLevel(CastedUnit,'A1CN')>0 then
      call Func4654(CastedUnit,'A1CN')
    endif
    if GetUnitAbilityLevel(CastedUnit,'A04T')>0 then
      call Func4654(CastedUnit,'A04T')
    endif
    if GetUnitAbilityLevel(CastedUnit,'A0II')>0 then
      call Func4654(CastedUnit,'A0II')
    endif
    if GetUnitAbilityLevel(CastedUnit,'A09P')>0 then
      call Func4654(CastedUnit,'A09P')
    endif
    if GetUnitAbilityLevel(CastedUnit,'AIcb')>0 then
      call Func4654(CastedUnit,'AIcb')
    endif
    if GetUnitAbilityLevel(CastedUnit,'A1V7')>0 then
      call Func4654(CastedUnit,'A1V7')
    elseif GetUnitAbilityLevel(CastedUnit,'A1V8')>0 then
      call Func4654(CastedUnit,'A1V8')
    endif
  endif
endfunction

function Func4656 takes integer i returns nothing
  local integer k=0
  loop
    exitwhen HaveSavedString(UTable,'DMGE'+i,k)==false
    call ExecuteFunc(LoadStr(UTable,'DMGE'+i,k))
    set k=k+1
  endloop
endfunction

function Func4657 takes unit WXE,unit SGE,real dmg returns nothing
  set CastedUnit=WXE
  set TriggeredUnit=SGE
  set real014=dmg
  set integer045=GetHandleId(GetTriggeringTrigger())
  call Func4656(0)
  if not(LoadBoolean(HY,integer045,10))then
    return
  endif
  call Func4656(1)
  if LoadBoolean(HY,integer045,11)==false and LoadBoolean(HY,integer045,14)then
    call Func4656(2)
    if LoadBoolean(HY,integer045,15)then
      call Func4656(3)
      if IsMagicImmune(SGE)==false then
        call Func4656(4)
      endif
    endif
  endif
endfunction

function Func4658 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED and LoadInteger(HY,h,0)>0 then
    if GetEventDamageSource()==LoadUnitHandle(HY,h,0)and IsFakeDamage==0 and(GetEventDamage()>0 or LoadBoolean(HY,h,10)==false)then
      call DisableTrigger(t)
      call Func4657(LoadUnitHandle(HY,h,0),LoadUnitHandle(HY,h,1),GetEventDamage())
      call EnableTrigger(t)
      if LoadInteger(HY,h,0)==1 then
        call SaveInteger(HY,h,0,0)
      else
        call SaveInteger(HY,h,0,LoadInteger(HY,h,0)-1)
      endif
    endif
  elseif TimerGetElapsed(GlobalTimer)>LoadReal(HY,h,0)then
    call RemoveSavedHandle(MHT,LoadInteger(HY,h,10),LoadInteger(HY,h,11))
    call PauseTimer(LoadTimerHandle(HY,h,3))
    call DestroyTimer(LoadTimerHandle(HY,h,3))
    call FlushChildHashtable(HY,h)
    call CleanTrigger(t)
  endif
  set t=null
endfunction

function Func4659 takes nothing returns nothing
  local integer YXE=0
  local integer WVE
  local integer LVN=0
  local unit u
  if(booleans004[17]and GetUnitAbilityLevel(CastedUnit,'A1FQ')==1 and(IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)==false or(GetOwningPlayer(TriggeredUnit)!=Scourges[0]and GetOwningPlayer(TriggeredUnit)!=Sentinels[0])))or GetUnitAbilityLevel(TriggeredUnit,'A3Q3')==1 or GetUnitAbilityLevel(TriggeredUnit,'a3TP')==1 then
    call RemoveSavedBoolean(HY,GetHandleId(CastedUnit),'miss')
    return
  endif
  if(booleans004[19]and GetUnitAbilityLevel(CastedUnit,'B39C')==1)or(booleans004[20]and GetUnitAbilityLevel(CastedUnit,'B00K')==1)then
    call RemoveSavedBoolean(HY,GetHandleId(CastedUnit),'miss')
    return
  endif
  if IsUnitType(CastedUnit,UNIT_TYPE_MELEE_ATTACKER)==false and IsUnitType(CastedUnit,UNIT_TYPE_FLYING)==false then
    if GetTerrainCliffLevel(GetUnitX(CastedUnit),GetUnitY(CastedUnit))<GetTerrainCliffLevel(GetUnitX(TriggeredUnit),GetUnitY(TriggeredUnit))then
      set LVN=25
    endif
  endif
  if(booleans004[7]and GetUnitAbilityLevel(TriggeredUnit,'A12M')>0)or(booleans004[0]and GetUnitAbilityLevel(TriggeredUnit,'ACes')>0 and GetUnitAbilityLevel(CastedUnit,'A3SV')==0)or(booleans004[1]and GetUnitAbilityLevel(TriggeredUnit,'A33B')>0 and GetUnitAbilityLevel(TriggeredUnit,'A36D')==0)then
    set YXE=100
  else
    set YXE=Func0933(TriggeredUnit)
  endif
  set LVN=Func0934(LVN,Func0935(CastedUnit))
  if(YXE>0 or LVN>0)and(GetRandomInt(1,100)<YXE or GetRandomInt(1,100)<LVN)then
    set WVE=GetPlayerId(GetOwningPlayer(CastedUnit))
    set boolean012=true
  else
    set boolean012=false
  endif
  call SaveBoolean(HY,GetHandleId(CastedUnit),'miss',boolean012)
endfunction

function Func4660 takes nothing returns nothing
  call UnitRemoveAbility(LoadUnitHandle(HY,GetHandleId(GetExpiredTimer()),0),'a3PQ')
  call FlushChildHashtable(HY,GetHandleId(GetExpiredTimer()))
  call DestroyTimer(GetExpiredTimer())
endfunction

function Func4661 takes nothing returns nothing
  local unit u=CastedUnit
  local unit SGE=TriggeredUnit
  local real dmg=real014
  local real FRX=0.
  if GetUnitAbilityLevel(u,'A0AH')>0 then
    set FRX=.4
  elseif GetUnitAbilityLevel(u,'A1W4')>0 then
    set FRX=0.75
  endif
  if FRX>0 then
    call Func0648(u,SGE,3,dmg*FRX,0.)
  endif
  set u=null
  set SGE=null
endfunction

function Func4662 takes nothing returns nothing
  if IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)and IsPowerCog(TriggeredUnit)==false and IsUnitEnemy(TriggeredUnit,GetOwningPlayer(CastedUnit))and IsUnitIllusion(CastedUnit)==false then
    call Func4661()
  endif
endfunction

function Func4663 takes unit u returns real
  return Func0160(u)/ RMinIF(Func0162(u),6.)
endfunction

function Func4664 takes unit WXE,unit SGE returns nothing
  local unit u
  local integer h
  if LoadBoolean(HY,GetHandleId(WXE),'miss')then
    call Func0377(WXE,'A3PQ',1)
  else
    set CastedUnit=WXE
    set TriggeredUnit=SGE
    set real014=0
    set integer045=0
    call Func4656('preA')
  endif
  set CastedUnit=WXE
  set TriggeredUnit=SGE
  set real014=0
  set integer045=0
  call Func4656('preH')
endfunction

function Func4665 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit WXE=LoadUnitHandle(HY,h,1)
  local integer a=GetUnitAbility(WXE,'Aatk')
  if a>0 and ReadRealMemory(a+0x1F8)>0 then
    call Func4664(WXE,LoadUnitHandle(HY,h,2))
  endif
  call RemoveSavedHandle(HY,GetHandleId(WXE),'aatk')
  call FlushChildHashtable(HY,h)
  call PauseTimer(t)
  call DestroyTimer(t)
  set WXE=null
  set t=null
endfunction

function Func4666 takes unit u,unit SGE returns nothing
  local timer tt
  local integer h
  local real LAN=Func4663(u)
  if HaveSavedHandle(HY,GetHandleId(u),'aatk')then
    set tt=LoadTimerHandle(HY,GetHandleId(u),'aatk')
    set h=GetHandleId(tt)
    call PauseTimer(tt)
    call DestroyTimer(tt)
    call FlushChildHashtable(HY,h)
  endif
  set tt=CreateTimer()
  set h=GetHandleId(tt)
  call TimerStart(tt,LAN,false,function Func4665)
  call SaveTimerHandle(HY,GetHandleId(u),'aatk',tt)
  call SaveUnitHandle(HY,h,1,u)
  call SaveUnitHandle(HY,h,2,SGE)
  set tt=null
endfunction

function Func4667 takes unit WXE,unit SGE,boolean BYA,boolean LBN returns nothing
  local trigger t
  local integer h
  local timer tt
  local boolean RXX=IsUnitType(WXE,UNIT_TYPE_HERO)
  set CastedUnit=WXE
  set TriggeredUnit=SGE
  set boolean044=BYA
  call Func4656(-1)
  if LBN==false then
    if BYA then
      call Func4664(WXE,SGE)
    else
      call Func4666(WXE,SGE)
    endif
  endif
  if not(IsPlayerBelongToTeams(GetOwningPlayer(WXE))or IsPlayerBelongToTeams(GetOwningPlayer(SGE))or(boolean042 and(GetUnitAbilityLevel(WXE,'BVA1')==1 or GetUnitAbilityLevel(WXE,'BVA2')==1 or GetUnitAbilityLevel(WXE,'BVA3')==1 or GetUnitAbilityLevel(WXE,'BVA4')==1))or(boolean043 and GetUnitAbilityLevel(WXE,'B07O')==1))then
    return
  endif
  if HaveSavedHandle(MHT,GetHandleId(WXE),GetHandleId(SGE))then
    set t=LoadTriggerHandle(MHT,GetHandleId(WXE),GetHandleId(SGE))
    set h=GetHandleId(t)
    if boolean012==false then
      call SaveInteger(HY,h,0,LoadInteger(HY,h,0)+1)
    endif
    set tt=LoadTimerHandle(HY,h,3)
  else
    set t=CreateTrigger()
    set h=GetHandleId(t)
    set tt=CreateTimer()
    call SaveTimerHandle(HY,h,3,tt)
    call SaveTriggerHandle(MHT,GetHandleId(WXE),GetHandleId(SGE),t)
    if boolean012==false then
      call SaveInteger(HY,h,0,1)
    else
      call SaveInteger(HY,h,0,0)
    endif
    call TriggerRegisterUnitEvent(t,SGE,EVENT_UNIT_DAMAGED)
    call TriggerRegisterTimerExpireEvent(t,tt)
    call TriggerAddCondition(t,Condition(function Func4658))
    call SaveUnitHandle(HY,h,0,WXE)
    call SaveUnitHandle(HY,h,1,SGE)
    call SaveInteger(HY,h,10,GetHandleId(WXE))
    call SaveInteger(HY,h,11,GetHandleId(SGE))
    call SaveBoolean(HY,h,10,RXX or IsUnitSpiritBear(WXE)or GetUnitTypeId(WXE)=='o00S')
    call SaveBoolean(HY,h,11,IsUnitType(SGE,UNIT_TYPE_STRUCTURE))
    call SaveBoolean(HY,h,14,GetUnitAbilityLevel(SGE,'A04R')==0)
    call SaveBoolean(HY,h,15,IsUnitEnemy(WXE,GetOwningPlayer(SGE)))
  endif
  set integer045=h
  if LoadBoolean(HY,h,11)==false and LoadBoolean(HY,h,14)then
    if GetUnitAbilityLevel(WXE,'B39C')>0 then
      call SaveBoolean(HY,h,20,true)
      call AddTimedKeyToAgent(WXE,'B39C',1)
    endif
  endif
  if RXX then
    call Func4656(-2)
  endif
  if GetUnitAbilityLevel(WXE,'A3UC')>0 then
    call TimerStart(tt,20,false,null)
  elseif RXX then
    call TimerStart(tt,10,false,null)
  else
    call TimerStart(tt,5,false,null)
  endif
  call SaveBoolean(HY,h,0,BYA)
  set t=null
  set tt=null
endfunction

function Func4668 takes unit HDE,boolean SLE returns real
  if GetUnitAbilityLevel(HDE,'B068')==1 then
    if SLE then
      call UnitRemoveAbility(HDE,'B068')
    endif
    return GetUnitAbilityLevel(HDE,'A07A')*30.
  endif
  if GetUnitAbilityLevel(HDE,'B00K')==1 then
    if SLE then
      call UnitRemoveAbility(HDE,'B00K')
    endif
    return(GetUnitAbilityLevel(HDE,'A09U')+GetUnitAbilityLevel(HDE,'A3D1'))*150.+100.
  endif
  if GetUnitAbilityLevel(HDE,'BOwk')==1 then
    if SLE then
      call UnitRemoveAbility(HDE,'BOwk')
    endif
    return 100.
  endif
  if GetUnitAbilityLevel(HDE,'B076')==1 then
    if SLE then
      call UnitRemoveAbility(HDE,'B076')
    endif
    return 0.
  endif
  if GetUnitAbilityLevel(HDE,'B08X')==1 then
    if SLE then
      call UnitRemoveAbility(HDE,'B08X')
    endif
    return 0.
  endif
  if GetUnitAbilityLevel(HDE,'B07T')==1 then
    if SLE then
      call UnitRemoveAbility(HDE,'B07T')
    endif
    return 175.
  endif
  if GetUnitAbilityLevel(HDE,'B39C')==1 then
    if SLE then
      call UnitRemoveAbility(HDE,'B39C')
    endif
    return 225.
  endif
  return 0.
endfunction

function Func4669 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit u=LoadUnitHandle(HY,h,0)
  if GetHandleId(u)>0 then
    call Func0155(LoadUnitHandle(HY,h,0),-LoadInteger(HY,h,0))
  endif
  call DelayedCallBackClean()
  set u=null
endfunction

function Func4670 takes unit u,integer FCA returns nothing
  local integer h=DelayedCallBack(0.,function Func4669)
  call SaveUnitHandle(HY,h,0,u)
  call SaveInteger(HY,h,0,FCA)
  call Func0155(u,FCA)
endfunction

function Func4671 takes unit u,integer VDX,integer c,boolean LHN returns boolean
  return(LHN and LoadReal(hashtable011,GetHandleId(u),VDX)<0)or(LHN==false and PRD_Get(u,VDX,c))
endfunction

function Func4672 takes unit u,unit SGE,boolean LHN returns real
  local real r1=1.
  local integer id=GetUnitTypeId(u)
  if GetUnitAbilityLevel(u,'A36D')==1 or boolean005==false then
    return 1.
  endif
  if GetUnitAbilityLevel(u,'A0MX')>0 then
    if GetUnitAbilityLevel(u,'A33E')==1 or Func4671(u,'A0MX',GetUnitAbilityLevel(u,'A0MX')*5+15,LHN)then
      set r1=2.
    endif
  endif
  if IsUnitIdType(id,UNIT_TYPE_HERO)==false then
    return r1
  endif
  if id=='Naka'then
    if GetUnitAbilityLevel(u,'A1J2')>0 then
      set r1=1.25+0.25*GetUnitAbilityLevel(u,'A1J2')
    endif
  elseif id=='Nbbc'then
    if GetUnitAbilityLevel(u,'A00K')>0 and Func4671(u,'A00K',GetUnitAbilityLevel(u,'A00K')*5+15,LHN)then
      set r1=2
    endif
  elseif id=='Ewar'then
    if GetUnitAbilityLevel(u,'A03Q')>0 and Func4671(u,'A03Q',15,LHN)then
      set r1=1.2+1.1*GetUnitAbilityLevel(u,'A03Q')
    endif
  elseif id=='U00A'then
    if GetUnitAbilityLevel(u,'A03N')>0 and Func4671(u,'A03N',10,LHN)then
      set r1=0.75+0.5*GetUnitAbilityLevel(u,'A03N')
      if LHN==false then
        call Func3342()
      endif
    endif
  elseif id=='NC00'then
    if GetUnitAbilityLevel(u,'AOcr')>0 and Func4671(u,'AOcr',15,LHN)then
      set r1=1.+0.5*GetUnitAbilityLevel(u,'AOcr')
      if not IsUnitIdType(GetUnitTypeId(SGE),UNIT_TYPE_HERO)then
        set r1=r1*2
      endif
    endif
  endif
  if GetUnitAbilityLevel(u,'A3IO')>0 and Func4671(u,'A3IO',25+GetUnitAbilityLevel(u,'A3IO')*5,LHN)then
    set r1=1.7
  endif
  if GetUnitAbilityLevel(u,'A3Q4')>0 or GetUnitAbilityLevel(u,'A3Q5')>0 then
    if Func4283(u)then
      set r1=3.5
    endif
  endif
  return r1
endfunction

function Func4673 takes unit u,integer id,integer c returns boolean
  local integer k
  local integer YXE
  local boolean b=false
  local boolean bb=false
  if id=='A207' then
    set k=Func0891(u,Item_Real[integer243])+Func0891(u,Item_Real[integer019])
    set YXE=20
  else
    set k=Func0891(u,Item_Real[integer267])
    set YXE=25
  endif
  loop
    set bb=PRD_Get(u,id+k,YXE)
    set b=b or bb
    set k=k-1
    exitwhen k<=0
  endloop
  return b
endfunction

function Func4674 takes unit u,unit SGE,boolean LHN returns real
  local real r2=1.
  if GetUnitAbilityLevel(SGE,'a3TP')==1 then
    set r2=1.45
  endif
  if GetUnitAbilityLevel(u,'A3IO')>0 then
    if Func4671(u,'A3IO',40,LHN)then
      set r2=1.2+0.2*GetUnitAbilityLevel(u,'A3IO')
    endif
  endif
  if GetHandleId(u)>0 then
    if GetUnitInventoryAbilityForAddress(ConvertHandle(u))==0 then
      return r2
    endif
  endif
  if GetUnitAbilityLevel(u,'A207')>0 and(LoadReal(hashtable011,GetHandleId(u),'A207')<0 or(LHN==false and Func4673(u,'A207',20)))then
    set r2=Func0468(1.75,r2)
  endif
  if GetUnitAbilityLevel(u,'A09O')>0 and(LoadReal(hashtable011,GetHandleId(u),'A09O')<0 or(LHN==false and Func4673(u,'A09O',25)))then
    set r2=2.4
  endif
  return r2
endfunction

function Func4675 takes unit u returns integer
  local integer a
  if u==null then
    return 0
  endif
  set a=GetUnitAbility(u,'Aatk')
  if a==0 then
    return 0
  endif
  return Memory[(a+0x1E4)/4]
endfunction

function Func4676 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local unit u=LoadUnitHandle(HY,h,0)
  local integer a=LoadInteger(HY,h,0)
  if LoadBoolean(HY,h,0)or a==Func4675(u)then
    if HaveSavedReal(HY,h,1)then
      call TimerStart(GetExpiredTimer(),LoadReal(HY,h,1),false,function Func4676)
      call RemoveSavedReal(HY,h,1)
      call SaveBoolean(HY,h,0,true)
    else
      call Func2326(u,LoadReal(HY,h,0))
      call DelayedCallBackClean()
    endif
  else
    call DelayedCallBackClean()
  endif
  set u=null
endfunction

function Func4677 takes boolean J3O,unit u,real dmg returns nothing
  local integer h=DelayedCallBack(0.,function Func4676)
  if J3O then
    call RemoveSavedReal(HY,h,1)
  else
    call SaveReal(HY,h,1,DistanceBetweenUnits(u,TriggeredUnit)/(Func0339(GetUnitTypeId(u),0)+1.))
  endif
  call SaveUnitHandle(HY,h,0,u)
  call SaveReal(HY,h,0,dmg)
  call SaveInteger(HY,h,0,Func4675(u))
endfunction

function Func4678 takes nothing returns nothing
  local real r1
  local real c
  if IsUnitType(TriggeredUnit,UNIT_TYPE_STRUCTURE)or IsUnitWard(TriggeredUnit)then
    return
  endif
  set r1=Func0468(Func4672(CastedUnit,TriggeredUnit,false),Func4674(CastedUnit,TriggeredUnit,false))
  if r1>1. then
    set c=GetUnitAttackDamage(CastedUnit)
    call Func4677(IsUnitType(CastedUnit,UNIT_TYPE_MELEE_ATTACKER),CastedUnit,R2I(c*(r1)))
    call Func4670(CastedUnit,R2I(c*(r1-1.)))
  endif
endfunction

function Func4679 takes unit u,unit SGE returns real
  local integer id=GetUnitTypeId(u)
  local real r1=Func4672(u,SGE,false)
  local real r2=Func4674(u,SGE,false)
  set r1=Func0468(r1,r2)
  return r1
endfunction

function Func4680 takes unit HDE,unit SGE,real LWN,real LYN,unit KZN returns nothing
  local real LZN=Func0468(1.,Func4679(HDE,SGE))
  local real L_N=Func4668(HDE,true)
  local real L0N=(LWN+GetUnitAttackDamage(HDE)*LYN)*LZN
  if LZN>1. then
    call Func2326(HDE,L0N)
  endif
  set L0N=L0N+L_N
  call Func2340(HDE,SGE,L0N)
  call Func4595(HDE,SGE,L0N,false,KZN)
  call Func4667(HDE,SGE,false,true)
  call UnitDamageTarget(HDE,SGE,L0N,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_METAL_HEAVY_SLICE)
endfunction

function Func4681 takes nothing returns nothing
  call Func4680(tt_unit1,tt_unit3,tt_real1,tt_real2,unit032)
endfunction

function Func4682 takes nothing returns nothing
  local player p=GetTriggerPlayer()
  local integer i=0
  local integer a=0
  local integer b=0
  local integer c=0
  local integer d=0
  local integer e=0
  local integer f=0
  local real L1N=0
  local real L2N=0
  local real L3N=0
  local real L4N=0.005
  local real L5N=0.005
  local real L6N=0.005
  local boolean UZX=IsSentinel(p)
  if not LoadBoolean(HY,GetHandleId(p),'hpbr')then
    if UZX then
      set a=0xFF32F55C
      set b=0xFF59BD40
      set c=0xFF59BD40
      set d=0xFFB32C00
      set e=0xFFAD4633
      set f=0xFFAD4633
    else
      set a=0xFFB32C00
      set b=0xFFAD4633
      set c=0xFFAD4633
      set d=0xFF32F55C
      set e=0xFF59BD40
      set f=0xFF59BD40
    endif
    set L1N=0.07
    set L2N=0.05
    set L3N=0.15
    set L4N=0.008
    set L5N=0.007
    set L6N=0.01
  endif
  call SaveBoolean(HY,GetHandleId(p),'hpbr',not LoadBoolean(HY,GetHandleId(p),'hpbr'))
  if p==LocalPlayer then
    call SetHPBarColorForPlayer(GetPlayerId(Sentinels[0]),a,b,c)
    call SetHPBarColorForPlayer(GetPlayerId(Sentinels[1]),a,b,c)
    call SetHPBarColorForPlayer(GetPlayerId(Sentinels[2]),a,b,c)
    call SetHPBarColorForPlayer(GetPlayerId(Sentinels[3]),a,b,c)
    call SetHPBarColorForPlayer(GetPlayerId(Sentinels[4]),a,b,c)
    call SetHPBarColorForPlayer(GetPlayerId(Sentinels[5]),a,b,c)
    call SetHPBarColorForPlayer(GetPlayerId(Scourges[0]),d,e,f)
    call SetHPBarColorForPlayer(GetPlayerId(Scourges[1]),d,e,f)
    call SetHPBarColorForPlayer(GetPlayerId(Scourges[2]),d,e,f)
    call SetHPBarColorForPlayer(GetPlayerId(Scourges[3]),d,e,f)
    call SetHPBarColorForPlayer(GetPlayerId(Scourges[4]),d,e,f)
    call SetHPBarColorForPlayer(GetPlayerId(Scourges[5]),d,e,f)
    if a!=0 then
      call SetHPBarColorForPlayer(GetPlayerId(Neutrals),0xFFB32C00,0xFFAD4633,0xFFAD4633)
    else
      call SetHPBarColorForPlayer(GetPlayerId(Neutrals),0,0,0)
    endif
    set i=0
  endif
endfunction

function Func4683 takes nothing returns nothing
  local trackable t=LoadTrackableHandle(HY,GetHandleId(GetExpiredTimer()),0)
  local real x=GetCameraTargetPositionX()
  local real y=GetCameraTargetPositionY()
  local real z=GetCameraTargetPositionZ()
  call SetTrackablePos(t,x,y,z-100)
endfunction

function Func4684 takes nothing returns nothing
  local timer t=CreateTimer()
  local integer h=GetHandleId(t)
  local trackable tt=CreateTrackable("units\\undead\\Acolyte\\Acolyte.mdl",0,0,90)
  call SaveTrackableHandle(HY,h,0,tt)
  call TimerStart(t,0.05,true,function Func4683)
endfunction

function Func4685 takes item it,integer id returns nothing
  set integers008[PlayerId]=3
  call DisplayTimedTextToForceEx(AllPlayers,5,str_replace(GetObjectName(id),"%s",GetItemName(it)))
endfunction

function Func4686 takes nothing returns nothing
  local item it=GetEnumItem()
  local integer k=GetIndex(it)
  if real004+2.<TimerGetElapsed(GlobalTimer)then
    set integers008[PlayerId]=0
  endif
  if integers008[PlayerId]==0 or real004==0 then
    if IsVisibleToPlayer(GetItemX(it),GetItemY(it),LocalPlayer)then
      if(k==integer135 or k==integer136 or k==integer265 or k==integer266)then
        call Func4685(it,'TX2W')
      elseif(IsFakeRune(GetItemTypeId(it)))then
        call Func4685(it,'TX2X')
      endif
    endif
  endif
  set it=null
endfunction

function Func4687 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'Amov')>0 and GetUnitAbilityLevel(GetFilterUnit(),'Aloc')==0 and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0
endfunction

function Func4688 takes nothing returns nothing
  local integer i=0
  local real a=0
  local boolean MVN=boolean006
  local rect r
  local group g
  local unit u2
  local integer b=1
  if aResourceBarGoldText>0 then
    if Func1051(LocalPlayer)then
      set Memory[(aResourceBarGoldText+0x68)/4]=0xFFFF00FF
    else
      set Memory[(aResourceBarGoldText+0x68)/4]=0xFF0000FF
    endif
  endif
  if MainMB!=null then
    if IsKeyPressed(0x76)then
      if boolean002==false then
        if IsMultiboardMinimized(MainMB)then
          call MultiboardMinimize(MainMB,false)
        endif
        set boolean002=true
      endif
    else
      if boolean002 then
        if IsMultiboardMinimized(MainMB)==false then
          call MultiboardMinimize(MainMB,true)
        endif
        set boolean002=false
      endif
    endif
  endif
  if IsKeyPressed(0x12)then
    set a=0.3
    set b=0
    set boolean006=true
  else
    set boolean006=false
  endif
  if MVN!=boolean006 then
    loop
      call SetLightningColor(lightnings001[i*4+0],0.211,0.87,0,a)
      call SetLightningColor(lightnings001[i*4+1],0.211,0.87,0,a)
      call SetLightningColor(lightnings001[i*4+2],0.211,0.87,0,a)
      call SetLightningColor(lightnings001[i*4+3],0.211,0.87,0,a)
      set i=i+1
      exitwhen i>integer021
    endloop
    set i=0
    loop
      if ConvertHandle(fx1[i])>0 and IsDead(LoadUnitHandle(HY,GetHandleId(fx1[i]),0))==false then
        call WriteRealMemory(ConvertHandle(fx1[i])+0x20,b)
      endif
      set i=i+1
      exitwhen i>integer007
    endloop
  endif
endfunction

function Func4689 takes nothing returns nothing
  local group g=GetAvailableGroup()
  local unit u
  local integer i=0
  local image im
  local integer k=11
  local unit kgjngkdg=unit101
  local timerdialog t
  local real c
  local boolean b
  local real x=-583
  local real y=1197
  local integer testselectedunit
  local integer oldprotection
  local string s
  local integer h=0
  local unit kk
  local real r
  local item it
  set boolean009=true
  call Func2309(Player(1))
  call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call GroupRemoveUnit(g,u)
    set h=ConvertHandle(u)
    call echo("Unit: "+Int2Hex(h)+"; handle="+Int2Hex(GetHandleId(u)))
    call echo("Widget's base: "+Int2Hex(Func0164(h,0xA0)))
    call echo("FX: "+Int2Hex(ConvertHandle(AddSpecialEffect("units\\undead\\Acolyte\\Acolyte.mdl",GetUnitX(u),GetUnitY(u)))))
  endloop
  call KillGroup(g)
endfunction

function Func4690 takes nothing returns nothing
  local unit d=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
  call UnitAddAbility(d,'A39U')
  call SetUnitAbilityLevel(d,'A39U',GetUnitAbilityLevel(GetTriggerUnit(),'A06M'))
  call IssueImmediateOrderByIdExFunc(d,852096)
  set d=null
endfunction

function Func4691 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  call Func0375(u,'A39V',GetUnitAbilityLevel(u,'A00S'),GetUnitX(u),GetUnitY(u),true)
  set u=null
endfunction

function Func4692 takes nothing returns nothing
  local unit d=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
  call UnitAddAbility(d,'A3A0')
  call SetUnitAbilityLevel(d,'A3A0',GetUnitAbilityLevel(GetTriggerUnit(),'A03Y'))
  call IssueImmediateOrderByIdExFunc(d,852096)
  set d=null
endfunction

function Func4693 takes nothing returns nothing
  call Func2339("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl",1000.,150.,150.,75.*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),1050.)
endfunction

function Func4694 takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  local group g=GetAvailableGroup()
  local unit u=LoadUnitHandle(HY,h,0)
  local unit u2
  set tt_unit1=u
  call GroupEnumUnitsInRange(g,LoadReal(HY,h,0),LoadReal(HY,h,1),450,Condition(function DefaultEnemyFilterWithAncientNonImmune))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if GetUnitAbilityLevel(u2,'BNsi')>0 then
      call Func1032(u,u2)
    endif
  endloop
  set u=null
  call KillGroup(g)
  call DelayedCallBackClean()
endfunction

function Func4695 takes nothing returns nothing
  local integer h=DelayedCallBack(0,function Func4694)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveReal(HY,h,0,GetSpellTargetX())
  call SaveReal(HY,h,1,GetSpellTargetY())
endfunction

function Func4696 takes nothing returns nothing
  call Func2339("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmMissile.mdl",700.,110.,300.,75.*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),1100.)
endfunction

function Func4697 takes nothing returns nothing
  call Func2339("units\\human\\phoenix\\phoenix.mdl",800.,275.,200.,40.+70.*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),1200.)
endfunction

function Func4698 takes nothing returns nothing
  set unit002=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
  call UnitAddAbility(unit002,'A3A2')
  call SetUnitAbilityLevel(unit002,'A3A2',GetUnitAbilityLevel(GetTriggerUnit(),'A080'))
  call IssueTargetOrder(unit002,"shadowstrike",GetSpellTargetUnit())
endfunction

function Func4699 takes nothing returns nothing
  set unit002=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
  call UnitAddAbility(unit002,'A3A3')
  call SetUnitAbilityLevel(unit002,'A3A3',GetUnitAbilityLevel(GetTriggerUnit(),'A1UZ'))
  call IssueTargetOrder(unit002,"shadowstrike",GetSpellTargetUnit())
endfunction

function Func4700 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  call StunTargetEx(SGE,0.8,true)
  call DamageTarget(SKE,SGE,1,75*GetUnitAbilityLevel(SKE,'A042'))
  set SGE=null
  set SKE=null
endfunction

function Func4701 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local unit u2
  local integer QIE=GetUnitAbilityLevel(SKE,'A07F')
  local real dmg=50+25*QIE
  if not IsUnitType(SKE,UNIT_TYPE_HERO)then
    set SKE=udg_Hero[GetPlayerId(GetOwningPlayer(SKE))]
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetUnitX(SGE),GetUnitY(SGE),224,Condition(function Func0816))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    call DamageTarget(SKE,SGE,1,dmg)
  endloop
  call DamageTarget(SKE,SGE,1,50*QIE)
  call KillGroup(g)
  set SGE=null
  set SKE=null
endfunction

function Func4702 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A06V')
  local unit d
  if not IsUnitType(u,UNIT_TYPE_HERO)then
    set d=u
  else
    set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  endif
  call Func0376(d,'A3A7',QIE,GetSpellTargetUnit(),false)
  set u=null
  set d=null
endfunction

function Func4703 takes unit u,unit t returns nothing
  local integer QIE=GetUnitAbilityLevel(u,'A3A5')
  if QIE>0 then
    call DamageTarget(udg_Hero[GetPlayerId(GetOwningPlayer(u))],t,1,80+60*QIE)
  endif
endfunction

function Func4704 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer QIE=GetUnitAbilityLevel(u,'A010')
  local unit d
  if not IsUnitType(u,UNIT_TYPE_HERO)then
    set d=u
  else
    set d=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
  endif
  call Func0376(d,'A3A5',QIE,GetSpellTargetUnit(),false)
  set u=null
  set d=null
endfunction

function Func4705 takes nothing returns nothing
  local unit SKE=GetTriggerUnit()
  local group g=GetAvailableGroup()
  local unit u2
  local integer QIE=GetUnitAbilityLevel(SKE,'A0MT')
  local real dmg=25+75*QIE
  if not IsUnitType(SKE,UNIT_TYPE_HERO)then
    set SKE=udg_Hero[GetPlayerId(GetOwningPlayer(SKE))]
  endif
  set tt_unit1=SKE
  call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),425,Condition(function Func0815))
  loop
    set u2=FirstOfGroup(g)
    exitwhen u2==null
    call GroupRemoveUnit(g,u2)
    if IsUnitType(u2,UNIT_TYPE_STRUCTURE)then
      call Func0648(SKE,u2,1,dmg/2,0.9)
    else
      call Func0648(SKE,u2,1,dmg,0.9)
    endif
  endloop
  call KillGroup(g)
  set SKE=null
endfunction

function Func4706 takes nothing returns nothing
  local unit SGE=GetSpellTargetUnit()
  local unit SKE=GetTriggerUnit()
  call StunTargetEx(SGE,1.5,true)
  call DamageTarget(SKE,SGE,1,55*GetUnitAbilityLevel(SKE,GetSpellAbilityId()))
  set SGE=null
  set SKE=null
endfunction

function Func4707 takes nothing returns nothing
  call SaveInteger(UTable,'A3E9',Item_Real[integer283],'AChx')
  call SaveStr(UTable,'A3E9',Item_Real[integer283],"hex")
  call SaveInteger(UTable,'A3E9',Item_Real[integer298],'A0FD')
  call SaveStr(UTable,'A3E9',Item_Real[integer298],"soulburn")
  call SaveInteger(UTable,'A3E9',Item_Real[integer237],'A1T7')
  call SaveStr(UTable,'A3E9',Item_Real[integer237],"channel")
  call SaveInteger(UTable,'A3E9',Item_Real[integer301],'A19M')
  call SaveStr(UTable,'A3E9',Item_Real[integer301],"852609")
  call SaveBoolean(UTable,'A3E9',Item_Real[integer301],true)
  call SaveInteger(UTable,'A3E9',Item_Real[integer255],'A02O')
  call SaveStr(UTable,'A3E9',Item_Real[integer255],"fingerofdeath")
  call SaveInteger(UTable,'A3E9',Item_Real[integer256],'A08Y')
  call SaveStr(UTable,'A3E9',Item_Real[integer256],"fingerofdeath")
  call SaveInteger(UTable,'A3E9',Item_Real[integer257],'A08Z')
  call SaveStr(UTable,'A3E9',Item_Real[integer257],"fingerofdeath")
  call SaveInteger(UTable,'A3E9',Item_Real[integer258],'A090')
  call SaveStr(UTable,'A3E9',Item_Real[integer258],"fingerofdeath")
  call SaveInteger(UTable,'A3E9',Item_Real[integer259],'A092')
  call SaveStr(UTable,'A3E9',Item_Real[integer259],"fingerofdeath")
  call SaveInteger(UTable,'A3E9',Item_Real[integer185],'A2EA')
  call SaveStr(UTable,'A3E9',Item_Real[integer185],"852609")
  call SaveBoolean(UTable,'A3E9',Item_Real[integer185],true)
  call SaveInteger(UTable,'A3E9',Item_Real[integer313],'A2K7')
  call SaveStr(UTable,'A3E9',Item_Real[integer313],"thunderbolt")
  call SaveInteger(UTable,'A3E9',Item_Real[integer179],'A1QD')
  call SaveStr(UTable,'A3E9',Item_Real[integer179],"creepheal")
  call SaveInteger(UTable,'A3E9',Item_Real[integer230],'AIpg')
  call SaveStr(UTable,'A3E9',Item_Real[integer230],"purge")
  call SaveInteger(UTable,'A3E9',Item_Real[integer231],'AIpg')
  call SaveStr(UTable,'A3E9',Item_Real[integer231],"purge")
  call SaveInteger(UTable,'A3E9',Item_Real[HeavensHalberd],'A2K4')
  call SaveStr(UTable,'A3E9',Item_Real[HeavensHalberd],"852609")
  call SaveBoolean(UTable,'A3E9',Item_Real[HeavensHalberd],true)
  call SaveInteger(UTable,'A3E9',Item_Real[integer310],'A1ZI')
  call SaveStr(UTable,'A3E9',Item_Real[integer310],"852609")
  call SaveBoolean(UTable,'A3E9',Item_Real[integer310],true)
  call SaveInteger(UTable,'A3E9',Item_Real[integer189],'A39K')
  call SaveStr(UTable,'A3E9',Item_Real[integer189],"852609")
  call SaveBoolean(UTable,'A3E9',Item_Real[integer189],true)
endfunction

function Func4708 takes integer id returns boolean
  return id=='A04C' or id=='A0A2' or id=='A0MU' or id=='A0I7' or id=='A0VZ' or id=='A07F' or id=='A0MN' or id=='A0G6' or id=='A08C' or id=='A1H5' or id=='A0OJ' or id=='A27G' or id=='A1S8' or id=='A010' or id=='A0RX' or id=='A2HN' or id=='A14R' or id=='A049' or id=='A2WB' or id=='A26N' or id=='A0R5' or id=='A020' or id=='A0EC' or id=='A04Y' or id=='AChx' or id=='A1T7' or id=='A02O' or id=='A08Y' or id=='A08Z' or id=='A090' or id=='A092'
endfunction

function Func4709 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  call Func1430(LoadUnitHandle(HY,h,0),LoadUnitHandle(HY,h,1),LoadInteger(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set t=null
endfunction

function Func4710 takes unit d,unit SGE,integer RTX returns nothing
  local integer h=DelayedCallBack(0,function Func4709)
  call SaveUnitHandle(HY,h,0,d)
  call SaveUnitHandle(HY,h,1,SGE)
  call SaveInteger(HY,h,0,RTX)
endfunction

function Func4711 takes unit SKE,unit SGE,integer id,integer QIE returns nothing
  local unit u=CreateUnit(GetOwningPlayer(SGE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local integer RTX=GetUnitCurrentOrder(SKE)
  local integer i
  local real a
  call SaveUnitHandle(HY,GetHandleId(u),0,SGE)
  call DestroyEffect(AddSpecialEffectTarget(GetAbilityEffectById('A3E9',EFFECT_TYPE_EFFECT,0),SGE,GetAbilityEffectById('A3E9',EFFECT_TYPE_EFFECT,1)))
  if id=='A04P' then
    call UnitRemoveAbility(u,id)
    set id='A3E3'
    set RTX=852095
  endif
  call UnitAddAbility(u,id)
  call SetUnitAbilityLevel(u,id,QIE)
  if LoadBoolean(HY,GetHandleId(SKE),'REFL')then
    set SKE=LoadUnitHandle(HY,GetHandleId(SKE),'REFL')
  endif
  if RTX>=852008 and RTX<=852013 then
    call UnitRemoveAbility(u,id)
    set i=GetItemTypeId(UnitItemInSlot(SKE,RTX-852008))
    set id=LoadInteger(UTable,'A3E9',i)
    call UnitAddAbility(u,id)
    if LoadBoolean(UTable,'A3E9',i)then
      set RTX=S2I(LoadStr(UTable,'A3E9',i))
    else
      set RTX=OrderId(LoadStr(UTable,'A3E9',i))
    endif
  endif
  if Func4708(id)then
    call Func4710(u,SKE,RTX)
  else
    call Func1430(u,SKE,RTX)
  endif
  set u=null
endfunction

function Func4712 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  local unit d
  set d=LoadUnitHandle(HY,h,1)
  call SetUnitX(d,GetUnitX(u))
  call SetUnitY(d,GetUnitY(u))
  if GetWidgetLife(d)>1 and GetWidgetLife(u)>0.9 then
    call SetWidgetLife(u,GetWidgetLife(u)+GetWidgetLife(d)-1)
    call SetWidgetLife(d,1)
  endif
  if GetUnitState(d,UNIT_STATE_MANA)>1 and GetWidgetLife(u)>0.9 then
    call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+GetUnitState(d,UNIT_STATE_MANA)-1)
    call SetUnitState(d,UNIT_STATE_MANA,1)
  endif
  set d=null
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if GetUnitX(u)!=x or GetUnitY(u)!=y or(GetUnitCurrentOrder(u)!=851993 and GetUnitCurrentOrder(u)!=0 and GetTriggerEvalCount(t)>3)then
      call KillUnit(LoadUnitHandle(HY,h,1))
      call UnitRemoveAbility(u,'A3JG')
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call KillUnit(LoadUnitHandle(HY,h,1))
    call UnitRemoveAbility(u,'A3JG')
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  else
    if GetIssuedOrderId()>100000 or(GetIssuedOrderId()>=852002 and GetIssuedOrderId()<=852007)or GetIssuedOrderId()==852000 then
    else
      call KillUnit(LoadUnitHandle(HY,h,1))
      call UnitRemoveAbility(u,'A3JG')
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
  endif
  set u=null
  set t=null
endfunction

function Func4713 takes unit SKE,unit SGE,integer id,integer QIE returns nothing
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local trigger t
  local integer h
  call UnitAddAbility3(d,id,QIE)
  if Func1430(d,SGE,852487)==false or IsBlocked(SGE)then
    call KillUnit(d)
    set d=null
    return
  endif
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call IssueImmediateOrderByIdExFunc(SKE,851993)
  call UnitAddAbility2(SKE,'A3JG')
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveUnitHandle(HY,h,1,d)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterDeathEvent(t,SGE)
  call SaveReal(HY,h,0,GetUnitX(SKE))
  call SaveReal(HY,h,1,GetUnitY(SKE))
  call SetWidgetLife(d,1)
  call SetUnitState(d,UNIT_STATE_MANA,1)
  call TriggerAddCondition(t,Condition(function Func4712))
  set t=null
  set d=null
endfunction

function Func4714 takes nothing returns nothing
  local trigger t=GetTriggeringTrigger()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  local real x=LoadReal(HY,h,0)
  local real y=LoadReal(HY,h,1)
  local unit d
  if GetTriggerEvalCount(t)==1 then
    set d=LoadUnitHandle(HY,h,1)
    call SetUnitX(d,GetUnitX(u))
    call SetUnitY(d,GetUnitY(u))
    set d=null
  endif
  if GetTriggerEventId()==EVENT_GAME_TIMER_EXPIRED then
    if GetUnitX(u)!=x or GetUnitY(u)!=y or GetUnitCurrentOrder(LoadUnitHandle(HY,h,1))==0 or(GetUnitCurrentOrder(u)!=851993 and GetUnitCurrentOrder(u)!=0 and GetTriggerEvalCount(t)>3)then
      call KillUnit(LoadUnitHandle(HY,h,1))
      call UnitRemoveAbility(u,'A3JG')
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
  elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
    call KillUnit(LoadUnitHandle(HY,h,1))
    call UnitRemoveAbility(u,'A3JG')
    call FlushChildHashtable(HY,h)
    call DestroyTrigger(t)
  else
    if GetIssuedOrderId()>10000000 or(GetIssuedOrderId()>=852002 and GetIssuedOrderId()<=852007)or GetIssuedOrderId()==852000 then
    elseif GetIssuedOrderId()!=851993 or GetTriggerEvalCount(t)>5 then
      call KillUnit(LoadUnitHandle(HY,h,1))
      call UnitRemoveAbility(u,'A3JG')
      call FlushChildHashtable(HY,h)
      call DestroyTrigger(t)
    endif
  endif
  set u=null
  set t=null
endfunction

function Func4715 takes unit SKE,unit SGE,integer id,integer QIE,integer RTX returns nothing
  local unit d=CreateUnit(GetOwningPlayer(SKE),'e00E',GetUnitX(SGE),GetUnitY(SGE),0)
  local trigger t
  local integer h
  call UnitAddAbility3(d,id,QIE)
  if Func1430(d,SGE,RTX)==false or IsBlocked(SGE)then
    call KillUnit(d)
    set d=null
    return
  endif
  call SaveUnitHandle(HY,GetHandleId(d),0,SKE)
  set t=CreateTrigger()
  set h=GetHandleId(t)
  call IssueImmediateOrderByIdExFunc(SKE,851993)
  call UnitAddAbility2(SKE,'A3JG')
  call SaveUnitHandle(HY,h,0,SKE)
  call SaveUnitHandle(HY,h,1,d)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterUnitEvent(t,SKE,EVENT_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerRegisterDeathEvent(t,SKE)
  call TriggerRegisterDeathEvent(t,SGE)
  call SaveReal(HY,h,0,GetUnitX(SKE))
  call SaveReal(HY,h,1,GetUnitY(SKE))
  call TriggerAddCondition(t,Condition(function Func4714))
  set t=null
  set d=null
endfunction

function Func4716 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  if Func0449(LoadUnitHandle(HY,h,1))==false then
    call Func4715(LoadUnitHandle(HY,h,1),LoadUnitHandle(HY,h,0),LoadInteger(HY,h,0),LoadInteger(HY,h,1),LoadInteger(HY,h,2))
  endif
  call Func0656(LoadUnitHandle(HY,h,0))
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set t=null
endfunction

function Func4717 takes unit u,unit SGE,integer id,integer QIE returns nothing
  local integer h=DelayedCallBack(0,function Func4716)
  call SaveInteger(HY,h,0,id)
  call SaveInteger(HY,h,1,QIE)
  call SaveUnitHandle(HY,h,0,u)
  call SaveUnitHandle(HY,h,1,SGE)
  call SaveInteger(HY,h,2,GetUnitCurrentOrder(u))
endfunction

function Func4718 takes integer id returns boolean
  return id=='A074' or id=='A0O1' or id=='A074' or id=='A072' or id=='A2V9' or id=='A0LK' or id=='A27H' or id=='A08V' or id=='A1MO' or id=='A1ZI' or id=='A39K' or id=='A0FN' or id=='A0K9' or id=='A0PL' or id=='A06B' or id=='A06I' or id=='A0O7' or id=='A0O6' or id=='A0O5' or id=='A1B1' or id=='A0N8' or id=='A01F' or id=='A02S' or id=='A085' or id=='A078' or id=='A1OV'
endfunction

function Func4719 takes integer id returns boolean
  return id=='A02N' or id=='A0CC' or id=='A02Z'
endfunction

function Func4720 takes integer id returns boolean
  return id=='A2CI' or id=='A38C' or id=='A10R'
endfunction

function Func4721 takes integer id returns boolean
  return id=='A0FL' or id=='A1CX' or id=='A00P' or id=='A02Q' or id=='A1D9'
endfunction

function Func4722 takes integer id returns boolean
  return id=='A0NM' or id=='A1NA' or id=='A2X6' or id=='A05T' or id=='A08H' or id=='AHtb' or id=='A055' or id=='A0BH' or id=='A2WQ' or id=='A12J' or id=='A02A' or id=='A0IN' or id=='A1AW' or id=='A10D' or id=='A2ON' or id=='A0FW' or id=='A004' or id=='A190' or id=='A1NH' or id=='A0G4' or id=='A1D8' or id=='A0BZ' or id=='A1S7' or id=='A0YM' or id=='A2QT' or id=='A2BE'
endfunction

function Func4723 takes nothing returns nothing
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
    if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_ENDCAST then
      call Func0448(GetTriggerUnit(),true)
    else
      call Func0448(GetTriggerUnit(),false)
    endif
  endif
endfunction

function OctarineReduceRestore takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  call SetAbilityCD(LoadInteger(HY,h,0),LoadInteger(HY,h,1),LoadReal(HY,h,0))
  call DelayedCallBackClean()
endfunction

function WrapperOnSpellCDStart takes nothing returns nothing
  local integer h=GetHandleId(GetExpiredTimer())
  if GetHandleId(LoadAbilityHandle(HY,h,0))>0 then
    call OnSpellCDStarts(LoadAbilityHandle(HY,h,0),ConvertHandle(LoadAbilityHandle(HY,h,0))/4,LoadUnitHandle(HY,h,1),LoadReal(HY,h,0),LoadInteger(HY,h,0),0)
  endif
  call DelayedCallBackClean()
endfunction

function InitOnSpellCDStart takes integer lvl returns nothing
  local integer h=DelayedCallBack(0,function WrapperOnSpellCDStart)
  call SaveAbilityHandle(HY,h,0,GetSpellAbility())
  call SaveReal(HY,h,0,GetAbilityCD(GetSpellAbilityId(),lvl))
  call SaveInteger(HY,h,0,GetSpellAbilityId())
  call SaveUnitHandle(HY,h,1,GetTriggerUnit())
endfunction

function GenericOnCastEvent takes nothing returns nothing
  local integer id=GetSpellAbilityId()
  local unit caster=GetTriggerUnit()
  local integer lvl=GetUnitAbilityLevel(caster,id)
  local unit target=GetSpellTargetUnit()
  set GCD_caster=caster
  set GCD_id=id
  set SpellTargetUnit=target
  if HaveSavedString(SpellsDB,'mrph',id)then
    call ExecuteFunc(LoadStr(SpellsDB,'mrph',id))
  endif
  if IsUnitType(caster,UNIT_TYPE_HERO)and IsBackmorphSpellStart(caster,id)then
    set caster=null
    return
  endif
  call InitOnSpellCDStart(lvl)
  if GetUnitAbilityLevel(caster,'Aloc')==0 then
    if boolean147 then
      call Func1422()
    endif
    if DetailedSpellInfoDisplaying then
      call BJDebugMsg(GetUnitName(caster)+" has used "+GetObjectName(id)+" ["+Id2String(id)+"]")
    endif
  endif
  if IsPurge(id)then
    if IsTwoSidePurge(id)==false then
      call PurgingTriggered(SpellTargetUnit,IsUnitEnemy(caster,GetOwningPlayer(SpellTargetUnit)))
    else
      call PurgingTriggered(SpellTargetUnit,IsUnitEnemy(SpellTargetUnit,GetOwningPlayer(LoadUnitHandle(HY,GetHandleId(caster),'prge'))))
      call RemoveSavedHandle(HY,GetHandleId(caster),'prge')
    endif
  elseif id=='A1WE' or id=='A0B8' or id=='A063' or id=='A03O' or id=='A1AY' or id=='A0MQ' or id=='A1B6' then
    call PurgingTriggered(caster,false)
  endif
  if HaveSavedString(SpellsDB,610,id)then
    if IsBlocked(SpellTargetUnit)==false then
      call ExecuteFunc(LoadStr(SpellsDB,610,id))
    endif
  endif
  if HaveSavedString(SpellsDB,0,id)then
    call ExecuteFunc(LoadStr(SpellsDB,0,id))
  endif
  if GetUnitTypeId(caster)!='e00E' then
    call Func1451()
    call MirrorImageDispells()
  endif
  if boolean016 and GetUnitAbilityLevel(caster,'B01O')>0 then
    call Func2320()
  endif
  if Func0795(id)then
    call Func4667(caster,SpellTargetUnit,true,false)
  else
    if SpellTargetUnit!=null and GetUnitAbilityLevel(SpellTargetUnit,'A3E9')==1 and IsUnitEnemy(caster,GetOwningPlayer(SpellTargetUnit))and(GetUnitAbilityLevel(caster,'Aloc')==0 or LoadBoolean(HY,GetHandleId(caster),'REFL'))then
      if Func4720(id)==false and Func4718(id)==false and Func4722(id)==false then
        if Func4719(id)then
          if Func0449(SpellTargetUnit)==false then
            call Func4713(SpellTargetUnit,caster,id,lvl)
          endif
        else
          if Func4721(id)==false then
            call Func4711(caster,SpellTargetUnit,id,lvl)
          else
            call Func4717(caster,SpellTargetUnit,id,lvl)
          endif
        endif
      endif
    endif
  endif
  if HaveSavedHandle(HY,GetHandleId(caster),'REFL')then
    call RemoveSavedBoolean(HY,GetHandleId(caster),'REFL')
    call RemoveSavedHandle(HY,GetHandleId(caster),'REFL')
  endif
  set caster=null
  set target=null
endfunction

function Func4728 takes nothing returns nothing
  local integer h=GetHandleId(timer001)
  local integer c=LoadInteger(HY,h,0)
  local integer offset
  local integer MZN
  loop
    set offset=LoadInteger(HY,h,c)
    exitwhen offset==0 or c==0
    set MZN=LoadInteger(SpellsDB,'lens',offset)
    if MZN==1 then
      set Memory[offset]=SetRealIntoMemory(GetRealFromMemory(Memory[offset])-200.)
    endif
    call SaveInteger(SpellsDB,'lens',offset,MZN-1)
    set c=c-1
  endloop
  call FlushChildHashtable(HY,h)
endfunction

function Func4729 takes integer offset returns nothing
  local integer h
  local integer c
  local integer MZN
  if timer001==null then
    set timer001=CreateTimer()
    call FlushChildHashtable(HY,GetHandleId(timer001))
  endif
  set h=GetHandleId(timer001)
  set c=LoadInteger(HY,h,0)
  set MZN=LoadInteger(SpellsDB,'lens',offset)
  call SaveInteger(HY,h,0,c+1)
  call SaveInteger(HY,h,c+1,offset)
  call SaveInteger(SpellsDB,'lens',offset,MZN+1)
  if MZN==0 then
    set Memory[offset]=SetRealIntoMemory(GetRealFromMemory(Memory[offset])+200.)
  endif
  if c==0 then
    call TimerStart(timer001,0.,false,function Func4728)
  endif
endfunction

function Func4730 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local real r=LoadReal(HY,h,0)
  local integer offset
  local unit u=LoadUnitHandle(HY,h,0)
  local integer KWX=LoadInteger(HY,h,1)
  local integer MZN
  if r<=0. or GetUnitCurrentOrder(u)!=KWX then
    set offset=LoadInteger(HY,h,0)
    set MZN=LoadInteger(SpellsDB,'lens',offset)
    if MZN==1 then
      set Memory[offset]=SetRealIntoMemory(GetRealFromMemory(Memory[offset])-200.)
      call RemoveSavedInteger(SpellsDB,'lens',offset)
    else
      call SaveInteger(SpellsDB,'lens',offset,MZN-1)
    endif
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    call SaveReal(HY,h,0,r-0.02)
  endif
  set u=null
  set t=null
endfunction

function Func4731 takes integer offset,real D1E returns nothing
  local timer t
  local integer h
  local integer MZN=LoadInteger(SpellsDB,'lens',offset)
  set t=CreateTimer()
  set h=GetHandleId(t)
  call SaveInteger(HY,h,0,offset)
  call SaveReal(HY,h,0,D1E)
  call SaveUnitHandle(HY,h,0,GetTriggerUnit())
  call SaveInteger(HY,h,1,GetUnitCurrentOrder(GetTriggerUnit()))
  call SaveInteger(SpellsDB,'lens',offset,MZN+1)
  if MZN==0 then
    set Memory[offset]=SetRealIntoMemory(GetRealFromMemory(Memory[offset])+200.)
  endif
  call TimerStart(t,.02,true,function Func4730)
  set t=null
endfunction

function Func4732 takes integer id returns boolean
  return id!='A06B' and id!='A12P' and id!='A1D6' and Func0795(id)==false
endfunction

function Func4733 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer id=GetIssuedOrderId()
  local integer i=0
  local integer offset
  local integer hu
  local real J9O
  local integer array D9X
  local real array affectedR
  local integer k=0
  local integer QIE
  local item it
  local integer M4N
  local boolean M5N=false
  local boolean M6N=id>=852008 and id<=852013 and GetItemTypeId(UnitItemInSlot(u,id-852008))==Item_Real[integer014]and IsUnitAlly(GetOrderTargetUnit(),GetOwningPlayer(u))
  if GetUnitAbilityLevel(u,'A3O3')==0 and M6N==false then
    set u=null
    return
  endif
  set id=GetIssuedOrderId()
  if M6N or(id>=852008 and id<=852013)then
    set it=UnitItemInSlot(u,id-852008)
    if it!=null then
      set id=Memory[(ConvertHandle(it)+0x88)/4]
      if id>0 then
        call SaveInteger(TempHash,'abil',0,1)
        call SaveInteger(TempHash,GetHandleId(u),0,GetUnitAbility(u,id))
      endif
      set M5N=true
      set it=null
    endif
  else
    call GetAllUnitAbilities(u)
  endif
  if LoadInteger(TempHash,'abil',0)>0 then
    set hu=GetHandleId(u)
    set M4N=GetIssuedOrderId()
    loop
      set offset=LoadInteger(TempHash,hu,i)
      exitwhen offset<1
      if M5N or GetAbilityOrderIdAny(offset)==M4N then
        set id=Memory[(offset+0x54)/4]/4
        if id>0 and Func4732(Memory[id+0x34/4])then
          set QIE=Memory[(offset+0x50)/4]
          if Memory[id+(0x74+0x68*QIE)/4]!=0 and(Memory[id+(0x74+0x68*QIE)/4])<0x461c3c00 then
            call Func4729(id+(0x74+0x68*QIE)/4)
            set k=k+1
          endif
        endif
      endif
      set i=i+1
    endloop
  endif
  set u=null
endfunction

function Func4734 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local integer id=GetSpellAbilityId()
  local integer i=0
  local integer offset=GetUnitAbility(u,id)
  local integer QIE
  if offset>1 then
    set id=Memory[(offset+0x54)/4]/4
    if id>0 and Func4732(Memory[id+0x34/4])then
      set QIE=Memory[(offset+0x50)/4]
      if Memory[id+(0x74+0x68*QIE)/4]!=0 and GetRealFromMemory(Memory[id+(0x74+0x68*QIE)/4])<9999. then
        call Func4731(id+(0x74+0x68*QIE)/4,GetRealFromMemory(Memory[(offset+0x8C)/4])+GetRealFromMemory(Memory[id+(0x5C+0x68*QIE)/4]))
      endif
    endif
  endif
  set u=null
endfunction

function Func4735 takes nothing returns nothing
  local integer id=GetSpellAbilityId()
  if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false or GetUnitPointValue(GetTriggerUnit())==53 then
    return
  endif
  if HaveSavedReal(SpellsDB,'cstp',id)then
    call SetSpellCastpoint(GetSpellAbility(),LoadReal(SpellsDB,'cstp',id))
  endif
endfunction

function Func4736 takes integer id,unit u returns nothing
  local integer QIE=GetUnitAbilityLevel(u,id)
  local integer a=GetAbilityDataDefAddr(id)
  local integer PVN
  local real J9O
  local real PEN
  if a<1 then
    return
  endif
  set PVN=0xC+0x68*QIE
  if HaveSavedInteger(SpellsDB,'orng',id+10*QIE)==false then
    call SaveInteger(SpellsDB,'orng',id+10*QIE,Memory[(a+PVN)/4])
  endif
  set PEN=GetRealFromMemory(Memory[(a+PVN)/4])
  set J9O=Func0159(u)
  if PEN!=J9O then
    set Memory[(a+PVN)/4]=SetRealIntoMemory(J9O)
  endif
endfunction

function Func4737 takes nothing returns nothing
  local integer id=GetSpellAbilityId()
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
    if HaveSavedString(SpellsDB,3,id)then
      call ExecuteFunc(LoadStr(SpellsDB,3,id))
    endif
  else
    call Func4735()
    if Func0795(id)then
      call Func4736(id,GetTriggerUnit())
    elseif GetUnitAbilityLevel(GetTriggerUnit(),'A3O3')==1 then
      call Func4734()
    endif
    if HaveSavedString(SpellsDB,7,id)then
      call ExecuteFunc(LoadStr(SpellsDB,7,id))
    endif
  endif
endfunction

function Func4738 takes nothing returns nothing
  local boolean b=GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_ORDER
  if b then
    if HaveSavedString(SpellsDB,'ord0',GetIssuedOrderId())then
      call ExecuteFunc(LoadStr(SpellsDB,'ord0',GetIssuedOrderId()))
    endif
  elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER then
    if HaveSavedString(SpellsDB,'ord2',GetIssuedOrderId())then
      call ExecuteFunc(LoadStr(SpellsDB,'ord2',GetIssuedOrderId()))
    endif
  else
    if HaveSavedString(SpellsDB,'ord1',GetIssuedOrderId())then
      call ExecuteFunc(LoadStr(SpellsDB,'ord1',GetIssuedOrderId()))
    endif
  endif
  if not b and GetIssuedOrderId()!=851971 and GetIssuedOrderId()!=852001 and GetIssuedOrderId()!=851986 and GetIssuedOrderId()!=851990 and GetIssuedOrderId()!=851983 and GetIssuedOrderId()!=852001 and(GetIssuedOrderId()<852002 or GetIssuedOrderId()>852007)then
    call Func4733()
  endif
endfunction

function Func4739 takes nothing returns nothing
  local unit E3X=GetKillingUnit()
  local unit P5A=GetTriggerUnit()
  local integer i=0
  local integer WOX=0
  local integer xp=0
  local group g=null
  local group gg=null
  local integer count=0
  local boolean PIN=false
  local integer PAN=0
  local integer PNN=0
  local player UUX
  if IsUnitType(P5A,UNIT_TYPE_HERO)or IsUnitIllusion(P5A)or E3X==null or boolean030 then
    if boolean030 then
      set boolean030=false
    endif
    set P5A=null
    set E3X=null
    return
  endif
  set PIN=IsUnitAlly(E3X,GetOwningPlayer(P5A))
  if PIN then
    set i=GetUnitTypeId(P5A)
    if SacrificedByMotherFucker then
      set xp=0
    else
      set xp=LoadInteger(UnitsData,i,integer044)/2
    endif
    if xp>0 then
      set unit013=E3X
      call Func1082()
      if(FirstOfGroup(group008)!=null)then
        set integer043=R2I(xp/ CountUnitsInGroup(group008))
        call ForGroup(group008,function Func1077)
      endif
      set unit013=null
    endif
  endif
  if PIN==false or SacrificedByMotherFucker then
    set i=GetUnitTypeId(P5A)
    set UUX=GetOwningPlayer(E3X)
    if(SacrificedByMotherFucker==false)and(UUX!=Sentinels[0]and UUX!=Scourges[0]and UUX!=Neutrals)then
      if GetUnitAbilityLevel(E3X,'Aloc')==1 then
        set E3X=udg_Hero[GetPlayerId(UUX)]
      endif
      if boolean023 then
        set PNN=GetUnitAbilityLevel(E3X,'A0O3')
        if PNN>0 and IsUnitIllusion(E3X)==false and GetUnitAbilityLevel(E3X,'A36D')==0 then
          set count=GetHandleId(E3X)
          if IsUnitType(P5A,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(P5A,'A04R')==0 then
            set PAN=Func0464((LoadInteger(HY,count,27))*3+PNN*2+4,4+8*PNN)
            call SaveInteger(HeroStats,GetHandleId(UUX),'GGRD',LoadInteger(HeroStats,GetHandleId(UUX),'GGRD')+PAN)
            call DestroyEffect(AddSpecialEffect("war3mapImported\\GoblinCoin.mdx",GetUnitX(P5A),GetUnitY(P5A)))
          endif
        endif
      endif
      set WOX=GetRandomInt(LoadInteger(UnitsData,i,1970250369),LoadInteger(UnitsData,i,1552560955))+PAN
      if WOX>0 then
        call ImitateBountyGain(UUX,P5A,WOX,true)
      endif
    endif
    set xp=LoadInteger(UnitsData,i,integer044)
    if(xp>0)then
      if UUX!=Neutrals then
        call ProvideExp(xp,UUX,E3X)
      elseif IsCreepId(GetUnitTypeId(P5A))then
        call Func1120(R2I(xp*0.35),GetOwningPlayer(P5A)==Sentinels[0])
      endif
    endif
    set SacrificedByMotherFucker=false
  endif
  set E3X=null
  set P5A=null
endfunction

function Func4740 takes unit D2O,unit SGE returns nothing
  if GetUnitAbilityLevel(D2O,'A0AL')>0 then
    call UnitAddAbilityTimedExF(SGE,'A3IT',1,4,'B3IT')
    call Func0759(SGE,'A3IT',GetPlayerId(GetOwningPlayer(D2O)),4.01)
  endif
endfunction

function Func4741 takes nothing returns nothing
  local player p=Sentinels[0]
  local unit u=GetTriggerUnit()
  call DisplayTimedTextToForceEx(AllPlayers,10.00,Func0565(1))
  call TimedReveal(p,0.4,GetUnitX(u),GetUnitY(u),150)
  set u=null
endfunction

function Func4742 takes nothing returns nothing
  local unit u=GetTriggerUnit()
  local timer t
  local real x
  local real y
  local integer i=GetUnitTypeId(u)
  local boolean b=false
  local real JOX=0
  call Func0862(u)
  call SetUnitFlyHeight(u,GetUnitDefaultFlyHeight(u),0)
  if i=='N013' or i=='N014' or i=='N015'then
    call SaveInteger(HY,GetHandleId(u),'mrph','bear')
    set b=true
  elseif i=='N017' or i=='N02B' or i=='QTW2' or i=='QTW2' then
    call SaveInteger(HY,GetHandleId(u),'mrph','trll')
    set b=true
  elseif i=='H084' or i=='H08D' or i=='H08C' or i=='H08B' then
    call SaveInteger(HY,GetHandleId(u),'mrph','dusa')
    set b=true
  endif
  if i==HeroID[68]then
    call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",u,"origin"))
  endif
  if GetUnitAbilityLevel(u,'AIrc')==1 or GetUnitAbilityLevel(u,'A3DK')>0 or GetUnitAbilityLevel(u,'A01Y')>0 or GetUnitAbilityLevel(u,'A1AZ')>0 or GetUnitAbilityLevel(u,'A3AR')==1 or GetUnitAbilityLevel(u,'A14K')==1 then
    call Func0431(GetUnitX(u),GetUnitY(u),0)
    if b then
      if GetUnitAbilityLevel(u,'AIrc')==1 then
        set JOX=5.01
      elseif GetUnitAbilityLevel(u,'A3DK')>0 then
        set JOX=0.01
      endif
      if JOX!=0 then
        set t=CreateTimer()
        call TimerStart(t,JOX,false,function Func0984)
        call SaveUnitHandle(HY,GetHandleId(t),0,u)
        set t=null
      endif
    endif
  endif
  set u=null
endfunction

function Func4743 takes nothing returns nothing
  call Func4742()
  call Func2418()
  call Func3145()
endfunction

function Func4744 takes nothing returns nothing
  if trigger007==null then
    set trigger007=CreateTrigger()
    call TriggerAddCondition(trigger007,Condition(function Func4743))
  endif
  call TriggerRegisterDeathEvent(trigger007,tt_unit1)
endfunction

function Func4745 takes unit SGE,unit HDE,real dmg,real RGX,integer at,integer dt returns nothing
  local real IIX=0.
  local unit PHN=null
  local player PJN=null
  if dmg>0 and dmg<9000 then
    set PJN=GetOwningPlayer(HDE)
    set integers022[GetPlayerId(PJN)]=integers022[GetPlayerId(PJN)]+R2I(dmg)
    set IIX=0.
    if boolean021 and GetUnitAbilityLevel(SGE,'A3D9')==1 then
      call SaveUnitHandle(HY,GetHandleId(SGE),'lstd',HDE)
    endif
    if GetUnitAbilityLevel(SGE,'A2MZ')==1 then
      set real018=RMinIF(Treant_LivingArmorHeal(),dmg)
      if real018>0 then
        set IIX=IIX+real018
        set dmg=dmg-real018
      endif
    endif
    if dmg>0 then
      if DamageBlockActiveTrackingState then
        if GetUnitAbilityLevel(SGE,'A3DA')==1 then
          set IIX=dmg
          set dmg=0
        elseif GetUnitAbilityLevel(SGE,'A3KC')==1 then
          set IIX=dmg*2
          set dmg=0
        elseif GetUnitAbilityLevel(SGE,'A2KD')==1 then
          set IIX=dmg
          set dmg=0
        elseif GetUnitAbilityLevel(SGE,'A0RN')>0 and dmg>5 then
          set IIX=dmg
          call Func3174(SGE,dmg)
          set dmg=0
        elseif GetUnitAbilityLevel(SGE,'A32U')>0 and HaveSavedHandle(HY,GetHandleId(SGE),'DUEL')then
          if PJN!=LoadPlayerHandle(HY,GetHandleId(SGE),'DUEL')then
            set IIX=dmg
            set dmg=0
          endif
        elseif GetUnitAbilityLevel(SGE,'A38P')>0 and GetUnitAbilityLevel(HDE,'A38P')==0 then
          set IIX=dmg
          set dmg=0
        endif
      endif
      if dmg>0 then
        if IsPlayerBelongToTeams(PJN)or HDE==Roshan then
          if IsPlayerEnemy(PJN,GetOwningPlayer(SGE))then
            call SaveReal(HY,GetHandleId(SGE),785,TimerGetElapsed(GlobalTimer))
          endif
          if dmg>2 then
            call SaveReal(HY,GetHandleId(SGE),787,TimerGetElapsed(GlobalTimer))
          endif
        endif
        if DamageBlockActiveTrackingState then
          if GetUnitAbilityLevel(SGE,'A12D')==1 then
            set IIX=IIX+dmg*0.5
            set dmg=dmg-dmg*0.5
          endif
          if GetUnitAbilityLevel(SGE,'A3KB')==1 then
            set IIX=IIX+dmg*0.5
            call Func0673(LoadUnitHandle(HY,GetHandleId(SGE),'A3KB'),dmg*0.5)
            set dmg=dmg-dmg*0.5
          endif
          if GetUnitAbilityLevel(SGE,'A2O4')==2 then
            set IIX=IIX+dmg*0.6
            set dmg=dmg-dmg*0.6
          endif
          if GetUnitAbilityLevel(SGE,'A3CV')==1 then
            set IIX=IIX+dmg*0.4
            set dmg=dmg-dmg*0.4
          endif
          if GetUnitAbilityLevel(SGE,'A38O')>0 then
            set IIX=IIX+dmg*0.8
            set dmg=dmg-dmg*0.8
          endif
          if dmg>1 then
            if GetUnitAbilityLevel(HDE,'Aloc')==1 then
              set PHN=udg_Hero[GetPlayerId(PJN)]
            else
              set PHN=HDE
            endif
            if GetUnitAbilityLevel(PHN,'A39D')==1 then
              set IIX=IIX+dmg*0.5
              set dmg=dmg-dmg*0.5
            endif
            set PHN=null
          endif
        endif
        if boolean020 and GetUnitAbilityLevel(SGE,'A1VM')>0 then
          set IIX=IIX+dmg*(0.05*GetUnitAbilityLevel(SGE,'A1VM'))
          set dmg=dmg-dmg*(0.05*GetUnitAbilityLevel(SGE,'A1VM'))
        endif
        if boolean019 and GetUnitAbilityLevel(SGE,'A0NA')>0 and GetUnitAbilityLevel(SGE,'A36D')==0 and RGX>0 then
          call Func3900(SGE,RGX,at,dt)
          set IIX=IIX+dmg*(0.06+0.04*GetUnitAbilityLevel(SGE,'A0NA'))
          set dmg=dmg-dmg*(0.06+0.04*GetUnitAbilityLevel(SGE,'A0NA'))
        endif
        if LoadBoolean(HY,GetHandleId(SGE),'A0LK')then
          call Func3423(SGE,dmg)
        endif
        if GetUnitAbilityLevel(SGE,'a3TP')>0 then
          call SaveReal(HY,GetHandleId(SGE),'a3TP',LoadReal(HY,GetHandleId(SGE),'a3TP')+dmg)
        endif
      endif
    endif
    if IIX>0 then
      call Func0673(SGE,IIX)
      call echo(" healed for "+R2S(IIX))
    endif
    set HDE=null
  endif
  call Func1035()
endfunction

function Func4746 takes nothing returns nothing
endfunction

function Func4747 takes nothing returns nothing
  local real dmg=GetEventDamage()
  local player p=GetOwningPlayer(GetEventDamageSource())
  local unit u=GetTriggerUnit()
  if IsUnitEnemy(u,GetOwningPlayer(GetEventDamageSource()))then
    if GetUnitAbilityLevel(u,'A17R')==1 then
      call Func0673(u,dmg)
    else
      if IsUnitIllusion(GetEventDamageSource())then
        call Func0673(u,0.25*dmg)
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",u,"origin"))
        set dmg=dmg*0.75
      endif
      set integers023[GetPlayerId(p)]=integers023[GetPlayerId(p)]+R2I(dmg)
    endif
  endif
  set u=null
endfunction

function Func4748 takes nothing returns nothing
  set trigger008=CreateTrigger()
  call TriggerAddAction(trigger008,function Func4747)
  call TriggerRegisterUnitEvent(trigger008,unit053,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit054,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit055,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit056,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit057,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit058,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,Sentinels_Tier3_Top,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,Sentinels_Tier3_Mid,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,Sentinels_Tier3_Bot,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit062,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit063,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit064,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit065,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit066,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit067,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit068,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit069,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit052,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit100,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit101,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit102,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit103,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit104,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit105,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit106,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit107,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit108,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit109,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit110,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit111,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit112,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit113,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit114,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit115,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit116,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(trigger008,unit099,EVENT_UNIT_DAMAGED)
endfunction

function Func4749 takes nothing returns nothing
  local integer i=GetUnitTypeId(GetTriggerUnit())
  set unit007=GetKillingUnit()
  set unit008=GetTriggerUnit()
  if GetOwningPlayer(unit008)==Neutrals then
    call SaveInteger(HY,400+GetPlayerId(GetOwningPlayer(unit007)),79,LoadInteger(HY,400+GetPlayerId(GetOwningPlayer(unit007)),79)+1)
    if unit008==Roshan then
      call Func1111()
    endif
  endif
  if IsScourgeTower(i)then
    call Func1822()
    call Func4741()
  elseif IsSentinelsTower(i)then
    call Func1819()
    call Func4741()
  elseif i=='n00J' or i=='n00A' or i=='n006' then
    if unit007!=null then
      call Func1318(i)
    endif
  endif
  if Func0620(unit008)then
    call Func2598(unit008)
  endif
  call Func4739()
  call Func2630()
  call Func3331()
endfunction

function BladeMailWrapper takes unit WXE,unit SGE,real dmg,real PQN,integer PSN,integer PTN returns nothing
  local integer hu=GetHandleId(SGE)
  if LoadBoolean(HY,hu,'BMON')then
    if IsUnitType(WXE,UNIT_TYPE_STRUCTURE)==false then
      if Func0610(WXE)==false then
        if GetUnitAbilityLevel(WXE,'A04R')>0 then
          set WXE=udg_Hero[GetPlayerId(GetOwningPlayer(WXE))]
        endif
        call SaveBoolean(HY,hu,'BMON',false)
        set NoReflection=NoReflection+1
        call Func0647(SGE,WXE,PQN,PSN,PTN)
        set NoReflection=NoReflection-1
        call SaveBoolean(HY,hu,'BMON',true)
      endif
    endif
  endif
endfunction

function Func4751 takes unit WXE,unit SGE returns nothing
  if GetUnitAbilityLevel(WXE,'A39V')>0 then
    call Func0648(WXE,SGE,1,GetUnitAbilityLevel(WXE,'A39V')*50.+50.,0.)
  else
    call Func2838(WXE,SGE)
    call Func2557(WXE,SGE)
    call Func2664(WXE,SGE)
    call Func4217(WXE,SGE)
  endif
endfunction

function Func4752 takes nothing returns nothing
  local integer PWN=ReadRealMemory(ReadRealMemory(ReadRealMemory(integer713)+0x8))
  if PWN>0 then
  endif
endfunction

function Func4753 takes nothing returns boolean
  local unit target=null
  local unit attacker=null
  local unit adjattacker=null
  local real dmg_max=0
  local integer hu=0
  local real bonusdmg=0
  local player p=null
  local real IIX=0
  local real dmg_min=0.
  local integer PSN=0
  local integer PTN=0
  local boolean P0N=false
  set target=GetTriggerUnit()
  if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
    set dmg_min=reals001[integer008]
    set PSN=integers006[integer008]
    set PTN=integers007[integer008]
    set attacker=GetEventDamageSource()
    set bj_cineModePriorFogSetting=(IsPlayerBelongToTeams(GetOwningPlayer(attacker))or IsPlayerBelongToTeams(GetOwningPlayer(target)))
    set dmg_max=GetEventDamage()
    if IsL1ch then
      if dmg_max>0 then
        call TexttagOnUnitEx("+"+I2S(R2I(dmg_max)),1,target,0.028,64,255,0,0,216)
      else
        call TexttagOnUnitEx("+0",1,target,0.028,128,255,0,0,216)
      endif
    endif
    if dmg_min==0 then
      call Func4751(attacker,target)
    elseif dmg_min==0.1 then
      call Func3580(attacker,target)
      call Func3073(attacker,target)
      call Func4703(attacker,target)
      call Func3102(attacker,target)
    endif
    set bonusdmg=0.
    set bj_cineModePriorDawnDusk=IsUnitType(target,UNIT_TYPE_HERO)
    if bj_cineModePriorFogSetting then
      if DummyDamageState then
        if GetUnitTypeId(attacker)=='e00E' then
          call Func4740(attacker,target)
          call Func2663(attacker,target)
        elseif GetUnitTypeId(attacker)=='e00C'then
          call SF_Requiem_Damage(attacker,target)
        endif
      endif
    endif
    if dmg_min>0 and dmg_max<9000 then
      if(GetUnitAbilityLevel(attacker,'Aloc')==1)and IsUnitType(attacker,UNIT_TYPE_HERO)==false then
        set adjattacker=udg_Hero[GetPlayerId(GetOwningPlayer(attacker))]
      else
        set adjattacker=attacker
      endif
      if bj_cineModePriorFogSetting then
        if bj_cineModePriorDawnDusk then
          call Func4745(target,attacker,dmg_max,dmg_min,PSN,PTN)
          call Func2310(target,GetOwningPlayer(target),dmg_max)
        else
          if GetUnitAbilityLevel(adjattacker,'A39D')==1 and GetUnitAbilityLevel(target,'A04R')==0 then
            if IIX>0 then
              set IIX=IIX*1.5
            else
              set IIX=0.5
            endif
          endif
          if GetUnitAbilityLevel(target,'A1VM')>0 then
            set IIX=IIX+0.05*GetUnitAbilityLevel(target,'A1VM')
          endif
          if GetUnitAbilityLevel(target,'A2MZ')==1 then
            set real018=RMinIF(Treant_LivingArmorHeal(),dmg_max)
            if real018>0 then
              set IIX=IIX+real018
              set dmg_max=dmg_max-real018
            endif
          endif
        endif
      endif
      if IIX>0 and GetUnitAbilityLevel(target,'A04R')==0 and Func0594(target)==false then
        call Func0673(target,dmg_max*RMinIF(IIX,1.))
      endif
      if bj_cineModePriorFogSetting then
        set hu=GetHandleId(target)
        set p=GetOwningPlayer(attacker)
        if GetUnitAbilityLevel(adjattacker,'A39S')==1 and p!=Sentinels[0]and p!=Scourges[0]and p!=Neutrals then
          if GetUnitAbilityLevel(adjattacker,'A39S')==1 and IsUnitIllusion(target)==false and GetWidgetLife(adjattacker)>=1 then
            if GetUnitCurrentOrder(attacker)==852487 and(GetUnitAbilityLevel(attacker,'A0CC')!=0 or GetUnitAbilityLevel(attacker,'A02Z')!=0)then
              call Func0641(bj_cineModePriorDawnDusk,attacker,dmg_max)
            elseif IsMyDamage==0 and(GetUnitAbilityLevel(attacker,'Aloc')==1 or IsFakeDamage>0)then
              call Func0641(bj_cineModePriorDawnDusk,adjattacker,dmg_max)
            else
            endif
          endif
        endif
      endif
      if LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),'AMPL')==0 and NoReflection==0 then
        set bonusdmg=LoadReal(HY,hu,'AMPL')
        if boolean056 then
          if(GetUnitAbilityLevel(attacker,'Aloc')>0)and IsUnitType(attacker,UNIT_TYPE_HERO)==false then
            set adjattacker=udg_Hero[GetPlayerId(GetOwningPlayer(attacker))]
          else
            set adjattacker=attacker
          endif
          if GetUnitAbilityLevel(adjattacker,'A30F')>0 or GetUnitAbilityLevel(target,'A30F')>0 then
            if DistanceBetweenUnits(adjattacker,target)<2200 then
              if GetUnitAbilityLevel(adjattacker,'A30F')>0 then
                set bonusdmg=bonusdmg+LoadReal(HY,GetHandleId(adjattacker),'A2X9')*2
              endif
            else
              if GetUnitAbilityLevel(adjattacker,'A30F')>0 then
                set bonusdmg=bonusdmg+LoadReal(HY,GetHandleId(adjattacker),'A2X9')
              endif
              if GetUnitAbilityLevel(target,'A30F')>0 then
                set bonusdmg=bonusdmg-LoadReal(HY,hu,'A2X9')
              endif
            endif
          endif
        endif
        if bonusdmg>0 then
          call SaveInteger(HY,GetHandleId(GetTriggeringTrigger()),'AMPL',LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),'AMPL')+1)
          call Func0647(attacker,target,dmg_min*bonusdmg,PSN,PTN)
          call SaveInteger(HY,GetHandleId(GetTriggeringTrigger()),'AMPL',LoadInteger(HY,GetHandleId(GetTriggeringTrigger()),'AMPL')-1)
        endif
      endif
      if LoadBoolean(HY,hu,'BMON')and dmg_min>0.1 and IsUnitEnemy(attacker,GetOwningPlayer(target))and NoReflection==0 and IsMyDamage==0 then
        call BladeMailWrapper(attacker,target,dmg_max,dmg_min,PSN,PTN)
      endif
      if bj_cineModePriorFogSetting and IsFakeDamage==0 then
        if boolean055 and GetUnitAbilityLevel(attacker,'AHfa')>0 then
          call Func3352(attacker,target,dmg_max)
        endif
      endif
    endif
    set integer008=integer008-1
  else
    set adjattacker=GetAttacker()
    if GetUnitAbilityLevel(target,'A1HX')==1 or GetUnitAbilityLevel(target,'A20L')==1 then
      call ShadowDanceAttacker()
    else
      if IsUnitAlly(target,GetOwningPlayer(adjattacker))then
        if Func1803()then
          set P0N=true
        endif
      elseif GetUnitAbilityLevel(adjattacker,'A17S')>0 and IsUnitType(target,UNIT_TYPE_STRUCTURE)==false then
        if Func1771()then
          set P0N=true
        endif
      endif
      if P0N==false then
        call Func4667(adjattacker,target,false,false)
      endif
    endif
  endif
  set adjattacker=null
  set target=null
  set attacker=null
  return false
endfunction

function Func4754 takes nothing returns boolean
  local unit u=GetTriggerUnit()
  local integer hu=GetHandleId(u)
  if GetUnitAbilityLevel(u,'Aloc')==0 and GetOwningPlayer(u)!=Player(15)then
    call TriggerRegisterUnitEvent(trigger011,u,EVENT_UNIT_DAMAGED)
    call TriggerRegisterUnitEvent(trigger011,u,EVENT_UNIT_ATTACKED)
  endif
  set u=null
  return false
endfunction

function Func4755 takes unit u returns nothing
  local integer i=0
  local item it
  local integer id
  local integer k=UnitInventorySize(u)
  loop
    exitwhen i>k
    set it=UnitItemInSlot(u,i)
    set id=GetIndex(it)
    if(id==integer167 or id==integer168 or id==integer169)and GetItemUserData(it)>0 then
      call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
      call Func0649(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
      if id==integer167 or GetItemPlayer(it)!=GetOwningPlayer(u)then
        call ReplaceItem(u,it,Item_Real[integer170],i)
      else
        call Func0227(it,Item_Real[integer170])
      endif
      if IsUnitType(u,UNIT_TYPE_HERO)==false then
        call UnitRemoveAbility(u,'B0GI')
      endif
    endif
    set i=i+1
  endloop
  set it=null
endfunction

function Func4756 takes nothing returns nothing
  local unit u=GetEnumUnit()
  local integer hu=GetHandleId(u)
  local real P4N
  if IsDead(u)==false and(HaveSavedReal(HY,hu,'FnLv')==false or TimerGetElapsed(GlobalTimer)-LoadReal(HY,hu,'FnLv')<2.5)then
    if GetUnitAbilityLevel(u,'A3MA')==0 then
      call UnitAddAbility2(u,'A3MA')
    endif
    if GetWidgetLife(u)<GetUnitState(u,UNIT_STATE_MAX_LIFE)then
      if GetUnitAbilityLevel(u,'A35Y')==0 then
        call UnitAddAbility2(u,'A35Y')
      endif
      set P4N=0.04*GetUnitState(u,UNIT_STATE_MAX_LIFE)
      if P4N!=LoadReal(HY,hu,'A35Y')then
        call Func0175(u,P4N-LoadReal(HY,hu,'A35Y'))
        call SaveReal(HY,hu,'A35Y',P4N)
      endif
    else
      if GetUnitAbilityLevel(u,'A35Y')==1 then
        call UnitRemoveAbility(u,'A35Y')
        call Func0175(u,-LoadReal(HY,hu,'A35Y'))
        call RemoveSavedReal(HY,hu,'A35Y')
      endif
    endif
    if GetUnitState(u,UNIT_STATE_MANA)<GetUnitState(u,UNIT_STATE_MAX_MANA)then
      if GetUnitAbilityLevel(u,'A35Z')==0 then
        call UnitAddAbility2(u,'A35Z')
      endif
      set P4N=0.04*GetUnitState(u,UNIT_STATE_MAX_MANA)+14.
      if P4N!=LoadReal(HY,hu,'A35Z')then
        call Func0176(u,P4N-LoadReal(HY,hu,'A35Z'))
        call SaveReal(HY,hu,'A35Z',P4N)
      endif
    else
      if GetUnitAbilityLevel(u,'A35Z')==1 then
        call Func0176(u,-LoadReal(HY,hu,'A35Z'))
        call RemoveSavedReal(HY,hu,'A35Z')
        call UnitRemoveAbility(u,'A35Z')
      endif
    endif
    if UnitInventorySize(u)>0 and ModuloInteger(GetTriggerEvalCount(GetTriggeringTrigger()),2)==1 then
      call Func4755(u)
    endif
  else
    if UnitRemoveAbility(u,'A35Y')then
      call Func0175(u,-LoadReal(HY,hu,'A35Y'))
      call RemoveSavedReal(HY,hu,'A35Y')
    endif
    if UnitRemoveAbility(u,'A35Z')then
      call Func0176(u,-LoadReal(HY,hu,'A35Z'))
      call RemoveSavedReal(HY,hu,'A35Z')
    endif
    call UnitRemoveAbility(u,'A3MA')
    call UnitRemoveAbility(u,'a3MA')
    call GroupRemoveUnit(bj_lastCreatedGroup,u)
    call GroupRemoveUnit(group009,u)
  endif
  if IsCourier(u)then
    if HaveSavedReal(HY,hu,'FnLv')then
      call UnitRemoveAbility(u,'Avul')
    elseif GetUnitAbilityLevel(u,'Avul')==0 then
      call UnitAddAbility2(u,'Avul')
    endif
  endif
  set u=null
endfunction

function Func4757 takes nothing returns boolean
  set tt_unit1=GetFilterUnit()
  return IsSentinel(GetOwningPlayer(tt_unit1))and GetWidgetLife(tt_unit1)>0.5 and IsUnitType(tt_unit1,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(tt_unit1,'Aloc')==0 and(GetUnitAbilityLevel(tt_unit1,'A04R')==0 or IsCourier(tt_unit1)or IsUnitType(tt_unit1,UNIT_TYPE_HERO))
endfunction

function Func4758 takes nothing returns boolean
  set tt_unit1=GetFilterUnit()
  return IsScourge(GetOwningPlayer(tt_unit1))and GetWidgetLife(tt_unit1)>0.5 and IsUnitType(tt_unit1,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(tt_unit1,'Aloc')==0 and(GetUnitAbilityLevel(tt_unit1,'A04R')==0 or IsCourier(tt_unit1)or IsUnitType(tt_unit1,UNIT_TYPE_HERO))
endfunction

function Func4759 takes nothing returns boolean
  return GetUnitPointValue(GetTriggerUnit())!=200
endfunction

function Func4760 takes nothing returns nothing
  local group g
  local unit u
  if GetTriggerEventId()==EVENT_GAME_LEAVE_REGION then
    if GetUnitAbilityLevel(GetTriggerUnit(),'Aloc')==0 then
      if(GetTriggeringRegion()==region003 and IsSentinel(GetOwningPlayer(GetTriggerUnit())))or(GetTriggeringRegion()==region004 and IsScourge(GetOwningPlayer(GetTriggerUnit())))then
        call SaveReal(HY,GetHandleId(GetTriggerUnit()),'FnLv',TimerGetElapsed(GlobalTimer))
        call GroupAddUnit(group009,GetTriggerUnit())
      endif
    endif
    return
  endif
  set g=GetAvailableGroup()
  call GroupClear(group010)
  call GroupEnumUnitsInRect(g,FountainSentRect,Condition(function Func4757))
  call GroupAddGroup(g,group010)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call RemoveSavedReal(HY,GetHandleId(u),'FnLv')
    call GroupRemoveUnit(group009,u)
    call GroupRemoveUnit(g,u)
  endloop
  call GroupClear(g)
  call GroupClear(group011)
  call GroupEnumUnitsInRect(g,FountainScrgRect,Condition(function Func4758))
  call GroupAddGroup(g,group011)
  loop
    set u=FirstOfGroup(g)
    exitwhen u==null
    call RemoveSavedReal(HY,GetHandleId(u),'FnLv')
    call GroupRemoveUnit(group009,u)
    call GroupRemoveUnit(g,u)
  endloop
  set tt_real1=TimerGetElapsed(GlobalTimer)
  set bj_lastCreatedGroup=group010
  call ForGroup(group010,function Func4756)
  set bj_lastCreatedGroup=group011
  call ForGroup(group011,function Func4756)
  call ForGroup(group009,function Func4756)
  call KillGroup(g)
  if udg_ObserverMode or IsL1ch then
    if HaveSavedHandle(MHT,'L1ch','grps')==false then
      call SaveTextTagHandle(MHT,'L1ch','grps',CreateTextTag())
      call SetTextTagText(LoadTextTagHandle(MHT,'L1ch','grps'),"0",0.03)
      call SetTextTagPosUnit(LoadTextTagHandle(MHT,'L1ch','grps'),SentFountain,64)
      call SetTextTagColor(LoadTextTagHandle(MHT,'L1ch','grps'),255,255,0,255)
      call SetTextTagPermanent(LoadTextTagHandle(MHT,'L1ch','grps'),true)
      call SetTextTagVisibility(LoadTextTagHandle(MHT,'L1ch','grps'),PlayerObserver or IsL1ch)
    else
      call SetTextTagText(LoadTextTagHandle(MHT,'L1ch','grps'),I2S(Func0507()),0.03)
    endif
  endif
endfunction

function Func4761 takes unit WXE,unit SGE returns nothing
  if IsSentinel(GetOwningPlayer(WXE))then
    if GetOwningPlayer(SGE)==Sentinels[0]and IsCreepId(GetUnitTypeId(SGE))then
      if GetWidgetLife(SGE)/ GetUnitState(SGE,UNIT_STATE_MAX_LIFE)<0.5 then
        call IssueTargetOrder(WXE,"attack",SGE)
      endif
    endif
  else
    if GetOwningPlayer(SGE)==Scourges[0]and IsCreepId(GetUnitTypeId(SGE))then
      if GetWidgetLife(SGE)/ GetUnitState(SGE,UNIT_STATE_MAX_LIFE)<0.5 then
        call IssueTargetOrder(WXE,"attack",SGE)
      endif
    endif
  endif
endfunction

function Func4762 takes item it returns boolean
  local integer RRE=GetIndex(it)
  return RRE==integer035 or RRE==integer202 or RRE==integer215 or RRE==integer216 or RRE==integer217 or RRE==integer188 or RRE==integer187 or RRE==integer208 or RRE==integer211 or RRE==integer212 or RRE==integer296 or RRE==integer297 or RRE==integer286 or RRE==integer309 or RRE==integer234 or RRE==integer235 or RRE==integer252 or RRE==integer253 or RRE==integer179 or RRE==integer240 or RRE==integer192 or RRE==integer193 or RRE==integer313 or RRE==integer279 or RRE==integer189 or RRE==integer303 or RRE==integer304 or RRE==HeavensHalberd
endfunction

function Func4763 takes unit u,item it,integer slot returns nothing
  local integer QXN=1
  local integer QON=0
  local integer i=0
  local item QRN
  local integer RRE=GetIndex(it)
  local player p
  if RRE==integer202 then
    if GetItemCharges(it)>1 then
      call SetItemCharges(it,GetItemCharges(it)-1)
      call DelayedItemCreation(Item_Dummy[integer202],GetUnitX(u),GetUnitY(u),GetOwningPlayer(u),true,1)
    endif
    return
  endif
  loop
    if UnitItemInSlot(u,i)==null then
      set QXN=QXN+1
    endif
    set i=i+1
    exitwhen i>5
  endloop
  if RRE==integer208 or RRE==integer188 or RRE==HeavensHalberd or RRE==integer211 or RRE==integer212 or RRE==integer309 or RRE==integer234 or RRE==integer235 or RRE==integer179 or RRE==integer240 or RRE==integer192 or RRE==integer193 or RRE==integer279 or RRE==integer189 then
    set QON=2
  else
    set QON=3
  endif
  if QXN>=QON then
    set p=GetItemPlayer(it)
    if RRE==integer035 then
      call RemoveItem(it)
      call DisableTrigger(t_manipulateitem)
    else
      call DisableTrigger(t_manipulateitem)
      call RemoveItem(it)
    endif
    if RRE==integer208 then
      call Func0452(u,Item_Real[integer152],p,false,1)
      call Func0452(u,Item_Real[integer164],p,false,1)
    elseif RRE==integer211 or RRE==integer212 then
      call Func0452(u,Item_Real[integer153],p,false,1)
      call Func0452(u,Item_Real[integer158],p,false,1)
    elseif RRE==integer279 then
      call Func0452(u,Item_Real[integer314],p,false,1)
      call Func0452(u,Item_Real[integer148],p,false,1)
    elseif RRE==integer035 then
      call Func0452(u,Item_Real[integer147],p,false,1)
      call Func0452(u,Item_Real[integer123],p,false,1)
      call Func0452(u,Item_Real[integer123],p,false,1)
    elseif RRE==integer189 then
      call Func0452(u,Item_Real[integer310],p,false,1)
      call Func0452(u,Item_Real[TalismanOfEvasion],p,false,1)
    elseif RRE==integer296 or RRE==integer297 then
      call Func0452(u,Item_Real[integer149],p,false,1)
      call Func0452(u,Item_Real[integer146],p,false,1)
      call Func0452(u,Item_Real[integer351],p,false,1)
    elseif RRE==integer286 then
      call Func0452(u,Item_Real[integer138],p,false,1)
      call Func0452(u,Item_Real[integer229],p,false,1)
      call Func0452(u,Item_Real[integer355],p,false,1)
    elseif RRE==integer309 then
      call Func0452(u,Item_Real[TemporaryItem],p,false,1)
      call Func0452(u,Item_Real[integer133],p,false,1)
    elseif RRE==integer234 or RRE==integer235 then
      call Func0452(u,Item_Real[integer137],p,false,1)
      call Func0452(u,Item_Real[integer143],p,false,1)
    elseif RRE==integer252 or RRE==integer253 then
      call Func0452(u,Item_Real[integer224],p,false,1)
      call Func0452(u,Item_Real[integer162],p,false,1)
      call Func0452(u,Item_Real[integer336],p,false,1)
    elseif RRE==integer187 then
      call Func0452(u,Item_Real[integer133],p,false,1)
      call Func0452(u,Item_Real[integer149],p,false,1)
      call Func0452(u,Item_Real[integer208],p,false,1)
    elseif RRE==integer179 then
      call Func0452(u,Item_Real[integer132],p,false,1)
      call Func0452(u,Item_Real[integer305],p,false,1)
    elseif RRE==integer240 then
      call Func0452(u,Item_Real[integer225],p,false,1)
      call Func0452(u,Item_Real[integer224],p,false,1)
    elseif RRE==integer192 or RRE==integer193 then
      call Func0452(u,Item_Real[integer222],p,false,1)
      call Func0452(u,Item_Real[integer211],p,false,1)
    elseif RRE==integer313 then
      call Func0452(u,Item_Real[integer226],p,false,1)
      if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)then
        call Func0452(u,Item_Real[integer284],p,false,1)
      else
        call Func0452(u,Item_Real[integer285],p,false,1)
      endif
      call Func0452(u,Item_Real[integer315],p,false,1)
    elseif RRE==HeavensHalberd then
      call Func0452(u,Item_Real[integer225],p,false,1)
      call Func0452(u,Item_Real[TalismanOfEvasion],p,false,1)
    elseif RRE==integer188 then
      call Func0452(u,Item_Real[integer138],p,false,1)
      call Func0452(u,Item_Real[integer138],p,false,1)
    elseif RRE==integer215 or RRE==integer217 or RRE==integer216 then
      call Func0452(u,Item_Real[TemporaryItem],p,false,1)
      call Func0452(u,Item_Real[integer122],p,false,1)
      if RRE==integer215 then
        call Func0452(u,Item_Real[integer123],p,false,1)
      elseif RRE==integer217 then
        call Func0452(u,Item_Real[integer155],p,false,1)
      else
        call Func0452(u,Item_Real[integer125],p,false,1)
      endif
    elseif RRE==integer303 or RRE==integer304 then
      if RRE==integer303 then
        call Func0452(u,Item_Real[integer160],p,false,1)
      else
        call Func0452(u,Item_Real[integer161],p,false,1)
      endif
      call Func0452(u,Item_Real[integer157],p,false,1)
      call Func0452(u,Item_Real[integer157],p,false,1)
    endif
    call EnableTrigger(t_manipulateitem)
  else
    call Error(GetOwningPlayer(u),str_replace(GetObjectName('TX0X'),"$c",I2S(QON)))
  endif
  set QRN=null
endfunction

function Func4764 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  call RemoveSavedHandle(HY,GetHandleId(u),'DISS'+LoadInteger(HY,h,0))
  call FlushChildHashtable(HY,h)
  call DestroyTimer(t)
  set u=null
  set t=null
endfunction

function Func4765 takes unit u,item it,integer slot returns nothing
  local timer t
  local integer h
  if Func4762(it)==false then
    return
  endif
  if HaveSavedHandle(HY,GetHandleId(u),'DISS'+slot)then
    set t=LoadTimerHandle(HY,GetHandleId(u),'DISS'+slot)
    set h=GetHandleId(t)
    if slot==LoadInteger(HY,h,0)and it==LoadItemHandle(HY,h,1)then
      call FlushChildHashtable(HY,h)
      call DestroyTimer(t)
      call RemoveSavedHandle(HY,GetHandleId(u),'DISS'+slot)
      call Func4763(u,it,slot)
    endif
    set t=null
  else
    set t=CreateTimer()
    set h=GetHandleId(t)
    call SaveUnitHandle(HY,h,0,u)
    call SaveItemHandle(HY,h,1,it)
    call SaveInteger(HY,h,0,slot)
    call SaveTimerHandle(HY,GetHandleId(u),'DISS'+slot,t)
    call TimerStart(t,1,false,function Func4764)
    set t=null
  endif
endfunction

function Func4766 takes nothing returns boolean
  local integer id=GetIssuedOrderId()
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER then
    if id>=852002 and id<=852007 then
      if GetOrderTargetItem()==UnitItemInSlot(GetTriggerUnit(),id-852002)then
        call Func4765(GetTriggerUnit(),GetOrderTargetItem(),id-852002)
      endif
    elseif id==851971 then
      if IsUnitAlly(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and LoadBoolean(HeroStats,GetHandleId(GetOwningPlayer(GetTriggerUnit())),'SET0')then
        call Func4761(GetTriggerUnit(),GetOrderTargetUnit())
      endif
    endif
  endif
  return false
endfunction

function Func4767 takes nothing returns boolean
  return false
endfunction

function IsDummyLeavingPlayingMap takes nothing returns boolean
  return true
endfunction

function Func4769 takes nothing returns boolean
  return GetUnitAbilityLevel(GetFilterUnit(),'Aloc')==0
endfunction

function Func4770 takes nothing returns nothing
  local real x=GetUnitX(GetEnumUnit())
  local real y=GetUnitY(GetEnumUnit())
  local real QFN=GetRectMinX(rect007)
  local real QGN=GetRectMinY(rect007)
  if QFN<x and x-QFN<100 then
    call SetUnitX(GetEnumUnit(),QFN-50)
  endif
  if QGN<y then
    call SetUnitY(GetEnumUnit(),QGN-64)
  endif
endfunction

function Func4771 takes nothing returns nothing
  local real x=GetUnitX(GetEnumUnit())
  local real y=GetUnitY(GetEnumUnit())
  local real QFN=GetRectMinX(rect007)
  local real QGN=GetRectMinY(rect007)
  if QFN<x then
    call SetUnitX(GetEnumUnit(),QFN-50)
  endif
  if QGN<y and y-QGN<100 then
    call SetUnitY(GetEnumUnit(),QGN-64)
  endif
endfunction

function Func4772 takes nothing returns nothing
  local boolean QJN=GetTriggerEventId()==EVENT_GAME_LEAVE_REGION
  local unit u=GetTriggerUnit()
  local real x=GetUnitX(u)
  local real y=GetUnitY(u)
  local group g
  local rect r
  local integer i=2
  if QJN then
  else
    set g=GetAvailableGroup()
    set r=LoadRectHandle(HY,GetHandleId(GetTriggeringTrigger()),0)
    set rect007=r
    call GroupEnumUnitsInRect(g,r,Condition(function Func4769))
    call ForGroup(g,function Func4770)
    set r=LoadRectHandle(HY,GetHandleId(GetTriggeringTrigger()),1)
    set rect007=r
    call GroupEnumUnitsInRect(g,r,Condition(function Func4769))
    call ForGroup(g,function Func4770)
    call KillGroup(g)
  endif
  set u=null
endfunction

function DummyLeavingPlayingMap takes nothing returns nothing
  local unit u=GetLeavingUnit()
  if GetUnitAbilityLevel(u,'Aloc')>0 then
    call KillUnit(u)
  else
    call SetUnitX(u,SafeX50(GetUnitX(u)))
    call SetUnitY(u,SafeY50(GetUnitY(u)))
  endif
  set u=null
endfunction

function Func4774 takes nothing returns nothing
endfunction

function Func4775 takes nothing returns nothing
  local trigger t=CreateTrigger()
  local integer h=GetHandleId(t)
  local region r
  local rect rr
  set EXTRABOUNDARIES=CreateRegion()
  set EXTRABOUNDARIESADV=CreateRegion()
  set rr=Rect(8426,6440,2800,8920)
  call RegionAddRect(EXTRABOUNDARIES,rr)
  call SaveRectHandle(HY,h,0,rr)
  set rr=Rect(2800,8920,-5705,7000)
  call SaveRectHandle(HY,h,1,rr)
  call RegionAddRect(EXTRABOUNDARIESADV,rr)
  set rr=Rect(7720,6400,8464,5200)
  call SaveRectHandle(HY,h,2,rr)
  call TriggerRegisterEnterRegion(t,EXTRABOUNDARIES,Condition(function ReturnTrue))
  call TriggerRegisterEnterRegion(t,EXTRABOUNDARIESADV,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func4772))
  set t=CreateTrigger()
  set r=CreateRegion()
  call RegionAddRect(r,Rect(GetRectMaxX(bj_mapInitialPlayableArea)+400,GetRectMaxY(bj_mapInitialPlayableArea)+400,GetRectMinX(bj_mapInitialPlayableArea)-200,GetRectMinY(bj_mapInitialPlayableArea)-200))
  call TriggerRegisterLeaveRegion(t,r,Condition(function IsDummyLeavingPlayingMap))
  call TriggerAddCondition(t,Condition(function DummyLeavingPlayingMap))
  set r=null
  set t=null
endfunction

function DoubleHold_Blink takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local unit u=LoadUnitHandle(HY,h,0)
  if GetUnitX(u)!=LoadReal(HY,h,0)or GetUnitY(u)!=LoadReal(HY,h,1)or IsDead(u)then
    if LoadBoolean(HY,h,0)==false then
    endif
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
    call UnitRemoveAbility(u,'A35X')
    call ChangeHelpRequesting(GetOwningPlayer(u),true)
  else
    call UnitRemoveAbility(u,'A35X')
    call UnitAddAbility2(u,'A35X')
  endif
  set u=null
  set t=null
endfunction

function DoubleHold_AntiInvis takes unit u returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,0.2,true,function DoubleHold_Blink)
  call SaveUnitHandle(HY,GetHandleId(t),0,u)
  call UnitAddAbility2(u,'A35X')
  call SaveBoolean(HY,GetHandleId(t),0,IsUnitType(u,UNIT_TYPE_PEON))
  if LoadBoolean(HY,GetHandleId(t),0)==false then
  endif
  call SaveReal(HY,GetHandleId(t),0,GetUnitX(u))
  call SaveReal(HY,GetHandleId(t),1,GetUnitY(u))
  set t=null
endfunction

function ItemOrderGiven_Teleport takes unit u,item it returns nothing
  if GetOrderTargetItem()!=null then
    if IsSentinel(GetOwningPlayer(u))then
      if RectContainsUnit(FountainSentRect,u)then
        call InterruptUnitError(u,'TX0Y')
      endif
    else
      if RectContainsUnit(FountainScrgRect,u)then
        call InterruptUnitError(u,'TX0Y')
      endif
    endif
  endif
endfunction

function Func4779 takes unit u returns nothing
  local integer i
  local boolean b
  local unit t=GetOrderTargetUnit()
  call SetUnitAbilityLevel(u,'Aeat',1)
  call SetUnitAbilityLevel(u,'A2VG',1)
  if t!=null and Func1297(t)then
    if IsUnitEnemy(t,GetOwningPlayer(u))then
      call SetUnitAbilityLevel(u,'Aeat',2)
      call SetUnitAbilityLevel(u,'A2VG',2)
    else
      call InterruptUnitError(u,'TX0Z')
    endif
  elseif t!=null then
    if IsUnitEnemy(t,GetOwningPlayer(u))then
      call InterruptUnitError(u,'TX10')
    elseif(IsUnitType(t,UNIT_TYPE_HERO)or IsUnitSpiritBear(t))==false then
      call InterruptUnitError(u,'TX11')
    else
      if Func0884(t)==false then
        call InterruptUnitError(u,'TX12')
      endif
    endif
  endif
  set t=null
endfunction

function Func4780 takes unit u,integer id returns nothing
  local unit t=GetOrderTargetUnit()
  if t!=null then
    if(Func1297(t)or Func0598(t))then
      call SetUnitAbilityLevel(u,'A1FD',2)
      call SetUnitAbilityLevel(u,'A3O4',2)
    elseif id==integer036 then
      if IsPlayerBelongToTeams(GetOwningPlayer(t))then
        call InterruptUnitError(u,'n0K9')
      else
        call SetUnitAbilityLevel(u,'A3O4',3)
      endif
    endif
  else
    call SetUnitAbilityLevel(u,'A1FD',1)
    call SetUnitAbilityLevel(u,'A3O4',1)
  endif
  set t=null
endfunction

function Func4781 takes unit u returns nothing
  local unit t=GetOrderTargetUnit()
  if t!=null then
    if GetOwningPlayer(t)!=GetOwningPlayer(u)then
      if GetUnitTypeId(t)=='n00L' then
        call InterruptUnitError(u,'TX14')
      elseif IsUnitAlly(u,GetOwningPlayer(t))and Func1474(t)then
        call InterruptUnitError(u,'n038')
      elseif IsUnitEnemy(u,GetOwningPlayer(t))and IsMagicImmune(t)then
        call InterruptUnitError(u,'TX13')
      endif
    endif
    if IsUnitWard(t)then
      if Func0614(t)==false then
        call InterruptUnitError(u,'TX15')
      endif
    endif
  endif
  set t=null
endfunction

function Func4782 takes unit u returns nothing
  local unit t=GetOrderTargetUnit()
  local real x=GetOrderPointX()
  local real y=GetOrderPointY()
  if t!=null then
    if Func1297(t)==false then
      if(IsUnitInGroup(t,group013)or IsUnitType(t,UNIT_TYPE_HERO)or IsUnitSpiritBear(t))==false then
        call InterruptUnitError(u,'TX16')
      elseif Func0884(u)==false then
        call InterruptUnitError(u,'TX12')
      endif
    endif
  else
    if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)then
      call InterruptUnitError(u,'TX17')
    elseif RectContainsCoords(FountainSentRect,x,y)or RectContainsCoords(FountainScrgRect,x,y)then
      call InterruptUnitError(u,'TX18')
    elseif IsPointInRegion(region010,x,y)then
      call InterruptUnitError(u,'TX17')
    endif
  endif
  set t=null
endfunction

function ItemOrderWrapper takes nothing returns nothing
  local integer slot=GetIssuedOrderId()-852008
  local unit u=GetTriggerUnit()
  local item it=UnitItemInSlot(u,slot)
  local integer id=GetIndex(it)
  local integer i
  local boolean b
  if GetUnitTypeId(u)=='ncop' then
    if id==KelensDagger or id==integer290 then
      call Func0656(u)
    endif
  endif
  if id==integer202 or id==integer213 or id==integer214 then
    call ItemOrderGiven_Teleport(u,it)
  elseif id==KelensDagger then
    if IsUnitEnTangled(u)or IsUnitEnsnared(u)then
      call InterruptUnitError(u,'TX1Y')
    endif
  elseif id==KelensDaggerDisabled or id==integer264 or id==integer184 or id==HeartOfTarrasqueDisabled then
    if GetUnitTypeId(u)!='e00E'then
      call Func0656(u)
    endif
  elseif id==integer196 or id==integer197 then
    call Func4779(u)
  elseif id==integer177 or id==integer036 or id==integer242 then
    call Func4780(u,id)
  elseif id==integer237 then
    if GetOrderTargetUnit()!=null and IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(u))and IsMagicImmune(GetOrderTargetUnit())then
      call InterruptUnitError(u,'TX13')
    endif
  elseif id==integer301 then
    call Func4781(u)
  elseif IsItemWardId(id)then
    call Func4782(u)
  elseif id==UrnOfShadows then
    if IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(u))and IsMagicImmune(GetOrderTargetUnit())then
      call InterruptUnitError(u,'n0LR')
    endif
  elseif id==integer310 or id==integer189 then
    if IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(u))and IsMagicImmune(GetOrderTargetUnit())then
      call InterruptUnitError(u,'n0LR')
    endif
  elseif id==integer218 then
    if Func0617(GetOrderTargetUnit())then
      call InterruptUnitError(u,'TX19')
    endif
  endif
  set u=null
  set it=null
endfunction

function UnitsInFog takes nothing returns boolean
  if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())then
    if IsUnitInvisible(GetFilterUnit(),GetTriggerPlayer())then
      call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.00,"
"+PlayerNames[GetPlayerId(GetTriggerPlayer())]+": |c00ff0303fog click detected|r

")

    elseif IsL1ch then
      call DisplayTimedTextToForceEx(bj_FORCE_ALL_PLAYERS,15.,"Fog click by "+PlayerNames[GetPlayerId(GetTriggerPlayer())]+"; X = "+R2S(GetUnitX(GetFilterUnit()))+" Y = "+R2S(GetUnitY(GetFilterUnit()))+" "+GetUnitName(GetFilterUnit()))
    endif
  endif
  return false
endfunction

function Antihack_Checking takes nothing returns nothing
  call GroupEnumUnitsInRange(AHGroup,GetOrderPointX(),GetOrderPointY(),0,Condition(function UnitsInFog))
endfunction

function DoubleHold takes nothing returns nothing
  local unit u
  local integer h
  local integer id
  if GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER and IsTriggeredOrder(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),'A04R')==0 then
    call Antihack_Checking()
  endif
  if IsPlayerBelongToTeams(GetTriggerPlayer())==false or IsUnitIllusion(GetTriggerUnit())then
    return
  endif
  set id=GetIssuedOrderId()
  set u=GetTriggerUnit()
  if id>=852008 and id<=852013 then
    call ItemOrderWrapper()
  elseif id==852662 then
    if GetUnitAbilityLevel(u,'A315')>0 then
      call SupernovaAghFilter()
    elseif GetUnitAbilityLevel(u,'A0A2')>0 or GetUnitAbilityLevel(u,'A0MU')>0 then
      call DoomUltiTargetFilter()
    endif
  elseif id==852581 then
    if GetUnitAbilityLevel(u,'A30N')==1 then
      call EarthSpiritEnchantedRemnantTargetting()
    endif
  elseif id==852248 then
    if GetUnitAbilityLevel(u,'A0AS')>0 then
      call ShadowWordTargeting()
    endif
  elseif id==852669 then
    if GetUnitAbilityLevel(u,'A2TD')>0 then
      call PugnaEtherealOrder()
    elseif GetUnitAbilityLevel(u,'A0R5')>0 then
      call SoulRipTargeting()
    endif
  elseif id==852525 then
    if IsUnitEnTangled(u)or IsUnitEnsnared(u)then
      call InterruptUnitError(u,'TX1Y')
    endif
  elseif id==852514 then
    if IsUnitEnTangled(u)or IsUnitEnsnared(u)then
      call InterruptUnitError(u,'TX23')
    endif
  endif
  set h=GetHandleId(u)
  if GetIssuedOrderId()==851993 and LoadBoolean(HeroStats,GetHandleId(GetTriggerPlayer()),'SET2')then
    if LoadBoolean(HY,h,'ACQR')==false then
      if LoadInteger(HY,h,'ACQR')!=1 then
        call AddTimedKeyToAgent(u,'ACQR',0.2)
      else
        call AddTimedKeyToAgent(u,'ACQR',0)
        call DoubleHold_AntiInvis(u)
        call ChangeHelpRequesting(GetOwningPlayer(u),false)
      endif
    endif
  else
    if GetUnitAbilityLevel(u,'A35X')>0 then
      call ChangeHelpRequesting(GetOwningPlayer(u),true)
      call UnitRemoveAbility(u,'A35X')
    endif
  endif
  set u=null
endfunction

function RunePickupPriorityF takes nothing returns nothing
  if GetWidgetLife(GetEnumItem())>0 and IsFakeRune(GetItemTypeId(GetEnumItem()))and DistanceBetweenXY(GetWidgetX(GetEnumItem()),GetWidgetY(GetEnumItem()),GetUnitX(GetOrderTargetUnit()),GetUnitY(GetOrderTargetUnit()))<150 then
    call IssueTargetOrderById(GetTriggerUnit(),851971,GetEnumItem())
  endif
endfunction

function Func4788 takes nothing returns boolean
  if GetIssuedOrderId()==851971 and GetOrderTargetUnit()!=null and Func0583(GetTriggerUnit())then
    if(RectContainsUnit(rect023,GetOrderTargetUnit()))then
      call EnumItemsInRect(rect023,Condition(function ReturnTrue),function RunePickupPriorityF)
    elseif RectContainsUnit(rect020,GetOrderTargetUnit())then
      call EnumItemsInRect(rect020,Condition(function ReturnTrue),function RunePickupPriorityF)
    endif
  endif
  return false
endfunction

function Func4789 takes nothing returns nothing
  local integer i=0
  call SaveStr(MHT,i,0," - ")
endfunction

function Func4790 takes unit u returns string
  local string s=LoadStr(MHT,StringHash("orders"),GetUnitCurrentOrder(u))
  if s!=null then
    return s
  else
    return I2S(GetUnitCurrentOrder(u))
  endif
  return""
endfunction

function Func4791 takes nothing returns nothing
  local integer i=0
  local integer D6R=integer030
  call MultiboardSetItemsStyle(multiboard001,true,false)
  loop
    exitwhen i>D6R
    call MultiboardSetItemWidth(MultiboardGetItem(multiboard001,i,0),0.10)
    call MultiboardSetItemWidth(MultiboardGetItem(multiboard001,i,1),0.16)
    call MultiboardSetItemValueColor(MultiboardGetItem(multiboard001,i,0),252,252,3,255)
    set i=i+1
  endloop
  call MultiboardMinimize(multiboard001,false)
endfunction

function Func4792 takes player p returns nothing
  call GroupClear(group005)
  call GroupEnumUnitsSelected(group005,p,null)
endfunction

function Func4793 takes nothing returns nothing
  local multiboarditem ZME
  local integer i=0
  local integer k=0
  local integer j=0
  local real r=0
  local integer D6R=integer030
  local integer D7R=2
  local unit u=null
  local string s=""
  call Func4792(LocalPlayer)
  set u=FirstOfGroup(group005)
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"Name, ID")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,GetObjectName(GetUnitTypeId(u))+" ("+Id2String(GetUnitTypeId(u))+")")
  endif
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"X Y")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,R2SW(GetUnitX(u),2,2)+" "+R2SW(GetUnitY(u),2,2))
  endif
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"Life, %%")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,R2S(GetUnitState(u,UNIT_STATE_LIFE))+", "+R2S(GetUnitState(u,UNIT_STATE_LIFE)/GetUnitState(u,UNIT_STATE_MAX_LIFE)*100)+"%")
  endif
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"Mana, %%")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,R2S(GetUnitState(u,UNIT_STATE_MANA))+", "+R2S(GetUnitState(u,UNIT_STATE_MANA)/RMaxBJ(GetUnitState(u,UNIT_STATE_MAX_MANA),0.01)*100)+"%")
  endif
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"MS")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,R2SW(GetUnitMoveSpeed(u),2,2))
  endif
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"Current Order")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,Func4790(u))
  endif
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"Facing Angle, resist")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,R2SW(GetUnitFacing(u),2,2)+" "+R2SW((1.-Func0904(u))*100,2,2))
  endif
  set j=j+1
  set ZME=MultiboardGetItem(multiboard001,j,0)
  call MultiboardSetItemValue(ZME,"Turn speed")
  set ZME=MultiboardGetItem(multiboard001,j,1)
  if u==null then
    call MultiboardSetItemValue(ZME," - ")
  else
    call MultiboardSetItemValue(ZME,R2SW(GetUnitTurnSpeed(u),2,2))
  endif
  set j=j+1
  if u!=null then
    set k=0
    set i=GetHandleId(u)
    loop
      set ZME=MultiboardGetItem(multiboard001,j+k+1,0)
      call MultiboardSetItemValue(ZME,"Damage instance #"+I2S(k+1))
      set ZME=MultiboardGetItem(multiboard001,j+k+1,1)
      call SaveStr(MHT,i,k,LoadStr(MHT,i,k)+s)
      call MultiboardSetItemValue(ZME,R2S(LoadReal(MHT,i,k))+" by "+LoadStr(MHT,i,k))
      set k=k+1
      exitwhen k>integer031
    endloop
  else
    set k=0
    loop
      set ZME=MultiboardGetItem(multiboard001,j+k+1,1)
      call MultiboardSetItemValue(ZME,"-")
      set k=k+1
      exitwhen k>integer031
    endloop
  endif
  if IsMultiboardDisplayed(multiboard001)==false then
    call MultiboardDisplay(multiboard001,true)
  endif
  set ZME=null
endfunction

function Func4794 takes nothing returns nothing
  local trigger t=CreateTrigger()
  set boolean015=true
  set integer030=10+integer031
  set multiboard001=CreateMultiboardBJ(2,integer030,"Hello")
  call MultiboardDisplay(multiboard001,true)
  set group005=CreateGroup()
  call Func4789()
  call Func4791()
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddAction(t,function Func4793)
  set t=null
endfunction

function Func4795 takes nothing returns nothing
endfunction

function Func4796 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local destructable d=LoadDestructableHandle(HY,h,0)
  call SetDestructableAnimationSpeed(d,1)
  call DestroyTimer(t)
  call FlushChildHashtable(HY,h)
  set d=null
  set t=null
endfunction

function Func4797 takes nothing returns boolean
  return IsPlayerBelongToTeams(GetOwningPlayer(GetFilterUnit()))
endfunction

function Func4798 takes nothing returns nothing
  local timer t=GetExpiredTimer()
  local integer h=GetHandleId(t)
  local destructable d=LoadDestructableHandle(HY,h,0)
  local group g=GetAvailableGroup()
  call GroupEnumUnitsInRange(g,GetWidgetX(d),GetWidgetY(d),175,Condition(function Func4797))
  if FirstOfGroup(g)==null then
    call DestructableRestoreLife(d,GetDestructableMaxLife(d),false)
    call PauseTimer(t)
    call DestroyTimer(t)
    call FlushChildHashtable(HY,h)
  else
    if LoadBoolean(HY,h,0)==false then
      call SaveBoolean(HY,h,0,true)
      call TimerStart(t,1,true,function Func4798)
    endif
  endif
  call KillGroup(g)
  set t=null
  set d=null
endfunction

function Func4799 takes nothing returns nothing
  local timer t=CreateTimer()
  call TimerStart(t,300,false,function Func4798)
  call SaveDestructableHandle(HY,GetHandleId(t),0,GetTriggerDestructable())
  set t=null
endfunction

function Func4800 takes nothing returns boolean
  if GetDestructableX(GetFilterDestructable())==1472 and GetDestructableY(GetFilterDestructable())==-3456 then
    call RemoveDestructable(GetFilterDestructable())
  elseif IsValidTree(GetFilterDestructable())then
    call TriggerRegisterDeathEvent(trigger032,GetFilterDestructable())
  endif
  return false
endfunction

function Func4801 takes unit u returns nothing
  call ShowUnit(u,false)
endfunction

function Func4802 takes nothing returns nothing
  local integer i=1
  local player p
  local unit u
  local real x=GetRectCenterX(ShoppingSquare)
  local real y=GetRectCenterY(ShoppingSquare)
  loop
    set p=Sentinels[i]
    set u=CreateUnit(p,'n12M',x,y,0)
    call SaveUnitHandle(HY,GetHandleId(p),'OptD',u)
    call Func4801(u)
    call BreakDummyCreate(u)
    set p=Scourges[i]
    set u=CreateUnit(p,'n12M',x,y,0)
    call SaveUnitHandle(HY,GetHandleId(p),'OptD',u)
    call Func4801(u)
    call BreakDummyCreate(u)
    set i=i+1
    exitwhen i>5
  endloop
  set u=null
endfunction

function Func4803 takes nothing returns nothing
  local integer i=1
  local unit u
  local integer a
  loop
    set u=CirclesOfPower[i]
    if u!=null then
      set a=GetUnitAbility(u,'A3S2')
      if a>0 then
        call SetAbilityDisabled(a,GetAbilityDisabledCount(a)-1)
        call Func0325(a,GetAbilityCD('A3S2',1)-135.)
      endif
    endif
    set i=i+1
    exitwhen i>11
  endloop
endfunction

function ConvertAndCreateCircleOfPower takes integer i,real x,real y returns unit
  local unit u=CreateUnit(Player(i),'ncop',x,y,270)
  local integer a
  if i<6 then
    call UnitAddAbility(u,'A141')
  else
    call UnitAddAbility(u,'A1WI')
  endif
  call SelectUnitForPlayerSingle(u,Player(i))
  if LocalPlayer==Player(i)then
    call SetUnitVertexColor(u,255,255,255,255)
  else
    call SetUnitVertexColor(u,255,255,255,25)
  endif
  set CirclesOfPower[i]=u
  set ItemSpawnX[i]=GetUnitX(u)
  set ItemSpawnY[i]=GetUnitY(u)
  set a=GetUnitAbility(u,'A3S2')
  if a>0 then
    call SetAbilityDisabled(a,GetAbilityDisabledCount(a)+1)
  endif
  return u
endfunction

function Init_CircleOfPower takes nothing returns nothing
  set SentCircleOfPower1=ConvertAndCreateCircleOfPower(1,-7616,-7360)
  set SentCircleOfPower2=ConvertAndCreateCircleOfPower(2,-7616,-7232)
  set SentCircleOfPower3=ConvertAndCreateCircleOfPower(3,-7616,-7104)
  set SentCircleOfPower4=ConvertAndCreateCircleOfPower(4,-7616,-6976)
  set SentCircleOfPower5=ConvertAndCreateCircleOfPower(5,-7616,-6848)
  set ScrgCircleOfPower1=ConvertAndCreateCircleOfPower(7,7232,6376)
  set ScrgCircleOfPower2=ConvertAndCreateCircleOfPower(8,7104,6376)
  set ScrgCircleOfPower3=ConvertAndCreateCircleOfPower(9,6976,6376)
  set ScrgCircleOfPower4=ConvertAndCreateCircleOfPower(10,6848,6376)
  set ScrgCircleOfPower5=ConvertAndCreateCircleOfPower(11,6720,6376)
endfunction

function Init_Aghanim takes nothing returns nothing
  local string s="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B8'
  set Item_Real[Item_Counter]='I0AY'
  set Item_Mute[Item_Counter]='I00B'
  set Item_Icon[Item_Counter]=s
  set Item_Cooldown[Item_Counter]=60
  set Aghanim_Basic=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03K'
  set Aghanim_Scepter=SaveAgh(Item_Counter)
  call SaveInteger(HY,'ITDB',Aghanim_Scepter,Aghanim_Basic)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AZ'
  set Item_Real[Item_Counter]='I011'
  set Item_Mute[Item_Counter]='I0EY'
  set Item_Icon[Item_Counter]=s
  set Item_Cooldown[Item_Counter]=60
  set Aghanim_Furion=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00F'
  set Item_Real[Item_Counter]='I00D'
  set Item_Mute[Item_Counter]='I0EZ'
  set Item_Icon[Item_Counter]=s
  set Aghanim_KOTL=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I018'
  set Item_Real[Item_Counter]='I009'
  set Item_Mute[Item_Counter]='I0F0'
  set Item_Icon[Item_Counter]=s
  set Aghanim_Leshrac=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I019'
  set Item_Real[Item_Counter]='I005'
  set Item_Mute[Item_Counter]='I0F6'
  set Item_Icon[Item_Counter]=s
  set Aghanim_Lich=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I01A'
  set Item_Real[Item_Counter]='I00G'
  set Item_Mute[Item_Counter]='I0F1'
  set Item_Icon[Item_Counter]=s
  set Aghanim_Lina=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I01B'
  set Item_Real[Item_Counter]='I004'
  set Item_Mute[Item_Counter]='I0F2'
  set Item_Icon[Item_Counter]=s
  set Aghanim_Lion=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I01H'
  set Item_Real[Item_Counter]='I003'
  set Item_Mute[Item_Counter]='I0F3'
  set Item_Icon[Item_Counter]=s
  set Aghanim_Doom=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I01I'
  set Item_Real[Item_Counter]='I002'
  set Item_Mute[Item_Counter]='I0F5'
  set Item_Icon[Item_Counter]=s
  set integer371=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02K'
  set Item_Real[Item_Counter]='I001'
  set Item_Mute[Item_Counter]='I0F4'
  set Item_Icon[Item_Counter]=s
  set integer372=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02L'
  set Item_Real[Item_Counter]='I00I'
  set Item_Mute[Item_Counter]='I0FE'
  set Item_Icon[Item_Counter]=s
  set integer373=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B2'
  set Item_Real[Item_Counter]='I00H'
  set Item_Mute[Item_Counter]='I0F9'
  set Item_Icon[Item_Counter]=s
  set integer375=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B3'
  set Item_Real[Item_Counter]='I00P'
  set Item_Mute[Item_Counter]='I0FA'
  set Item_Icon[Item_Counter]=s
  set integer376=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B4'
  set Item_Real[Item_Counter]='I00U'
  set Item_Mute[Item_Counter]='I0F7'
  set Item_Icon[Item_Counter]=s
  set integer377=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B7'
  set Item_Real[Item_Counter]='I000'
  set Item_Mute[Item_Counter]='I0FD'
  set Item_Icon[Item_Counter]=s
  set integer378=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B6'
  set Item_Real[Item_Counter]='I016'
  set Item_Mute[Item_Counter]='I0FC'
  set Item_Icon[Item_Counter]=s
  set integer379=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B5'
  set Item_Real[Item_Counter]='I017'
  set Item_Mute[Item_Counter]='I0FB'
  set Item_Icon[Item_Counter]=s
  set integer380=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B9'
  set Item_Real[Item_Counter]='I00O'
  set Item_Mute[Item_Counter]='I0F8'
  set Item_Icon[Item_Counter]=s
  set integer381=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0IV'
  set Item_Real[Item_Counter]='I0IU'
  set Item_Mute[Item_Counter]='I0I9'
  set Item_Icon[Item_Counter]=s
  set integer382=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0IW'
  set Item_Real[Item_Counter]='I0IS'
  set Item_Mute[Item_Counter]='I0II'
  set Item_Icon[Item_Counter]=s
  set integer383=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0IX'
  set Item_Real[Item_Counter]='I0IR'
  set Item_Mute[Item_Counter]='I0IA'
  set Item_Icon[Item_Counter]=s
  set integer384=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0IZ'
  set Item_Real[Item_Counter]='I0IK'
  set Item_Mute[Item_Counter]='I0IG'
  set Item_Icon[Item_Counter]=s
  set integer385=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0J0'
  set Item_Real[Item_Counter]='I0IL'
  set Item_Mute[Item_Counter]='I0IF'
  set Item_Icon[Item_Counter]=s
  set integer386=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0J1'
  set Item_Real[Item_Counter]='I0IM'
  set Item_Mute[Item_Counter]='I0IE'
  set Item_Icon[Item_Counter]=s
  set integer387=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0J2'
  set Item_Real[Item_Counter]='I0IP'
  set Item_Mute[Item_Counter]='I0ID'
  set Item_Icon[Item_Counter]=s
  set integer388=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0J3'
  set Item_Real[Item_Counter]='I0IO'
  set Item_Mute[Item_Counter]='I0IC'
  set Item_Icon[Item_Counter]=s
  set integer389=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0J4'
  set Item_Real[Item_Counter]='I0IN'
  set Item_Mute[Item_Counter]='I0IB'
  set Item_Icon[Item_Counter]=s
  set integer390=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0I6'
  set Item_Real[Item_Counter]='I0I7'
  set Item_Mute[Item_Counter]='I0I8'
  set Item_Icon[Item_Counter]=s
  set integer391=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0JZ'
  set Item_Real[Item_Counter]='I0JS'
  set Item_Mute[Item_Counter]='I0JR'
  set Item_Icon[Item_Counter]=s
  set integer392=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0K0'
  set Item_Real[Item_Counter]='I0JT'
  set Item_Mute[Item_Counter]='I0JL'
  set Item_Icon[Item_Counter]=s
  set integer393=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0K1'
  set Item_Real[Item_Counter]='I0JU'
  set Item_Mute[Item_Counter]='I0JM'
  set Item_Icon[Item_Counter]=s
  set integer394=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0K2'
  set Item_Real[Item_Counter]='I0JW'
  set Item_Mute[Item_Counter]='I0JN'
  set Item_Icon[Item_Counter]=s
  set integer395=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0K3'
  set Item_Real[Item_Counter]='I0JV'
  set Item_Mute[Item_Counter]='I0JQ'
  set Item_Icon[Item_Counter]=s
  set integer396=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0K4'
  set Item_Real[Item_Counter]='I0JY'
  set Item_Mute[Item_Counter]='I0JP'
  set Item_Icon[Item_Counter]=s
  set integer397=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0K5'
  set Item_Real[Item_Counter]='I0JX'
  set Item_Mute[Item_Counter]='I0JO'
  set Item_Icon[Item_Counter]=s
  set integer398=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0KI'
  set Item_Real[Item_Counter]='I0KH'
  set Item_Mute[Item_Counter]='I0KJ'
  set Item_Icon[Item_Counter]=s
  set integer399=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0L4'
  set Item_Real[Item_Counter]='I0L5'
  set Item_Mute[Item_Counter]='I0L8'
  set Item_Icon[Item_Counter]=s
  set integer374=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0L3'
  set Item_Real[Item_Counter]='I0L0'
  set Item_Mute[Item_Counter]='I0L9'
  set Item_Icon[Item_Counter]=s
  set integer400=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0L2'
  set Item_Real[Item_Counter]='I0L7'
  set Item_Mute[Item_Counter]='I0LA'
  set Item_Icon[Item_Counter]=s
  set integer401=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0LU'
  set Item_Real[Item_Counter]='I0LV'
  set Item_Mute[Item_Counter]='I0LW'
  set Item_Icon[Item_Counter]=s
  set integer402=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0M1'
  set Item_Real[Item_Counter]='I0M0'
  set Item_Mute[Item_Counter]='I0M2'
  set Item_Icon[Item_Counter]=s
  set integer403=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0M5'
  set Item_Real[Item_Counter]='I0M4'
  set Item_Mute[Item_Counter]='I0M3'
  set Item_Icon[Item_Counter]=s
  set integer404=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0M6'
  set Item_Real[Item_Counter]='I0M7'
  set Item_Mute[Item_Counter]='I0M8'
  set Item_Icon[Item_Counter]=s
  set integer405=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MF'
  set Item_Real[Item_Counter]='I0MG'
  set Item_Mute[Item_Counter]='I0MH'
  set Item_Icon[Item_Counter]=s
  set integer406=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MM'
  set Item_Real[Item_Counter]='I0ML'
  set Item_Mute[Item_Counter]='I0MN'
  set Item_Icon[Item_Counter]=s
  set integer407=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MO'
  set Item_Real[Item_Counter]='I0MP'
  set Item_Mute[Item_Counter]='I0MQ'
  set Item_Icon[Item_Counter]=s
  set integer408=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NQ'
  set Item_Real[Item_Counter]='I0NR'
  set Item_Mute[Item_Counter]='I0NS'
  set Item_Icon[Item_Counter]=s
  set integer409=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NT'
  set Item_Real[Item_Counter]='I0NU'
  set Item_Mute[Item_Counter]='I0NV'
  set Item_Icon[Item_Counter]=s
  set integer410=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NW'
  set Item_Real[Item_Counter]='I0NX'
  set Item_Mute[Item_Counter]='I0NY'
  set Item_Icon[Item_Counter]=s
  set integer411=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NZ'
  set Item_Real[Item_Counter]='I0O0'
  set Item_Mute[Item_Counter]='I0O1'
  set Item_Icon[Item_Counter]=s
  set integer412=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OR'
  set Item_Real[Item_Counter]='I0OS'
  set Item_Mute[Item_Counter]='I0OT'
  set Item_Icon[Item_Counter]=s
  set integer413=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0PG'
  set Item_Real[Item_Counter]='I0PH'
  set Item_Mute[Item_Counter]='I0PI'
  set Item_Icon[Item_Counter]=s
  set integer414=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0PJ'
  set Item_Real[Item_Counter]='I0PK'
  set Item_Mute[Item_Counter]='I0PL'
  set Item_Icon[Item_Counter]=s
  set integer415=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0PP'
  set Item_Real[Item_Counter]='I0PQ'
  set Item_Mute[Item_Counter]='I0PR'
  set Item_Icon[Item_Counter]=s
  set integer416=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0PS'
  set Item_Real[Item_Counter]='I0PT'
  set Item_Mute[Item_Counter]='I0PU'
  set Item_Icon[Item_Counter]=s
  set integer417=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0PV'
  set Item_Real[Item_Counter]='I0PW'
  set Item_Mute[Item_Counter]='I0PX'
  set Item_Icon[Item_Counter]=s
  set integer418=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0Q0'
  set Item_Real[Item_Counter]='I0Q2'
  set Item_Mute[Item_Counter]='I0Q4'
  set Item_Icon[Item_Counter]=s
  set integer420=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0Q1'
  set Item_Real[Item_Counter]='I0Q3'
  set Item_Mute[Item_Counter]='I0Q5'
  set Item_Icon[Item_Counter]=s
  set integer419=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0QL'
  set Item_Real[Item_Counter]='I0QM'
  set Item_Mute[Item_Counter]='I0QN'
  set Item_Icon[Item_Counter]=s
  set integer421=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0QO'
  set Item_Real[Item_Counter]='I0QP'
  set Item_Mute[Item_Counter]='I0QQ'
  set Item_Icon[Item_Counter]=s
  set integer422=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0R1'
  set Item_Real[Item_Counter]='I0R2'
  set Item_Mute[Item_Counter]='I0R3'
  set Item_Icon[Item_Counter]=s
  set integer056=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0R4'
  set Item_Real[Item_Counter]='I0R5'
  set Item_Mute[Item_Counter]='I0R6'
  set Item_Icon[Item_Counter]=s
  set integer061=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0R7'
  set Item_Real[Item_Counter]='I0R8'
  set Item_Mute[Item_Counter]='I0R9'
  set Item_Icon[Item_Counter]=s
  set integer062=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0RA'
  set Item_Real[Item_Counter]='I0RB'
  set Item_Mute[Item_Counter]='I0RC'
  set Item_Icon[Item_Counter]=s
  set integer060=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0RD'
  set Item_Real[Item_Counter]='I0RE'
  set Item_Mute[Item_Counter]='I0RF'
  set Item_Icon[Item_Counter]=s
  set integer057=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0RG'
  set Item_Real[Item_Counter]='I0RH'
  set Item_Mute[Item_Counter]='I0RI'
  set Item_Icon[Item_Counter]=s
  set integer058=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0RU'
  set Item_Real[Item_Counter]='I0RV'
  set Item_Mute[Item_Counter]='I0RW'
  set Item_Icon[Item_Counter]=s
  set integer423=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0RX'
  set Item_Real[Item_Counter]='I0RY'
  set Item_Mute[Item_Counter]='I0RZ'
  set Item_Icon[Item_Counter]=s
  set integer424=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0S0'
  set Item_Real[Item_Counter]='I0S1'
  set Item_Mute[Item_Counter]='I0S2'
  set Item_Icon[Item_Counter]=s
  set integer425=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0S3'
  set Item_Real[Item_Counter]='I0S4'
  set Item_Mute[Item_Counter]='I0S5'
  set Item_Icon[Item_Counter]=s
  set integer426=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0TA'
  set Item_Real[Item_Counter]='I0TB'
  set Item_Mute[Item_Counter]='I0TC'
  set Item_Icon[Item_Counter]=s
  set integer427=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0TD'
  set Item_Real[Item_Counter]='I0TE'
  set Item_Mute[Item_Counter]='I0TF'
  set Item_Icon[Item_Counter]=s
  set integer428=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0TG'
  set Item_Real[Item_Counter]='I0TH'
  set Item_Mute[Item_Counter]='I0TI'
  set Item_Icon[Item_Counter]=s
  set integer429=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0TJ'
  set Item_Real[Item_Counter]='I0TK'
  set Item_Mute[Item_Counter]='I0TL'
  set Item_Icon[Item_Counter]=s
  set integer430=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0TM'
  set Item_Real[Item_Counter]='I0TN'
  set Item_Mute[Item_Counter]='I0TO'
  set Item_Icon[Item_Counter]=s
  set integer431=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0TP'
  set Item_Real[Item_Counter]='I0TQ'
  set Item_Mute[Item_Counter]='I0TR'
  set Item_Icon[Item_Counter]=s
  set integer059=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0TV'
  set Item_Real[Item_Counter]='I0TW'
  set Item_Mute[Item_Counter]='I0TX'
  set Item_Icon[Item_Counter]=s
  set integer432=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UO'
  set Item_Real[Item_Counter]='I0UP'
  set Item_Mute[Item_Counter]='I0UQ'
  set Item_Icon[Item_Counter]=s
  set integer051=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UR'
  set Item_Real[Item_Counter]='I0US'
  set Item_Mute[Item_Counter]='I0UT'
  set Item_Icon[Item_Counter]=s
  set integer052=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UU'
  set Item_Real[Item_Counter]='I0UV'
  set Item_Mute[Item_Counter]='I0UW'
  set Item_Icon[Item_Counter]=s
  set integer054=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UX'
  set Item_Real[Item_Counter]='I0UY'
  set Item_Mute[Item_Counter]='I0UZ'
  set Item_Icon[Item_Counter]=s
  set integer053=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0V0'
  set Item_Real[Item_Counter]='I0V1'
  set Item_Mute[Item_Counter]='I0V2'
  set Item_Icon[Item_Counter]=s
  set integer055=SaveAgh(Item_Counter)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0W3'
  set Item_Real[Item_Counter]='I0W4'
  set Item_Mute[Item_Counter]='I0W5'
  set Item_Icon[Item_Counter]=s
  set integer063=SaveAgh(Item_Counter)
endfunction

function Init_Items takes nothing returns nothing
  local string s="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0FF'
  set Item_Real[Item_Counter]='I0FG'
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02Q'
  set Item_Real[Item_Counter]='I02O'
  set Item_SellerUnit[Item_Counter]='h011'
  set Item_Mute[Item_Counter]='I00A'
  set TemporaryItem=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02S'
  set Item_Real[Item_Counter]='I02P'
  set Item_SellerUnit[Item_Counter]='h012'
  set Item_Mute[Item_Counter]='I0CA'
  set integer122=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02N'
  set Item_Real[Item_Counter]='I02R'
  set Item_SellerUnit[Item_Counter]='h013'
  set Item_Mute[Item_Counter]='I0CS'
  set integer123=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02X'
  set Item_Real[Item_Counter]='I02Y'
  set Item_SellerUnit[Item_Counter]='h015'
  set Item_Mute[Item_Counter]='I0D4'
  set integer124=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02Z'
  set Item_Real[Item_Counter]='I043'
  set Item_SellerUnit[Item_Counter]='h016'
  set Item_Mute[Item_Counter]='I0CV'
  set integer125=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I030'
  set Item_Real[Item_Counter]='I044'
  set Item_SellerUnit[Item_Counter]='h017'
  set Item_Mute[Item_Counter]='I0D2'
  set integer126=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I031'
  set Item_Real[Item_Counter]='I045'
  set Item_SellerUnit[Item_Counter]='h018'
  set Item_Mute[Item_Counter]='I0D5'
  set integer127=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I032'
  set Item_Real[Item_Counter]='I046'
  set Item_SellerUnit[Item_Counter]='h019'
  set Item_Mute[Item_Counter]='I0CZ'
  set integer128=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I033'
  set Item_Real[Item_Counter]='I047'
  set Item_SellerUnit[Item_Counter]='h01A'
  set Item_Mute[Item_Counter]='I0D7'
  set integer129=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I034'
  set Item_Real[Item_Counter]='I048'
  set Item_SellerUnit[Item_Counter]='h01B'
  set Item_Mute[Item_Counter]='I0CX'
  set integer130=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I035'
  set Item_Real[Item_Counter]='I049'
  set Item_SellerUnit[Item_Counter]='h01C'
  set Item_Mute[Item_Counter]='I0CI'
  set integer131=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I036'
  set Item_Real[Item_Counter]='I04A'
  set Item_SellerUnit[Item_Counter]='h01D'
  set Item_Mute[Item_Counter]='I0CH'
  set integer132=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I037'
  set Item_Real[Item_Counter]='I04B'
  set Item_SellerUnit[Item_Counter]='h01E'
  set Item_Mute[Item_Counter]='I0CR'
  set integer133=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I038'
  set Item_Real[Item_Counter]='I04C'
  set Item_SellerUnit[Item_Counter]='h01F'
  set Item_Mute[Item_Counter]='I0CJ'
  set integer134=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I039'
  set Item_Real[Item_Counter]='I04D'
  set Item_SellerUnit[Item_Counter]='h01G'
  set Item_Mute[Item_Counter]='I0DG'
  set integer135=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MS'
  set Item_Real[Item_Counter]='I0MR'
  set Item_Mute[Item_Counter]='I0MT'
  set integer136=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03B'
  set Item_Real[Item_Counter]='I04E'
  set Item_SellerUnit[Item_Counter]='h01H'
  set Item_Mute[Item_Counter]='I0DA'
  set integer137=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03C'
  set Item_Real[Item_Counter]='I04F'
  set Item_SellerUnit[Item_Counter]='h01I'
  set Item_Mute[Item_Counter]='I0CQ'
  set integer138=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03D'
  set Item_Real[Item_Counter]='I04G'
  set Item_SellerUnit[Item_Counter]='h01J'
  set Item_Mute[Item_Counter]='I0CU'
  set integer139=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03E'
  set Item_Real[Item_Counter]='I04H'
  set Item_SellerUnit[Item_Counter]='h01K'
  set Item_Mute[Item_Counter]='I0C7'
  set Item_Cooldown[Item_Counter]=12
  set KelensDagger=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03E'
  set Item_Real[Item_Counter]='I04I'
  set Item_SellerUnit[Item_Counter]='h01K'
  set Item_Mute[Item_Counter]='I0DH'
  set KelensDaggerDisabled=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03F'
  set Item_Real[Item_Counter]='I04J'
  set Item_SellerUnit[Item_Counter]='h01L'
  set Item_Mute[Item_Counter]='I0CM'
  set integer142=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03G'
  set Item_Real[Item_Counter]='I04K'
  set Item_SellerUnit[Item_Counter]='h01M'
  set Item_Mute[Item_Counter]='I0CD'
  set integer143=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03H'
  set Item_Real[Item_Counter]='I04L'
  set Item_SellerUnit[Item_Counter]='h01N'
  set Item_Mute[Item_Counter]='I0CG'
  set integer144=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03I'
  set Item_Real[Item_Counter]='I04M'
  set Item_SellerUnit[Item_Counter]='h01O'
  set Item_Mute[Item_Counter]='I0D0'
  set integer145=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03J'
  set Item_Real[Item_Counter]='I04N'
  set Item_SellerUnit[Item_Counter]='h01P'
  set Item_Mute[Item_Counter]='I0CN'
  set integer146=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03K'
  set Item_Real[Item_Counter]='I04O'
  set Item_SellerUnit[Item_Counter]='h01Q'
  set Item_Mute[Item_Counter]='I0D8'
  set integer147=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03L'
  set Item_Real[Item_Counter]='I04P'
  set Item_SellerUnit[Item_Counter]='h01R'
  set Item_Mute[Item_Counter]='I0CE'
  set integer148=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03M'
  set Item_Real[Item_Counter]='I04Q'
  set Item_SellerUnit[Item_Counter]='h01S'
  set Item_Mute[Item_Counter]='I0DB'
  set integer149=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03N'
  set Item_Real[Item_Counter]='I04R'
  set Item_SellerUnit[Item_Counter]='h01T'
  set Item_Mute[Item_Counter]='I0CL'
  set integer150=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03P'
  set Item_Real[Item_Counter]='I04S'
  set Item_SellerUnit[Item_Counter]='h01U'
  set Item_Mute[Item_Counter]='I0CY'
  set integer151=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03Q'
  set Item_Real[Item_Counter]='I04T'
  set Item_SellerUnit[Item_Counter]='h01V'
  set Item_Mute[Item_Counter]='I0DI'
  set integer152=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03R'
  set Item_Real[Item_Counter]='I04U'
  set Item_SellerUnit[Item_Counter]='h01W'
  set Item_Mute[Item_Counter]='I0CW'
  set integer153=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03S'
  set Item_Real[Item_Counter]='I04V'
  set Item_SellerUnit[Item_Counter]='h01X'
  set Item_Mute[Item_Counter]='I0DJ'
  set integer154=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03T'
  set Item_Real[Item_Counter]='I04W'
  set Item_SellerUnit[Item_Counter]='h01Y'
  set Item_Mute[Item_Counter]='I0CP'
  set integer155=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03U'
  set Item_Real[Item_Counter]='I04X'
  set Item_SellerUnit[Item_Counter]='h01Z'
  set Item_Mute[Item_Counter]='I0CC'
  set integer156=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03V'
  set Item_Real[Item_Counter]='I04Y'
  set Item_SellerUnit[Item_Counter]='h020'
  set Item_Mute[Item_Counter]='I0C5'
  set integer157=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03W'
  set Item_Real[Item_Counter]='I04Z'
  set Item_SellerUnit[Item_Counter]='h021'
  set Item_Mute[Item_Counter]='I0DK'
  set integer158=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03X'
  set Item_Real[Item_Counter]='I050'
  set Item_SellerUnit[Item_Counter]='h022'
  set Item_Mute[Item_Counter]='I0D1'
  set integer159=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03A'
  set Item_Real[Item_Counter]='I051'
  set Item_SellerUnit[Item_Counter]='h023'
  set Item_Mute[Item_Counter]='I0D9'
  set integer160=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0KB'
  set Item_Real[Item_Counter]='I0KA'
  set Item_Mute[Item_Counter]='I0KC'
  set integer161=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03Y'
  set Item_Real[Item_Counter]='I052'
  set Item_SellerUnit[Item_Counter]='h024'
  set Item_Mute[Item_Counter]='I0C9'
  set integer162=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03Z'
  set Item_Real[Item_Counter]='I053'
  set Item_SellerUnit[Item_Counter]='h025'
  set Item_Mute[Item_Counter]='I0CK'
  set integer163=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I040'
  set Item_Real[Item_Counter]='I054'
  set Item_SellerUnit[Item_Counter]='h026'
  set Item_Mute[Item_Counter]='I0DL'
  set integer164=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I041'
  set Item_Real[Item_Counter]='I055'
  set Item_SellerUnit[Item_Counter]='h027'
  set Item_Mute[Item_Counter]='I0D6'
  set integer165=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00L'
  set Item_Real[Item_Counter]='I0AV'
  set integer166=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05E'
  set Item_Real[Item_Counter]='I0AM'
  set Item_Mute[Item_Counter]='I0DN'
  set integer167=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AU'
  set Item_Real[Item_Counter]='I0AN'
  set Item_Mute[Item_Counter]='I0DO'
  set integer168=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AS'
  set Item_Real[Item_Counter]='I0AO'
  set Item_Mute[Item_Counter]='I0DP'
  set integer169=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AT'
  set Item_Real[Item_Counter]='I0AP'
  set Item_SellerUnit[Item_Counter]='h02B'
  set Item_Mute[Item_Counter]='I0DQ'
  set integer170=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0GW'
  set Item_Real[Item_Counter]='I0GY'
  set Item_Mute[Item_Counter]='I0H3'
  set integer175=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0H2'
  set Item_Real[Item_Counter]='I0GX'
  set Item_Mute[Item_Counter]='I0DR'
  set integer174=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0GV'
  set Item_Real[Item_Counter]='I0H1'
  set Item_Mute[Item_Counter]='I0H4'
  set integer173=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0QU'
  set Item_Real[Item_Counter]='I0QS'
  set Item_Mute[Item_Counter]='I0QT'
  set integer069=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VB'
  set Item_Real[Item_Counter]='I0VA'
  set Item_Mute[Item_Counter]='I0VC'
  set integer070=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0QU'
  set Item_Real[Item_Counter]='I0QS'
  set Item_Mute[Item_Counter]='I0QT'
  set integer071=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AR'
  set Item_Real[Item_Counter]='I0H0'
  set Item_Mute[Item_Counter]='I0H6'
  set integer172=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AQ'
  set Item_Real[Item_Counter]='I0GZ'
  set Item_Mute[Item_Counter]='I0H5'
  set integer171=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0GD'
  set Item_Real[Item_Counter]='I0GC'
  set Item_SellerUnit[Item_Counter]='h074'
  set Item_Mute[Item_Counter]='I0GE'
  set Item_Cooldown[Item_Counter]=17
  set integer176=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0HC'
  set Item_Real[Item_Counter]='I0HB'
  set Item_Mute[Item_Counter]='I0HA'
  set Item_Cooldown[Item_Counter]=17
  set integer300=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h07S'
  call SaveInteger(HY,'ITDB',Item_Counter,integer300)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0HT'
  set Item_Real[Item_Counter]='I0HR'
  set Item_SellerUnit[Item_Counter]='h07W'
  set Item_Mute[Item_Counter]='I0HV'
  set Item_Cooldown[Item_Counter]=4
  set integer177=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0J7'
  set Item_Real[Item_Counter]='I0J6'
  set Item_SellerUnit[Item_Counter]='h083'
  set Item_Mute[Item_Counter]='I0J8'
  set TalismanOfEvasion=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0JJ'
  set Item_Real[Item_Counter]='I0JI'
  set Item_SellerUnit[Item_Counter]='h087'
  set Item_Mute[Item_Counter]='I0JK'
  set Item_Cooldown[Item_Counter]=25
  set integer305=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0P9'
  set Item_Real[Item_Counter]='I0PB'
  set Item_SellerUnit[Item_Counter]='h0EI'
  set Item_Mute[Item_Counter]='I0PA'
  set integer314=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MA'
  set Item_Real[Item_Counter]='I0M9'
  set Item_SellerUnit[Item_Counter]='h0CM'
  set Item_Mute[Item_Counter]='I0MB'
  set integer119=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MD'
  set Item_Real[Item_Counter]='I0ME'
  set Item_Mute[Item_Counter]='I0MC'
  set integer120=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I057'
  set Item_Real[Item_Counter]='I05C'
  set Item_SellerUnit[Item_Counter]='h02A'
  set Item_Mute[Item_Counter]='I0Q8'
  set integer196=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0Q7'
  set Item_Real[Item_Counter]='I0Q6'
  set Item_Mute[Item_Counter]='I0Q9'
  set integer197=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VV'
  set Item_Real[Item_Counter]='I0VW'
  set Item_SellerUnit[Item_Counter]='n137'
  set integer012=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I042'
  set Item_Real[Item_Counter]='I05D'
  set Item_SellerUnit[Item_Counter]='h028'
  set Item_Mute[Item_Counter]='I0PY'
  set integer194=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I056'
  set Item_Real[Item_Counter]='I05F'
  set Item_SellerUnit[Item_Counter]='h029'
  set Item_Mute[Item_Counter]='I0PZ'
  set integer195=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I058'
  set Item_Real[Item_Counter]='I05G'
  set Item_SellerUnit[Item_Counter]='h02C'
  set integer198=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I059'
  set Item_Real[Item_Counter]='I05H'
  set Item_SellerUnit[Item_Counter]='h02D'
  set integer199=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I058'
  set Item_Real[Item_Counter]='I0SX'
  set MixedWardsOrbs=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I059'
  set Item_Real[Item_Counter]='I0SY'
  set MixedWardsSentry=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05A'
  set Item_Real[Item_Counter]='I05I'
  set Item_SellerUnit[Item_Counter]='h02E'
  set integer202=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05B'
  set Item_Real[Item_Counter]='I05J'
  set Item_SellerUnit[Item_Counter]='h02F'
  set integer203=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0B0'
  set Item_Real[Item_Counter]='I0B1'
  set Cheese=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0U3'
  set Item_Real[Item_Counter]='I0U4'
  set integer205=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0GI'
  set Item_Real[Item_Counter]='I0GH'
  set Item_SellerUnit[Item_Counter]='h076'
  set Item_Cooldown[Item_Counter]=60
  set integer206=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NF'
  set Item_Real[Item_Counter]='I0NG'
  set Item_SellerUnit[Item_Counter]='h0D3'
  set Item_Cooldown[Item_Counter]=90
  set integer207=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VX'
  set Item_Real[Item_Counter]='I0VY'
  set Item_SellerUnit[Item_Counter]='n138'
  set Item_Mute[Item_Counter]='I0VZ'
  set integer013=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0W0'
  set Item_Real[Item_Counter]='I0W1'
  set Item_Mute[Item_Counter]='I0W2'
  set integer014=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I061'
  set Item_Real[Item_Counter]='I062'
  set Item_Mute[Item_Counter]='I01J'
  set integer208=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I064'
  set Item_Real[Item_Counter]='I063'
  set Item_Mute[Item_Counter]='I01K'
  set integer209=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I065'
  set Item_Real[Item_Counter]='I066'
  set Item_Mute[Item_Counter]='I01L'
  set Item_Cooldown[Item_Counter]=25
  set integer210=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I068'
  set Item_Real[Item_Counter]='I067'
  set Item_Mute[Item_Counter]='I01M'
  set integer211=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I069'
  set Item_Real[Item_Counter]='I06A'
  set Item_Mute[Item_Counter]='I0C6'
  set integer212=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06C'
  set Item_Real[Item_Counter]='I06B'
  set Item_Mute[Item_Counter]='I01P'
  set Item_Cooldown[Item_Counter]=45
  set integer213=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SZ'
  set Item_Real[Item_Counter]='I0T0'
  set Item_Mute[Item_Counter]='I0T1'
  set Item_Cooldown[Item_Counter]=45
  set integer214=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03O'
  set Item_Real[Item_Counter]='I02T'
  set Item_Mute[Item_Counter]='I01R'
  set integer215=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02U'
  set Item_Real[Item_Counter]='I05Y'
  set Item_Mute[Item_Counter]='I01Q'
  set integer216=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I060'
  set Item_Real[Item_Counter]='I05Z'
  set Item_Mute[Item_Counter]='I01S'
  set integer217=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06E'
  set Item_Real[Item_Counter]='I06D'
  set Item_Mute[Item_Counter]='I01T'
  set Item_Cooldown[Item_Counter]=100
  set integer218=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NO'
  set Item_Real[Item_Counter]='I0NN'
  set Item_Mute[Item_Counter]='I0NP'
  set Item_Cooldown[Item_Counter]=100
  set integer219=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06G'
  set Item_Real[Item_Counter]='I06F'
  set Item_Mute[Item_Counter]='I01U'
  set integer220=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06I'
  set Item_Real[Item_Counter]='I06H'
  set Item_Mute[Item_Counter]='I01V'
  set integer221=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06K'
  set Item_Real[Item_Counter]='I06J'
  set Item_Mute[Item_Counter]='I01W'
  set integer222=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06M'
  set Item_Real[Item_Counter]='I06L'
  set Item_Mute[Item_Counter]='I01X'
  set integer223=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08F'
  set Item_Real[Item_Counter]='I08G'
  set Item_Mute[Item_Counter]='I01Y'
  set integer224=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08I'
  set Item_Real[Item_Counter]='I08H'
  set Item_Mute[Item_Counter]='I01Z'
  set integer225=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08J'
  set Item_Real[Item_Counter]='I08K'
  set Item_Mute[Item_Counter]='I020'
  set integer226=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08M'
  set Item_Real[Item_Counter]='I08L'
  set Item_Mute[Item_Counter]='I0C8'
  set integer227=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08N'
  set Item_Real[Item_Counter]='I08O'
  set Item_Mute[Item_Counter]='I021'
  set Item_Cooldown[Item_Counter]=13
  set integer228=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08Q'
  set Item_Real[Item_Counter]='I08P'
  set Item_Mute[Item_Counter]='I022'
  set integer229=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08S'
  set Item_Real[Item_Counter]='I08R'
  set Item_Mute[Item_Counter]='I023'
  set integer230=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0JB'
  set Item_Real[Item_Counter]='I0J9'
  set Item_Mute[Item_Counter]='I0JD'
  set integer231=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0EW'
  set Item_Real[Item_Counter]='I0EV'
  set Item_Mute[Item_Counter]='I0EX'
  set integer232=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0JC'
  set Item_Real[Item_Counter]='I0JA'
  set Item_Mute[Item_Counter]='I0JE'
  set integer233=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08U'
  set Item_Real[Item_Counter]='I08T'
  set Item_Mute[Item_Counter]='I024'
  set Item_Cooldown[Item_Counter]=60
  set integer234=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08W'
  set Item_Real[Item_Counter]='I08V'
  set Item_Mute[Item_Counter]='I0CO'
  set integer235=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I08X'
  set Item_Real[Item_Counter]='I08Y'
  set Item_Mute[Item_Counter]='I025'
  set Item_Cooldown[Item_Counter]=22
  set integer236=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I090'
  set Item_Real[Item_Counter]='I08Z'
  set Item_Mute[Item_Counter]='I026'
  set Item_Cooldown[Item_Counter]=23
  set integer237=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I092'
  set Item_Real[Item_Counter]='I091'
  set Item_Mute[Item_Counter]='I027'
  set integer238=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I094'
  set Item_Real[Item_Counter]='I093'
  set Item_Mute[Item_Counter]='I028'
  set Item_Cooldown[Item_Counter]=45
  set integer239=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I096'
  set Item_Real[Item_Counter]='I095'
  set Item_Mute[Item_Counter]='I029'
  set integer240=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I098'
  set Item_Real[Item_Counter]='I097'
  set Item_Mute[Item_Counter]='I02A'
  set integer241=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09A'
  set Item_Real[Item_Counter]='I099'
  set Item_Mute[Item_Counter]='I02B'
  set integer242=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09B'
  set Item_Real[Item_Counter]='I09C'
  set Item_Mute[Item_Counter]='I02C'
  set integer243=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0G2'
  set Item_Real[Item_Counter]='I0FZ'
  set Item_Mute[Item_Counter]='I0G8'
  set Item_Cooldown[Item_Counter]=80
  set integer244=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0G6'
  set Item_Real[Item_Counter]='I0G0'
  set Item_Mute[Item_Counter]='I0G9'
  set Item_Cooldown[Item_Counter]=75
  set integer245=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09E'
  set Item_Real[Item_Counter]='I0FY'
  set Item_Mute[Item_Counter]='I0G7'
  set Item_Cooldown[Item_Counter]=70
  set integer246=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0G5'
  set Item_Real[Item_Counter]='I0FS'
  set Item_Mute[Item_Counter]='I02D'
  set Item_Cooldown[Item_Counter]=65
  set integer247=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0G3'
  set Item_Real[Item_Counter]='I09D'
  set Item_Mute[Item_Counter]='I0GB'
  set Item_Cooldown[Item_Counter]=60
  set integer248=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0G4'
  set Item_Real[Item_Counter]='I0G1'
  set Item_Mute[Item_Counter]='I0GA'
  set Item_Cooldown[Item_Counter]=55
  set integer249=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AX'
  set Item_Real[Item_Counter]='I0AW'
  set Aegis=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0U1'
  set Item_Real[Item_Counter]='I0U2'
  set integer251=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09G'
  set Item_Real[Item_Counter]='I09F'
  set Item_Mute[Item_Counter]='I02E'
  set Item_Cooldown[Item_Counter]=35
  set integer252=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MV'
  set Item_Real[Item_Counter]='I0MU'
  set Item_Mute[Item_Counter]='I0MW'
  set Item_Cooldown[Item_Counter]=50
  set integer253=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09I'
  set Item_Real[Item_Counter]='I09H'
  set Item_Mute[Item_Counter]='I02F'
  set Item_Cooldown[Item_Counter]=22
  set integer254=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h037'
  call SaveInteger(HY,'ITDB',Item_Counter,integer254)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09K'
  set Item_Real[Item_Counter]='I09M'
  set Item_Mute[Item_Counter]='I01G'
  set Item_Cooldown[Item_Counter]=40
  set integer255=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09J'
  set Item_Real[Item_Counter]='I09P'
  set Item_Mute[Item_Counter]='I02G'
  set Item_Cooldown[Item_Counter]=36
  set integer256=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09Q'
  set Item_Real[Item_Counter]='I09N'
  set Item_Mute[Item_Counter]='I0DC'
  set Item_Cooldown[Item_Counter]=32
  set integer257=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09S'
  set Item_Real[Item_Counter]='I09O'
  set Item_Mute[Item_Counter]='I0DD'
  set Item_Cooldown[Item_Counter]=28
  set integer258=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09R'
  set Item_Real[Item_Counter]='I09L'
  set Item_Mute[Item_Counter]='I0D3'
  set Item_Cooldown[Item_Counter]=24
  set integer259=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09U'
  set Item_Real[Item_Counter]='I09T'
  set Item_Mute[Item_Counter]='I02H'
  set Item_Cooldown[Item_Counter]=95
  set integer260=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09V'
  set Item_Real[Item_Counter]='I09X'
  set Item_Mute[Item_Counter]='I02I'
  set Item_Cooldown[Item_Counter]=95
  set integer261=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I09W'
  set Item_Real[Item_Counter]='I09Y'
  set Item_Mute[Item_Counter]='I02J'
  set Item_Cooldown[Item_Counter]=95
  set integer262=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0A0'
  set Item_Real[Item_Counter]='I09Z'
  set Item_Mute[Item_Counter]='I0BO'
  set integer263=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0HK'
  set Item_Real[Item_Counter]='I0HJ'
  set Item_Mute[Item_Counter]='I0HL'
  set integer264=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0A2'
  set Item_Real[Item_Counter]='I0A1'
  set Item_Mute[Item_Counter]='I0BP'
  set integer265=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0LI'
  set Item_Real[Item_Counter]='I0LJ'
  set Item_Mute[Item_Counter]='I0LK'
  set integer266=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0A4'
  set Item_Real[Item_Counter]='I0A3'
  set Item_Mute[Item_Counter]='I0BQ'
  set integer267=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0A6'
  set Item_Real[Item_Counter]='I0A5'
  set Item_Mute[Item_Counter]='I0BR'
  set integer268=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0K8'
  set Item_Real[Item_Counter]='I0K7'
  set Item_Mute[Item_Counter]='I0K9'
  set integer269=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0A7'
  set Item_Real[Item_Counter]='I0A8'
  set Item_Mute[Item_Counter]='I0BS'
  set integer270=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0KQ'
  set Item_Real[Item_Counter]='I0KP'
  set Item_Mute[Item_Counter]='I0KR'
  set integer271=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AA'
  set Item_Real[Item_Counter]='I0A9'
  set Item_Mute[Item_Counter]='I0BT'
  set HeartOfTarrasque=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AA'
  set Item_Real[Item_Counter]='I0KL'
  set Item_Mute[Item_Counter]='I0KM'
  set HeartOfTarrasqueDisabled=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AC'
  set Item_Real[Item_Counter]='I0AB'
  set Item_Mute[Item_Counter]='I0BU'
  set Item_Cooldown[Item_Counter]=35
  set integer274=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AD'
  set Item_Real[Item_Counter]='I0AE'
  set Item_Mute[Item_Counter]='I0BV'
  set integer275=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AG'
  set Item_Real[Item_Counter]='I0AF'
  set Item_Mute[Item_Counter]='I0CT'
  set integer276=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AH'
  set Item_Real[Item_Counter]='I0AI'
  set Item_Mute[Item_Counter]='I0BW'
  set Butterfly=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0S6'
  set Item_Real[Item_Counter]='I0S7'
  set Item_SellerUnit[Item_Counter]='n12A'
  set Item_Mute[Item_Counter]='I0S8'
  set integer278=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0U8'
  set Item_Real[Item_Counter]='I0U9'
  set Item_SellerUnit[Item_Counter]='n12U'
  set Item_Mute[Item_Counter]='I0UA'
  set integer034=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VP'
  set Item_Real[Item_Counter]='I0VQ'
  set Item_SellerUnit[Item_Counter]='n135'
  set Item_Mute[Item_Counter]='I0VR'
  set integer010=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VS'
  set Item_Real[Item_Counter]='I0VT'
  set Item_SellerUnit[Item_Counter]='n136'
  set Item_Mute[Item_Counter]='I0VU'
  set integer011=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UB'
  set Item_Real[Item_Counter]='I0UC'
  set Item_Mute[Item_Counter]='I0UD'
  set integer035=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='n12V'
  call SaveInteger(HY,'ITDB',Item_Counter,integer035)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UE'
  set Item_Real[Item_Counter]='I0UF'
  set Item_Mute[Item_Counter]='I0UG'
  set integer032=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UH'
  set Item_Real[Item_Counter]='I0UI'
  set Item_Mute[Item_Counter]='I0UJ'
  set integer036=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0UK'
  set Item_Real[Item_Counter]='I0UL'
  set Item_SellerUnit[Item_Counter]='n12X'
  set Item_Mute[Item_Counter]='I0UM'
  set integer037=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0S9'
  set Item_Real[Item_Counter]='I0SA'
  set Item_Mute[Item_Counter]='I0SB'
  set Item_Cooldown[Item_Counter]=16
  set integer279=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SC'
  set Item_Real[Item_Counter]='I0SD'
  set Item_Mute[Item_Counter]='I0SE'
  set Item_Cooldown[Item_Counter]=40
  set integer281=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AK'
  set Item_Real[Item_Counter]='I0AJ'
  set Item_Mute[Item_Counter]='I0BX'
  set Item_Cooldown[Item_Counter]=210
  set integer282=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07K'
  set Item_Real[Item_Counter]='I0AL'
  set Item_Mute[Item_Counter]='I0BY'
  set Item_Cooldown[Item_Counter]=30
  set integer283=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0BB'
  set Item_Real[Item_Counter]='I0BA'
  set Item_Mute[Item_Counter]='I0BZ'
  set integer284=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0QW'
  set Item_Real[Item_Counter]='I0QV'
  set Item_Mute[Item_Counter]='I0QX'
  set integer066=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0LE'
  set Item_Real[Item_Counter]='I0LC'
  set Item_Mute[Item_Counter]='I0LD'
  set integer285=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0BF'
  set Item_Real[Item_Counter]='I0BE'
  set Item_Mute[Item_Counter]='I0C0'
  set Item_Cooldown[Item_Counter]=35
  set integer286=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I014'
  set Item_Real[Item_Counter]='I01D'
  set integer287=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0BH'
  set Item_Real[Item_Counter]='I0BG'
  set Item_Mute[Item_Counter]='I0C1'
  set integer288=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0BI'
  set Item_Real[Item_Counter]='I0BJ'
  set Item_Mute[Item_Counter]='I0C2'
  set integer289=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0BL'
  set Item_Real[Item_Counter]='I0BK'
  set Item_Mute[Item_Counter]='I0C3'
  set Item_Cooldown[Item_Counter]=300
  set integer290=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VM'
  set Item_Real[Item_Counter]='I0VN'
  set Item_Mute[Item_Counter]='I0VO'
  set Item_Cooldown[Item_Counter]=5
  set integer009=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0BN'
  set Item_Real[Item_Counter]='I0BM'
  set Item_Mute[Item_Counter]='I0C4'
  set integer291=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00S'
  set Item_Real[Item_Counter]='I00M'
  set Item_Mute[Item_Counter]='I01C'
  set integer292=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00T'
  set Item_Real[Item_Counter]='I00Q'
  set Item_Mute[Item_Counter]='I01E'
  set integer293=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00V'
  set Item_Real[Item_Counter]='I00N'
  set Item_Mute[Item_Counter]='I01F'
  set integer294=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00W'
  set Item_Real[Item_Counter]='I00R'
  set Item_Mute[Item_Counter]='I0DE'
  set integer295=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00X'
  set Item_Real[Item_Counter]='I00Z'
  set Item_Mute[Item_Counter]='I0CF'
  set Item_Cooldown[Item_Counter]=30
  set integer296=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I00Y'
  set Item_Real[Item_Counter]='I010'
  set Item_Mute[Item_Counter]='I0DF'
  set integer297=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I013'
  set Item_Real[Item_Counter]='I012'
  set Item_Mute[Item_Counter]='I0CB'
  set Item_Cooldown[Item_Counter]=18
  set integer298=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0GK'
  set Item_Real[Item_Counter]='I0GJ'
  set Item_Mute[Item_Counter]='I0GL'
  set Item_Cooldown[Item_Counter]=8
  set integer299=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0HG'
  set Item_Real[Item_Counter]='I0HI'
  set Item_Mute[Item_Counter]='I0HH'
  set Item_Cooldown[Item_Counter]=20
  set integer301=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0I0'
  set Item_Real[Item_Counter]='I0K6'
  set Item_Mute[Item_Counter]='I0I2'
  set Item_Cooldown[Item_Counter]=25
  set integer302=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0JG'
  set Item_Real[Item_Counter]='I0JF'
  set Item_Mute[Item_Counter]='I0JH'
  set Item_Cooldown[Item_Counter]=12
  set integer303=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0KD'
  set Item_Real[Item_Counter]='I0KF'
  set Item_Mute[Item_Counter]='I0KE'
  set Item_Cooldown[Item_Counter]=12
  set integer304=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0KX'
  set Item_Real[Item_Counter]='I0KY'
  set Item_Mute[Item_Counter]='I0KZ'
  set Item_Cooldown[Item_Counter]=8
  set UrnOfShadows=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0LG'
  set Item_Real[Item_Counter]='I0LF'
  set Item_Mute[Item_Counter]='I0LH'
  set integer307=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0LP'
  set Item_Real[Item_Counter]='I0LL'
  set Item_Mute[Item_Counter]='I0LQ'
  set Item_Cooldown[Item_Counter]=30
  set integer308=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0LR'
  set Item_Real[Item_Counter]='I0LT'
  set Item_Mute[Item_Counter]='I0LS'
  set Item_Cooldown[Item_Counter]=30
  set integer179=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MJ'
  set Item_Real[Item_Counter]='I0MI'
  set Item_Mute[Item_Counter]='I0MK'
  set Item_Cooldown[Item_Counter]=45
  set integer309=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0N1'
  set Item_Real[Item_Counter]='I0N0'
  set Item_Mute[Item_Counter]='I0N2'
  set Item_Cooldown[Item_Counter]=7
  set integer310=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0ND'
  set Item_Real[Item_Counter]='I0NE'
  set Item_Mute[Item_Counter]='I0NC'
  set Item_Cooldown[Item_Counter]=30
  set integer180=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NL'
  set Item_Real[Item_Counter]='I0NK'
  set Item_Mute[Item_Counter]='I0NM'
  set integer181=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0O2'
  set Item_Real[Item_Counter]='I0O3'
  set Item_Mute[Item_Counter]='I0O4'
  set Item_Cooldown[Item_Counter]=30
  set integer311=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OC'
  set Item_Real[Item_Counter]='I0OE'
  set Item_Mute[Item_Counter]='I0OD'
  set Item_Cooldown[Item_Counter]=30
  set integer182=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OF'
  set Item_Real[Item_Counter]='I0OG'
  set Item_Mute[Item_Counter]='I0OH'
  set Item_Cooldown[Item_Counter]=60
  set integer183=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OJ'
  set Item_Real[Item_Counter]='I0OI'
  set Item_Mute[Item_Counter]='I0OK'
  set Item_Cooldown[Item_Counter]=60
  set integer184=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OM'
  set Item_Real[Item_Counter]='I0OL'
  set Item_Mute[Item_Counter]='I0ON'
  set Item_Cooldown[Item_Counter]=10
  set integer185=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SU'
  set Item_Real[Item_Counter]='I0SV'
  set Item_Mute[Item_Counter]='I0SW'
  set integer186=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0T5'
  set Item_Real[Item_Counter]='I0T6'
  set Item_Mute[Item_Counter]='I0T7'
  set integer187=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SI'
  set Item_Real[Item_Counter]='I0SJ'
  set Item_Mute[Item_Counter]='I0SK'
  set integer188=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SR'
  set Item_Real[Item_Counter]='I0SS'
  set Item_Mute[Item_Counter]='I0ST'
  set Item_Cooldown[Item_Counter]=7
  set integer189=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SL'
  set Item_Real[Item_Counter]='I0SM'
  set Item_Mute[Item_Counter]='I0SN'
  set Item_Cooldown[Item_Counter]=28
  set integer190=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OU'
  set Item_Real[Item_Counter]='I0OV'
  set Item_Mute[Item_Counter]='I0OW'
  set Item_Cooldown[Item_Counter]=30
  set HeavensHalberd=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OY'
  set Item_Real[Item_Counter]='I0OX'
  set Item_Mute[Item_Counter]='I0OZ'
  set Item_Cooldown[Item_Counter]=35
  set integer313=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0P0'
  set Item_Real[Item_Counter]='I0P1'
  set Item_Mute[Item_Counter]='I0P2'
  set integer192=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0P3'
  set Item_Real[Item_Counter]='I0P4'
  set Item_Mute[Item_Counter]='I0P5'
  set integer193=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VJ'
  set Item_Real[Item_Counter]='I0VK'
  set Item_Mute[Item_Counter]='I0VL'
  set integer019=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h02G'
  call SaveInteger(HY,'ITDB',Item_Counter,integer208)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h086'
  call SaveInteger(HY,'ITDB',Item_Counter,integer303)
  set s="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VD'
  set Item_Real[Item_Counter]='I0VE'
  set Item_SellerUnit[Item_Counter]='h0EA'
  set Item_Mute[Item_Counter]='I0VF'
  set Item_Icon[Item_Counter]=s
  set integer315=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0VG'
  set Item_Real[Item_Counter]='I0VH'
  set Item_SellerUnit[Item_Counter]='h0EU'
  set Item_Mute[Item_Counter]='I0VI'
  set Item_Icon[Item_Counter]=s
  set integer018=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='n12H'
  call SaveInteger(HY,'ITDB',Item_Counter,integer187)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0V3'
  set Item_Real[Item_Counter]='I0V4'
  set Item_SellerUnit[Item_Counter]='n12W'
  set Item_Mute[Item_Counter]='I0V5'
  set Item_Icon[Item_Counter]=s
  set integer033=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SO'
  set Item_Real[Item_Counter]='I0SP'
  set Item_SellerUnit[Item_Counter]='n12D'
  set Item_Mute[Item_Counter]='I0SQ'
  set Item_Icon[Item_Counter]=s
  set integer191=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0QZ'
  set Item_Real[Item_Counter]='I0QY'
  set Item_SellerUnit[Item_Counter]='u020'
  set Item_Mute[Item_Counter]='I0R0'
  set Item_Icon[Item_Counter]=s
  set integer065=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0SF'
  set Item_Real[Item_Counter]='I0SG'
  set Item_SellerUnit[Item_Counter]='n12C'
  set Item_Mute[Item_Counter]='I0SH'
  set Item_Icon[Item_Counter]=s
  set integer280=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05L'
  set Item_Real[Item_Counter]='I05R'
  set Item_SellerUnit[Item_Counter]='h02H'
  set Item_Mute[Item_Counter]='I0DS'
  set Item_Icon[Item_Counter]=s
  set integer316=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05M'
  set Item_Real[Item_Counter]='I05S'
  set Item_SellerUnit[Item_Counter]='h02I'
  set Item_Mute[Item_Counter]='I0DT'
  set Item_Icon[Item_Counter]=s
  set integer317=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0RJ'
  set Item_Real[Item_Counter]='I0RK'
  set Item_SellerUnit[Item_Counter]='h03T'
  set Item_Mute[Item_Counter]='I0RL'
  set Item_Icon[Item_Counter]=s
  set integer050=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h02J'
  call SaveInteger(HY,'ITDB',Item_Counter,integer212)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05O'
  set Item_Real[Item_Counter]='I05T'
  set Item_SellerUnit[Item_Counter]='h02K'
  set Item_Mute[Item_Counter]='I0DU'
  set Item_Icon[Item_Counter]=s
  set integer318=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h014'
  set Item_Icon[Item_Counter]=s
  set integer319=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05P'
  set Item_Real[Item_Counter]='I05U'
  set Item_SellerUnit[Item_Counter]='h02L'
  set Item_Mute[Item_Counter]='I0DW'
  set Item_Icon[Item_Counter]=s
  set integer320=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h02M'
  call SaveInteger(HY,'ITDB',Item_Counter,integer220)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05K'
  set Item_Real[Item_Counter]='I05V'
  set Item_SellerUnit[Item_Counter]='h02N'
  set Item_Mute[Item_Counter]='I0DX'
  set Item_Icon[Item_Counter]=s
  set integer321=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05N'
  set Item_Real[Item_Counter]='I05W'
  set Item_SellerUnit[Item_Counter]='h02O'
  set Item_Mute[Item_Counter]='I0DY'
  set Item_Icon[Item_Counter]=s
  set integer322=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05Q'
  set Item_Real[Item_Counter]='I05X'
  set Item_SellerUnit[Item_Counter]='h02P'
  set Item_Mute[Item_Counter]='I0DZ'
  set Item_Icon[Item_Counter]=s
  set integer323=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06N'
  set Item_Real[Item_Counter]='I06O'
  set Item_SellerUnit[Item_Counter]='h02Q'
  set Item_Mute[Item_Counter]='I0E0'
  set Item_Icon[Item_Counter]=s
  set integer324=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06Q'
  set Item_Real[Item_Counter]='I06P'
  set Item_SellerUnit[Item_Counter]='h02R'
  set Item_Mute[Item_Counter]='I0E1'
  set Item_Icon[Item_Counter]=s
  set integer325=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06R'
  set Item_Real[Item_Counter]='I06S'
  set Item_SellerUnit[Item_Counter]='h02S'
  set Item_Mute[Item_Counter]='I0E2'
  set Item_Icon[Item_Counter]=s
  set integer326=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h02T'
  call SaveInteger(HY,'ITDB',Item_Counter,integer228)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06W'
  set Item_Real[Item_Counter]='I06V'
  set Item_SellerUnit[Item_Counter]='h02U'
  set Item_Mute[Item_Counter]='I0E4'
  set Item_Icon[Item_Counter]=s
  set integer327=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I06X'
  set Item_Real[Item_Counter]='I06Y'
  set Item_SellerUnit[Item_Counter]='h02V'
  set Item_Mute[Item_Counter]='I0E5'
  set Item_Icon[Item_Counter]=s
  set integer328=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h02W'
  call SaveInteger(HY,'ITDB',Item_Counter,integer234)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I070'
  set Item_Real[Item_Counter]='I06Z'
  set Item_SellerUnit[Item_Counter]='h02X'
  set Item_Mute[Item_Counter]='I0E6'
  set Item_Icon[Item_Counter]=s
  set integer329=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I071'
  set Item_Real[Item_Counter]='I072'
  set Item_SellerUnit[Item_Counter]='h02Y'
  set Item_Mute[Item_Counter]='I0E7'
  set Item_Icon[Item_Counter]=s
  set integer330=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h02Z'
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I074'
  set Item_Real[Item_Counter]='I073'
  set Item_SellerUnit[Item_Counter]='h030'
  set Item_Mute[Item_Counter]='I0E8'
  set Item_Icon[Item_Counter]=s
  set integer331=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h031'
  set integer332=Item_Counter
  call SaveInteger(HY,'ITDB',integer332,integer240)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h032'
  call SaveInteger(HY,'ITDB',Item_Counter,integer241)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h033'
  call SaveInteger(HY,'ITDB',Item_Counter,integer242)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='n134'
  call SaveInteger(HY,'ITDB',Item_Counter,integer009)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I077'
  set Item_Real[Item_Counter]='I07W'
  set Item_SellerUnit[Item_Counter]='h034'
  set Item_Mute[Item_Counter]='I0EB'
  set Item_Icon[Item_Counter]=s
  set integer334=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I078'
  set Item_Real[Item_Counter]='I07X'
  set Item_SellerUnit[Item_Counter]='h035'
  set Item_Mute[Item_Counter]='I0EC'
  set Item_Icon[Item_Counter]=s
  set integer335=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I079'
  set Item_Real[Item_Counter]='I07Y'
  set Item_SellerUnit[Item_Counter]='h036'
  set Item_Mute[Item_Counter]='I0ED'
  set Item_Icon[Item_Counter]=s
  set integer336=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07B'
  set Item_Real[Item_Counter]='I080'
  set Item_SellerUnit[Item_Counter]='h038'
  set Item_Mute[Item_Counter]='I0EF'
  set Item_Icon[Item_Counter]=s
  set integer337=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07C'
  set Item_Real[Item_Counter]='I081'
  set Item_SellerUnit[Item_Counter]='h039'
  set Item_Mute[Item_Counter]='I0EG'
  set Item_Icon[Item_Counter]=s
  set integer338=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07D'
  set Item_Real[Item_Counter]='I082'
  set Item_SellerUnit[Item_Counter]='h03A'
  set Item_Mute[Item_Counter]='I0EH'
  set Item_Icon[Item_Counter]=s
  set integer339=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03C'
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07E'
  set Item_Real[Item_Counter]='I083'
  set Item_SellerUnit[Item_Counter]='h03D'
  set Item_Mute[Item_Counter]='I0EI'
  set Item_Icon[Item_Counter]=s
  set integer340=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03E'
  call SaveInteger(HY,'ITDB',Item_Counter,integer268)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07G'
  set Item_Real[Item_Counter]='I07F'
  set Item_SellerUnit[Item_Counter]='h03F'
  set Item_Mute[Item_Counter]='I0EJ'
  set Item_Icon[Item_Counter]=s
  set integer341=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07H'
  set Item_Real[Item_Counter]='I084'
  set Item_SellerUnit[Item_Counter]='h03G'
  set Item_Mute[Item_Counter]='I0EK'
  set Item_Icon[Item_Counter]=s
  set integer342=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07O'
  set Item_Real[Item_Counter]='I085'
  set Item_SellerUnit[Item_Counter]='h03H'
  set Item_Mute[Item_Counter]='I0EL'
  set Item_Icon[Item_Counter]=s
  set integer343=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03I'
  set Item_Icon[Item_Counter]=s
  set integer344=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03J'
  set Item_Icon[Item_Counter]=s
  set integer345=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07J'
  set Item_Real[Item_Counter]='I088'
  set Item_SellerUnit[Item_Counter]='h03L'
  set Item_Mute[Item_Counter]='I0EO'
  set Item_Icon[Item_Counter]=s
  set integer346=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03M'
  call SaveInteger(HY,'ITDB',Item_Counter,integer283)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03N'
  call SaveInteger(HY,'ITDB',Item_Counter,integer284)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07P'
  set Item_Real[Item_Counter]='I08A'
  set Item_SellerUnit[Item_Counter]='h03Q'
  set Item_Mute[Item_Counter]='I0EQ'
  set Item_Icon[Item_Counter]=s
  set RecipeFlyingCourier=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07Q'
  set Item_Real[Item_Counter]='I08B'
  set Item_SellerUnit[Item_Counter]='h03R'
  set Item_Mute[Item_Counter]='I0ER'
  set Item_Icon[Item_Counter]=s
  set integer348=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07R'
  set Item_Real[Item_Counter]='I08C'
  set Item_SellerUnit[Item_Counter]='h03S'
  set Item_Mute[Item_Counter]='I0ES'
  set Item_Icon[Item_Counter]=s
  set integer349=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h03U'
  call SaveInteger(HY,'ITDB',Item_Counter,integer291)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07S'
  set Item_Real[Item_Counter]='I08D'
  set Item_SellerUnit[Item_Counter]='h03V'
  set Item_Mute[Item_Counter]='I0ET'
  set Item_Icon[Item_Counter]=s
  set integer350=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07T'
  set Item_Real[Item_Counter]='I08E'
  set Item_SellerUnit[Item_Counter]='h03W'
  set Item_Mute[Item_Counter]='I0EU'
  set Item_Icon[Item_Counter]=s
  set integer351=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h079'
  call SaveInteger(HY,'ITDB',Item_Counter,integer299)
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0HD'
  set Item_Real[Item_Counter]='I0HF'
  set Item_SellerUnit[Item_Counter]='h07T'
  set Item_Mute[Item_Counter]='I0HE'
  set Item_Icon[Item_Counter]=s
  set integer352=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0HX'
  set Item_Real[Item_Counter]='I0HZ'
  set Item_SellerUnit[Item_Counter]='h07X'
  set Item_Mute[Item_Counter]='I0HY'
  set Item_Icon[Item_Counter]=s
  set integer353=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I07L'
  set Item_Real[Item_Counter]='I0KN'
  set Item_SellerUnit[Item_Counter]='h03P'
  set Item_Mute[Item_Counter]='I0KO'
  set Item_Icon[Item_Counter]=s
  set integer355=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0KW'
  set Item_Real[Item_Counter]='I0KV'
  set Item_SellerUnit[Item_Counter]='h0BA'
  set Item_Mute[Item_Counter]='I0KU'
  set Item_Icon[Item_Counter]=s
  set integer356=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0LM'
  set Item_Real[Item_Counter]='I0LN'
  set Item_SellerUnit[Item_Counter]='h0BQ'
  set Item_Mute[Item_Counter]='I0LO'
  set Item_Icon[Item_Counter]=s
  set integer357=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0N9'
  set Item_Real[Item_Counter]='I0NA'
  set Item_SellerUnit[Item_Counter]='h0D1'
  set Item_Mute[Item_Counter]='I0NB'
  set Item_Icon[Item_Counter]=s
  set integer358=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0NH'
  set Item_Real[Item_Counter]='I0NI'
  set Item_SellerUnit[Item_Counter]='h0CY'
  set Item_Mute[Item_Counter]='I0NJ'
  set Item_Icon[Item_Counter]=s
  set integer359=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0O5'
  set Item_Real[Item_Counter]='I0O6'
  set Item_SellerUnit[Item_Counter]='h0DD'
  set Item_Mute[Item_Counter]='I0O7'
  set Item_Icon[Item_Counter]=s
  set integer360=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0OB'
  set Item_Real[Item_Counter]='I0OA'
  set Item_SellerUnit[Item_Counter]='h03X'
  set Item_Mute[Item_Counter]='I0O9'
  set Item_Icon[Item_Counter]=s
  set integer361=Item_Counter
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h0DU'
  call SaveInteger(HY,'ITDB',integer319,integer216)
  call SaveInteger(HY,'ITDB',Item_Counter,integer183)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h0E9'
  call SaveInteger(HY,'ITDB',Item_Counter,HeavensHalberd)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h0DV'
  call SaveInteger(HY,'ITDB',Item_Counter,integer185)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h0EN'
  call SaveInteger(HY,'ITDB',Item_Counter,integer279)
  set Item_Counter=Item_Counter+1
  set Item_SellerUnit[Item_Counter]='h0EC'
  call SaveInteger(HY,'ITDB',Item_Counter,integer193)
  call ExecuteFunc("Init_Aghanim")
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03A'
  set Item_Real[Item_Counter]='I051'
  set Item_SellerUnit[Item_Counter]='h08K'
  set Item_Mute[Item_Counter]='I0D9'
  set Item_SideShops[Item_Counter]=integer160
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03Y'
  set Item_Real[Item_Counter]='I052'
  set Item_SellerUnit[Item_Counter]='h08X'
  set Item_Mute[Item_Counter]='I0C9'
  set Item_SideShops[Item_Counter]=integer162
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02S'
  set Item_Real[Item_Counter]='I02P'
  set Item_SellerUnit[Item_Counter]='h08S'
  set Item_Mute[Item_Counter]='I0CA'
  set Item_SideShops[Item_Counter]=integer122
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02N'
  set Item_Real[Item_Counter]='I02R'
  set Item_SellerUnit[Item_Counter]='h08P'
  set Item_Mute[Item_Counter]='I0CS'
  set Item_SideShops[Item_Counter]=integer123
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02Z'
  set Item_Real[Item_Counter]='I043'
  set Item_SellerUnit[Item_Counter]='h08Q'
  set Item_Mute[Item_Counter]='I0CV'
  set Item_SideShops[Item_Counter]=integer125
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I031'
  set Item_Real[Item_Counter]='I045'
  set Item_SellerUnit[Item_Counter]='h08T'
  set Item_Mute[Item_Counter]='I0D5'
  set Item_SideShops[Item_Counter]=integer127
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03B'
  set Item_Real[Item_Counter]='I04E'
  set Item_SellerUnit[Item_Counter]='h08N'
  set Item_Mute[Item_Counter]='I0DA'
  set Item_SideShops[Item_Counter]=integer137
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03E'
  set Item_Real[Item_Counter]='I04H'
  set Item_SellerUnit[Item_Counter]='h08W'
  set Item_Mute[Item_Counter]='I0C7'
  set Item_Cooldown[Item_Counter]=12
  set Item_SideShops[Item_Counter]=KelensDagger
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03G'
  set Item_Real[Item_Counter]='I04K'
  set Item_SellerUnit[Item_Counter]='h08O'
  set Item_Mute[Item_Counter]='I0CD'
  set Item_SideShops[Item_Counter]=integer143
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03P'
  set Item_Real[Item_Counter]='I04S'
  set Item_SellerUnit[Item_Counter]='h08U'
  set Item_Mute[Item_Counter]='I0CY'
  set Item_SideShops[Item_Counter]=integer151
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03Q'
  set Item_Real[Item_Counter]='I04T'
  set Item_SellerUnit[Item_Counter]='h08G'
  set Item_Mute[Item_Counter]='I0DI'
  set Item_SideShops[Item_Counter]=integer152
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03S'
  set Item_Real[Item_Counter]='I04V'
  set Item_SellerUnit[Item_Counter]='h08L'
  set Item_Mute[Item_Counter]='I0DJ'
  set Item_SideShops[Item_Counter]=integer154
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03T'
  set Item_Real[Item_Counter]='I04W'
  set Item_SellerUnit[Item_Counter]='h08R'
  set Item_Mute[Item_Counter]='I0CP'
  set Item_SideShops[Item_Counter]=integer155
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03V'
  set Item_Real[Item_Counter]='I04Y'
  set Item_SellerUnit[Item_Counter]='h08E'
  set Item_Mute[Item_Counter]='I0C5'
  set Item_SideShops[Item_Counter]=integer157
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I03W'
  set Item_Real[Item_Counter]='I04Z'
  set Item_SellerUnit[Item_Counter]='h08J'
  set Item_Mute[Item_Counter]='I0DK'
  set Item_SideShops[Item_Counter]=integer158
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0GD'
  set Item_Real[Item_Counter]='I0GC'
  set Item_SellerUnit[Item_Counter]='h08I'
  set Item_Mute[Item_Counter]='I0GE'
  set Item_SideShops[Item_Counter]=integer176
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0HT'
  set Item_Real[Item_Counter]='I0HR'
  set Item_SellerUnit[Item_Counter]='h08F'
  set Item_Mute[Item_Counter]='I0HW'
  set Item_SideShops[Item_Counter]=integer177
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0J7'
  set Item_Real[Item_Counter]='I0J6'
  set Item_SellerUnit[Item_Counter]='h08V'
  set Item_Mute[Item_Counter]='I0J8'
  set Item_SideShops[Item_Counter]=TalismanOfEvasion
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I040'
  set Item_Real[Item_Counter]='I054'
  set Item_SellerUnit[Item_Counter]='h08M'
  set Item_Mute[Item_Counter]='I0DL'
  set Item_SideShops[Item_Counter]=integer164
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I05A'
  set Item_Real[Item_Counter]='I05I'
  set Item_SellerUnit[Item_Counter]='h08H'
  set Item_SideShops[Item_Counter]=integer202
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I037'
  set Item_Real[Item_Counter]='I04B'
  set Item_SellerUnit[Item_Counter]='h093'
  set Item_Mute[Item_Counter]='I0CR'
  set Item_SideShops[Item_Counter]=integer133
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I02Q'
  set Item_Real[Item_Counter]='I02O'
  set Item_SellerUnit[Item_Counter]='h0BO'
  set Item_Mute[Item_Counter]='I00A'
  set Item_SideShops[Item_Counter]=TemporaryItem
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0MA'
  set Item_Real[Item_Counter]='I0M9'
  set Item_SellerUnit[Item_Counter]='h0CN'
  set Item_Mute[Item_Counter]='I0MB'
  set Item_SideShops[Item_Counter]=integer119
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I033'
  set Item_Real[Item_Counter]='I047'
  set Item_SellerUnit[Item_Counter]='h0D0'
  set Item_Mute[Item_Counter]='I0D7'
  set Item_SideShops[Item_Counter]=integer129
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I032'
  set Item_Real[Item_Counter]='I046'
  set Item_SellerUnit[Item_Counter]='u025'
  set Item_Mute[Item_Counter]='I0CZ'
  set Item_SideShops[Item_Counter]=integer128
  set Item_Counter=Item_Counter+1
  set Item_Dummy[Item_Counter]='I0AU'
  set Item_Real[Item_Counter]='I0AN'
  set Item_SellerUnit[Item_Counter]='n12Y'
  set Item_Mute[Item_Counter]='I0DO'
  set Item_SideShops[Item_Counter]=integer168
  call ExecuteFunc("Func4808")
endfunction

function Func4808 takes nothing returns nothing
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer152
  set Rec_Comp_2[integer040]=integer164
  set integers104[integer040]=integer208
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer154
  set Rec_Comp_2[integer040]=integer139
  set Rec_Comp_3[integer040]=integer316
  set integers104[integer040]=integer209
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer208
  set Rec_Comp_2[integer040]=integer149
  set Rec_Comp_3[integer040]=integer133
  set integers104[integer040]=integer187
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer138
  set Rec_Comp_2[integer040]=integer138
  set integers104[integer040]=integer188
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer310
  set Rec_Comp_2[integer040]=TalismanOfEvasion
  set integers104[integer040]=integer189
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer035
  set Rec_Comp_2[integer040]=integer301
  set Rec_Comp_3[integer040]=integer013
  set integers104[integer040]=integer014
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer129
  set Rec_Comp_2[integer040]=integer139
  set Rec_Comp_3[integer040]=integer317
  set integers104[integer040]=integer210
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer153
  set Rec_Comp_2[integer040]=integer158
  set integers104[integer040]=integer212
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=TemporaryItem
  set Rec_Comp_2[integer040]=integer318
  set integers104[integer040]=integer213
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer213
  set Rec_Comp_2[integer040]=integer318
  set integers104[integer040]=integer214
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=TemporaryItem
  set Rec_Comp_2[integer040]=integer123
  set Rec_Comp_3[integer040]=integer122
  set integers104[integer040]=integer215
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer238
  set Rec_Comp_2[integer040]=integer146
  set integers104[integer040]=integer186
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=TemporaryItem
  set Rec_Comp_2[integer040]=integer125
  set Rec_Comp_3[integer040]=integer122
  set integers104[integer040]=integer216
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=TemporaryItem
  set Rec_Comp_2[integer040]=integer155
  set Rec_Comp_3[integer040]=integer122
  set integers104[integer040]=integer217
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer122
  set Rec_Comp_2[integer040]=integer320
  set integers104[integer040]=integer218
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer151
  set Rec_Comp_2[integer040]=integer155
  set Rec_Comp_3[integer040]=integer158
  set integers104[integer040]=integer220
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer124
  set Rec_Comp_2[integer040]=integer134
  set Rec_Comp_3[integer040]=integer321
  set integers104[integer040]=integer221
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer124
  set Rec_Comp_2[integer040]=integer157
  set Rec_Comp_3[integer040]=integer322
  set integers104[integer040]=integer222
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer124
  set Rec_Comp_2[integer040]=integer142
  set Rec_Comp_3[integer040]=integer323
  set integers104[integer040]=integer223
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer126
  set Rec_Comp_2[integer040]=integer123
  set Rec_Comp_3[integer040]=integer324
  set integers104[integer040]=integer224
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer147
  set Rec_Comp_2[integer040]=integer125
  set Rec_Comp_3[integer040]=integer325
  set integers104[integer040]=integer225
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer123
  set Rec_Comp_2[integer040]=integer147
  set Rec_Comp_3[integer040]=integer123
  set integers104[integer040]=integer035
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer133
  set Rec_Comp_2[integer040]=integer152
  set Rec_Comp_3[integer040]=integer033
  set integers104[integer040]=integer032
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer153
  set Rec_Comp_2[integer040]=integer177
  set Rec_Comp_3[integer040]=integer037
  set integers104[integer040]=integer036
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer165
  set Rec_Comp_2[integer040]=integer125
  set Rec_Comp_3[integer040]=integer326
  set integers104[integer040]=integer226
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer254
  set Rec_Comp_2[integer040]=integer162
  set Rec_Comp_3[integer040]=integer191
  set integers104[integer040]=integer190
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer128
  set Rec_Comp_2[integer040]=integer129
  set Rec_Comp_3[integer040]=integer155
  set integers104[integer040]=integer228
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer145
  set Rec_Comp_2[integer040]=integer122
  set Rec_Comp_3[integer040]=integer327
  set integers104[integer040]=integer229
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer126
  set Rec_Comp_2[integer040]=integer126
  set Rec_Comp_3[integer040]=integer155
  set Rec_Comp_4[integer040]=integer328
  set integers104[integer040]=integer230
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer230
  set Rec_Comp_2[integer040]=integer328
  set integers104[integer040]=integer231
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer232
  set Rec_Comp_2[integer040]=integer328
  set integers104[integer040]=integer231
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer137
  set Rec_Comp_2[integer040]=integer143
  set integers104[integer040]=integer234
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer143
  set Rec_Comp_2[integer040]=integer329
  set integers104[integer040]=integer236
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer159
  set Rec_Comp_2[integer040]=integer164
  set Rec_Comp_3[integer040]=integer011
  set Rec_Comp_4[integer040]=integer330
  set integers104[integer040]=integer237
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer150
  set Rec_Comp_2[integer040]=integer133
  set Rec_Comp_3[integer040]=integer163
  set integers104[integer040]=integer238
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer209
  set Rec_Comp_2[integer040]=integer210
  set Rec_Comp_3[integer040]=integer331
  set integers104[integer040]=integer239
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer225
  set Rec_Comp_2[integer040]=integer224
  set integers104[integer040]=integer240
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer145
  set Rec_Comp_2[integer040]=integer145
  set Rec_Comp_3[integer040]=integer010
  set integers104[integer040]=integer241
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer208
  set Rec_Comp_2[integer040]=integer128
  set Rec_Comp_3[integer040]=integer130
  set Rec_Comp_4[integer040]=integer177
  set integers104[integer040]=integer242
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer127
  set Rec_Comp_2[integer040]=integer128
  set Rec_Comp_3[integer040]=integer334
  set integers104[integer040]=integer243
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer145
  set Rec_Comp_2[integer040]=integer147
  set Rec_Comp_3[integer040]=integer335
  set integers104[integer040]=integer244
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer224
  set Rec_Comp_2[integer040]=integer162
  set Rec_Comp_3[integer040]=integer336
  set integers104[integer040]=integer253
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer130
  set Rec_Comp_2[integer040]=integer314
  set integers104[integer040]=integer254
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer147
  set Rec_Comp_2[integer040]=integer220
  set integers104[integer040]=integer009
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer159
  set Rec_Comp_2[integer040]=integer223
  set Rec_Comp_3[integer040]=integer337
  set integers104[integer040]=integer255
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer255
  set Rec_Comp_2[integer040]=integer337
  set integers104[integer040]=integer256
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer256
  set Rec_Comp_2[integer040]=integer337
  set integers104[integer040]=integer257
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer257
  set Rec_Comp_2[integer040]=integer337
  set integers104[integer040]=integer258
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer258
  set Rec_Comp_2[integer040]=integer337
  set integers104[integer040]=integer259
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer159
  set Rec_Comp_2[integer040]=integer125
  set Rec_Comp_3[integer040]=integer338
  set integers104[integer040]=integer260
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer260
  set Rec_Comp_2[integer040]=integer338
  set integers104[integer040]=integer261
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer261
  set Rec_Comp_2[integer040]=integer338
  set integers104[integer040]=integer262
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer162
  set Rec_Comp_2[integer040]=integer208
  set Rec_Comp_3[integer040]=integer339
  set integers104[integer040]=integer263
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer131
  set Rec_Comp_2[integer040]=integer156
  set integers104[integer040]=integer265
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer243
  set Rec_Comp_2[integer040]=integer131
  set Rec_Comp_3[integer040]=integer340
  set integers104[integer040]=integer267
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer131
  set Rec_Comp_2[integer040]=integer165
  set Rec_Comp_3[integer040]=integer165
  set integers104[integer040]=integer268
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer156
  set Rec_Comp_2[integer040]=integer341
  set integers104[integer040]=integer270
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer144
  set Rec_Comp_2[integer040]=integer163
  set Rec_Comp_3[integer040]=integer342
  set integers104[integer040]=HeartOfTarrasque
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer144
  set Rec_Comp_2[integer040]=integer234
  set Rec_Comp_3[integer040]=integer343
  set integers104[integer040]=integer274
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer144
  set Rec_Comp_2[integer040]=integer235
  set Rec_Comp_3[integer040]=integer343
  set integers104[integer040]=integer274
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer162
  set Rec_Comp_2[integer040]=integer162
  set Rec_Comp_3[integer040]=integer150
  set Rec_Comp_4[integer040]=integer119
  set integers104[integer040]=integer275
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer148
  set Rec_Comp_2[integer040]=integer314
  set integers104[integer040]=integer279
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer162
  set Rec_Comp_2[integer040]=integer162
  set Rec_Comp_3[integer040]=integer150
  set Rec_Comp_4[integer040]=integer120
  set integers104[integer040]=integer275
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer132
  set Rec_Comp_2[integer040]=integer151
  set Rec_Comp_3[integer040]=TalismanOfEvasion
  set integers104[integer040]=Butterfly
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer158
  set Rec_Comp_2[integer040]=integer129
  set Rec_Comp_3[integer040]=integer359
  set integers104[integer040]=integer310
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer150
  set Rec_Comp_2[integer040]=integer147
  set Rec_Comp_3[integer040]=integer126
  set Rec_Comp_4[integer040]=integer159
  set integers104[integer040]=Aghanim_Basic
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer208
  set Rec_Comp_2[integer040]=integer208
  set Rec_Comp_3[integer040]=integer346
  set integers104[integer040]=integer282
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer162
  set Rec_Comp_2[integer040]=integer146
  set Rec_Comp_3[integer040]=integer164
  set integers104[integer040]=integer283
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer163
  set Rec_Comp_2[integer040]=integer152
  set Rec_Comp_3[integer040]=integer160
  set integers104[integer040]=integer284
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer163
  set Rec_Comp_2[integer040]=integer152
  set Rec_Comp_3[integer040]=integer161
  set integers104[integer040]=integer284
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer210
  set Rec_Comp_2[integer040]=integer284
  set Rec_Comp_3[integer040]=integer065
  set integers104[integer040]=integer066
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer210
  set Rec_Comp_2[integer040]=integer285
  set Rec_Comp_3[integer040]=integer065
  set integers104[integer040]=integer066
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer138
  set Rec_Comp_2[integer040]=integer229
  set Rec_Comp_3[integer040]=integer355
  set integers104[integer040]=integer286
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer203
  set Rec_Comp_3[integer040]=RecipeFlyingCourier
  set integers104[integer040]=integer287
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer209
  set Rec_Comp_2[integer040]=integer211
  set Rec_Comp_3[integer040]=integer143
  set Rec_Comp_4[integer040]=integer348
  set integers104[integer040]=integer288
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer209
  set Rec_Comp_2[integer040]=integer212
  set Rec_Comp_3[integer040]=integer143
  set Rec_Comp_4[integer040]=integer348
  set integers104[integer040]=integer288
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer239
  set Rec_Comp_2[integer040]=integer309
  set Rec_Comp_3[integer040]=integer280
  set integers104[integer040]=integer281
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer138
  set Rec_Comp_2[integer040]=integer149
  set Rec_Comp_3[integer040]=integer129
  set Rec_Comp_4[integer040]=integer349
  set integers104[integer040]=integer289
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer238
  set Rec_Comp_2[integer040]=integer308
  set Rec_Comp_3[integer040]=integer050
  set integers104[integer040]=integer290
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer154
  set Rec_Comp_2[integer040]=integer152
  set Rec_Comp_3[integer040]=integer148
  set integers104[integer040]=integer291
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer122
  set Rec_Comp_2[integer040]=integer137
  set Rec_Comp_3[integer040]=integer127
  set Rec_Comp_4[integer040]=integer350
  set integers104[integer040]=integer295
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer146
  set Rec_Comp_2[integer040]=integer149
  set Rec_Comp_3[integer040]=integer351
  set integers104[integer040]=integer296
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer220
  set Rec_Comp_2[integer040]=integer220
  set Rec_Comp_3[integer040]=integer361
  set integers104[integer040]=integer298
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=TemporaryItem
  set Rec_Comp_2[integer040]=integer127
  set Rec_Comp_3[integer040]=integer127
  set integers104[integer040]=integer299
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer176
  set Rec_Comp_2[integer040]=integer139
  set Rec_Comp_3[integer040]=integer139
  set Rec_Comp_4[integer040]=integer124
  set integers104[integer040]=integer300
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer159
  set Rec_Comp_2[integer040]=integer154
  set Rec_Comp_3[integer040]=integer352
  set integers104[integer040]=integer301
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer291
  set Rec_Comp_2[integer040]=integer209
  set Rec_Comp_3[integer040]=integer353
  set integers104[integer040]=integer302
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer160
  set Rec_Comp_2[integer040]=integer157
  set Rec_Comp_3[integer040]=integer157
  set integers104[integer040]=integer303
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer161
  set Rec_Comp_2[integer040]=integer157
  set Rec_Comp_3[integer040]=integer157
  set integers104[integer040]=integer303
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer158
  set Rec_Comp_2[integer040]=integer134
  set Rec_Comp_3[integer040]=integer134
  set Rec_Comp_4[integer040]=integer356
  set integers104[integer040]=UrnOfShadows
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer158
  set Rec_Comp_2[integer040]=integer154
  set Rec_Comp_3[integer040]=integer357
  set integers104[integer040]=integer308
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer132
  set Rec_Comp_2[integer040]=integer305
  set integers104[integer040]=integer179
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=TemporaryItem
  set Rec_Comp_2[integer040]=integer133
  set integers104[integer040]=integer309
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer154
  set Rec_Comp_2[integer040]=integer221
  set Rec_Comp_3[integer040]=integer011
  set Rec_Comp_4[integer040]=integer358
  set integers104[integer040]=integer180
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer180
  set Rec_Comp_2[integer040]=integer358
  set integers104[integer040]=integer180
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer181
  set Rec_Comp_2[integer040]=integer358
  set integers104[integer040]=integer180
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer137
  set Rec_Comp_2[integer040]=integer223
  set Rec_Comp_3[integer040]=integer223
  set Rec_Comp_4[integer040]=integer360
  set integers104[integer040]=integer311
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=TemporaryItem
  set Rec_Comp_2[integer040]=integer153
  set Rec_Comp_3[integer040]=integer154
  set integers104[integer040]=integer183
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer159
  set Rec_Comp_2[integer040]=integer159
  set Rec_Comp_3[integer040]=integer163
  set integers104[integer040]=integer185
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer225
  set Rec_Comp_2[integer040]=TalismanOfEvasion
  set integers104[integer040]=HeavensHalberd
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer226
  set Rec_Comp_2[integer040]=integer284
  set Rec_Comp_3[integer040]=integer315
  set integers104[integer040]=integer313
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer226
  set Rec_Comp_2[integer040]=integer285
  set Rec_Comp_3[integer040]=integer315
  set integers104[integer040]=integer313
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer222
  set Rec_Comp_2[integer040]=integer211
  set integers104[integer040]=integer192
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer222
  set Rec_Comp_2[integer040]=integer212
  set integers104[integer040]=integer193
  set integer040=integer040+1
  set Rec_Comp_1[integer040]=integer018
  set Rec_Comp_2[integer040]=integer243
  set Rec_Comp_3[integer040]=integer298
  set integers104[integer040]=integer019
  call ExecuteFunc("Func1160")
endfunction

function AddSomethingToPurgeList takes nothing returns nothing
  call AddToPurgeList('B3FP','PRGE')
  call AddToPurgeList('A3FP','PRGE')
  call AddToPurgeList('A3Q1','PRGE')
  call AddToPurgeList('B3DJ','PRGE')
  call AddToPurgeList('A3R9','PRGA')
  call AddToPurgeList('B07S','PRGA')
  call AddToPurgeList('A39I','PRGE')
  call AddToPurgeList('B39I','PRGE')
  call AddToPurgeList('A39F','PRGE')
  call AddToPurgeList('BIcb','PRGE')
  call AddToPurgeList('A2EC','PRGE')
  call AddToPurgeList('B0F5','PRGE')
  call AddToPurgeList('B08N','PRGE')
  call AddToPurgeList('A263','PRGE')
  call AddToPurgeList('B02I','PRGE')
  call AddToPurgeList('A264','PRGE')
  call AddToPurgeList('A28F','PRGE')
  call AddToPurgeList('B0EQ','PRGE')
  call AddToPurgeList('A3FK','PRGA')
  call AddToPurgeList('B01P','PRGA')
  call AddToPurgeList('B08Q','PRGE')
  call AddToPurgeList('B031','PRGE')
  call AddToPurgeList('BNsi','PRGE')
  call AddToPurgeList('Bcyc','PRGC')
  call AddToPurgeList('Bcy2','PRGC')
  call AddToPurgeList('A3SH','PRGM')
  call AddToPurgeList('A38T','PRGA')
  call AddToPurgeList('B351','PRGA')
  call AddToPurgeList('A38X','PRGA')
  call AddToPurgeList('Bdef','PRGA')
  call AddToPurgeList('A1ZY','PRGA')
  call AddToPurgeList('B0DX','PRGA')
  call AddToPurgeList('Aetl','PRGC')
  call AddToPurgeList('A1ZJ','PRGA')
  call AddToPurgeList('A32L','PRGE')
  call AddToPurgeList('A39L','PRGA')
  call AddToPurgeList('A39J','PRGA')
  call AddToPurgeList('B39J','PRGA')
  call AddToPurgeList('A3C8','PRGA')
  call AddToPurgeList('A39F','PRGE')
  call AddToPurgeList('B06B','PRGA')
  call AddToPurgeList('BHtc','PRGE')
  call AddToPurgeList('B0CG','PRGA')
  call AddToPurgeList('A3J9','PRGE')
  call AddToPurgeList('B3J9','PRGE')
  call AddToPurgeList('A1QB','PRGE')
  call AddToPurgeList('B0CY','PRGE')
  call AddToPurgeList('A30B','PRGA')
  call AddToPurgeList('A30C','PRGA')
  call AddToPurgeList('a30C','PRGA')
  call AddToPurgeList('A3JE','PRGA')
  call AddToPurgeList('B3JE','PRGA')
  call AddToPurgeList('A1CN','PRGA')
  call AddToPurgeList('A3JF','PRGA')
  call AddToPurgeList('B3JF','PRGA')
  call AddToPurgeList('B01Q','PRGA')
  call AddToPurgeList('B01Q','PRGA')
  call AddToPurgeList('B01S','PRGA')
  call AddToPurgeList('B01R','PRGA')
  call AddToPurgeList('BUhf','PRGA')
  call AddToPurgeList('a3TP','PRGE')
endfunction

function InitDispellableBuffsList takes nothing returns nothing
  call AddSomethingToPurgeList()
  call AddDispellableBuff('BPSE')
  call AddDispellableBuff('BSTN')
  call AddDispellableBuff('B0BM')
  call AddDispellableBuff('B0CF')
  call AddDispellableBuff('B07N')
  call AddDispellableBuff('B00Q')
  call AddDispellableBuff('B095')
  call AddDispellableBuff('B06Z')
  call AddDispellableBuff('B0C1')
  call AddDispellableBuff('BEer')
  call AddDispellableBuff('B0BQ')
  call AddDispellableBuff('Bprg')
  call AddDispellableBuff('B090')
  call AddDispellableBuff('B008')
  call AddDispellableBuff('B04B')
  call AddDispellableBuff('BNso')
  call AddDispellableBuff('B01N')
  call AddDispellableBuff('B033')
  call AddDispellableBuff('Bpoi')
  call AddDispellableBuff('BOhx')
  call AddDispellableBuff('B0E7')
  call AddDispellableBuff('BNpa')
  call AddDispellableBuff('B300')
endfunction

function Func4811 takes nothing returns nothing
  call Func2067()
endfunction

function Func4812 takes nothing returns nothing
  local integer SHN=tt_int1
  if SHN==0 then
    call TriggerAddAction(trigger003,code002)
  elseif SHN==1 then
    call TriggerAddAction(trigger005,code002)
  elseif SHN==2 then
    call TriggerAddAction(trigger004,code002)
  else
  endif
endfunction

function Func4813 takes nothing returns nothing
  set trigger003=CreateTrigger()
  call TriggerRegisterHumanUnitEvent(trigger003,EVENT_PLAYER_UNIT_ISSUED_ORDER)
  set trigger005=CreateTrigger()
  call TriggerRegisterHumanUnitEvent(trigger005,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
  set trigger004=CreateTrigger()
  call TriggerRegisterHumanUnitEvent(trigger004,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
endfunction

function Func4814 takes unit u returns nothing
  if FindItemOfType(u,Item_Real[integer270])!=null then
    call Func1335(u,false)
  endif
  if GetUnitAbilityLevel(u,'A0Q0')!=0 then
    call Func2333(u,'A0Q0','B07O',"Func2334")
  endif
  if GetUnitAbilityLevel(u,'AIba')!=0 then
    call Func2333(u,'AIba','BHab',"Func2335")
  endif
endfunction

function Func4815 takes nothing returns boolean
  local integer id
  if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT then
    set id=GetItemsIndex_NonMuted(GetManipulatedItem())
    if id==integer270 or id==integer271 then
      call Func1335(GetTriggerUnit(),true)
    elseif id==integer281 then
      call Func1340()
    elseif id==integer302 then
      call HideAbility('A3AX')
      call PipeOfInsightPickup()
    elseif id==integer288 or id==integer211 or id==integer212 or id==integer192 or id==integer193 then
      call Func4814(GetTriggerUnit())
    endif
  endif
  return false
endfunction

function Func4816 takes integer SPN,integer WVE returns nothing
  local integer i=0
  local integer a=0
  local integer offset=0xC
  loop
    set a=Memory[(SPN+offset*i+0x70)/4]
    if a>1 then
      set a=GetSomeAddressForAbility(a,Memory[(SPN+offset*i+0x74)/4])
      if a>0 then
        set Memory[a/4+0x74/4]=WVE
      endif
    endif
    set i=i+1
    exitwhen i>5
  endloop
endfunction

function Func4817 takes nothing returns boolean
  local integer i
  local item it
  local integer iid
  local unit HDE
  set unit003=GetSummoningUnit()
  set unit004=GetSummonedUnit()
  if IsUnitIllusion(unit004)==false then
    set i=GetUnitTypeId(unit004)
    if IsWardId(i)then
      if IsUnitInRegion(region010,unit004)then
        call Func1299(unit003,unit004)
        call RemoveUnit(unit004)
      elseif IsCourier(unit003)then
        call Func1299(unit003,unit004)
        call Error(GetOwningPlayer(unit004),GetObjectName('TX08'))
        call RemoveUnit(unit004)
      else
        call Func1298(unit004,unit003)
        if i=='oeye' then
          call TimedReveal(GetOwningPlayer(unit004),12,GetUnitX(unit004),GetUnitY(unit004),150)
        endif
      endif
    elseif Func0602(unit004)or Func0601(unit004)then
      if Func0601(unit004)then
        call AddTimedKeyToAgent(unit004,4265,8)
        call Func4116()
      endif
      call SelectUnitAddForPlayer(unit004,GetOwningPlayer(unit004))
    elseif Func0616(unit004)then
      call Func4305()
    elseif Func0600(unit004)then
      call Func4009()
    elseif Func0628(i)then
      call Func4310()
    endif
  else
    set i=GetUnitTypeId(unit004)
    set HDE=LoadUnitHandle(HY,GetHandleId(unit003),'ilsr')
    if HDE==null then
      if GetUnitAbilityLevel(unit004,'B012')>0 or GetUnitAbilityLevel(unit004,'Bman')>0 or GetUnitAbilityLevel(unit004,'B163')>0 then
        set HDE=unit003
      endif
    endif
    if HDE!=null then
      if GetUnitAbilityLevel(HDE,'A2WN')>0 then
        call UnitAddAbility3(unit004,'A2WN',GetUnitAbilityLevel(HDE,'A2WN'))
        call UnitAddAbility2(unit004,'A1ET')
      elseif GetUnitAbilityLevel(unit004,'A2WN')>0 then
        call UnitRemoveAbility(unit004,'A2WN')
      endif
      if LoadBoolean(HY,GetHandleId(HDE),'wndl')then
        call SetUnitBaseMovespeed(unit004,GetUnitBaseMovespeed(unit004)+real001)
      endif
      if LoadInteger(HY,GetHandleId(HDE),'eulb')>0 then
        call SetUnitBaseMovespeed(unit004,GetUnitBaseMovespeed(unit004)+real002*LoadInteger(HY,GetHandleId(HDE),'eulb'))
      endif
    endif
    if i=='QTW6' then
    elseif i=='U007' then
      call Func0980(unit004,'A35O')
    elseif i=='QTW4' then
      call UnitAddAbility(unit004,'A33R')
      call UnitRemoveAbility(unit004,'A33R')
    endif
    call UnitRemoveAbility(unit004,'A0JJ')
    call UnitRemoveAbility(unit004,'A081')
    call UnitRemoveAbility(unit004,'A09E')
    if GetUnitAbilityLevel(unit004,'A0VC')>0 then
      call Func4520(unit004)
    endif
    if GetUnitAbilityLevel(unit004,'A0ES')>0 then
      call UnitAddAbility3(unit004,'A31S',GetUnitAbilityLevel(unit004,'A0ES'))
    endif
    if GetUnitAbilityLevel(HDE,'A33P')>0 then
      call UnitAddAbility2(unit004,'A33P')
    endif
    call Func0634(unit004,true)
    if UnitInventorySize(unit004)>0 then
      if HDE!=null then
        call Func4816(GetUnitInventoryAbility(unit004),GetPlayerId(GetOwningPlayer(HDE)))
      endif
      call Func4814(unit004)
      if boolean052 then
        set i=0
        loop
          set it=UnitItemInSlot(unit004,i)
          set iid=GetItemsIndex_NonMuted(it)
          if iid==integer183 then
            call ReplaceItem(unit004,it,Item_Real[integer184],i)
          endif
          set i=i+1
          exitwhen i>5
        endloop
        set it=null
      endif
    endif
    set HDE=null
  endif
  return false
endfunction

function Func4818 takes nothing returns nothing
  call UnitRemoveAbility(GetEnumUnit(),'A3QO')
endfunction

function Func4819 takes nothing returns nothing
  call UnitRemoveAbility(GetChangingUnit(),'A3QO')
endfunction

function Func4820 takes unit SUN,unit SGE returns nothing
  local integer a=0
  local integer b
  local boolean needupd=false
  local integer array keys
  local unit u
  local integer WVE
  if SUN!=null then
    if LoadInteger(HY,GetHandleId(SUN),'Aneu')>0 then
      set a=LoadInteger(HY,GetHandleId(SUN),'Aneu')
    else
      set a=GetUnitAbility(SUN,'Aneu')
      if a>0 then
        call SaveInteger(HY,GetHandleId(SUN),'Aneu',a)
      endif
    endif
  endif
  if a<1 then
    return
  endif
  set b=ConvertHandle(SGE)
  set WVE=GetPlayerId(GetOwningPlayer(SGE))
  if b>0 and Memory[(a+0xC0+0xC*WVE)/4]!=0xFFFFFFFF then
    set Memory[(a+0xC0+0xC*WVE)/4]=Memory[(b+0xC)/4]
    set Memory[(a+0xC4+0xC*WVE)/4]=Memory[(b+0x10)/4]
  endif
endfunction

function Func4821 takes integer SYN,unit SGE returns nothing
  if SGE==null then
    return
  endif
  if SYN==1 then
    call Func4820(FurbolgHut_Top,SGE)
    call Func4820(GoblinMerch_Top,SGE)
    call Func4820(GoblinShop_Top,SGE)
  elseif SYN==2 then
    call Func4820(FurbolgHut_Bot,SGE)
    call Func4820(GoblinMerch_Bot,SGE)
    call Func4820(GoblinShop_Bot,SGE)
  elseif SYN==3 then
    call Func4820(SecretShopSent,SGE)
  elseif SYN==4 then
    call Func4820(SecretShopScrg,SGE)
  elseif SYN==5 then
    call Func4820(unit039,SGE)
    call Func4820(unit040,SGE)
    call Func4820(unit041,SGE)
    call Func4820(unit044,SGE)
    call Func4820(unit045,SGE)
    call Func4820(unit042,SGE)
    call Func4820(unit043,SGE)
    call Func4820(unit046,SGE)
    call Func4820(unit047,SGE)
    call Func4820(unit048,SGE)
    call Func4820(unit049,SGE)
    call Func4820(unit050,SGE)
    call Func4820(unit051,SGE)
  else
    call Func4820(unit086,SGE)
    call Func4820(unit087,SGE)
    call Func4820(unit088,SGE)
    call Func4820(unit091,SGE)
    call Func4820(unit092,SGE)
    call Func4820(unit089,SGE)
    call Func4820(unit090,SGE)
    call Func4820(unit093,SGE)
    call Func4820(unit094,SGE)
    call Func4820(unit095,SGE)
    call Func4820(unit096,SGE)
    call Func4820(unit097,SGE)
    call Func4820(unit098,SGE)
  endif
endfunction

function SideShopEnlighting takes nothing returns nothing
  local real A7X=128.
  local real D1E=1.
  local integer VDX='sslo'
  local unit u=GetEnumUnit()
  local player p=GetOwningPlayer(u)
  local integer WVE=GetPlayerId(p)
  local integer id=GetUnitTypeId(u)
  set booleans001[0]=IsUnitType(u,UNIT_TYPE_HERO)
  set booleans001[1]=(not booleans001[0])and Func0611(id)
  set booleans001[2]=(not booleans001[0])and(not booleans001[1])and IsCourier(u)
  if IsSentinel(p)then
    set p=Sentinels[0]
  elseif IsScourge(p)then
    set p=Scourges[0]
  endif
  if tt_unit1!=FurbolgHut_Bot and tt_unit1!=FurbolgHut_Top then
    if GetUnitTypeId(tt_unit1)!='uC74' then
      set VDX='bslo'
    else
      set VDX='xslo'
    endif
  endif
  if VDX=='sslo' then
    call SetFogModifierLifespan(p,D1E,tt_real1,tt_real2,A7X)
    if tt_unit1==FurbolgHut_Bot then
      call Func4821(2,u)
      call SetFogModifierLifespan(p,D1E,GetUnitX(GoblinMerch_Bot),GetUnitY(GoblinMerch_Bot),A7X)
      call SetFogModifierLifespan(p,D1E,GetUnitX(GoblinShop_Bot),GetUnitY(GoblinShop_Bot),A7X)
    else
      call Func4821(1,u)
      call SetFogModifierLifespan(p,D1E,GetUnitX(GoblinMerch_Top),GetUnitY(GoblinMerch_Top),A7X)
      call SetFogModifierLifespan(p,D1E,GetUnitX(GoblinShop_Top),GetUnitY(GoblinShop_Top),A7X)
    endif
  elseif VDX=='xslo'then
    call SetFogModifierLifespan(p,D1E,tt_real1,tt_real2,A7X)
    if tt_unit1==SecretShopSent then
      call Func4821(3,u)
    else
      call Func4821(4,u)
    endif
  else
    if tt_unit1==SentFountain then
      call Func4821(5,u)
      if IsUnitEnemy(u,Sentinels[0])then
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit039),GetUnitY(unit039),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit040),GetUnitY(unit040),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit041),GetUnitY(unit041),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit044),GetUnitY(unit044),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit045),GetUnitY(unit045),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit042),GetUnitY(unit042),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit043),GetUnitY(unit043),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit050),GetUnitY(unit050),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit048),GetUnitY(unit048),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit046),GetUnitY(unit046),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit051),GetUnitY(unit051),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit049),GetUnitY(unit049),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit047),GetUnitY(unit047),A7X)
      endif
    else
      call Func4821(0,u)
      if IsUnitEnemy(u,Scourges[0])then
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit086),GetUnitY(unit086),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit087),GetUnitY(unit087),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit088),GetUnitY(unit088),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit091),GetUnitY(unit091),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit092),GetUnitY(unit092),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit089),GetUnitY(unit089),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit090),GetUnitY(unit090),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit097),GetUnitY(unit097),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit095),GetUnitY(unit095),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit093),GetUnitY(unit093),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit098),GetUnitY(unit098),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit096),GetUnitY(unit096),A7X)
        call SetFogModifierLifespan(p,D1E,GetUnitX(unit094),GetUnitY(unit094),A7X)
      endif
    endif
  endif
  set u=null
endfunction

function IsHeroOrSpiritBear takes nothing returns boolean
  local unit u=GetFilterUnit()
  local boolean b=false
  local integer WVE=GetPlayerId(GetOwningPlayer(u))
  if GetWidgetLife(u)>0.9 then
    if booleans001[WVE*100+1]==false then
      if IsUnitType(u,UNIT_TYPE_HERO)and IsNotHeroID(u)==false and LoadBoolean(HY,GetHandleId(u),'HBRD')==false then
        set b=true
        set booleans001[WVE*100+1]=true
        call GroupRemoveUnit(group014,units001[WVE*100])
      elseif IsUnitSpiritBear(u)then
        set b=true
        set booleans001[WVE*100+2]=true
        call GroupRemoveUnit(group014,units001[WVE*100])
        set units001[WVE*100]=u
      elseif booleans001[WVE*100+2]==false and IsCourier(u)then
        set b=true
        set booleans001[WVE*100+3]=true
        call GroupRemoveUnit(group014,units001[WVE*100])
        set units001[WVE*100]=u
      elseif booleans001[WVE*100+3]==false and GetUnitTypeId(u)=='ncop' then
        set booleans001[WVE*100+4]=true
        set units001[WVE*100]=u
        set b=true
      endif
    endif
  endif
  set u=null
  return b
endfunction

function FlushTempShopsBooleans takes nothing returns nothing
  local integer i=1
  loop
    set booleans001[i*100+1]=false
    set booleans001[i*100+2]=false
    set booleans001[i*100+3]=false
    set booleans001[i*100+4]=false
    set units001[i*100]=null
    set i=i+1
    exitwhen i==12
  endloop
endfunction

function SideShopLightnings takes nothing returns nothing
  local group g=GetAvailableGroup()
  set group014=g
  set tt_unit1=FurbolgHut_Top
  set tt_real1=GetUnitX(FurbolgHut_Top)
  set tt_real2=GetUnitY(FurbolgHut_Top)
  call FlushTempShopsBooleans()
  call GroupEnumUnitsInRect(g,BotSideShopBuyRect,Condition(function IsHeroOrSpiritBear))
  call ForGroup(g,function SideShopEnlighting)
  set tt_unit1=FurbolgHut_Bot
  set tt_real1=GetUnitX(FurbolgHut_Bot)
  set tt_real2=GetUnitY(FurbolgHut_Bot)
  call FlushTempShopsBooleans()
  call GroupEnumUnitsInRect(g,TopSideShopBuyRect,Condition(function IsHeroOrSpiritBear))
  call ForGroup(g,function SideShopEnlighting)
  set tt_unit1=SecretShopSent
  set tt_real1=GetUnitX(SecretShopSent)
  set tt_real2=GetUnitY(SecretShopSent)
  call FlushTempShopsBooleans()
  call GroupEnumUnitsInRect(g,SentSecretShopBuyRect,Condition(function IsHeroOrSpiritBear))
  call ForGroup(g,function SideShopEnlighting)
  set tt_unit1=SecretShopScrg
  set tt_real1=GetUnitX(SecretShopScrg)
  set tt_real2=GetUnitY(SecretShopScrg)
  call FlushTempShopsBooleans()
  call GroupEnumUnitsInRect(g,ScrgSecretShopBuyRect,Condition(function IsHeroOrSpiritBear))
  call ForGroup(g,function SideShopEnlighting)
  set tt_unit1=SentFountain
  set tt_real1=GetUnitX(SentFountain)
  set tt_real2=GetUnitY(SentFountain)
  call FlushTempShopsBooleans()
  call GroupEnumUnitsInRange(g,tt_real1,tt_real2,1600.,Condition(function IsHeroOrSpiritBear))
  call ForGroup(g,function SideShopEnlighting)
  set tt_unit1=ScourgeFountain
  set tt_real1=GetUnitX(ScourgeFountain)
  set tt_real2=GetUnitY(ScourgeFountain)
  call FlushTempShopsBooleans()
  call GroupEnumUnitsInRange(g,tt_real1,tt_real2,1600.,Condition(function IsHeroOrSpiritBear))
  call ForGroup(g,function SideShopEnlighting)
  call KillGroup(g)
endfunction

function ExperimentalSideShop takes nothing returns nothing
  local trigger t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,1.,true)
  call TriggerAddCondition(t,Condition(function SideShopLightnings))
  set SentSecretShopBuyRect=Rect(-4956,1352,-3923,372)
  set ScrgSecretShopBuyRect=Rect(3820,402,2600,-757)
  set TopSideShopBuyRect=Rect(7792,-4044,6850,-5381)
  set BotSideShopBuyRect=Rect(-7376,4543,-6736,3166)
endfunction

function UpdateGoldColumnColor takes nothing returns nothing
  local integer a=GetFrameTextAddress("ResourceBarGoldText",0)
  if a>0 then
    set aResourceBarGoldText=a
  endif
endfunction 

function TowerCreateAndDoSomeSpecialThings takes player p,integer id,real x,real y,real f returns unit
  local unit u=CreateUnit(p,id,x,y,f)
  set fx1[integer007]=AddSpecialEffect("tower_range.mdx",GetUnitX(u),GetUnitY(u))
  if ConvertHandle(fx1[integer007])>0 then
    call WriteRealMemory(ConvertHandle(fx1[integer007])+0x20,1)
  endif
  call SaveUnitHandle(HY,GetHandleId(fx1[integer007]),0,u)
  set integer007=integer007+1
  return u
endfunction

function ObjectData__Init takes nothing returns nothing
	set H[1]=0xA22E726E
	set H[2]=0xD43D94C0
	set H[3]=0x6DE064C7
	set H[4]=0xFE8D4B2F
	set H[5]=0x345A287E
	set H[6]=0x13941BCF
	set H[7]=0xD822114D
	set H[8]=0xA79E1270
	set H[9]=0xFB2D4CF9
	set H[10]=0xCB25DDAE
	set H[11]=0x7B5E64D5
	set H[12]=0x88544672
	set H[13]=0xF201BF3F
	set H[14]=0x677CAF6E
	set H[15]=0x34502020
	set H[16]=0x5DD18D92
	set H[18]=0x320F2252
	set H[19]=0xCBB1F259
	set H[20]=0x5C5ED8C1
	set H[21]=0x922BB610
	set H[22]=0x7165A961
	set H[23]=0x35F39EDF
	set H[24]=0x056FA002
	set H[25]=0x58FEDA8B
	set H[26]=0x28F76B40
	set H[27]=0xD92FF267
	set H[28]=0xE625D404
	set H[29]=0x4FD34CD1
	set H[30]=0xC54E3D00
	set H[31]=0x9221ADB2
	set H[32]=0x2BC26B40
	set H[33]=0xCDF0DDAE
	set H[35]=0x99A2D007
	set H[36]=0x2A4FB66F
	set H[37]=0x601C93BE
	set H[38]=0x3F56870F
	set H[39]=0x03E47C8D
	set H[40]=0xD3607DB0
	set H[41]=0x26EFB839
	set H[42]=0xF6E848EE
	set H[43]=0xA720D015
	set H[44]=0xB416B1B2
	set H[45]=0x1DC42A7F
	set H[46]=0x933F1AAE
	set H[47]=0x60128B60
	set H[48]=0x921F9B39
	set H[49]=0x344E0DA7
	set H[50]=0x665D2FF9
	set H[52]=0x90ACE668
	set H[53]=0xC679C3B7
	set H[54]=0xA5B3B708
	set H[55]=0x6A41AC86
	set H[56]=0x39BDADA9
	set H[57]=0x8D4CE832
	set H[58]=0x5D4578E7
	set H[59]=0x0D7E000E
	set H[60]=0x1A73E1AB
	set H[61]=0x84215A78
	set H[62]=0xF99C4AA7
	set H[63]=0xC66FBB59
	set H[64]=0x0172B4D1
	set H[65]=0xA3A1273F
	set H[66]=0xD5B04991
	set H[67]=0x6F531998
	set H[69]=0x35CCDD4F
	set H[70]=0x1506D0A0
	set H[71]=0xD994C61E
	set H[72]=0xA910C741
	set H[73]=0xFCA001CA
	set H[74]=0xCC98927F
	set H[75]=0x7CD119A6
	set H[76]=0x89C6FB43
	set H[77]=0xF3747410
	set H[78]=0x68EF643F
	set H[79]=0x35C2D4F1
	set H[80]=0xCBA5D782
	set H[81]=0x6DD449F0
	set H[82]=0x9FE36C42
	set H[83]=0x39863C49
	set H[84]=0xCA3322B1
	set H[86]=0xDF39F351
	set H[87]=0xA3C7E8CF
	set H[88]=0x7343E9F2
	set H[89]=0xC6D3247B
	set H[90]=0x96CBB530
	set H[91]=0x47043C57
	set H[92]=0x53FA1DF4
	set H[93]=0xBDA796C1
	set H[94]=0x332286F0
	set H[95]=0xFFF5F7A2
	set H[96]=0xEC6BE431
	set H[97]=0x8E9A569F
	set H[98]=0xC0A978F1
	set H[99]=0x5A4C48F8
	set H[100]=0xEAF92F60
	set H[101]=0x20C60CAF
	set H[103]=0xC48DF57E
	set H[104]=0x9409F6A1
	set H[105]=0xE799312A
	set H[106]=0xB791C1DF
	set H[107]=0x67CA4906
	set H[108]=0x74C02AA3
	set H[109]=0xDE6DA370
	set H[110]=0x53E8939F
	set H[111]=0x20BC0451
	set H[112]=0x27DDEEB3
	set H[113]=0xCA0C6121
	set H[114]=0xFC1B8373
	set H[115]=0x95BE537A
	set H[116]=0x266B39E2
	set H[117]=0x5C381731
	set H[118]=0x3B720A82
	set H[120]=0xCF7C0123
	set H[121]=0x230B3BAC
	set H[122]=0xF303CC61
	set H[123]=0xA33C5388
	set H[124]=0xB0323525
	set H[125]=0x19DFADF2
	set H[126]=0x8F5A9E21
	set H[127]=0x5C2E0ED3
	set H[128]=0x5861ED90
	set H[129]=0xFA905FFE
	set H[130]=0x2C9F8250
	set H[131]=0xC6425257
	set H[132]=0x56EF38BF
	set H[133]=0x8CBC160E
	set H[134]=0x6BF6095F
	set H[135]=0x3083FEDD
	set H[137]=0x538F3A89
	set H[138]=0x2387CB3E
	set H[139]=0xD3C05265
	set H[140]=0xE0B63402
	set H[141]=0x4A63ACCF
	set H[142]=0xBFDE9CFE
	set H[143]=0x8CB20DB0
	set H[144]=0x04D2B307
	set H[145]=0xA7012575
	set H[146]=0xD91047C7
	set H[147]=0x72B317CE
	set H[148]=0x035FFE36
	set H[149]=0x392CDB85
	set H[150]=0x1866CED6
	set H[151]=0xDCF4C454
	set H[152]=0xAC70C577
	set H[154]=0xCFF890B5
	set H[155]=0x803117DC
	set H[156]=0x8D26F979
	set H[157]=0xF6D47246
	set H[158]=0x6C4F6275
	set H[159]=0x3922D327
	set H[160]=0x34DA2252
	set H[161]=0xD70894C0
	set H[162]=0x0917B712
	set H[163]=0xA2BA8719
	set H[164]=0x33676D81
	set H[165]=0x69344AD0
	set H[166]=0x486E3E21
	set H[167]=0x0CFC339F
	set H[168]=0xDC7834C2
	set H[169]=0x30076F4B
	set H[171]=0xB0388727
	set H[172]=0xBD2E68C4
	set H[173]=0x26DBE191
	set H[174]=0x9C56D1C0
	set H[175]=0x692A4272
	set H[176]=0x84A19B2B
	set H[177]=0x26D00D99
	set H[178]=0x58DF2FEB
	set H[179]=0xF281FFF2
	set H[180]=0x832EE65A
	set H[181]=0xB8FBC3A9
	set H[182]=0x9835B6FA
	set H[183]=0x5CC3AC78
	set H[184]=0x2C3FAD9B
	set H[185]=0x7FCEE824
	set H[186]=0x4FC778D9
	set H[188]=0x0CF5E19D
	set H[189]=0x76A35A6A
	set H[190]=0xEC1E4A99
	set H[191]=0xB8F1BB4B
	set H[192]=0x77ABB98E
	set H[193]=0x19DA2BFC
	set H[194]=0x4BE94E4E
	set H[195]=0xE58C1E55
	set H[196]=0x763904BD
	set H[197]=0xAC05E20C
	set H[198]=0x8B3FD55D
	set H[199]=0x4FCDCADB
	set H[200]=0x1F49CBFE
	set H[201]=0x72D90687
	set H[202]=0x42D1973C
	set H[203]=0xF30A1E63
	set H[205]=0x69AD78CD
	set H[206]=0xDF2868FC
	set H[207]=0xABFBD9AE
	set H[208]=0x0DFE40C1
	set H[209]=0xB02CB32F
	set H[210]=0xE23BD581
	set H[211]=0x7BDEA588
	set H[212]=0x0C8B8BF0
	set H[213]=0x4258693F
	set H[214]=0x21925C90
	set H[215]=0xE620520E
	set H[216]=0xB59C5331
	set H[217]=0x092B8DBA
	set H[218]=0xD9241E6F
	set H[219]=0x895CA596
	set H[220]=0x96528733
	set H[222]=0x757AF02F
	set H[223]=0x424E60E1
	set H[224]=0x98835092
	set H[225]=0x3AB1C300
	set H[226]=0x6CC0E552
	set H[227]=0x0663B559
	set H[228]=0x97109BC1
	set H[229]=0xCCDD7910
	set H[230]=0xAC176C61
	set H[231]=0x70A561DF
	set H[232]=0x40216302
	set H[233]=0x93B09D8B
	set H[234]=0x63A92E40
	set H[235]=0x13E1B567
	set H[236]=0x20D79704
	set H[237]=0x8A850FD1
	set H[239]=0xCCD370B2
	set H[240]=0xCBAFDFE0
	set H[241]=0x6DDE524E
	set H[242]=0x9FED74A0
	set H[243]=0x399044A7
	set H[244]=0xCA3D2B0F
	set H[245]=0x000A085E
	set H[246]=0xDF43FBAF
	set H[247]=0xA3D1F12D
	set H[248]=0x734DF250
	set H[249]=0xC6DD2CD9
	set H[250]=0x96D5BD8E
	set H[251]=0x470E44B5
	set H[252]=0x54042652
	set H[253]=0xBDB19F1F
	set H[254]=0x332C8F4E
endfunction

function Init_Sounds takes nothing returns nothing
  call NewSoundEnvironment("Default")
  call SetAmbientDaySound("FelwoodDay")
  call SetAmbientNightSound("FelwoodNight")
  call SetMapMusic("Music",true,0)
  set sound002=CreateSound("Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummoningLaunch1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound002,"DarkSummoningMissileLaunch")
  call SetSoundDuration(sound002,2624)
  call SetSoundChannel(sound002,10)
  set sound003=CreateSound("Abilities\\Spells\\Undead\\Possession\\PossessionMissileLaunch1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound003,"PossessionMissileLaunch")
  call SetSoundDuration(sound003,1335)
  call SetSoundChannel(sound003,10)
  set sound001=CreateSound("Sound\\Interface\\ArrangedTeamInvitation.wav",false,false,false,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound001,"ArrangedTeamInvitation")
  call SetSoundDuration(sound001,2914)
  call SetSoundVolume(sound001,115)
  set sound024=CreateSound("Sound\\Ambient\\DoodadEffects\\TheHornOfCenarius.wav",false,false,false,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound024,"HornOfCenariusSound")
  call SetSoundDuration(sound024,12121)
  call SetSoundVolume(sound024,115)
  set sound004=CreateSound("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound004,"BlinkTarget")
  call SetSoundDuration(sound004,1466)
  call SetSoundPitch(sound004,1.6)
  set sound005=CreateSound("Abilities\\Spells\\Human\\Blizzard\\BlizzardLoop1.wav",true,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound005,"BlizzardLoop")
  call SetSoundDuration(sound005,4000)
  set sound006=CreateSound("Buildings\\Undead\\TempleOfTheDamned\\TempleOfTheDamnedWhat.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound006,"TempleOfTheDamnedWhat")
  call SetSoundDuration(sound006,3518)
  call SetSoundDistanceCutoff(sound006,2000.0)
  set sound007=CreateSound("Abilities\\Spells\\Human\\Flare\\FlareTarget2.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound007,"Flare2")
  call SetSoundDuration(sound007,1344)
  call SetSoundDistanceCutoff(sound007,2000.0)
  set snd_Dominating=CreateSound("Sounds\\Dominating.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(snd_Dominating,1802)
  call SetSoundChannel(snd_Dominating,0)
  call SetSoundVolume(snd_Dominating,127)
  call SetSoundPitch(snd_Dominating,1.0)
  set sound009=CreateSound("Sounds\\Double_Kill.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound009,2012)
  call SetSoundChannel(sound009,0)
  call SetSoundVolume(sound009,127)
  call SetSoundPitch(sound009,1.0)
  set sound010=CreateSound("Sounds\\firstblood.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound010,1567)
  call SetSoundChannel(sound010,0)
  call SetSoundVolume(sound010,127)
  call SetSoundPitch(sound010,1.0)
  set sound011=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav",false,false,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound011,"GoblinSapperYesAttack")
  call SetSoundDuration(sound011,813)
  call SetSoundChannel(sound011,0)
  set sound012=CreateSound("Sounds\\GodLike.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound012,1828)
  call SetSoundChannel(sound012,0)
  call SetSoundVolume(sound012,127)
  call SetSoundPitch(sound012,1.0)
  set sound013=CreateSound("Sounds\\HolyShit.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound013,2325)
  call SetSoundChannel(sound013,0)
  call SetSoundVolume(sound013,127)
  call SetSoundPitch(sound013,1.0)
  set sound014=CreateSound("Buildings\\NightElf\\MoonWell\\MoonWellWhat1.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound014,"MoonWellWhat")
  call SetSoundDuration(sound014,2972)
  call SetSoundDistances(sound014,600.0,10000.0)
  call SetSoundDistanceCutoff(sound014,2000.0)
  set sound015=CreateSound("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaos.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound015,"MarkOfChaos")
  call SetSoundDuration(sound015,4000)
  set Sounds_KillingSpree=CreateSound("Sounds\\Killing_Spree.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(Sounds_KillingSpree,2377)
  call SetSoundChannel(Sounds_KillingSpree,0)
  call SetSoundVolume(Sounds_KillingSpree,127)
  call SetSoundPitch(Sounds_KillingSpree,1.0)
  set sound017=CreateSound("Sound\\Buildings\\Death\\NightElfBuildingDeathSmall1.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound017,"DeathNightElfBuildingCancel")
  call SetSoundDuration(sound017,3675)
  set sound018=CreateSound("Sounds\\MegaKill.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound018,2612)
  call SetSoundChannel(sound018,0)
  call SetSoundVolume(sound018,127)
  call SetSoundPitch(sound018,1.0)
  set sound019=CreateSound("Abilities\\Spells\\NightElf\\ShadowMeld\\ShadowMeld1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound019,"ShadowMeld")
  call SetSoundDuration(sound019,941)
  set sound020=CreateSound("Sounds\\MonsterKill.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound020,3344)
  call SetSoundChannel(sound020,0)
  call SetSoundVolume(sound020,127)
  call SetSoundPitch(sound020,1.0)
  set sound021=CreateSound("Sounds\\Ownage.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound021,2586)
  call SetSoundChannel(sound021,0)
  call SetSoundVolume(sound021,127)
  call SetSoundPitch(sound021,1.0)
  set sound022=CreateSound("Abilities\\Spells\\Undead\\Sleep\\SleepBirth1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound022,"Sleep")
  call SetSoundDuration(sound022,3203)
  set sound023=CreateSound("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagic.wav",false,true,true,10,10,"MissilesEAX")
  call SetSoundParamsFromLabel(sound023,"DevourMagicLaunch")
  call SetSoundDuration(sound023,1225)
  set sound025=CreateSound("Sounds\\triple_kill.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound025,1907)
  call SetSoundChannel(sound025,0)
  call SetSoundVolume(sound025,127)
  call SetSoundPitch(sound025,1.0)
  set sound026=CreateSound("Sounds\\Unstoppable.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound026,2038)
  call SetSoundChannel(sound026,0)
  call SetSoundVolume(sound026,127)
  call SetSoundPitch(sound026,1.0)
  set sound027=CreateSound("Abilities\\Spells\\Human\\DivineShield\\PaladinDivineShieldDeath1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound027,"DivineShieldDeath")
  call SetSoundDuration(sound027,1043)
  call SetSoundDistanceCutoff(sound027,1500.0)
  set sound028=CreateSound("Abilities\\Spells\\Items\\AIso\\SoulGem.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound028,"SoulGem")
  call SetSoundDuration(sound028,4474)
  set sound029=CreateSound("Sounds\\WhickedSick.mp3",false,false,false,10,10,"DefaultEAXON")
  call SetSoundDuration(sound029,2612)
  call SetSoundChannel(sound029,0)
  call SetSoundVolume(sound029,127)
  call SetSoundPitch(sound029,1.0)
  set sound030=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack4.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound030,"GoblinSapperYesAttack")
  call SetSoundDuration(sound030,1091)
  call SetSoundChannel(sound030,0)
  set sound031=CreateSound("Abilities\\Spells\\NightElf\\shadowstrike\\ShadowStrikeBirth1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound031,"ShadowStrikeBirth")
  call SetSoundDuration(sound031,2194)
  call SetSoundPitch(sound031,1.2)
  set sound032=CreateSound("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.wav",false,false,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound032,"ReviveHuman")
  call SetSoundDuration(sound032,3196)
  call SetSoundChannel(sound032,8)
  set sound033=CreateSound("Sounds\\UltraKill.mp3",false,false,false,10,10,"")
  call SetSoundDuration(sound033,1958)
  call SetSoundChannel(sound033,0)
  call SetSoundVolume(sound033,127)
  call SetSoundPitch(sound033,1.0)
  set sound034=CreateSound("Sounds\\Rampage.mp3",false,false,false,10,10,"")
  call SetSoundDuration(sound034,1195)
  call SetSoundChannel(sound034,0)
  call SetSoundVolume(sound034,127)
  call SetSoundPitch(sound034,1.0)
  set sound035=CreateSound("Units\\Orc\\AncestralGuardian\\AncestralGuardianAttack1.wav",false,true,true,10,10,"CombatSoundsEAX")
  call SetSoundParamsFromLabel(sound035,"AncestralGuardianAttack1")
  call SetSoundDuration(sound035,1181)
  set sound036=CreateSound("Abilities\\Spells\\Human\\Feedback\\Feedback.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound036,"Feedback")
  call SetSoundDuration(sound036,1222)
  set sound037=CreateSound("Units\\Undead\\Abomination\\AbominationPissed5.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound037,"AbominationPissed")
  call SetSoundDuration(sound037,1735)
  set sound038=CreateSound("Sound\\Units\\Death\\ArtilleryCorpseExplodeDeath1.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound038,"ArtilleryExplodeDeath")
  call SetSoundDuration(sound038,1486)
  set sound039=CreateSound("Units\\Undead\\CryptFiend\\CryptFiendPissed2.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound039,"CryptFiendPissed")
  call SetSoundDuration(sound039,3541)
  set sound040=CreateSound("Units\\Undead\\Banshee\\BansheeDeath.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound040,"BansheeDeath")
  call SetSoundDuration(sound040,2380)
  set sound041=CreateSound("Abilities\\Spells\\Other\\Volcano\\VolcanoLoop.wav",false,false,false,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound041,"VolcanoLoop")
  call SetSoundDuration(sound041,7616)
  set sound042=CreateSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav",false,false,false,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound042,"ThunderClap")
  call SetSoundDuration(sound042,3451)
  set sound043=CreateSound("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImage.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound043,"MirrorImage")
  call SetSoundDuration(sound043,1756)
  set sound044=CreateSound("Abilities\\Spells\\Human\\CloudOfFog\\CloudOfFogLoop1.wav",true,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound044,"CloudOfFogLoop")
  call SetSoundDuration(sound044,2038)
  call SetSoundPitch(sound044,0.9)
  set sound045=CreateSound("Sound\\Interface\\Hint.wav",false,false,false,10,10,"")
  call SetSoundParamsFromLabel(sound045,"Hint")
  call SetSoundDuration(sound045,2006)
  set sound046=CreateSound("war3mapImported\\pl_impact_stun.mp3",false,true,true,10,10,"SpellsEAX")
  call SetSoundDuration(sound046,1340)
  call SetSoundChannel(sound046,11)
  call SetSoundVolume(sound046,127)
  call SetSoundPitch(sound046,1.0)
  call SetSoundDistances(sound046,600.0,10000.0)
  call SetSoundDistanceCutoff(sound046,2000.0)
  call SetSoundConeAngles(sound046,0.0,0.0,127)
  call SetSoundConeOrientation(sound046,0.0,0.0,0.0)
  set sound047=CreateSound("Sound\\Buildings\\Fire\\OrcHumanLargeBuildingFire1.wav",true,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound047,"HumanFireLarge")
  call SetSoundDuration(sound047,3471)
  set sound048=CreateSound("Units\\Human\\Phoenix\\PhoenixEggWhat1.wav",false,false,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound048,"PhoenixEggWhat")
  call SetSoundDuration(sound048,1579)
  call SetSoundChannel(sound048,0)
  set sound049=CreateSound("Buildings\\Undead\\Ziggurat\\ZigguratUpgrade.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound049,"ZigguratUpgradeWhat")
  call SetSoundDuration(sound049,4203)
  call SetSoundDistances(sound049,600.0,10000.0)
  call SetSoundDistanceCutoff(sound049,3000.0)
  set sound050=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound050,"SpellStealMissileLaunch")
  call SetSoundDuration(sound050,1541)
  set sound051=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealTarget.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound051,"SpellStealTarget")
  call SetSoundDuration(sound051,984)
  set sound052=CreateSound("Abilities\\Spells\\Undead\\UndeadMine\\AcolyteMining.wav",false,true,true,10,10,"DefaultEAXON")
  call SetSoundParamsFromLabel(sound052,"AcolyteMining")
  call SetSoundDuration(sound052,4233)
  call SetSoundChannel(sound052,0)
  set sound053=CreateSound("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouch.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound053,"SpiritTouch")
  call SetSoundDuration(sound053,2043)
  call SetSoundChannel(sound053,11)
  set sound054=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound054,"FlameStrikeTarget")
  call SetSoundDuration(sound054,1927)
  set sound055=CreateSound("Units\\Orc\\SentryWard\\SentryWard.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound055,"SentryWardBirth")
  call SetSoundDuration(sound055,1499)
  set sound056=CreateSound("Units\\Orc\\StasisTotem\\StasisTotem.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound056,"StasisTotemDeath")
  call SetSoundDuration(sound056,1858)
  call SetSoundPitch(sound056,1.1)
  set sound057=CreateSound("Units\\Undead\\UndeadAirBarge\\AirBargeDeath1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound057,"UndeadAirBargeDeath")
  call SetSoundDuration(sound057,1985)
  set sound058=CreateSound("Abilities\\Spells\\Undead\\DeathandDecay\\DeathAndDecayTarget3.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound058,"DeathAndDecayTarget")
  call SetSoundDuration(sound058,1235)
  set sound059=CreateSound("Abilities\\Spells\\Other\\Submerge\\Submerge1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound059,"SubmergeSound")
  call SetSoundDuration(sound059,1524)
  set sound060=CreateSound("Abilities\\Spells\\Orc\\BattleStations\\OrcBurrowBattleStationsWhat1.wav",false,true,true,10,10,"SpellsEAX")
  call SetSoundParamsFromLabel(sound060,"BurrowBattleStations")
  call SetSoundDuration(sound060,3024)
  set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,10000,10000)
  set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,10000,10000)
  set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,10000,10000)
  set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,10000,10000)
  set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,10000,10000)
  set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,10000,10000)
  set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,10000,10000)
  set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,10000,10000)
  set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,10000,10000)
  set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,10000,10000)
  set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,10000,10000)
endfunction  

function BuyBack_Init takes nothing returns nothing
  set BuybackUnitId[0]='h09G'
  set BuybackUnitCost[0]=50
  set BuybackUnitId[1]='h09T'
  set BuybackUnitCost[1]=100
  set BuybackUnitId[2]='h09F'
  set BuybackUnitCost[2]=150
  set BuybackUnitId[3]='h09H'
  set BuybackUnitCost[3]=200
  set BuybackUnitId[4]='h09E'
  set BuybackUnitCost[4]=250
  set BuybackUnitId[5]='h09D'
  set BuybackUnitCost[5]=300
  set BuybackUnitId[6]='h09C'
  set BuybackUnitCost[6]=350
  set BuybackUnitId[7]='h09B'
  set BuybackUnitCost[7]=400
  set BuybackUnitId[8]='h099'
  set BuybackUnitCost[8]=450
  set BuybackUnitId[9]='h09A'
  set BuybackUnitCost[9]=500
  set BuybackUnitId[10]='h09J'
  set BuybackUnitCost[10]=550
  set BuybackUnitId[11]='h09K'
  set BuybackUnitCost[11]=600
  set BuybackUnitId[12]='h09L'
  set BuybackUnitCost[12]=650
  set BuybackUnitId[13]='h09M'
  set BuybackUnitCost[13]=700
  set BuybackUnitId[14]='h09N'
  set BuybackUnitCost[14]=750
  set BuybackUnitId[15]='h09O'
  set BuybackUnitCost[15]=800
  set BuybackUnitId[16]='h09P'
  set BuybackUnitCost[16]=850
  set BuybackUnitId[17]='h09Q'
  set BuybackUnitCost[17]=900
  set BuybackUnitId[18]='h09R'
  set BuybackUnitCost[18]=950
  set BuybackUnitId[19]='h09S'
  set BuybackUnitCost[19]=1000
  set BuybackUnitId[20]='h09I'
  set BuybackUnitCost[20]=1050
  set BuybackUnitId[21]='h09Z'
  set BuybackUnitCost[21]=1100
  set BuybackUnitId[22]='h09X'
  set BuybackUnitCost[22]=1150
  set BuybackUnitId[23]='h0A1'
  set BuybackUnitCost[23]=1200
  set BuybackUnitId[24]='h0A2'
  set BuybackUnitCost[24]=1250
  set BuybackUnitId[25]='h0A6'
  set BuybackUnitCost[25]=1300
  set BuybackUnitId[26]='h0A3'
  set BuybackUnitCost[26]=1350
  set BuybackUnitId[27]='h0A4'
  set BuybackUnitCost[27]=1400
  set BuybackUnitId[28]='h09Y'
  set BuybackUnitCost[28]=1450
  set BuybackUnitId[29]='h09V'
  set BuybackUnitCost[29]=1500
  set BuybackUnitId[30]='h0A0'
  set BuybackUnitCost[30]=1550
  set BuybackUnitId[31]='h09U'
  set BuybackUnitCost[31]=1600
  set BuybackUnitId[32]='h0AF'
  set BuybackUnitCost[32]=1650
  set BuybackUnitId[33]='h0AD'
  set BuybackUnitCost[33]=1700
  set BuybackUnitId[34]='h0AE'
  set BuybackUnitCost[34]=1750
  set BuybackUnitId[35]='h0AC'
  set BuybackUnitCost[35]=1800
  set BuybackUnitId[36]='h0AB'
  set BuybackUnitCost[36]=1850
  set BuybackUnitId[37]='h0AA'
  set BuybackUnitCost[37]=1900
  set BuybackUnitId[38]='h0A9'
  set BuybackUnitCost[38]=1950
  set BuybackUnitId[39]='h0AG'
  set BuybackUnitCost[39]=2000
  set BuybackUnitId[40]='h0A7'
  set BuybackUnitCost[40]=2050
  set BuybackUnitId[41]='h0AO'
  set BuybackUnitCost[41]=2100
  set BuybackUnitId[42]='h0AY'
  set BuybackUnitCost[42]=2150
  set BuybackUnitId[43]='h0AH'
  set BuybackUnitCost[43]=2200
  set BuybackUnitId[44]='h0AI'
  set BuybackUnitCost[44]=2250
  set BuybackUnitId[45]='h0AJ'
  set BuybackUnitCost[45]=2300
  set BuybackUnitId[46]='h0AP'
  set BuybackUnitCost[46]=2350
  set BuybackUnitId[47]='h0AQ'
  set BuybackUnitCost[47]=2400
  set BuybackUnitId[48]='h0AK'
  set BuybackUnitCost[48]=2450
  set BuybackUnitId[49]='h0AR'
  set BuybackUnitCost[49]=2500
  set BuybackUnitId[50]='h0AL'
  set BuybackUnitCost[50]=2550
  set BuybackUnitId[51]='h0AS'
  set BuybackUnitCost[51]=2600
  set BuybackUnitId[52]='h09W'
  set BuybackUnitCost[52]=2650
  set BuybackUnitId[53]='h0AM'
  set BuybackUnitCost[53]=2700
  set BuybackUnitId[54]='h0A8'
  set BuybackUnitCost[54]=2750
  set BuybackUnitId[55]='h0AT'
  set BuybackUnitCost[55]=2800
  set BuybackUnitId[56]='h0AU'
  set BuybackUnitCost[56]=2850
  set BuybackUnitId[57]='h0AN'
  set BuybackUnitCost[57]=2900
  set BuybackUnitId[58]='h0AV'
  set BuybackUnitCost[58]=2950
  set BuybackUnitId[59]='h0AW'
  set BuybackUnitCost[59]=3000
  set BuybackUnitId[60]='n12P'
  set BuybackID[0]=BuybackUnitId[0]
  set BuybackID[1]=BuybackUnitId[0]
  set BuybackID[2]=BuybackUnitId[0]
  set BuybackID[3]=BuybackUnitId[0]
  set BuybackID[4]=BuybackUnitId[0]
  set BuybackID[5]=BuybackUnitId[0]
  set BuybackID[6]=BuybackUnitId[0]
  set BuybackID[7]=BuybackUnitId[0]
  set BuybackID[8]=BuybackUnitId[0]
  set BuybackID[9]=BuybackUnitId[0]
  set BuybackID[10]=BuybackUnitId[0]
  set BuybackID[11]=BuybackUnitId[0]
  set BuybackID[12]=BuybackUnitId[0]
  set BuybackID[13]=BuybackUnitId[0]
  set BuybackID[14]=BuybackUnitId[0]
endfunction 

function GhostBotSup_GetMode takes nothing returns nothing
	local integer i
	local integer j
	local integer h
	local integer v
	local string s="abcdefghijklmnopqrstuvwxyz0123456789 -=,."
	local integer array ar
	local boolean array b
	set b[0]=true
	set b[50]=true
	set b[60]=true
	set b[70]=true
	set b[80]=true
	set b[90]=true
	set b[100]=true
	set i=0
	set j=0
	loop
		if b[j]then
			set j=j+1
		endif
		exitwhen j>=256
		set ar[j]=i
		set i=i+1
		set j=j+1
	endloop
	set i=0
	loop
		exitwhen i>=12
		set h=R2I(100*GetPlayerHandicap(Player(i)))
		if not b[h]then
			set h=ar[h]
			set v=h/ 6
			set h=h-v*6
			call SetPlayerHandicap(Player(i),1)
			set HCLstring=HCLstring+SubString(s,v,v+1)
		endif
		set i=i+1
	endloop
endfunction
 
function Map_init_Something takes nothing returns nothing
  call SetCameraBounds(-7552.0+GetCameraMargin(CAMERA_MARGIN_LEFT),-7680.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7552.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),7424.0-GetCameraMargin(CAMERA_MARGIN_TOP),-7552.0+GetCameraMargin(CAMERA_MARGIN_LEFT),7424.0-GetCameraMargin(CAMERA_MARGIN_TOP),7552.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7680.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
  call SetDayNightModels("Environment\\DNC\\DNCFelwood\\DNCFelwoodTerrain\\DNCFelwoodTerrain.mdl","Environment\\DNC\\DNCFelwood\\DNCFelwoodUnit\\DNCFelwoodUnit.mdl")
  call SetWaterBaseColor(0,0,255,255)
  call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")
  set weathereffect002=AddWeatherEffect(bj_mapInitialPlayableArea,'RAhr')
  set weathereffect001=AddWeatherEffect(bj_mapInitialPlayableArea,'SNbs')
  set weathereffect003=AddWeatherEffect(bj_mapInitialPlayableArea,'LRma')
  set weathereffect004=AddWeatherEffect(bj_mapInitialPlayableArea,'WOlw')
endfunction  

function Init_RegionAndRect takes nothing returns nothing
  set region005=CreateRegion()
  call RegionAddRect(region005,Rect(3008,-2016,4448,-2784))
  set rect014=Rect(3392,5344,3136,5088)
  set rect013=Rect(4384,3232,4128,2976)
  set rect012=Rect(6496,3136,6240,2880)
  set rect018=Rect(-6688,-4672,-6432,-4416)
  set rect019=Rect(-5088,-5216,-4832,-4960)
  set rect017=Rect(-3680,-6720,-3424,-6464)
  set rect010=Rect(0,-7423,1266,-6596)
  set location008=GetRectCenter(rect010)
  set rect005=Rect(6664,-256,6408,-0)
  set location007=GetRectCenter(rect005)
  set rect006=Rect(2928,-1428,2672,-1172)
  set location006=GetRectCenter(rect006)
  set gg_rct_Hero_Creation_NE=Rect(-7104,-7232,-6848,-6976)
  set gg_rct_Hero_Creation_UD=Rect(7104,5952,6848,5696)
  set rect022=Rect(-7680,-8032,-6176,-6240)
  set rect021=Rect(7676,6600,6300,5246)
  set SentFountainForItemsRect=Rect(-7936,-7776,-5920,-5760)
  set ScrgFountainForItemsRect=Rect(7676,6600,5800,4746)
  set gg_rct_Allpick_Sent=Rect(-7744,7776,-6528,6560)
  set gg_rct_Allpick_Scourge=Rect(-7744,7776,-6528,6560)
  set rect023=Rect(-2240,1114,-2112,986)
  set rect020=Rect(2944,-2878,2816,-2750)
  set rect025=Rect(-3000,-700,-3000,-700)
  set rect037=Func0417(false,-3264,-192,-2496,-960)
  set rect026=Rect(1644,-4020,1644,-4020)
  set rect038=Func0417(false,1152,-3776,2368,-5120)
  set rect029=Rect(3050,-5120,3050,-5120)
  set rect041=Func0417(false,2754,-4992,3584,-5824)
  set rect031=Rect(4570,-4096,4570,-4096)
  set rect044=Func0417(false,3968,-3968,4928,-4992)
  set rect033=Rect(-235,-3844,-235,-3844)
  set rect045=Func0417(true,-960,-3328,128,-4032)
  set rect051=Rect(-1586,-5020,-1586,-5020)
  set rect050=Func0417(true,-2180,-4544,-1408,-5248)
  set rect052=Rect(-3514,250,-3514,250)
  set rect053=Func0417(false,-4292,704,-3072,-192)
  set NeutralsSpot_ScAncients_Spawn=Rect(4220,-1230,4220,-1230)
  set rect036=Func0417(true,3520,-960,4608,-1728)
  set rect027=Rect(-4480,2960,-4480,2960)
  set rect039=Func0417(false,-4960,3520,-3648,2688)
  set rect028=Rect(-3070,3920,-3070,3920)
  set rect040=Func0417(false,-3392,4352,-2624,3392)
  set rect030=Rect(-1566,1996,-1566,1996)
  set rect042=Func0417(true,-1920,2560,-896,1600)
  set rect032=Rect(1320,2736,1320,2736)
  set rect043=Func0417(false,512,3200,1664,2240)
  set rect049=Rect(-224,3042,-224,3042)
  set rect048=Func0417(false,-768,3520,64,2624)
  set rect054=Rect(4370,-20,4370,-20)
  set rect055=Func0417(false,3520,384,4800,-576)
  set rect056=Rect(-8160,-8192,-3712,-4352)
  set rect057=Rect(-8192,-4360,-4640,-3552)
  set rect058=Rect(-3800,-7744,-3510,-5152)
  set rect068=Rect(-3490,-7000,-2864,-6168)
  set rect069=Rect(-4030,-4000,-4640,-4408)
  set rect070=Rect(-6938,-3664,-6048,-2884)
  set rect066=Rect(-6944,-1792,-5248,-224)
  set rect074=Rect(-3928,-3712,-2496,-2272)
  set rect067=Rect(-1536,-7424,640,-6048)
  set rect059=Rect(3000,4064,8032,7776)
  set rect060=Rect(4440,1952,8000,4000)
  set rect061=Rect(4426,2816,3312,4088)
  set rect073=Rect(5800,1185,6756,2064)
  set rect071=Rect(2524,5591,3000,4624)
  set rect072=Rect(4640,2868,3232,2408)
  set rect063=Rect(-1088,4876,768,6324)
  set rect064=Rect(1600,824,3456,2232)
  set rect065=Rect(5504,-1056,7200,512)
  set rect077=Rect(-2352,816,-2000,1328)
  set rect079=Rect(-3908,4096,-3351,4696)
  set rect081=Rect(3024,-452,3824,220)
  set rect078=Rect(2528,-3104,2924,-2400)
  set rect080=Rect(3680,-5816,4416,-5176)
  set rect082=Rect(-4608,-248,-3872,392)
  set rect062=Rect(-8000,6376,-6304,7752)
  set rect075=rect022
  set rect076=rect021
  set region008=CreateRegion()
  call RegionAddRect(region008,Rect(1240,4200,960,3950))
  call RegionAddRect(region008,Rect(-1365,-5269,-1024,-4900))
  call RegionAddRect(region008,Rect(-4784,-1296,-4400,-848))
  call RegionAddRect(region008,Rect(-3727,-489,-3400,-200))
  call RegionAddRect(region008,Rect(-5296,1400,-5050,1600))
  call RegionAddRect(region008,Rect(5180,370,5464,594))
  call RegionAddRect(region008,Rect(4632,-2060,4432,-1700))
  set region007=CreateRegion()
  call RegionAddRect(region007,Rect(6876,-3566,7644,-3214))
  call RegionAddRect(region007,Rect(-6650,1936,-7300,2698))
  call RegionAddRect(region007,Rect(-4497,-1420,-3984,-1808))
  call RegionAddRect(region007,Rect(-4816,-1424,-5300,-1820))
  call RegionAddRect(region007,Rect(-5600,-1280,-5295,-600))
endfunction  

function create_sent_buildings takes nothing returns nothing
  set SentFountain=CreateUnit(Sentinels[0],'nfoh',-7392,-7520,45)
  call CreateUnit(Sentinels[0],'o00G',GetUnitX(SentFountain),GetUnitY(SentFountain),270)
  set unit039=CreateUnit(player004,'n12B',-6592,-7488,340)
  set unit040=CreateUnit(player004,'n12N',-5952,-6976,120)
  set unit041=CreateUnit(player004,'hC95',-7040,-7552,270)
  set unit044=CreateUnit(player004,'e025',-6848,-7552,270)
  set unit045=CreateUnit(player004,'n133',-6464,-7328,170)
  set unit042=CreateUnit(player004,'n01K',-6464,-7056,200)
  set unit043=CreateUnit(player004,'nC38',-6464,-6976,200)
  set unit050=CreateUnit(player004,'n009',-6848,-6592,270)
  set unit048=CreateUnit(player004,'n002',-6976,-6592,280)
  set unit046=CreateUnit(player004,'n00V',-7104,-6592,300)
  set unit051=CreateUnit(player004,'n0HE',-7232,-6656,320)
  set unit049=CreateUnit(player004,'n00X',-7296,-6784,340)
  set unit047=CreateUnit(player004,'n00W',-7360,-6912,350)
  set unit052=CreateUnit(Sentinels[0],'etol',-5888,-6016,270)
  set unit053=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e00R',-6048,1248,90)
  set unit054=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e00R',-1568,-2080,45)
  set unit055=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e00R',4960,-6688,45)
  set unit056=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e011',-6112,-1440,90)
  set unit057=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e011',-3488,-3360,45)
  set unit058=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e011',-32,-6816,0)
  set Sentinels_Tier3_Top=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e00S',-6560,-3936,90)
  set Sentinels_Tier3_Mid=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e00S',-4704,-4832,45)
  set Sentinels_Tier3_Bot=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e00S',-3808,-6624,0)
  set unit062=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e019',-5728,-5536,45)
  set unit063=TowerCreateAndDoSomeSpecialThings(Sentinels[0],'e019',-5408,-5856,45)
  set unit064=CreateUnit(Sentinels[0],'eaom',-6336,-4288,240)
  set unit065=CreateUnit(Sentinels[0],'eaom',-4736,-5248,240)
  set unit066=CreateUnit(Sentinels[0],'eaom',-4160,-6848,300)
  set unit067=CreateUnit(Sentinels[0],'eaoe',-6784,-4288,300)
  set unit068=CreateUnit(Sentinels[0],'eaoe',-5120,-4864,250)
  set unit069=CreateUnit(Sentinels[0],'eaoe',-4160,-6400,300)
  set unit070=CreateUnit(Sentinels[0],'emow',-5760,-4480,270)
  set unit071=CreateUnit(Sentinels[0],'emow',-6784,-4736,270)
  set unit072=CreateUnit(Sentinels[0],'emow',-5312,-3904,270)
  set unit073=CreateUnit(Sentinels[0],'emow',-5248,-4352,270)
  set unit074=CreateUnit(Sentinels[0],'emow',-5184,-5312,270)
  set unit075=CreateUnit(Sentinels[0],'emow',-6016,-5376,270)
  set unit076=CreateUnit(Sentinels[0],'emow',-4032,-5056,270)
  set unit077=CreateUnit(Sentinels[0],'emow',-4608,-5568,270)
  set unit078=CreateUnit(Sentinels[0],'emow',-5248,-6142,270)
  set unit079=CreateUnit(Sentinels[0],'emow',-3968,-5696,270)
  set unit080=CreateUnit(Sentinels[0],'emow',-4608,-6848,270)
  set unit081=CreateUnit(Sentinels[0],'eaow',-6336,-4736,300)
  set unit082=CreateUnit(Sentinels[0],'eaow',-4608,-6400,310)
  set unit083=CreateUnit(Sentinels[0],'edob',-6464,-5632,270)
  set unit084=CreateUnit(Sentinels[0],'edob',-5376,-6656,0)
  call SetPlayerAbilityAvailable(player004,'Aro1',false)
  call SetUnitColor(unit041,playercolor001)
  call SetUnitColor(unit044,playercolor001)
  call SetUnitColor(unit043,playercolor002)
  call SetUnitColor(unit042,playercolor002)
  call SetUnitColor(unit046,playercolor002)
  call SetUnitColor(unit047,playercolor002)
  call SetUnitColor(unit048,playercolor002)
  call SetUnitColor(unit049,playercolor002)
  call SetUnitColor(unit050,playercolor002)
endfunction

function create_scrg_buildings takes nothing returns nothing
  set ScourgeFountain=CreateUnit(Scourges[0],'ndfl',7392,6240,270)
  call CreateUnit(Scourges[0],'o00G',GetUnitX(ScourgeFountain),GetUnitY(ScourgeFountain),270)
  set unit086=CreateUnit(player004,'n12B',7360,5440,20)
  set unit087=CreateUnit(player004,'n12N',6848,4800,210)
  set unit088=CreateUnit(player004,'nC35',7424,5888,270)
  set unit091=CreateUnit(player004,'u00Q',7424,5696,270)
  set unit092=CreateUnit(player004,'n133',7200,5312,110)
  set unit089=CreateUnit(player004,'n01K',7024,5312,120)
  set unit090=CreateUnit(player004,'nC38',6848,5312,120)
  set unit097=CreateUnit(player004,'n009',6464,5696,0)
  set unit095=CreateUnit(player004,'n002',6464,5824,350)
  set unit093=CreateUnit(player004,'n00V',6464,5952,330)
  set unit098=CreateUnit(player004,'n0HE',6528,6080,310)
  set unit096=CreateUnit(player004,'n00X',6656,6144,290)
  set unit094=CreateUnit(player004,'n00W',6784,6208,280)
  set unit099=CreateUnit(Scourges[0],'unpl',5504,4416,220)
  set unit100=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00M',-4640,5472,270)
  set unit101=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00M',1108,-224,270)
  set unit102=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00M',6240,-2240,270)
  set unit103=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00D',96,5472,270)
  set unit104=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00D',2592,1568,270)
  set unit105=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00D',6304,-160,270)
  set unit106=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00N',3552,5120,270)
  set unit107=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00N',4320,3168,270)
  set unit108=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00N',6368,2400,270)
  set unit109=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00T',5408,3936,270)
  set unit110=TowerCreateAndDoSomeSpecialThings(Scourges[0],'u00T',5088,4256,270)
  set unit111=CreateUnit(Scourges[0],'usep',3904,4992,270)
  set unit112=CreateUnit(Scourges[0],'usep',4736,3200,270)
  set unit113=CreateUnit(Scourges[0],'usep',6592,2752,270)
  set unit114=CreateUnit(Scourges[0],'utod',3904,5440,270)
  set unit115=CreateUnit(Scourges[0],'utod',4352,3584,270)
  set unit116=CreateUnit(Scourges[0],'utod',6144,2752,270)
  set unit117=CreateUnit(Scourges[0],'uzig',4352,5440,270)
  set unit118=CreateUnit(Scourges[0],'uzig',3840,4352,270)
  set unit119=CreateUnit(Scourges[0],'uzig',4864,4736,270)
  set unit120=CreateUnit(Scourges[0],'uzig',3648,3520,270)
  set unit121=CreateUnit(Scourges[0],'uzig',4672,2560,270)
  set unit122=CreateUnit(Scourges[0],'uzig',4672,3904,270)
  set unit123=CreateUnit(Scourges[0],'uzig',5056,3520,270)
  set unit124=CreateUnit(Scourges[0],'uzig',5888,3712,270)
  set unit125=CreateUnit(Scourges[0],'uzig',5504,2752,270)
  set unit126=CreateUnit(Scourges[0],'uzig',6592,3200,270)
  set unit127=CreateUnit(Scourges[0],'uzig',4992,2240,270)
  set unit128=CreateUnit(Scourges[0],'usap',4352,4992,270)
  set unit129=CreateUnit(Scourges[0],'usap',6144,3200,270)
  set unit130=CreateUnit(Scourges[0],'ubon',5312,5184,270)
  set unit131=CreateUnit(Scourges[0],'ubon',6336,4160,270)
  call SetUnitColor(unit088,ConvertPlayerColor(6))
  call SetUnitColor(unit090,playercolor003)
  call SetUnitColor(unit089,playercolor003)
  call SetUnitColor(unit093,playercolor003)
  call SetUnitColor(unit094,playercolor003)
  call SetUnitColor(unit095,playercolor003)
  call SetUnitColor(unit096,playercolor003)
  call SetUnitColor(unit097,playercolor003)
  call SetUnitColor(unit086,playercolor003)
  call SetUnitColor(unit087,playercolor003)
endfunction  

function setup_system takes nothing returns nothing
  set DamageBonusSystem[0]='A17F'
  set DamageBonusSystem[1]='A17G'
  set DamageBonusSystem[2]='A17H'
  set DamageBonusSystem[3]='A17C'
  set DamageBonusSystem[4]='A17D'
  set DamageBonusSystem[5]='A17E'
  set DamageBonusSystem[6]='A17J'
  set DamageBonusSystem[7]='A17I'
  set DamageBonusSystem[8]='A17L'
  set MaxHPBonusSystem[0]='A348'
  set MaxHPBonusSystem[1]='A349'
  set MaxHPBonusSystem[2]='A34A'
  set MaxHPBonusSystem[3]='A34B'
  set MaxHPBonusSystem[4]='A34C'
  set MaxHPBonusSystem[5]='A34D'
  set MaxHPBonusSystem[6]='A34E'
  set MaxHPBonusSystem[7]='A34F'
  set MaxHPBonusSystem[8]='A34G'
  set MaxHPBonusSystem[9]='A34H'
  set MaxHPBonusSystem[10]='A34I'
  set MaxHPBonusSystem[11]='A34J'
  set MaxHPBonusSystem[12]='A34K'
  set MaxHPBonusSystem[13]='A34L'
  set HPBonusSystem[0]='A1QE'
  set HPBonusSystem[1]='A1QF'
  set HPBonusSystem[2]='A1QI'
  set HPBonusSystem[3]='A1QK'
  set HPBonusSystem[4]='A1QJ'
  set HPBonusSystem[5]='A1QH'
  set HPBonusSystem[6]='A1QO'
  set HPBonusSystem[7]='A1QN'
  set HPBonusSystem[8]='A1QM'
  set HPBonusSystem[9]='A1QG'
  set HPBonusSystem[10]='A1QQ'
  set BonusAttackSpeed[0]='A1GK'
  set BonusAttackSpeed[1]='A1GL'
  set BonusAttackSpeed[2]='A1GJ'
  set BonusAttackSpeed[3]='A1GP'
  set BonusAttackSpeed[4]='A1GM'
  set BonusAttackSpeed[5]='A1GN'
  set BonusAttackSpeed[6]='A1GO'
  set BonusAttackSpeed[7]='A1GI'
  set BonusAttackSpeed[8]='A1GQ'
  set NegativeArmorSystem[0]='A1CM'
  set NegativeArmorSystem[1]='A1CK'
  set NegativeArmorSystem[2]='A1CF'
  set NegativeArmorSystem[3]='A1CI'
  set NegativeArmorSystem[4]='A1CG'
  set NegativeArmorSystem[5]='A1CH'
  set ArmletStrengthSystem[0]='A2VP'
  set ArmletStrengthSystem[1]='A2VQ'
  set ArmletStrengthSystem[2]='A2VR'
  set ArmletStrengthSystem[3]='A2VS'
  set ArmletStrengthSystem[4]='A2VT'
endfunction    

function main takes nothing returns nothing
  local integer i
  local player p
  local unit u
  local trigger t
  local timer tt
  local integer k=0
  local integer j
  local region T1X
  local integer ZAE
  local integer QIE
  local integer ZBE
  local integer ZCE
  local string ZJE
  local integer array JTX
  local boolean array DSO
  loop
    set bj_FORCE_PLAYER[k]=CreateForce()
    call ForceAddPlayer(bj_FORCE_PLAYER[k],Player(k))
    set k=k+1
    exitwhen k==16
  endloop
  call ExecuteFunc("Ascii__onInit")
  call ExecuteFunc("HexNumber__onInit")
  set gamecache001=InitGameCache("dr.x")
  call InitMemoryHack()
  call ObjectData__Init()
  call FuncSetMainFuncWork(true)
  call FuncFixModelCollisionSphere("buildings\\nightelf\\AncientProtector\\AncientProtector.mdx",0,0,120,100)
  call FuncPatchModel("units\\other\\DranaiAkama\\DranaiAkama.mdx","GondorCollisionDefault.bin")
  call Map_init_Something()
  call Init_Sounds()
  call Init_RegionAndRect()
  call ConfigureNeutralVictim()
  set ReturnTrueBoolexpr=Filter(function ReturnTrue)
  set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)
  set filterEnumDestructablesInCircleBJ=Filter(function DestructablesInCircleFilter)
  set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)
  set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)
  set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)
  set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)
  set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)
  set bj_FORCE_ALL_PLAYERS=CreateForce()
  call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)
  set bj_cineModePriorSpeed=GetGameSpeed()
  set bj_cineModePriorFogSetting=IsFogEnabled()
  set bj_cineModePriorMaskSetting=IsFogMaskEnabled()
  set k=0
  loop
    exitwhen k>=bj_MAX_QUEUED_TRIGGERS
    set bj_queuedExecTriggers[k]=null
    set bj_queuedExecUseConds[k]=false
    set k=k+1
  endloop
  set j=0
  set k=0
  loop
    exitwhen k>=12
    if(GetPlayerController(Player(k))==MAP_CONTROL_USER and GetPlayerSlotState(Player(k))==PLAYER_SLOT_STATE_PLAYING)then
      set j=j+1
    endif
    set k=k+1
  endloop
  set bj_isSinglePlayer=(j==1)
  call DelayedSuspendDecayCreate()
  set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1
  call InitQueuedTriggers()
  call InitRescuableBehaviorBJ()
  call InitDNCSounds()
  call InitMapRects()
  call InitSummonableCaps()
  set real007=GetRectMinY(bj_mapInitialPlayableArea)
  set real008=GetRectMaxY(bj_mapInitialPlayableArea)
  set real009=GetRectMinX(bj_mapInitialPlayableArea)
  set real010=GetRectMaxX(bj_mapInitialPlayableArea)
  set i=0
  loop
    set bj_stockAllowedPermanent[i]=false
    set bj_stockAllowedCharged[i]=false
    set bj_stockAllowedArtifact[i]=false
    set i=i+1
    exitwhen i>10
  endloop
  call SetAllItemTypeSlots(11)
  call SetAllUnitTypeSlots(11)
  set bj_stockUpdateTimer=CreateTimer()
  call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function Func0491)
  set bj_stockItemPurchased=CreateTrigger()
  call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player(15),EVENT_PLAYER_UNIT_SELL_ITEM,null)
  call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)
  call DetectGameStarted()
  set p=Player(15)
  set SecretShopSent=CreateUnit(p,'uC74',-4547,853,0)
  set SecretShopScrg=CreateUnit(p,'uC74',2930,-94,0)
  set GoblinShop_Top=CreateUnit(p,'u00Z',-7392,3840,0)
  set GoblinMerch_Top=CreateUnit(p,'u010',-7392,4032,270)
  set FurbolgHut_Top=CreateUnit(p,'n12K',-7296,3936,0)
  set GoblinShop_Bot=CreateUnit(p,'u00Z',7680,-4736,270)
  set GoblinMerch_Bot=CreateUnit(p,'u010',7616,-4544,180)
  set FurbolgHut_Bot=CreateUnit(p,'n12K',7584,-4640,240)
  call SetUnitColor(GoblinMerch_Bot,ConvertPlayerColor(12))
  call SetUnitColor(GoblinShop_Bot,ConvertPlayerColor(12))
  call SetUnitColor(FurbolgHut_Top,ConvertPlayerColor(12))
  call SetUnitColor(GoblinMerch_Top,ConvertPlayerColor(12))
  call SetUnitColor(GoblinShop_Top,ConvertPlayerColor(12))
  call SetUnitColor(FurbolgHut_Bot,ConvertPlayerColor(12))
  call ExperimentalSideShop()
  set AttackToLeft=CreateUnit(p,'e00D',-5805,5058,212)
  set AttackToMid=CreateUnit(p,'e00B',-592,-914,325)
  set AttackToRight=CreateUnit(p,'e00A',5613,-6450,64)
  set i=0
  loop
    set udg_Colors[i]=""
    set HeroRespawnTimer[i]=CreateTimer()
    set LeftAt[i]="Here"
    set i=i+1
    exitwhen(i>13)
  endloop
  set integer075=3
  set integer076=1
  set i=0
  set t=CreateTrigger()
  call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
  call TriggerAddCondition(t,Condition(function Func4754))
  set trigger011=CreateTrigger()
  call TriggerAddCondition(trigger011,Condition(function Func4753))
  call AddWrapper("Func4659",-1)
  set Force_Elfs=CreateForce()
  set Force_Unds=CreateForce()
  set group015=CreateGroup()
  set AllPlayers=CreateForce()
  set boolean095=true
  set Repick_Allowed=true
  call GhostBotSup_GetMode()
  call Func0509()
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,15,true)
  call TriggerAddCondition(t,Condition(function Func0515))
  call FlushGameCache(InitGameCache("dr.x"))
  call setup_system()
  set trigger031=CreateTrigger()
  call TriggerAddCondition(trigger031,Condition(function Func0930))
  call BuyBack_Init()
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DROP_ITEM)
  call TriggerAddCondition(t,Condition(function Func0939))
  set GlobalTimer=CreateTimer()
  call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)
  call SuspendTimeOfDay(false)
  call SetTimeOfDayScale(0.5)
  call SetCreepCampFilterState(true)
  call TimerStart(GlobalTimer,99999.00,false,null)
  set Sentinels[0]=Player(0)
  set Sentinels[1]=Player(1)
  set Sentinels[2]=Player(2)
  set Sentinels[3]=Player(3)
  set Sentinels[4]=Player(4)
  set Sentinels[5]=Player(5)
  set Scourges[0]=Player(6)
  set Scourges[1]=Player(7)
  set Scourges[2]=Player(8)
  set Scourges[3]=Player(9)
  set Scourges[4]=Player(10)
  set Scourges[5]=Player(11)
  set Neutrals=Player(12)
  set player004=Player(15)
  set location010=GetRectCenter(rect014)
  set location009=GetRectCenter(rect013)
  set location011=GetRectCenter(rect012)
  set location014=GetRectCenter(rect018)
  set location012=GetRectCenter(rect019)
  set location013=GetRectCenter(rect017)
  set location015=GetRectCenter(rect023)
  set location016=GetRectCenter(rect020)
  set boolean092=true
  call create_sent_buildings()
  call create_scrg_buildings()
  call TimedReveal(Sentinels[0],0.1,0,0,99999)
  call TimedReveal(Scourges[0],0.1,0,0,99999)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELECTED)
  call TriggerAddCondition(t,Condition(function Func1739))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DESELECTED)
  call TriggerAddCondition(t,Condition(function Func1738))
  set location001=GetUnitLoc(unit099)
  set location002=GetUnitLoc(unit052)
  set location003=GetUnitLoc(AttackToMid)
  set location004=GetUnitLoc(AttackToLeft)
  set location005=GetUnitLoc(AttackToRight)
  set integer082='A06G'
  set locations001[1]=location002
  set locations001[2]=location004
  set locations001[3]=location003
  set locations001[4]=location005
  set locations001[5]=location001
  call ExecuteFunc("Init_Items")
  call ExecuteFunc("Init_CircleOfPower")
  call InitForces()
  call ExecuteFunc("InitHeroes")
  set t=CreateTrigger()
  set p=Player(15)
  set unit150=CreateUnit(p,'n01B',-7552,7424,270)
  set unit151=CreateUnit(p,'n01P',-7296,7424,270)
  set unit146=CreateUnit(p,'n01N',-7552,7168,270)
  set unit147=CreateUnit(p,'n007',-7296,7168,270)
  set unit142=CreateUnit(p,'n008',-7552,6912,270)
  set unit143=CreateUnit(p,'n0GJ',-7296,6912,270)
  set unit152=CreateUnit(p,'n0GK',-6976,7424,270)
  set unit153=CreateUnit(p,'n0LJ',-6720,7424,270)
  set unit148=CreateUnit(p,'n005',-6976,7168,270)
  set unit149=CreateUnit(p,'n0LI',-6720,7168,270)
  set unit144=CreateUnit(p,'n01D',-6976,6912,270)
  set unit145=CreateUnit(p,'n0LH',-6720,6912,270)
  call SetUnitColor(unit142,ConvertPlayerColor(1))
  call SetUnitColor(unit143,ConvertPlayerColor(1))
  call SetUnitColor(unit144,ConvertPlayerColor(9))
  call SetUnitColor(unit145,ConvertPlayerColor(9))
  call SetUnitColor(unit146,ConvertPlayerColor(6))
  call SetUnitColor(unit147,ConvertPlayerColor(6))
  call SetUnitColor(unit148,ConvertPlayerColor(10))
  call SetUnitColor(unit149,ConvertPlayerColor(10))
  call SetUnitColor(unit150,ConvertPlayerColor(0))
  call SetUnitColor(unit151,ConvertPlayerColor(0))
  call SetUnitColor(unit152,ConvertPlayerColor(11))
  call SetUnitColor(unit153,ConvertPlayerColor(11))
  call TimedReveal(Sentinels[0],4,GetUnitX(unit152),GetUnitY(unit152),900)
  call TimedReveal(Scourges[0],4,GetUnitX(unit152),GetUnitY(unit152),900)
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.01,false)
  call TriggerAddCondition(t,Condition(function Func0968))
  set trigger012=CreateTrigger()
  call TriggerRegisterTimerEventSingle(trigger012,0.01)
  call TriggerAddAction(trigger012,function Func0969)
  set t=CreateTrigger()
  call TriggerRegisterPlayerEventLeave(t,Sentinels[1])
  call TriggerRegisterPlayerEventLeave(t,Sentinels[2])
  call TriggerRegisterPlayerEventLeave(t,Sentinels[3])
  call TriggerRegisterPlayerEventLeave(t,Sentinels[4])
  call TriggerRegisterPlayerEventLeave(t,Sentinels[5])
  call TriggerRegisterPlayerEventLeave(t,Scourges[1])
  call TriggerRegisterPlayerEventLeave(t,Scourges[2])
  call TriggerRegisterPlayerEventLeave(t,Scourges[3])
  call TriggerRegisterPlayerEventLeave(t,Scourges[4])
  call TriggerRegisterPlayerEventLeave(t,Scourges[5])
  call TriggerAddAction(t,function Func0978)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_HERO_SKILL)
  call TriggerAddCondition(t,Condition(function Func0973))
  if udg_ObserverMode then
    set t=CreateTrigger()
    if IsPlayerObserver(udg_Observer1)then
      call TriggerRegisterPlayerEventLeave(t,udg_Observer1)
    endif
    if IsPlayerObserver(udg_Observer2)then
      call TriggerRegisterPlayerEventLeave(t,udg_Observer2)
    endif
    call TriggerAddAction(t,function Func0974)
  endif
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_HERO_REVIVE_FINISH)
  call TriggerAddAction(t,function HeroRespawn)
  set t=CreateTrigger()
  call TriggerRegisterEnterRectSimple(t,Rect(-9999,-9999,9999,9999))
  call TriggerAddCondition(t,Condition(function Func1000))
  call TriggerAddAction(t,function Func1016)
  set trigger030=t
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
  call TriggerAddAction(t,function Func1020)
  call TriggerAddCondition(t,Condition(function Func1019))
  set trigger033=t
  set trigger034=CreateTrigger()
  call TriggerRegisterTimerEvent(trigger034,0.6,true)
  call TriggerAddCondition(trigger034,Condition(function Func1021))
  call DisableTrigger(trigger034)
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,.5,true)
  call TriggerAddAction(t,function Func1022)
  set trigger035=t
  call Func0797(0,0,false)
  call ExecuteFunc("Func1026")
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
  call TriggerAddCondition(t,Condition(function Func1028))
  set trigger013=CreateTrigger()
  call TriggerRegisterPlayerUnitEvent(trigger013,Sentinels[0],EVENT_PLAYER_UNIT_DEATH,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(trigger013,Scourges[0],EVENT_PLAYER_UNIT_DEATH,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(trigger013,Neutrals,EVENT_PLAYER_UNIT_DEATH,Condition(function ReturnTrue))
  call TriggerAddAction(trigger013,function Func1043)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1070))
  call TriggerAddAction(t,function HeroDeath)
  set trigger014=t
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SUMMON)
  call TriggerAddCondition(t,Condition(function Func4817))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1095))
  set trigger036=CreateTrigger()
  call TriggerAddCondition(trigger036,Condition(function Func1102))
  set t=CreateTrigger()
  call TriggerRegisterPlayerUnitEvent(t,Sentinels[0],EVENT_PLAYER_UNIT_DEATH,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Scourges[0],EVENT_PLAYER_UNIT_DEATH,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1113))
  set t=CreateTrigger()
  call TriggerAddCondition(t,Condition(function InitNeutralDots))
  call TriggerRegisterTimerEvent(t,6,false)
  set region009=CreateRegion()
  call RegionAddRect(region009,rect075)
  call RegionAddRect(region009,rect076)
  set RuneSpawnTrigger=CreateTrigger()
  call TriggerAddCondition(RuneSpawnTrigger,Condition(function Func1135))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SELL)
  call TriggerAddCondition(t,Condition(function UnitItem_Enter))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DROP_ITEM)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
  call TriggerAddCondition(t,Condition(function Func1251))
  set t_manipulateitem=t
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DROP_ITEM)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
  call TriggerAddCondition(t,Condition(function Func1273))
  set trigger039=t
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_USE_ITEM)
  call TriggerAddCondition(t,Condition(function Func1281))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1274))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1282))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,1,true)
  call TriggerAddCondition(t,Condition(function Func1296))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerAddCondition(t,Condition(function Func1316))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1320))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DROP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1319))
  call TriggerAddCondition(t,Condition(function Func1322))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1327))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
  call TriggerAddCondition(t,Condition(function Func4815))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.5,true)
  call TriggerAddCondition(t,Condition(function Func1351))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
  call TriggerAddCondition(t,Condition(function Func1377))
  call SetAltMinimapIcon("UI\\MiniMap\\minimap-neutralbuilding.blp")
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_USE_ITEM)
  call TriggerAddCondition(t,Condition(function Func1609))
  set Roshan=CreateUnit(Player(12),'n00L',4300,-2430,180.0)
  call SetUnitAcquireRange(Roshan,150)
  call Func1099()
  if integer118>1 then
    call UnitRemoveAbility(Roshan,'A0K2')
    call UnitAddAbility(Roshan,'A0Q6')
    call UnitAddItem(Roshan,CreateItem(Item_Real[integer205],0,0))
  endif
  call UnitAddItem(Roshan,CreateItem(Item_Real[integer251],0,0))
  call Func1101(Roshan)
  call Func1106(Roshan)
  call AddWrapper("Func1107",0)
  call PauseUnit(CreateUnit(Player(12),'o00G',GetUnitX(Roshan),GetUnitY(Roshan),0),true)
  set t=CreateTrigger()
  call TriggerRegisterUnitInRange(t,AttackToRight,400,Condition(function ReturnTrue))
  call TriggerRegisterUnitInRange(t,AttackToMid,300,Condition(function ReturnTrue))
  call TriggerRegisterUnitInRange(t,AttackToLeft,400,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1611))
  set trigger015=CreateTrigger()
  call TriggerAddAction(trigger015,function Func1612)
  set trigger016=CreateTrigger()
  call TriggerAddAction(trigger016,function Func1613)
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect018)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1617))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect019)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1614))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect017)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1619))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect010)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1620))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect005)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1621))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect006)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1615))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect014)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1618))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect013)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1616))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,rect012)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1622))
  set T1X=null
  set trigger017=CreateTrigger()
  call TriggerAddAction(trigger017,function Func1632)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit067,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1633)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit068,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1634)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit069,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1635)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit064,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1636)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit065,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1637)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit066,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1638)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit114,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1639)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit115,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1640)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit116,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1641)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit111,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1642)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit112,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1643)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit113,EVENT_UNIT_DEATH)
  call TriggerAddAction(t,function Func1644)
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit052,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func1645))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit099,EVENT_UNIT_DAMAGED)
  call TriggerAddCondition(t,Condition(function Func1646))
  set trigger018=CreateTrigger()
  call TriggerAddAction(trigger018,function Func1647)
  set trigger019=CreateTrigger()
  call TriggerRegisterTimerEventSingle(trigger019,75.00)
  call TriggerAddAction(trigger019,function PreloadNeutrals)
  set NeutralSpawnTrigger=CreateTrigger()
  call TriggerAddCondition(NeutralSpawnTrigger,Condition(function Func1673))
  set trigger022=CreateTrigger()
  call TriggerAddAction(trigger022,function Func1676)
  set trigger023=CreateTrigger()
  call TriggerRegisterTimerEventPeriodic(trigger023,1.00)
  call TriggerAddAction(trigger023,function Func1683)
  call ExecuteFunc("InitDispellableBuffsList")
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit056,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(t,unit056,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1748))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit057,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(t,unit057,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1749))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit058,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(t,unit058,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1750))
  set t=CreateTrigger()
  call Func1752(t,unit052)
  call Func1752(t,unit062)
  call Func1752(t,unit063)
  call Func1752(t,Sentinels_Tier3_Bot)
  call Func1752(t,Sentinels_Tier3_Mid)
  call Func1752(t,Sentinels_Tier3_Top)
  call Func1752(t,unit069)
  call Func1752(t,unit068)
  call Func1752(t,unit067)
  call Func1752(t,unit066)
  call Func1752(t,unit065)
  call Func1752(t,unit064)
  call Func1752(t,unit070)
  call Func1752(t,unit071)
  call Func1752(t,unit072)
  call Func1752(t,unit073)
  call Func1752(t,unit074)
  call Func1752(t,unit075)
  call Func1752(t,unit076)
  call Func1752(t,unit077)
  call Func1752(t,unit078)
  call Func1752(t,unit079)
  call Func1752(t,unit080)
  call Func1752(t,unit081)
  call Func1752(t,unit082)
  call Func1752(t,unit083)
  call Func1752(t,unit084)
  call TriggerAddCondition(t,Condition(function Func1751))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit103,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(t,unit103,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1744))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit104,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(t,unit104,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1745))
  set t=CreateTrigger()
  call TriggerRegisterUnitEvent(t,unit105,EVENT_UNIT_DAMAGED)
  call TriggerRegisterUnitEvent(t,unit105,EVENT_UNIT_DEATH)
  call TriggerAddCondition(t,Condition(function Func1746))
  set t=CreateTrigger()
  call Func1752(t,unit099)
  call Func1752(t,unit109)
  call Func1752(t,unit110)
  call Func1752(t,unit108)
  call Func1752(t,unit107)
  call Func1752(t,unit106)
  call Func1752(t,unit116)
  call Func1752(t,unit115)
  call Func1752(t,unit114)
  call Func1752(t,unit113)
  call Func1752(t,unit112)
  call Func1752(t,unit111)
  call Func1752(t,unit117)
  call Func1752(t,unit118)
  call Func1752(t,unit119)
  call Func1752(t,unit120)
  call Func1752(t,unit121)
  call Func1752(t,unit122)
  call Func1752(t,unit123)
  call Func1752(t,unit124)
  call Func1752(t,unit125)
  call Func1752(t,unit126)
  call Func1752(t,unit127)
  call Func1752(t,unit128)
  call Func1752(t,unit129)
  call Func1752(t,unit130)
  call Func1752(t,unit131)
  call TriggerAddCondition(t,Condition(function Func1747))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,5,true)
  call TriggerAddCondition(t,Condition(function Func1763))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,4,true)
  call TriggerAddCondition(t,Condition(function Func1773))
  set group019=CreateGroup()
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,bj_mapInitialPlayableArea)
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1789))
  set trigger027=CreateTrigger()
  call TriggerRegisterUnitEvent(trigger027,unit099,EVENT_UNIT_DEATH)
  call TriggerAddAction(trigger027,function Func1800)
  set trigger028=CreateTrigger()
  call TriggerRegisterUnitEvent(trigger028,unit052,EVENT_UNIT_DEATH)
  call TriggerAddAction(trigger028,function Func1798)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CAST)
  call TriggerAddCondition(t,Condition(function Func1805))
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_DEATH)
  call TriggerAddAction(t,function Func4749)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerAddAction(t,function GenericOnCastEvent)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CAST)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
  call TriggerAddAction(t,function Func4737)
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
  call TriggerAddAction(t,function Func4738)
  call ExecuteFunc("Func1595")
  call Func1025()
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CAST)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
  call TriggerAddCondition(t,Condition(function Func4723))
  set region010=CreateRegion()
  call RegionAddRect(region010,Rect(3456,-2016,4448,-2724))
  set trigger024=CreateTrigger()
  call TriggerRegisterEnterRectSimple(trigger024,bj_mapInitialPlayableArea)
  call TriggerAddCondition(trigger024,Condition(function Func1814))
  call TriggerAddAction(trigger024,function Func1815)
  if(bj_isSinglePlayer and Func1823())then
    call Func1854()
  endif
  if bj_isSinglePlayer then
    set u=CreateUnit(Player(15),'uC74',-7360,-7168,0)
    set u=CreateUnit(Player(15),'uC74',7040,6208,270)
    call AddSpecialEffect("units\\undead\\Acolyte\\Acolyte.mdl",-7360,-7168)
    call AddSpecialEffect("units\\undead\\Acolyte\\Acolyte.mdl",7040,6208)
    set NoHeroLimitOff=false
  endif
  call ExecuteFunc("Func4707")
  set t=CreateTrigger()
  call TriggerRegisterPlayerChatEvent(t,PlayerModeTyper,"-wtf",true)
  call TriggerAddAction(t,function Func1856)
  call TriggerAddCondition(t,Condition(function Func1855))
  set t=CreateTrigger()
  call TriggerRegisterPlayerUnitEvent(t,Sentinels[1],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Sentinels[2],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Sentinels[3],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Sentinels[4],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Sentinels[5],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Scourges[1],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Scourges[2],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Scourges[3],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Scourges[4],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerRegisterPlayerUnitEvent(t,Scourges[5],EVENT_PLAYER_HERO_LEVEL,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1857))
  set t=CreateTrigger()
  call TriggerRegisterPlayerChatEvent(t,PlayerModeTyper,"-test",true)
  call TriggerAddCondition(t,Condition(function Func1859))
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,GetWorldBounds())
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1875))
  set T1X=null
  set t=CreateTrigger()
  call TriggerRegisterUnitInRange(t,AttackToRight,500,Condition(function ReturnTrue))
  call TriggerRegisterUnitInRange(t,AttackToMid,300,Condition(function ReturnTrue))
  call TriggerRegisterUnitInRange(t,AttackToLeft,400,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func1876))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,25,false)
  call TriggerAddAction(t,function Func1878)
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,2,false)
  call TriggerAddCondition(t,Condition(function Func1884))
  set region006=CreateRegion()
  call RegionAddRect(region006,rect022)
  call RegionAddRect(region006,rect021)
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,25,false)
  call TriggerAddAction(t,function Func1891)
  set booleans026[GetPlayerId(Sentinels[1])]=true
  set booleans026[GetPlayerId(Sentinels[2])]=true
  set booleans026[GetPlayerId(Sentinels[3])]=true
  set booleans026[GetPlayerId(Sentinels[4])]=true
  set booleans026[GetPlayerId(Sentinels[5])]=true
  set booleans026[GetPlayerId(Scourges[1])]=true
  set booleans026[GetPlayerId(Scourges[2])]=true
  set booleans026[GetPlayerId(Scourges[3])]=true
  set booleans026[GetPlayerId(Scourges[4])]=true
  set booleans026[GetPlayerId(Scourges[5])]=true
  set ShowRollNumbers[0]=true
  set ShowRollNumbers[1]=true
  set ShowRollNumbers[2]=true
  set ShowRollNumbers[3]=true
  set ShowRollNumbers[4]=true
  set ShowRollNumbers[5]=true
  set ShowRollNumbers[6]=true
  set ShowRollNumbers[7]=true
  set ShowRollNumbers[8]=true
  set ShowRollNumbers[9]=true
  set ShowRollNumbers[10]=true
  set ShowRollNumbers[11]=true
  set ShowRollNumbers[12]=true
  set ShowRollNumbers[13]=true
  set ShowRollNumbers[14]=true
  set ShowRollNumbers[15]=true
  set ZAE=0
  loop
    exitwhen ZAE>16
    set booleans027[ZAE]=true
    set ZAE=ZAE+1
  endloop
  set t=CreateTrigger()
  call TriggerRegisterHumanUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
  call TriggerRegisterHumanUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
  call TriggerRegisterHumanUnitEvent(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
  call TriggerAddCondition(t,Condition(function Func2076))
  call TriggerAddCondition(t,Condition(function DoubleHold))
  call TriggerAddCondition(t,Condition(function Func4788))
  call TriggerAddCondition(t,Condition(function Func4766))
  set trigger001=t
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,5,true)
  call TriggerAddCondition(t,Condition(function Func2075))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.01,false)
  call TriggerAddCondition(t,Condition(function Func2082))
  set t=CreateTrigger()
  set i=GetHandleId(t)
  call TriggerRegisterTimerEvent(t,0.02,true)
  call TriggerAddCondition(t,Condition(function Func2122))
  call SaveReal(HY,(i),149,(0*1.0))
  call SaveReal(HY,(i),150,(0*1.0))
  call SaveReal(HY,(i),151,(160*1.0))
  set t=CreateTrigger()
  call TriggerAddAction(t,function Func2131)
  call TriggerAddCondition(t,Condition(function Func2125))
  set trigger041=t
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,0.01,false)
  call TriggerAddCondition(t,Condition(function Func2132))
  set t=CreateTrigger()
  call Func1849(t,"",false)
  call TriggerAddAction(t,function Func2008)
  if udg_ObserverMode then
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,1,true)
    set texttag001=CreateTextTag()
    set texttag002=CreateTextTag()
    call TriggerAddCondition(t,Condition(function Func2270))
  endif
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,14,false)
  call TriggerAddCondition(t,Condition(function Func2303))
  set t=CreateTrigger()
  call TriggerRegisterTimerEvent(t,15,false)
  call TriggerAddCondition(t,Condition(function Func2302))
  set trigger025=CreateTrigger()
  call TriggerRegisterTimerEventSingle(trigger025,120.00)
  call TriggerAddAction(trigger025,function Func2304)
  set t=CreateTrigger()
  set T1X=CreateRegion()
  call RegionAddRect(T1X,GetWorldBounds())
  call TriggerRegisterEnterRegion(t,T1X,Condition(function ReturnTrue))
  call TriggerAddCondition(t,Condition(function Func3514))
  set T1X=null
  set FountainSentRect=Rect(-7648,-7800,-6350,-6400)
  set FountainScrgRect=Rect(6317,5204,7712,6512)
  set region003=CreateRegion()
  call RegionAddRect(region003,FountainSentRect)
  set region004=CreateRegion()
  call RegionAddRect(region004,FountainScrgRect)
  set t=CreateTrigger()
  call TriggerAddCondition(t,Condition(function Func4760))
  call TriggerRegisterTimerEvent(t,0.1,true)
  call TriggerRegisterLeaveRegion(t,region003,Condition(function Func4759))
  call TriggerRegisterLeaveRegion(t,region004,Condition(function Func4759))
  set trigger002=t
  set T1X=null
  call InitShopping()
  call Func4802()
  set trigger032=CreateTrigger()
  call TriggerAddCondition(trigger032,Condition(function Func4799))
  call EnumDestructablesInRect(bj_mapInitialPlayableArea,Condition(function ReturnTrue),function Func4800)
  set unit018=CreateUnit(Player(15),'H00Y',0,0,0)
  call ShowUnit(unit018,false)
  call PauseUnit(unit018,true)
  set tt=CreateTimer()
  call SaveTimerHandle(HY,GetHandleId(unit018),0,tt)
  set tt=CreateTimer()
  call SaveTimerHandle(HY,GetHandleId(unit018),1,tt)
  call PreloadAbility('A3HA')
  set i=0
  loop
    call PreloadAbility('AX00'+i)
    set i=i+1
    exitwhen i>10
  endloop
  set i=0
  loop
    call PreloadAbility('AX10'+i)
    set i=i+1
    exitwhen i>10
  endloop
  set i=0
  loop
    call PreloadAbility('AX20'+i)
    set i=i+1
    exitwhen i>12
  endloop
  set i=0
  loop
    call PreloadAbility('AX30'+i)
    set i=i+1
    exitwhen i>10
  endloop
  set i=0
  loop
    call PreloadAbility('AX40'+i)
    call HideAbility('AX40'+i)
    set i=i+1
    exitwhen i>9
  endloop
  set i=0
  loop
    call PreloadAbility('AX50'+i)
    call HideAbility('AX50'+i)
    set i=i+1
    exitwhen i>9
  endloop
  set i=0
  loop
    call PreloadAbility('A3M0'+i)
    set i=i+1
    exitwhen i>9
  endloop
  call HideAbility('A1VV')
  call HideAbility('A3AK')
  call HideAbility('A3AM')
  call HideAbility('A30B')
  call HideAbility('A0HU')
  call HideAbility('A0HX')
  set i=0
  loop
    call HideAbility('A3MC'+i)
    set i=i+1
    exitwhen i>19
  endloop
  call SetPlayerTechResearched(Neutrals,'R00N',1)
  call Func4775()
  call SaveInteger(UTable,'Hamg','Z008','A34P')
  call SaveInteger(UTable,'H06S','Z008','A34T')
  call SaveReal(hashtable011,-1,0,0.0038)
  call SaveReal(hashtable011,-1,1,0.0147)
  call SaveReal(hashtable011,-1,2,0.0322)
  call SaveReal(hashtable011,-1,3,0.0557)
  call SaveReal(hashtable011,-1,4,0.0847)
  call SaveReal(hashtable011,-1,5,0.1189)
  call SaveReal(hashtable011,-1,6,0.1579)
  call SaveReal(hashtable011,-1,7,0.2015)
  call SaveReal(hashtable011,-1,8,0.2493)
  call SaveReal(hashtable011,-1,9,0.3021)
  call SaveReal(hashtable011,-1,10,0.3604)
  call SaveReal(hashtable011,-1,11,0.4226)
  call SaveReal(hashtable011,-1,12,0.4811)
  call SaveReal(hashtable011,-1,13,0.5714)
  call SaveReal(hashtable011,-1,14,0.6666)
  call SaveReal(hashtable011,-1,15,0.7500)
  call SaveReal(hashtable011,-1,16,0.8235)
  call SaveReal(hashtable011,-1,17,0.8888)
  call SaveReal(hashtable011,-1,18,0.9473)
  call SaveReal(hashtable011,-1,19,1.0000)
  set integers024[0]='A354'
  set integers024[1]='A355'
  set integers024[2]='A356'
  set integers024[3]='A357'
  set integers024[4]='A358'
  set integers024[5]='A359'
  set integers024[6]='A35A'
  call ExecuteFunc("Func4592")
  call ExecuteFunc("Func0869")
  call ExecuteFunc("Func4748")
  call ExecuteFunc("Func0588")
  call ExecuteFunc("InitAbilitiesWithoutCastEvent")
  call ExecuteFunc("TestDisableSaveGameButton")
  if bj_isSinglePlayer then
    set boolean025=true
    set boolean109=true
    set t=CreateTrigger()
    call TriggerRegisterTimerEvent(t,0,false)
    set t=null
    if(PlayerNames[1]=="df" or PlayerNames[2]=="df" or PlayerNames[3]=="df" or PlayerNames[4]=="df" or PlayerNames[5]=="df" or PlayerNames[6]=="df" or PlayerNames[8]=="df" or PlayerNames[7]=="df" or PlayerNames[8]=="df" or PlayerNames[9]=="df" or PlayerNames[10]=="df" or PlayerNames[11]=="df")then
      set IsL1ch=true
    endif
    set boolean010=true
  endif
  set t=CreateTrigger()
  call TriggerRegisterAnyUnitEvent(t,EVENT_PLAYER_UNIT_CHANGE_OWNER)
  call TriggerAddCondition(t,Condition(function Func4819))
  set t=CreateTrigger()
  call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(7),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(8),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(9),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(10),EVENT_PLAYER_END_CINEMATIC)
  call TriggerRegisterPlayerEvent(t,Player(11),EVENT_PLAYER_END_CINEMATIC)
  call TriggerAddAction(t,function Func4811)
  call ExecuteFunc("Func4813")
  call Func2005(92)
  call TimerStart(CreateTimer(),0.1,true,function Func4688)
  call Func0362(true)
  call TimerStart(CreateTimer(),0.1,true,function Func0361)
  call UpdateGoldColumnColor()
  call AddWrapper("Func4678",'preH')
  call Func0368(true)
  call ToggleClickHelper(false)
  call Func1193()
endfunction

function config takes nothing returns nothing
  call SetMapName("TRIGSTR_50000")
  call SetMapDescription("TRIGSTR_50001")
  call SetPlayers(10)
  call DefineStartLocation(0,-6990.,7040.)
  call DefineStartLocation(1,-6990.,7040.)
  call DefineStartLocation(2,-6990.,7040.)
  call DefineStartLocation(3,-6990.,7040.)
  call DefineStartLocation(4,-6990.,7040.)
  call DefineStartLocation(5,-6990.,7040.)
  call DefineStartLocation(6,-6990.,7040.)
  call DefineStartLocation(7,-6990.,7040.)
  call DefineStartLocation(8,-6990.,7040.)
  call DefineStartLocation(9,-6990.,7040.)
  call SetPlayerColor(Player(1),ConvertPlayerColor(1))
  call SetPlayerRacePreference(Player(1),RACE_PREF_NIGHTELF)
  call SetPlayerRaceSelectable(Player(1),false)
  call SetPlayerController(Player(1),MAP_CONTROL_USER)
  call SetPlayerColor(Player(2),ConvertPlayerColor(2))
  call SetPlayerRacePreference(Player(2),RACE_PREF_NIGHTELF)
  call SetPlayerRaceSelectable(Player(2),false)
  call SetPlayerController(Player(2),MAP_CONTROL_USER)
  call SetPlayerColor(Player(3),ConvertPlayerColor(3))
  call SetPlayerRacePreference(Player(3),RACE_PREF_NIGHTELF)
  call SetPlayerRaceSelectable(Player(3),false)
  call SetPlayerController(Player(3),MAP_CONTROL_USER)
  call SetPlayerColor(Player(4),ConvertPlayerColor(4))
  call SetPlayerRacePreference(Player(4),RACE_PREF_NIGHTELF)
  call SetPlayerRaceSelectable(Player(4),false)
  call SetPlayerController(Player(4),MAP_CONTROL_USER)
  call SetPlayerColor(Player(5),ConvertPlayerColor(5))
  call SetPlayerRacePreference(Player(5),RACE_PREF_NIGHTELF)
  call SetPlayerRaceSelectable(Player(5),false)
  call SetPlayerController(Player(5),MAP_CONTROL_USER)
  call SetPlayerColor(Player(7),ConvertPlayerColor(7))
  call SetPlayerRacePreference(Player(7),RACE_PREF_UNDEAD)
  call SetPlayerRaceSelectable(Player(7),false)
  call SetPlayerController(Player(7),MAP_CONTROL_USER)
  call SetPlayerColor(Player(8),ConvertPlayerColor(8))
  call SetPlayerRacePreference(Player(8),RACE_PREF_UNDEAD)
  call SetPlayerRaceSelectable(Player(8),false)
  call SetPlayerController(Player(8),MAP_CONTROL_USER)
  call SetPlayerColor(Player(9),ConvertPlayerColor(9))
  call SetPlayerRacePreference(Player(9),RACE_PREF_UNDEAD)
  call SetPlayerRaceSelectable(Player(9),false)
  call SetPlayerController(Player(9),MAP_CONTROL_USER)
  call SetPlayerColor(Player(10),ConvertPlayerColor(10))
  call SetPlayerRacePreference(Player(10),RACE_PREF_UNDEAD)
  call SetPlayerRaceSelectable(Player(10),false)
  call SetPlayerController(Player(10),MAP_CONTROL_USER)
  call SetPlayerColor(Player(11),ConvertPlayerColor(11))
  call SetPlayerRacePreference(Player(11),RACE_PREF_UNDEAD)
  call SetPlayerRaceSelectable(Player(11),false)
  call SetPlayerController(Player(11),MAP_CONTROL_USER)
  call SetPlayerTeam(Player(1),0)
  call SetPlayerTeam(Player(2),0)
  call SetPlayerTeam(Player(3),0)
  call SetPlayerTeam(Player(4),0)
  call SetPlayerTeam(Player(5),0)
  call SetPlayerTeam(Player(7),1)
  call SetPlayerTeam(Player(8),1)
  call SetPlayerTeam(Player(9),1)
  call SetPlayerTeam(Player(10),1)
  call SetPlayerTeam(Player(11),1)
  call SetPlayerAlliance(Player(15),Player(1),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(2),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(3),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(4),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(5),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(7),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(8),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(9),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(10),ConvertAllianceType(6),true)
  call SetPlayerAlliance(Player(15),Player(11),ConvertAllianceType(6),true)
endfunction
